<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="DiscreteMediaRightFulfill" resourceRoot="${projectDir}" soapui-version="4.6.1" activeEnvironment="Default" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="true"/>
  <con:entry key="Enable UI" value="true"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="true"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value="D:\Execution_Report_R2_Builds\Build_1_0_3_1_H_NewTCs\DMRConsume"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="true"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.ProTestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value="/opt/dece/applications/soapui-pro-4.5.1/bin"/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="true"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value="/opt/dece/Reports/R3/DiscreteMediaRightConsume_R3"/>
  <con:entry key="Save After" value="true"/>
  <con:entry key="Add Settings" value="true"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/home/QAUV/Desktop/R4Reports/DMRConsume</con:setting></con:settings><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DiscreteMediaRightConsume" type="rest" basePath="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="DiscreteMediaRightConsume" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/${#Project#ContentProfile}/DiscreteMediaRight/${#Project#DiscreteMediaProfileInURL}/Consume"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>${#Project#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:default>${#Project#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>${#TestCase#RightsTokenId}</con:value><con:style>TEMPLATE</con:style><con:default>${#TestCase#RightsTokenId}</con:default></con:parameter></con:parameters><con:method name="DiscreteMediaRightConsumePost" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202 200 201</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400 401 500 404 403 409</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503 401 500 404 400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405 500</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403 404 409 400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:DiscreteMediaToken</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="DiscreteMediaRightConsumePost" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumePut" method="PUT"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202 200</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumePut" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeGet" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400 401</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503 500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeGet" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeDelete" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeOptions" method="OPTIONS"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeOptions" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeHead" method="HEAD"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeHead" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="DiscreteMediaRightCreateConsume" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>${#Project#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:default>${#Project#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>${#TestCase#RightsTokenId}</con:value><con:style>TEMPLATE</con:style><con:default>${#TestCase#RightsTokenId}</con:default></con:parameter></con:parameters><con:method name="DiscreteMediaRightConsumePost" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202 200 201</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400 401 500 404 403 409</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503 401 500 404 400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405 500 503</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403 404 409 400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:DiscreteMediaToken</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404 502</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumePost" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumePut" method="PUT"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202 200</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumePut" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeGet" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400 401</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503 500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeGet" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeDelete" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeOptions" method="OPTIONS"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeOptions" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method><con:method name="DiscreteMediaRightConsumeHead" method="HEAD"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="DiscreteMediaRightConsumeHead" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="RightsTokenCreate" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="RightsTokenCreate" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken"><con:settings/><con:parameters><con:parameter disableUrlEncoding="true"><con:name>NodeAccountId</con:name><con:style>TEMPLATE</con:style><con:default>${#Project#NodeAccountId}</con:default></con:parameter></con:parameters><con:method name="RightsTokenCreatePost" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>500 404 401 502 503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500 400</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>401 404 400 500 403</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>503 500</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:request name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion = ${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:RightsTokenData xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" xmlns:dece="http://www.decellc.org/schema" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:ALID>${#Project#ALID}</dece:ALID>
   <dece:CID>${#Project#CID}</dece:CID>
   <dece:SoldAs>
      <dece:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</dece:DisplayName>
      <dece:CID>${#Project#SoldAsCID}</dece:CID>
      <dece:BundleID>${#Project#SoldAsBundleId}</dece:BundleID>
   </dece:SoldAs>
   <dece:RightsProfiles>
      <dece:PurchaseProfile Profile="${#Project#PurchasedMediaProfile}">
         <dece:BurnsLeft>${#Project#PurchaseProfileBurnsLeft}</dece:BurnsLeft>
         <dece:CanDownload>${#Project#PurchaseProfileCanDownLoad}</dece:CanDownload>
         <dece:CanStream>${#Project#PurchaseProfileCanStream}</dece:CanStream>
      </dece:PurchaseProfile>
   </dece:RightsProfiles>
   <dece:LicenseAcqLoc DRMType="${#Project#LicenseAcqLoc1DRMType}">
      <dece:Location>${#Project#LicenseAcqLoc1Location}</dece:Location>
      <dece:Preference>${#Project#LicenseAcqLoc1Preference}</dece:Preference>
   </dece:LicenseAcqLoc>
   <dece:LicenseAcqLoc DRMType="${#Project#LicenseAcqLoc1DRMType}">
      <dece:Location>${#Project#LicenseAcqLoc2Location}</dece:Location>
      <dece:Preference>${#Project#LicenseAcqLoc2Preference}</dece:Preference>
   </dece:LicenseAcqLoc>
   <dece:LicenseAcqLoc DRMType="${#Project#LicenseAcqLoc1DRMType}">
      <dece:Location>${#Project#LicenseAcqLoc3Location}</dece:Location>
      <dece:Preference>${#Project#LicenseAcqLoc3Preference}</dece:Preference>
   </dece:LicenseAcqLoc>
   <dece:FulfillmentWebLoc xsi:type="dece:ResourceLocation-type">
      <dece:Location>${#Project#FulfillmentWebLoc1Location}</dece:Location>
      <dece:Preference>${#Project#FulfillmentWebLoc1Preference}</dece:Preference>
   </dece:FulfillmentWebLoc>
   <dece:FulfillmentManifestLoc xsi:type="dece:ResourceLocation-type">
      <dece:Location>${#Project#FulfillmentManifestLoc1Location}</dece:Location>
      <dece:Preference>${#Project#FulfillmentManifestLoc1Preference}</dece:Preference>
   </dece:FulfillmentManifestLoc>
   <dece:PurchaseInfo>
      <dece:RetailerID>${#Project#PurchaseInfoRetailerID}</dece:RetailerID>
      <dece:RetailerTransaction>${#Project#RetailerTransactionId}</dece:RetailerTransaction>
      <dece:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</dece:PurchaseAccount>
      <dece:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</dece:PurchaseUser>
      <dece:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</dece:PurchaseTime>
   </dece:PurchaseInfo>
   <dece:ViewControl>
      <dece:AllowedUser/>
   </dece:ViewControl>
</dece:RightsTokenData>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:inferredSchema><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment><inf:schema xmlns:inf="http://www.eviware.com/soapui/InferredSchema"><inf:namespace>https://qa.p.dece.neustar.com</inf:namespace><inf:particle xsi:type="inf:ElementParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>data</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:qa="https://qa.p.dece.neustar.com">qa:_data</inf:reference></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>html</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:qa="https://qa.p.dece.neustar.com">qa:_html</inf:reference></inf:type></inf:particle><inf:prefix key="http://www.w3.org/2001/XMLSchema" value="xs"/><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>html_body</inf:name><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>h1</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>p</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>hr</inf:name><inf:type xsi:type="inf:EmptyType"><inf:completed>true</inf:completed></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>address</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:comesBefore qname="qa:h1" xmlns:qa="https://qa.p.dece.neustar.com"><inf:other>qa:p</inf:other><inf:other>qa:hr</inf:other><inf:other>qa:address</inf:other></inf:comesBefore><inf:comesBefore qname="qa:hr" xmlns:qa="https://qa.p.dece.neustar.com"><inf:other>qa:address</inf:other></inf:comesBefore><inf:comesBefore qname="qa:address" xmlns:qa="https://qa.p.dece.neustar.com"/><inf:comesBefore qname="qa:p" xmlns:qa="https://qa.p.dece.neustar.com"><inf:other>qa:hr</inf:other><inf:other>qa:address</inf:other></inf:comesBefore></inf:content></inf:complexType><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>_html</inf:name><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>head</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:qa="https://qa.p.dece.neustar.com">qa:html_head</inf:reference></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>body</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:qa="https://qa.p.dece.neustar.com">qa:html_body</inf:reference></inf:type></inf:particle><inf:comesBefore qname="qa:head" xmlns:qa="https://qa.p.dece.neustar.com"><inf:other>qa:body</inf:other></inf:comesBefore><inf:comesBefore qname="qa:body" xmlns:qa="https://qa.p.dece.neustar.com"/></inf:content></inf:complexType><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>html_head</inf:name><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>meta</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:qa="https://qa.p.dece.neustar.com">qa:head_meta</inf:reference></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>title</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:comesBefore qname="qa:meta" xmlns:qa="https://qa.p.dece.neustar.com"><inf:other>qa:title</inf:other></inf:comesBefore><inf:comesBefore qname="qa:title" xmlns:qa="https://qa.p.dece.neustar.com"/></inf:content></inf:complexType><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>head_meta</inf:name><inf:attribute xsi:type="inf:AttributeParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>content</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:attribute><inf:attribute xsi:type="inf:AttributeParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>name</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:attribute><inf:content xsi:type="inf:EmptyContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed></inf:content></inf:complexType><inf:complexType><inf:completed>true</inf:completed><inf:mixed>true</inf:mixed><inf:name>_data</inf:name><inf:attribute xsi:type="inf:AttributeParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>contentType</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:attribute><inf:attribute xsi:type="inf:AttributeParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>contentLength</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>positiveInteger</inf:typeName></inf:type></inf:attribute><inf:content xsi:type="inf:SimpleContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:typeName>string</inf:typeName></inf:content></inf:complexType></inf:schema><inf:schema xmlns:inf="http://www.eviware.com/soapui/InferredSchema"><inf:namespace>http://www.decellc.org/schema</inf:namespace><inf:particle xsi:type="inf:ElementParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>Errors</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:sch="http://www.decellc.org/schema">sch:_Errors</inf:reference></inf:type></inf:particle><inf:prefix key="http://www.w3.org/2001/XMLSchema" value="xs"/><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>Errors_Error</inf:name><inf:attribute xsi:type="inf:AttributeParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>ErrorID</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:attribute><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>Reason</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>OriginalRequest</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>ErrorLink</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:comesBefore qname="sch:ErrorLink" xmlns:sch="http://www.decellc.org/schema"/><inf:comesBefore qname="sch:OriginalRequest" xmlns:sch="http://www.decellc.org/schema"><inf:other>sch:ErrorLink</inf:other></inf:comesBefore><inf:comesBefore qname="sch:Reason" xmlns:sch="http://www.decellc.org/schema"><inf:other>sch:OriginalRequest</inf:other><inf:other>sch:ErrorLink</inf:other></inf:comesBefore></inf:content></inf:complexType><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>_Errors</inf:name><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>Error</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:sch="http://www.decellc.org/schema">sch:Errors_Error</inf:reference></inf:type></inf:particle><inf:comesBefore qname="sch:Error" xmlns:sch="http://www.decellc.org/schema"/></inf:content></inf:complexType></inf:schema></xml-fragment>]]></con:inferredSchema></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DiscreteMediaRightCreate" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="DiscreteMediaRightCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight"><con:settings/><con:parameters><con:parameter disableUrlEncoding="true"><con:name>NodeAccountId</con:name><con:value>${#Project#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#NodeAccountId}</con:default></con:parameter><con:parameter disableUrlEncoding="true"><con:name>RightsTokenId</con:name><con:value>${#TestCase#RightsTokenId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#RightsTokenId}</con:default></con:parameter></con:parameters><con:method name="DiscreteMediaRightCreatePost" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200 201 202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 404 409 500</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>400 401 404 500 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 404 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2015/03/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightCreatePut" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200 202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightCreateGet" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>500 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightCreateDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightCreateOptions" method="OPTIONS"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightCreateHead" method="HEAD"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="AccountCreate" type="rest" basePath="${#Project#HostName}" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="AccountCreate" path="rest/$major/$minor/Account"><con:settings/><con:parameters/><con:method name="AccountCreate - AccountCreate" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>403 404 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 500</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 403 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings/><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="AccountGET - AccountGET" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200 201 303</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>403 404 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 500</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 403 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="Account" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/urn:dece:accountid:org:dece:{AccountID}"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:resource name="Account_ResourceStatusUpdate" path="ResourceStatus/Current/Update"><con:settings/><con:parameters/><con:method name="Account_StatusUpdate - Account_StatusUpdate" method="PUT"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:method name="AccountGet - AccountGet" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>401 403</con:status><con:params/><con:element xmlns:urn="urn:oasis:names:tc:SAML:2.0:protocol">urn:Response</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="AccountDelete - AccountDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="AccountUpdate - AccountUpdate" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:urn="urn:oasis:names:tc:SAML:2.0:protocol">urn:Response</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="E2EServices" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="E2E_AccountCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account"><con:settings/><con:parameters/><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="E2E_FirstUser" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value>AccountID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AccountID</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:User</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:User</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="E2E_SinglePolicyCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/User/{NodeUserId}/Policy/{PolicyClass}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>NodeUserId</con:name><con:value>NodeUserId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeUserId</con:default></con:parameter><con:parameter><con:name>PolicyClass</con:name><con:value>PolicyClass</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>PolicyClass</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="E2E_ManageAccountConcentPolicy" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/Policy/{PolicyClass}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>PolicyClass</con:name><con:value>PolicyClass</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>PolicyClass</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="E2E_STSCreate" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange?tokentype=${#TestCase#tokentype}&amp;audience=${#TestCase#audience}"><con:settings/><con:parameters/><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:Credentials</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:coor="${Coordinator_Schema}">coor:Credentials</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="E2E_STSGet" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{ASSERTION}"><con:settings/><con:parameters><con:parameter><con:name>ASSERTION</con:name><con:value>ASSERTION</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>ASSERTION</con:default></con:parameter></con:parameters><con:method name="Method 1" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Coordinator APIs" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="PolicyGet I" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>USER</con:name><con:value>${#TestCase#assertionUserIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionUserIdFULL}</con:default></con:parameter><con:parameter><con:name>POLICYCLASS</con:name><con:value>${#TestCase#policyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#policyClass}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="GET-1" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2015/03/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2015/03/coordinator">coor:PolicyList</con:element></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="PolicyGet Account" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Policy/{POLICYCLASS}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>POLICYCLASS</con:name><con:value>${#TestCase#policyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#policyClass}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DECE Policy PolicyCreate" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="PolicyCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>USER</con:name><con:value>${#TestCase#assertionUserIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionUserIdFULL}</con:default></con:parameter><con:parameter><con:name>POLICYCLASS</con:name><con:value>${#TestCase#policyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#policyClass}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2015/03/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="PolicyCreate Account" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Policy/{POLICYCLASS}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>POLICYCLASS</con:name><con:value>${#TestCase#policyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#policyClass}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DECE StreamCreate API" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="StreamCreate" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Stream"><con:settings/><con:parameters><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 404 409 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>401 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>0 200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 201</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:StreamCreate-resp</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain</con:mediaType><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/html</con:mediaType><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="POST-1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 404 409 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>401 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>0 200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 201</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:StreamCreate-resp</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain</con:mediaType><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/html</con:mediaType><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="RightsTokenCreate" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/RightsToken"><con:settings/><con:parameters><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter><con:parameter><con:name>ACCT</con:name><con:value>${#testCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#testCase#assertionAccountIdFULL}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="StreamView" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Stream/{STREAM}"><con:settings/><con:parameters><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>STREAM</con:name><con:value>${#TestCase#streamhandleFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#streamhandleFULL}</con:default></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 404 500</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 200</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Stream</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="StreamListView" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Stream/List"><con:settings/><con:parameters><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>404 413 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:html</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 500</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0 200</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Account</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="RightsToken Delete" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/RightsToken/{RT}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#Project#urnacct}${#TestCase#rtrnodeaccountid}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#urnacct}${#TestCase#rtrnodeaccountid}</con:default></con:parameter><con:parameter><con:name>RT</con:name><con:value>${#Project#urnrightstoken}${#TestCase#rightstokenid}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#urnrightstoken}${#TestCase#rightstokenid}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="DELETE" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="STS" path="rest/{MAJOR}/{MINOR}/SecurityToken/SecurityTokenExchange"><con:settings/><con:parameters><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters><con:parameter><con:name>tokentype</con:name><con:value>${#TestCase#tokentype}</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#tokentype}</con:default></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain</con:mediaType><con:status>0 201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="STS GET" path="rest/{MAJOR}/{MINOR}/SecurityToken/Assertion/{ASSERTION}"><con:settings/><con:parameters><con:parameter><con:name>ASSERTION</con:name><con:value>${#TestCase#assertionUUID}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionUUID}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>0 200</con:status><con:params/><con:element xmlns:urn="urn:oasis:names:tc:SAML:2.0:protocol">urn:Response</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="StreamDelete" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Stream/{STREAMHANDLE}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>STREAMHANDLE</con:name><con:value>${#TestCase#streamhandleFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#streamhandleFULL}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="Delete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Policies" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="PolicyDelete Account" path="rest/{MAJOR}/{MINOR}/Account/{ACCT}/Policy/{POLICYCLASS}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>POLICYCLASS</con:name><con:value>${#TestCase#policyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#policyClass}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="DELETE" method="DELETE"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="PolicyDelete User" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}"><con:settings/><con:parameters><con:parameter><con:name>ACCT</con:name><con:value>${#TestCase#assertionAccountIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionAccountIdFULL}</con:default></con:parameter><con:parameter><con:name>USER</con:name><con:value>${#TestCase#assertionUserIdFULL}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#assertionUserIdFULL}</con:default></con:parameter><con:parameter><con:name>POLICYCLASS</con:name><con:value>${#TestCase#policyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#policyClass}</con:default></con:parameter><con:parameter><con:name>MAJOR</con:name><con:value>${#Project#versionMajor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMajor}</con:default></con:parameter><con:parameter><con:name>MINOR</con:name><con:value>${#Project#versionMinor}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#versionMinor}</con:default></con:parameter></con:parameters><con:method name="DELETE" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Account" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="AccountCreate" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account"><con:settings/><con:parameters/><con:method name="AccountCreate" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>403 404 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 500</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 403 405 500 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="AccountGET" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200 201 303</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>403 404 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 500</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 403 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="Account" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:method name="AccountGet" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403</con:status><con:params/><con:element xmlns:urn="urn:oasis:names:tc:SAML:2.0:protocol">urn:Response</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="AccountDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="AccountUpdate" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:urn="urn:oasis:names:tc:SAML:2.0:protocol">urn:Response</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:Account</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DMR" type="rest" basePath="${#Project#Provision_HostName}" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:endpoint>${#Project#Provision_HostName}</con:endpoint></con:endpoints><con:resource name="DMRCreate" path="rest/{SchemaVersion}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>${#TestCase#NodeAccountID}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#NodeAccountID}</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>RightsTokenId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>RightsTokenId</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value>${#Project#SchemaVersion}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#SchemaVersion}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="DMRLeaseCreate" path="rest/{SchemaVersion}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/{ContentProfile}/DiscreteMediaRight/{DiscreteMediaTokenID}/{DiscreteMediaFulfillmentMethod}/Lease"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>RightsTokenId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>RightsTokenId</con:default></con:parameter><con:parameter><con:name>ContentProfile</con:name><con:value>ContentProfile</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>ContentProfile</con:default></con:parameter><con:parameter><con:name>DiscreteMediaTokenID</con:name><con:value>DiscreteMediaTokenID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>DiscreteMediaTokenID</con:default></con:parameter><con:parameter><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>DiscreteMediaFulfillmentMethod</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>DiscreteMediaFulfillmentMethod</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>401</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403 409</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="DMRGET_Update_Delete_107" path="rest/{SchemaVersion}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/{DiscreteMediaTokenId}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>RightsTokenId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>RightsTokenId</con:default></con:parameter><con:parameter><con:name>DiscreteMediaTokenId</con:name><con:value>DiscreteMediaTokenId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>DiscreteMediaTokenId</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>401 404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400 403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="HEAD" method="HEAD"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DMRDelete_107" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DMRUpdate_107" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="DMRList" path="rest/{SchemaVersion}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/List"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>RightsTokenId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>RightsTokenId</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value>${#Project#SchemaVersion}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#SchemaVersion}</con:default></con:parameter></con:parameters><con:method name="GET" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaTokenList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="HEAD" method="HEAD"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaTokenList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=ISO-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>304</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="DMRConsume" path="rest/{SchemaVersion}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/{ContentProfile}/DiscreteMediaRight/{DiscreteMediaFulfillmentMethod}/Consume"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>${#TestCase#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>${#TestCase#rightsTokenId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#rightsTokenId}</con:default></con:parameter><con:parameter><con:name>ContentProfile</con:name><con:value>${#TestCase#mediaProfile}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#mediaProfile}</con:default></con:parameter><con:parameter><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>${#TestCase#fulfillmentMethod}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#fulfillmentMethod}</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value>${#Project#SchemaVersion}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#SchemaVersion}</con:default></con:parameter></con:parameters><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2011/08/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="DMRLease_Update_Delete_06" path="rest/{SchemaVersion}/Account/{NodeAccountID}/RightsToken/DiscreteMediaRight/{DiscreteMediaRightID}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountID</con:name><con:value>${#TestCase#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>DiscreteMediaRightID</con:name><con:value>${#TestCase#discreteMediaRightId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#discreteMediaRightId}</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value>${#Project#SchemaVersion}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#SchemaVersion}</con:default></con:parameter></con:parameters><con:resource name="Consume_106" path="Consume"><con:settings/><con:parameters/><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="Release" path="Lease/Release"><con:settings/><con:parameters/><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="Renew" path="Lease/Renew"><con:settings/><con:parameters/><con:method name="PUT" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:ns="http://wadl.dev.java.net/2009/02">ns:data</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="Consume_107" path="Lease/Consume"><con:settings/><con:parameters/><con:method name="POST" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:method name="DMRDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DMRUpdate" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="DMRUpdate_Delete_07" path="rest/{SchemaVersion}/Account/{NodeAccountID}/RightsToken/{RightsTokenID}/DiscreteMediaRight/{DiscreteMediaRightID}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountID</con:name><con:value>${#TestCase#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>DiscreteMediaRightID</con:name><con:value>${#TestCase#discreteMediaRightId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#discreteMediaRightId}</con:default></con:parameter><con:parameter><con:name>SchemaVersion</con:name><con:value>${#Project#SchemaVersion}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#SchemaVersion}</con:default></con:parameter><con:parameter><con:name>RightsTokenID</con:name><con:value>${#TestCase#RightsTokenID}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#RightsTokenID}</con:default></con:parameter></con:parameters><con:method name="DMRDelete" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DMRUpdate" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="STS" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="STSCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange"><con:settings/><con:parameters><con:parameter disableUrlEncoding="true"><con:name>tokentype</con:name><con:value>tokentype</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>tokentype</con:default></con:parameter><con:parameter disableUrlEncoding="true"><con:name>audience</con:name><con:value>audience</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>audience</con:default></con:parameter></con:parameters><con:method name="STSCreate" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:Credentials</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:Credentials</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings/><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="STSGet" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{assertionUUID}"><con:settings/><con:parameters><con:parameter><con:name>assertionUUID</con:name><con:value>assertionUUID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>assertionUUID</con:default></con:parameter></con:parameters><con:method name="STSGet" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Users" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="UserCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User"><con:settings/><con:parameters><con:parameter disableUrlEncoding="true"><con:name>AccountID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:method name="UserCreate" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:User</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="UserGet" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User/{UserID}"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter><con:parameter><con:name>UserID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:method name="UserGet" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="Head" method="HEAD"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="Options" method="OPTIONS"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="Put" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="Post" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="Delete" method="DELETE"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="UserUpdate" path="rest/${Project#V1}/${#Project#versionMinor}/Account/{AccountID}/User/{UserID}"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter><con:parameter><con:name>UserID</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/></con:parameter></con:parameters><con:method name="UserUpdate" method="PUT"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserDelete" method="DELETE"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="UserPolicy" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="UserPolicyCreate" path="rest/{SchemaVersion}/Account/{NodeAccountId}/User/{NodeUserId}/Policy/{PolicyClass}"><con:settings/><con:parameters><con:parameter><con:name>SchemaVersion</con:name><con:value>${#Project#SchemaVersion}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#SchemaVersion}</con:default></con:parameter><con:parameter><con:name>NodeAccountId</con:name><con:value>${#TestCase#AccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#AccountId}</con:default></con:parameter><con:parameter><con:name>NodeUserId</con:name><con:value>${#TestCase#NodeUserId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#NodeUserId}</con:default></con:parameter><con:parameter><con:name>PolicyClass</con:name><con:value>${#TestCase#PolicyClass}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#PolicyClass}</con:default></con:parameter></con:parameters><con:method name="UserPolicyCreate" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/03/coordinator">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>404 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>303</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings/><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="UserPolicyDelete" method="DELETE"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserPolicyGet" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Policy_Create" type="rest" basePath="" definitionUrl="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="Policy_Create_User" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/User/{NodeUserId}/Policy/{PolicyClass}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>NodeUserId</con:name><con:value>NodeUserId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeUserId</con:default></con:parameter><con:parameter><con:name>PolicyClass</con:name><con:value>PolicyClass</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>PolicyClass</con:default></con:parameter></con:parameters><con:method name="Policy_Create_User" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400 403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:PolicyList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false"><con:settings/><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="Policy_Create_Account" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/Policy/{PolicyClass}"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default></con:parameter><con:parameter><con:name>PolicyClass</con:name><con:value>PolicyClass</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>PolicyClass</con:default></con:parameter></con:parameters><con:method name="Policy_Create_Account" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DiscreteMediaRightGet" type="rest" basePath="" definitionUrl="C:\Users\zaid.momin\Desktop\DiscreteMediaRightGet_1.wadl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints/><con:resource name="DiscreteMediaRightGet" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/${#Project#NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/{DiscreteMediaTokenId}"><con:settings/><con:parameters><con:parameter><con:name>RightsTokenId</con:name><con:value>${#TestCase#RightsTokenId}</con:value><con:style>TEMPLATE</con:style><con:default>${#TestCase#RightsTokenId}</con:default></con:parameter><con:parameter><con:name>DiscreteMediaTokenId</con:name><con:value>${#TestCase#DiscreteMediaTokenId}</con:value><con:style>TEMPLATE</con:style><con:default>${#TestCase#DiscreteMediaTokenId}</con:default></con:parameter></con:parameters><con:method name="DiscreteMediaRightGetGet" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="Infrastructure" disabled="true"><con:description/><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rename Test Cases" searchProperties="true" id="1941fe13-467f-4251-ba6d-c1cfd9a270c9"><con:settings/><con:testStep type="groovy" name="Rename Test Cases"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

import java.io.*;

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

def TCNum = 102;

//BufferedWriter bufferedWriter = null;
//bufferedWriter = new BufferedWriter(new FileWriter("c:\\DiscreteMediaLeaseCreateQuestions.txt"));

def oldTestCaseName;
def newTestCaseName;

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	//if(targetTestCase.isDisabled() == false)
	//{
	try
	{
		oldTestCaseName = TCList[i].name;
		newTestCaseName = oldTestCaseName.replace(" ", "");
		newTestCaseName = newTestCaseName.replace("_RTL_", "_RTL_CS_");
		newTestCaseName = newTestCaseName.replace("_DiscreteMediaRightLeaseCreate_", "_DMRConsume_");
		targetTestCase.setFailOnError(false);
		if (TCNum.toString().length() == 1)
			newTestCaseName = "TC_DECE_0000" + TCNum.toString() + "_DiscreteMediaRightConsume" + newTestCaseName.split("DiscreteMediaRightConsume")[1]
		else if (TCNum.toString().length() == 2)
			newTestCaseName = "TC_DECE_000" + TCNum.toString() + "_DiscreteMediaRightConsume" + newTestCaseName.split("DiscreteMediaRightConsume")[1]
		else if (TCNum.toString().length() == 3)
			newTestCaseName = "TC_DECE_00" + TCNum.toString() + "_DiscreteMediaRightConsume" + newTestCaseName.split("DiscreteMediaRightConsume")[1]
		else if (TCNum.toString().length() == 4)
			newTestCaseName = "TC_DECE_0" + TCNum.toString() + "_DiscreteMediaRightConsume" + newTestCaseName.split("DiscreteMediaRightConsume")[1]
		targetTestCase.name = newTestCaseName;	
		TCNum = TCNum + 1;
		log.info "Done renaming Test Case '" + oldTestCaseName + "' to '" + newTestCaseName + "'";
	}
	catch(Throwable e)
	{
		log.info e;
	}
	//}
	//else
	//{
	//	bufferedWriter.write(targetTestCase.name);
	//	bufferedWriter.newLine();
	//}
}

//if (bufferedWriter != null) {
//	bufferedWriter.flush();
 //    bufferedWriter.close();
//}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS_Retired</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Remove a Step" searchProperties="true" id="781732c1-930b-47bb-9da1-9ce3c1aef12e"><con:settings/><con:testStep type="groovy" name="Remove a Step"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def testStepName = testCase.getPropertyValue("TestStepName");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	def targetTestStep = targetTestCase.getTestStepByName(testStepName);	
	if(targetTestCase.getIndexOfTestStep(targetTestStep) >= 0)
	{
		try
		{
			targetTestCase.removeTestStep(targetTestStep);		
			log.info "Done with Test Case '" + TCList[i].name + "'";	
		}
		catch(Throwable e)
		{
		log.info e.text;
		}
	}		
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_P1_TestCases</con:value></con:property><con:property><con:name>TestStepName</con:name><con:value>Create a NoPolicyEnforcement Policy for a Standard user</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Remove a Property" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Remove a Property"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def propertyName;

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);	
	propertyName = testCase.getPropertyValue("PropertyName");	
	try
	{
		targetTestCase.removeProperty(propertyName);
	}
	catch(Throwable e)
	{
		log.info e.text;
	}		
	log.info "Done with Test Case '" + TCList[i].name + "'";
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL</con:value></con:property><con:property><con:name>PropertyName</con:name><con:value>RequestorNodeOid</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Remove Test Cases" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Remove Test Cases"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuiteName = testCase.getPropertyValue("TestSuite"); 
def testSuite = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuiteName);

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuiteName).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuiteName).getTestCaseCount();

def i = 0;
while (i &lt;= TCCount - 1)
{
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuiteName).getTestCaseByName(TCList[i].name);
	def oldTestCaseName = TCList[i].name;
	try
	{
		testSuite.removeTestCase(targetTestCase);
	}
	catch (Throwable e)
	{
		log.info e;
	}		
	log.info "Done removing Test Case '" + oldTestCaseName + "'";
	i = i + 1;
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Disable a Step" searchProperties="true" id="9939b520-a5ee-4c12-b438-8f8a8f5ac7a0"><con:settings/><con:testStep type="groovy" name="Disable a Step"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def testStepName = testCase.getPropertyValue("TestStepName");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	def targetTestStep = targetTestCase.getTestStepByName(testStepName);	
	if(targetTestCase.getIndexOfTestStep(targetTestStep) >= 0)
	{
		try
		{			
			targetTestStep.setDisabled(true);	
			log.info "Done with Test Case '" + TCList[i].name + "'";		
		}
		catch(Throwable e)
		{
			log.info e;
		}
	}		
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_P1_TestCases</con:value></con:property><con:property><con:name>TestStepName</con:name><con:value>Create a RatingPolicy Policy for a different Full User</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set a Property" searchProperties="true" id="4bbdebbe-3eb5-469e-ae0c-2308da255d13"><con:settings/><con:testStep type="groovy" name="Set a Property"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def propertyName;

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);	
	propertyName = testCase.getPropertyValue("PropertyName");	
	propertyValue = testCase.getPropertyValue("PropertyValue");	
	if(targetTestCase.isDisabled() == false)
	{
		try
		{
			//nodeRole = targetTestCase.getPropertyValue(propertyName);
			//if(nodeRole == "urn:dece:role:retailer")
			//{
				targetTestCase.setPropertyValue(propertyName, propertyValue);
				log.info "Done with Test Case '" + TCList[i].name + "'";
			//}
		}
		catch(Throwable e)
		{
			log.info e.text;
		}		
	}	
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>Error Codes_P1_TestCases</con:value></con:property><con:property><con:name>PropertyName</con:name><con:value>RequestorUUID</con:value></con:property><con:property><con:name>PropertyValue</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rename a Step" searchProperties="true" id="10879c8c-72b4-4d03-a2af-41ae2f7e67b5"><con:settings/><con:testStep type="groovy" name="Rename a Step"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def testStepName = testCase.getPropertyValue("TestStepName");
def testStepNewName = testCase.getPropertyValue("TestStepNewName");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	def targetTestStep = targetTestCase.getTestStepByName(testStepName);	
	if(targetTestCase.getIndexOfTestStep(targetTestStep) >= 0)
	{
		try
		{
			targetTestStep.name = testStepNewName;	
			log.info "Done with Test Case '" + TCList[i].name + "'";		
		}
		catch(Throwable e)
		{
		log.info e.text;
		}
	}		
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>TestStepName</con:name><con:value>DiscreteMediaRightLeaseCreatePost - DiscreteMediaRightLeaseCreatePost</con:value></con:property><con:property><con:name>TestStepNewName</con:name><con:value>DiscreteMediaRightConsumePost - DiscreteMediaRightConsumePost</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change a step's script" searchProperties="true" id="34c0e1c3-b86e-4e71-bed5-f83fdb819ae8"><con:settings/><con:testStep type="groovy" name="Change a step's script"><con:settings/><con:config><script>
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def testStepName = testCase.getPropertyValue("TestStep");
def oldString = testCase.getPropertyValue("OldString");
def newString = testCase.getPropertyValue("NewString");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{   
 def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
 if(targetTestCase.isDisabled() == false)
 {
  try
  {
  targetTestStep = targetTestCase.getTestStepByName(testStepName);
  stepScript = targetTestStep.getScript();
  //stepScript = stepScript.replace(oldString, newString);
  stepScript = """def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));""" 
  
  targetTestStep.setScript(stepScript);
  log.info TCList[i].name;
  }
  catch(Throwable e)
  {
   log.info e;
  }
 }
}
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>Authentication_P2_TestCases_mi</con:value></con:property><con:property><con:name>TestStep</con:name><con:value>Copy of Update Node Role to that for Retailer</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy a Property from One Test Case to Another" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Copy a Property from One Test Case to Another"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def sourceProject = testCase.getPropertyValue("SourceProject"); 
def sourceTestSuite = testCase.getPropertyValue("SourceTestSuite"); 

def targetProject = testCase.getPropertyValue("TargetProject"); 
def targetTestSuite = testCase.getPropertyValue("TargetTestSuite");

def sourceTCList = testRunner.testCase.testSuite.project.workspace.getProjectByName(sourceProject).getTestSuiteByName(sourceTestSuite).getTestCaseList();
def sourceTCCount = testRunner.testCase.testSuite.project.workspace.getProjectByName(sourceProject).getTestSuiteByName(sourceTestSuite).getTestCaseCount();

def targetTCList = testRunner.testCase.testSuite.project.workspace.getProjectByName(targetProject).getTestSuiteByName(targetTestSuite).getTestCaseList();
def targetTCCount = testRunner.testCase.testSuite.project.workspace.getProjectByName(targetProject).getTestSuiteByName(targetTestSuite).getTestCaseCount();

for(i = 0; i &lt;= sourceTCCount - 1; i++)
{	
	sourceTestCase = sourceTCList[i];
	for(j = 0; j &lt;= targetTCCount - 1; j++)
	{
		targetTestCase = targetTCList[j];
		if(targetTestCase.name.replace("_" + targetProject + "_", "_" + sourceProject + "_").replace("_POST_", "_GET_") == sourceTestCase.name)
		{
			errorResponse = sourceTestCase.getPropertyValue("ErrorResponse");
			targetTestCase.setPropertyValue("ErrorResponse", errorResponse);
			break;
		}
		else
		{				
			log.info targetTestCase.name;
		}		
	}
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>SourceProject</con:name><con:value>DiscreteMediaRightGet</con:value></con:property><con:property><con:name>SourceTestSuite</con:name><con:value>RTL</con:value></con:property><con:property><con:name>TargetProject</con:name><con:value>DiscreteMediaRightLeaseConsume</con:value></con:property><con:property><con:name>TargetTestSuite</con:name><con:value>RTL</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Clone a Step" searchProperties="true" id="a6ae8215-4e05-47ee-84d1-2fcbff0d9553"><con:settings/><con:testStep type="groovy" name="Clone a Step"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def sourceTestSuite = testCase.getPropertyValue("SourceTestSuite"); 
def targetTestSuite = testCase.getPropertyValue("TargetTestSuite"); 
def sourceTestStepName = testCase.getPropertyValue("SourceTestStepName");
def sourceTestCaseName = testCase.getPropertyValue("SourceTestCaseName");
def prevTestStep = testCase.getPropertyValue("PreviousTestStep");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(targetTestSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(targetTestSuite).getTestCaseCount();

def sourceTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(sourceTestSuite).getTestCaseByName(sourceTestCaseName);
def sourceTestStep = sourceTestCase.getTestStepByName(sourceTestStepName);

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	if(sourceTestSuite == targetTestSuite)
	{
		if(TCList[i].name != sourceTestCaseName)
		{
			def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(targetTestSuite).getTestCaseByName(TCList[i].name);
			def targetTestStep = targetTestCase.getTestStepByName(sourceTestStepName);
			def previousTestStep = targetTestCase.getTestStepByName(prevTestStep);
			Integer indexPreviousTestStep = targetTestCase.getIndexOfTestStep(previousTestStep)						
			if(targetTestCase.isDisabled() == false)
			{
				if(targetTestCase.getIndexOfTestStep(targetTestStep) >= 0)
				{
					targetTestCase.removeTestStep(targetTestStep);
				}
				//if(indexPreviousTestStep >= 0)			
				//{
					targetTestCase.cloneStep(sourceTestStep, sourceTestStepName);
					targetTestStep = targetTestCase.getTestStepByName(sourceTestStepName);
					Integer indexTargetTestStep = targetTestCase.getIndexOfTestStep(targetTestStep);				
					testStepOffset = (indexPreviousTestStep + 1) - indexTargetTestStep;				
					try
					{	
						targetTestCase.moveTestStep(indexTargetTestStep, testStepOffset);
						log.info "Done with Test Case '" + TCList[i].name + "'";	
					}
					catch(Throwable e)
					{
						log.info e;				
					}
				//}				
			}						
		}
	}
	else
	{		
		def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(targetTestSuite).getTestCaseByName(TCList[i].name);
		def targetTestStep = targetTestCase.getTestStepByName(sourceTestStepName);
		if(targetTestCase.getIndexOfTestStep(targetTestStep) >= 0)
		{
			targetTestCase.removeTestStep(targetTestStep);
		}
		targetTestCase.cloneStep(sourceTestStep, sourceTestStepName);
		try
		{	
			targetTestCase.moveTestStep(Integer.parseInt(testStepIndex), Integer.parseInt(testStepOffset));	
		}
		catch(Throwable e)
		{
			log.info e.text;
		}
		log.info "Done with Test Case '" + TCList[i].name + "'";
	}
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>SourceTestSuite</con:name><con:value>RTL_P1_TestCases</con:value></con:property><con:property><con:name>SourceTestCaseName</con:name><con:value>RequiredSteps</con:value></con:property><con:property><con:name>SourceTestStepName</con:name><con:value>Set Pem</con:value></con:property><con:property><con:name>TargetTestSuite</con:name><con:value>RTL_P1_TestCases</con:value></con:property><con:property><con:name>PreviousTestStep</con:name><con:value>DiscreteMediaRightConsumePost - DiscreteMediaRightConsumePost</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Remove all Assertions" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Remove all Assertions"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def testStepName = testCase.getPropertyValue("TestStepName");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	def targetTestStep = targetTestCase.getTestStepByName(testStepName);
	def assertionsList = null;
	try
	{		
		assertionsList = targetTestStep.getAssertionList();
	}
	catch(Throwable e)
	{
		log.info e;
	}
	for(stepAssertion in assertionsList)
	{
		try
		{
  			targetTestStep.removeAssertion(stepAssertion);
  		}
		catch(Throwable e)
		{
			log.info e;
		}
	}			
	log.info "Done with Test Case '" + TCList[i].name + "'";
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL</con:value></con:property><con:property><con:name>TestStepName</con:name><con:value>DiscreteMediaRightLeaseConsumePost - DiscreteMediaRightLeaseConsumePost</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change a step's script for all Steps in a Suite" searchProperties="true" id="a13773db-8a64-4c4d-8c8a-b2a3b77c5203"><con:settings/><con:testStep type="groovy" name="Change a step's script for all Steps in a Suite"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();
def testSuiteObj = testCase.getTestSuite();
def testProject = testSuiteObj.getProject();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
//def oldString = """deleteTC.setPropertyValue("CallingTestSuiteName", testSuite.name);"""
//def newString = oldString + '\n' + """deleteTC.setPropertyValue("RequestorUUID", requestorUUID);"""

def oldString = """DiscreteMediaRightLeaseCreate"""
def newString = """DiscreteMediaRightConsume"""

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{			
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	testStepList = targetTestCase.getTestStepList();
	testStepCount = targetTestCase.getTestStepCount();
	if(targetTestCase.isDisabled() == false)
	{		
		for(j = 0; j &lt;= testStepCount - 1; j++)
		{
			targetTestStep = targetTestCase.getTestStepByName(testStepList[j].name);			
			//if(targetTestStep.name == "Call Get Expected Row Count for DELETE" || targetTestStep.name == "Call Get Expected Row Count for DELETE 1" || targetTestStep.name == "Call Get Expected Row Count for DELETE 2")
			//{
			try
			{				
				stepScript = testStepList[j].getScript();
				stepScript = stepScript.replace(oldString, newString);
				targetTestStep.setScript(stepScript);	
				//log.info targetTestStep.name;	
			}
			catch(Throwable e)
			{
				log.info e;
			}
			//}			
		}
	}
}						
log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set Node Roles for Authentication Test Cases" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set Node Roles for Authentication Test Cases"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

def nodeRoles = new String[29];
nodeRoles = ['urn:dece:role:coordinator', 'urn:dece:role:retailer', 'urn:dece:role:lasp:linked', 'urn:dece:role:lasp:dynamic', 'urn:dece:role:dsp', 'urn:dece:role:dsp:drmlicenseauthority', 'urn:dece:role:coordinator:customersupport', 'urn:dece:role:userinterface', 'urn:dece:role:mdp', 'urn:dece:role:portal', 'urn:dece:role:portal:customersupport', 'urn:dece:role:drmdomainmanager', 'urn:dece:role:retailer:customersupport', 'urn:dece:role:retailer:issuer', 'urn:dece:role:retailer:issuer:customersupport', 'urn:dece:role:lasp:linked:customersupport', 'urn:dece:role:lasp:dynamic:customersupport', 'urn:dece:role:dsp:customersupport', 'urn:dece:role:dsp:drmlicenseauthority:customersupport', 'urn:dece:role:device', 'urn:dece:role:device:customersupport', 'urn:dece:role:contentprovider', 'urn:dece:role:contentprovider:customersupport', 'urn:dece:role:userinterface:customersupport', 'urn:dece:role:dece', 'urn:dece:role:dece:customersupport', 'urn:dece:role:manufacturerportal', 'urn:dece:role:manufacturerportal:customersupport', 'urn:dece:role:mdagent'];
String nodeRole = 'urn:dece:role:retailer';
Integer nodeOid = 1397;
def targetTestCase = null;

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	nodeRole = nodeRoles[i];	
	if (nodeRole == null)
	{
		nodeRole = 'urn:dece:role:retailer';		
	}
	targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	targetTestCase.setPropertyValue("NodeRole", nodeRole);
	targetTestCase.setPropertyValue("NodeOid", nodeOid.toString());
	targetTestCase.setPropertyValue("NodeId", 'urn:dece:org:org:dece:' + nodeOid.toString());
	log.info "Set Role '" + nodeRole + "' for Test Case '" + TCList[i].name + "'"; 
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>Authentication</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set Node Roles for Non Authentication Test Cases" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set Node Roles for Non Authentication Test Cases"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

def nodeRoles = new String[29];
nodeRoles = ['urn:dece:role:coordinator', 'urn:dece:role:retailer', 'urn:dece:role:lasp:linked', 'urn:dece:role:lasp:dynamic', 'urn:dece:role:dsp', 'urn:dece:role:dsp:drmlicenseauthority', 'urn:dece:role:coordinator:customersupport', 'urn:dece:role:userinterface', 'urn:dece:role:mdp', 'urn:dece:role:portal', 'urn:dece:role:portal:customersupport', 'urn:dece:role:drmdomainmanager', 'urn:dece:role:retailer:customersupport', 'urn:dece:role:retailer:issuer', 'urn:dece:role:retailer:issuer:customersupport', 'urn:dece:role:lasp:linked:customersupport', 'urn:dece:role:lasp:dynamic:customersupport', 'urn:dece:role:dsp:customersupport', 'urn:dece:role:dsp:drmlicenseauthority:customersupport', 'urn:dece:role:device', 'urn:dece:role:device:customersupport', 'urn:dece:role:contentprovider', 'urn:dece:role:contentprovider:customersupport', 'urn:dece:role:userinterface:customersupport', 'urn:dece:role:dece', 'urn:dece:role:dece:customersupport', 'urn:dece:role:manufacturerportal', 'urn:dece:role:manufacturerportal:customersupport', 'urn:dece:role:mdagent'];
String nodeRole = 'urn:dece:role:retailer';
Integer nodeOid = 1397;
def targetTestCase = null;

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	//nodeRole = nodeRoles[i];	
	//if (nodeRole == null)
	//{
		nodeRole = 'urn:dece:role:retailer';		
	//}
	targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	targetTestCase.setPropertyValue("NodeRole", nodeRole);
	targetTestCase.setPropertyValue("NodeOid", nodeOid.toString());
	targetTestCase.setPropertyValue("NodeId", 'urn:dece:org:org:dece:' + nodeOid.toString());
	log.info "Set Role '" + nodeRole + "' for Test Case '" + TCList[i].name + "'"; 
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change a step's Request Body" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Change a step's Request Body"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc. All Rights Reserved.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def testStepName = testCase.getPropertyValue("TestStepName");
def oldString = testCase.getPropertyValue("OldString");
def newString = testCase.getPropertyValue("NewString");

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{			
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	if(targetTestCase.isDisabled() == false)
	{
		try
		{
			targetTestStep = targetTestCase.getTestStepByName(testStepName);
			oldReqBody = targetTestStep.httpRequest.getRequestContent();
			newReqBody = oldReqBody.replace(oldString, newString);
			targetTestStep.httpRequest.setRequestContent(newReqBody);
			log.info "Done Setting Request Body for Test Step " + targetTestStep.name + " for Test Case " + targetTestCase.name;
		}
		catch(Throwable e)
		{
			log.info e;
		}
	}
}						
log.info 'Woohoo!'</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>TestStepName</con:name><con:value>RightsTokenCreatePost - RightsTokenCreatePost</con:value></con:property><con:property><con:name>OldString</con:name><con:value>http://www.decellc.org/schema</con:value></con:property><con:property><con:name>NewString</con:name><con:value>${#Project#coordinatorSchema}</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of Set a Property" searchProperties="true" id="b0f56316-5152-4f0b-8e37-c88e003eea3b"><con:settings/><con:testStep type="groovy" name="Set a Property"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def propertyName;

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);	
	propertyName = testCase.getPropertyValue("PropertyName");	
	propertyValue = testCase.getPropertyValue("PropertyValue");	
	if(targetTestCase.isDisabled() == false)
	{
		try
		{
			//nodeRole = targetTestCase.getPropertyValue(propertyName);
			//if(nodeRole == "urn:dece:role:retailer")
			//{
				targetTestCase.setPropertyValue(propertyName, propertyValue);
				log.info "Done with Test Case '" + TCList[i].name + "'";
			//}
		}
		catch(Throwable e)
		{
			log.info e.text;
		}		
	}	
}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>Authentication</con:value></con:property><con:property><con:name>PropertyName</con:name><con:value>ContentProfile</con:value></con:property><con:property><con:name>PropertyValue</con:name><con:value>urn:dece:type:mediaprofile:highdefinition</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="CommonSteps" disabled="true"><con:description/><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract and Store Account and User Info based on Assertion UUID" searchProperties="true" id="a9968e1d-b719-4502-a8e2-889bb0a6d6b1"><con:settings/><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Verify Content Location and Get RightsTokenOid" searchProperties="true" id="c6137747-0656-40f3-8b72-a889b01e8776"><con:settings/><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
def callingTCName = testCase.getPropertyValue("CallingTestCase");
def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = callingTestCase.getTestStepByName("RightsTokenCreatePost - RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCase</con:name><con:value>RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D514127D184B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08D514127D184B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_With_Valid_AccountId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d2aa183c-f93f-4451-a7d7-42eff4bdf5be"><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'highdefinition',
'Y')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:portabledefinition");
testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");
testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", testCase.getPropertyValue("NodeId"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="700035.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile ContentProfile ="${#Project#PurchasedMediaProfile}">
         <!--ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfile}">${#Project#PurchaseProfileBurnsLeft}</ns4:DiscreteMediaRightsRemaining-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>        
      </ns4:PurchaseProfile>
   </ns4:RightsProfiles>
   <ns4:ResourceStatus>
      <ns4:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:iby" DeletionDate="2012-02-22T15:12:03" DeletedBy="urn:dece:ab" ModificationDate="2011-06-29T15:12:03" ModifiedBy="urn:dece:cd">
         <ns4:Value>urn:dece:type:status:active</ns4:Value>
         <ns4:Description>dnFu.WQ2R06AV900TAEZEw</ns4:Description>
      </ns4:Current>
   </ns4:ResourceStatus>
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc ContentProfile ="${#Project#PurchasedMediaProfile}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Status"><con:configuration><scriptText>assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 201 Created";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testCase.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testCase.setPropertyValue("RightsTokenId", URLEncoder.encode(getRTOidTC.getPropertyValue("RightsTokenId"),"UTF-8"));

assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>A67E3A144FB9CDECE0401F0A07993A64</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>148000</con:value></con:property><con:property><con:name>CallingTestCase</con:name><con:value>TC_DECE_00001_RightsTokenCreate_FUNC_RTL_With_Valid_AccountId</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>4</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:A67E3A144FB9CDECE0401F0A07993A64</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_With_Allow_Adult_Content" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="2e74d1d9-fefc-48bf-9990-9c2571160f10"><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'highdefinition',
'Y')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");
testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");
testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
log.info callingTC.getName()
testCase.setPropertyValue("NodeId", callingTC.getPropertyValue("NodeId"));
testCase.setPropertyValue("NodeOid", callingTC.getPropertyValue("NodeOid"));
testCase.setPropertyValue("NodeRole", callingTC.getPropertyValue("NodeRole"));

testProject.setPropertyValue("PurchaseInfoRetailerID", testCase.getPropertyValue("NodeId"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID,
is_adult)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid,
'Y')"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="SetPem" id="b19b142c-5d6f-4eff-b16c-41069fad5ac4"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost - RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileHD}">${#Project#PurchaseProfileBurnsLeftHD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileSD}">${#Project#PurchaseProfileBurnsLeftSD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfilePD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfilePD}">${#Project#PurchaseProfileBurnsLeftPD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
   </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1RightsTokenCreatePost - RightsTokenCreatePost" disabled="true"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileHD}">${#Project#PurchaseProfileBurnsLeftHD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileSD}">${#Project#PurchaseProfileBurnsLeftSD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfilePD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfilePD}">${#Project#PurchaseProfileBurnsLeftPD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
   </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:assertion type="GroovyScriptAssertion" name="Status"><con:configuration><scriptText>assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 201 Created";</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Old_RightsTokenCreatePost - RightsTokenCreatePost" disabled="true"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Old_RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile ContentProfile ="${#Project#PurchasedMediaProfile}">
         <ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfile}">${#Project#PurchaseProfileBurnsLeft}</ns4:DiscreteMediaRightsRemaining>
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>        
      </ns4:PurchaseProfile>
   </ns4:RightsProfiles>
   <ns4:ResourceStatus>
      <ns4:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:iby" DeletionDate="2012-02-22T15:12:03" DeletedBy="urn:dece:ab" ModificationDate="2011-06-29T15:12:03" ModifiedBy="urn:dece:cd">
         <ns4:Value>urn:dece:type:status:active</ns4:Value>
         <ns4:Description>dnFu.WQ2R06AV900TAEZEw</ns4:Description>
      </ns4:Current>
   </ns4:ResourceStatus>
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile ="${#Project#PurchasedMediaProfile}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Status"><con:configuration><scriptText>assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 201 Created";</scriptText></con:configuration></con:assertion><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testCase.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testCase.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
callingTC.setPropertyValue("RightsTokenId", URLEncoder.encode(getRTOidTC.getPropertyValue("RightsTokenId"),"UTF-8"));

assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>E85C7E00BA9D37DEE0401F0A07993D3B</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>65835</con:value></con:property><con:property><con:name>CallingTestCase</con:name><con:value>TC_DECE_00001_RightsTokenCreate_FUNC_RTL_With_Valid_AccountId</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>37</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:E85C7E00BA9D37DEE0401F0A07993D3B</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P1_TestCases_mi</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00112_DMRConsume_FUNC_RTL_POST_by_FAU_with_AllowAdult_and_RatingPolicy_User_UK_U-R18_Content_U-R18_IsAdultY_Parental_Control_Policy_Success</con:value></con:property><con:property><con:name>IsAdult</con:name><con:value>Y</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:/certs/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>b19b142c-5d6f-4eff-b16c-41069fad5ac4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_Without_DiscreteMediaRight" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'highdefinition',
'Y')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:portabledefinition");
testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("PurchaseProfileBurnsLeft", "3");
testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", testCase.getPropertyValue("NodeId"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="1397_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile ContentProfile="${#Project#PurchasedMediaProfile}">
         <!--<ns4:DiscreteMediaRightsRemaining DiscreteMediaProfile="${#Project#DiscreteMediaProfile}">${#Project#PurchaseProfileBurnsLeft}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
   </ns4:RightsProfiles>
   <ns4:ResourceStatus>
      <ns4:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:iby" DeletionDate="2012-02-22T15:12:03" DeletedBy="urn:dece:ab" ModificationDate="2011-06-29T15:12:03" ModifiedBy="urn:dece:cd">
         <ns4:Value>urn:dece:type:status:blocked:eula</ns4:Value>
         <ns4:Description>dnFu.WQ2R06AV900TAEZEw</ns4:Description>
      </ns4:Current>
      <ns4:History>
         <ns4:Prior ModificationDate="2011-11-01T15:12:03" ModifiedBy="urn:dece:uq">
            <ns4:Value>urn:dece:type:status:deleted</ns4:Value>
            <ns4:Description>RiF67oz2tfdzfJyDq5GM17oEm</ns4:Description>
         </ns4:Prior>
         <ns4:Prior ModificationDate="2011-02-18T15:12:03" ModifiedBy="urn:dece:bj">
            <ns4:Value>urn:dece:type:status:archived</ns4:Value>
            <ns4:Description>AXvGDbjiIc9q35QeTtD81-FY</ns4:Description>
         </ns4:Prior>
      </ns4:History>
   </ns4:ResourceStatus>
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
   <ns4:ViewControl>
      <ns4:AllowedUser>${#Project#PurchaseInfoPurchaseUser}</ns4:AllowedUser>
   </ns4:ViewControl>
</ns4:RightsTokenData>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testCase.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testCase.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:rightstokenid:org:dece:93B4192C20DC2CE6E0401F0A07995B71</con:value></con:property><con:property><con:name>Accountid</con:name><con:value>140298</con:value></con:property><con:property><con:name>NodeAccountid</con:name><con:value>3823101</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>93B4192C20DC2CE6E0401F0A07995B71</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>232844</con:value></con:property><con:property><con:name>CallingTestCase</con:name><con:value>TC_DECE_00001_RightsTokenCreate_FUNC_RTL_With_Valid_AccountId</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>3</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_Without_PurchaseProfile" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="82f845f7-44f2-40c7-b14a-edc08183eb24"><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'highdefinition',
'Y')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");
testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");
testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", testCase.getPropertyValue("NodeId"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="700035.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<!--<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">-->
<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>      
   </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testCase.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testCase.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
callingTC.setPropertyValue("RightsTokenId", URLEncoder.encode(getRTOidTC.getPropertyValue("RightsTokenId"),"UTF-8"));

assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>EDBB81AF6E33918DE0401F0A05990710</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>263156</con:value></con:property><con:property><con:name>CallingTestCase</con:name><con:value/></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>3</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:EDBB81AF6E33918DE0401F0A05990710</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>Error Codes_P2_TestCases_mi</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00053_DMRConsume_ERRC_404_Request_DiscreteMediaRightPurchaseProfilesNotFound</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_With_SD_Content_Profile" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d65c7849-3155-429b-a82e-a1ff62edb5d1"><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost - RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileSD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
  <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testCase.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testCase.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
callingTC.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00100_DMRConsume_FUNC_RTL_POST_with_SD_Content_Profile_HD_Consume_Negative</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P2_TestCases</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>98170</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D26779229E4D73E05307991F0A99C2</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D26779229E4D73E05307991F0A99C2</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d1b15b93-fc08-49df-80a6-ccd27a17d1dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="ad1ded67-1c77-43fa-b85c-35ec15cddd57"><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem" id="d1b15b93-fc08-49df-80a6-ccd27a17d1dd"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost - RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileHD}">${#Project#PurchaseProfileBurnsLeftHD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileSD}">${#Project#PurchaseProfileBurnsLeftSD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
  <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
  </ns4:StreamWebLoc> 
	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
	</ns4:StreamWebLoc> 
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testCase.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testCase.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
callingTC.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00085_DMRConsume_FUNC_RTL_POST_by_BAU_with_NoPolicyEnforcement_Parental_Control_Policy_Negative</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P2_TestCases</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>10</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>601821</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08D514127D184B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D514127D184B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d1b15b93-fc08-49df-80a6-ccd27a17d1dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get Lease Created Date" searchProperties="true" id="a29133e7-c0df-443b-bb43-db4e4e4df7c4"><con:settings/><con:testStep type="groovy" name="Get Lease Created Date"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");

sqlStr = """select created_date from discrete_media_token where rights_token_oid =hextoraw( $rightsTokenOid) and state = 'leased'""";

def leaseCreatedDate;
sql.eachRow(sqlStr){
	leaseCreatedDate = it[0];
}

testProject.setPropertyValue("LeaseCreatedDate", leaseCreatedDate.toString());

sqlStr = """select to_char((created_date + interval '6' hour), 'yyyy-mm-dd hh:mi:ss') from discrete_media_token where rights_token_oid =hextoraw( $rightsTokenOid) and state = 'leased'""";

def leaseExpirationDate;
sql.eachRow(sqlStr){
	leaseExpirationDate = it[0];
}

testProject.setPropertyValue("LeaseExpirationDate", leaseExpirationDate);

sql.close();</script></con:config></con:testStep><con:properties><con:property><con:name>NodeId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>UUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get Discrete Media Rights Remaining" searchProperties="true" id="b330f165-be65-4792-b988-c4003d09f633"><con:settings/><con:testStep type="groovy" name="Get Discrete Media Rights Remaining"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
def purchasedMediaProfile = testCase.getPropertyValue("PurchasedMediaProfile").split('urn:dece:type:mediaprofile:')[1];

sqlStr = """select DISCRETE_MEDIA_RIGHTS_REMAIN from purchase_profile where rights_token_oid =hextoraw( $rightsTokenOid) and PURCHASED_CONTENT_PROFILE = '$purchasedMediaProfile'""";

def discreteMediaRightsRemaining;
sql.eachRow(sqlStr){
	discreteMediaRightsRemaining = it[0];
}

log.info "discreteMediaRightsRemaining=="+discreteMediaRightsRemaining;

if (discreteMediaRightsRemaining!=null)
{
if(purchasedMediaProfile == 'hd')
{
	log.info "We are in HD Profile"
	testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", (discreteMediaRightsRemaining - 1).toString());
	testProject.setPropertyValue("DiscreteMediaRightsRemainingSD", testProject.getPropertyValue("PurchaseProfileBurnsLeftSD"));
	testProject.setPropertyValue("DiscreteMediaRightsRemainingPD", testProject.getPropertyValue("PurchaseProfileBurnsLeftPD"));
}
else if(purchasedMediaProfile == 'sd')
{
	log.info "We are in SD Profile"
	testProject.setPropertyValue("DiscreteMediaRightsRemainingSD", (discreteMediaRightsRemaining - 1).toString());
	testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", testProject.getPropertyValue("PurchaseProfileBurnsLeftHD"));
	testProject.setPropertyValue("DiscreteMediaRightsRemainingPD", testProject.getPropertyValue("PurchaseProfileBurnsLeftPD"));	
}
else
{
	log.info "We are in ELSE Profile"
	testProject.setPropertyValue("DiscreteMediaRightsRemainingPD", (discreteMediaRightsRemaining - 1).toString());
	testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", testProject.getPropertyValue("PurchaseProfileBurnsLeftHD"));
	testProject.setPropertyValue("DiscreteMediaRightsRemainingSD", testProject.getPropertyValue("PurchaseProfileBurnsLeftSD"));		
}
}
sql.close();
log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>NodeId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D4C6103BEB2773E05305991F0A1555</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>PurchasedMediaProfile</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:mediaprofile:hd</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate DISCRETE_MEDIA_TOKEN Table" searchProperties="true" id="c38ffdae-6744-4d03-a17c-8cd382bb8aaa"><con:settings/><con:testStep type="groovy" name="Validate DISCRETE_MEDIA_TOKEN Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
Integer recordCount = 0;
//String userOid = testProject.getPropertyValue("UserOid");
String nodeOid = testProject.getPropertyValue("NodeOid");
String leaseType = testProject.getPropertyValue("LeaseType");
String leaseStatus = testProject.getPropertyValue("LeaseStatus");
String leaseExpirationDate = testProject.getPropertyValue("LeaseExpirationDate");

def userOid=null;

boolean iFailed = false;

sqlStr = """select count(*) from DISCRETE_MEDIA_TOKEN dmt
where 
dmt.RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid')""";

sql.eachRow(sqlStr){
	actualCountDMT = it[0];
}

try
{
	assert actualCountDMT.toString() == testProject.getPropertyValue("PurchaseProfileBurnsLeft");
}
catch(Throwable e)
{
	log.info e;
	log.info testProject.getPropertyValue("PurchaseProfileBurnsLeft");
	log.info actualCountDMT;	
	iFailed = true;
}

sqlStr = """select 
to_char(rawtohex(dmt.RIGHTS_TOKEN_OID)),
to_char(rawtohex(dmt.ACCOUNT_OID)),
to_char(rawtohex(dmt.USER_OID)),
to_char(rawtohex(dmt.CREATED_BY)),
to_char(dmt.STATE),
to_char(dmt.STATUS),
to_char(dmt.EXPIRATION_DATE, 'yyyy-mm-dd hh:mi:ss') EXPIRATION_DATE
from 
DISCRETE_MEDIA_TOKEN dmt  
where 
dmt.RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid')
and 
dmt.ACCOUNT_OID = '$accountOid'
and
dmt.STATE = 'fulfilled'""";
	
sql.eachRow(sqlStr){	
	recordCount = recordCount + 1;
	RIGHTS_TOKEN_OID = it[0];
	ACCOUNT_OID = it[1];
	USER_OID = it[2];
	CREATED_BY = it[3];
	TYPE = it[4];
	STATUS = it[5];
	EXPIRATION_DATE = it[6];
}

try
{
	assert recordCount == 1;
}
catch(Throwable e)
{
	log.info e;
	log.info "1";
	log.info recordCount;	
	iFailed = true;
}

try
{
	assert rightsTokenOid == RIGHTS_TOKEN_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info rightsTokenOid;
	log.info RIGHTS_TOKEN_OID;	
	iFailed = true;
}

try
{
	assert accountOid == ACCOUNT_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info accountOid;
	log.info ACCOUNT_OID;	
	iFailed = true;
}

try
{
	assert userOid == USER_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info userOid;
	log.info USER_OID;	
	iFailed = true;
}

try
{
	//assert nodeOid == CREATED_BY;
}
catch(Throwable e)
{
	log.info e;
	log.info nodeOid;
	log.info CREATED_BY;	
	iFailed = true;
}

try
{
	assert leaseType == TYPE;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseType;
	log.info TYPE;	
	iFailed = true;
}

try
{
	assert leaseStatus == STATUS;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseStatus;
	log.info STATUS;	
	iFailed = true;
}

try
{
	assert leaseExpirationDate == EXPIRATION_DATE;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseExpirationDate;
	log.info EXPIRATION_DATE;	
	iFailed = true;
}

assert iFailed == false;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>ALID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>CID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeOid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">700035</con:value></con:property><con:property><con:name>AccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsLockerOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeAccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeUserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseTime</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseAccount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9350D103503B67E0401F0A07997FA4</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate DISCRETE_MEDIA_TOKEN_HISTORY Table" searchProperties="true" id="a3d30c22-4b48-45ce-bab0-8e8dabadd00d"><con:settings/><con:testStep type="groovy" name="Validate DISCRETE_MEDIA_TOKEN_HISTORY Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
Integer recordCount = 0;
String userOid = testProject.getPropertyValue("UserOid");
String nodeOid = testProject.getPropertyValue("NodeOid");
String leaseType = testProject.getPropertyValue("LeaseType");
String leaseStatus = testProject.getPropertyValue("LeaseStatus");
String leaseExpirationDate = testProject.getPropertyValue("LeaseExpirationDate");

userOid=null;

boolean iFailed = false;

sqlStr = """select 
to_char(rawtohex(dmth.RIGHTS_TOKEN_OID)),
to_char(rawtohex(dmth.ACCOUNT_OID)),
to_char(rawtohex(dmth.USER_OID)),
to_char(rawtohex(dmth.CREATED_BY)),
to_char(dmth.STATE),
to_char(dmth.STATUS),
to_char(dmth.EXPIRATION_DATE, 'yyyy-mm-dd hh:mi:ss') EXPIRATION_DATE
from 
DISCRETE_MEDIA_TOKEN_HISTORY dmth  
where 
dmth.RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid')
and 
dmth.ACCOUNT_OID = '$accountOid'
and
dmth.state = 'fulfilled'""";
	
sql.eachRow(sqlStr){
	recordCount = recordCount + 1;
	RIGHTS_TOKEN_OID = it[0];
	ACCOUNT_OID = it[1];
	USER_OID = it[2];
	CREATED_BY = it[3];
	TYPE = it[4];
	STATUS = it[5];
	EXPIRATION_DATE = it[6];
}
try
{
	assert recordCount == 1;
}
catch(Throwable e)
{
	log.info e;
	log.info "1";
	log.info recordCount;	
	iFailed = true;
}

try
{
	assert rightsTokenOid == RIGHTS_TOKEN_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info rightsTokenOid;
	log.info RIGHTS_TOKEN_OID;	
	iFailed = true;
}

try
{
	assert accountOid == ACCOUNT_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info accountOid;
	log.info ACCOUNT_OID;	
	iFailed = true;
}

try
{
	assert userOid == USER_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info userOid;
	log.info USER_OID;	
	iFailed = true;
}

try
{
	//assert nodeOid == CREATED_BY;
}
catch(Throwable e)
{
	log.info e;
	log.info nodeOid;
	log.info CREATED_BY;	
	iFailed = true;
}

try
{
	assert leaseType == TYPE;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseType;
	log.info TYPE;	
	iFailed = true;
}

try
{
	assert leaseStatus == STATUS;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseStatus;
	log.info STATUS;	
	iFailed = true;
}

try
{
	assert leaseExpirationDate == EXPIRATION_DATE;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseExpirationDate;
	log.info EXPIRATION_DATE;	
	iFailed = true;
}

assert iFailed == false;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>ALID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>CID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeOid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1397</con:value></con:property><con:property><con:name>AccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsLockerOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeAccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeUserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseTime</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseAccount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>A9765E35D02A5D29E0401F0A07997827</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate PURCHASE_PROFILE Table" searchProperties="true" id="3e6954e8-d883-47c3-8d12-1a8185d0085c"><con:settings/><con:testStep type="groovy" name="Validate PURCHASE_PROFILE Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
String recordCountExp = testSuite.getPropertyValue("ExpectedCount");
Integer recordCountAct = 0;
String purchasedMediaProfileHD = testProject.getPropertyValue("PurchasedMediaProfileHD").split("urn:dece:type:mediaprofile:")[1];
String purchasedMediaProfileSD = testProject.getPropertyValue("PurchasedMediaProfileSD").split("urn:dece:type:mediaprofile:")[1];
String purchasedMediaProfilePD = testProject.getPropertyValue("PurchasedMediaProfilePD").split("urn:dece:type:mediaprofile:")[1];
String discreteMediaRightsRemainingHD = testProject.getPropertyValue("DiscreteMediaRightsRemainingHD");
String discreteMediaRightsRemainingSD = testProject.getPropertyValue("DiscreteMediaRightsRemainingSD");
String discreteMediaRightsRemainingPD = testProject.getPropertyValue("DiscreteMediaRightsRemainingPD");
String purchaseProfileCanDownLoad = testCase.getPropertyValue("PurchaseProfileCanDownLoad");
String purchaseProfileCanStream = testCase.getPropertyValue("PurchaseProfileCanStream");

boolean iFailed = false;

sqlStr = """select 
to_char(rawtohex(RIGHTS_TOKEN_OID)),
to_char(DOWNLOAD),
to_char(STREAM),
to_char(DISCRETE_MEDIA_RIGHTS_REMAIN),
to_char(PURCHASED_CONTENT_PROFILE)
from 
PURCHASE_PROFILE
where 
RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid')
order by
PURCHASED_CONTENT_PROFILE""";
	
sql.eachRow(sqlStr){
	recordCountAct = recordCountAct + 1;
	RIGHTS_TOKEN_OID = it[0];
	DOWNLOAD = it[1];
	STREAM = it[2];
	DISCRETE_MEDIA_RIGHTS_REMAIN = it[3];	
	PURCHASED_CONTENT_PROFILE = it[4];
	try
	{
		assert rightsTokenOid == RIGHTS_TOKEN_OID;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info rightsTokenOid;
		log.info RIGHTS_TOKEN_OID;	
		iFailed = true;
	}

	try
	{
		assert purchaseProfileCanDownLoad == DOWNLOAD;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info purchaseProfileCanDownLoad;
		log.info DOWNLOAD;	
		iFailed = true;
	}

	try
	{
		assert purchaseProfileCanStream == STREAM;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info purchaseProfileCanStream;
		log.info STREAM;	
		iFailed = true;
	}

	if(recordCountExp == '1')
	{
		purchasedMediaProfile = purchasedMediaProfilePD;
		discreteMediaRightsRemaining = discreteMediaRightsRemainingPD;	
	}
	else if(recordCountExp == '2')
	{
		if(recordCountAct == 1)
		{
			purchasedMediaProfile = purchasedMediaProfilePD;	
			discreteMediaRightsRemaining = discreteMediaRightsRemainingHD;		
		}
		else if(recordCountAct == 2)
		{
			purchasedMediaProfile = purchasedMediaProfileSD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingSD;			
		}
	}
	else if(recordCountExp == '3')
	{ 
		if(recordCountAct == 1)
		{
			purchasedMediaProfile = purchasedMediaProfileHD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingHD;	
		
		}
		else if(recordCountAct == 2)
		{
			purchasedMediaProfile = purchasedMediaProfilePD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingPD;	
		}
		else if(recordCountAct == 3)
		{
			purchasedMediaProfile = purchasedMediaProfileSD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingSD;
		}
	}
	if(DISCRETE_MEDIA_RIGHTS_REMAIN == null)
	{
		DISCRETE_MEDIA_RIGHTS_REMAIN = '0';
	}
	try
	{
		log.info 'discreteMediaRightsRemaining='+discreteMediaRightsRemaining
		log.info 'DISCRETE_MEDIA_RIGHTS_REMAIN='+DISCRETE_MEDIA_RIGHTS_REMAIN
		assert discreteMediaRightsRemaining == DISCRETE_MEDIA_RIGHTS_REMAIN;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info discreteMediaRightsRemaining;
		log.info DISCRETE_MEDIA_RIGHTS_REMAIN;	
		iFailed = true;
	}	

	try
	{
		assert purchasedMediaProfile == PURCHASED_CONTENT_PROFILE;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info purchasedMediaProfile;
		log.info PURCHASED_CONTENT_PROFILE;	
		iFailed = true;
	}
}
try
{
	assert recordCountExp == recordCountAct.toString();
}
catch(Throwable e)
{
	log.info e;
	log.info recordCountExp;
	log.info recordCountAct;	
	iFailed = true;
}

assert iFailed == false;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>PurchasedMediaProfile</con:name><con:value>highdefinition</con:value></con:property><con:property><con:name>PurchaseProfileBurnsLeft</con:name><con:value>0</con:value></con:property><con:property><con:name>PurchaseProfileCanDownLoad</con:name><con:value>Y</con:value></con:property><con:property><con:name>PurchaseProfileCanStream</con:name><con:value>Y</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>bluray:packaged</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>ExpectedCount</con:name><con:value>3</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value/></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:highdefinition</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update Assertions for a Node Role" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Update Assertions for a Node Role"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def uuidSAML = ['fbbdd202-bj4u-4e57-b32a-200002', 'fbbdd202-bj4u-4e57-b32a-100002', 'fbbdd202-bj4u-4e57-b32a-100003', 'fbbdd202-bj4u-4e57-b32a-100004', 'fbbdd202-bj4u-4e57-b32a-100005', 'fbbdd202-bj4u-4e57-b32a-100007'];
def nodeId = testCase.getPropertyValue("NodeId").split(":")[5];

for(i = 0; i &lt;= uuidSAML.size() - 1; i++)
{	
	uuid = uuidSAML[i];
	sqlStr = """update node_user_saml_assertion set node_oid = $nodeId where node_user_saml_uuid = '$uuid'""";
	sql.executeUpdate(sqlStr);

	sqlStr = """update node_account set node_oid = $nodeId where node_account_oid in (select node_account_oid from node_user_saml_assertion where node_user_saml_uuid = '$uuid')""";
	sql.executeUpdate(sqlStr);

	sqlStr = """update node_user set node_oid = $nodeId where node_user_oid in (select node_user_oid from node_user_saml_assertion where node_user_saml_uuid = '$uuid')""";
	sql.executeUpdate(sqlStr);

	log.info "Done updating SAML UUID '" + uuid + "'"	;
	sleep(1000);	
}

sql.close();

log.info 'Woohoo!';</script></con:config></con:testStep><con:properties><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set SSLSettings KeyStore" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set SSLSettings KeyStore"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;

def testCase  = testRunner.getTestCase();

String keyStorePath = testCase.getPropertyValue("keyStorePath");
soapUtils = new soapUIUtils(log);
soapUtils.setSSLSettingsKeyStore(keyStorePath);
log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>keyStorePath</con:name><con:value>C:\Metadata\ajjak.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate Error Codes" searchProperties="true" id="f52be822-5292-46aa-b253-4eb8052ebc26"><con:settings/><con:testStep type="groovy" name="1Validate Error Codes" disabled="true"><con:settings/><con:config><script>import dbUtils.dbErrors;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def host = testProject.getPropertyValue("targetHost");
def port = testProject.getPropertyValue("targetPort");
def accountId = testProject.getPropertyValue("NodeAccountId");
def rightsTokenId = testCase.getPropertyValue("RightsTokenId");
def contentProfile = testCase.getPropertyValue("ContentProfile");
def discreteMediaProfile = testCase.getPropertyValue("DiscreteMediaProfile");
def errorResponse = testCase.getPropertyValue("ErrorResponse");
def responseStatusAct = testCase.getPropertyValue("ResponseStatus");
def connectionStatusAct = testCase.getPropertyValue("ConnectionStatus");
def contentTypeAct = testCase.getPropertyValue("ContentType");
def HTTPMethod = testCase.getPropertyValue("HTTPMethod");
def restVersion = testProject.getPropertyValue("RestVersion");

def hostError = "qa.q.uvvu.com";

String errorIDExp = null;
String errorReasonExp = null;
String errorLinkExp = null;
String orgRequestExp = null;
String responseStatusExp = null;
String connectionStatusExp = null;
String contentTypeExp = null;
String errorBodyExp = null;

def resXML = resXML = testCase.getPropertyValue("ResponseXML");
def myXML = null;

myDBErrors = new dbErrors(log, testProject.getPropertyValue("DBIDentifier"));

if(errorResponse != "MethodNotAllowed" &amp;&amp; resXML != null)
{
	try
	{
		myXML = new XmlSlurper().parseText(resXML);
	}
	catch(Throwable e)
	{
		log.info e;					
	}
}

log.info 'errorResponse=='+errorResponse
switch (errorResponse) 
{		
    case "RoleInvalid":        		
        xmlData = myDBErrors.errGetIdInfo("ForbiddenRoleInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;
      
    case "Created":        
        responseStatusExp = "HTTP/1.1 201 Created";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "text/plain; charset=UTF-8";                
        break; 

    case "MethodNotAllowed":        
        responseStatusExp = "HTTP/1.1 405 Method Not Allowed";        
        contentTypeExp = "text/plain; charset=UTF-8";
        connectionStatusExp = "Keep-Alive"; 
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        errorBodyExp = HTTPMethod + " method is not allowed for API call: " + "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "OK":      
    	   log.info 'inside the OK loop'  
        responseStatusExp = "HTTP/1.1 200 OK";          
        //contentTypeExp = "text/xml";
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";  
        break;   

	case "BadRequestMediaProfileNotValid":
        xmlData = myDBErrors.errGetIdInfo("BadRequestMediaProfileNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }        
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestContentProfileNotValid":
        xmlData = myDBErrors.errGetIdInfo("BadRequestContentProfileNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;  

    case "BadRequestAccountIdNotValid":
        xmlData = myDBErrors.errGetIdInfo("BadRequestAccountIdNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestNodeIdInvalid":
        xmlData = myDBErrors.errGetIdInfo("BadRequestNodeIdInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenNodeNotActive":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenNodeNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenUserNotActive":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenUserNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundUserNotFound":
        xmlData = myDBErrors.errGetIdInfo("NotFoundUserNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenAccountIdUnmatched":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenAccountIdUnmatched");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();  
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenAccountNotActive":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenAccountNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenLockerViewAllConsentRequired":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenLockerViewAllConsentRequired");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "DSPForbiddenRightsTokenAccessNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("DSPForbiddenRightsTokenAccessNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenRightsTokenAccessNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenRightsTokenAccessNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "BadRequestRightsTokenIDNotValid":
        xmlData = myDBErrors.errGetIdInfo("BadRequestRightsTokenIDNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenRightsTokenNotActive":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenRightsTokenNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "NotFoundRightsTokenNotFound":
        xmlData = myDBErrors.errGetIdInfo("NotFoundRightsTokenNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ConflictContentProfileNotValidForRightsToken":
        xmlData = myDBErrors.errGetIdInfo("ConflictContentProfileNotValidForRightsToken");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

   case "ConflictDiscreteMediaRightRemainingCountRestriction":
        xmlData = myDBErrors.errGetIdInfo("ConflictDiscreteMediaRightRemainingCountRestriction");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;	           

    case "BadRequestDiscreteMediaProfileInvalid":
        xmlData = myDBErrors.errGetIdInfo("BadRequestDiscreteMediaProfileInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ConflictDiscreteMediaProfileNotValidForRightsToken":
        xmlData = myDBErrors.errGetIdInfo("ConflictDiscreteMediaProfileNotValidForRightsToken");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "NotFoundDiscreteMediaProfileDoesNotExist":
        xmlData = myDBErrors.errGetIdInfo("NotFoundDiscreteMediaProfileDoesNotExist");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        log.info 'errorIDExp ='+errorIDExp
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "NotFoundPurchaseProfileNotFound":
        xmlData = myDBErrors.errGetIdInfo("NotFoundPurchaseProfileNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenUserPrivlegeAccessRestricted":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenUserPrivlegeAccessRestricted");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();    
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenContentIDNotActive":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenContentIDNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "NotFoundContentIDNotFound":
        xmlData = myDBErrors.errGetIdInfo("NotFoundContentIDNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenUnratedContentBlocked":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenUnratedContentBlocked");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenRatingPolicyExists":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenRatingPolicyExists");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;

    case "ForbiddenAdultContentNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("ForbiddenAdultContentNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + restVersion + "/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + restVersion + "/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";        
        break;
    	                          
}

boolean iFailed = false;

try
{
	assert responseStatusExp == responseStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info responseStatusExp;
	log.info responseStatusAct;
	iFailed = true;
}

try
{
	//assert connectionStatusExp == connectionStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info connectionStatusExp;
	log.info connectionStatusAct;
	iFailed = true;
}

try
{
	//assert contentTypeExp == contentTypeAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info contentTypeExp;
	log.info contentTypeAct;
	iFailed = true;
}

if(errorResponse == "MethodNotAllowed")
{
	if(HTTPMethod != "HEAD")
	{
		try
		{
			assert errorBodyExp == resXML.trim();
		}
		catch(Throwable e)
		{
			log.info e;		
			log.info errorBodyExp;
			log.info resXML;
			iFailed = true;
		}
	}
}

if (myXML != null &amp;&amp; errorResponse != "OK") 
{
    if(errorResponse != "ForbiddenNodeNotActive")
    {
         // Verify response sizes...
         log.info 'inside myXML== loop'
         assert myXML.Error.size() == 1;
         assert myXML.Error.Reason.size() == 1;
         assert myXML.Error.OriginalRequest.size() == 1;
         assert myXML.Error.ErrorLink.size() == 1;
    
         errorIDAct = myXML.Error.@ErrorID.toString();
         errorReasonAct = myXML.Error.Reason.toString();
         errorLinkAct = myXML.Error.ErrorLink.toString();
         orgRequestAct = myXML.Error.OriginalRequest.toString().replace("%3A", ":");
    }
    else if(errorResponse != "ForbiddenNodeNotActive")
    {
        // Verify response sizes...
         assert myXML.Error.size() == 2;
         assert myXML.Error.Reason.size() == 2;
         assert myXML.Error.OriginalRequest.size() == 2;
         assert myXML.Error.ErrorLink.size() == 2;
    
         errorIDAct = myXML.Error[1].@ErrorID.toString();
         errorReasonAct = myXML.Error[1].Reason.toString();
         errorLinkAct = myXML.Error[1].ErrorLink.toString();
         orgRequestAct = myXML.Error[1].OriginalRequest.toString().replace("%3A", ":");
    } 
    if(errorResponse != "ForbiddenNodeNotActive")
    {                              
     	// ErrorId     	
    		try
     	{     		
     		assert errorIDAct == errorIDExp;
   	  	}
   		catch(Throwable e)
		{
			log.info e;		
			log.info errorIDExp;
			log.info errorIDAct;
			iFailed = true;
		} 
	          
     	// ErrorReason
     	try
     	{
     		assert errorReasonAct == errorReasonExp;
		}
     	catch(Throwable e)
		{
			log.info e;		
			log.info errorReasonExp;
			log.info errorReasonAct;
			iFailed = true;
		}
	
     	// ErrorLink
     	try
     	{
     		//assert errorLinkAct == errorLinkExp;
     	}
     	catch(Throwable e)
		{
			log.info e;		
			log.info errorLinkExp;
			log.info errorLinkAct;
			iFailed = true;
		}
		// OriginalRequest
		try
     	{
     		//assert orgRequestAct == orgRequestExp;
     	}
     	catch(Throwable e)
		{
			log.info e;		
			log.info orgRequestExp;
			log.info orgRequestAct;
			iFailed = true;
		}
    }	
} 

assert iFailed == false;

log.info 'Woohoo!';
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate Error Codes_Original" disabled="true"><con:settings/><con:config><script><![CDATA[import dbUtils.dbErrors;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def host = testProject.getPropertyValue("targetHost");
def port = testProject.getPropertyValue("targetPort");
def accountId = URLDecoder.decode(testProject.getPropertyValue("NodeAccountId"),"UTF-8");
def rightsTokenId = URLDecoder.decode(testCase.getPropertyValue("RightsTokenId"),"UTF-8");
def contentProfile = testCase.getPropertyValue("ContentProfile");
def discreteMediaProfile = testCase.getPropertyValue("DiscreteMediaProfile");
def errorResponse = testCase.getPropertyValue("ErrorResponse");
def responseStatusAct = testCase.getPropertyValue("ResponseStatus");
def connectionStatusAct = testCase.getPropertyValue("ConnectionStatus");
def contentTypeAct = testCase.getPropertyValue("ContentType");
def HTTPMethod = testCase.getPropertyValue("HTTPMethod");

def hostError = "qa.q.uvvu.com";

String errorIDExp = null;
String errorReasonExp = null;
String errorLinkExp = null;
String orgRequestExp = null;
String responseStatusExp = null;
String connectionStatusExp = null;
String contentTypeExp = null;
String errorBodyExp = null;

def resXML = resXML = testCase.getPropertyValue("ResponseXML");
def myXML = null;

myDBErrors = new dbErrors(log, testProject.getPropertyValue("DBIDentifier"));

if(errorResponse != "MethodNotAllowed" && resXML != null)
{
	try
	{
		myXML = new XmlSlurper().parseText(resXML);
	}
	catch(Throwable e)
	{
		log.info e;					
	}
}

switch (errorResponse) 
{	
    case "RoleInvalid":        		
        xmlData = myDBErrors.errGetIdInfo("Security:RoleInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        log.info 'errorIDExperrorIDExp==='+errorIDExp
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml"; 
        contentTypeExp = "application/xml;charset=UTF-8";        
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenUserIdUnmatched":        		
        xmlData = myDBErrors.errGetIdInfo("UserIdUnmatched");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml"; 
        contentTypeExp="application/xml;charset=UTF-8";        
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }        
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;
      
    case "Created":        
        responseStatusExp = "HTTP/1.1 201 Created";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "text/plain; charset=UTF-8";                
        break; 

    case "ForbiddenMethodNotAllowed":    
    		log.info 'in the ForbiddenMethodNotAllowed Loop'    		
        xmlData = myDBErrors.errGetIdInfo("MethodNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 405 Method Not Allowed";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "text/plain; charset=UTF-8";    
        if(HTTPMethod == "OPTIONS")
        {
        	contentTypeExp = "text/xml";    
        }    
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }        
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        errorBodyExp = HTTPMethod + " method is not allowed for API call: https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;
   
    case "OK":        
    		log.info ' in the loop of OK'
        responseStatusExp = "HTTP/1.1 200 OK";   
        //contentTypeExp = "text/xml"; //added the next 2 line
        //Change
        //contentTypeExp = "application/xml";
        contentTypeExp="application/xml;charset=UTF-8";
        connectionStatusExp = "Keep-Alive";     
        log.info 'connectionStatusExp=='+connectionStatusExp 
        //        
        break;

    case "BadRequestMediaProfileNotValid":
        xmlData = myDBErrors.errGetIdInfo("MediaProfileNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";
        contentTypeExp="application/xml;charset=UTF-8";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestAccountIdNotValid":
        xmlData = myDBErrors.errGetIdInfo("AccountIdNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml"; 
        contentTypeExp="application/xml;charset=UTF-8";        
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestAuthorizedFulfillmentMethodNotValid":
        xmlData = myDBErrors.errGetIdInfo("AuthorizedFulfillmentMethodNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";  
        contentTypeExp="application/xml;charset=UTF-8";       
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestDiscreteMediaStateShouldBeAvailable":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaStateShouldBeAvailable");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml"; 
        contentTypeExp="application/xml;charset=UTF-8";        
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestDiscreteMediaStateNotValid":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaStateNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
       // contentTypeExp = "application/xml";
contentTypeExp="application/xml;charset=UTF-8";        
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestDuplicateAuthorizedFulfillmentMethodsNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("DuplicateAuthorizedFulfillmentMethodsNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
       //contentTypeExp = "application/xml";   
       contentTypeExp="application/xml;charset=UTF-8";      
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestDiscreteMediaLimitExceeded":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaLimitExceeded");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
       // contentTypeExp = "application/xml";
        contentTypeExp="application/xml;charset=UTF-8";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestContentProfileNotValid":
        xmlData = myDBErrors.errGetIdInfo("ContentProfileNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml"; 
        contentTypeExp="application/xml;charset=UTF-8";        
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestUserIdInvalid":
        xmlData = myDBErrors.errGetIdInfo("UserIdInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
       // contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestAccountIdNotValid":
        xmlData = myDBErrors.errGetIdInfo("AccountIdNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
       // contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestNodeIdInvalid":
        xmlData = myDBErrors.errGetIdInfo("NodeIdInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenNodeNotActive":
        xmlData = myDBErrors.errGetIdInfo("NodeNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
       // contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenUserNotActive":
        xmlData = myDBErrors.errGetIdInfo("UserNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundUserNotFound":
        xmlData = myDBErrors.errGetIdInfo("UserNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundNotFound":
        xmlData = myDBErrors.errGetIdInfo("NotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenAccountIdUnmatched":
        xmlData = myDBErrors.errGetIdInfo("AccountIdUnmatched");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();  
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        //contentTypeExp = "application/xml";         
        contentTypeExp="application/xml;charset=UTF-8";
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenAccountNotActive":
        xmlData = myDBErrors.errGetIdInfo("AccountNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenLockerViewAllConsentRequired":
        xmlData = myDBErrors.errGetIdInfo("Policy:LockerViewAllConsentRequired");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "DSPForbiddenRightsTokenAccessNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("RightsTokenAccessNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenRightsTokenAccessNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("RightsTokenAccessNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "BadRequestRightsTokenIDNotValid":
    log.info 'in the RTID NotValid Loop'
        xmlData = myDBErrors.errGetIdInfo("RightsTokenIDNotValid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenRightsTokenNotActive":
        xmlData = myDBErrors.errGetIdInfo("RightsTokenNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundRightsTokenNotFound":
        xmlData = myDBErrors.errGetIdInfo("RightsTokenNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ConflictContentProfileNotValidForRightsToken":
        xmlData = myDBErrors.errGetIdInfo("MediaProfileNotValidForRightsToken");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

   case "ConflictDiscreteMediaRightRemainingCountRestriction":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaRightRemainingCountRestriction");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;	           

    case "BadRequestDiscreteMediaProfileInvalid":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaFulfillmentMethodInvalid");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ConflictDiscreteMediaProfileNotValidForRightsToken":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaFulfillmentMethodNotValidForRightsToken");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundDiscreteMediaProfileDoesNotExist":
        xmlData = myDBErrors.errGetIdInfo("DiscreteMediaFulfillmentMethodDoesNotExist");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundPurchaseProfileNotFound":
        xmlData = myDBErrors.errGetIdInfo("PurchaseProfileNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenUserPrivlegeAccessRestricted":
        xmlData = myDBErrors.errGetIdInfo("UserPrivlegeAccessRestricted");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();    
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenContentIDNotActive":
        xmlData = myDBErrors.errGetIdInfo("ContentIDNotActive");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text(); 
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "NotFoundContentIDNotFound":
        xmlData = myDBErrors.errGetIdInfo("ContentIDNotFound");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 404 Not Found";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenUnratedContentBlocked":
        xmlData = myDBErrors.errGetIdInfo("Policy:UnratedContentBlocked");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenRatingPolicyExists":
        xmlData = myDBErrors.errGetIdInfo("Policy:RatingPolicyExists");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";         
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;

    case "ForbiddenAdultContentNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("Policy:AdultContentNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:" + sqlResult.ResultSet.Row.ERROR_ID.text();
        errorReasonExp = sqlResult.ResultSet.Row.REASON.text();
        errorLinkExp   = "https://" + hostError + ":" + port + "/rest/$major/$minor/error/en/ErrorList.html#" + sqlResult.ResultSet.Row.ERROR_ID.text();
        responseStatusExp = "HTTP/1.1 403 Forbidden";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "application/xml";
                 
        if(port != "443")
        {
        	port = ":" + port;
        }
        else
        {
        	port = "";
        }
        orgRequestExp  = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
        break;
	                          
}

boolean iFailed = false;

try
{
	log.info 'responseStatusExp==='+responseStatusExp
	log.info 'responseStatusAct==='+responseStatusAct
	assert responseStatusExp == responseStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info responseStatusExp;
	log.info responseStatusAct;
	iFailed = true;
}

try
{
	log.info 'connectionStatusExp =='+connectionStatusExp
	log.info 'connectionStatusAct =='+connectionStatusAct
	//assert connectionStatusExp == connectionStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info connectionStatusExp;
	log.info connectionStatusAct;
	iFailed = true;
}

try
{
	log.info 'contentTypeExp =='+contentTypeExp
	log.info 'contentTypeAct =='+contentTypeAct
	//assert contentTypeExp == contentTypeAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info contentTypeExp;
	log.info contentTypeAct;
	iFailed = true;
}

if(errorResponse == "ForbiddenMethodNotAllowed")
{
	if(HTTPMethod != "OPTIONS" && HTTPMethod != "HEAD")
	{
		try
		{
			assert errorBodyExp == resXML.trim();
		}
		catch(Throwable e)
		{
			log.info e;		
			log.info errorBodyExp;
			log.info resXML;
			iFailed = true;
		}
	}
}

if (myXML != null) //&& errorResponse != "OK") 
{	
    //if(errorResponse != "ForbiddenNodeNotActive" && errorResponse != "BadRequestRightsTokenIDNotValid" && errorResponse != "BadRequestDiscreteMediaStateNotValid" && HTTPMethod != "OPTIONS")
    if(errorResponse != "ForbiddenNodeNotActive"  && errorResponse != "OK" && errorResponse != "BadRequestDiscreteMediaStateNotValid" && HTTPMethod != "OPTIONS")
    {
         // Verify response sizes...
         assert myXML.Error.size() == 1;
         assert myXML.Error.Reason.size() == 1;
         assert myXML.Error.OriginalRequest.size() == 1;
         assert myXML.Error.ErrorLink.size() == 1;
    
         errorIDAct = myXML.Error.@ErrorID.toString();
         errorReasonAct = myXML.Error.Reason.toString();
         errorLinkAct = myXML.Error.ErrorLink.toString();
         orgRequestAct = myXML.Error.OriginalRequest.toString().replace("%3A", ":");
    }
    /*else if(errorResponse == "BadRequestRightsTokenIDNotValid")
    {
        // Verify response sizes...
         assert myXML.Error.size() == 2;
         assert myXML.Error.Reason.size() == 2;
         assert myXML.Error.OriginalRequest.size() == 2;
         assert myXML.Error.ErrorLink.size() == 2;
    
         errorIDAct = myXML.Error[1].@ErrorID.toString();
         errorReasonAct = myXML.Error[1].Reason.toString();
         errorLinkAct = myXML.Error[1].ErrorLink.toString();
         orgRequestAct = myXML.Error[1].OriginalRequest.toString().replace("%3A", ":");
    } */
    else if(errorResponse == "BadRequestDiscreteMediaStateNotValid")
    {
        // Verify response sizes...
         assert myXML.Error.size() == 2;
         assert myXML.Error.Reason.size() == 2;
         assert myXML.Error.OriginalRequest.size() == 2;
         assert myXML.Error.ErrorLink.size() == 2;
    
         errorIDAct = myXML.Error[0].@ErrorID.toString();
         errorReasonAct = myXML.Error[0].Reason.toString();
         errorLinkAct = myXML.Error[0].ErrorLink.toString();
         orgRequestAct = myXML.Error[0].OriginalRequest.toString().replace("%3A", ":");
    } 
    //if(errorResponse != "ForbiddenNodeNotActive" && HTTPMethod != "OPTIONS")
    if(errorResponse != "ForbiddenNodeNotActive" && errorResponse != "OK" && HTTPMethod != "OPTIONS")
    {                              
     	// ErrorId
    		try
     	{
     		log.info 'insideinside'
     		assert errorIDAct == errorIDExp;
   	  	}
   		catch(Throwable e)
		{
			log.info e;		
			log.info errorIDExp;
			log.info errorIDAct;
			iFailed = true;
		} 
	          
     	if(errorResponse != "NotFoundNotFound")
     	{
     		// ErrorReason
	     	try
	     	{
	     		assert errorReasonAct == errorReasonExp;
			}
	     	catch(Throwable e)
			{
				log.info e;		
				log.info errorReasonExp;
				log.info errorReasonAct;
				iFailed = true;
			}
     	}
	
     	// ErrorLink
     	try
     	{
     		log.info 'errorLinkExp =='+errorLinkExp
     		log.info 'errorLinkAct =='+errorLinkAct
     		//assert errorLinkAct == errorLinkExp;
     	}
     	catch(Throwable e)
		{
			log.info e;		
			log.info errorLinkExp;
			log.info errorLinkAct;
			iFailed = true;
		}
		// OriginalRequest
		try
     	{
     		log.info 'orgRequestAct=='+orgRequestAct
     		log.info 'orgRequestExp =='+orgRequestExp
     		//assert orgRequestAct == orgRequestExp;
     	}
     	catch(Throwable e)
		{
			log.info e;		
			log.info orgRequestExp;
			log.info orgRequestAct;
			iFailed = true;
		}		
    }	
} 



assert iFailed == false;

log.info 'Woohoo!';
]]></script></con:config></con:testStep><con:testStep type="groovy" name="Validate Error Codes"><con:settings/><con:config><script><![CDATA[import dbUtils.dbErrors;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def host = testProject.getPropertyValue("targetHost");
def port = testProject.getPropertyValue("targetPort");
def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def accountId = testProject.getPropertyValue("NodeAccountId");
def rightsTokenId = testCase.getPropertyValue("RightsTokenId");
def discreteMediaTokenId = testCase.getPropertyValue("DiscreteMediaTokenId");
def contentProfile = testProject.getPropertyValue("ContentProfile");
def discreteMediaProfile = testProject.getPropertyValue("DiscreteMediaProfileInURL");
def errorResponse = testCase.getPropertyValue("ErrorResponse");
def responseStatusAct = testCase.getPropertyValue("ResponseStatus");
def connectionStatusAct = testCase.getPropertyValue("ConnectionStatus");
def contentTypeAct = testCase.getPropertyValue("ContentType");
def HTTPMethod = testCase.getPropertyValue("HTTPMethod");

def hostError = "qa.q.uvvu.com";
if(port != "443")
        {
        	port =":"+ port;
        }
        else
        {
        	port = "";
        }
String errorIDExp = null;
String errorReasonExp = null;
String errorLinkExp = null;
String orgRequestExp = "https://" + host + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId + "/" + contentProfile + "/DiscreteMediaRight/" + discreteMediaProfile + "/Consume";
String responseStatusExp = null;
String connectionStatusExp ="Keep-Alive";
String contentTypeExp = "application/xml;charset=UTF-8";
String errorBodyExp = null;
def resXML = testCase.getPropertyValue("ResponseXML");
def myXML = null;


if(errorResponse != "MethodNotAllowed" && resXML != null)
{
	try
	{
		myXML = new XmlSlurper().parseText(resXML);
	}
	catch(Throwable e)
	{
		log.info e;					
	}
}

switch (errorResponse) 
{	
    case "ForbiddenRoleInvalid":    
    	   log.info "We are in ForbiddenRoleInvalid"    		
        errorIDExp = "urn:dece:errorid:org:dece:Security:RoleInvalid";
        errorReasonExp = "The API call is not authorized.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
        responseStatusExp = "HTTP/1.1 403 Forbidden";                              
         break;

    case "ForbiddenUserIdUnmatched":      		
        errorIDExp = "urn:dece:errorid:org:dece:UserIdUnmatched";
        errorReasonExp = "The user ID does not match.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
        responseStatusExp = "HTTP/1.1 403 Forbidden";                          
        break;
      
    case "Created":        
        responseStatusExp = "HTTP/1.1 201 Created";           
        contentTypeExp = "text/plain;charset=UTF-8";                     
        break; 

    case "ForbiddenMethodNotAllowed":        		
        errorIDExp = "urn:dece:errorid:org:dece:ForbiddenMethodNotAllowed";
        errorReasonExp = "";
        errorLinkExp   = "https://" + host + port + "/rest/$major/$minor/error/en/ErrorList.html#ForbiddenMethodNotAllowed";
        responseStatusExp = "HTTP/1.1 405 Method Not Allowed";           
        contentTypeExp = "text/plain;charset=UTF-8";    
        if(HTTPMethod == "OPTIONS")
        {
        	contentTypeExp = "text/xml";    
        }    
       
        errorBodyExp = HTTPMethod + " method is not allowed for API call: https://" + hostError + port + "/rest/$major/$minor/Account/" + accountId + "/RightsToken/" + rightsTokenId+"/"+contentProfile + "/DiscreteMediaRight/"+discreteMediaProfile+"/Consume";
        break;
   
    case "OK":        
        responseStatusExp = "HTTP/1.1 200 OK";          
        break;

    case "BadRequestMediaProfileNotValid":    
    connectionStatusExp ="close";    
        errorIDExp = "urn:dece:errorid:org:dece:MediaProfileNotValid";
        errorReasonExp = "The media profile is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp ="close";           
        break;

    case "BadRequestAccountIdNotValid": 
    connectionStatusExp ="close";       
        errorIDExp = "urn:dece:errorid:org:dece:AccountIdNotValid";
        errorReasonExp = "The account ID is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#AccountIdNotValid"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";        
        break;

    case "BadRequestAuthorizedFulfillmentMethodNotValid":    
    connectionStatusExp ="close";     
        errorIDExp = "urn:dece:errorid:org:dece:AuthorizedFulfillmentMethodNotValid";
        errorReasonExp = "The authorized fulfillment method is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#AuthorizedFulfillmentMethodNotValid"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "BadRequestDiscreteMediaStateShouldBeAvailable": 
    connectionStatusExp ="close";        
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaStateShouldBeAvailable";
        errorReasonExp = "The discrete media right is not available.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaStateShouldBeAvailable"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

     case "BadRequestDiscreteMediaStateShouldBeFulfilled": 
    connectionStatusExp ="close";        
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaStateShouldBeFulfilled";
        errorReasonExp = "The DiscreteMediaRight state should be fulfilled";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaStateShouldBeAvailable"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "BadRequestDiscreteMediaStateNotValid":    
    connectionStatusExp ="close";     
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaStateNotValid";
        errorReasonExp = "The status of the discrete media right is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaStateNotValid"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "BadRequestDuplicateAuthorizedFulfillmentMethodsNotAllowed":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:DuplicateAuthorizedFulfillmentMethodsNotAllowed";
        errorReasonExp = "The authorized fulfillment methods are not allowed.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DuplicateAuthorizedFulfillmentMethodsNotAllowed"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "BadRequestDiscreteMediaLimitExceeded":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaLimitExceeded";
        errorReasonExp = "The maximum number of discrete media rights allowed has been exceeded.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaLimitExceeded"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";  
        connectionStatusExp ="close";         
        break;

    case "BadRequestContentProfileNotValid":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:ContentProfileNotValid";
        errorReasonExp = "The content profile is not valid";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#ContentProfileNotValid"; 
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "BadRequestUserIdInvalid":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:UserIdInvalid";
        errorReasonExp = "The user ID is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#UserIdInvalid";
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
         break;

    case "BadRequestAccountIdNotValid":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:AccountIdNotValid";
        errorReasonExp = "The account ID is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#AccountIdNotValid";
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "BadRequestNodeIdInvalid":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:NodeIdInvalid";
        errorReasonExp = "The node ID is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#NodeIdInvalid";
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "ForbiddenNodeNotActive":
	   errorIDExp = "urn:dece:errorid:org:dece:NodeNotActive";
        errorReasonExp = "The node is not active.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#NodeNotActive"; 
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "ForbiddenUserNotActive":
        errorIDExp = "urn:dece:errorid:org:dece:UserNotActive";
        errorReasonExp = "The member is not active.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "NotFoundUserNotFound":
        errorIDExp = "urn:dece:errorid:org:dece:UserNotFound";
        errorReasonExp = "The user ID was not found.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#UserNotFound";
        responseStatusExp = "HTTP/1.1 404 Not Found";           
        break;

    case "NotFoundNotFound":
        errorIDExp = "urn:dece:errorid:org:dece:NotFound";
        errorReasonExp = "The requested resource was not found.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#NotFound";
        responseStatusExp = "HTTP/1.1 404 Not Found";           
        break;

    case "ForbiddenAccountIdUnmatched":
    	   log.info "We are in ForbiddenAccountIdUnmatched Case";
        errorIDExp = "urn:dece:errorid:org:dece:AccountIdUnmatched";
        errorReasonExp = "The account ID does not match.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#AccountIdUnmatched";  
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        log.info "Exit ForbiddenAccountIdUnmatched Case"
        break;

    case "ForbiddenAccountNotActive":
        errorIDExp = "urn:dece:errorid:org:dece:AccountNotActive";
        errorReasonExp = "The account is not active.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#AccountNotActive";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "ForbiddenLockerViewAllConsentRequired":
        errorIDExp = "urn:dece:errorid:org:dece:Policy:LockerViewAllConsentRequired";
        errorReasonExp = "";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#Policy:LockerViewAllConsentRequired";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    /*case "DSPForbiddenRightsTokenAccessNotAllowed":
        xmlData = myDBErrors.errGetIdInfo("DSPForbiddenRightsTokenAccessNotAllowed");
    	   if(xmlData.trim() != "")
	   {
	       try
	       {
	            sqlResult = new XmlSlurper().parseText(xmlData);
	       }	
	       catch (Throwable e)
	       {
	           log.info e;	
	       }
        }
        errorIDExp = "urn:dece:errorid:org:dece:";
        errorReasonExp = "";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
                 
       
                
        break;*/

    case "ForbiddenRightsTokenAccessNotAllowed":
        errorIDExp = "urn:dece:errorid:org:dece:RightsTokenAccessNotAllowed";
        errorReasonExp = "The member does not have permission to access the content.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#RightsTokenAccessNotAllowed";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "BadRequestRightsTokenIDNotValid":
    connectionStatusExp ="close"; 
        errorIDExp = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
        errorReasonExp = "The rights token ID is not valid.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#RightsTokenIDNotValid";
        responseStatusExp = "HTTP/1.1 400 Bad Request";           
        break;

    case "ForbiddenRightsTokenNotActive":
        errorIDExp = "urn:dece:errorid:org:dece:RightsTokenNotActive";
        errorReasonExp = "The rights token is not active.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#RightsTokenNotActive";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "NotFoundRightsTokenNotFound":
        errorIDExp = "urn:dece:errorid:org:dece:RightsTokenNotFound";
        errorReasonExp = "The rights token was not found.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#RightsTokenNotFound";
        responseStatusExp = "HTTP/1.1 404 Not Found";           
        break;

    case "ConflictMediaProfileNotValidForRightsToken":
        errorIDExp = "urn:dece:errorid:org:dece:MediaProfileNotValidForRightsToken";
        errorReasonExp = "The media profile is not valid for the rights token.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValidForRightsToken";
        responseStatusExp = "HTTP/1.1 409 Conflict";           
        break;

     case "MediaProfileNotValidForRightsToken":
        errorIDExp = "urn:dece:errorid:org:dece:MediaProfileNotValidForRightsToken";
        errorReasonExp = "The media profile is not valid for the rights token.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValidForRightsToken";
        responseStatusExp = "HTTP/1.1 409 Conflict";           
        break;


   case "ConflictContentProfileNotValidForRightsToken":
        errorIDExp = "urn:dece:errorid:org:dece:MediaProfileNotValidForRightsToken";
        errorReasonExp = "The media profile is not valid for the rights token.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValidForRightsToken";
        responseStatusExp = "HTTP/1.1 409 Conflict";           
        break;

   case "ConflictDiscreteMediaRightRemainingCountRestriction":
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaRightRemainingCountRestriction";
        errorReasonExp = "Insufficient discrete media rights remain.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaRightRemainingCountRestriction";
        responseStatusExp = "HTTP/1.1 409 Conflict";  
        break;	           

    case "BadRequestDiscreteMediaProfileInvalid":
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaProfileInvalid";
        errorReasonExp = "";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaProfileInvalid";
        responseStatusExp = "HTTP/1.1 400 Bad Request";        
        break;

    case "ConflictDiscreteMediaProfileNotValidForRightsToken":
        errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaFulfillmentMethodNotValidForRightsToken";
        errorReasonExp = "The discrete media fulfillment method is not valid for the rights token.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaFulfillmentMethodNotValidForRightsToken";
        responseStatusExp = "HTTP/1.1 409 Conflict";           
        break;

    case "NotFoundDiscreteMediaProfileDoesNotExist":
		errorIDExp = "urn:dece:errorid:org:dece:DiscreteMediaProfileDoesNotExist";
        errorReasonExp = "";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaProfileDoesNotExist";
        responseStatusExp = "HTTP/1.1 404 Not Found";           
        break;

    case "NotFoundPurchaseProfileNotFound":
        errorIDExp = "urn:dece:errorid:org:dece:PurchaseProfileNotFound";
        errorReasonExp = "The purchase profile was not found.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#PurchaseProfileNotFound";
        responseStatusExp = "HTTP/1.1 404 Not Found";           
        break;

    case "ForbiddenUserPrivlegeAccessRestricted":
        errorIDExp = "urn:dece:errorid:org:dece:UserPrivlegeAccessRestricted";
        errorReasonExp = "";    
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#UserPrivlegeAccessRestricted";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "ForbiddenContentIDNotActive":
        errorIDExp = "urn:dece:errorid:org:dece:ContentIDNotActive";
        errorReasonExp = "The content is not active.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotActive"; 
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "NotFoundContentIDNotFound":
        errorIDExp = "urn:dece:errorid:org:dece:ContentIDNotFound";
        errorReasonExp = "The content ID was not found.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotFound";
        responseStatusExp = "HTTP/1.1 404 Not Found";           
        break;

    case "ForbiddenUnratedContentBlocked":
    	   log.info "UNRATED"
        errorIDExp = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
        errorReasonExp = "The user does not have permission to access this content because it is unrated.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#Policy:UnratedContentBlocked";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;

    case "ForbiddenRatingPolicyExists":
        errorIDExp = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
        errorReasonExp = "The user does not have permission to access this content because of its rating.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#Policy:RatingPolicyExists";
        responseStatusExp = "HTTP/1.1 403 Forbidden";          
        break;

    case "ForbiddenAdultContentNotAllowed":
        errorIDExp = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
        errorReasonExp = "The user does not have permission to access this content because of its rating.";
        errorLinkExp   = "https://" + hostError + port + "/rest/$major/$minor/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
        responseStatusExp = "HTTP/1.1 403 Forbidden";           
        break;
	                          
}

boolean iFailed = false;
log.info "Out from the Switch Case Block"
try
{
	log.info "responseStatusExp-->"+responseStatusExp;
	log.info "responseStatusAct-->"+responseStatusAct;
	assert responseStatusExp == responseStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info responseStatusExp;
	log.info responseStatusAct;
	iFailed = true;
}

try
{
	log.info "connectionStatusExp-->"+connectionStatusExp;
	log.info "connectionStatusAct-->"+connectionStatusAct;
	//assert connectionStatusExp == connectionStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info connectionStatusExp;
	log.info connectionStatusAct;
	iFailed = true;
}

try
{
	log.info "contentTypeExp-->"+contentTypeExp;
	log.info "contentTypeAct-->"+contentTypeAct;
	//assert contentTypeExp == contentTypeAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info contentTypeExp;
	log.info contentTypeAct;
	iFailed = true;
}

if(errorResponse == "ForbiddenMethodNotAllowed")
{
	if(HTTPMethod != "OPTIONS" && HTTPMethod != "HEAD")
	{
		try
		{
			//assert errorBodyExp == resXML.trim();
		}
		catch(Throwable e)
		{
			log.info e;		
			log.info errorBodyExp;
			log.info resXML;
			iFailed = true;
		}
	}
}

if (myXML != null) 
{	
    if(errorResponse != "ForbiddenNodeNotActive" && errorResponse != "OK" && errorResponse != "BadRequestDiscreteMediaStateNotValid" && HTTPMethod != "OPTIONS")
    {
         // Verify response sizes...
         assert myXML.Error.size() == 1;
         assert myXML.Error.Reason.size() == 1;
         assert myXML.Error.OriginalRequest.size() == 1;
         assert myXML.Error.ErrorLink.size() == 1;
    
         errorIDAct = myXML.Error.@ErrorID.toString();
         log.info "In IF Condition errorIDAct="+errorIDAct;
         errorReasonAct = myXML.Error.Reason.toString();
          log.info "In IF Condition errorReasonAct="+errorReasonAct;
         errorLinkAct = myXML.Error.ErrorLink.toString();
          log.info "In IF Condition errorLinkAct="+errorLinkAct;
          orgRequestAct = myXML.Error.OriginalRequest.toString();
          log.info "In IF Condition orgRequestAct="+orgRequestAct;
    }
    else if(errorResponse == "BadRequestRightsTokenIDNotValid")
    {
        // Verify response sizes...
         assert myXML.Error.size() == 2;
         assert myXML.Error.Reason.size() == 2;
         assert myXML.Error.OriginalRequest.size() == 2;
         assert myXML.Error.ErrorLink.size() == 2;
    
         errorIDAct = myXML.Error[1].@ErrorID.toString();
         errorReasonAct = myXML.Error[1].Reason.toString();
         errorLinkAct = myXML.Error[1].ErrorLink.toString();
         orgRequestAct = myXML.Error[1].OriginalRequest.toString().replace("%3A", ":");
    }
    else if(errorResponse == "BadRequestDiscreteMediaStateNotValid")
    {
        // Verify response sizes...
         assert myXML.Error.size() == 2;
         assert myXML.Error.Reason.size() == 2;
         assert myXML.Error.OriginalRequest.size() == 2;
         assert myXML.Error.ErrorLink.size() == 2;
    
         errorIDAct = myXML.Error[0].@ErrorID.toString();
         errorReasonAct = myXML.Error[0].Reason.toString();
         errorLinkAct = myXML.Error[0].ErrorLink.toString();
         orgRequestAct = myXML.Error[0].OriginalRequest.toString();
    } 
    if(errorResponse != "ForbiddenNodeNotActive" && errorResponse != "OK" && HTTPMethod != "OPTIONS")
    {                              
     	// ErrorId
    		try
     	{
     		log.info "errorIDAct-->"+errorIDAct;
     		log.info "errorIDExp-->"+errorIDExp;
     		assert errorIDAct == errorIDExp;
   	  	}
   		catch(Throwable e)
		{
			log.info e;		
			log.info errorIDExp;
			log.info errorIDAct;
			iFailed = true;
		} 
	          
     	if(errorResponse != "NotFoundNotFound")
     	{
     		// ErrorReason
	     	try
	     	{
	     		assert errorReasonAct == errorReasonExp;
			}
	     	catch(Throwable e)
			{
				log.info e;		
				log.info errorReasonExp;
				log.info errorReasonAct;
				iFailed = true;
			}
     	}
	
     	// ErrorLink
     	try
     	{
     		//assert errorLinkAct == errorLinkExp;
     	}
     	catch(Throwable e)
		{
			log.info e;		
			log.info errorLinkExp;
			log.info errorLinkAct;
			iFailed = true;
		}
		// OriginalRequest
		if(errorResponse != "ConflictMediaProfileNotValidForRightsToken")
		try
     	{
     		//assert orgRequestAct == orgRequestExp;
     	}
     	catch(Throwable e)
		{
			log.info e;		
			log.info orgRequestExp;
			log.info orgRequestAct;
			iFailed = true;
		}		
    }	
} 



assert iFailed == false;

log.info 'Woohoo!';

]]></script></con:config></con:testStep><con:properties><con:property><con:name>ConnectionStatus</con:name><con:value>close</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentType</con:name><con:value>text/plain;charset=UTF-8</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>HTTPMethod</con:name><con:value>POST</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>ResponseStatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>ResponseXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A66693FFD2DEEE05307991F0A2828</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update Node Credential Table" searchProperties="true" id="d1df49fd-2e2c-4996-9dde-fc81dd372010"><con:settings/><con:testStep type="groovy" name="Update Node Credential Table"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

nodeCredentialId = testProject.getPropertyValue("NodeCredentialId");
nodeOid = testCase.getPropertyValue("NodeOid");
sqlStr = """update node_credential set node_oid = $nodeOid where credential_id =hextoraw( $nodeCredentialId)""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:properties><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Delete All My Policies" searchProperties="true" id="912d0cd6-79a5-482e-bada-c1ebec4a5f69"><con:settings/><con:testStep type="groovy" name="Delete All My Policies"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

//def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName"));

def policyClassesToBeDeleted = testCase.getPropertyValue("PolicyClassesToBeDeleted");

policyDeleteArray = policyClassesToBeDeleted.split(",");
def existingPolicyOid;
def policyToDelete;

def myUserOids = new String[6];
//myUserOids = ['194558', '194559', '194560', '194561', '194562', '194563'];
myUserOids = ['A2612F900B478D44E0401F0A0599656B','A2612F900AED8D44E0401F0A0599656B','A2612F900A398D44E0401F0A0599656B','A2612F900A938D44E0401F0A0599656B','A2612F9009AA8D44E0401F0A0599656B','A261359F1777739CE0401F0A0599626F'];
def myUUIDs = new String[6];
//myUUIDs = ['fbbdd202-bj4u-4e57-b32a-200002', 'fbbdd202-bj4u-4e57-b32a-100002', 'fbbdd202-bj4u-4e57-b32a-100003', 'fbbdd202-bj4u-4e57-b32a-100004', 'fbbdd202-bj4u-4e57-b32a-100005', 'fbbdd202-bj4u-4e57-b32a-100006'];
myUUIDs = ['_0d8945d2-a070-4c8a-98f8-e98db9093400','_70ea029a-86d3-416f-b450-2fb037275206','_6edd4689-deab-4d91-a67c-f3e6858515c8','_9c59edab-f2f3-43e1-a590-dffe781873d4','_c9fabd4f-3a6b-4cf2-9a3c-0924eebd5864','_cd7d0bc9-368b-4113-af6a-75f440dc3b17'];
//def restrictedUserOid = testCase.getPropertyValue("RestrictedUserOid");
//def requestorUUID = testCase.getPropertyValue("RequestorUUID");

for(i = 0; i &lt; policyDeleteArray.size(); i++)
{
    for(j = 0; j &lt; myUUIDs.size(); j++) 
    {
        requestorUUID = myUUIDs[j];
        for(k = 0; k &lt; myUserOids.size(); k++) 
        {
            restrictedUserOid = myUserOids[k];
            
            // DELETES
        
            existingPolicyOid = null;
            policyToDelete = policyDeleteArray[i].trim(); 
        
            if(policyToDelete.toInteger() == 100)
            {
            		sqlStr = """select 
            		to_char(rawtohex(pr.policy_oid ))
            		from 
          		POLICY p,
            		POLICY_RELATIONSHIP pr
            		where
            		p.policy_oid = pr.policy_oid
            		and 
            		pr.policy_actor = (select to_char(rawtohex(account_oid)) from node_account where row_oid in (select to_char(rawtohex(node_account_id)) from node_user_saml_assertion where node_user_saml_uuid = '$requestorUUID'))
            		and
            		p.policy_class = $policyToDelete""";
            }
            else
            {
        		sqlStr = """select 
        		     to_char(rawtohex(pr.policy_oid ))
            		from 
          		POLICY p,
            		POLICY_RELATIONSHIP pr
            		where
            		p.policy_oid = pr.policy_oid
            		and 
            		pr.policy_actor = '$restrictedUserOid'
            		and
            		p.policy_class = $policyToDelete""";
            }            
            
            // Check if policy already exists
            
            sql.eachRow(sqlStr){
                existingPolicyOid = it[0];
			 log.info existingPolicyOid;
                
                // POLICY_RESOURCE
                sqlStr = """delete from POLICY_RESOURCE where policy_oid =hextoraw( '$existingPolicyOid')""";
                sql.execute(sqlStr);
                
                // POLICY_REQUESTING_ENTITY
                sqlStr = """delete from POLICY_REQUESTING_ENTITY where policy_oid =hextoraw( '$existingPolicyOid')""";
                sql.execute(sqlStr);
                
                // POLICY_RELATIONSHIP
                sqlStr = """delete from POLICY_RELATIONSHIP where policy_oid =hextoraw( '$existingPolicyOid')""";
                sql.execute(sqlStr);
                
                // POLICY
                sqlStr = """delete from policy where policy_oid =hextoraw( '$existingPolicyOid')""";
                sql.execute(sqlStr);        
            }
        }
    }	
    log.info "Done deleting Policy Class '" + policyToDelete + "'";
}

sql.close();

log.info "Woohoo!";
</script></con:config></con:testStep><con:properties><con:property><con:name>PolicyClassesToBeDeleted</con:name><con:value>100, 300, 301, 302, 303, 304</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Delete Parental Control Policies" searchProperties="true" id="5f394deb-ead8-47c5-855e-13bb238a3207"><con:settings/><con:testStep type="groovy" name="Delete Parental Control Policies"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

//def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName"));

def policyClassesToBeDeleted = testCase.getPropertyValue("PolicyClassesToBeDeleted");

policyDeleteArray = policyClassesToBeDeleted.split(",");
def existingPolicyOid;
def policyToDelete;

def restrictedUserOid = testCase.getPropertyValue("RestrictedUserOid");
def requestorUUID = testCase.getPropertyValue("RequestorUUID");

for(i = 0; i &lt; policyDeleteArray.size(); i++)
{
    // DELETES

    existingPolicyOid = null;
    policyToDelete = policyDeleteArray[i].trim(); 

    if(policyToDelete.toInteger() == 100)
    {
    		sqlStr = """select 
    		to_char(rawtohex(pr.policy_oid ))
    		from 
  		POLICY p,
    		POLICY_RELATIONSHIP pr
    		where
    		p.policy_oid = hextoraw(pr.policy_oid)
    		and 
    		pr.policy_actor = (select account_oid from node_account where row_oid in (select node_account_id from node_user_saml_assertion where node_user_saml_uuid = '$requestorUUID'))
    		and
    		p.policy_class = $policyToDelete""";
    }
    else
    {
		sqlStr = """select 
		to_char(rawtohex(pr.policy_oid ))
    		from 
  		POLICY p,
    		POLICY_RELATIONSHIP pr
    		where
    		p.policy_oid = hextoraw(pr.policy_oid)
    		and 
    		pr.policy_actor = $restrictedUserOid
    		and
    		p.policy_class = $policyToDelete""";
    }
    
    // Check if policy already exists
    
    sql.eachRow(sqlStr){
        existingPolicyOid = it[0];
        // POLICY_RESOURCE
        sqlStr = """delete from POLICY_RESOURCE where policy_oid = hextoraw($existingPolicyOid)""";
        sql.execute(sqlStr);
        
        // POLICY_REQUESTING_ENTITY
        sqlStr = """delete from POLICY_REQUESTING_ENTITY where policy_oid = hextoraw($existingPolicyOid)""";
        sql.execute(sqlStr);
        
        // POLICY_RELATIONSHIP
        sqlStr = """delete from POLICY_RELATIONSHIP where policy_oid = hextoraw($existingPolicyOid)""";
        sql.execute(sqlStr);
        
        // POLICY
        sqlStr = """delete from policy where policy_oid = hextoraw($existingPolicyOid)""";
        sql.execute(sqlStr);        
    }	
}

sql.close();

log.info "Woohoo!";
</script></con:config></con:testStep><con:properties><con:property><con:name>RestrictedUserOid</con:name><con:value>[-94, 97, 53, -97, 23, 119, 115, -100, -32, 64, 31, 10, 5, -103, 98, 111]</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00074_DMRConsume_FUNC_RTL_POST_with_Unmatched_Requestor_DSP_Negative</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P1_TestCases_mi</con:value></con:property><con:property><con:name>PolicyClassesToBeDeleted</con:name><con:value>100, 300, 301, 302, 303, 304</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:2</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>_cd7d0bc9-368b-4113-af6a-75f440dc3b17</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>1397</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiscreteMediaRightCreate" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="e65c7820-7369-43da-ac11-695c68bcd2e4"><con:description/><con:settings/><con:testStep type="datasource" name="DataSource for Allowed Roles" disabled="true"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">700035</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">urn:dece:role:retailer</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">700035</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">urn:dece:role:retailer:customersupport</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>NodeOid</con:property><con:property>NodeRole</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for Node Roles" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>NodeOid</con:name><con:sourceType>NodeOid</con:sourceType><con:sourceStep>DataSource for Allowed Roles</con:sourceStep><con:targetType>NodeOid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>NodeRole</con:name><con:sourceType>NodeRole</con:sourceType><con:sourceStep>DataSource for Allowed Roles</con:sourceStep><con:targetType>NodeRole</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to that for Retailer" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Update Role for a Node');
commonTC.setPropertyValue("NodeOid", testCase.getPropertyValue("NodeOid"));
commonTC.setPropertyValue("NodeId", testCase.getPropertyValue("NodeId"));
commonTC.setPropertyValue("NodeRole", "urn:dece:role:retailer");

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Copy of RightsTokenCreate_FUNC_RTL_With_SD_Content_Profile');
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
//Change
commonTC.setPropertyValue("ContentRatingOid", testCase.getPropertyValue("ContentRatingOid"));
//

def runnerTC = commonTC.run(null, false);

assert "$runnerTC.status" != "FAILED";


//*Change
def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
callingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//*/



</script></con:config></con:testStep><con:testStep type="groovy" name="Call Update Role for a Node" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Update Role for a Node');
commonTC.setPropertyValue("NodeOid", testCase.getPropertyValue("NodeOid"));
commonTC.setPropertyValue("NodeId", testCase.getPropertyValue("NodeId"));
commonTC.setPropertyValue("NodeRole", testCase.getPropertyValue("NodeRole"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" disabled="true"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreatePost"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightCreatePost');

commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("NodeOid", testCase.getPropertyValue("NodeOid"));
commonTC.setPropertyValue("NodeId", testCase.getPropertyValue("NodeId"));
commonTC.setPropertyValue("NodeRole", testCase.getPropertyValue("NodeRole"));
log.info "Node Role :"+ testCase.getPropertyValue("NodeRole");

commonTC.setPropertyValue("RightsTokenIdDecoded", testCase.getPropertyValue("RightsTokenIdDecoded"));
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod", testCase.getPropertyValue("DiscreteMediaFulfillmentMethod"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("State", testCase.getPropertyValue("State"));
commonTC.setPropertyValue("LeaseExpiration", testCase.getPropertyValue("LeaseExpiration"));
commonTC.setPropertyValue("DiscreteMediaProfile", testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";

//*Change
def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("DiscreteMediaProfile", testCase.getPropertyValue("DiscreteMediaProfile"));
callingTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
callingTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
callingTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId"));

//*/
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Expiration Date" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Get Lease Expiration Date');

commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("ExpectedCount", "3");
commonTC.setPropertyValue("PurchaseProfileCanStream", "Y");
commonTC.setPropertyValue("PurchaseProfileCanDownload", "Y");
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASED_FULFILLMENT_METHOD Table" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASED_FULFILLMENT_METHOD Table");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("PurchaseProfileOid", testCase.getPropertyValue("PurchaseProfileOid"));
//commonTC.setPropertyValue("ExpectedCount", "4");
commonTC.setPropertyValue("ExpectedCount", "2");

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop for Node Roles" disabled="true"><con:settings/><con:config><dataSourceStep>DataSource for Allowed Roles</dataSourceStep><targetStep>Property Transfer for Node Roles</targetStep></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00126_DMRConsume_FUNC_by_Full_Access_User_with_RatingPolicy_User_G_Content_PG_Parental_Control_Policy_CA_Negative</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P1_TestCases</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>10</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0689599897C713A3E05305991F0A82DF</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0689599897C713A3E05305991F0A82DF</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>BadRequest</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>PurchaseProfileOid</con:name><con:value>A9765E35D0105D29E0401F0A07997827</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>15554</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08D4C57C34352789E05305991F0AA5B4</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D4C57C34352789E05305991F0AA5B4</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenidDecoded</con:name><con:value>urn%3Adece%3Arightstokenid%3Aorg%3Adece%3AD37E2C8A389A02B4E0401F0A05996936</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiscreteMediaRightCreatePost" searchProperties="true" id="0721ff41-9193-4249-8399-368c98a2b360"><con:settings/><con:testStep type="groovy" name="Call Validations only for Valid Test Cases"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def testStep1 = testCase.getTestStepByName("Call Verify Content Location and Get DiscreteMediaTokenOid");
def errorResponse = testCase.getPropertyValue("ErrorResponse");

if(errorResponse != "Created")
{
	testStep1.setDisabled(true);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="SetPem" id="8319d630-6093-4789-a5b0-47709745b128"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("DMRCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreatePost"><con:settings/><con:config service="DiscreteMediaRightCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight" methodName="DiscreteMediaRightCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreatePost" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<!--<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">-->
<DiscreteMediaToken State="${#TestCase#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:dvd:packaged</AuthorizedFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:bluray:packaged</AuthorizedFulfillmentMethod>
   <!--<AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:securedigital</AuthorizedFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:dvd:cssrecordable</AuthorizedFulfillmentMethod>-->
   <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
   <LeaseExpiration>${#TestCase#LeaseExpiration}</LeaseExpiration>
</DiscreteMediaToken>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Validate Error Codes for DiscreteMediaRightCreate"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def valErrTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate Error Codes');

def resXML = null;
try
{
	resXML = testRunner.testCase.getTestStepByName('DMRCreatePost').httpRequest.response.getResponseContent();
}
catch (Throwable e)
{
	log.info e;		
}

def status = "";
try
{
	status = testRunner.testCase.getTestStepByName('DMRCreatePost').httpRequest.response.responseHeaders["#status#"]; 
}
catch(Throwable e)
{
	log.info e;
}

def connection = "";
try
{
	connection = testRunner.testCase.getTestStepByName('DMRCreatePost').httpRequest.response.responseHeaders["Connection"];
}
catch(Throwable e)
{
	log.info e;
}

def contentType = "";
try
{
	contentType = testRunner.testCase.getTestStepByName('DMRCreatePost').httpRequest.response.responseHeaders["Content-Type"];
}
catch(Throwable e)
{
	log.info e;
}
valErrTC.setPropertyValue("ResponseXML", resXML);
valErrTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
valErrTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
valErrTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
valErrTC.setPropertyValue("DiscreteMediaProfile", testCase.getPropertyValue("DiscreteMediaProfile"));
/*valErrTC.setPropertyValue("ResponseStatus", status);
valErrTC.setPropertyValue("ConnectionStatus", connection);
valErrTC.setPropertyValue("ContentType", contentType);*/
valErrTC.setPropertyValue("ResponseStatus", status[0]);
valErrTC.setPropertyValue("ConnectionStatus", connection[0]);
valErrTC.setPropertyValue("ContentType", contentType[0]);
valErrTC.setPropertyValue("HTTPMethod", "POST");

def runnerValErrTC = valErrTC.run(null, false);
assert "$runnerValErrTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get DiscreteMediaTokenOid" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testSuite.getTestCaseByName("Verify Content Location and Get DiscreteMediaTokenOid");
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));

def runnerCommonTC = commonTC.run( null, false);

assert "$runnerCommonTC.status" != "FAILED";

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 

callingTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
callingTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Enable Test Steps" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testProject.getTestSuiteByName("CommonSteps").getTestCaseByName('Enable Test Steps');
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0689599897C713A3E05305991F0A82DF</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0689599897C713A3E05305991F0A82DF</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>BadRequest</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08D4C57C34352789E05305991F0AA5B4</con:value></con:property><con:property><con:name>RightsTokenIdDecoded</con:name><con:value>urn%3Adece%3Arightstokenid%3Aorg%3Adece%3AD37E2C8A389A02B4E0401F0A05996936</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D4C57C34352789E05305991F0AA5B4</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>8319d630-6093-4789-a5b0-47709745b128</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Verify Content Location and Get DiscreteMediaTokenOid" searchProperties="true" id="6210bc65-0d82-459f-a15f-c6b9193695fb"><con:settings/><con:testStep type="groovy" name="Verify Content Location and Get DiscreteMediaTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
def rightsTokenId = testCase.getPropertyValue("RightsTokenId");
def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
def contentLocation = callingTC.getTestStepByName("DMRConsumePost").httpRequest.response.responseHeaders["Location"][0];

def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();
def major = context.expand( '${#Project#versionMajor}' )
def minor = context.expand( '${#Project#versionMinor}' )


if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/"+rightsTokenId+"/DiscreteMediaRight/urn:dece:discretemediatokenid:org:dece:" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def discreteMediaTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def discreteMediaTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("DiscreteMediaTokenOid", discreteMediaTokenOid);
	testCase.setPropertyValue("DiscreteMediaTokenId", discreteMediaTokenId);

	callingTC.setPropertyValue("DiscreteMediaTokenOid", discreteMediaTokenOid);
	callingTC.setPropertyValue("DiscreteMediaTokenId", discreteMediaTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/DiscreteMediaRight/urn%3Adece%3Adiscretemediatokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def discreteMediaTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def discreteMediaTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("DiscreteMediaTokenOid", discreteMediaTokenOid);
	testCase.setPropertyValue("DiscreteMediaTokenId", discreteMediaTokenId);

	callingTC.setPropertyValue("DiscreteMediaTokenOid", discreteMediaTokenOid);
	callingTC.setPropertyValue("DiscreteMediaTokenId", discreteMediaTokenId);
}

</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCase</con:name><con:value>RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:1397</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>1397</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightConsumePost</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get Lease Expiration Date" searchProperties="true" id="4c34b3aa-8fb7-4f65-aca1-a32c1cf1c69f"><con:settings/><con:testStep type="groovy" name="Get Lease Expiration Date"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr = """select to_char((sysdate + interval '6' hour), 'yyyy-mm-dd hh:mi:ss') from dual""";

def leaseExpirationDate;
sql.eachRow(sqlStr){
	leaseExpirationDate = it[0];
}

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("LeaseExpiration", leaseExpirationDate.replace(" ", "T"));

sql.close();</script></con:config></con:testStep><con:properties><con:property><con:name>NodeId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>UUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>A32085305525359EE0401F0A05996D40</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate DISCRETE_MEDIA_TOKEN Table DMRCreate" searchProperties="true" id="65bd295f-d663-49a0-a944-1a34cb213369"><con:settings/><con:testStep type="groovy" name="Validate DISCRETE_MEDIA_TOKEN Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String discreteMediaTokenOid = testCase.getPropertyValue("DiscreteMediaTokenOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
Integer recordCount = 0;
String userOid = testProject.getPropertyValue("UserOid");
String nodeOid = testProject.getPropertyValue("NodeOid");
String leaseType = testProject.getPropertyValue("LeaseType");
String leaseStatus = testProject.getPropertyValue("LeaseStatus");
String leaseExpirationDate = testProject.getPropertyValue("LeaseExpirationDate");
/*String leaseType = testCase.getPropertyValue("LeaseType");
String leaseStatus = testCase.getPropertyValue("LeaseStatus");
String leaseExpirationDate = testCase.getPropertyValue("LeaseExpirationDate");*/


boolean iFailed = false;

sqlStr = """select count(*) from DISCRETE_MEDIA_TOKEN dmt
where 
dmt.DISCRETE_MEDIA_TOKEN_OID =hextoraw( '$discreteMediaTokenOid')""";
log.info 'sqlStr ='+sqlStr

sql.eachRow(sqlStr){
	actualCountDMT = it[0];
}

try
{
	assert actualCountDMT.toString() == testProject.getPropertyValue("PurchaseProfileBurnsLeft");
}
catch(Throwable e)
{
	log.info e;
	log.info testProject.getPropertyValue("PurchaseProfileBurnsLeft");
	log.info actualCountDMT;	
	iFailed = true;
}

sqlStr = """select 
to_char(rawtohex(dmt.RIGHTS_TOKEN_OID)),
to_char(rawtohex(dmt.ACCOUNT_OID)),
to_char(rawtohex(dmt.USER_OID)),
to_char(rawtohex(dmt.CREATED_BY)),
to_char(dmt.STATE),
to_char(dmt.STATUS),
to_char(dmt.EXPIRATION_DATE, 'yyyy-mm-dd hh:mi:ss') EXPIRATION_DATE,
to_char(dmt.CREATED_DATE, 'yyyy-mm-dd hh:mi:ss') CREATED_DATE,
to_char(rawtohex(dmt.PURCHASED_FULFILLMENT_MTHD_OID)) PURCHASED_FULFILLMENT_MTHD_OID
from 
DISCRETE_MEDIA_TOKEN dmt  
where 
dmt.DISCRETE_MEDIA_TOKEN_OID = hextoraw('$discreteMediaTokenOid')
and 
dmt.ACCOUNT_OID = '$accountOid'
and
dmt.STATE = 'available'""";
log.info 'sqlStr ='+sqlStr
	
sql.eachRow(sqlStr){	
	recordCount = recordCount + 1;
	RIGHTS_TOKEN_OID = it[0];
	ACCOUNT_OID = it[1];
	USER_OID = it[2];
	CREATED_BY = it[3];
	TYPE = it[4];
	STATUS = it[5];
	EXPIRATION_DATE = it[6];
	CREATED_DATE = it[7];
	PURCHASED_FULFILLMENT_MTHD_OID = it[8];
	log.info 'CREATED_DATE ='+CREATED_DATE
}

try
{
	assert CREATED_DATE != null;
}
catch(Throwable e)
{
	log.info e;
	log.info "Expected not NULL";
	log.info CREATED_DATE;	
	iFailed = true;
}

try
{
	assert recordCount == 1;
}
catch(Throwable e)
{
	log.info e;
	log.info "1";
	log.info recordCount;	
	iFailed = true;
}

try
{
	assert rightsTokenOid == RIGHTS_TOKEN_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info rightsTokenOid;
	log.info RIGHTS_TOKEN_OID;	
	iFailed = true;
}

try
{
	assert accountOid == ACCOUNT_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info accountOid;
	log.info ACCOUNT_OID;	
	iFailed = true;
}

try
{
	assert userOid == USER_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info userOid;
	log.info USER_OID;	
	iFailed = true;
}

try
{
	assert nodeOid == CREATED_BY;
}
catch(Throwable e)
{
	log.info e;
	log.info nodeOid;
	log.info CREATED_BY;	
	iFailed = true;
}

try
{
	assert leaseType == TYPE;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseType;
	log.info TYPE;	
	iFailed = true;
}

try
{
	assert leaseStatus == STATUS;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseStatus;
	log.info STATUS;	
	iFailed = true;
}

try
{
	assert null == EXPIRATION_DATE;
}
catch(Throwable e)
{
	log.info e;
	log.info null;//leaseExpirationDate;
	log.info EXPIRATION_DATE;	
	iFailed = true;
}

try
{
	assert null == PURCHASED_FULFILLMENT_MTHD_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info null;
	log.info PURCHASED_FULFILLMENT_MTHD_OID;	
	iFailed = true;
}

assert iFailed == false;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>A6623155D0BAD225E0401F0A05993D04</con:value></con:property><con:property><con:name>ALID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>CID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeOid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">700035</con:value></con:property><con:property><con:name>AccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsLockerOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeAccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeUserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseTime</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseAccount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>A644CCD8FB059552E0401F0A0599328A</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property><con:property><con:name>LeaseType</con:name><con:value/></con:property><con:property><con:name>LeaseStatus</con:name><con:value/></con:property><con:property><con:name>LeaseExpirationDate</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate DISCRETE_MEDIA_TOKEN_HISTORY Table DMRCreate" searchProperties="true" id="6e258395-f670-482f-aa3e-ad2c22a845d9"><con:settings/><con:testStep type="groovy" name="Validate DISCRETE_MEDIA_TOKEN_HISTORY Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String discreteMediaTokenOid = testCase.getPropertyValue("DiscreteMediaTokenOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
Integer recordCount = 0;
String userOid = testProject.getPropertyValue("UserOid");
String nodeOid = testProject.getPropertyValue("NodeOid");
String leaseType = testProject.getPropertyValue("LeaseType");
String leaseStatus = testProject.getPropertyValue("LeaseStatus");
String leaseExpirationDate = testProject.getPropertyValue("LeaseExpirationDate");

boolean iFailed = false;

sqlStr = """select count(*) from DISCRETE_MEDIA_TOKEN_HISTORY dmth
where 
dmth.DISCRETE_MEDIA_TOKEN_OID =hextoraw( '$discreteMediaTokenOid')""";
log.info 'sqlStr = '+sqlStr

sql.eachRow(sqlStr){
	actualCountDMT = it[0];
}

try
{
	log.info 'Burns left='+testProject.getPropertyValue("PurchaseProfileBurnsLeft");
	log.info 'Actual='+actualCountDMT.toString()
	assert actualCountDMT.toString() == testProject.getPropertyValue("PurchaseProfileBurnsLeft");
	
}
catch(Throwable e)
{
	log.info e;
	log.info testProject.getPropertyValue("PurchaseProfileBurnsLeft");
	log.info actualCountDMT;	
	iFailed = true;
}

sqlStr = """select 
to_char(rawtohex(dmth.RIGHTS_TOKEN_OID)),
to_char(rawtohex(dmth.ACCOUNT_OID)),
to_char(rawtohex(dmth.USER_OID)),
to_char(rawtohex(dmth.CREATED_BY)),
to_char(dmth.STATE),
to_char(dmth.STATUS),
to_char(dmth.EXPIRATION_DATE, 'yyyy-mm-dd hh:mi:ss') EXPIRATION_DATE,
to_char(dmth.CREATED_DATE, 'yyyy-mm-dd hh:mi:ss') CREATED_DATE,
to_char(rawtohex(dmth.PURCHASED_FULFILLMENT_MTHD_OID)) PURCHASED_FULFILLMENT_MTHD_OID
from 
DISCRETE_MEDIA_TOKEN_HISTORY dmth  
where 
dmth.DISCRETE_MEDIA_TOKEN_OID = hextoraw('$discreteMediaTokenOid')
and 
dmth.ACCOUNT_OID = '$accountOid'
and
dmth.STATE = 'available'""";
log.info 'sqlStr='+sqlStr
	
sql.eachRow(sqlStr){	
	recordCount = recordCount + 1;
	RIGHTS_TOKEN_OID = it[0];
	ACCOUNT_OID = it[1];
	USER_OID = it[2];
	CREATED_BY = it[3];
	TYPE = it[4];
	STATUS = it[5];
	EXPIRATION_DATE = it[6];
	CREATED_DATE = it[7];
	PURCHASED_FULFILLMENT_MTHD_OID = it[8];
}

try
{
	assert CREATED_DATE != null;
}
catch(Throwable e)
{
	log.info e;
	log.info "Expected not NULL";
	log.info CREATED_DATE;	
	iFailed = true;
}

try
{
	assert recordCount == 1;
}
catch(Throwable e)
{
	log.info e;
	log.info "1";
	log.info recordCount;	
	iFailed = true;
}

try
{
	assert rightsTokenOid == RIGHTS_TOKEN_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info rightsTokenOid;
	log.info RIGHTS_TOKEN_OID;	
	iFailed = true;
}

try
{
	assert accountOid == ACCOUNT_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info accountOid;
	log.info ACCOUNT_OID;	
	iFailed = true;
}

try
{
	assert userOid == USER_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info userOid;
	log.info USER_OID;	
	iFailed = true;
}

try
{
	assert nodeOid == CREATED_BY;
}
catch(Throwable e)
{
	log.info e;
	log.info nodeOid;
	log.info CREATED_BY;	
	iFailed = true;
}

try
{
	assert leaseType == TYPE;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseType;
	log.info TYPE;	
	iFailed = true;
}

try
{
	assert leaseStatus == STATUS;
}
catch(Throwable e)
{
	log.info e;
	log.info leaseStatus;
	log.info STATUS;	
	iFailed = true;
}

try
{
	assert null == EXPIRATION_DATE;
}
catch(Throwable e)
{
	log.info e;
	log.info null;//leaseExpirationDate;
	log.info EXPIRATION_DATE;	
	iFailed = true;
}

try
{
	assert null == PURCHASED_FULFILLMENT_MTHD_OID;
}
catch(Throwable e)
{
	log.info e;
	log.info null;
	log.info PURCHASED_FULFILLMENT_MTHD_OID;	
	iFailed = true;
}

assert iFailed == false;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>A6623155D0BAD225E0401F0A05993D04</con:value></con:property><con:property><con:name>ALID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>CID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeOid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">700035</con:value></con:property><con:property><con:name>AccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsLockerOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeAccountOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeUserOid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseTime</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseAccount</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PurchaseInfoPurchaseUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>A644CCD8FB059552E0401F0A0599328A</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate PURCHASED_FULFILLMENT_METHOD Table DMRCreate" searchProperties="true" id="2f849242-d2d6-42e9-9ae8-a2b07491d2c9"><con:settings/><con:testStep type="groovy" name="Validate PURCHASED_FULFILLMENT_METHOD Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
String recordCountExp = testCase.getPropertyValue("ExpectedCount");
String purchaseProfileOid = testCase.getPropertyValue("PurchaseProfileOid");
Integer recordCountAct = 0;

boolean iFailed = false;

sqlStr = """select 
count(*)
from 
PURCHASED_FULFILLMENT_METHOD
where 
PURCHASE_PROFILE_OID =hextoraw( '$purchaseProfileOid')"""
log.info 'sqlStr ='+sqlStr
	
sql.eachRow(sqlStr){
	recordCountAct = it[0];
}
	try
	{
		assert recordCountExp == recordCountAct.toString();
	}
	catch(Throwable e)
	{
		log.info e;
		log.info recordCountExp;
		log.info recordCountAct;	
		iFailed = true;
	}

	assert iFailed == false;

//def fmExp = new Object[4];
def fmExp = new Object[2];
fmExp[0] = "bluray:packaged";
//fmExp[1] = "dvd:cssrecordable";
fmExp[1] = "dvd:packaged";
//fmExp[2] = "dvd:packaged";
//fmExp[3] = "securedigital";

//def fmAct = new Object[4];
def fmAct = new Object[2];
sqlStr = """select 
AUTHORIZED_FULFILLMENT_METHOD
from 
PURCHASED_FULFILLMENT_METHOD
where 
PURCHASE_PROFILE_OID =hextoraw( '$purchaseProfileOid')
order by
AUTHORIZED_FULFILLMENT_METHOD"""
log.info 'sqlStr='+sqlStr

Integer i = 0;
	
sql.eachRow(sqlStr){
	fmAct[i] = it[0];	
	i = i + 1;	
}

assert fmExp == fmAct;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>A67E3A144FABCDECE0401F0A07993A64</con:value></con:property><con:property><con:name>ExpectedCount</con:name><con:value>2</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:highdefinition</con:value></con:property><con:property><con:name>PurchaseProfileOid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A67E3A144FAECDECE0401F0A07993A64</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate PURCHASE_PROFILE Table DMRConsume" searchProperties="true" id="16cb7a03-b7a6-41e8-b2aa-b811817bc7e9"><con:settings/><con:testStep type="groovy" name="Validate PURCHASE_PROFILE Table" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

String accountOid = testProject.getPropertyValue("AccountOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
String recordCountExp = testCase.getPropertyValue("ExpectedCount");
Integer recordCountAct = 0;
String purchasedMediaProfileHD = testProject.getPropertyValue("PurchasedMediaProfileHD").split("urn:dece:type:mediaprofile:")[1];
String purchasedMediaProfileSD = testProject.getPropertyValue("PurchasedMediaProfileSD").split("urn:dece:type:mediaprofile:")[1];
String purchasedMediaProfilePD = testProject.getPropertyValue("PurchasedMediaProfilePD").split("urn:dece:type:mediaprofile:")[1];
String discreteMediaRightsRemainingHD = testProject.getPropertyValue("DiscreteMediaRightsRemainingHD");
String discreteMediaRightsRemainingSD = testProject.getPropertyValue("DiscreteMediaRightsRemainingSD");
String discreteMediaRightsRemainingPD = testProject.getPropertyValue("DiscreteMediaRightsRemainingPD");
String purchaseProfileCanDownLoad = testCase.getPropertyValue("PurchaseProfileCanDownLoad");
String purchaseProfileCanStream = testCase.getPropertyValue("PurchaseProfileCanStream");

//def discreteMediaRightsRemaining = null;
def discreteMediaRightsRemaining = 0;

boolean iFailed = false;

sqlStr = """select 
to_char(rawtohex(RIGHTS_TOKEN_OID)),
to_char(DOWNLOAD),
to_char(STREAM),
to_char(DISCRETE_MEDIA_RIGHTS_REMAIN),
to_char(PURCHASED_CONTENT_PROFILE)
from 
PURCHASE_PROFILE
where 
RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid')
order by
PURCHASED_CONTENT_PROFILE""";
log.info 'sqlStr='+sqlStr
	
sql.eachRow(sqlStr){
	recordCountAct = recordCountAct + 1;
	RIGHTS_TOKEN_OID = it[0];
	DOWNLOAD = it[1];
	STREAM = it[2];
	DISCRETE_MEDIA_RIGHTS_REMAIN = it[3];
	log.info 'DISCRETE_MEDIA_RIGHTS_REMAIN='+DISCRETE_MEDIA_RIGHTS_REMAIN
	PURCHASED_CONTENT_PROFILE = it[4];
	try
	{
		assert rightsTokenOid == RIGHTS_TOKEN_OID;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info rightsTokenOid;
		log.info RIGHTS_TOKEN_OID;	
		iFailed = true;
	}

	try
	{
		assert purchaseProfileCanDownLoad == DOWNLOAD;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info purchaseProfileCanDownLoad;
		log.info DOWNLOAD;	
		iFailed = true;
	}

	try
	{
		assert purchaseProfileCanStream == STREAM;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info purchaseProfileCanStream;
		log.info STREAM;	
		iFailed = true;
	}

	if(recordCountExp == '1')
	{
		purchasedMediaProfile = purchasedMediaProfilePD;
		discreteMediaRightsRemaining = discreteMediaRightsRemainingPD;	
	}
	else if(recordCountExp == '2')
	{
		if(recordCountAct == 1)
		{
			purchasedMediaProfile = purchasedMediaProfilePD;	
			discreteMediaRightsRemaining = discreteMediaRightsRemainingPD;		
		}
		else if(recordCountAct == 2)
		{
			purchasedMediaProfile = purchasedMediaProfileSD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingSD;			
		}
	}
	else if(recordCountExp == '3')
	{ 	
		if(recordCountAct == 1)
		{
			purchasedMediaProfile = purchasedMediaProfileHD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingHD;				
		}
		else if(recordCountAct == 2)
		{
			purchasedMediaProfile = purchasedMediaProfilePD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingPD;	
		}
		else if(recordCountAct == 3)
		{
			purchasedMediaProfile = purchasedMediaProfileSD;
			discreteMediaRightsRemaining = discreteMediaRightsRemainingSD;
		}
	}
	if(DISCRETE_MEDIA_RIGHTS_REMAIN == null)
	{
		DISCRETE_MEDIA_RIGHTS_REMAIN = '0';
	}

	try
	{
		log.info 'inside the loop123'
		log.info 'discreteMediaRightsRemaining =='+discreteMediaRightsRemaining
		log.info 'DISCRETE_MEDIA_RIGHTS_REMAIN=='+DISCRETE_MEDIA_RIGHTS_REMAIN
		assert discreteMediaRightsRemaining == DISCRETE_MEDIA_RIGHTS_REMAIN;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info discreteMediaRightsRemaining;
		log.info DISCRETE_MEDIA_RIGHTS_REMAIN;		
		iFailed = true;
	}	

	try
	{
		assert purchasedMediaProfile == PURCHASED_CONTENT_PROFILE;
	}
	catch(Throwable e)
	{
		log.info e;
		log.info purchasedMediaProfile;
		log.info PURCHASED_CONTENT_PROFILE;	
		iFailed = true;
	}
}
try
{
	assert recordCountExp == recordCountAct.toString();
}
catch(Throwable e)
{
	log.info e;
	log.info recordCountExp;
	log.info recordCountAct;	
	iFailed = true;
}
def contentProfile = testCase.getPropertyValue("ContentProfile").split(":")[4];

sqlStr = """select 
to_char(rawtohex(PURCHASE_PROFILE_OID))
from 
PURCHASE_PROFILE
where 
RIGHTS_TOKEN_OID =hextoraw( '$rightsTokenOid')
and
PURCHASED_CONTENT_PROFILE = '$contentProfile'""";
log.info 'sqlStr1='+sqlStr

def purchaseProfileOid;
	
sql.eachRow(sqlStr){
	purchaseProfileOid = it[0];
}

testCase.setPropertyValue("PurchaseProfileOid", purchaseProfileOid);

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("PurchaseProfileOid", testCase.getPropertyValue("PurchaseProfileOid"));

assert iFailed == false;

sql.close();

log.info "Woohoo!";</script></con:config></con:testStep><con:properties><con:property><con:name>RightsTokenOid</con:name><con:value>A9765E35CED15D29E0401F0A07997827</con:value></con:property><con:property><con:name>ExpectedCount</con:name><con:value>3</con:value></con:property><con:property><con:name>PurchaseProfileCanStream</con:name><con:value>Y</con:value></con:property><con:property><con:name>PurchaseProfileCanDownload</con:name><con:value>Y</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>DiscreteMediaRightCreate</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:highdefinition</con:value></con:property><con:property><con:name>PurchaseProfileOid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A9765E35CED45D29E0401F0A07997827</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get Valid DMTs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Get Valid DMTs"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """select count(*) from discrete_media_token 
where 
state not in ('fulfilled')
and
status not in ('deleted', 'other', 'expired')
and
account_oid = '$accountOid'
and
to_char(created_date, 'dd-mon-yyyy') >= to_date('14-mar-2011', 'dd-mon-yyyy')""";

Integer countDMT;
sql.eachRow(sqlStr){
	countDMT = it[0];	
}

random = new Random();
randomDMTRow = random.nextInt(countDMT - 1 + 1) + 1;

String discreteMediaTokenOid;
String discreteMediaTokenId;
sqlStr = """select 
to_char(rawtohex(discrete_media_token_oid)),
(case
when to_char(a.expiration_date, 'yyyy-mm-dd hh24:mi:ss') &lt; (select to_char(sysdate, 'yyyy-mm-dd hh24:mi:ss') from dual) and a.STATUS = 'active' and a.state = 'leased' then 'yes'
else
'no'
end) BadDMTFound
from 
(select 
discrete_media_token_oid, 
state, 
expiration_date, 
status, 
rownum numRow 
from 
discrete_media_token dmt 
where 
dmt.state not in ('fulfilled')
and
dmt.status not in ('deleted', 'other', 'expired')
and
dmt.account_oid = '$accountOid'
and
to_char(dmt.created_date, 'dd-mon-yyyy') >= to_date('14-mar-2011', 'dd-mon-yyyy')) a 
where a.numRow = $randomDMTRow""";

sql.eachRow(sqlStr){
	discreteMediaTokenOid = it[0];	
	discreteMediaTokenId = "urn:dece:discretemediatokenid:org:dece:" + it[0];	
	badDMTFound = it[1];
}
dmRightsRemain = 0;
if(badDMTFound == 'yes')
{	
	/*sqlStr = """select
		pp.DISCRETE_MEDIA_RIGHTS_REMAIN
		from		 
		discrete_media_token dmt,
		purchase_profile pp,
		purchased_media_profile pmp		
		where 
		dmt.rights_token_oid = pp.rights_token_oid(+)
		and
		pp.purchase_profile_oid = pmp.purchase_profile_oid(+)		
		and
		dmt.discrete_media_token_oid = '$discreteMediaTokenOid'
  		and
  		pmp.PURCHASED_MEDIA_PROFILE_OID = dmt.PURCHASED_MEDIA_PROFILE_OID""";*/

  		
	sqlStr = """select
		pp.DISCRETE_MEDIA_RIGHTS_REMAIN
		from		 
		discrete_media_token dmt,
		purchase_profile pp,
		purchased_FULFILLMENT_METHOD pfm --pmp		
		where 
		dmt.rights_token_oid = pp.rights_token_oid(+)
		and
		pp.purchase_profile_oid = pfm.purchase_profile_oid(+)		
		and
		dmt.discrete_media_token_oid = '$discreteMediaTokenOid'
  		and
  		pfm.PURCHASED_FULFILLMENT_MTHD_OID = dmt.PURCHASED_FULFILLMENT_MTHD_OID"""
		
	sql.eachRow(sqlStr){		
		dmRightsRemain = it[0].toInteger();
		log.info 'dmRightsRemain = '+dmRightsRemain
	}	
}

testCase.setPropertyValue("DMRightsRemainExp", dmRightsRemain.toString()); 

testCase.setPropertyValue("DiscreteMediaTokenOid", discreteMediaTokenOid + ":" + badDMTFound);   
testCase.setPropertyValue("DiscreteMediaTokenId", discreteMediaTokenId);

String rightsTokenOid;
String rightsTokenId;
sqlStr = """select to_char(rawtohex(rights_token_oid)) from discrete_media_token where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid')""";
sql.eachRow(sqlStr){
	rightsTokenOid = it[0];
	rightsTokenId = "urn:dece:rightstokenid:org:dece:" + it[0];	
}


sqlStr = """update rights_token set account_oid = $accountOid, status_id = 'active'
where rights_token_oid =hextoraw( '$rightsTokenOid')""";
sql.executeUpdate(sqlStr);


def contentRatingOid = testCase.getPropertyValue("ContentRatingOid");

//Changing the content Rating
//by Ankit Master


sqlStr = """update md_basic_rating_set set content_rating_oid = $contentRatingOid where
 basic_oid in (select basic_oid from md_basic where content_id in
 (select content_id from rights_token where rights_token_oid =hextoraw( $rightsTokenOid)))""";
 
sql.executeUpdate(sqlStr);


if(contentRatingOid == "10")
{
	sqlStr = """update md_basic_rating_set set content_rating_oid = $contentRatingOid, is_adult = 'Y' where
	basic_oid in (select basic_oid from md_basic where content_id in
	(select content_id from rights_token where rights_token_oid =hextoraw( $rightsTokenOid)))""";
}
else
{
	sqlStr = """update md_basic_rating_set set content_rating_oid = $contentRatingOid, is_adult = 'N' where
	basic_oid in (select basic_oid from md_basic where content_id in
	(select content_id from rights_token where rights_token_oid =hextoraw( $rightsTokenOid)))""";
}
sql.executeUpdate(sqlStr);

def discreteMediaTokenCreatedBy = testCase.getPropertyValue("DiscreteMediaTokenCreatedBy");
sqlStr = """update discrete_media_token set created_by = $discreteMediaTokenCreatedBy, status = 'active'--,
--expiration_date = (select current_timestamp + interval '6' hour from dual)
where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid')""";
sql.executeUpdate(sqlStr);

testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
testCase.setPropertyValue("RightsTokenId", URLEncoder.encode(rightsTokenId, "UTF-8"));

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName"));
callingTC.setPropertyValue("BadDMTFound", badDMTFound);
callingTC.setPropertyValue("RightsTokenOid", rightsTokenOid);
callingTC.setPropertyValue("RightsTokenId", URLEncoder.encode(rightsTokenId, "UTF-8"));
callingTC.setPropertyValue("DiscreteMediaTokenOid", discreteMediaTokenOid);
callingTC.setPropertyValue("DiscreteMediaTokenId", URLEncoder.encode(discreteMediaTokenId, "UTF-8"));

def nodeOid = callingTC.getPropertyValue("NodeId").split(":")[5];
testCase.setPropertyValue("NodeOid", nodeOid);

propertiesList = testCase.getPropertyList();
for (int i = 0; i &lt; propertiesList.size(); i++) 
{
    if(propertiesList[i].name.length() == 21 &amp;&amp; propertiesList[i].name[0..20] == 'DiscreteMediaTokenOid')
	{		
		discreteMediaTokenOid = propertiesList[i].value.toString();
		discreteMediaTokenOid = discreteMediaTokenOid.split(":")[0];		
		sqlStr = """select
		count(*)
		from discrete_media_token_history
		where
		discrete_media_token_oid = $discreteMediaTokenOid
		and
		state = 'fulfilled'""";
		sql.eachRow(sqlStr){
			countDMTH = it[0];
		}		
		testCase.setPropertyValue(propertiesList[i].name, propertiesList[i].value + ":" + countDMTH);
  	}	
}

testCase.setPropertyValue("ExpectedCountDMTH", (countDMTH.toInteger() + 1).toString());

sql.close();
log.info 'Woohoo!'</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00073_DiscreteMediaRightLeaseRelease_FUNC_RTL_POST_by_FAU_with_AllowAdult_Parental_Control_Policy</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>10</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>700035</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:A626B1E01B3D671FE0401F0A05991FE5</con:value></con:property><con:property><con:name>DMRightsRemainExp</con:name><con:value>0</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:A626B1E01B31671FE0401F0A05991FE5</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>A626B1E01B31671FE0401F0A05991FE5</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>A626B1E01B3D671FE0401F0A05991FE5:no:0</con:value></con:property><con:property><con:name>ExpectedCountDMTH</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate DiscreteMediaToken Details" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="9c8e40b6-2537-4c81-b71b-3d5504448bd7"><con:settings/><con:testStep type="groovy" name="Validate DiscreteMediaToken Details"><con:settings/><con:config><script><![CDATA[import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);


//def rtTCName = testCase.getPropertyValue("RTTestCaseName");
//def rtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName(rtTCName);
/*String rightsTokenOid = rtTC.getPropertyValue("RightsTokenOid");
String rightsTokenId = rtTC.getPropertyValue("RightsTokenId");
String discreteMediaTokenOid = rtTC.getPropertyValue("DiscreteMediaTokenOid").split(":")[0];
String discreteMediaTokenId = rtTC.getPropertyValue("DiscreteMediaTokenId");*/
//String nodeOid = rtTC.getPropertyValue("NodeOid");
//String nodeRole = rtTC.getPropertyValue("NodeRole");
String nodeRole = testCase.getPropertyValue("NodeRole");
String discreteMediaTokenOid = testCase.getPropertyValue("DiscreteMediaTokenOid")
String contentProfile = testCase.getPropertyValue("ContentProfile")
String dmRightsRemainExp = testProject.getPropertyValue("DiscreteMediaRightsRemaining");
//String dmRightsRemainExp = rtTC.getPropertyValue("DMRightsRemainExp");
//log.info 'dmRightsRemainExp = '+dmRightsRemainExp

boolean iFailed = false;

//if(nodeRole != 'urn:dece:role:retailer' && nodeRole != 'urn:dece:role:dsp' && nodeRole != 'urn:dece:role:portal' && nodeRole != 'urn:dece:role:portal:customersupport' && nodeRole != 'urn:dece:role:retailer:customersupport' && nodeRole != 'urn:dece:role:dsp:customersupport' && nodeRole != 'urn:dece:role:coordinator' && nodeRole != 'urn:dece:role:coordinator:customersupport' && nodeRole != 'urn:dece:role:dece' && nodeRole != 'urn:dece:role:dece:customersupport')
if(nodeRole != 'urn:dece:role:retailer' && nodeRole != 'urn:dece:role:dsp' && nodeRole != 'urn:dece:role:retailer:customersupport' && nodeRole != 'urn:dece:role:dsp:customersupport' && nodeRole != 'urn:dece:role:device')
{
	iFailed = true;
}

if(nodeRole == 'urn:dece:role:retailer' || nodeRole == 'urn:dece:role:dsp' || nodeRole == 'urn:dece:role:retailer:customersupport' || nodeRole == 'urn:dece:role:dsp:customersupport'|| nodeRole == 'urn:dece:role:device')
{    			
	sqlStrCountDMT = """select
	count(*)
	from
	discrete_media_token dmt
	where
	dmt.discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid')""";
	log.info 'sqlStrCountDMT ='+sqlStrCountDMT
		
	sql.eachRow(sqlStrCountDMT)
	{
		countDMT = it[0];	
		log.info 'countDMT ='+countDMT	
	}	

	sqlStrDMT = """ select 
	substr(to_char(dmt.CREATED_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) CreatedDateTime,	
	(select node_id from node where node_oid = (select to_char(rawtohex(CREATED_BY)) from discrete_media_token where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid'))) CreatedBy,
	'urn:dece:type:state:discretemediaright:' || dmt.state State,
	'urn:dece:discretemediatokenid:org:dece:' || to_char(rawtohex(dmt.DISCRETE_MEDIA_TOKEN_OID)) DiscreteMediaTokenID,
	'urn:dece:userid:org:dece:' || dmt.USER_OID RequestingUserID,
	'urn:dece:rightstokenid:org:dece:' || to_char(rawtohex(dmt.RIGHTS_TOKEN_OID)) RightsTokenID,
  --'urn:dece:type:discretemediaformat:' || pmp.discrete_media_fulfillment discretemediaformat,
  'urn:dece:type:discretemediaformat:' || pfm.AUTHORIZED_FULFILLMENT_METHOD discretemediaformat,
	'urn:dece:type:mediaprofile:' || pp.purchased_content_profile ContentProfile,
	substr(to_char(dmt.EXPIRATION_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) ExpirationDateTime,
	'urn:dece:type:status:' || dmt.status STATUS,	
	substr(to_char(dmt.CLOSED_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) DeletionDate,
	(select node_id from node where node_oid = (select to_char(rawtohex(CLOSED_BY)) from discrete_media_token where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid'))) DeletedBy,
	dmsr.Description StatusDescription,
	(case
	when dmt.UPDATED_DATE is null then null
	else
	substr(to_char(dmt.UPDATED_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) 
    	end) ModificationDate,
    	(case
   	when dmt.UPDATED_BY is null then null
    	else
	(select node_id from node where node_oid = (select to_char(rawtohex(UPDATED_BY)) from discrete_media_token where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid'))) 
    	end) UpdatedBy,
    	pp.DISCRETE_MEDIA_RIGHTS_REMAIN
	from 
	discrete_media_token dmt,
	purchase_profile pp,
	--purchased_media_profile pmp,
  	purchased_fulfillment_method pfm,
	discrete_media_status_ref dmsr	
	where 
	dmt.rights_token_oid = pp.rights_token_oid(+)
	and
	pp.purchase_profile_oid = pfm.purchase_profile_oid(+)
	and
	dmt.status = dmsr.status
	and
  	--pmp.PURCHASED_MEDIA_PROFILE_OID = dmt.PURCHASED_MEDIA_PROFILE_OID
    	pfm.PURCHASED_FULFILLMENT_MTHD_OID = dmt.PURCHASED_FULFILLMENT_MTHD_OID
  	and
	dmt.discrete_media_token_oid = hextoraw('$discreteMediaTokenOid')
	and
	dmt.state = 'fulfilled'""";

	sqlStrCountPPF = """select
	count(*)
	from
	purchased_fulfillment_method pfm
	where
	pfm.purchase_profile_oid in
     (Select purchase_profile_oid from purchase_profile where rights_token_oid in
     (Select rights_token_oid from discrete_media_token where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid'))
     and PURCHASED_CONTENT_PROFILE ='$contentProfile') """;
     log.info 'sqlStrCountPPF ='+sqlStrCountPPF;

	sql.eachRow(sqlStrCountPPF)
	{
		countPPF = it[0];	
		log.info 'countPPF ='+countPPF	
	}     	
	
}


def actXML = testCase.getPropertyValue("ActualXML");
def actDMT;
log.info 'actXML ='+actXML

if(actXML == null) 
{	
	try
	{
		//assert 0 == countDMT;		
	}
	catch (Throwable e)
	{
		log.info e;
		log.info countDMT;
		log.info "0";	
		iFailed = true;	
	}			
}
else
{
//	try
//	{
//		actDMT = new XmlSlurper().parseText(actXML);
//		log.info 'actDMT='+actDMT
//	}
//	catch (Throwable e)
//	{
//		log.info e;	
//	}	
//	try
//	{
//		log.info 'actDMT.size()='+actDMT.size()
//		log.info 'countDMT='+countDMT
//		assert actDMT.size() == countDMT;		
//	}
//	catch(Throwable e)
//	{
//		log.info e;
//		log.info countDMT;
//		log.info actDMT.size();
//		iFailed = true;
//	}	


	//countDMT = 0;	 
	//for (int countDMT = 0; countDMT < actDMT.size(); countDMT++) 
	//{	
		sql.eachRow(sqlStrDMT){						
			CreatedDateTimeExp = it[0];
			CreatedByExp = it[1];
			TypeExp = it[2];
			DiscreteMediaTokenIDExp = it[3];	
			log.info 'DiscreteMediaTokenIDExp=='+DiscreteMediaTokenIDExp
			RequestingUserIDExp = it[4];
			RightsTokenIDExp = it[5];
			DiscreteMediaProfileExp = it[6];
			ContentProfileExp = it[7];
			ExpirationDateTimeExp = it[8];			
			StatusExp = it[9];			
    			DeletionDateExp = it[10];		
    			DeletedByExp = it[11];
    			StatusDescriptionExp = it[12];
        		ModificationDateExp = it[13];
        		ModifiedByExp = it[14];
        		dmRightsRemain = it[15];	
        		log.info 'dmRightsRemainDB='+dmRightsRemain
		
			
			DiscreteMediaTokenIDAct = actDMT.@DiscreteMediaTokenID.text();	
			//if(DiscreteMediaTokenIDAct == DiscreteMediaTokenIDExp)
			//{					
        			try
        			{
        				log.info 'DiscreteMediaTokenIDAct = '+DiscreteMediaTokenIDAct
        				log.info 'DiscreteMediaTokenIDExp = '+DiscreteMediaTokenIDExp
        				assert DiscreteMediaTokenIDAct == DiscreteMediaTokenIDExp;
        			}
        			catch(Throwable e)
        			{
	        			log.info e;
	        			log.info DiscreteMediaTokenIDExp;
	        			log.info DiscreteMediaTokenIDExp;
	        			log.info DiscreteMediaTokenIDAct;
	        			iFailed = true;
        			}   
        			     			
				CreatedDateTimeAct = actDMT.ResourceStatus.Current.@CreationDate.text().replace("T", " ").replace("Z", "");
                    try
            		{
            			log.info 'CreatedDateTimeAct = '+CreatedDateTimeAct
            			log.info 'CreatedDateTimeExp = '+CreatedDateTimeExp            			
            			assert CreatedDateTimeAct == CreatedDateTimeExp;        				
            		}
            		catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
            			log.info CreatedDateTimeExp;
            			log.info CreatedDateTimeAct;	
            			iFailed = true;
            		}

            		try
        			{
        				log.info 'dmRightsRemainExp1='+dmRightsRemainExp;
            			log.info 'dmRightsRemain1='+dmRightsRemain;
        				assert dmRightsRemainExp.toInteger() == dmRightsRemain.toInteger();
        			}
        			catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
            			log.info dmRightsRemainExp.toInteger();
            			log.info dmRightsRemain.toInteger();	
            			iFailed = true;
            		}

            		TypeAct = actDMT.@State.text();
            		try
            		{
            			log.info 'TypeAct =='+TypeAct
            			log.info 'TypeExp =='+TypeExp
            			assert TypeAct == TypeExp;
            		}
            		catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
            			log.info TypeExp;
            			log.info TypeAct;
            			iFailed = true;
            		}	
            			
            		CreatedByAct = actDMT.ResourceStatus.Current.@CreatedBy.text();
            		if(CreatedByAct !='')
            		{
	            		try
	            		{
	            			log.info 'CreatedByAct =='+CreatedByAct
	            			assert CreatedByAct == CreatedByExp;
	         			}
	         			catch(Throwable e)
	         			{
	           			log.info e;
	            			log.info DiscreteMediaTokenIDExp;
	            			log.info CreatedByExp;
	            			log.info CreatedByAct;
	            			iFailed = true;
	            		}
            		}

//Included///////////////////////////////////////////////

				/*try
				{
					log.info 'AFM!!='+actDMT.AuthorizedFulfillmentMethod.size()
					assert actDMT.AuthorizedFulfillmentMethod.size() == countPPF;
				}
				catch(Throwable e)
				{
					log.info e;
				     log.info DiscreteMediaTokenIDExp;
				     log.info countPPF;
				     log.info actDMT.AuthorizedFulfillmentMethod.size();
				     iFailed = true;
				}  		*/	

				countPPF = 0
				for (int countPPF = 0; countPPF < actDMT.AuthorizedFulfillmentMethod.size(); countPPF++) 
				{ 
					sqlStrPPF = """select
					pfm.AUTHORIZED_FULFILLMENT_METHOD
					from
					purchased_fulfillment_method pfm
					where
					pfm.purchase_profile_oid in
				     (Select purchase_profile_oid from purchase_profile where rights_token_oid in
				     (Select rights_token_oid from discrete_media_token where discrete_media_token_oid =hextoraw( '$discreteMediaTokenOid'))
				     and PURCHASED_CONTENT_PROFILE ='$contentProfile') """;

				     sql.eachRow(sqlStrPPF){
				     	AuthorizedFulfillmentMetodExp="urn:dece:type:discretemediaformat:"+ it[0]

				     	AuthorizedFulfillmentMetodAct=actDMT.AuthorizedFulfillmentMethod[countPPF].text();

				     	if(AuthorizedFulfillmentMetodAct==AuthorizedFulfillmentMetodExp)
				     	{
				     		try
				     		{
				     			log.info 'AuthorizedFulfillmentMetodAct='+AuthorizedFulfillmentMetodAct
				     			log.info 'AuthorizedFulfillmentMetodExp='+AuthorizedFulfillmentMetodExp
				     			assert AuthorizedFulfillmentMetodAct==AuthorizedFulfillmentMetodExp
				     		}
				     		catch(Throwable e)
				     		{
				     			log.info e;
				        			log.info DiscreteMediaTokenIDExp;
				        			log.info AuthorizedFulfillmentMetodExp;
				        			log.info AuthorizedFulfillmentMetodAct;
				        			iFailed = true;
				     		}
				     	}
				     					     	
				     	countPPF=countPPF + 1;
				     }				     	
				     
				}
			
//Included End//////////////////////////////////////
            		RightsTokenIDAct = actDMT.RightsTokenID.text();
            		try
            		{
            			log.info 'RightsTokenIDAct =='+RightsTokenIDAct
            			log.info 'RightsTokenIDExp =='+RightsTokenIDExp
            			assert RightsTokenIDAct == RightsTokenIDExp;
            		}
            		catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
            			log.info RightsTokenIDExp;
            			log.info RightsTokenIDAct;
            			iFailed = true;
            		}
            			
            		DiscreteMediaProfileAct = actDMT.DiscreteMediaFulfillmentMethod.text();
            		try
            		{
            			log.info 'DiscreteMediaProfileAct =='+DiscreteMediaProfileAct
            			log.info 'DiscreteMediaProfileExp =='+DiscreteMediaProfileExp
            			assert DiscreteMediaProfileAct == DiscreteMediaProfileExp;
            		}
            		catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
          			log.info DiscreteMediaProfileExp;
          			log.info DiscreteMediaProfileAct;
          			iFailed = true;
          		}
          		
            		ContentProfileAct = actDMT.MediaProfile.text();
            		try
            		{
            			log.info 'ContentProfileAct =='+ContentProfileAct
        				log.info 'ContentProfileExp =='+ContentProfileExp
            			assert ContentProfileAct == ContentProfileExp;        				
            		}
            		catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
            			log.info ContentProfileExp;
            			log.info ContentProfileAct;
            			iFailed = true;
            		}     

            		StatusAct = actDMT.ResourceStatus.Current.Value.text();
            		try
            		{
            			log.info 'StatusAct =='+StatusAct
            			log.info 'StatusExp =='+StatusExp
            			assert StatusAct == StatusExp;
            		}
            		catch(Throwable e)
            		{
            			log.info e;
            			log.info DiscreteMediaTokenIDExp;
            			log.info StatusExp;
            			log.info StatusAct;
            			iFailed = true;
            		}   
            		          			
            		if(ModificationDateExp != null)
    				{        			
                		ModificationDateAct = actDMT.ResourceStatus.Current.@ModificationDate.text().replace("T", " ").replace("Z", "");
                		try
                		{
                			log.info 'ModificationDateAct =='+ModificationDateAct
                			log.info 'ModificationDateExp =='+ModificationDateExp
                			assert ModificationDateAct == ModificationDateExp;
                		}
                		catch(Throwable e)
                		{
                			log.info e;
                			log.info DiscreteMediaTokenIDExp;
                			log.info ModificationDateExp;
                			log.info ModificationDateAct;	
                			iFailed = true;
                		}
                	}
                		
                	//if(TypeExp == "urn:dece:type:state:discretemediaright:leased")   //leased")
            		//{            			
            			ExpirationDateTimeAct = actDMT.LeaseExpiration.text().replace("T", " ").replace("Z", "");
            			if(ExpirationDateTimeAct != "") // Expiration Date will not in the response for the DiscreteMediaRightsConsume.
            			{
            				log.info 'Inside the loop'
            			try
            			{
            				log.info 'ExpirationDateTimeAct =='+ExpirationDateTimeAct
            				log.info 'ExpirationDateTimeExp =='+ExpirationDateTimeExp
            				assert ExpirationDateTimeAct == ExpirationDateTimeExp;
            			}
            			catch(Throwable e)
            			{
            				log.info e;
            				log.info DiscreteMediaTokenIDExp;
            				log.info ExpirationDateTimeExp;
            				log.info ExpirationDateTimeAct;	
            				iFailed = true;		
            			}
            			}
            		//}

			    		
		//}
	}
}   			
/*if(nodeRole == 'urn:dece:role:retailer' || nodeRole == 'urn:dece:role:dsp' || nodeRole == 'urn:dece:role:retailer:customersupport' || nodeRole == 'urn:dece:role:dsp:customersupport'|| nodeRole == 'urn:dece:role:device')
{    			
	sqlStrCountDMTH = """select
	count(*)
	from
	discrete_media_token_history dmth,
	discrete_media_token dmt
	where
	dmth.DISCRETE_MEDIA_TOKEN_OID = '$discreteMediaTokenOid'
	and
	dmt.DISCRETE_MEDIA_TOKEN_OID = dmth.DISCRETE_MEDIA_TOKEN_OID
	and        				
	(dmth.status != dmt.status 
	or 
	dmth.state != dmt.state
	or        					
	dmth.ACCOUNT_OID != dmt.ACCOUNT_OID
	or
	dmth.USER_OID != dmt.USER_OID
	or
	dmth.RIGHTS_TOKEN_OID != dmt.RIGHTS_TOKEN_OID
	or
	--dmth.PURCHASED_MEDIA_PROFILE_OID != dmt.PURCHASED_MEDIA_PROFILE_OID
	dmth.PURCHASED_FULFILLMENT_MTHD_OID != dmt.PURCHASED_FULFILLMENT_MTHD_OID
	or
	dmth.EXPIRATION_DATE != dmt.EXPIRATION_DATE
	--or
	--dmth.CREATED_BY != dmt.CREATED_BY
	or
	dmth.CREATED_DATE != dmt.CREATED_DATE
	or
	dmth.CLOSED_BY != dmt.CLOSED_BY
	or
	dmth.CLOSED_DATE != dmt.CLOSED_DATE)""";
	
	log.info 'sqlStrCountDMTH = '+sqlStrCountDMTH
     sql.eachRow(sqlStrCountDMTH)
     {
        	countDMTH = it[0];        						
     }	
} 
try
{
	assert actDMT.ResourceStatus.History.Prior.size() == countDMTH;
}
catch(Throwable e)
{
	log.info e;
     log.info DiscreteMediaTokenIDExp;
     log.info countDMTH;
     log.info actDMT.ResourceStatus.History.Prior.size();
     iFailed = true;
}      
countDMTH = 0;				 			
for (int countDMTH = 0; countDMTH < actDMT.ResourceStatus.History.Prior.size(); countDMTH++) 
{  		
	log.info 'With in the loop='+countDMTH
	sqlStrDMTH = """select
     	dmth.discrete_media_token_oid,
     	dmth.status HistoryStatus,
     	(case
     	when dmth.CLOSED_DATE is null then (case when dmth.CREATED_DATE is null then substr(to_char(dmth.CREATED_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) else substr(to_char(dmth.CREATED_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) end)
     	else
          substr(to_char(dmth.CLOSED_DATE, 'yyyy-mm-dd hh24:mi:ss.FF'), 1, 23) 
          end) HistoryStatusModificationDate,
          (case
          when dmth.closed_by is null then (case when dmth.CREATED_BY is null then 'urn:dece:org:org:dece:' || dmth.created_by else 'urn:dece:org:org:dece:' || dmth.CREATED_BY end)
          else
          'urn:dece:org:org:dece:' || dmth.closed_by
          end) HistoryStatusModifiedBy,
          dmth.state HistoryStatusDescription
          from 
          discrete_media_token_history dmth,
          discrete_media_status_ref dmsr,
          DISCRETE_MEDIA_TOKEN dmt
          where
          dmth.DISCRETE_MEDIA_TOKEN_OID = '$discreteMediaTokenOid'
          and
          dmt.DISCRETE_MEDIA_TOKEN_OID = dmth.DISCRETE_MEDIA_TOKEN_OID
          and
          (dmth.status != dmt.status 
        	or 
        	dmth.state != dmt.state
        	or        					
		dmth.ACCOUNT_OID != dmt.ACCOUNT_OID
		or
		dmth.USER_OID != dmt.USER_OID
		or
		dmth.RIGHTS_TOKEN_OID != dmt.RIGHTS_TOKEN_OID
		or
		--dmth.PURCHASED_MEDIA_PROFILE_OID != dmt.PURCHASED_MEDIA_PROFILE_OID
		dmth.PURCHASED_FULFILLMENT_MTHD_OID != dmt.PURCHASED_FULFILLMENT_MTHD_OID
		or
		dmth.EXPIRATION_DATE != dmt.EXPIRATION_DATE
		--or
		--dmth.CREATED_BY != dmt.CREATED_BY
		or
		dmth.CREATED_DATE != dmt.CREATED_DATE
		or
		dmth.CLOSED_BY != dmt.CLOSED_BY
		or
		dmth.CLOSED_DATE != dmt.CLOSED_DATE)""";

		log.info 'History Table='+sqlStrDMTH

		sql.eachRow(sqlStrDMTH){										
        		HistoryStatusExp = "urn:dece:type:status:" + it[1];
        		HistoryStatusModificationDateExp = it[2];
        		HistoryStatusModifiedByExp = it[3];
        		HistoryStatusDescriptionExp = "urn:dece:type:state:discretemediaright:" + it[4];	
        							
        		HistoryStatusAct = actDMT.ResourceStatus.History.Prior[countDMTH].Value.text();        					    													
        		if(HistoryStatusAct == HistoryStatusExp)
        		{						
	        		try
	        		{
	        			log.info 'HistoryStatusAct =='+HistoryStatusAct
	        			log.info 'HistoryStatusExp =='+HistoryStatusExp
	        			assert HistoryStatusAct == HistoryStatusExp;        							
	        		}
	        		catch(Throwable e)
	        		{
	        			log.info e;
	        			log.info DiscreteMediaTokenIDExp;
	        			log.info HistoryStatusExp;
	        			log.info HistoryStatusAct;
	        			iFailed = true;
	        		}
	        						
	        		HistoryStatusModificationDateAct = actDMT.ResourceStatus.History.Prior[countDMTH].@ModificationDate.text().replace("T", " ").replace("Z", "");
	        		try
	        		{
	        			log.info 'HistoryStatusModificationDateAct == '+HistoryStatusModificationDateAct
	        			log.info 'HistoryStatusModificationDateExp == '+HistoryStatusModificationDateExp
	        			assert HistoryStatusModificationDateAct == HistoryStatusModificationDateExp;
	        		}
	        		catch(Throwable e)
	        		{
	        			log.info e;
	        			log.info DiscreteMediaTokenIDExp;
	        			log.info HistoryStatusExp;
	        			log.info HistoryStatusModificationDateExp;
	        			log.info HistoryStatusModificationDateAct;
	        			iFailed = true;
	        		}
	        						
	        		HistoryStatusModifiedByAct = actDMT.ResourceStatus.History.Prior[countDMTH].@ModifiedBy.text();
	        		try
	        		{
	        			log.info 'HistoryStatusModifiedByAct == '+HistoryStatusModifiedByAct
	        			log.info 'HistoryStatusModifiedByExp == '+HistoryStatusModifiedByExp
	        			assert HistoryStatusModifiedByAct == HistoryStatusModifiedByExp;        							
	        		}
	        		catch(Throwable e)
	        		{
	        			log.info e;
	        			log.info DiscreteMediaTokenIDExp;
	        			log.info HistoryStatusExp;
	        			log.info HistoryStatusModifiedByExp;
	        			log.info HistoryStatusModifiedByAct;
	        			iFailed = true;
	        		}
	        						
	        		HistoryStatusDescriptionAct = actDMT.ResourceStatus.History.Prior[countDMTH].Description.text();
	        		try
	        		{
	        			log.info 'HistoryStatusDescriptionAct == '+HistoryStatusDescriptionAct
	        			log.info 'HistoryStatusDescriptionExp == '+HistoryStatusDescriptionExp        							
	        			assert HistoryStatusDescriptionAct == HistoryStatusDescriptionExp;
	        		}
	        		catch(Throwable e)
	        		{
	        			log.info e;
	        			log.info DiscreteMediaTokenIDExp;
	        			log.info HistoryStatusDescriptionExp;
	        			log.info HistoryStatusDescriptionAct;	
	        			iFailed = true;
	        		}						 
			}	
        	countDMTH = countDMTH + 1;		   	
		}	        								
}  */  			
assert iFailed == false;

sql.close();
		

log.info "Woohoo!";]]></script></con:config></con:testStep><con:properties><con:property><con:name>ActualXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RTTestCaseName</con:name><con:value>Get Valid DMTs</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>hd</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set IS_ADULT" searchProperties="true" id="4051ade7-acf9-4733-a705-129a3327b8b3"><con:settings/><con:testStep type="groovy" name="Set IS_ADULT"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")

def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

//def basicOid = testCase.getPropertyValue("BasicOid");
def basicOid;
def isAdult = testCase.getPropertyValue("IsAdult");

sqlStr1="""select
rawtohex(basic_oid)
from 
md_basic
where
content_id=('urn:dece:cid:org:200002')""";

sql.eachRow(sqlStr1)
{
	basicOid = it[0];
}

//basicOid = BASIC_OID;

log.info "Basic Oid :"+basicOid;


sqlStr = """update
md_basic_rating_set
set
is_adult = '$isAdult'
where
BASIC_OID = '$basicOid'"""

sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P2_TestCases</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00085_DMRConsume_FUNC_RTL_POST_by_BAU_with_NoPolicyEnforcement_Parental_Control_Policy_Negative</con:value></con:property><con:property><con:name>IsAdult</con:name><con:value>N</con:value></con:property><con:property><con:name>BasicOid</con:name><con:value>200002</con:value></con:property><con:property><con:name>BasicOid</con:name><con:value>200002</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiscreteMediaRightConsumePost" searchProperties="true" id="3b850ec5-2fc0-4344-82bf-310ef1904cc3"><con:settings/><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("DMRConsumePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRConsumePost" id="ac092551-4d04-4608-9e7c-565866ed887c"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRConsumePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
   <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Validate Error Codes"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def valErrTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate Error Codes');

def resXML = null;
try
{
	resXML = testRunner.testCase.getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	
}
catch (Throwable e)
{
	log.info e;		
}

def status = "";
try
{
	status = testRunner.testCase.getTestStepByName('DMRConsumePost').httpRequest.response.responseHeaders["#status#"]; 
}
catch(Throwable e)
{
	log.info e;
}

def connection = "";
try
{
	connection = testRunner.testCase.getTestStepByName('DMRConsumePost').httpRequest.response.responseHeaders["Connection"];
}
catch(Throwable e)
{
	log.info e;
}

def contentType = "";
try
{
	contentType = testRunner.testCase.getTestStepByName('DMRConsumePost').httpRequest.response.responseHeaders["Content-Type"];
}
catch(Throwable e)
{
	log.info e;
}

log.info "++++++++++++++++"+resXML
valErrTC.setPropertyValue("ResponseXML", resXML);
valErrTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
valErrTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
valErrTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
valErrTC.setPropertyValue("DiscreteMediaProfile", testCase.getPropertyValue("DiscreteMediaProfile"));
/*valErrTC.setPropertyValue("ResponseStatus", status);
valErrTC.setPropertyValue("ConnectionStatus", connection);
valErrTC.setPropertyValue("ContentType", contentType);*/
valErrTC.setPropertyValue("ResponseStatus", status[0]);
valErrTC.setPropertyValue("ConnectionStatus", connection[0]);
valErrTC.setPropertyValue("ContentType", contentType[0]);
valErrTC.setPropertyValue("HTTPMethod", "POST");

def runnerValErrTC = valErrTC.run(null, false);
assert "$runnerValErrTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get DiscreteMediaTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def errorResponse = testCase.getPropertyValue("ErrorResponse");
if(errorResponse =="Created"){
def commonTC = testSuite.getTestCaseByName("Verify Content Location and Get DiscreteMediaTokenOid");
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));

def runnerCommonTC = commonTC.run( null, false);

assert "$runnerCommonTC.status" != "FAILED";

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 

callingTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
callingTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId"));
}
</script></con:config></con:testStep><con:properties><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_CS_P0_Premium_RT_UHD_Media_Profile_TestCases</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00007_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_UHD_SD</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ac092551-4d04-4608-9e7c-565866ed887c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="SetPem" searchProperties="true" disabled="true" id="382a65ef-1b34-427a-937b-b403e8570235"><con:settings/><con:testStep type="groovy" name="SetPem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String keyStoreAlias = "";

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname);

String nodeId = testProject.getPropertyValue("nodeid");

def iSCnode = context.expand( '${#Project#ISCnode}' )

def certspath = context.expand( '${#Project#certspath}' )

if(iSCnode=="no"){

	testProject.setPropertyValue("audience",'');
	keyStorePath = certspath+"3232.pem";


log.info 'Woohoo!';
}
else{
	
testProject.setPropertyValue("audience",'urn%3Adece%3Aorg%3Aorg%3Adece%3ARET_CS_1;urn%3Adece%3Aorg%3Aorg%3Adece%3ADSP;urn%3Adece%3Aorg%3Aorg%3Adece%3ADSP_CS_1;urn%3Adece%3Aorg%3Aorg%3Adece%3ACOO_CS_1;urn%3Adece%3Aorg%3Aorg%3Adece%3ACON_CS_1');
switch (nodeId) {
	case "CFFA03DEA63C99B9E0401F0A07997831":
		keyStorePath = certspath+"DECECS_concat.pem";
	break;	
	case "CFFA03DEA63799B9E0401F0A07997831":
		keyStorePath = certspath+"DECE_concat.pem";
	break;
	case "CFFA03DEA63199B9E0401F0A07997831":
		keyStorePath = certspath+"ACCESCS_concat.pem";
	break;
	case "CFA7F92E17CB545BE0401F0A05994AE8":
		keyStorePath = certspath+"ACCESS_concat.pem";
	break;
	case "CE8BFD2E2DD09BAEE0401F0A07990E42":
		keyStorePath = certspath+"DEV_CS_1_concat.pem";
	break;
	case "CCE44AF42FD7063BE0401F0A07991776":
		keyStorePath = certspath+"RET_CS_1_concat.pem";
	break;
	case "CCE44AF42FD2063BE0401F0A07991776":
		keyStorePath = certspath+"DLASP_CS_1_concat.pem";
	break;
	case "CCE44AF42FCD063BE0401F0A07991776":
		keyStorePath = certspath+"LLASP_CS_1_concat.pem";
	break;
	case "CCE44AF42FC8063BE0401F0A07991776":
		keyStorePath = certspath+"DSP_CS_1_concat.pem";
	break;
	case "CCE44AF42FC3063BE0401F0A07991776":
		keyStorePath = certspath+"COO_CS_1_concat.pem";
	break;
	case "CCE44AF42FBE063BE0401F0A07991776":
		keyStorePath = certspath+"CON_CS_1_concat.pem";
	break;
	case "C0CEF8E08CE1C7D6E0401F0A0599120B":
		keyStorePath = certspath+"RET_concat.pem";
	break;
	case "C0CEF8E08CDCC7D6E0401F0A0599120B":
		keyStorePath = certspath+"DLASP_concat.pem";
	break;
	case "C0CEF8E08CD7C7D6E0401F0A0599120B":
		keyStorePath = certspath+"LLASP_concat.pem";
	break;
	case "C0CEF8E08CD2C7D6E0401F0A0599120B":
		keyStorePath = certspath+"DSP_concat.pem";
	break;
	case "C0CEF8E08CCDC7D6E0401F0A0599120B":
		keyStorePath = certspath+"DEV_concat.pem";
	break;
	case "C0CEF8E08CC8C7D6E0401F0A0599120B":
		keyStorePath = certspath+"COO_concat.pem";
	break;
	case "C0CEF8E08CC0C7D6E0401F0A0599120B":
		keyStorePath = certspath+"CON_concat.pem";
	break;
	
}
}

this.log.info "keyStorePath [$keyStorePath]";

callTC.setPropertyValue("keyStorePath", "$keyStorePath");
</script></con:config></con:testStep><con:properties><con:property><con:name>tName</con:name><con:value>DiscreteMediaRightCreatePost</con:value></con:property><con:property><con:name>sName</con:name><con:value>CommonSteps</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_FUNC_RTL_For_Multiple_DMR" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="18dc55b7-1e5e-4a50-9269-3112b831820a"><con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@max_rows">1000</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.panels.testcase.JTestRunLog$OptionsForm@errors_only">false</con:setting></con:settings><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost - RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost - RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost - RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@bind_address"/></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileHD}">${#Project#PurchaseProfileBurnsLeftHD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="${#Project#DiscreteMediaProfileSD}">${#Project#PurchaseProfileBurnsLeftSD}</ns4:DiscreteMediaRightsRemaining>-->
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
  <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
  </ns4:StreamWebLoc> 
	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
	</ns4:StreamWebLoc> 
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def getRTOidTC = testSuite.getTestCaseByName("Verify Content Location and Get RightsTokenOid");
getRTOidTC.setPropertyValue("CallingTestCase", testCase.name);
def runnerGetRTOidTC = getRTOidTC.run( null, false);

testSuite.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
testSuite.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("CallingTestSuiteName")).getTestCaseByName(testCase.getPropertyValue("CallingTestCaseName")); 
callingTC.setPropertyValue("RightsTokenOid", getRTOidTC.getPropertyValue("RightsTokenOid"));
callingTC.setPropertyValue("RightsTokenId", getRTOidTC.getPropertyValue("RightsTokenId"));
assert "$runnerGetRTOidTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>4369</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>071CF54FE5462242E05307991F0A8FC2</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>82703</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>2</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:071CF54FE5462242E05307991F0A8FC2</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P0_CreateConsume_With_Multiple_DMR_Creation_For_Single_RT</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00002_DisceretMediaRights_CreateConsume_with_Single_RT_with_Valid_and_Invalid_Media_Profile</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8694c41-2a8f-4311-a280-fff1553b3835</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiscreteMediaRightGetGet" searchProperties="true" id="d3dbf226-411c-4fc2-8948-a1efda0caa5e"><con:settings/><con:testStep type="groovy" name="Validate Error Codes for DiscreteMediaRightGet"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def resXML = null;
try
{
	resXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
}
catch (Throwable e)
{
	log.info e;		
}

def status = "";
try
{
	responseStatusAct = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.responseHeaders["#status#"][0]; 
}
catch(Throwable e)
{
	log.info e;
}

def connection = "";
try
{
	connectionStatusAct = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.responseHeaders["Connection"][0];
}
catch(Throwable e)
{
	log.info e;
}

def contentType = "";
try
{
	contentTypeAct = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.responseHeaders["Content-Type"][0];	
}
catch(Throwable e)
{
	log.info e;
}

def host = testProject.getPropertyValue("targetHost");
def port = testProject.getPropertyValue("targetPort");
def accountId = testProject.getPropertyValue("NodeAccountId");
def rightsTokenId = testCase.getPropertyValue("RightsTokenId");
def contentProfile = testCase.getPropertyValue("ContentProfile");
def discreteMediaProfile = testCase.getPropertyValue("DiscreteMediaProfile");
def errorResponse = testCase.getPropertyValue("ErrorResponse");

def hostError = "qa.q.uvuu.com";

String errorIDExp = null;
String errorReasonExp = null;
String errorLinkExp = null;
String orgRequestExp = null;
String responseStatusExp = null;
String connectionStatusExp = null;
String contentTypeExp = null;
String errorBodyExp = null;

switch (errorResponse) 
{
	case "OK":        
        responseStatusExp = "HTTP/1.1 200 OK";          
        contentTypeExp = "application/xml";
        connectionStatusExp = "Keep-Alive";
        break;

     case "NotFoundDiscreteMediaRightNotFound":        
        responseStatusExp = "HTTP/1.1 404 Not Found";          
        contentTypeExp = "application/xml";
        connectionStatusExp = "Keep-Alive";
        break;

     case "BadRequestDiscreteMediaRightAlreadyConsumedOrLeased":
        responseStatusExp = "HTTP/1.1 400 Bad Request";          
        contentTypeExp = "application/xml";
        connectionStatusExp = "Keep-Alive";
        break;
}

boolean iFailed = false;

try
{
	assert responseStatusExp == responseStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info responseStatusExp;
	log.info responseStatusAct;
	iFailed = true;
}

try
{
	//assert connectionStatusExp == connectionStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info connectionStatusExp;
	log.info connectionStatusAct;
	iFailed = true;
}

try
{
	//assert contentTypeExp == contentTypeAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info contentTypeExp;
	log.info contentTypeAct;
	iFailed = true;
}

assert iFailed == false;

log.info 'Woohoo!';
</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestSuiteName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">End To End</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">TC_DECE_00074_DMRCreate_DMRUpdate_DMRDelete_DMRGet</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer:customersupport</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>A54EECA4EBC35FB0E0401F0A0799203C</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0899EEEAF91A44A7E05305991F0AEACB</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A46D2ADC55871E05307991F0AFE23</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>A54EECA4EBD15FB0E0401F0A0799203C</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiscreteMediaRightGet" searchProperties="true" id="44e24789-345f-447c-a143-608d9798d594"><con:settings/><con:testStep type="groovy" name="SetPem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("DMRGet");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRGet"><con:settings/><con:config service="DiscreteMediaRightGet" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/${#Project#NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/{DiscreteMediaTokenId}" methodName="DiscreteMediaRightGetGet" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRGet" mediaType="application/xml" accept="" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Validate Error Codes"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def valErrTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate Error Codes');

def resXML = null;
try
{
	resXML = testRunner.testCase.getTestStepByName('DMRGet').httpRequest.response.getResponseContent();
	
}
catch (Throwable e)
{
	log.info e;		
}

def status = "";
try
{
	status = testRunner.testCase.getTestStepByName('DMRGet').httpRequest.response.responseHeaders["#status#"]; 
}
catch(Throwable e)
{
	log.info e;
}

def connection = "";
try
{
	connection = testRunner.testCase.getTestStepByName('DMRGet').httpRequest.response.responseHeaders["Connection"];
}
catch(Throwable e)
{
	log.info e;
}

def contentType = "";
try
{
	contentType = testRunner.testCase.getTestStepByName('DMRGet').httpRequest.response.responseHeaders["Content-Type"];
}
catch(Throwable e)
{
	log.info e;
}
valErrTC.setPropertyValue("ResponseXML", resXML);
valErrTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
valErrTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
valErrTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
valErrTC.setPropertyValue("DiscreteMediaProfile", testCase.getPropertyValue("DiscreteMediaProfile"));
/*valErrTC.setPropertyValue("ResponseStatus", status);
valErrTC.setPropertyValue("ConnectionStatus", connection);
valErrTC.setPropertyValue("ContentType", contentType);*/
valErrTC.setPropertyValue("ResponseStatus", status[0]);
valErrTC.setPropertyValue("ConnectionStatus", connection[0]);
valErrTC.setPropertyValue("ContentType", contentType[0]);
valErrTC.setPropertyValue("HTTPMethod", "GET");
valErrTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId"));

def runnerValErrTC = valErrTC.run(null, false);
assert "$runnerValErrTC.status" != "FAILED";
</script></con:config></con:testStep><con:properties><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A66693FFD2DEEE05307991F0A2828</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A4E14E165459FE05305991F0A8434</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate DMR Count" searchProperties="true" id="84cf32c8-b203-48f4-919b-aac40ef54386"><con:settings/><con:testStep type="groovy" name="Validate DMR Count for single RT"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);


String accountOid = testProject.getPropertyValue("AccountOid");
String rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
String DMRCountExp = testCase.getPropertyValue("DMRCount");

sqlStr="""Select 
count(DISCRETE_MEDIA_TOKEN_OID)
from
DISCRETE_MEDIA_TOKEN
where 
RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid') and ACCOUNT_OID= hextoraw('$accountOid')""";

sql.eachRow(sqlStr){
	DMRCountAct = it[0];
}

try
{
	assert DMRCountExp == DMRCountAct.toString();
}
catch(Throwable e)
{
	log.info e;
	log.info "DMRCountExpected:" + DMRCountExp;
	log.info "DMRCountActual:" + DMRCountAct;	
	iFailed = true;
}
</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P0_CreateConsume_With_Multiple_DMR_Creation_For_Single_RT</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00002_DisceretMediaRights_CreateConsume_with_Single_RT_with_Valid_and_Invalid_Media_Profile</con:value></con:property><con:property><con:name>DMRCount</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089998DCA41D5B65E05305991F0A0B36</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Verify Discrete_Media_Rights_Remaining" searchProperties="true" id="a87171b8-609e-4066-8846-529a868251eb"><con:settings/><con:testStep type="groovy" name="Verify DMR_Remaining"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
def discreteMediaRightsRemainingExp = testCase.getPropertyValue("discreteMediaRightsRemainingExp");

boolean iFailed = false;

//def purchasedMediaProfile = testCase.getPropertyValue("ContentProfile").split('urn:dece:type:mediaprofile:')[1];
//def discreteMediaRightsRemainingExp = testCase.getPropertyValue("discreteMediaRightsRemainingExp");

//sqlStr1 = """Select Count(DISCRETE_MEDIA_TOKEN_OID)
//from
//DISCRETE_MEDIA_TOKEN 
//where 
//RIGHTS_TOKEN_OID = hextoraw('$rightsTokenOid') and state ='available'""";
//
//sql.eachRow(sqlStr1){
//	discreteMediaRightsRemainingExp = it[0];
//}
log.info "DiscreteMediaRightsRemainingExp:" + discreteMediaRightsRemainingExp;

sqlStr = """select 
SUM(DISCRETE_MEDIA_RIGHTS_REMAIN)
from 
purchase_profile
where rights_token_oid = hextoraw('$rightsTokenOid') and DISCRETE_MEDIA_RIGHTS_REMAIN !=0 """;

sql.eachRow(sqlStr){
	discreteMediaRightsRemainingAct = it[0];
}


if( discreteMediaRightsRemainingAct == null)
{
	discreteMediaRightsRemainingAct = 0;
}
log.info "discreteMediaRightsRemainingAct:" + discreteMediaRightsRemainingAct.toString();	

try
{
	assert discreteMediaRightsRemainingExp == discreteMediaRightsRemainingAct.toString();
}
catch(Throwable e)
{
	log.info e;
	log.info "DiscreteMediaRightsRemainingExp:" + discreteMediaRightsRemainingExp;
	log.info "discreteMediaRightsRemainingAct:" + discreteMediaRightsRemainingAct;	
	iFailed = true;
}

assert iFailed == false;
sql.close();</script></con:config></con:testStep><con:properties><con:property><con:name>CallingTestSuiteName</con:name><con:value>RTL_P0_CreateConsume_With_Multiple_DMR_Creation_For_Single_RT</con:value></con:property><con:property><con:name>CallingTestCaseName</con:name><con:value>TC_DECE_00002_DisceretMediaRights_CreateConsume_with_Single_RT_with_Valid_and_Invalid_Media_Profile</con:value></con:property><con:property><con:name>discreteMediaRightsRemainingExp</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089998DCA41D5B65E05305991F0A0B36</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property><con:property><con:name>ExpectedCount</con:name><con:value>2</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A4E14E165459FE05305991F0A8434</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A4E14E165459FE05305991F0A8434</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="SetupScripts"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Setup" searchProperties="true" id="1e2ba193-dd4a-4e17-a0e5-6b39349438b8"><con:settings/><con:testStep type="groovy" name="GET ALL FLAKY Tests" disabled="true" id="46644cff-bd93-4248-8dbc-2e78f79cd9db"><con:settings/><con:config><script>
//TestCase
def testCase  = testRunner.getTestCase();
def microService = context.expand( '${#Project#microService}' ).toString();
ArrayList&lt;String> Suit_lst=new ArrayList&lt;String>();
//Get Arguments
 
def project = context.testCase.testSuite.project;

for (suiteName in project.testSuiteList) {
//log.info suiteName.name;
Suit_lst.add(suiteName.name);
  
}
def projectName =project.name;


ArrayList&lt;String> Tstep=new ArrayList&lt;String>();

def f = new File("C:\\flaky\\$projectName"+".csv");
f.append("\r\n TestSuite Name "+","+"Flaky TestCase Name"+","+"Comments");

//TC_DECE_10277_MetadataBasicCreate_FUNC_CTP_Invocation_with_method_POST_CID_ISTC_Format_Passing_Two_Unencoded_Colon_Negative_flaky
for (String suit : Suit_lst)
{  def testSuite = suit;
     def TCList  = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
     def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

   for(i = 0; i &lt;= TCCount - 1; i++)
     {                                              
                def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
                def tstSuite=testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite)
                testStepList  = targetTestCase.getTestStepList();
                testStepCount = targetTestCase.getTestStepCount();
               
				if(targetTestCase.name.endsWith("_flaky") || targetTestCase.name.endsWith("_FLAKY"))
				{   
			       log.info "##################  $tstSuite.name  #####################";
				  log.info targetTestCase.name
//				  targetTestCase.setDisabled(true)

				  f.append("\r\n"+tstSuite.name+","+targetTestCase.name+"");
				}
                      
                
    } 
}                                                                                             </script></con:config></con:testStep><con:testStep type="groovy" name="Disable Flaky Test" id="cb7e7d83-c98c-4f6c-b141-dce4864140ff"><con:settings/><con:config><script/></con:config></con:testStep><con:testStep type="groovy" name="Set ENV Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

log.info("Set Environment properties!!!");
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath
log.info("Project Path : '" + projectPath + "'");

def eNV = context.expand( '${#Project#ENV}' )
log.info("Environment: '" + eNV+ "'");

def propertiesPath = null;

if (System.properties['os.name'].toLowerCase().contains('windows')) 
	{
    		log.info "it's Windows OS!!";
    		File temp = new File( projectPath + "\\..\\..\\..\\Properties\\");
    		propertiesPath = temp.getCanonicalPath();
	} 
else 
	{
    		log.info "it's Linux OS!!";
    		File temp = new File(projectPath + "/../../../Properties/");
    		propertiesPath = temp.getCanonicalPath();
	}
	
log.info("Properties File Location : '" + propertiesPath+ "'");


def propMap=[:]
BufferedReader reader = new BufferedReader(new FileReader(propertiesPath + "/" + eNV +"project.properties"));
log.info("Load property file : '" + propertiesPath + "/" + eNV +"project.properties"+ "'");
String line;
while ((line = reader.readLine()) != null)
	{
		if (line.trim().length()==0) continue;
		if (line.charAt(0)=='#') continue;

		int delimPosition = line.indexOf("=");
		String key = line.substring(0, delimPosition-0).trim();
		String value = line.substring(delimPosition+1).trim();
		propMap.put(key, value);
	}

propMap.each{ k, v -> tP.setPropertyValue(k,v)}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set_CoordinatorSchema"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

log.info "V2: "+tP.getPropertyValue("V2");

def v2 = context.expand( '${#Project#versionMinor}' )
def schema = tP.getPropertyValue("coordinatorSchema_"+v2);

tP.setPropertyValue("coordinatorSchema",schema);
log.info "Setting the coordinatorSchema value ---- "+schema;
</script></con:config></con:testStep><con:testStep type="datasource" name="Country"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">US&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">GB&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">CA&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">IE&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">AU&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">NZ&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">AT&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">DE&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">CH&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">FR&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">BE&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">NL&lt;/con:entry></row><row>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">LU&lt;/con:entry></row></con:configuration></con:dataSource><con:property>Country</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="TOUSetup"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def tP = testSuite.getProject();

def dBHost = context.expand( '${#Project#targetSystem}' )

def country = context.expand( '${Country#Country}' )

def a = new dbUtils.dbUtils(log,dBHost);
String sql = """select consent_version from (select
	            consent_version            
	            from
	            CONSENT
	            where
	            CONSENT_URN = 'urn:dece:type:policy:TermsOfUse'
	            and
	            COUNTRY = '""" + country + """'
	            order by
	            consent_version desc)
	            where rownum &lt; 2""";             
	log.info sql;
        
        results = a.SelectFromDB(sql,dBHost);

//                            a.dbConnClose();
       assert results.length() > 0;
       log.info "results" + results;

       def myXML = new XmlSlurper().parseText(results);   

       log.info myXML.ResultSet.Row.CONSENT_VERSION.text();
                testCase.setPropertyValue("Consent_Version",myXML.ResultSet.Row.CONSENT_VERSION.text());
                

def consent_Version = context.expand( '${#TestCase#Consent_Version}' )

tP.setPropertyValue("TOU_"+country,consent_Version);


</script></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop"><con:settings/><con:config><dataSourceStep>Country</dataSourceStep><targetStep>TOUSetup</targetStep></con:config></con:testStep><con:properties><con:property><con:name>Consent_Version</con:name><con:value>20140811</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>48eef7a0-e5f2-4926-99bb-c9ecd11b1888</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0f3550c-c4aa-4ddc-abb8-3d629c23599f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46644cff-bd93-4248-8dbc-2e78f79cd9db</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb7e7d83-c98c-4f6c-b141-dce4864140ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Disable_TestSuite_Depending_On_Version" searchProperties="true" id="2abe26d7-9c31-42ff-b897-720ddeaa1290"><con:settings/><con:testStep type="groovy" name="Disable_TestSuite"><con:settings/><con:config><script><![CDATA[def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def TCCount = testSuite.getTestCaseCount();
def TSuite1 = testProject.getTestSuiteByName("RTL_P0_New_AFM_TestCases");
def TSuite2 = testProject.getTestSuiteByName("RTL_P0_Premium_RT_UHD_Media_Profile_TestCases");
def TSuite3 = testProject.getTestSuiteByName("RTL_CS_P0_New_AFM_TestCases");
def TSuite4 = testProject.getTestSuiteByName("RTL_CS_P0_Premium_RT_UHD_Media_Profile_TestCases");
def TSuite5 = testProject.getTestSuiteByName("RTL_P0_CreateConsume_With_Multiple_DMR_Creation_For_Single_RT");

def v2 = context.expand( '${#Project#versionMinor}' )
def eNV =  context.expand( '${#Project#ENV}' )

if(eNV=="QALP3" && v2=="11"|| eNV=="QALP3LBSPC" && v2=="11" ||eNV=="QALP3LBS" && v2=="11" || eNV=="QALP1" && v2=="11" 
|| eNV=="QALP2" && v2=="11" )
{
     TSuite2.setDisabled(true);
     TSuite4.setDisabled(true);
     TSuite5.setDisabled(true);
    
}
if(eNV=="QALP3" && v2=="07"|| eNV=="QALP3LBSPC" && v2=="07" ||eNV=="QALP3LBS" && v2=="07")
{
    TSuite1.setDisabled(true);
    TSuite2.setDisabled(true);
    TSuite3.setDisabled(true);
    TSuite4.setDisabled(true);
    TSuite5.setDisabled(true);
}
if(eNV=="QALP3" && v2=="02"|| eNV=="QALP3LBSPC" && v2=="02" ||eNV=="QALP3LBS" && v2=="02")
{
    TSuite1.setDisabled(true);
    TSuite2.setDisabled(true);
    TSuite3.setDisabled(true);
    TSuite4.setDisabled(true);
    TSuite5.setDisabled(true);
}
if(eNV=="QALP1" && v2=="02" ){
	TSuite1.setDisabled(false);
    TSuite2.setDisabled(false);
    TSuite3.setDisabled(false);
    TSuite4.setDisabled(false);
    TSuite5.setDisabled(false);
  }

if(eNV=="QALP2" && v2=="02" )
{
    TSuite1.setDisabled(true);
    TSuite2.setDisabled(true);
    TSuite3.setDisabled(true);
    TSuite4.setDisabled(true);
}



 ]]></script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Disable_DBvalidation_Depending_on_microservice" searchProperties="true" id="e21cd830-d3d2-4624-ab99-e4315b71911f" disabled="true"><con:settings/><con:testStep type="groovy" name="Disable_TestSuite"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def TCCount = testSuite.getTestCaseCount();
def TSuite = testProject.getTestSuiteByName("CommonSteps");
def TStep1 = TSuite.getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table").getTestStepByName("Validate DISCRETE_MEDIA_TOKEN Table");
def TStep2 = TSuite.getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table").getTestStepByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
def TStep3 = TSuite.getTestCaseByName("Validate PURCHASE_PROFILE Table").getTestStepByName("Validate PURCHASE_PROFILE Table");
//def TStep4 = TSuite.getTestCaseByName("Validate PURCHASED_FULFILLMENT_METHOD Table").getTestStepByName("Validate PURCHASED_FULFILLMENT_METHOD Table");
def TStep5 = TSuite.getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table DMRCreate").getTestStepByName("Validate DISCRETE_MEDIA_TOKEN Table");
def TStep6 = TSuite.getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table DMRCreate").getTestStepByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
def TStep7 = TSuite.getTestCaseByName("Validate PURCHASE_PROFILE Table DMRConsume").getTestStepByName("Validate PURCHASE_PROFILE Table");
def TStep8 = TSuite.getTestCaseByName("Validate PURCHASED_FULFILLMENT_METHOD Table DMRCreate").getTestStepByName("Validate PURCHASED_FULFILLMENT_METHOD Table");
def microService =  context.expand( '${#Project#microService}' )

if(microService=="ON")
{
     TStep1.setDisabled(true);
     TStep2.setDisabled(true);
     TStep3.setDisabled(true);
     //TStep4.setDisabled(true);    
     TStep5.setDisabled(true);
     TStep6.setDisabled(true);
     TStep7.setDisabled(true);
     TStep8.setDisabled(true); 
}

else
{
     TStep1.setDisabled(false);
     TStep2.setDisabled(false);
     TStep3.setDisabled(false);
     //TStep4.setDisabled(false);     
     TStep5.setDisabled(false);
     TStep6.setDisabled(false);
     TStep7.setDisabled(false);
     TStep8.setDisabled(false);
}
 </script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite name="E2E"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Account_Create_First_User_Create_STS_Policies" searchProperties="true" id="108d7b63-167a-417e-b417-bbee269064e7"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call Account Create"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("AccountCreate API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="Feed data for First User Create"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def uname= "userget_firstuser"+new Date().format( 'yyyyMMdd_hhmms' );

tC.setPropertyValue("ResponseTypeUserCreate","SUCCESS");
tC.setPropertyValue("userType","ADULT");
tC.setPropertyValue("Privilege","full");
tC.setPropertyValue("GivenName",uname);
tC.setPropertyValue("SurName",uname);
tC.setPropertyValue("UserName",uname);
tP.setPropertyValue("UserName",uname);

tC.setPropertyValue("PrimaryEmail",tP.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("DisplayImageURL",tP.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",tP.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",tP.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",tP.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",tP.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",tP.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",tP.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",tP.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",tP.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("Language1",tP.getPropertyValue("Language1"));
tC.setPropertyValue("MeetsAgeOfMajority",tP.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",tP.getPropertyValue("urnUser"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",tP.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",tP.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",tP.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",tP.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",tP.getPropertyValue("ResourceStatus"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call First User Create"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("FullUser1Create API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS API for First User">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

//tS.setPropertyValue("audience",callTS.getPropertyValue("audience"));

def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

tP.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("SAML-FullUser1",context.expand( '${#TestCase#SAML}'));
tC.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}')); 
tP.setPropertyValue("UUID",context.expand( '${#TestCase#assertionUUID}'));
tP.setPropertyValue("E2E_UUID_FAU1",context.expand( '${#TestCase#assertionUUID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FAU1",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tP.setPropertyValue("NodeAccountId",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",context.expand( '${#TestCase#NODE_ACCOUNT_ID_FULL}'));
//tP.setPropertyValue("NODE_USER_ID_FAU1",context.expand( '${#TestCase#NODE_USER_ID}'));
tC.setPropertyValue("NODE_USER_ID_FAU1",context.expand( '${#TestCase#NODE_USER_ID}'));
//tP.setPropertyValue("NodeAccountId",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_USER_ID_FULL1",context.expand( '${#TestCase#NODE_USER_ID_FULL}'));
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call Policy Create - TOU"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateTOU_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));


def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Policy Create - MUC"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateMUC_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>accountname</con:name><con:value>accname_20150107_021859</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>ResponseTypeUserCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>userType</con:name><con:value>ADULT</con:value></con:property><con:property><con:name>Privilege</con:name><con:value>full</con:value></con:property><con:property><con:name>GivenName</con:name><con:value>userget_firstuser20150107_02193</con:value></con:property><con:property><con:name>SurName</con:name><con:value>userget_firstuser20150107_02193</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20150107_02193</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Country</con:name><con:value>US</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value>urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value>0C0CD5590A651E07E05305991F0A0601</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value>1996-01-12</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_e8750b20-00a7-426f-9a20-b6079bebd4a4</con:value></con:property><con:property><con:name>assertionUUID1</con:name><con:value>_e8750b20-00a7-426f-9a20-b6079bebd4a4</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=pVZbU+JKEP4rVPZxK2QSbiYlVCGXXUpUJFmPx5etYdKB0WSCMxNAf/2ZCZAFRA+rT6nu9OXry3T3ucBJ7HhtIYBLmrLSKomZ8HJu08g481IsqPAYTkB4knh++2roOWXk4a2KURp0m8ZvOGvU0MRBJkK4YVademS6WJGTOmq4E5iEVVxVokJkMGBCYiabhoPsmolsEzUCdOZVG57jlG0XPRilO+BC2VYiZWRsQK1E05hJOfcsa7lclpeVcsqnloOQbd1fDX0ygwQbrfN1RLkj3trIk3IIBOKYlEmaWOfWnsx5KDyfThmWGYeNr/A9X8hCrqVkQkGn34xCF8IBi9Kc7GCWMkpwTF+xzs8VyFkaltrxNOVUzpJ3g7CRNmzCipjErrJvhrUP7URDewi5wKaYYXtjawwRcGAESr/Gg6bx7bSq5aoBx0xEKU/EPvl3eIAtIE7nEJpiG9YG2ukGj2SqdQ7EGzASZ4Iu4Fo36xwTEJtqAjndVGnEIaKrIRWqQVdCo7N24R2Q62x06RSE/EyBdoqzNnKH4wxaN1F16V+Or75XBBvddBfW9CUe82QRTEkzB7ArnDOK0q7Jg6YsmmitMavePf2A0b9Pg8a4U+vcjS/tZ1HLglcY/uo+hMMxC6LgYtW/JfZTcpmIKHyZ/Hx4HvB24I7lXe86wbV7Hj/a0e3ygfxTaQTZ/eqpX6+PBFy/vlxd/mj3bm/vBxb57jYq5CeaD6l1cUsxdr73OZv+fAiD59F1F1Zpn91FrxWyCpLe5Gzm/rhyFnW4mFpB8Jj4Vd5rFuHs4N/nbd+8n00egcgtqdtg0C31VZWw/HiYaQ4NzSgX9eZ6+AgJTBotraVnh5epcUdDT9VwTaMO6nRrNRe161W7hxo9VKugmuvafdRGdWRvh8waxQHETsoiqn3pkbtum48BksQTwELg5iLN1KQTxgcWu1ji0oCN1SNImYAgVePZnq8SMastEl55rSePKcmmzxXbATBK16m8YTe8HUngezPZtvdm8hgInVPQg1v3tVCNLaTKxTNeZDK2ywtcZpCp0c71lPWc6lnNEjSZx6CRWkkaZjGU57N5nhlLrL+OiYnIueNekL+2d+M6/LdNgZIJqRYQOpYLUGWEI8vF3gbyfsDV3YC35ttZSPXDUvmUnJI1kv1ff9pE90fRI+1Op+d3/C3sQvovtD+r3Lm5+aRmd9j2R1/R/d3xf9ufNfB5119zPPwqctW9X1R/q2l90IDWYe8XjsIF3XG7PdPUwlcrorV9ufPyczlbLLL8qTb0JuTKuqUfg4UcyweSqR32EqRPwKzCiHXSwVDgPvBd8PcRZnLGfIklJGq2lHLyhAvRB6EvxIEaiqtTz889lypzElbyGK8Tq+tWI/7wACYe0XKKPVKfZcrDPwU7YmvHj4pTHYiSsqmm9LHw8k5bkFSZpWrNpXzX+DEDx5zvM4skF1ik6qdJJuH9PyW9v5oGJiTNmBx0jZyxu1NznPJlDt4foTdm8rVd3PH0/w95k+YtQNR+UvK5fX2OefoFsOnOXt44PbaaL1zk2j3b3l3N/eqZWyRlD13rDfstZydPhz3e+g8=</con:value></con:property><con:property><con:name>SAML_USER_FAU1</con:name><con:value>SAML2 Assertion=nVZbd6o6EH7fv4JFH/fCgEItrOpaeOuhtTd19+JLVwxR00LAJHjprz8JFqvW9rjPEyvDZOabmS9fcs5hHJU9n3PMBEmoFrRq+guumNBFbtUwy9WqYdujM8O14Mio2FXbHldCp2ybuhZwnuGAcgGpqOll06oYpmtUzIHpeLblOXbJqZ4Ode0BMy5DS5eS3LWMI8q9PG1Nzxj1EsgJ9yiMMfcE8vr+ddeTnh4sMOn18zXKPCGrT4VIPQBQKcQIRxEqoSQG52DH5zzkXp9MKBQZwx85Q17TP/YuFovSolJK2ASUTdMEpgukT8jJ5ESv/yo24zCg42S9bkKaUIJgRN6hAnWNxTQJNT+aJIyIafxNaAtYpgpt4CUykGXTEx18JsjRHRlpByTj0OBTaBXBeniMGaYIa396QU0/OW6C670DBikfJyzme+u/g4TpHEdJikODF5UV6I6PeKBd9XOMvICiKONkjm8UTVKIMNfuGB6TZZdwSb6Qa/n4tSUvGIbR34zkHGzjlLDBgc60yARz8X/mtT2rdZQHGGW4ftV4W5mdy/tgcEHu+dkNcJunbmc2nneSWg5h23kNajPqj/U+UTe8+tg06TSAP2s8gDe/21m8Pk/TwfvwrBJ0G82lH92h9ti67I9GJkGCMvtiyMukYZ+6z7d8tbodNGdd63H+yvC8yS77v4a9Ff/nZuK2huh0hubLe9e8stl0dHM9FWBEw+XVBL/FrNd+8JFzmTr2RfL0Orls0rPeYEh6qQX6iVO5+PMes+dfb+9D7IipMKe/Z4nVyB4Xfu2zpu0ado2FHPSz0StGolgqagQtrSPnBcXP0qIsJDTGuauXKn3iAlOh19UuJSteJsWHhJ4c5nrdrp5WWu2yYzkdx7Lcatu0Tatj+qbjuvIw+YX+rFHsQWwmdExULqWwa/78DBDFHsc0xMyYJxmaYq7/ELEFBdQC2pMHI6EcDxKp4I/P7/wS33fTuxH0l9fuaLVo3T2tfpcyGXVMJGN07SYRt/SW+WOB2a5+n+3odw8jkhKsRF4xnUuqcyGbMoPzTERWaQ5LFGfyGmBKib2yfeYATuI0wgoyiJMwi3ApnaZ5iwBff8sGRDy39tqDl6DfzE/ht0Xu/yv6IX1Cohy4qqeB5UzxgcvILor5tmjL2i66CO9nIVGHTTZXMHlEciS7vz45o8iyIYyqqtl/sQrcG/ejt3/dCX4ABfb7sUkUzslW2uJWlReFlJJ6MdEZLM1K2Xye5TOsKplkMjywgFkFfYwyqXWrQfKGKdiEAEddMxvUe5k39l18mZjSvoACx5JxWr484o3Rx1y9MQLJ7uWxD5idlLJvAi/FIVszkk8RhfjH1wrykPKT5jv5WSQs/BzXgVhbeWSd8mEhCJ2olbpUVt+QAiUyLJEqmLDt4IcCHEq+a9w0eYNFSDaNMoG//6MpeavpEKEkoyJo6blhW3JznGKVYu/T6UuYXNY/7ukl//aefrru9qX4xVDf+JL/djZITheE5S5Ociw1fSmfnDI5nWxJ/AfAwyrftn9S+d1K6l/MXy1bPd0/D/V/AQ==</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FAU1</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU1</con:name><con:value>0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>accountdisplayname</con:name><con:value>accname_20131001_060029</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fcf8c68a-683f-4af1-a418-a1f5b5384672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>03943527-847a-44f0-b73d-d2fad4b59708</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c103a15-a364-4f18-b7ce-fb035223d68a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6ea8959-c4f0-4f1c-95fc-32fa117a7bca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53aa8488-3ed5-4102-a539-344b534c55e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>db4d0f7f-a067-4b2f-9cf7-625b1b493f19</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>88e56319-5f02-4645-9b71-642ab080fda8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67200c2d-bef7-4dad-b3b8-50326a533129</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7eebc88-5d13-4ec1-bbfa-1c46c9ff6bff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>98691a52-212f-4ea8-a57e-1d7f76f36c48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>993be89d-0c7a-4f1d-9fa2-28c7ce77ee5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2c3525e-10ed-4830-81eb-999f78352e69</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07a35292-2f12-4d2a-a92a-a0b65bdbc9ab</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3f50659-e8c6-48c9-9915-d543e76d0ea4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a977d015-a310-447c-9587-4c159dd48726</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Standard_User_Create_STS_Policies" searchProperties="true" id="1580f12f-c8e0-4af9-b15d-a7c69ece62bf"><con:settings/><con:testStep type="groovy" name="Feed data for Standard User Create"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def uname= "userget_firstuser"+new Date().format( 'yyyyMMdd_hhmms' );

tC.setPropertyValue("ResponseTypeUserCreate","SUCCESS");
tC.setPropertyValue("userType","ADULT");
tC.setPropertyValue("Privilege","full");
tC.setPropertyValue("GivenName",uname);
tC.setPropertyValue("SurName",uname);
tC.setPropertyValue("UserName",uname);
tP.setPropertyValue("UserName",uname);

tC.setPropertyValue("PrimaryEmail",tP.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("DisplayImageURL",tP.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",tP.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",tP.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",tP.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",tP.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",tP.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",tP.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",tP.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",tP.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("Language1",tP.getPropertyValue("Language1"));
tC.setPropertyValue("MeetsAgeOfMajority",tP.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",tP.getPropertyValue("urnUser"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",tP.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",tP.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",tP.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",tP.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",tP.getPropertyValue("ResourceStatus"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Standard User Create"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("StandardUserCreate API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;



</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS API for SAU">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

//tS.setPropertyValue("audience",callTS.getPropertyValue("audience"));

def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;



tP.setPropertyValue("SAML-StandardUser1",context.expand( '${#TestCase#SAML}'));
tC.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("E2E_UUID_SAU1",context.expand( '${#TestCase#assertionUUID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_SAU",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",context.expand( '${#TestCase#NODE_ACCOUNT_ID_FULL}'));
tC.setPropertyValue("NODE_USER_ID_SAU",context.expand( '${#TestCase#NODE_USER_ID}'));
tC.setPropertyValue("NODE_USER_ID_FULL1",context.expand( '${#TestCase#NODE_USER_ID_FULL}'));
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call Policy Create - TOU1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateTOU_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_SAU"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_SAU"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));


def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Policy Create - MUC 1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateMUC_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_SAU"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_SAU"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>accountname</con:name><con:value>accname_20130924_034036</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>ResponseTypeUserCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>userType</con:name><con:value>ADULT</con:value></con:property><con:property><con:name>Privilege</con:name><con:value>full</con:value></con:property><con:property><con:name>GivenName</con:name><con:value>userget_firstuser20150107_021929</con:value></con:property><con:property><con:name>SurName</con:name><con:value>userget_firstuser20150107_021929</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20150107_021929</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Country</con:name><con:value>US</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value>urn:dece:userid:org:dece:0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value>0C0CD5584A6D3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value>1994-10-05</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a8111a4e-e0ff-4a1f-a013-9f8a53f03bb1</con:value></con:property><con:property><con:name>assertionUUID1</con:name><con:value>_a8111a4e-e0ff-4a1f-a013-9f8a53f03bb1</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=pVbrcuI8DH0VJvs7OOZSIFOY4drNLlAW2m7bPzuuo4C3iZPGDren/+wAKVDaj21nmGGsSEdHsizpUpDAL9hNISCWLOS5ZeBzYafSupHE3A6JYMLmJABhS2pPmoO+XchbNtmZGDmnUzf+kCrGmJTABMvzzBLBnkksXDRrXpWUi55VfHrCSlWIBBwuJOGybhQsXDYtbFqVG6tqlyrql7cwfjRydxALha1U8paxJbUUdWMmZWQjtFgs8otiPoynqGBZGN0P+hM6g4AYjctNRKmjuLHVp3kXKPg+zdMwQJfoQOfSFfaETTmRSQxbX+57vixk1ZDScQWbfjMyW3Ad7oXpsU14yBklPlsTnZ8ByFno5pr+NIyZnAXvBoEtDWzCkpoUl/g3Ax1SOxPogGEsiClmBG+xxuBBDJxC7nbs1I1v591aanoTEy68MA7E4fHf+ACfgx9G4JpiF9aW2vmAJzLVuARqO5z6iWBzGOpijQgFsb1NoOdD5UYxeGzZZ0IV6FJodmif3tFxk40Om4KQn7mgvcvZgNwRP4FGFIxh/bvnxKz1+Lj4VV40f6/wfeDA8LmeEthXTgXZ1W6OR0WZFdHG4ufD6OKqtuCsHDtRd+A89Ka9AW8VuleVZuv7LRp1mouidCvV8WhIZysQ4U8S9EkBXd3dJ6Vbf9QN2+ULvzfqoE53GfxEw5fVIwz6hdnt3UyuBzcL+p0EpLbi5flo3XqJPDy2fng/xN+r1i/sIj7HVXSxHN4H3btBl2L5gChrrb3nTvGi7Kxbw9uSf/s8K/jjh3oWzh7/Q9nuzU+Sp79A5e6oy8Dp5Hrqloj8uJlpCXNNL1W1I918hAQujYa20r3DTlS7Y66t7nBzttpWu1MuV0vNi3YR1ypdq1y0KrUa7lnNi1a3umsyGxZHFNsh95j2pVvupmw+JkgDWwB3ITbnYaI6nTA+QOwQSXIOH6tHEHIBN6Fqz9wKE6+a+C/ryvwve3oqv3jTKCp6Rm4Yymt+HTc9CfFBS8b4oCWPgbKIge7buqyFqmshVSpeyDyRPs7PSZ5Dojp7rJusXShVy0iwIPJBE0VB6CY+5KNZlCYGic1/wSRUpNJx9yZ9bO+GdfxtlwGl4zKtIHQsLVC3CCdmS3EXyPsBl/YD3sE3E5fpd6XSKWNGN0wOP71WiS6PrESa7XZ30p7saGfa/2D9WeP29fUnLTv95mT0Fds/7ckf/FmAz7v+muP+V5mr6v2i+VtL9EEBouPazxy5c7bndrelqXmvJkRj93Kj/Es+mc+T9KlW9CCMFTrSjwFZBTQBmqgRtroJn4GjDASdtS9kvI98Z/JDhomc8YkkEgLVW3Lp8YwFcQJCL4iO6onLc7fPA5cqcxKW8pSs7avlVjP+cP+lNtV6SjxSf4swdl8v7ATWnh8Vp9oPJeNTfdK7wuqdsqChgmVqyoXxPvgpgFPOD4VZkjMuUtXTUyLh/S85Pb7qBqE0TLh0OkYq2B+pKU+5isB+VXoDk07tbI1n/7/HmywtAQpq+RcsxdfbmK1fAJ/ujeWt0xOTudaqWTXcxTidzOXNZO6VqrUsKQfsGm/EbyV7eTqu8cZ/</con:value></con:property><con:property><con:name>SAML_USER1</con:name><con:value>SAML2 Assertion=nVdZc6pME773V1ieS8uwiAtWkipWRUVFcOPmLRyGRdlk2PTXv2Cix+Qk58v7Xen09HQ/vdDzzDMyfI8cMAjBOHHDoC7xL41/9rhlmX1ItsgOQbYoyjBbe2Barb21b/e7nb3R6dCNuoRQCqUAJUaQvDRInGi3cLpFUhreG1D4gCKfSJLQG/U1jFFpulR5whv1wvcCNLi6fWmkcTAIDeSiQWD4EA0SMFAZeTooNQfGDVPj9fkN5dVh/OokSTTAMPBkQgA9DzyB0MeesQ86zyYaqK4dGEkaw3efJnppvJ/N8/wpbz+FsY2ROI5jOI2VOiZy7V+N19rtMDSlwArf1pwRhIELDM+9GBUoGSZOaNYZzw5jN3H8b0wTGIFXpluwAC1AUMGvBvbbwRXdDy19ABkjo4Ucg7gZW0ILxjAAsL5aSi+NXz+r4NtZLTYCZIWxjz6t/xskGGTQCyNottAtshu6n1v8Il2vzxAMpAB4KXIzOKvaJDIARPVFDC23mLqobD4T1a/lrxfo1mEQ/JeSPGOPOEvY2BeZ4V0bouT/qddjrd6srA0vha9epoALhYCV9cJE2wxFQstQOvGaxerlCuFR+Q3UvdTv68+Neu+r90Nyj1DFk08vTnp3cdTGoyKGuTPiNWPb7E51XSiQzh5sldWndiCqnCdu0ohCDkEehQ6vjPtpl+ZAKHbadl5TkhDu51RADW3hvNrM8TTy2FhRydCZLezgsrDEU7c5QlG3/Fwuli1pU1NdEVnP3dv7NEp0HhFskzvm3QNXOyunJrSmEB4cqwACOvaEl98xPcZQxTWB52uQ1f9tB6d5IzHuC66aFFb5eSbwVZYkrslzHAM5m8kllrEldnphZqx9PDlHd0jnOMsoK5HhmbO8ZHLe3vFrRZkIublee/paEkVWXlL5iNnxtXKDF4o1r2/HuLHRox0p4rrKsuZ2Ge7b48gcHfORA2ayJuczTTrLB6GYaQK+ucrsolxf5INMzLVVu7Y5sLS8FHI+v3rkhdyZ6ZtltFvRObgIisxQQ4ZYCZwjjzR/TYD20gEHYSozx6ucdWRuvZYLQWMWNdaercvYNE7UI+Cb0d73nAfjo9K4Zg7X5/3QS/WLcJA5Ycipp6Eq7du8IoyZ5W6136yPxkbMamA0Y/Y3j27HNbZhbuv9nFd240moS04GZowisKzClOnCGVkajplwyDIyxbjFhTuw3ZAzxRwbk6jWpL1hd3t2T1tkDHHPIPp9YjfddBenLi8ETX2S7g+O7GzFeXOimtmKTujLDmXNrGu4BCgiS9kKo2RSWCNFre0XfLEFo6ZpjzHvQoux3Bsz8eXseLK9TDbdOTrvXcvasNs55fUsT24vI8uzojNqaqFyjPEuC9sktjtnk6TG2DLLMMPD6sAqMtuvkmpKubKTWYMRhSRlLgcymZDr03iUeWDXZsJispkfju+FMflcYLFcEcq2Emp9njGrIozUlSAemBVr2zFrCyKrAJ5RdtIk35X5Wo1K5c95FK95tAWWEdo606VHtfYKp5N5olIUcw7YVSDSjnwqNmbXx3snKEzVWUTlMppZgb4Jj7Lvxqs4VVeTyWxa7LV0eDyUs8rC1UnW1mtCdowYdzbRnCMf8sYi2u2SqBmAGCRS5MtScZnr6NB39z4+bnYIdoHzoEeu/H2+GhqCPoltlZiMlsGi3aNrKLXOI7956OebpqZ2o57JBRZ/PmN6vMZDJhTpZedkFiR5dFb5tJtbY+a4N8hZ4dHsmRYmugbypTLZqH6zU+tk06mPXzSMmkXzXB3mlKAozbbJaiMNRbG7S/t2Ec8Dk9wZSTfT8XXXjbwjTaZHjYraa9svi7XIzKgnL2oKtQW6b/ciMMaWWMYIPWsqDc/7i3GJ/Dl4G6Cfp8Nd+DY/sMfJ8mH03EiHWnYrBMltWV1AEl8Xy1vBSP5OYCqJa7asq+ogqlgQSmCQNF6rUxV5GaQlxXHNQXllvK2FHsG3OYrniS6L4zwu4BROiDiDd2i6QxPUjeW8ofgEkQsDy618VTzu7Zb6O0DgDxAMTBi3sjAFDkSNv1is8lWXgmV5/YYBglpY8sQO22v3ev0u2yZZRiT7BMvRQlsUaF4kuiRNNOqzMJkH85ixEhh/4IgE/oEjLiFwIxdWRLK6TVF5naKkTMnJyNLEI54y4ymAaUk144rtDUiq38GQ60cerABjfmimHnyKnOiaIAy9/ZItA6CrdClo/0gqd73pvw3x894tG6WO6VYKqIqHhWVF4ReEt30L5vug249B38wzqelWF3qZ2iR2wRuSj1u/O6ZqlXu7VFFx6j/EDfdd/cfH/zyJ/QUU9jkfd0dm5j64vTH3koyWdOX1VtGT8XR6SrMsvdawV1GxuDSPERjew1QI0pJPnbXwCAPsbgL7EZW9o/7k+S7/iC9NnEBNynHglx1Xvy5/8I5RIareMVL5xRQ/fSR9cFnmLYFF8pWM88rnToX4ry8iMACVXilelD95GJu/y/WFrQc/ZZzV/HMDu1pVxPX8TVOAsDTrljMwjB+Nf2XgK+cfhfck37EkZTft0wR+v1OvhttLwwAgTINE4htXwePAveJMzhEc/Fb6w8yVOr6/BQr07VtgK0/VcvT5RuOu6/5v5ZZ7bRcAy1PIvWJ5aRTls7Z0HtgPA/4d4NczvtP724z/GMnrH+I/JQ85/fw9vP4L</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID1</con:name><con:value>E71D3C4DD15700D0E0401F0A05995914</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>audience</con:name><con:value>urn:dece:org:org:dece:RET_CS_1</con:value></con:property><con:property><con:name>SAML_USER_SAU</con:name><con:value>SAML2 Assertion=nVZbc9o8EH3vr/A4jx1jycFcPIEZsCF1C20DuTUvGUWWQYktgyQD4ddXMjEBcvno9+TRerV7dvfoSGcCpYnjdYQgXNKMGWHQMu/rmDhNWIsshElsVWGtYTXiRtUCsB5Dt/4AIUCmEQqRk5AJiZhsmQ6ApxZoWqfgEjQ9F3rArdQa4M40rgkXKrRyqQDTWKUJE16RtmXmnHkZElR4DKVEeBJ7485w4ClPD5WYzPbZBmWRkLenUs4828aViGCSJLiCs9Q+s/d8ziLhjemEIZlz8pIzEi3zZe9yuawsTysZn9gOAMAGTVv5RIJOTsz2l3IziUIWZ5u1j1jGKEYJXSMNakjkNIuMTjLJOJXT9IPQ0IZAh7bIClsYVtmJab8mKNAdGWkPJBfIElMEy2AjEhNOGCbG1ShsmSfHTXCz95IjJuKMp+Jg/W+QCFuQJJuRyBJlZSW64yO+0672GcFeyHCSC7ogPzVNZqooYfzmJKarARWKfJEwivEbK1EyjOB/GcmZvYtTwbbf6UxAJ0TI/zOv3VltolyjJCftmA9nj490JNc8OnX69cfBbN2/66mZha0Cwq7zBtR21C/rQ6JuefWy6YZUR9/zh+XgwWk0AO/dxJejNXQa42se3d7d/Lxz5/OnQRxAAXuP33Cj4+Db8GvUjOdPyz/N7vNF8xxO4I/ewunxL0/B9yCtTiQIemsEx+OLwcC56g7YyEW04yxG34bTb2wO/6RPz7a8CsXp0MZ+Zxiva4u4H9mTq/p137+ZrMG02/hyfsPzP+ffXQDnsB8+LezGReu1pt0a9o2lHIzzh0eCZbnU1AgDo6/mheTn0qItNLLiwtWbaX0SkjBptvUuLStersSHRp4a5mbdq9dOu7DWcf0g8P1GtweqAPZBB9SbTdjt+6X+bFAcQPQzFlOdSyvshj+fA8SpJwiLCLcWWY6nRJifRAyQREbIRupgZEyQy0wp+G9BrDROhbib+7X5r6+3cFT78QjnlVxFjalijGn8zOQv9ot3Ykn4nn5DZ0+/RwTTGSVa5DXThaK6kKopc7TIZQIrC1RhJFfXANdK7DnVhmsLms4SoiHbaRblCanMprOiRbbYfB0lTaKwjnqX9+HYL07hh0Ue/iv7oXwiqh2ErqdL1EzJm8sIeG5ZzMdFu7tFl+E7eUT1YVPNlZziDZL9X6+c0WTZEkZX5Y/vYYl763709rc77U9A2Yf92CaKFnQnbXmrqotCSUm7nOgcVRQ5Fou8mGFdyyRX4W1og7o9JjhXWvd8mT0RZm9D2EddM1vUB5m39n18uZyysUSSpIpxRrE84o0xJkK/MULF7tWxD5i9lKpvkqzkezY/UU8RjfjT1wr2sPZT5t/qs8x49Dqud2Lt5FF1qoeFpGyiV/pSef6AFDhTYalSwYzvBn8vwHvJ943bJm+xSMWmh1ySj/8YWt5aJsI4y5kMA7Mw7EpugVM+z4j36vQmTCHrL/f0Snx4T98OB2Mlfikyt770v50tWtAFE7VL0AJLy1ypJ6dKziY7Ev8C8FDl/W4dBAGodd36q8q7zabruGDbwL1K2m/Mby07PT08D+2/</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_SAU</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_SAU</con:name><con:value>0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fcf8c68a-683f-4af1-a418-a1f5b5384672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>03943527-847a-44f0-b73d-d2fad4b59708</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c103a15-a364-4f18-b7ce-fb035223d68a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6ea8959-c4f0-4f1c-95fc-32fa117a7bca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53aa8488-3ed5-4102-a539-344b534c55e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>db4d0f7f-a067-4b2f-9cf7-625b1b493f19</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>88e56319-5f02-4645-9b71-642ab080fda8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67200c2d-bef7-4dad-b3b8-50326a533129</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7eebc88-5d13-4ec1-bbfa-1c46c9ff6bff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>98691a52-212f-4ea8-a57e-1d7f76f36c48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>993be89d-0c7a-4f1d-9fa2-28c7ce77ee5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2c3525e-10ed-4830-81eb-999f78352e69</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07a35292-2f12-4d2a-a92a-a0b65bdbc9ab</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3f50659-e8c6-48c9-9915-d543e76d0ea4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a977d015-a310-447c-9587-4c159dd48726</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4869ad2c-252d-4bfc-a2d0-ed3091cdfe86</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Basic_User_Create_STS_Policies" searchProperties="true" id="0840f9a0-c82f-4215-b696-796614d06e29"><con:settings/><con:testStep type="groovy" name="Feed data for Basic User Create"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def uname= "userget_firstuser"+new Date().format( 'yyyyMMdd_hhmms' );

tC.setPropertyValue("ResponseTypeUserCreate","SUCCESS");
tC.setPropertyValue("userType","ADULT");
tC.setPropertyValue("Privilege","full");
tC.setPropertyValue("GivenName",uname);
tC.setPropertyValue("SurName",uname);
tC.setPropertyValue("UserName",uname);
tP.setPropertyValue("UserName",uname);

tC.setPropertyValue("PrimaryEmail",tP.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("DisplayImageURL",tP.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",tP.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",tP.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",tP.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",tP.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",tP.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",tP.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",tP.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",tP.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("Language1",tP.getPropertyValue("Language1"));
tC.setPropertyValue("MeetsAgeOfMajority",tP.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",tP.getPropertyValue("urnUser"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",tP.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",tP.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",tP.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",tP.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",tP.getPropertyValue("ResourceStatus"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Basic User Create"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("BasicUserCreate API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS API for BAU">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

//tS.setPropertyValue("audience",callTS.getPropertyValue("audience"));

def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;



tP.setPropertyValue("SAML-BasicUser1",context.expand( '${#TestCase#SAML}'));
tC.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("E2E_UUID_BAU1",context.expand( '${#TestCase#assertionUUID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_BAU",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",context.expand( '${#TestCase#NODE_ACCOUNT_ID_FULL}'));
tC.setPropertyValue("NODE_USER_ID_BAU",context.expand( '${#TestCase#NODE_USER_ID}'));
tC.setPropertyValue("NODE_USER_ID_FULL1",context.expand( '${#TestCase#NODE_USER_ID_FULL}'));
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call Policy Create - TOU1 1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateTOU_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_BAU"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_BAU"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));


def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Policy Create - MUC 1 1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateMUC_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_BAU"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_BAU"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>accountname</con:name><con:value>accname_20130924_034036</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>ResponseTypeUserCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>userType</con:name><con:value>ADULT</con:value></con:property><con:property><con:name>Privilege</con:name><con:value>full</con:value></con:property><con:property><con:name>GivenName</con:name><con:value>userget_firstuser20150107_021950</con:value></con:property><con:property><con:name>SurName</con:name><con:value>userget_firstuser20150107_021950</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20150107_021950</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Country</con:name><con:value>US</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value>E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value>urn:dece:userid:org:dece:0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value>0C0C9E8C6AD23F75E05307991F0A8176</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value>1994-09-29</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_5dd254bd-43e4-49bd-9628-c5e4c053ea1e</con:value></con:property><con:property><con:name>assertionUUID1</con:name><con:value>_5dd254bd-43e4-49bd-9628-c5e4c053ea1e</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=pVdbU+o6FP4rTH10SpsCQjvCDBYvbFGQIlt9cWK6gGibliYF9NefpEAFvBy2PmFW1+Vb9+Uxx2FgOU3OIRE0YoVFGDDuZNS6libMiTCn3GE4BO4I4njNq45jFU0Hr0W0QrtV1x4rvm9Vyk++Xi5BWS/b8i/7yKrppAJlYlZKgBFIVs5TaDMuMBN1zTJRRTeRblYHZs0p1xyzWrRN80ErDCHhUrdkKZraCtSC17WJELFjGPP5vDgvFaNkbFimiYy7q45HJhBirXG89CgzlDRW/KToA4EgIEUShcaxscVz7HPHo2OGRZrAypb/lS3TMG1D8vicjg+0XBb8NhtF2dPFLGKU4IC+YRWfKxCTyC80g3GUUDEJv3QCmUqxDguiE1RmB5qxDW1PRVsIE451PsFopasPI0iAESjc9tt17WC/rGWigwQzPoqSkG8//w0PsBkEUQy+ztduraDtr/CTSDWOgThtRoKU0xlcq2KNMQG+yiaQ/VUVegmM6KJDuSzQBVfojE14O89lNFp0DFz8JEEbyVkqGeIghcYAew83ndsbuF/U0utLd/5w/+cZo8OT+Us9A7DJnBHy1C6fO0WZF9FSogV2qYdrQ46NQTQdThPu0rvQGpwHh5fn4eDofNacha1e+vzi3YeHN3bpeX47Cw1m2v3FPFig0fCGTFHMyWt7iCwvbS3Eqe11iTcO4cnuPbVYaRDEpcnFvTG9fOhGd/fm0Sx64bXR+eS8Vn7p0+f5xQi56G+Px/yoU6UXw/K1dVMdX3l/uuiq3Q7Z2wX+ezhp1nN3NvBv09Y976VPz0DE+qnKoN0qnMksYfH9MFMU6uujjNWJ1fDhApjQGkpKzQ4nleOO+o7M4fJtuqZrn9bco2YLlc6qlVPZLWbVttGZ2ayh6tF6yCxR7EB0IzaiypYaucuy+R4gCR0OzIdEn0WpnHRc+0ZjCwtcaLO+bIKIcRhEcjyTl+okeIvjec2myCTTVyiN/GplYWmF60h0WTdpjgQkWzMZoa2Z3AdCYwpqcKu65rKwuZCxmOJZKgJUnOEig1SO9kRNWccq1yoGp2EcgEJqhJGfBlCMJ3EWGYMvfy0dE55R+6eDrNu+9Gv32zoEksenioErX05AphE+LJeqU1k78rXD5U2H1+qbqU9VY8l4ioSSJZLtT+9louojr5Gm6556rreGnXP/g/RPhd1u94eSrU7T6/1G9tH1HtFPFfzc9O8Md36LXFbvL8U/ShrfFKCxW/u5IX9GN8yuzzS58OWKaKw7Ny5Oi+lslmatWlWbMJHaDdUMhmkZHpBU7rDXQfQCzMiVGHsdDDnuHds5fRthKibME1hAKGdLIXvucSF6wNWF2JZDcbHv+bllUkZOwEJ8RnMDed0qxN8ewMQhik+Se/JnHiX+e8I+0bVhR/opD0RB2Vi91LHw+kVZkEiqpXLNRcmm8s8UfGZ8m5gHOcciZD09pQK+/lJQ+6uuYUKilIl2S8sImzs1wyleY3DemT6oydZ2fsfT/z/kdZqVAJH/M0j+TL86xxzVAWy8sZdXRndXc6tSsU9s00anCGWrubJczWflmp0HZQtd4wP5I2UjTrs13vgP</con:value></con:property><con:property><con:name>SAML_USER1</con:name><con:value>SAML2 Assertion=nVdZc6pME773V1ieS8uwiAtWkipWRUVFcOPmLRyGRdlk2PTXv2Cix+Qk58v7Xen09HQ/vdDzzDMyfI8cMAjBOHHDoC7xL41/9rhlmX1ItsgOQbYoyjBbe2Barb21b/e7nb3R6dCNuoRQCqUAJUaQvDRInGi3cLpFUhreG1D4gCKfSJLQG/U1jFFpulR5whv1wvcCNLi6fWmkcTAIDeSiQWD4EA0SMFAZeTooNQfGDVPj9fkN5dVh/OokSTTAMPBkQgA9DzyB0MeesQ86zyYaqK4dGEkaw3efJnppvJ/N8/wpbz+FsY2ROI5jOI2VOiZy7V+N19rtMDSlwArf1pwRhIELDM+9GBUoGSZOaNYZzw5jN3H8b0wTGIFXpluwAC1AUMGvBvbbwRXdDy19ABkjo4Ucg7gZW0ILxjAAsL5aSi+NXz+r4NtZLTYCZIWxjz6t/xskGGTQCyNottAtshu6n1v8Il2vzxAMpAB4KXIzOKvaJDIARPVFDC23mLqobD4T1a/lrxfo1mEQ/JeSPGOPOEvY2BeZ4V0bouT/qddjrd6srA0vha9epoALhYCV9cJE2wxFQstQOvGaxerlCuFR+Q3UvdTv68+Neu+r90Nyj1DFk08vTnp3cdTGoyKGuTPiNWPb7E51XSiQzh5sldWndiCqnCdu0ohCDkEehQ6vjPtpl+ZAKHbadl5TkhDu51RADW3hvNrM8TTy2FhRydCZLezgsrDEU7c5QlG3/Fwuli1pU1NdEVnP3dv7NEp0HhFskzvm3QNXOyunJrSmEB4cqwACOvaEl98xPcZQxTWB52uQ1f9tB6d5IzHuC66aFFb5eSbwVZYkrslzHAM5m8kllrEldnphZqx9PDlHd0jnOMsoK5HhmbO8ZHLe3vFrRZkIublee/paEkVWXlL5iNnxtXKDF4o1r2/HuLHRox0p4rrKsuZ2Ge7b48gcHfORA2ayJuczTTrLB6GYaQK+ucrsolxf5INMzLVVu7Y5sLS8FHI+v3rkhdyZ6ZtltFvRObgIisxQQ4ZYCZwjjzR/TYD20gEHYSozx6ucdWRuvZYLQWMWNdaercvYNE7UI+Cb0d73nAfjo9K4Zg7X5/3QS/WLcJA5Ycipp6Eq7du8IoyZ5W6136yPxkbMamA0Y/Y3j27HNbZhbuv9nFd240moS04GZowisKzClOnCGVkajplwyDIyxbjFhTuw3ZAzxRwbk6jWpL1hd3t2T1tkDHHPIPp9YjfddBenLi8ETX2S7g+O7GzFeXOimtmKTujLDmXNrGu4BCgiS9kKo2RSWCNFre0XfLEFo6ZpjzHvQoux3Bsz8eXseLK9TDbdOTrvXcvasNs55fUsT24vI8uzojNqaqFyjPEuC9sktjtnk6TG2DLLMMPD6sAqMtuvkmpKubKTWYMRhSRlLgcymZDr03iUeWDXZsJispkfju+FMflcYLFcEcq2Emp9njGrIozUlSAemBVr2zFrCyKrAJ5RdtIk35X5Wo1K5c95FK95tAWWEdo606VHtfYKp5N5olIUcw7YVSDSjnwqNmbXx3snKEzVWUTlMppZgb4Jj7Lvxqs4VVeTyWxa7LV0eDyUs8rC1UnW1mtCdowYdzbRnCMf8sYi2u2SqBmAGCRS5MtScZnr6NB39z4+bnYIdoHzoEeu/H2+GhqCPoltlZiMlsGi3aNrKLXOI7956OebpqZ2o57JBRZ/PmN6vMZDJhTpZedkFiR5dFb5tJtbY+a4N8hZ4dHsmRYmugbypTLZqH6zU+tk06mPXzSMmkXzXB3mlKAozbbJaiMNRbG7S/t2Ec8Dk9wZSTfT8XXXjbwjTaZHjYraa9svi7XIzKgnL2oKtQW6b/ciMMaWWMYIPWsqDc/7i3GJ/Dl4G6Cfp8Nd+DY/sMfJ8mH03EiHWnYrBMltWV1AEl8Xy1vBSP5OYCqJa7asq+ogqlgQSmCQNF6rUxV5GaQlxXHNQXllvK2FHsG3OYrniS6L4zwu4BROiDiDd2i6QxPUjeW8ofgEkQsDy618VTzu7Zb6O0DgDxAMTBi3sjAFDkSNv1is8lWXgmV5/YYBglpY8sQO22v3ev0u2yZZRiT7BMvRQlsUaF4kuiRNNOqzMJkH85ixEhh/4IgE/oEjLiFwIxdWRLK6TVF5naKkTMnJyNLEI54y4ymAaUk144rtDUiq38GQ60cerABjfmimHnyKnOiaIAy9/ZItA6CrdClo/0gqd73pvw3x894tG6WO6VYKqIqHhWVF4ReEt30L5vug249B38wzqelWF3qZ2iR2wRuSj1u/O6ZqlXu7VFFx6j/EDfdd/cfH/zyJ/QUU9jkfd0dm5j64vTH3koyWdOX1VtGT8XR6SrMsvdawV1GxuDSPERjew1QI0pJPnbXwCAPsbgL7EZW9o/7k+S7/iC9NnEBNynHglx1Xvy5/8I5RIareMVL5xRQ/fSR9cFnmLYFF8pWM88rnToX4ry8iMACVXilelD95GJu/y/WFrQc/ZZzV/HMDu1pVxPX8TVOAsDTrljMwjB+Nf2XgK+cfhfck37EkZTft0wR+v1OvhttLwwAgTINE4htXwePAveJMzhEc/Fb6w8yVOr6/BQr07VtgK0/VcvT5RuOu6/5v5ZZ7bRcAy1PIvWJ5aRTls7Z0HtgPA/4d4NczvtP724z/GMnrH+I/JQ85/fw9vP4L</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID1</con:name><con:value>E71D3C4DD15700D0E0401F0A05995914</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>audience</con:name><con:value>urn:dece:org:org:dece:RET_CS_1</con:value></con:property><con:property><con:name>SAML_USER_BAU</con:name><con:value>SAML2 Assertion=nVZdc9o6EH3vr/A4jxljG38QewIzgKEhl7QNJm3pS0fIa1BjZMeSgeTXX8nEDpCPS++TR+vV7tndoyNdMrRKmn6XMcg5SakyCtrqbzv23LmLXG3uOIZmt1xbm0eupyEbua4T2ZblGqoyYqyAEWUcUd5Wm4ZpaYanWcbUaPmm7RtGw3CdX6ryHXImQguXhti1XSWU+WXatlrk1E8RI8ynaAXM59gPuzdjX3j6qMKkdi53KMuEeWfJeebrOm5EgCFJcAOnK/1SP/C5jJgfkgVFvMjhOWfE2urz3s1m09hYjTRf6E3DMHTD04VPxMjiTO18qjZDNKJxulv3EU0pwSghT0iCugG+TCOlmyzSnPDl6p3Qpm4aMrQGW6xh06Znqv6SoER3YqQDkDlDGlsiswo2gRhyoBiUu8morZ6dNsHd3mmOKIvTfMWO1n8HCegakjSDSGNVZRW60yO+0a7OJWB/RHFSMLKGL5ImGcLAlG85xGQ7JkyQL2JKOX5lyyqGAf6bkVzq+zgFbP2NzgRkAYz/n3ntz2oX5TtKCugEm2vL8pZ3G8gfQhjj4Gtxw627mcdn7RLCvvMOVD3q5/UxUWtePW+atuJZtMhCYhGUQ7ae/SE/+us/9qqwjALFMzuIl5ZAG4ezpuFe5fpTkExnzfMrDxlNEn2eTm9v71uj6IfJ7z/9tG8ukvU//W2wcPvZ6NevdBE5P/Lzx/n3eMrnw+n4+vPkKrPOUW/reDAriH0+H7Q4eQxCjzi3m/EgTW+vYpclk0/JteXwp+wzm48fvrjnw4f7bvulpv0aDo2VHITF/A9gXi0lNUaBMhTzQvxjaZEWEmlx6epnUp8YB8rVjtwlZcUvhPiQyBfD3K0HLdfq99yh5/aaPafVGxi2YQ6NruF4ntN0jEp/diiOIPZTGhOZSyrsjj8fA8QrnwGNINfWaYGXwNQPIgaII2VEJ+JgpJTBNBUKHiZdt+uMs7XnLoqnJzAmydMt/ek2ChE1JoIxqvIl5V/p17wbc8gP9Ns0DvR7AphkBKTIS6YzQXXGRVMe0LrgidlYowaFQlwDuVRiv2lfODojqywBCVlfpVGRQCNbZmWLdLb7NjWEWWmdDKa/R2G/PIXvFnn8r+qH8ImIdGCynh6ImcKry8jynaqY94u29ouuwneLiMjDJprLc4J3SA5/vXBGkqUmjKyqH/42K9y1+8nbX+/UPwClH/ejThStyV7a6lYVF4WQkk410QfUeGgU63VRzrAlZTIX4XVTN1p6CLgQWvc4Te+B6nUI/aRrpkZ9lLm2H+Ir+JKGHHFYCcYp5fKEN0YITL4xRoLd21MfMAcpRd84bPlbtn4iniIS8YevFexj6SfM38Rnk+bRy7jeiLWXR9QpHhac0IVcyUvl8R1S4FSEJUIF03w/+FsB3kp+aKybXGPhgk3zgsP7fxQpb20VYZwWlI8CtTTsS26Jkz9m4L84vQpTyvrzPb1l797TP2/GoRC/FVJrX/Lfzhop6YJB7GKkxNJWt+LJKZLTxZ7EPwN8pfKDwLsYXjSHw/6gVvmW55m9oFs38KCSzivza8teT4/PQ+df</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_BAU</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_BAU</con:name><con:value>0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fcf8c68a-683f-4af1-a418-a1f5b5384672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>03943527-847a-44f0-b73d-d2fad4b59708</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c103a15-a364-4f18-b7ce-fb035223d68a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6ea8959-c4f0-4f1c-95fc-32fa117a7bca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53aa8488-3ed5-4102-a539-344b534c55e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>db4d0f7f-a067-4b2f-9cf7-625b1b493f19</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>88e56319-5f02-4645-9b71-642ab080fda8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67200c2d-bef7-4dad-b3b8-50326a533129</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7eebc88-5d13-4ec1-bbfa-1c46c9ff6bff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>98691a52-212f-4ea8-a57e-1d7f76f36c48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>993be89d-0c7a-4f1d-9fa2-28c7ce77ee5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2c3525e-10ed-4830-81eb-999f78352e69</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07a35292-2f12-4d2a-a92a-a0b65bdbc9ab</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3f50659-e8c6-48c9-9915-d543e76d0ea4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a977d015-a310-447c-9587-4c159dd48726</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Full_User2_Create_STS_Policies" searchProperties="true" id="f46b5625-1b64-48d2-b071-71304a14dfef"><con:settings/><con:testStep type="groovy" name="Feed data for Full User2 Create"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def uname= "userget_firstuser"+new Date().format( 'yyyyMMdd_hhmms' );

tC.setPropertyValue("ResponseTypeUserCreate","SUCCESS");
tC.setPropertyValue("userType","ADULT");
tC.setPropertyValue("Privilege","full");
tC.setPropertyValue("GivenName",uname);
tC.setPropertyValue("SurName",uname);
tC.setPropertyValue("UserName",uname);
tP.setPropertyValue("UserName",uname);

tC.setPropertyValue("PrimaryEmail",tP.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("DisplayImageURL",tP.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",tP.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",tP.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",tP.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",tP.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",tP.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",tP.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",tP.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",tP.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("Language1",tP.getPropertyValue("Language1"));
tC.setPropertyValue("MeetsAgeOfMajority",tP.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",tP.getPropertyValue("urnUser"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",tP.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",tP.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",tP.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",tP.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",tP.getPropertyValue("ResourceStatus"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Full User Create 2"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("FullUser2Create API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS API for FAU2">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

//tS.setPropertyValue("audience",callTS.getPropertyValue("audience"));

def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;



tP.setPropertyValue("SAML-FullUser2",context.expand( '${#TestCase#SAML}'));
tC.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("E2E_UUID_FAU2",context.expand( '${#TestCase#assertionUUID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FAU2",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",context.expand( '${#TestCase#NODE_ACCOUNT_ID_FULL}'));
tC.setPropertyValue("NODE_USER_ID_FAU2",context.expand( '${#TestCase#NODE_USER_ID}'));
tC.setPropertyValue("NODE_USER_ID_FULL1",context.expand( '${#TestCase#NODE_USER_ID_FULL}'));
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call Policy Create - TOU1 1 1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateTOU_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_FAU2"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_FAU2"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));


def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Policy Create - MUC 1 1 1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateMUC_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_FAU2"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_FAU2"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>accountname</con:name><con:value>accname_20130924_034036</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>ResponseTypeUserCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>userType</con:name><con:value>ADULT</con:value></con:property><con:property><con:name>Privilege</con:name><con:value>full</con:value></con:property><con:property><con:name>GivenName</con:name><con:value>userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>SurName</con:name><con:value>userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Country</con:name><con:value>US</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value>urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value>0C0CD559BA921E11E05305991F0AF489</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value>1996-01-12</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_2619ac58-12e7-4888-a037-e90f72c0de1d</con:value></con:property><con:property><con:name>assertionUUID1</con:name><con:value>_2619ac58-12e7-4888-a037-e90f72c0de1d</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=pVbrbuI8EH0VlP25CrkUCkQFKQT4li30Qkq77Z9VcCbBkNhp7FDo068dIAuU9mNbCQl5Mpcz4+OZuWBeHJmWzRikHFNSWsYRYVYubSpZSizqMcws4sXALI4s1x4OLLOsW97WRCn1O03lt3luNDxUrauGCTW1Uq/XVU8/q6nQ0IOaiXQfDF+oMpZBnzDuEd5UTN2oqrqh6rU7vW5V6taZXq6dN56U0j2kTPgWKmVd2YBasqYy5TyxNO3l5aX8clamaaiZum5ov4YDF00h9pTWxTqjPFDa2uijsg8IogiVEY21C21P58JnlotD4vEshU0s/71YuqY3NKHjMxx+Uwpb8PskoPnR8QglGHkRfvVkfYbAp9Qv2VFIU8yn8btJGLp0rMISqciokG+Ktg/tREd7CFPmqWzqGRtfIwggBYKgNB71m8q3024tN71LPcICmsZs//hveIAsIKIJ+CrbprWBdrrDI5VqXQCy+gRFGcMLuJJkTTwEbHObgE53VbpJIcDLAWaCoEsm0Wm78A6O62p0cAiMf+aCdi5n7eTeizJo3TvB+XDQf3z226QNwVXvxxTGpF0dLPVmDmBXORcUV7s+HpCyINHa4vH26aw2PrdD+5xhR0OEhfbrfHU5WbT7y55fGQyz+qsbrLoP933Tvwru5j+/Dy9D0pu5w9X5r7Y+Zj8DmN26iecuye18Olk54cB44Py/x+f6j+/0KnSRVr1so+no1+S5V6fxk/v9sjeZ0eDHIk7HVxV7miSj8bzb7j48kdsZPLp8nt3Q+fW4brIHGk+129pM66Jmkc4O/n3Z9s272WQGiG+Pkgb9TqknbsnjHzczKcG+GuSqViKbD+NAuNKSVrJ3WJlod9i3xB2uz7qjO51qtdG2G4bRFT+9eqZXGw2jp9u9Sr2xbTJrFAcQHUoCLGPJlrumzccAUWwxID6k6oJmotMx5QOPHY97pT4ZiUdACYM7KtqzsTJitExXfmCuKmdJROfhJJgFeKWUrii/JtepHXBI93qyYez15BEgnGCQjVvymgliMy5q8ewtMh4Z5YVXJpCJ1p7KLmuZlXpVYzhOIpBItZj6WQTlZJrkldHY+t9UPcRy6ah7l7+2d/M6/LYtgdDxsVRgMhfxXGgKR4aLuU3k/YQruwlv3duZj+XDEvXkKUZrJPuf/tJE8qPgiO04Xddxt7AL7X+w/qyxc339ScvOwHZvvmL723F/G5918PnQXws8+Cpywd4vmr+11D4goHbI/SKQv8A7Ybdrmhj4YkS0ti83KT+Xs8Uiy59qTU7CVHjX5GPQdFNzAWVihq3u6ByIVjjRTloYCtwHsQv5PsKMT4nLPQ6x6C2l/HjChugCkxtiXzTF5anr515IUTkOS35M5kRiu5WIP1yAkYWknhDfiL8Xmv5N/JivnTgiT7EgckxCeZLLwuodWiAq3GIx5mi66/yYg2PB94VFkQssXPBpknF4/0tJzq+m4iFEM8L7HSUX7M7UHCdfJWD9VXrjJh/bxR6P/3+RV3FOAQRi+2c49y/XMUu+ABLuzOVN0KOjuaE3PhrN++hab8RvJTt1OuR46w8=</con:value></con:property><con:property><con:name>SAML_USER1</con:name><con:value>SAML2 Assertion=nVdZc6pME773V1ieS8uwiAtWkipWRUVFcOPmLRyGRdlk2PTXv2Cix+Qk58v7Xen09HQ/vdDzzDMyfI8cMAjBOHHDoC7xL41/9rhlmX1ItsgOQbYoyjBbe2Barb21b/e7nb3R6dCNuoRQCqUAJUaQvDRInGi3cLpFUhreG1D4gCKfSJLQG/U1jFFpulR5whv1wvcCNLi6fWmkcTAIDeSiQWD4EA0SMFAZeTooNQfGDVPj9fkN5dVh/OokSTTAMPBkQgA9DzyB0MeesQ86zyYaqK4dGEkaw3efJnppvJ/N8/wpbz+FsY2ROI5jOI2VOiZy7V+N19rtMDSlwArf1pwRhIELDM+9GBUoGSZOaNYZzw5jN3H8b0wTGIFXpluwAC1AUMGvBvbbwRXdDy19ABkjo4Ucg7gZW0ILxjAAsL5aSi+NXz+r4NtZLTYCZIWxjz6t/xskGGTQCyNottAtshu6n1v8Il2vzxAMpAB4KXIzOKvaJDIARPVFDC23mLqobD4T1a/lrxfo1mEQ/JeSPGOPOEvY2BeZ4V0bouT/qddjrd6srA0vha9epoALhYCV9cJE2wxFQstQOvGaxerlCuFR+Q3UvdTv68+Neu+r90Nyj1DFk08vTnp3cdTGoyKGuTPiNWPb7E51XSiQzh5sldWndiCqnCdu0ohCDkEehQ6vjPtpl+ZAKHbadl5TkhDu51RADW3hvNrM8TTy2FhRydCZLezgsrDEU7c5QlG3/Fwuli1pU1NdEVnP3dv7NEp0HhFskzvm3QNXOyunJrSmEB4cqwACOvaEl98xPcZQxTWB52uQ1f9tB6d5IzHuC66aFFb5eSbwVZYkrslzHAM5m8kllrEldnphZqx9PDlHd0jnOMsoK5HhmbO8ZHLe3vFrRZkIublee/paEkVWXlL5iNnxtXKDF4o1r2/HuLHRox0p4rrKsuZ2Ge7b48gcHfORA2ayJuczTTrLB6GYaQK+ucrsolxf5INMzLVVu7Y5sLS8FHI+v3rkhdyZ6ZtltFvRObgIisxQQ4ZYCZwjjzR/TYD20gEHYSozx6ucdWRuvZYLQWMWNdaercvYNE7UI+Cb0d73nAfjo9K4Zg7X5/3QS/WLcJA5Ycipp6Eq7du8IoyZ5W6136yPxkbMamA0Y/Y3j27HNbZhbuv9nFd240moS04GZowisKzClOnCGVkajplwyDIyxbjFhTuw3ZAzxRwbk6jWpL1hd3t2T1tkDHHPIPp9YjfddBenLi8ETX2S7g+O7GzFeXOimtmKTujLDmXNrGu4BCgiS9kKo2RSWCNFre0XfLEFo6ZpjzHvQoux3Bsz8eXseLK9TDbdOTrvXcvasNs55fUsT24vI8uzojNqaqFyjPEuC9sktjtnk6TG2DLLMMPD6sAqMtuvkmpKubKTWYMRhSRlLgcymZDr03iUeWDXZsJispkfju+FMflcYLFcEcq2Emp9njGrIozUlSAemBVr2zFrCyKrAJ5RdtIk35X5Wo1K5c95FK95tAWWEdo606VHtfYKp5N5olIUcw7YVSDSjnwqNmbXx3snKEzVWUTlMppZgb4Jj7Lvxqs4VVeTyWxa7LV0eDyUs8rC1UnW1mtCdowYdzbRnCMf8sYi2u2SqBmAGCRS5MtScZnr6NB39z4+bnYIdoHzoEeu/H2+GhqCPoltlZiMlsGi3aNrKLXOI7956OebpqZ2o57JBRZ/PmN6vMZDJhTpZedkFiR5dFb5tJtbY+a4N8hZ4dHsmRYmugbypTLZqH6zU+tk06mPXzSMmkXzXB3mlKAozbbJaiMNRbG7S/t2Ec8Dk9wZSTfT8XXXjbwjTaZHjYraa9svi7XIzKgnL2oKtQW6b/ciMMaWWMYIPWsqDc/7i3GJ/Dl4G6Cfp8Nd+DY/sMfJ8mH03EiHWnYrBMltWV1AEl8Xy1vBSP5OYCqJa7asq+ogqlgQSmCQNF6rUxV5GaQlxXHNQXllvK2FHsG3OYrniS6L4zwu4BROiDiDd2i6QxPUjeW8ofgEkQsDy618VTzu7Zb6O0DgDxAMTBi3sjAFDkSNv1is8lWXgmV5/YYBglpY8sQO22v3ev0u2yZZRiT7BMvRQlsUaF4kuiRNNOqzMJkH85ixEhh/4IgE/oEjLiFwIxdWRLK6TVF5naKkTMnJyNLEI54y4ymAaUk144rtDUiq38GQ60cerABjfmimHnyKnOiaIAy9/ZItA6CrdClo/0gqd73pvw3x894tG6WO6VYKqIqHhWVF4ReEt30L5vug249B38wzqelWF3qZ2iR2wRuSj1u/O6ZqlXu7VFFx6j/EDfdd/cfH/zyJ/QUU9jkfd0dm5j64vTH3koyWdOX1VtGT8XR6SrMsvdawV1GxuDSPERjew1QI0pJPnbXwCAPsbgL7EZW9o/7k+S7/iC9NnEBNynHglx1Xvy5/8I5RIareMVL5xRQ/fSR9cFnmLYFF8pWM88rnToX4ry8iMACVXilelD95GJu/y/WFrQc/ZZzV/HMDu1pVxPX8TVOAsDTrljMwjB+Nf2XgK+cfhfck37EkZTft0wR+v1OvhttLwwAgTINE4htXwePAveJMzhEc/Fb6w8yVOr6/BQr07VtgK0/VcvT5RuOu6/5v5ZZ7bRcAy1PIvWJ5aRTls7Z0HtgPA/4d4NczvtP724z/GMnrH+I/JQ85/fw9vP4L</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID1</con:name><con:value>E71D3C4DD15700D0E0401F0A05995914</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>audience</con:name><con:value>urn:dece:org:org:dece:RET_CS_1</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FAU2</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU2</con:name><con:value>0C0CD559BA911E11E05305991F0AF489</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fcf8c68a-683f-4af1-a418-a1f5b5384672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>03943527-847a-44f0-b73d-d2fad4b59708</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c103a15-a364-4f18-b7ce-fb035223d68a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6ea8959-c4f0-4f1c-95fc-32fa117a7bca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53aa8488-3ed5-4102-a539-344b534c55e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>db4d0f7f-a067-4b2f-9cf7-625b1b493f19</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>88e56319-5f02-4645-9b71-642ab080fda8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67200c2d-bef7-4dad-b3b8-50326a533129</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7eebc88-5d13-4ec1-bbfa-1c46c9ff6bff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>98691a52-212f-4ea8-a57e-1d7f76f36c48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>993be89d-0c7a-4f1d-9fa2-28c7ce77ee5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2c3525e-10ed-4830-81eb-999f78352e69</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07a35292-2f12-4d2a-a92a-a0b65bdbc9ab</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3f50659-e8c6-48c9-9915-d543e76d0ea4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a977d015-a310-447c-9587-4c159dd48726</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b72bff5-92d5-40ca-8d39-1b4e8f07bec5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AccountCreate API" searchProperties="true" disabled="true" id="3925a01b-01d9-45d5-989d-43f71524b021"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting></con:settings><con:testStep type="groovy" name="Set Environment Properties" disabled="true"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def env = context.expand( '${#Project#ENV}' )
log.info 'Env == '+env

if( tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
{
	tP.setPropertyValue("TOUUrl","qa.c.uvvu.com");
}
else
{
	tP.setPropertyValue("TOUUrl","qa.uvvu.com");
}

if (env == 'QALP1')
{
tP.setPropertyValue("Device_HostName","https://qa.d.uvvu.com:7001");
tP.setPropertyValue("nodeIdRTL","RET");
tP.setPropertyValue("nodeIdRTLCS","RET_CS_1");
tP.setPropertyValue("nodeIdDSP","DSP");
tP.setPropertyValue("nodeIdDSPCS","DSP_CS_1");
tP.setPropertyValue("nodeIdAccportal","ACCESS");
tP.setPropertyValue("nodeIdAccportalCS","ACCESCS");
tP.setPropertyValue("nodeIdDLASP","DLASP");
tP.setPropertyValue("nodeIdDLASPCS","DLASP_CS_1");
tP.setPropertyValue("nodeIdLLASP","LLASP");
tP.setPropertyValue("nodeIdLLASPCS","LLASP_CS_1");
tP.setPropertyValue("nodeIdDEV","DEV");
tP.setPropertyValue("nodeIdDEVCS","DEV_CS_1");
tP.setPropertyValue("nodeIdportal","iscportal1");
tP.setPropertyValue("nodeIdportalCS","iscportalcs1");
tP.setPropertyValue("nodeIdDECE","DECE");
tP.setPropertyValue("nodeIdDECECS","dece:cs");
tP.setPropertyValue("nodeIdCoo","COO");
tP.setPropertyValue("nodeIdCoordCS","coord:cs");
tP.setPropertyValue("Provision_HostName","https://qa.p.uvvu.com:7001");
tP.setPropertyValue("Query_HostName","https://qa.q.uvvu.com:7001");
tP.setPropertyValue("Batch_HostName","https://qa.b.uvvu.com:7001");
tP.setPropertyValue("targerHostd","qa.d.uvvu.com");
tP.setPropertyValue("targetDeviceDomain","qa.d.uvvu.com:7001");
tP.setPropertyValue("targetHost","qa.p.uvvu.com");
tP.setPropertyValue("targetHostq","qa.q.uvvu.com");
tP.setPropertyValue("targetHostb","qa.b.uvvu.com");
tP.setPropertyValue("targetPort","7001");
tP.setPropertyValue("targetPortq","7001");
tP.setPropertyValue("targetSystem","LP1");
tP.setPropertyValue("targetURL","qa.p.uvvu.com:7001");
tP.setPropertyValue("targetUrlSHost","qa.s.uvvu.com:7001");
tP.setPropertyValue("JDBCConnStr","jdbc:oracle:thin:DEQA1_APP/lp1db_23@10.31.153.5:2115/stdecqpdb_stdecqa.neustar.com");
tP.setPropertyValue("DBUsername","DEQA1_APP");
tP.setPropertyValue("DBPassword","lp1db_23");
}
else if (env == "QALP2")
{
tP.setPropertyValue("Device_HostName","https://qa.d.uvvu.com:7002");
tP.setPropertyValue("nodeIdRTL","RET");
tP.setPropertyValue("nodeIdRTLCS","RET_CS_1");
tP.setPropertyValue("nodeIdDSP","DSP");
tP.setPropertyValue("nodeIdDSPCS","DSP_CS_1");
tP.setPropertyValue("nodeIdAccportal","ACCESS");
tP.setPropertyValue("nodeIdAccportalCS","ACCESCS");
tP.setPropertyValue("nodeIdDLASP","DLASP");
tP.setPropertyValue("nodeIdDLASPCS","DLASP_CS_1");
tP.setPropertyValue("nodeIdLLASP","LLASP");
tP.setPropertyValue("nodeIdLLASPCS","LLASP_CS_1");
tP.setPropertyValue("nodeIdDEV","DEV");
tP.setPropertyValue("nodeIdDEVCS","DEV_CS_1");
tP.setPropertyValue("nodeIdportal","iscportal1");
tP.setPropertyValue("nodeIdportalCS","iscportalcs1");
tP.setPropertyValue("nodeIdDECE","DECE");
tP.setPropertyValue("nodeIdDECECS","dece:cs");
tP.setPropertyValue("nodeIdCoo","COO");
tP.setPropertyValue("nodeIdCoordCS","coord:cs");
tP.setPropertyValue("Provision_HostName","https://qa.p.uvvu.com:7002");
tP.setPropertyValue("Query_HostName","https://qa.q.uvvu.com:7002");
tP.setPropertyValue("targerHostd","qa.d.uvvu.com");
tP.setPropertyValue("targetDeviceDomain","qa.d.uvvu.com:7002");
tP.setPropertyValue("targetHost","qa.p.uvvu.com");
tP.setPropertyValue("targetHostq","qa.q.uvvu.com");
tP.setPropertyValue("targetHostb","qa.b.uvvu.com");
tP.setPropertyValue("targetPort","7002");
tP.setPropertyValue("targetPortq","7002");
tP.setPropertyValue("targetSystem","LP2");
tP.setPropertyValue("targetURL","qa.p.uvvu.com:7002");
tP.setPropertyValue("targetUrlSHost","qa.s.uvvu.com:7002");
tP.setPropertyValue("JDBCConnStr","jdbc:oracle:thin:DEQA2/dece2010@10.31.153.5:2115/stdecqpdb_stdecqa.neustar.com");
tP.setPropertyValue("DBUsername","deqa2");
tP.setPropertyValue("DBPassword","dece2010");
}
else if (env == "QALP3")
{
tP.setPropertyValue("Device_HostName","https://qa.d.uvvu.com:7003");
tP.setPropertyValue("nodeIdRTL","RET");
tP.setPropertyValue("nodeIdRTLCS","RET_CS_1");
tP.setPropertyValue("nodeIdDSP","DSP");
tP.setPropertyValue("nodeIdDSPCS","DSP_CS_1");
tP.setPropertyValue("nodeIdAccportal","ACCESS");
tP.setPropertyValue("nodeIdAccportalCS","ACCESCS");
tP.setPropertyValue("nodeIdDLASP","DLASP");
tP.setPropertyValue("nodeIdDLASPCS","DLASP_CS_1");
tP.setPropertyValue("nodeIdLLASP","LLASP");
tP.setPropertyValue("nodeIdLLASPCS","LLASP_CS_1");
tP.setPropertyValue("nodeIdDEV","DEV");
tP.setPropertyValue("nodeIdDEVCS","DEV_CS_1");
tP.setPropertyValue("nodeIdportal","iscportal1");
tP.setPropertyValue("nodeIdportalCS","iscportalcs1");
tP.setPropertyValue("nodeIdDECE","DECE");
tP.setPropertyValue("nodeIdDECECS","dece:cs");
tP.setPropertyValue("nodeIdCoo","COO");
tP.setPropertyValue("nodeIdCoordCS","coord:cs");
tP.setPropertyValue("Provision_HostName","https://qa.p.uvvu.com:7003");
tP.setPropertyValue("Query_HostName","https://qa.q.uvvu.com:7003");
tP.setPropertyValue("targerHostd","qa.d.uvvu.com");
tP.setPropertyValue("targetDeviceDomain","qa.d.uvvu.com:7003");
tP.setPropertyValue("targetHost","qa.p.uvvu.com");
tP.setPropertyValue("targetHostq","qa.q.uvvu.com");
tP.setPropertyValue("targetHostb","qa.b.uvvu.com");
tP.setPropertyValue("targetPort","7003");
tP.setPropertyValue("targetPortq","7003");
tP.setPropertyValue("targetSystem","LP3");
tP.setPropertyValue("targetURL","qa.p.uvvu.com:7003");
tP.setPropertyValue("targetUrlSHost","qa.s.uvvu.com:7003");
}
else if (env == "DEV")
{
tP.setPropertyValue("Device_HostName","https://lp2.dev.d.uvvu.com:8443");
tP.setPropertyValue("nodeIdRTL","ISC_RET");
tP.setPropertyValue("nodeIdRTLCS","ISC_RETCS");
tP.setPropertyValue("nodeIdDSP","ISC_DSP");
tP.setPropertyValue("nodeIdDSPCS","ISC_DSPCS");
tP.setPropertyValue("nodeIdAccportal","ISC_ACCESS");
tP.setPropertyValue("nodeIdAccportalCS","ISC_ACCESSCS");
tP.setPropertyValue("nodeIdDLASP","ISC_DLASP");
tP.setPropertyValue("nodeIdDLASPCS","ISC_DLASPCS");
tP.setPropertyValue("nodeIdLLASP","ISC_LLASP");
tP.setPropertyValue("nodeIdLLASPCS","ISC_LLASPCS");
tP.setPropertyValue("nodeIdDEV","ISC_DEVICE");
tP.setPropertyValue("nodeIdDEVCS","ISC_DEVICECS");
tP.setPropertyValue("nodeIdportal","ISC_PORTAL");
tP.setPropertyValue("nodeIdportalCS","ISC_PORTALCS");
tP.setPropertyValue("nodeIdDECE","ISC_DECE");
tP.setPropertyValue("nodeIdDECECS","ISC_DECECS");
tP.setPropertyValue("nodeIdCoo","ISC_COO");
tP.setPropertyValue("nodeIdCoordCS","ISC_COOCS");
tP.setPropertyValue("Provision_HostName","https://lp2.dev.p.uvvu.com:8443");
tP.setPropertyValue("Query_HostName","https://lp2.dev.q.uvvu.com:8443");
tP.setPropertyValue("targerHostd","lp2.dev.d.uvvu.com");
tP.setPropertyValue("targetDeviceDomain","lp2.dev.d.uvvu.com:8443");
tP.setPropertyValue("targetHost","lp2.dev.p.uvvu.com");
tP.setPropertyValue("targetHostq","lp2.dev.q.uvvu.com");
tP.setPropertyValue("targetHostb","qa.b.uvvu.com");
tP.setPropertyValue("targetPort","8443");
tP.setPropertyValue("targetPortq","8443");
tP.setPropertyValue("targetSystem","DEV");
tP.setPropertyValue("targetURL","lp2.dev.p.uvvu.com:8443");
tP.setPropertyValue("targetUrlSHost","lp2.dev.s.uvvu.com:8443");
tP.setPropertyValue("JDBCConnStr","jdbc:oracle:thin:DEVDECESR5/DEVDECESR5@10.31.153.15:2115/decdev1.neustar.com");
tP.setPropertyValue("DBUsername","DEVDECESR5");
tP.setPropertyValue("DBPassword","DEVDECESR5");
}





</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("NODE_ACCOUNT_ID",null);
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
tC.setPropertyValue("accountname",null);
tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpLocation",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("XMLbody",null);

tC.setPropertyValue("ResponseType","SUCCESS");

tP.setPropertyValue("Request_XML",tP.getPropertyValue("Request_XML_Buffer"));


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname);
def callTS = tP.getTestSuiteByName(callTSname);

//tP.setPropertyValue("Country",callTS.getPropertyValue("Country"));
tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));

def b = tC.getPropertyValue("nodeid");

log.info b;</script></con:config></con:testStep><con:testStep type="groovy" name="Set TOU Policy Resource" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def policy_TOU = context.expand( '${#Project#Policy_TOU}' )
def dBHost = context.expand( '${#Project#targetsystem}' )
String country = context.expand( '${#Project#Country}' );
def tOUUrl = context.expand( '${#Project#TOUUrl}' )
def targetPort = context.expand( '${#Project#targetPort}' )
def a = new dbUtils.dbUtils(log,dBHost);
String sql = """select consent_version from (select
            consent_version            
            from
            CONSENT
            where
            CONSENT_URN = 'urn:dece:type:policy:TermsOfUse'
            and
            COUNTRY = '""" + country + """'
            order by
            consent_version desc)
            where rownum &lt; 2"""; 

                                                
   log.info sql;   
   results = a.SelectFromDB(sql,dBHost);
assert results.length() > 0;
log.info "results" + results;

def myXML = new XmlSlurper().parseText(results);   
log.info myXML.ResultSet.Row.CONSENT_VERSION.text();
testCase.setPropertyValue("Consent_Version",myXML.ResultSet.Row.CONSENT_VERSION.text());
def consent_Version = context.expand( '${#TestCase#Consent_Version}' )
testProject.setPropertyValue("policy_TOU",'https://'+ tOUUrl + ':' + targetPort + '/Consent/Text/' + country + '/urn:dece:type:policy:TermsOfUse:' + consent_Version + '/html');


</script></con:config></con:testStep><con:testStep type="groovy" name="Generate AccountName"><con:settings/><con:config><script>def tC = testRunner.getTestCase();

def today= new Date().format( 'yyyyMMdd_hhmms' );

tC.setPropertyValue("AccountName","accname_"+today);</script></con:config></con:testStep><con:testStep type="groovy" name="Set coordinatorSchema" disabled="true"><con:settings/><con:config><script>
def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


log.info "V2: "+tP.getPropertyValue("V2");
if(tP.getPropertyValue("V2") == "06")
{
	tP.setPropertyValue("coordinatorSchema","http://www.decellc.org/schema/2012/12/coordinator");
	tP.setPropertyValue("SchemaNameSpace","http://www.decellc.org/schema/2012/12/coordinator");	
	log.info "Setting the coordinatorSchema value at project level: http://www.decellc.org/schema/2012/12/coordinator";
}
else if(tP.getPropertyValue("V2") == "07")
{
	tP.setPropertyValue("coordinatorSchema","http://www.decellc.org/schema/2013/06/coordinator");
	tP.setPropertyValue("SchemaNameSpace","http://www.decellc.org/schema/2013/06/coordinator");
	log.info "Setting the coordinatorSchema value at project level: http://www.decellc.org/schema/2013/06/coordinator";
}
else if(tP.getPropertyValue("V2") == "11")
{
	tP.setPropertyValue("coordinatorSchema","http://www.decellc.org/schema/2013/10/coordinator");
	tP.setPropertyValue("SchemaNameSpace","http://www.decellc.org/schema/2013/10/coordinator");
	log.info "Setting the coordinatorSchema value at project level: http://www.decellc.org/schema/2013/10/coordinator";
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("Account_Create");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="Account_Create"><con:settings/><con:config service="Account" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account" methodName="AccountCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Account_Create" mediaType="application/xml" postQueryString="false" id="ca4ff0a9-00f8-41e3-871a-d799b7db932c" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@remove_empty_content">false</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<Account xmlns="${#Project#coordinatorSchema}"> 
<DisplayName>${#TestCase#AccountName}</DisplayName>
<Country>${#Project#Country}</Country>
</Account>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="947149be-7bb0-4a3f-9591-1927886d48ad"><con:configuration><scriptText>assert messageExchange.responseHeaders["#status#"].toString() == "[HTTP/1.1 201 Created]";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('Account_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 			
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpLocation", contentLocation);

</script></con:config></con:testStep><con:testStep type="groovy" name="Validate Response"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def url       = context.expand( '${#Project#Provision_HostName}' );
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');


boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
	break;

	case "INVALID_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
		errorReason = "The supplied country code is invalid.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
	break;

	case "NULL_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
		errorReason = "The country code cannot be null.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
	break;
	
	case "API_NOT_AUTH":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
		errorReason = "API call not authorized";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserNotActive";
		errorReason = "User is not active";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
		errorReason = "Requesting User ID Not Specified";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;	
	
}
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
//this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
////this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
/*
if (XMLbodynull) {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
} else {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}
*/
//Location Header

if (httpLocationHeader) {
      assert context.expand( '${#TestCase#httpLocation}') != null;

      //def a = context.expand( '${#TestCase#httpLocation}');
      def a = context.expand( '${#TestCase#httpLocation}');
      def b = a.toURL();
      def urlStr = b.getPath();
      // Below code is added to get the shard details i.e., for Active-Active
      def hostAddress = b.getHost();
      log.info " hostAddress....     " + hostAddress;   
     String clusterNumber = context.expand( '${#Project#clusterNumber}' );
log.info " Cluster is : "+ clusterNumber; 
if(clusterNumber == "1")
      {
     	 if (hostAddress == "lp3.qa-web-vip2-s01.uvvu.com")
      	{
      		tP.setPropertyValue("targetSystem","LP3ST");
      		tP.setPropertyValue("DBIdentifier","LP3ST");
      		tP.setPropertyValue("JDBCConnStr",'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqlp.neustar.com');
      	}
      	else if (hostAddress == "lp3.qa-web-vip2-s02.uvvu.com")
      	{
      		tP.setPropertyValue("targetSystem","LP3CH");
      		tP.setPropertyValue("DBIdentifier","LP3CH");
      		tP.setPropertyValue("JDBCConnStr",'jdbc:oracle:thin:@chdeqp-clu1-scan.nc.neustar.com:2115/chdecqlp.neustar.com');
      	}
      }else {
      	if (hostAddress == "lp3.qa-web-vip2-s01.uvvu.com")
      	{
      		tP.setPropertyValue("targetSystem","LP3ST");
      		tP.setPropertyValue("DBIdentifier","LP3ST");
      		tP.setPropertyValue("JDBCConnStr",'jdbc:oracle:thin:@stdeqp-clu2-scan.va.neustar.com:2115/stdecqlp.neustar.com');
      	}
      	else if (hostAddress == "lp3.qa-web-vip2-s02.uvvu.com")
      	{
      		tP.setPropertyValue("targetSystem","LP3CH");
      		tP.setPropertyValue("DBIdentifier","LP3CH");
      		tP.setPropertyValue("JDBCConnStr",'jdbc:oracle:thin:@chdeqp-clu2-scan.nc.neustar.com:2115/chdecqlp.neustar.com');
      	}
      	
      }

      if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode")){
                                
		assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*");
                 
          int lastColon = urlStr.lastIndexOf(':');
	     int lastSlash = urlStr.lastIndexOf('/');
	     accountid     = urlStr.substring(lastColon + 1);
	     def node_Account = urlStr.substring(lastSlash + 1);

          tP.setPropertyValue("NODE_ACCOUNT_ID",accountid);
                    
          tP.setPropertyValue("NODE_ACCOUNT_ID_FULL",node_Account);                        
          tP.setPropertyValue("NODE_ACCOUNT_ID_FULL1",node_Account);                                                   
          
      } else {
            assert b.getPath().matches("/rest/$major/$minor/Account/urn%3Adece%3Aaccountid%3Aorg%3Adece%3A[0-9,A-F]*");
            int lastColon = urlStr.lastIndexOf('%3A');
            int lastSlash = urlStr.lastIndexOf('/');
            accountid     = urlStr.substring(lastColon + 3);
            def node_Account = urlStr.substring(lastSlash + 1);

            tP.setPropertyValue("NODE_ACCOUNT_ID",accountid);
            
            tP.setPropertyValue("NODE_ACCOUNT_ID_FULL",node_Account);
		  tP.setPropertyValue("NODE_ACCOUNT_ID_FULL1",node_Account);
      }

} else {
      	assert context.expand( '${#TestCase#httpLocation}') == "";
}


//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

</script></con:config></con:testStep><con:testStep type="groovy" name="Return the NodeAccountId to the Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("accountname",tC.getPropertyValue("accountname"));
callTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
callTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
</script></con:config></con:testStep><con:properties><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>nodeid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value></con:property><con:property><con:name>ResponseType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tName</con:name><con:value>Account_Create_First_User_Create_STS_Policies</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>keyStorePath</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>accountname</con:name><con:value>accname_20150107_021859</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:E71D3C4DD15700D0E0401F0A05995914</con:value></con:property><con:property><con:name>Consent_Version</con:name><con:value>20121024</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>b8ba87db-df08-4f36-8c88-c580bb3ec25b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9ce61892-9d8a-4055-b161-e19938292410</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c50a4409-da80-4892-a2c3-07a22e674bd0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd13479c-f25a-495b-8c94-31e5557a93a8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbd205af-6a2e-447d-a1c5-eb49c82ff6e4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>64613dd6-4244-4f8a-8186-0d4745fa0115</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="FullUser1Create API" searchProperties="true" disabled="true" id="72763420-05a4-495b-82e5-7ad968078747"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("userType",null);
tC.setPropertyValue("Privilege",null);
tC.setPropertyValue("UserName",null);
tC.setPropertyValue("GivenName",null);
tC.setPropertyValue("SurName",null);
tC.setPropertyValue("PrimaryEmail",null);
tC.setPropertyValue("Language1",null);
tC.setPropertyValue("DisplayImageURL",null);
tC.setPropertyValue("AlternateEmail",null);
tC.setPropertyValue("PostalAddress",null);
tC.setPropertyValue("PostalCode",null);
tC.setPropertyValue("Locality",null);
tC.setPropertyValue("StateOrProvince",null);
tC.setPropertyValue("Country",null);
tC.setPropertyValue("TelephoneNumber",null);
tC.setPropertyValue("MobileTelephoneNumber",null);
tC.setPropertyValue("MeetsAgeOfMajority",null);
tC.setPropertyValue("DateOfBirth",null);
tC.setPropertyValue("urnUser",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("QuestionID1",null);
tC.setPropertyValue("QuestionResponse1",null);
tC.setPropertyValue("QuestionID2",null);
tC.setPropertyValue("QuestionResponse2",null);
tC.setPropertyValue("ResourceStatus",null);

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("NODE_USER_ID",null);
tC.setPropertyValue("NODE_USER_ID_FULL",null);
tC.setPropertyValue("NODE_ACCOUNT_ID",null);
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
tC.setPropertyValue("user_oid1",null);
tC.setPropertyValue("account_oid",null);

tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpLocation",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("ResponseType",null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("ResponseType",callTC.getPropertyValue("ResponseTypeUserCreate"));

tC.setPropertyValue("Privilege",callTC.getPropertyValue("Privilege"));
tC.setPropertyValue("UserName",callTC.getPropertyValue("UserName"));
tC.setPropertyValue("userType",callTC.getPropertyValue("userType"));
tC.setPropertyValue("GivenName",callTC.getPropertyValue("GivenName"));
tC.setPropertyValue("SurName",callTC.getPropertyValue("SurName"));
tC.setPropertyValue("PrimaryEmail",callTC.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("Language1",callTC.getPropertyValue("Language1"));
tC.setPropertyValue("DisplayImageURL",callTC.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",callTC.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",callTC.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",callTC.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",callTC.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",callTC.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",callTC.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",callTC.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",callTC.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("MeetsAgeOfMajority",callTC.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",callTC.getPropertyValue("urnUser"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",callTC.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",callTC.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",callTC.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",callTC.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",callTC.getPropertyValue("ResourceStatus"));

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("NODE_ACCOUNT_ID", callTC.getPropertyValue("NODE_ACCOUNT_ID"));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL", callTC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("user_oid1",callTC.getPropertyValue("user_oid"));
tC.setPropertyValue("account_oid",callTC.getPropertyValue("account_oid"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Setting constants based on Geo Profile"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

/* Setting constants based on Geo Profile*/

if(tP.getPropertyValue("Country")=="US")
{
  tP.setPropertyValue("GeoProfile","US");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="CA")
{
  tP.setPropertyValue("GeoProfile","CA");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="GB")
{
  tP.setPropertyValue("GeoProfile","GB");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AU")
{
  tP.setPropertyValue("GeoProfile","AU");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="NZ")
{
  tP.setPropertyValue("GeoProfile","NZ");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="IE")
{
  tP.setPropertyValue("GeoProfile","IE");             
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AT")
{
  tP.setPropertyValue("GeoProfile","AT");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
else
if(tP.getPropertyValue("Country")=="DE")
{
  tP.setPropertyValue("GeoProfile","DE");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
  else
if(tP.getPropertyValue("Country")=="CH")
{
  tP.setPropertyValue("GeoProfile","CH");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="FR")
{
  tP.setPropertyValue("GeoProfile","FR");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("CHILD_MAX_AGE","17");
}

	def userType = tC.getPropertyValue("userType")
	log.info "userType: "+userType;
	
	switch(userType){
	
	case "ADULT":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("ADULT_MIN_AGE").toInteger()+1)*365);
	log.info "Adult DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTH":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("YOUTH_MIN_AGE").toInteger()+1)*365);
	log.info "YOUTH DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "CHILD":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("CHILD_MAX_AGE").toInteger()-1)*365);
	log.info "CHILD DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTPlus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "AdultPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTMinus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHPlus":
		
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob);
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "YOUTHMinus":
   	
   	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "ADULTToday":
	 
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHToday":

	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	default:
	log.info "userType is not matched!!"
	break;

	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("User_Create");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Create"><con:settings/><con:config service="Users" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User" methodName="UserCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Create" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<User UserClass="urn:dece:role:user:class:full" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
	<Name>
        	<GivenName>${#Project#UserName}</GivenName>
		<SurName>uvtc_user</SurName>
	</Name>	
	<ContactInfo>
        <PrimaryEmail>			
	 <Value>testing@uvvutesting.biz</Value>
        <!--<Value>sunitha.pemmasani@neustar.biz</Value>-->
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</PrimaryEmail>
	<AlternateEmail>			
        <Value>testing1@uvvutesting.biz</Value>			
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</AlternateEmail>
	<!--Address>
		<PostalAddress>45999 Center Oak Plaza</PostalAddress>
		<PostalCode>20166</PostalCode>
		<Locality>Sterling</Locality>
		<StateOrProvince>NJ</StateOrProvince>
                <Country>US</Country>
	</Address-->
	</ContactInfo>
        <!--Languages>
		<Language primary="true">en-GB</Language>	
	</Languages-->
       <!-- <DateOfBirth> depricated </DateOfBirth> -->
       <Credentials> 
               <Username>${#Project#UserName}</Username>	
                <Password>Password1</Password> 
	</Credentials>
<UserRecoveryTokens>
      <RecoveryItem>
		<QuestionID>1200</QuestionID>  
		<QuestionResponse>Turner</QuestionResponse>
       </RecoveryItem>
       <RecoveryItem>
		<QuestionID>1650</QuestionID>  
		<QuestionResponse>Phoenix</QuestionResponse>
       </RecoveryItem> 
</UserRecoveryTokens>
</User>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="dc7939c7-4e38-4936-ab5e-97a276c8b7cf"><con:configuration><scriptText/></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="AccountID" value="${#Project#NODE_ACCOUNT_ID_FULL}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract_Details"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('User_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 			
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate_Response"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = context.expand( '${#Project#Provision_HostName}' );
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');
def primaryEmail = context.expand( '${#TestCase#PrimaryEmail}');
//def nodetype      = tC.getPropertyValue("nodetype");

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/

if (context.expand( '${#Project#Query_HostName}' ).length() == 0) {
	errorHost = "http://error.decellc.org";
} else {
	errorHost = context.expand( '${#Project#Query_HostName}' );
}

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		//this.log.info "Hello";
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
		errorReason = "The supplied country code is invalid.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
		expectHTTPconnection = "close";
	break;

	case "NULL_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
		errorReason = "The country code cannot be null.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
		expectHTTPconnection = "close";
	break;
	
	case "API_NOT_AUTH":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
		errorReason = "API call not authorized";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserNotActive";
		errorReason = "User is not active";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
		errorReason = "Requesting User ID Not Specified";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
		expectHTTPconnection = "close";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;

		case "CANNOT_CREATE_FAU":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorPrivilegeInsufficientToCreateFullAccessUser";
		errorReason = "The user does not have permission to create a full-access user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorPrivilegeInsufficientToCreateFullAccessUser";
	break;
	
	case "CANNOT_CREATE_USER":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorNotAllowedToCreateUsers";
		errorReason = "The user does not have permission to create a user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorNotAllowedToCreateUsers";
	break;
	
	case "FIRST_USER_MUST_BE_ADULT":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBe18OrOlder";
		errorReason = "First User must be 18 years or older";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBe18OrOlder";
	break;


	case "NO_MNG_ACC_CNST":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The setting of the \"Manage Account Consent\" policy prevents the requested action from being completed.";
		errorID     = "urn:dece:errorid:org:dece:Policy:ManageAccountConsentRequired";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:ManageAccountConsentRequired";
	break;
	
	case "FIRST_USER_MUST_BE_FAU":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The first user in a household account must be a full-access user.";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBeCreatedWithFullAccessPrivilege";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBeCreatedWithFullAccessPrivilege";
	break;

	case "INVALID_PASSWORD":
	     expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorReason = "The password is not valid.";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPasswordNotValid";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPasswordNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_PRIMARY_EMAIL":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPrimaryEmailNotValid";
		errorReason = "The primary email address is not valid. - " + primaryEmail;
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPrimaryEmailNotValid";
		expectHTTPconnection = "close";
	break;
	
}

tC.setPropertyValue("expectHTTPstatus",expectHTTPstatus);


// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
//this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
/*
if (XMLbodynull) {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
} else {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}
*/
//Location Header

if (httpLocationHeader) {
	 assert context.expand( '${#TestCase#httpLocation}') != null;

      def a = context.expand( '${#TestCase#httpLocation}');
      def b = a.toURL();
      def urlStr = b.getPath();

      if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode")){
                                
         assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");
         
         int lastColon = urlStr.lastIndexOf(':');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 1);
         def node_User = urlStr.substring(lastSlash + 1);
         //log.info "User oid ++++++++"userid;
         tP.setPropertyValue("NODE_USER_OID_FAU1",userid);
	    //log.info "User Id ++++++++"node_User;
         tP.setPropertyValue("NODE_USER_ID_FAU1",node_User);
         tC.setPropertyValue("NODE_USER_ID_FAU1",node_User);
      } else {

         assert b.getPath().matches("/rest/$major/$minor/Account/urn%3Adece%3Aaccountid%3Aorg%3Adece%3A[0-9,A-F]*/User/urn%3Adece%3Auserid%3Aorg%3Adece%3A[0-9,A-F]*");
         int lastColon = urlStr.lastIndexOf('%3A');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 3);
         def node_User = urlStr.substring(lastSlash + 1);
                                
         tP.setPropertyValue("NODE_USER_OID_FAU1",userid);

        tP.setPropertyValue("NODE_USER_ID_FAU1",node_User);
         tC.setPropertyValue("NODE_USER_ID_FAU1",node_User);
       }
      }
                                

else {
                                
       	assert context.expand( '${#TestCase#httpLocation}') == "";
}


//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		log.info errorLink;
		log.info myXML.Error.ErrorLink.toString()
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract_Account_OID_and_User_OID"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def dbUser;

def expectHTTPstatus = tC.getPropertyValue("expectHTTPstatus");

if (expectHTTPstatus == "HTTP/1.1 201 Created")
     {  	
  		def dBHost = context.expand( '${#Project#targetsystem}' )
		
		try          {
		                dbUser = new dbUtils.dbUser(log,dBHost);
		                }
		catch(Throwable e) {
		                log.info "ERROR - dbUtils.dbUser - $e";
		                assert 1 == 2;
		                }
		finally {
		         try {
		                 String u = dbUser.userGetUserOID(tC.getPropertyValue("UserName"));
		                 String a = dbUser.userGetAccountOIDbyUsername(tC.getPropertyValue("UserName"))
		
		                 assert u.length() > 0;
		                 assert a.length() > 0;
		                 
		                 tC.setPropertyValue("user_oid", u);
		                 tC.setPropertyValue("account_oid", a);
		                 tP.setPropertyValue("E2E_AccountOID_FAU1", a);
		                 tP.setPropertyValue("E2E_UserOID_FAU1", u);	                
		                 
		                }
		          catch(Throwable e) {
		                 log.info "ERROR - dbUtils.userGetUserOID - $e";
		                 assert 1 == 2;                     
		     		     }
				}
     }
     else
     {
     	log.info ("Can not retreive User_OID for a negative scenario");
     }
     

</script></con:config></con:testStep><con:testStep type="groovy" name="Return the Username and NodeUserId to the Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("NODE_USER_ID",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID1",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
callTC.setPropertyValue("NODE_USER_ID_FULL1",tC.getPropertyValue("NODE_USER_ID_FULL1"));
callTC.setPropertyValue("UserName",tC.getPropertyValue("UserName"));
callTC.setPropertyValue("user_oid1",tC.getPropertyValue("user_oid"));
callTC.setPropertyValue("account_oid",tC.getPropertyValue("account_oid"));
callTC.setPropertyValue("DateOfBirth",tC.getPropertyValue("DateOfBirth"));</script></con:config></con:testStep><con:properties><con:property><con:name>AlternateEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>CLG_NODE_USER_ID</con:name><con:value/></con:property><con:property><con:name>coordinatorSchema</con:name><con:value>${#Project#coordinatorSchema}</con:value></con:property><con:property><con:name>Country</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">US</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1996-01-12</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FirstFullUsername</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>GivenName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_02193</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489/User/urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>password</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Password1</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PrimaryEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">testing@uvvutesting.biz</con:value></con:property><con:property><con:name>PrimaryEmailConfirmationEndpoint</con:name><con:value>www.abc.com</con:value></con:property><con:property><con:name>Privilege</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">full</con:value></con:property><con:property><con:name>QuestionID</con:name><con:value>1200</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse</con:name><con:value>myname</con:value></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResponseType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E</con:value></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SurName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_02193</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tName</con:name><con:value>Account_Create_First_User_Create_STS_Policies</con:value></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_02193</con:value></con:property><con:property><con:name>userType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ADULT</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>user_oid</con:name><con:value>0C0CD5590A651E07E05305991F0A0601</con:value></con:property><con:property><con:name>account_oid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectHTTPstatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>ADULT_DOB_XML</con:name><con:value>1996-01-12</con:value></con:property><con:property><con:name>NODE_USER_OID_FAU1</con:name><con:value>E763DE25166B1197E0401F0A0599524A</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU1</con:name><con:value>urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3d78db1c-105b-43a0-b406-6bb0f690c833</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>662fb201-c4e7-401c-b10a-548ea13f5020</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6afcd2ee-d125-48d3-86d9-0b8f90dcad31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="FullUser2Create API" searchProperties="true" disabled="true" id="7017df55-178f-4afa-bcc6-c277b80ba6cf"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("userType",null);
tC.setPropertyValue("Privilege",null);
tC.setPropertyValue("UserName",null);
tC.setPropertyValue("GivenName",null);
tC.setPropertyValue("SurName",null);
tC.setPropertyValue("PrimaryEmail",null);
tC.setPropertyValue("Language1",null);
tC.setPropertyValue("DisplayImageURL",null);
tC.setPropertyValue("AlternateEmail",null);
tC.setPropertyValue("PostalAddress",null);
tC.setPropertyValue("PostalCode",null);
tC.setPropertyValue("Locality",null);
tC.setPropertyValue("StateOrProvince",null);
tC.setPropertyValue("Country",null);
tC.setPropertyValue("TelephoneNumber",null);
tC.setPropertyValue("MobileTelephoneNumber",null);
tC.setPropertyValue("MeetsAgeOfMajority",null);
tC.setPropertyValue("DateOfBirth",null);
tC.setPropertyValue("urnUser",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("QuestionID1",null);
tC.setPropertyValue("QuestionResponse1",null);
tC.setPropertyValue("QuestionID2",null);
tC.setPropertyValue("QuestionResponse2",null);
tC.setPropertyValue("ResourceStatus",null);

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("NODE_USER_ID",null);
tC.setPropertyValue("NODE_USER_ID_FULL",null);
tC.setPropertyValue("NODE_ACCOUNT_ID",null);
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
tC.setPropertyValue("user_oid1",null);
tC.setPropertyValue("account_oid",null);

tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpLocation",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("ResponseType",null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("ResponseType",callTC.getPropertyValue("ResponseTypeUserCreate"));

tC.setPropertyValue("Privilege",callTC.getPropertyValue("Privilege"));
tC.setPropertyValue("UserName",callTC.getPropertyValue("UserName"));
tC.setPropertyValue("userType",callTC.getPropertyValue("userType"));
tC.setPropertyValue("GivenName",callTC.getPropertyValue("GivenName"));
tC.setPropertyValue("SurName",callTC.getPropertyValue("SurName"));
tC.setPropertyValue("PrimaryEmail",callTC.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("Language1",callTC.getPropertyValue("Language1"));
tC.setPropertyValue("DisplayImageURL",callTC.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",callTC.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",callTC.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",callTC.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",callTC.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",callTC.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",callTC.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",callTC.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",callTC.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("MeetsAgeOfMajority",callTC.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",callTC.getPropertyValue("urnUser"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",callTC.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",callTC.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",callTC.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",callTC.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",callTC.getPropertyValue("ResourceStatus"));

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("NODE_ACCOUNT_ID", callTC.getPropertyValue("NODE_ACCOUNT_ID"));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL", callTC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("user_oid1",callTC.getPropertyValue("user_oid"));
tC.setPropertyValue("account_oid",callTC.getPropertyValue("account_oid"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Setting constants based on Geo Profile"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

/* Setting constants based on Geo Profile*/

if(tP.getPropertyValue("Country")=="US")
{
  tP.setPropertyValue("GeoProfile","US");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="CA")
{
  tP.setPropertyValue("GeoProfile","CA");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="GB")
{
  tP.setPropertyValue("GeoProfile","GB");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AU")
{
  tP.setPropertyValue("GeoProfile","AU");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="NZ")
{
  tP.setPropertyValue("GeoProfile","NZ");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="IE")
{
  tP.setPropertyValue("GeoProfile","IE");             
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AT")
{
  tP.setPropertyValue("GeoProfile","AT");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
else
if(tP.getPropertyValue("Country")=="DE")
{
  tP.setPropertyValue("GeoProfile","DE");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
  else
if(tP.getPropertyValue("Country")=="CH")
{
  tP.setPropertyValue("GeoProfile","CH");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="FR")
{
  tP.setPropertyValue("GeoProfile","FR");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("CHILD_MAX_AGE","17");
}

	def userType = tC.getPropertyValue("userType")
	log.info "userType: "+userType;
	
	switch(userType){
	
	case "ADULT":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("ADULT_MIN_AGE").toInteger()+1)*365);
	log.info "Adult DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTH":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("YOUTH_MIN_AGE").toInteger()+1)*365);
	log.info "YOUTH DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "CHILD":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("CHILD_MAX_AGE").toInteger()-1)*365);
	log.info "CHILD DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTPlus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "AdultPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTMinus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHPlus":
		
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob);
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "YOUTHMinus":
   	
   	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "ADULTToday":
	 
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHToday":

	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	default:
	log.info "userType is not matched!!"
	break;

	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("User_Create");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Create"><con:settings/><con:config service="Users" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User" methodName="UserCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Create" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<User UserClass="urn:dece:role:user:class:full" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
	<Name>
        	<GivenName>${#Project#UserName}</GivenName>
		<SurName>uvtc_user</SurName>
	</Name>	
	<ContactInfo>
        <PrimaryEmail>			
	 <Value>testing@uvvutesting.biz</Value>
        <!--<Value>sunitha.pemmasani@neustar.biz</Value>-->
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</PrimaryEmail>
	<AlternateEmail>			
        <Value>testing1@uvvutesting.biz</Value>			
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</AlternateEmail>
	<!--Address>
		<PostalAddress>45999 Center Oak Plaza</PostalAddress>
		<PostalCode>20166</PostalCode>
		<Locality>Sterling</Locality>
		<StateOrProvince>NJ</StateOrProvince>
                <Country>US</Country>
	</Address-->
	</ContactInfo>
        <!--Languages>
		<Language primary="true">en-GB</Language>	
	</Languages-->
       <!-- <DateOfBirth> depricated </DateOfBirth> -->
       <Credentials> 
               <Username>${#Project#UserName}</Username>	
                <Password>Password1</Password> 
	</Credentials>
<UserRecoveryTokens>
      <RecoveryItem>
		<QuestionID>1200</QuestionID>  
		<QuestionResponse>Turner</QuestionResponse>
       </RecoveryItem>
       <RecoveryItem>
		<QuestionID>1650</QuestionID>  
		<QuestionResponse>Phoenix</QuestionResponse>
       </RecoveryItem> 
</UserRecoveryTokens>
</User>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="dc7939c7-4e38-4936-ab5e-97a276c8b7cf"><con:configuration><scriptText/></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="AccountID" value="${#Project#NODE_ACCOUNT_ID_FULL}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract_Details"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('User_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 			
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate_Response"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = context.expand( '${#Project#Provision_HostName}' );
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');
def primaryEmail = context.expand( '${#TestCase#PrimaryEmail}');
//def nodetype      = tC.getPropertyValue("nodetype");

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/

if (context.expand( '${#Project#Query_HostName}' ).length() == 0) {
	errorHost = "http://error.decellc.org";
} else {
	errorHost = context.expand( '${#Project#Query_HostName}' );
}

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		//this.log.info "Hello";
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
		errorReason = "The supplied country code is invalid.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
		expectHTTPconnection = "close";
	break;

	case "NULL_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
		errorReason = "The country code cannot be null.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
		expectHTTPconnection = "close";
	break;
	
	case "API_NOT_AUTH":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
		errorReason = "API call not authorized";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserNotActive";
		errorReason = "User is not active";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
		errorReason = "Requesting User ID Not Specified";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
		expectHTTPconnection = "close";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;

		case "CANNOT_CREATE_FAU":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorPrivilegeInsufficientToCreateFullAccessUser";
		errorReason = "The user does not have permission to create a full-access user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorPrivilegeInsufficientToCreateFullAccessUser";
	break;
	
	case "CANNOT_CREATE_USER":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorNotAllowedToCreateUsers";
		errorReason = "The user does not have permission to create a user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorNotAllowedToCreateUsers";
	break;
	
	case "FIRST_USER_MUST_BE_ADULT":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBe18OrOlder";
		errorReason = "First User must be 18 years or older";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBe18OrOlder";
	break;


	case "NO_MNG_ACC_CNST":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The setting of the \"Manage Account Consent\" policy prevents the requested action from being completed.";
		errorID     = "urn:dece:errorid:org:dece:Policy:ManageAccountConsentRequired";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:ManageAccountConsentRequired";
	break;
	
	case "FIRST_USER_MUST_BE_FAU":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The first user in a household account must be a full-access user.";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBeCreatedWithFullAccessPrivilege";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBeCreatedWithFullAccessPrivilege";
	break;

	case "INVALID_PASSWORD":
	     expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorReason = "The password is not valid.";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPasswordNotValid";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPasswordNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_PRIMARY_EMAIL":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPrimaryEmailNotValid";
		errorReason = "The primary email address is not valid. - " + primaryEmail;
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPrimaryEmailNotValid";
		expectHTTPconnection = "close";
	break;
	
}

tC.setPropertyValue("expectHTTPstatus",expectHTTPstatus);


// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
//this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
/*
if (XMLbodynull) {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
} else {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}
*/
//Location Header

if (httpLocationHeader) {
	 assert context.expand( '${#TestCase#httpLocation}') != null;

      def a = context.expand( '${#TestCase#httpLocation}');
      def b = a.toURL();
      def urlStr = b.getPath();

      if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode")){
                                
         assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");
         
         int lastColon = urlStr.lastIndexOf(':');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 1);
         def node_User = urlStr.substring(lastSlash + 1);
                                           
         tP.setPropertyValue("NODE_USER_OID_FAU2",userid);

        tP.setPropertyValue("NODE_USER_ID_FAU2",node_User);

        // tC.setPropertyValue("NODE_USER_ID_FAU2",node_User);
         //tC.setPropertyValue("NODE_USER_ID_FULL1",node_User);
      } else {

         assert b.getPath().matches("/rest/$major/$minor/Account/urn%3Adece%3Aaccountid%3Aorg%3Adece%3A[0-9,A-F]*/User/urn%3Adece%3Auserid%3Aorg%3Adece%3A[0-9,A-F]*");
         int lastColon = urlStr.lastIndexOf('%3A');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 3);
         def node_User = urlStr.substring(lastSlash + 1);
                                
         tP.setPropertyValue("NODE_USER_OID_FAU2",userid);

        tP.setPropertyValue("NODE_USER_ID_FAU2",node_User);

        //tC.setPropertyValue("NODE_USER_ID_FAU2",node_User);
         //tC.setPropertyValue("NODE_USER_ID_FULL1",node_User);
       }
      }
                                

else {
                                
       	assert context.expand( '${#TestCase#httpLocation}') == "";
}


//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		log.info errorLink;
		log.info myXML.Error.ErrorLink.toString()
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract_Account_OID_and_User_OID"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def dbUser;

def expectHTTPstatus = tC.getPropertyValue("expectHTTPstatus");

if (expectHTTPstatus == "HTTP/1.1 201 Created")
     {  	
  		def dBHost = context.expand( '${#Project#targetsystem}' )
		
		try          {
		                dbUser = new dbUtils.dbUser(log,dBHost);
		                }
		catch(Throwable e) {
		                log.info "ERROR - dbUtils.dbUser - $e";
		                assert 1 == 2;
		                }
		finally {
		         try {
		                 String u = dbUser.userGetUserOID(tC.getPropertyValue("UserName"));
		                 String a = dbUser.userGetAccountOIDbyUsername(tC.getPropertyValue("UserName"))
		
		                 assert u.length() > 0;
		                 assert a.length() > 0;
		                 
		                 tC.setPropertyValue("user_oid", u);
		                 tC.setPropertyValue("account_oid", a);
		                 tP.setPropertyValue("E2E_AccountOID_FAU2", a);
		                 tP.setPropertyValue("E2E_UserOID_FAU2", u);	
		                }
		          catch(Throwable e) {
		                 log.info "ERROR - dbUtils.userGetUserOID - $e";
		                 assert 1 == 2;                     
		     		     }
				}
     }
     else
     {
     	log.info ("Can not retreive User_OID for a negative scenario");
     }
     

</script></con:config></con:testStep><con:testStep type="groovy" name="Return the Username and NodeUserId to the Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("NODE_USER_ID",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID1",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FAU2"));
//callTC.setPropertyValue("NODE_USER_ID_FULL2",tC.getPropertyValue("NODE_USER_ID_FULL1"));
callTC.setPropertyValue("UserName",tC.getPropertyValue("UserName"));
callTC.setPropertyValue("user_oid1",tC.getPropertyValue("user_oid"));
callTC.setPropertyValue("account_oid",tC.getPropertyValue("account_oid"));
callTC.setPropertyValue("DateOfBirth",tC.getPropertyValue("DateOfBirth"));</script></con:config></con:testStep><con:properties><con:property><con:name>AlternateEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>CLG_NODE_USER_ID</con:name><con:value/></con:property><con:property><con:name>coordinatorSchema</con:name><con:value>${#Project#coordinatorSchema}</con:value></con:property><con:property><con:name>Country</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">US</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1996-01-12</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FirstFullUsername</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>GivenName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489/User/urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>password</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Password1</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PrimaryEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">testing@uvvutesting.biz</con:value></con:property><con:property><con:name>PrimaryEmailConfirmationEndpoint</con:name><con:value>www.abc.com</con:value></con:property><con:property><con:name>Privilege</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">full</con:value></con:property><con:property><con:name>QuestionID</con:name><con:value>1200</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse</con:name><con:value>myname</con:value></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResponseType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E</con:value></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SurName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tName</con:name><con:value>Full_User2_Create_STS_Policies</con:value></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>userType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ADULT</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>user_oid</con:name><con:value>0C0CD559BA921E11E05305991F0AF489</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectHTTPstatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>ADULT_DOB_XML</con:name><con:value>1996-01-12</con:value></con:property><con:property><con:name>NODE_USER_OID_FAU2</con:name><con:value>E7E57BE9EF394CB1E0401F0A05996FDA</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU2</con:name><con:value>urn:dece:userid:org:dece:E7E57BE9EF394CB1E0401F0A05996FDA</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3d78db1c-105b-43a0-b406-6bb0f690c833</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>662fb201-c4e7-401c-b10a-548ea13f5020</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6afcd2ee-d125-48d3-86d9-0b8f90dcad31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="StandardUserCreate API" searchProperties="true" disabled="true" id="00279c8f-e69f-4354-8ec1-dd3a09c2a8d0"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties" disabled="true"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("userType",null);
tC.setPropertyValue("Privilege",null);
tC.setPropertyValue("UserName",null);
tC.setPropertyValue("GivenName",null);
tC.setPropertyValue("SurName",null);
tC.setPropertyValue("PrimaryEmail",null);
tC.setPropertyValue("Language1",null);
tC.setPropertyValue("DisplayImageURL",null);
tC.setPropertyValue("AlternateEmail",null);
tC.setPropertyValue("PostalAddress",null);
tC.setPropertyValue("PostalCode",null);
tC.setPropertyValue("Locality",null);
tC.setPropertyValue("StateOrProvince",null);
tC.setPropertyValue("Country",null);
tC.setPropertyValue("TelephoneNumber",null);
tC.setPropertyValue("MobileTelephoneNumber",null);
tC.setPropertyValue("MeetsAgeOfMajority",null);
tC.setPropertyValue("DateOfBirth",null);
tC.setPropertyValue("urnUser",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("QuestionID1",null);
tC.setPropertyValue("QuestionResponse1",null);
tC.setPropertyValue("QuestionID2",null);
tC.setPropertyValue("QuestionResponse2",null);
tC.setPropertyValue("ResourceStatus",null);

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("NODE_USER_ID",null);
tC.setPropertyValue("NODE_USER_ID_FULL",null);
tC.setPropertyValue("NODE_ACCOUNT_ID",null);
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
tC.setPropertyValue("user_oid1",null);
tC.setPropertyValue("account_oid",null);

tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpLocation",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("ResponseType",null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("ResponseType",callTC.getPropertyValue("ResponseTypeUserCreate"));

tC.setPropertyValue("Privilege",callTC.getPropertyValue("Privilege"));
tC.setPropertyValue("UserName",callTC.getPropertyValue("UserName"));
tC.setPropertyValue("userType",callTC.getPropertyValue("userType"));
tC.setPropertyValue("GivenName",callTC.getPropertyValue("GivenName"));
tC.setPropertyValue("SurName",callTC.getPropertyValue("SurName"));
tC.setPropertyValue("PrimaryEmail",callTC.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("Language1",callTC.getPropertyValue("Language1"));
tC.setPropertyValue("DisplayImageURL",callTC.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",callTC.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",callTC.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",callTC.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",callTC.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",callTC.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",callTC.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",callTC.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",callTC.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("MeetsAgeOfMajority",callTC.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",callTC.getPropertyValue("urnUser"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",callTC.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",callTC.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",callTC.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",callTC.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",callTC.getPropertyValue("ResourceStatus"));

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("NODE_ACCOUNT_ID", callTC.getPropertyValue("NODE_ACCOUNT_ID"));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL", callTC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("user_oid1",callTC.getPropertyValue("user_oid"));
tC.setPropertyValue("account_oid",callTC.getPropertyValue("account_oid"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Setting constants based on Geo Profile" disabled="true"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

/* Setting constants based on Geo Profile*/

if(tP.getPropertyValue("Country")=="US")
{
  tP.setPropertyValue("GeoProfile","US");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="CA")
{
  tP.setPropertyValue("GeoProfile","CA");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="GB")
{
  tP.setPropertyValue("GeoProfile","GB");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AU")
{
  tP.setPropertyValue("GeoProfile","AU");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="NZ")
{
  tP.setPropertyValue("GeoProfile","NZ");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="IE")
{
  tP.setPropertyValue("GeoProfile","IE");             
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AT")
{
  tP.setPropertyValue("GeoProfile","AT");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
else
if(tP.getPropertyValue("Country")=="DE")
{
  tP.setPropertyValue("GeoProfile","DE");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
  else
if(tP.getPropertyValue("Country")=="CH")
{
  tP.setPropertyValue("GeoProfile","CH");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="FR")
{
  tP.setPropertyValue("GeoProfile","FR");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("CHILD_MAX_AGE","17");
}

	def userType = tC.getPropertyValue("userType")
	log.info "userType: "+userType;
	
	switch(userType){
	
	case "ADULT":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("ADULT_MIN_AGE").toInteger()+1)*365);
	log.info "Adult DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTH":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("YOUTH_MIN_AGE").toInteger()+1)*365);
	log.info "YOUTH DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "CHILD":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("CHILD_MAX_AGE").toInteger()-1)*365);
	log.info "CHILD DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTPlus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "AdultPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTMinus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHPlus":
		
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob);
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "YOUTHMinus":
   	
   	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "ADULTToday":
	 
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHToday":

	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	default:
	log.info "userType is not matched!!"
	break;

	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("User_Create");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Create"><con:settings/><con:config service="Users" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User" methodName="UserCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Create" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<User UserClass="urn:dece:role:user:class:standard" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
	<Name>
        	<GivenName>${#Project#UserName}</GivenName>
		<SurName>uvtc_user</SurName>
	</Name>	
	<ContactInfo>
        <PrimaryEmail>			
	 <Value>testing@uvvutesting.biz</Value>
        <!--<Value>sunitha.pemmasani@neustar.biz</Value>-->
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</PrimaryEmail>
	<AlternateEmail>			
        <Value>testing1@uvvutesting.biz</Value>			
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</AlternateEmail>
	<!--Address>
		<PostalAddress>45999 Center Oak Plaza</PostalAddress>
		<PostalCode>20166</PostalCode>
		<Locality>Sterling</Locality>
		<StateOrProvince>NJ</StateOrProvince>
                <Country>US</Country>
	</Address-->
	</ContactInfo>
        <!--Languages>
		<Language primary="true">en-GB</Language>	
	</Languages-->
       <!-- <DateOfBirth> depricated </DateOfBirth> -->
       <Credentials> 
               <Username>${#Project#UserName}</Username>	
                <Password>Password1</Password> 
	</Credentials>
<UserRecoveryTokens>
      <RecoveryItem>
		<QuestionID>1200</QuestionID>  
		<QuestionResponse>Turner</QuestionResponse>
       </RecoveryItem>
       <RecoveryItem>
		<QuestionID>1650</QuestionID>  
		<QuestionResponse>Phoenix</QuestionResponse>
       </RecoveryItem> 
</UserRecoveryTokens>
</User>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="dc7939c7-4e38-4936-ab5e-97a276c8b7cf"><con:configuration><scriptText/></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="AccountID" value="${#Project#NODE_ACCOUNT_ID_FULL}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract_Details"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('User_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 			
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate_Response"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = context.expand( '${#Project#Provision_HostName}' );
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');
def primaryEmail = context.expand( '${#TestCase#PrimaryEmail}');
//def nodetype      = tC.getPropertyValue("nodetype");

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/

if (context.expand( '${#Project#Query_HostName}' ).length() == 0) {
	errorHost = "http://error.decellc.org";
} else {
	errorHost = context.expand( '${#Project#Query_HostName}' );
}

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		//this.log.info "Hello";
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
		errorReason = "The supplied country code is invalid.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
		expectHTTPconnection = "close";
	break;

	case "NULL_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
		errorReason = "The country code cannot be null.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
		expectHTTPconnection = "close";
	break;
	
	case "API_NOT_AUTH":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
		errorReason = "API call not authorized";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserNotActive";
		errorReason = "User is not active";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
		errorReason = "Requesting User ID Not Specified";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
		expectHTTPconnection = "close";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;

		case "CANNOT_CREATE_FAU":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorPrivilegeInsufficientToCreateFullAccessUser";
		errorReason = "The user does not have permission to create a full-access user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorPrivilegeInsufficientToCreateFullAccessUser";
	break;
	
	case "CANNOT_CREATE_USER":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorNotAllowedToCreateUsers";
		errorReason = "The user does not have permission to create a user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorNotAllowedToCreateUsers";
	break;
	
	case "FIRST_USER_MUST_BE_ADULT":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBe18OrOlder";
		errorReason = "First User must be 18 years or older";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBe18OrOlder";
	break;


	case "NO_MNG_ACC_CNST":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The setting of the \"Manage Account Consent\" policy prevents the requested action from being completed.";
		errorID     = "urn:dece:errorid:org:dece:Policy:ManageAccountConsentRequired";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:ManageAccountConsentRequired";
	break;
	
	case "FIRST_USER_MUST_BE_FAU":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The first user in a household account must be a full-access user.";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBeCreatedWithFullAccessPrivilege";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBeCreatedWithFullAccessPrivilege";
	break;

	case "INVALID_PASSWORD":
	     expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorReason = "The password is not valid.";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPasswordNotValid";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPasswordNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_PRIMARY_EMAIL":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPrimaryEmailNotValid";
		errorReason = "The primary email address is not valid. - " + primaryEmail;
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPrimaryEmailNotValid";
		expectHTTPconnection = "close";
	break;
	
}

tC.setPropertyValue("expectHTTPstatus",expectHTTPstatus);


// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
//this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
/*
if (XMLbodynull) {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
} else {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}
*/
//Location Header

if (httpLocationHeader) {
	 assert context.expand( '${#TestCase#httpLocation}') != null;

      def a = context.expand( '${#TestCase#httpLocation}');
      def b = a.toURL();
      def urlStr = b.getPath();

      if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode")){
                                
         assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");
         
         int lastColon = urlStr.lastIndexOf(':');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 1);
         def node_User = urlStr.substring(lastSlash + 1);
                                           
         tP.setPropertyValue("NODE_USER_OID_SAU",userid);

         tP.setPropertyValue("NODE_USER_ID_SAU",node_User);
        // tC.setPropertyValue("NODE_USER_ID_FULL1",node_User);
      } else {

         assert b.getPath().matches("/rest/$major/$minor/Account/urn%3Adece%3Aaccountid%3Aorg%3Adece%3A[0-9,A-F]*/User/urn%3Adece%3Auserid%3Aorg%3Adece%3A[0-9,A-F]*");
         int lastColon = urlStr.lastIndexOf('%3A');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 3);
         def node_User = urlStr.substring(lastSlash + 1);
                                
         tP.setPropertyValue("NODE_USER_OID_SAU",userid);

        tP.setPropertyValue("NODE_USER_ID_SAU",node_User);
         //tC.setPropertyValue("NODE_USER_ID_FULL1",node_User);
       }
      }
                                

else {
                                
       	assert context.expand( '${#TestCase#httpLocation}') == "";
}


//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		log.info errorLink;
		log.info myXML.Error.ErrorLink.toString()
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract_Account_OID_and_User_OID"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def dbUser;

def expectHTTPstatus = tC.getPropertyValue("expectHTTPstatus");

if (expectHTTPstatus == "HTTP/1.1 201 Created")
     {  	
  		def dBHost = context.expand( '${#Project#targetsystem}' )
		
		try          {
		                dbUser = new dbUtils.dbUser(log,dBHost);
		                }
		catch(Throwable e) {
		                log.info "ERROR - dbUtils.dbUser - $e";
		                assert 1 == 2;
		                }
		finally {
		         try {
		                 String u = dbUser.userGetUserOID(tC.getPropertyValue("UserName"));
		                 String a = dbUser.userGetAccountOIDbyUsername(tC.getPropertyValue("UserName"))
		
		                 assert u.length() > 0;
		                 assert a.length() > 0;
		                 
		                 tC.setPropertyValue("user_oid", u);
		                 tC.setPropertyValue("account_oid", a);
		                 tP.setPropertyValue("E2E_AccountOID_SAU1", a);
		                 tP.setPropertyValue("E2E_UserOID_SAU1", u);	
		                }
		          catch(Throwable e) {
		                 log.info "ERROR - dbUtils.userGetUserOID - $e";
		                 assert 1 == 2;                     
		     		     }
				}
     }
     else
     {
     	log.info ("Can not retreive User_OID for a negative scenario");
     }
     

</script></con:config></con:testStep><con:testStep type="groovy" name="Return the Username and NodeUserId to the Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("NODE_USER_ID",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID1",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
callTC.setPropertyValue("NODE_USER_ID_FULL1",tC.getPropertyValue("NODE_USER_ID_FULL1"));
callTC.setPropertyValue("UserName",tC.getPropertyValue("UserName"));
callTC.setPropertyValue("user_oid1",tC.getPropertyValue("user_oid"));
callTC.setPropertyValue("account_oid",tC.getPropertyValue("account_oid"));
callTC.setPropertyValue("DateOfBirth",tC.getPropertyValue("DateOfBirth"));</script></con:config></con:testStep><con:properties><con:property><con:name>AlternateEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>CLG_NODE_USER_ID</con:name><con:value/></con:property><con:property><con:name>coordinatorSchema</con:name><con:value>${#Project#coordinatorSchema}</con:value></con:property><con:property><con:name>Country</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">US</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1994-10-05</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FirstFullUsername</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>GivenName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_021929</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489/User/urn:dece:userid:org:dece:0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>password</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Password1</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PrimaryEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">testing@uvvutesting.biz</con:value></con:property><con:property><con:name>PrimaryEmailConfirmationEndpoint</con:name><con:value>www.abc.com</con:value></con:property><con:property><con:name>Privilege</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">full</con:value></con:property><con:property><con:name>QuestionID</con:name><con:value>1200</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse</con:name><con:value>myname</con:value></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResponseType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E</con:value></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SurName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_021929</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tName</con:name><con:value>Standard_User_Create_STS_Policies</con:value></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_021929</con:value></con:property><con:property><con:name>userType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ADULT</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>user_oid</con:name><con:value>0C0CD5584A6D3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectHTTPstatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>ADULT_DOB_XML</con:name><con:value>1994-10-05</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3d78db1c-105b-43a0-b406-6bb0f690c833</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>662fb201-c4e7-401c-b10a-548ea13f5020</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6afcd2ee-d125-48d3-86d9-0b8f90dcad31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="BasicUserCreate API" searchProperties="true" disabled="true" id="a915299d-504e-476c-a2fa-808d4f85b83e"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties" disabled="true"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("userType",null);
tC.setPropertyValue("Privilege",null);
tC.setPropertyValue("UserName",null);
tC.setPropertyValue("GivenName",null);
tC.setPropertyValue("SurName",null);
tC.setPropertyValue("PrimaryEmail",null);
tC.setPropertyValue("Language1",null);
tC.setPropertyValue("DisplayImageURL",null);
tC.setPropertyValue("AlternateEmail",null);
tC.setPropertyValue("PostalAddress",null);
tC.setPropertyValue("PostalCode",null);
tC.setPropertyValue("Locality",null);
tC.setPropertyValue("StateOrProvince",null);
tC.setPropertyValue("Country",null);
tC.setPropertyValue("TelephoneNumber",null);
tC.setPropertyValue("MobileTelephoneNumber",null);
tC.setPropertyValue("MeetsAgeOfMajority",null);
tC.setPropertyValue("DateOfBirth",null);
tC.setPropertyValue("urnUser",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("QuestionID1",null);
tC.setPropertyValue("QuestionResponse1",null);
tC.setPropertyValue("QuestionID2",null);
tC.setPropertyValue("QuestionResponse2",null);
tC.setPropertyValue("ResourceStatus",null);

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("NODE_USER_ID",null);
tC.setPropertyValue("NODE_USER_ID_FULL",null);
tC.setPropertyValue("NODE_ACCOUNT_ID",null);
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
tC.setPropertyValue("user_oid1",null);
tC.setPropertyValue("account_oid",null);

tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpLocation",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("ResponseType",null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("ResponseType",callTC.getPropertyValue("ResponseTypeUserCreate"));

tC.setPropertyValue("Privilege",callTC.getPropertyValue("Privilege"));
tC.setPropertyValue("UserName",callTC.getPropertyValue("UserName"));
tC.setPropertyValue("userType",callTC.getPropertyValue("userType"));
tC.setPropertyValue("GivenName",callTC.getPropertyValue("GivenName"));
tC.setPropertyValue("SurName",callTC.getPropertyValue("SurName"));
tC.setPropertyValue("PrimaryEmail",callTC.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("Language1",callTC.getPropertyValue("Language1"));
tC.setPropertyValue("DisplayImageURL",callTC.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",callTC.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",callTC.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",callTC.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",callTC.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",callTC.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",callTC.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",callTC.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",callTC.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("MeetsAgeOfMajority",callTC.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",callTC.getPropertyValue("urnUser"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",callTC.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",callTC.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",callTC.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",callTC.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",callTC.getPropertyValue("ResourceStatus"));

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("NODE_ACCOUNT_ID", callTC.getPropertyValue("NODE_ACCOUNT_ID"));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL", callTC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("user_oid1",callTC.getPropertyValue("user_oid"));
tC.setPropertyValue("account_oid",callTC.getPropertyValue("account_oid"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Setting constants based on Geo Profile" disabled="true"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

/* Setting constants based on Geo Profile*/

if(tP.getPropertyValue("Country")=="US")
{
  tP.setPropertyValue("GeoProfile","US");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="CA")
{
  tP.setPropertyValue("GeoProfile","CA");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","13");
  tP.setPropertyValue("CHILD_MAX_AGE","12");
}
else
if(tP.getPropertyValue("Country")=="GB")
{
  tP.setPropertyValue("GeoProfile","GB");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AU")
{
  tP.setPropertyValue("GeoProfile","AU");          
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="NZ")
{
  tP.setPropertyValue("GeoProfile","NZ");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="IE")
{
  tP.setPropertyValue("GeoProfile","IE");             
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
else
if(tP.getPropertyValue("Country")=="AT")
{
  tP.setPropertyValue("GeoProfile","AT");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
else
if(tP.getPropertyValue("Country")=="DE")
{
  tP.setPropertyValue("GeoProfile","DE");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","14");
  tP.setPropertyValue("CHILD_MAX_AGE","13");
}
  else
if(tP.getPropertyValue("Country")=="CH")
{
  tP.setPropertyValue("GeoProfile","CH");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("YOUTH_MIN_AGE","16");
  tP.setPropertyValue("CHILD_MAX_AGE","15");
}
  else
if(tP.getPropertyValue("Country")=="FR")
{
  tP.setPropertyValue("GeoProfile","FR");           
  tP.setPropertyValue("ADULT_MIN_AGE","18");
  tP.setPropertyValue("CHILD_MAX_AGE","17");
}

	def userType = tC.getPropertyValue("userType")
	log.info "userType: "+userType;
	
	switch(userType){
	
	case "ADULT":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("ADULT_MIN_AGE").toInteger()+1)*365);
	log.info "Adult DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTH":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("YOUTH_MIN_AGE").toInteger()+1)*365);
	log.info "YOUTH DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "CHILD":
	
	Date dob = (new Date());
	dob = dob - ((tP.getPropertyValue("CHILD_MAX_AGE").toInteger()-1)*365);
	log.info "CHILD DateOfBirth: "+dob.format('yyyy-MM-dd');
	tC.setPropertyValue("DateOfBirth",dob.format('yyyy-MM-dd'));
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTPlus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "AdultPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "ADULTMinus":
	
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHPlus":
		
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, -1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHPlus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob);
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "YOUTHMinus":
   	
   	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, +1);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHMinus DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("CHILD_DOB_XML",dob.format('yyyy-MM-dd')); 
	break;

	case "ADULTToday":
	 
	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear = today.get(Calendar.YEAR) - tP.getPropertyValue("ADULT_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "ADULTToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("ADULT_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	case "YOUTHToday":

	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
	Calendar today = Calendar.getInstance();
	int curYear1 = today.get(Calendar.YEAR)- tP.getPropertyValue("YOUTH_MIN_AGE").toInteger();
	int curMonth = today.get(Calendar.MONTH);
	int curDay = today.get(Calendar.DAY_OF_MONTH);

	if(curDay==29){
		curDay==28
		}

	Date now = new Date(curYear1-1900,curMonth,curDay);  
	Calendar calendar = Calendar.getInstance();
	calendar.setTime(now);  
	calendar.add(Calendar.DAY_OF_YEAR, 0);
	def dob = sdf.format(calendar.getTime());
	log.info "YOUTHToday DateOfBirth: "+dob;
	tC.setPropertyValue("DateOfBirth",dob); 
	tC.setPropertyValue("YOUTH_DOB_XML",dob.format('yyyy-MM-dd'));
	break;

	default:
	log.info "userType is not matched!!"
	break;

	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("User_Create");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Create"><con:settings/><con:config service="Users" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User" methodName="UserCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Create" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<User UserClass="urn:dece:role:user:class:basic" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
	<Name>
        	<GivenName>${#Project#UserName}</GivenName>
		<SurName>uvtc_user</SurName>
	</Name>	
	<ContactInfo>
        <PrimaryEmail>			
	 <Value>testing@uvvutesting.biz</Value>
        <!--<Value>sunitha.pemmasani@neustar.biz</Value>-->
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</PrimaryEmail>
	<AlternateEmail>			
        <Value>testing1@uvvutesting.biz</Value>			
        <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
	</AlternateEmail>
	<!--Address>
		<PostalAddress>45999 Center Oak Plaza</PostalAddress>
		<PostalCode>20166</PostalCode>
		<Locality>Sterling</Locality>
		<StateOrProvince>NJ</StateOrProvince>
                <Country>US</Country>
	</Address-->
	</ContactInfo>
        <!--Languages>
		<Language primary="true">en-GB</Language>	
	</Languages-->
       <!-- <DateOfBirth> depricated </DateOfBirth> -->
       <Credentials> 
               <Username>${#Project#UserName}</Username>	
                <Password>Password1</Password> 
	</Credentials>
<UserRecoveryTokens>
      <RecoveryItem>
		<QuestionID>1200</QuestionID>  
		<QuestionResponse>Turner</QuestionResponse>
       </RecoveryItem>
       <RecoveryItem>
		<QuestionID>1650</QuestionID>  
		<QuestionResponse>Phoenix</QuestionResponse>
       </RecoveryItem> 
</UserRecoveryTokens>
</User>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="dc7939c7-4e38-4936-ab5e-97a276c8b7cf"><con:configuration><scriptText/></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="AccountID" value="${#Project#NODE_ACCOUNT_ID_FULL}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract_Details"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('User_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 			
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate_Response"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = context.expand( '${#Project#Provision_HostName}' );
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');
def primaryEmail = context.expand( '${#TestCase#PrimaryEmail}');
//def nodetype      = tC.getPropertyValue("nodetype");

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/

if (context.expand( '${#Project#Query_HostName}' ).length() == 0) {
	errorHost = "http://error.decellc.org";
} else {
	errorHost = context.expand( '${#Project#Query_HostName}' );
}

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		//this.log.info "Hello";
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
		errorReason = "The supplied country code is invalid.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
		expectHTTPconnection = "close";
	break;

	case "NULL_COUNTRY":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
		errorReason = "The country code cannot be null.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
		expectHTTPconnection = "close";
	break;
	
	case "API_NOT_AUTH":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
		errorReason = "API call not authorized";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserNotActive";
		errorReason = "User is not active";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
		errorReason = "Requesting User ID Not Specified";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
		expectHTTPconnection = "close";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;

		case "CANNOT_CREATE_FAU":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorPrivilegeInsufficientToCreateFullAccessUser";
		errorReason = "The user does not have permission to create a full-access user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorPrivilegeInsufficientToCreateFullAccessUser";
	break;
	
	case "CANNOT_CREATE_USER":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorNotAllowedToCreateUsers";
		errorReason = "The user does not have permission to create a user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorNotAllowedToCreateUsers";
	break;
	
	case "FIRST_USER_MUST_BE_ADULT":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBe18OrOlder";
		errorReason = "First User must be 18 years or older";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBe18OrOlder";
	break;


	case "NO_MNG_ACC_CNST":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The setting of the \"Manage Account Consent\" policy prevents the requested action from being completed.";
		errorID     = "urn:dece:errorid:org:dece:Policy:ManageAccountConsentRequired";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:ManageAccountConsentRequired";
	break;
	
	case "FIRST_USER_MUST_BE_FAU":
	     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorReason = "The first user in a household account must be a full-access user.";
		errorID     = "urn:dece:errorid:org:dece:FirstUserMustBeCreatedWithFullAccessPrivilege";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBeCreatedWithFullAccessPrivilege";
	break;

	case "INVALID_PASSWORD":
	     expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		errorReason = "The password is not valid.";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPasswordNotValid";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPasswordNotValid";
		expectHTTPconnection = "close";
	break;

	case "INVALID_PRIMARY_EMAIL":
		expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountUserPrimaryEmailNotValid";
		errorReason = "The primary email address is not valid. - " + primaryEmail;
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountUserPrimaryEmailNotValid";
		expectHTTPconnection = "close";
	break;
	
}

tC.setPropertyValue("expectHTTPstatus",expectHTTPstatus);


// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
//this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
/*
if (XMLbodynull) {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
} else {
	//assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}
*/
//Location Header

if (httpLocationHeader) {
	 assert context.expand( '${#TestCase#httpLocation}') != null;

      def a = context.expand( '${#TestCase#httpLocation}');
      def b = a.toURL();
      def urlStr = b.getPath();

      if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode")){
                                
         assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");
         
         int lastColon = urlStr.lastIndexOf(':');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 1);
         def node_User = urlStr.substring(lastSlash + 1);
                                           
         tP.setPropertyValue("NODE_USER_OID_BAU",userid);

         tP.setPropertyValue("NODE_USER_ID_BAU",node_User);
        // tC.setPropertyValue("NODE_USER_ID_FULL1",node_User);
      } else {

         assert b.getPath().matches("/rest/$major/$minor/Account/urn%3Adece%3Aaccountid%3Aorg%3Adece%3A[0-9,A-F]*/User/urn%3Adece%3Auserid%3Aorg%3Adece%3A[0-9,A-F]*");
         int lastColon = urlStr.lastIndexOf('%3A');
         int lastSlash = urlStr.lastIndexOf('/');
         userid     = urlStr.substring(lastColon + 3);
         def node_User = urlStr.substring(lastSlash + 1);
                                
         tP.setPropertyValue("NODE_USER_OID_BAU",userid);

        tP.setPropertyValue("NODE_USER_ID_BAU",node_User);
         //tC.setPropertyValue("NODE_USER_ID_FULL1",node_User);
       }
      }
                                

else {
                                
       	assert context.expand( '${#TestCase#httpLocation}') == "";
}


//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		log.info errorLink;
		log.info myXML.Error.ErrorLink.toString()
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract_Account_OID_and_User_OID"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def dbUser;

def expectHTTPstatus = tC.getPropertyValue("expectHTTPstatus");

if (expectHTTPstatus == "HTTP/1.1 201 Created")
     {  	
  		def dBHost = context.expand( '${#Project#targetsystem}' )
		
		try          {
		                dbUser = new dbUtils.dbUser(log,dBHost);
		                }
		catch(Throwable e) {
		                log.info "ERROR - dbUtils.dbUser - $e";
		                assert 1 == 2;
		                }
		finally {
		         try {
		                 String u = dbUser.userGetUserOID(tC.getPropertyValue("UserName"));
		                 String a = dbUser.userGetAccountOIDbyUsername(tC.getPropertyValue("UserName"))
		
		                 assert u.length() > 0;
		                 assert a.length() > 0;
		                 
		                 tC.setPropertyValue("user_oid", u);
		                 tC.setPropertyValue("account_oid", a);
		                 tP.setPropertyValue("E2E_AccountOID_BAU1", a);
		                 tP.setPropertyValue("E2E_UserOID_BAU1", u);	
		                }
		          catch(Throwable e) {
		                 log.info "ERROR - dbUtils.userGetUserOID - $e";
		                 assert 1 == 2;                     
		     		     }
				}
     }
     else
     {
     	log.info ("Can not retreive User_OID for a negative scenario");
     }
     

</script></con:config></con:testStep><con:testStep type="groovy" name="Return the Username and NodeUserId to the Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("NODE_USER_ID",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID1",tC.getPropertyValue("NODE_USER_ID"));
callTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
callTC.setPropertyValue("NODE_USER_ID_FULL1",tC.getPropertyValue("NODE_USER_ID_FULL1"));
callTC.setPropertyValue("UserName",tC.getPropertyValue("UserName"));
callTC.setPropertyValue("user_oid1",tC.getPropertyValue("user_oid"));
callTC.setPropertyValue("account_oid",tC.getPropertyValue("account_oid"));
callTC.setPropertyValue("DateOfBirth",tC.getPropertyValue("DateOfBirth"));</script></con:config></con:testStep><con:properties><con:property><con:name>AlternateEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>CLG_NODE_USER_ID</con:name><con:value/></con:property><con:property><con:name>coordinatorSchema</con:name><con:value>${#Project#coordinatorSchema}</con:value></con:property><con:property><con:name>Country</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">US</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1994-09-29</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FirstFullUsername</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>GivenName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_021950</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489/User/urn:dece:userid:org:dece:0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:E71D3C4DD16B00D0E0401F0A05995914</con:value></con:property><con:property><con:name>password</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Password1</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PrimaryEmail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">testing@uvvutesting.biz</con:value></con:property><con:property><con:name>PrimaryEmailConfirmationEndpoint</con:name><con:value>www.abc.com</con:value></con:property><con:property><con:name>Privilege</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">full</con:value></con:property><con:property><con:name>QuestionID</con:name><con:value>1200</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse</con:name><con:value>myname</con:value></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResponseType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E</con:value></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SurName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_021950</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tName</con:name><con:value>Basic_User_Create_STS_Policies</con:value></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>UserName</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">userget_firstuser20150107_021950</con:value></con:property><con:property><con:name>userType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ADULT</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>user_oid</con:name><con:value>0C0C9E8C6AD23F75E05307991F0A8176</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectHTTPstatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>ADULT_DOB_XML</con:name><con:value>1994-09-29</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3d78db1c-105b-43a0-b406-6bb0f690c833</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>662fb201-c4e7-401c-b10a-548ea13f5020</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6afcd2ee-d125-48d3-86d9-0b8f90dcad31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS_API" searchProperties="true" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true" id="18545b99-73a4-4062-9d41-ed00789b7188">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("tokentype",null);
tC.setPropertyValue("audience",null);
tC.setPropertyValue("username",null);
tC.setPropertyValue("password",null);

tC.setPropertyValue("expectErrType","SUCCESS");</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def dbUtils;

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
def callTS = tP.getTestSuiteByName(callTSname);

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("username",callTC.getPropertyValue("UserName"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));

if( tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("tokentype",tP.getPropertyValue("urntokenType_userpassword"));
	tP.setPropertyValue("audience","urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdRTLCS")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdAccportal")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdAccportalCS")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDLASP")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDLASPCS")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdLLASPCS")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDSP")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDSPCS")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdCoo")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdCoordCS")+";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdCON")+";")
}
else
{
	tC.setPropertyValue("tokentype",URLEncoder.encode(tP.getPropertyValue("urntokenType_userpassword"), "UTF-8"));
	tP.setPropertyValue("audience","urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdRTLCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdAccportal")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdAccportalCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDLASP")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDLASPCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdLLASPCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDSP")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDSPCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdCoo")+";urn%3Adece%3Aorg%3Aorg%3Adece%3Acoord%3Acs;"+"urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdCON")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdCONCS")+";")
}

	</script></con:config>
      </con:testStep>
      
      
      
      
      <con:testStep type="groovy" name="Establish pem">
        <con:settings/>
        <con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("POST - STS");
RestTestRequestStep testStep1 = testCase.getTestStepByName("GET - STS");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep1, keyStorePath);

</script></con:config>
      </con:testStep>
      
      <con:testStep type="restrequest" name="POST - STS"><con:settings/><con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange" methodName="STSCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS" mediaType="application/xml" postQueryString="false" accept="" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="audience" value="${#Project#audience}"/>
  <con:entry key="tokentype" value="${#TestCase#tokentype}"/>
</con:parameters></con:restRequest></con:config></con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def tStep = tC.getTestStepByName('POST - STS');

tC.setPropertyValue("status", null);
tC.setPropertyValue("connection", null);
tC.setPropertyValue("contentType", null);
tC.setPropertyValue("contentLength", null);
tC.setPropertyValue("contentLocation", null);
/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("V1");
String minor = tP.getPropertyValue("V2");

tP.setPropertyValue("targetURL","qa.p.uvvu.com:7001");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("status", status);
tC.setPropertyValue("connection", connection);
tC.setPropertyValue("contentType", contentType);
tC.setPropertyValue("contentLength", contentLength);
tC.setPropertyValue("contentLocation", contentLocation);

this.log.info "contentLength [$contentLength]";
this.log.info "status [$status]";
this.log.info "contentType [$contentType]";
this.log.info "contentLocation [$contentLocation]";

/*
 *if (contentLength.toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
     rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);

     int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
  
	String XMLbody  = strVal.substring(startAssert, strVal.length());
     
	tC.setPropertyValue("XMLbody", XMLbody);
}
*/</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract ERROR table information" disabled="true">
        <con:settings/>
        <con:config>
          <script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def a = new dbUtils.dbErrors(log,tP.getPropertyValue("targetSystem"));

tC.setPropertyValue("errorStatusCode",null);
tC.setPropertyValue("errorReason",null);
tC.setPropertyValue("errorID",null);

String xmlData = "";
String errId = "";

log.info "expectErrType[" + tC.getPropertyValue("expectErrType") + "]";

switch (tC.getPropertyValue("expectErrType")) {
	case "ADULT_CONTENT_NOT_ALLOWED":
		errId = "Policy:AdultContentNotAllowed";
		break;
	case "ACCOUNT_NOT_ACTIVE":
		errId = "AccountNotActive";
		break;
	case "API_NOT_AUTH":
		errId = "Security:RoleInvalid";
		break;
	case "BLOCKED_ACCESS_UNRATED":
		errId = "Policy:UnratedContentBlocked";
		break;
	case "CID_NOT_ACTIVE":
		errId = "ContentIDNotActive";
		break;
	case "CID_NOT_FOUND":
		errId = "ContentIDNotFound";
		break;
	case "LOGICAL_ASSET_NOT_ACTIVE":
		errId = "AssetLogicalIDNotActive";
		break;
	case "RT_RENT_EXPIRED":
		errId = "RightsTokenRentalExpired";
		break;
	case "RT_NOT_FOUND":
		errId = "RightsTokenNotFound";
		break;
	case "RT_NOT_ACTIVE":
		errId = "RightsTokenNotActive";
		break;
	case "RATING_POLICY":
		errId = "RatingPolicyExists";
		break;
	case "CID_NOT_GRANTED":
	case "STREAM_RIGHTS_NOT_GRANTED":
		errId = "StreamRightsNotGranted";
		break;
	case "STREAM_COUNT_EXCEEDED":
		errId = "AccountStreamCountExceedMaxLimit";
		break;
	case "STREAM_COUNT_EXCEEDED_USER":
		errId = "UserStreamCountExceedMaxLimit";
		break;
	case "STREAM_INVALID_TRANS":
		errId = "StreamTransactionIdInvalid";
		break;
	case "STREAM_ACCOUNTID_MISMATCH":
		errId = "AccountIdUnmatched";
		break;		
	case "STREAM_NICKNAME_TOO_LONG":
		errId = "StreamClientNicknameTooLong";
		break;		
	case "STREAM_WINDOW_NOT_ALLOWED":
		errId = "StreamAssetWindowNotAllowed";
		break;
	case "STREAM_OWNER_MISMATCH":
		errId = "StreamOwnerMismatch";
		break;
	case "STREAM_NOT_FOUND":
		errId = "StreamNotFound";
		break;
	case "STREAM_NOT_ACTIVE":
		errId = "StreamNotActive";
		break;
	case "USER_NOT_MATCH_TOKEN":
		errId = "UserIdUnmatched";
		break;
	case "USER_NOT_ACTIVE":
		errId = "UserNotActive";
		break;
	case "USER_NOT_SUPPLIED":
		errId = "UserNotSpecified";
		break;
}

try {
	xmlData = a.errGetIdInfo(errId);
	
	assert xmlData.trim().length() > 1;

	def myXML = new XmlSlurper().parseText(xmlData);

	log.info myXML.ResultSet.Row.size();
	tC.setPropertyValue("errorStatusCode", myXML.ResultSet.Row[0].STATUS_CODE.toString());
	tC.setPropertyValue("errorReason", myXML.ResultSet.Row[0].REASON.toString());
	tC.setPropertyValue("errorID", myXML.ResultSet.Row[0].ERROR_ID.toString());

	/*
	*  The DB does not contain the complete HTTP status
	*  string, only the code.  Thus, we must adjust.
	*/
	switch (tC.getPropertyValue("errorStatusCode")) {
		case "400":
			tC.setPropertyValue("errorStatusCode","HTTP/1.1 400 Bad Request");
			break;
		case "403":
			tC.setPropertyValue("errorStatusCode","HTTP/1.1 403 Forbidden");
			break;
		case "404":
			tC.setPropertyValue("errorStatusCode","HTTP/1.1 404 Not Found");
			break;
		case "409":
			tC.setPropertyValue("errorStatusCode","HTTP/1.1 409 Conflict");
			break;
	}
}
catch (Throwable e) {
	log.info "STEP FAILURE! --- " + e;
}</script>
        </con:config>
      </con:testStep>
      
      <con:testStep type="groovy" name="Verify Response Body and Headers and save assertion">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//def url           = tP.getPropertyValue("targetURL");
//def urnacct       = tP.getPropertyValue("urnaccount");
//def urnstream     = tP.getPropertyValue("urnstream");
def expectErrType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");
def nodeaccountid = tC.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
//String orgRequest  = url + "/dece/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = true;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("status");
//assert tC.getPropertyValue("status") == expectHTTPstatus;

// Connection
log.info "doConnectionClose=="+doConnectionClose;
if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("connection");
	assert tC.getPropertyValue("connection") == expectHTTPconnection;
}
/*
//Content-Length
if (contentLengthZero) {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
} else {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
}
*/	
//Content-Type
if (doContentTypeHeader) {
	assert tC.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
log.info "doContentLocaton=="+doContentLocaton;
if (doContentLocaton) {
	assert tC.getPropertyValue("contentLocation") != null;
	
	def b = tC.getPropertyValue("contentLocation").toURL();
	log.info "Path=="+b.getPath();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[_,0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	tC.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	//assert tC.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.saml2:Assertion.size() == 1;
		assert myXML.ds:Signature.size()    == 1;
		assert myXML.ds:SignedInfo.size()   == 1;
		assert myXML.ds:DigestValue.size()  == 1;
		assert myXML.ds:SignatureValue.size()  == 1;
		assert myXML.ds:X509Certificate.size() == 1;
		assert myXML.saml2:NameID.size()    == 1;
		assert myXML.saml2:AudienceRestriction.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
	}
}</script></con:config>
      </con:testStep>
      
      
      
      
      
      
      
      
      
      
      <con:testStep type="groovy" name="Return the assertion information to the Calling Test Case">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",null);
callTC.setPropertyValue("assertionUUID1",null);
callTC.setPropertyValue("assertionUUID",tC.getPropertyValue("assertionUUID"));
callTC.setPropertyValue("assertionUUID1",tC.getPropertyValue("assertionUUID"));</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="GET - STS"><con:settings/><con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{assertionUUID}" methodName="STSGet" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - STS" mediaType="application/xml" sslKeystore="RET_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="assertionUUID" value="${#TestCase#assertionUUID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers 1">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def tStep  = tC.getTestStepByName('GET - STS');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("V1");
String minor = tP.getPropertyValue("V2");
String XMLbody = "";

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();

rawResp = new ByteArrayOutputStream();

rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
log.info  "startAssert: "+startAssert;

if (startAssert > 0) {
	XMLbody  = strVal.substring(startAssert, strVal.length());
}

tC.setPropertyValue("XMLbody", XMLbody);
tC.setPropertyValue("status", status);
tC.setPropertyValue("connection", connection);
tC.setPropertyValue("contentType", contentType);
tC.setPropertyValue("contentLength", contentLength);
tC.setPropertyValue("contentLocation", contentLocation);
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Extract Key Elements from &lt;Assertion> Body">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def XMLbody = tC.getPropertyValue("XMLbody");
def expectErrType = tC.getPropertyValue("expectErrType");

int lastColon = 0;
int lastSlash = 0;

if (expectErrType == "" || expectErrType == "SUCCESS") {
	tC.setPropertyValue("SAML",null);
	tC.setPropertyValue("NODE_ACCOUNT_ID",null);
	tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
	tC.setPropertyValue("NODE_USER_ID",null);
	tC.setPropertyValue("NODE_USER_ID_FULL",null);
	
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion");

			// Verify response sizes...
			assert myXML.size() == 1;

			def accountId = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			def userId    = myXML."saml2:Subject"."saml2:NameID";
			def NotBefore = myXML."saml2:Conditions".@NotBefore.text();
			def NotOnOrAfter = myXML."saml2:Conditions".@NotOnOrAfter.text();
			def AudienceRestriction = myXML."saml2:Conditions".AudienceRestriction;
			
			this.log.info "accountId [$accountId]";
			this.log.info "userId [$userId]";
			this.log.info "NotBefore [$NotBefore]";
			this.log.info "NotOnOrAfter [$NotOnOrAfter]";
			this.log.info "AudienceRestriction [$AudienceRestriction]";
						
			//tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",accountId.toString());
			//tC.setPropertyValue("NODE_USER_ID_FULL",userId.toString());
			tC.setPropertyValue("assertionNotBefore",NotBefore.toString());
			tC.setPropertyValue("assertionNotOnOrAfter",NotOnOrAfter.toString());
			tC.setPropertyValue("assertionAudienceRestriction",NotBefore.toString());
			tC.setPropertyValue("NODE_ACCOUNT_ID",accountId.toString().substring(accountId.toString().lastIndexOf(':') + 1).toString());
			tC.setPropertyValue("NODE_USER_ID",userId.toString().substring(userId.toString().lastIndexOf(':') + 1).toString());
			
			if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
			{
                    tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",accountId.toString());
				tC.setPropertyValue("NODE_USER_ID_FULL",userId.toString());
        	     } 
        	     else 
        	     {
				tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",URLEncoder.encode(accountId.toString()));
				tC.setPropertyValue("NODE_USER_ID_FULL",URLEncoder.encode(userId.toString()));        	     	
		     }
	} 
	else {
		return false;
	}
}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//def url           = tP.getPropertyValue("targetURL");
//def urnacct       = tP.getPropertyValue("urnaccount");
//def urnstream     = tP.getPropertyValue("urnstream");
def expectErrType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");
def nodeaccountid = tC.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String orgRequest  = url + "/dece/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 200 OK";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("status");
//assert tC.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("connection");
	assert tC.getPropertyValue("connection") == expectHTTPconnection;
}
/*
//Content-Length
if (contentLengthZero) {
	assert tC.getPropertyValue("contentLength").toInteger() == 0;
} else {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
}
*/	
//Content-Type
if (doContentTypeHeader) {
	assert tC.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert tC.getPropertyValue("contentLocation") != null;
	
	def b = tC.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/dece/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	tC.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert tC.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.saml2:Assertion.size() == 1;
		assert myXML.ds:Signature.size()    == 1;
		assert myXML.ds:SignedInfo.size()   == 1;
		assert myXML.ds:DigestValue.size()  == 1;
		assert myXML.ds:SignatureValue.size()  == 1;
		assert myXML.ds:X509Certificate.size() == 1;
		assert myXML.saml2:NameID.size()    == 1;
		assert myXML.saml2:AudienceRestriction.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
/*
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
		*/
	} else {
		return false;
	}
}



</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>">
        <con:settings/>
        <con:config><script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
import java.lang.*;

import org.opensaml.xml.util.Base64;

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)


int compressedLength = 0;
//String XMLbody = tC.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = tC.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");


String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
tC.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);

byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);
// finally, URL encode it
tC.setPropertyValue("SAML", "SAML2 Assertion="+base64encodeStr);


</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Return extracted Properties back to calling Test Case">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

String acctID = tC.getPropertyValue("NODE_ACCOUNT_ID");
String userID = tC.getPropertyValue("NODE_USER_ID");

//tP.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
callTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
callTC.setPropertyValue("assertionUUID",tC.getPropertyValue("assertionUUID"));

if (acctID != null &amp;&amp; acctID.length() > 0) {
	
	callTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
	//callTC.setPropertyValue("NODE_ACCOUNT_ID1",tC.getPropertyValue("NODE_ACCOUNT_ID"));
	callTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
	//callTC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
} else {
	callTC.setPropertyValue("assertionAccountId","ERROR");
}
if (userID != null &amp;&amp; userID.length() > 0) {
	callTC.setPropertyValue("NODE_USER_ID",tC.getPropertyValue("NODE_USER_ID"));	
	//callTC.setPropertyValue("NODE_USER_ID1",tC.getPropertyValue("NODE_USER_ID"));
	callTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
	//tP.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
	//callTC.setPropertyValue("NODE_USER_ID_FULL1",tC.getPropertyValue("NODE_USER_ID_FULL"));
} else {
	callTC.setPropertyValue("assertionUserId","ERROR");
}</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      <con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>tName</con:name><con:value>Full_User2_Create_STS_Policies</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>audience</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>username</con:name><con:value>userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>status</con:name><con:value>HTTP/1.1 200 OK</con:value></con:property><con:property><con:name>connection</con:name><con:value>close</con:value></con:property><con:property><con:name>contentType</con:name><con:value>text/xml;charset=UTF-8</con:value></con:property><con:property><con:name>contentLength</con:name><con:value>3441</con:value></con:property><con:property><con:name>contentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>errorStatusCode</con:name><con:value/></con:property><con:property><con:name>errorReason</con:name><con:value/></con:property><con:property><con:name>errorID</con:name><con:value/></con:property><con:property><con:name>assertionUUIDprior</con:name><con:value>_732606f9-3702-470e-9ecf-2bbb514a18ba</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_2619ac58-12e7-4888-a037-e90f72c0de1d</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" ID="_2619ac58-12e7-4888-a037-e90f72c0de1d" IssueInstant="2015-01-07T08:48:30.769Z" Version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"><saml2:Issuer>http://c.decellc.com/</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference URI="#_2619ac58-12e7-4888-a037-e90f72c0de1d"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"><ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="xs"/></ds:Transform></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>VCf6MLIYqdBnBefNFHheUnB5Lx0=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>YQZ37U6AgA6siC/cnsgAzkyKbvBIxFd4LMu8zSfyEWVI2dNfTkJ+MKgnFjSMy6XB0UsJfejQSpaSxnQkhbyCgL1WttGYq8H+oNgSc/5KBchRXbqF8omZS+KFbjofHvmrUN4AhppRUkEBEWZnQjeYStkuPokOU82sWomh/Q7j/Ec=</ds:SignatureValue></ds:Signature><saml2:Subject><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:sender-vouches"><saml2:SubjectConfirmationData InResponseTo="_1y1mcxrydf2y43plokgbfjfiy" NotOnOrAfter="2015-01-07T11:48:30.769Z" Recipient="https://stdecqavutl1.va.neustar.com:2485/simplesaml/module.php/saml/sp/saml2-acs.php/RET"/></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions NotBefore="2015-01-07T08:48:20.769Z" NotOnOrAfter="2015-01-07T14:48:30.769Z"><saml2:AudienceRestriction><saml2:Audience>urn:dece:org:org:dece:ACCESCS</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:ACCESS</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:COO</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:DLASP</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:DLASP_CS_1</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:DSP</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:DSP_CS_1</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:LLASP_CS_1</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:RET_CS_1</saml2:Audience><saml2:Audience>urn:dece:org:org:dece:RET</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions><saml2:Advice><saml2:AssertionURIRef>https://p.q.uvvu.com:7001/rest/2015/02/SecurityToken/Assertion/_2619ac58-12e7-4888-a037-e90f72c0de1d</saml2:AssertionURIRef></saml2:Advice><saml2:AuthnStatement AuthnInstant="2015-01-07T08:48:30.769Z" SessionIndex="_2619ac58-12e7-4888-a037-e90f72c0de1d"><saml2:AuthnContext><saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef><saml2:AuthenticatingAuthority>urn:dece:org:org:dece:coordinator</saml2:AuthenticatingAuthority></saml2:AuthnContext></saml2:AuthnStatement><saml2:AttributeStatement><saml2:Attribute Name="accountID" NameFormat="urn:dece:type:accountID"><saml2:AttributeValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</saml2:AttributeValue></saml2:Attribute></saml2:AttributeStatement></saml2:Assertion>]]></con:value></con:property><con:property><con:name>username1</con:name><con:value>firstuser20130726_035156</con:value></con:property><con:property><con:name>SAML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVbrbuI8EH0VlP25CrkUCkQFKQT4li30Qkq77Z9VcCbBkNhp7FDo068dIAuU9mNbCQl5Mpcz4+OZuWBeHJmWzRikHFNSWsYRYVYubSpZSizqMcws4sXALI4s1x4OLLOsW97WRCn1O03lt3luNDxUrauGCTW1Uq/XVU8/q6nQ0IOaiXQfDF+oMpZBnzDuEd5UTN2oqrqh6rU7vW5V6taZXq6dN56U0j2kTPgWKmVd2YBasqYy5TyxNO3l5aX8clamaaiZum5ov4YDF00h9pTWxTqjPFDa2uijsg8IogiVEY21C21P58JnlotD4vEshU0s/71YuqY3NKHjMxx+Uwpb8PskoPnR8QglGHkRfvVkfYbAp9Qv2VFIU8yn8btJGLp0rMISqciokG+Ktg/tREd7CFPmqWzqGRtfIwggBYKgNB71m8q3024tN71LPcICmsZs//hveIAsIKIJ+CrbprWBdrrDI5VqXQCy+gRFGcMLuJJkTTwEbHObgE53VbpJIcDLAWaCoEsm0Wm78A6O62p0cAiMf+aCdi5n7eTeizJo3TvB+XDQf3z226QNwVXvxxTGpF0dLPVmDmBXORcUV7s+HpCyINHa4vH26aw2PrdD+5xhR0OEhfbrfHU5WbT7y55fGQyz+qsbrLoP933Tvwru5j+/Dy9D0pu5w9X5r7Y+Zj8DmN26iecuye18Olk54cB44Py/x+f6j+/0KnSRVr1so+no1+S5V6fxk/v9sjeZ0eDHIk7HVxV7miSj8bzb7j48kdsZPLp8nt3Q+fW4brIHGk+129pM66Jmkc4O/n3Z9s272WQGiG+Pkgb9TqknbsnjHzczKcG+GuSqViKbD+NAuNKSVrJ3WJlod9i3xB2uz7qjO51qtdG2G4bRFT+9eqZXGw2jp9u9Sr2xbTJrFAcQHUoCLGPJlrumzccAUWwxID6k6oJmotMx5QOPHY97pT4ZiUdACYM7KtqzsTJitExXfmCuKmdJROfhJJgFeKWUrii/JtepHXBI93qyYez15BEgnGCQjVvymgliMy5q8ewtMh4Z5YVXJpCJ1p7KLmuZlXpVYzhOIpBItZj6WQTlZJrkldHY+t9UPcRy6ah7l7+2d/M6/LYtgdDxsVRgMhfxXGgKR4aLuU3k/YQruwlv3duZj+XDEvXkKUZrJPuf/tJE8qPgiO04Xddxt7AL7X+w/qyxc339ScvOwHZvvmL723F/G5918PnQXws8+Cpywd4vmr+11D4goHbI/SKQv8A7Ybdrmhj4YkS0ti83KT+Xs8Uiy59qTU7CVHjX5GPQdFNzAWVihq3u6ByIVjjRTloYCtwHsQv5PsKMT4nLPQ6x6C2l/HjChugCkxtiXzTF5anr515IUTkOS35M5kRiu5WIP1yAkYWknhDfiL8Xmv5N/JivnTgiT7EgckxCeZLLwuodWiAq3GIx5mi66/yYg2PB94VFkQssXPBpknF4/0tJzq+m4iFEM8L7HSUX7M7UHCdfJWD9VXrjJh/bxR6P/3+RV3FOAQRi+2c49y/XMUu+ABLuzOVN0KOjuaE3PhrN++hab8RvJTt1OuR46w8=</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>assertionNotBefore</con:name><con:value>2015-01-07T08:48:20.769Z</con:value></con:property><con:property><con:name>assertionNotOnOrAfter</con:name><con:value>2015-01-07T14:48:30.769Z</con:value></con:property><con:property><con:name>assertionAudienceRestriction</con:name><con:value>2015-01-07T08:48:20.769Z</con:value></con:property><con:property><con:name>assertId</con:name><con:value>_2619ac58-12e7-4888-a037-e90f72c0de1d</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>555384c9-6fa2-448b-a38e-713264e945f2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="SetPem" searchProperties="true" disabled="true" id="5a828514-81da-4235-a910-9cecdae87657"><con:settings/><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import org.apache.commons.lang.SystemUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 

import com.eviware.soapui.settings.SSLSettings
import com.eviware.soapui.SoapUI
def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath

def eNV = context.expand( '${#Project#ENV}' )

def propertiesPath = null;

if (System.properties['os.name'].toLowerCase().contains('windows')) 
	{
    		log.info "it's Windows OS!!";
    		File temp = new File( projectPath + "\\..\\..\\..\\Properties\\");
    		propertiesPath = temp.getCanonicalPath();
	} 
else 
	{
    		log.info "it's Linux OS!!";
    		File temp = new File(projectPath + "/../../../Properties/");
    		propertiesPath = temp.getCanonicalPath();
	}
	
log.info("Properties File Location : '" + propertiesPath+ "'");




def propMap=[:]
BufferedReader reader = new BufferedReader(new FileReader(propertiesPath + "/" + eNV +"project.properties"));

String line;
while ((line = reader.readLine()) != null)
      {
	       if (line.trim().length()==0) continue;
	       if (line.charAt(0)=='#') continue;
	
	       int delimPosition = line.indexOf("=");
	       String key = line.substring(0, delimPosition-0).trim();
	       String value = line.substring(delimPosition+1).trim();
	       propMap.put(key, value);
      }


if (System.properties['os.name'].toLowerCase().contains('windows')) 
      {
            log.info "it's Windows OS!!!";
            File temp = new File( projectPath + "\\..\\..\\..\\Certs\\" + eNV + "\\");
    		  certPath = temp.getCanonicalPath();      
      } 
else 
      {
            log.info "it's Linux OS!!!";
            File temp = new File(projectPath + "/../../../Certs/" + eNV + "/");
    		  certPath = temp.getCanonicalPath();
      }  
      
 log.info("Cert path: " + certPath );  
                  
def nodeId = context.expand( '${#Project#nodeid}' )

log.info "nodeId: "+nodeId;

 if (nodeId == "dece:cs")
       {
             nodeId = "dececs";
       }
 else if (nodeId == "coord:cs")
       {
             nodeId = "coordcs";
       }
 else
       {
             nodeId = nodeId;
       }


//log.info "~~~~~~~~~~~~" +nodeId
boolean imFine = true;
def pwd = null;
def certMatchesNodeID = context.expand( '${#Project#CertMatchesNodeID}' )
log.info("CertMatchesNodeID : '" + certMatchesNodeID + "'");
if (certMatchesNodeID == "YES")
{
		File f1 = new File(certPath+"/"+nodeId + "_concat.pem");
		File f2 = new File(certPath+"/"+nodeId + ".jks");
		File f3 = new File(certPath+"/truststore-"+nodeId + ".jks");
		File f4 = new File(certPath+"/"+nodeId + ".pem");

		log.info("F1 : '" + f1.getPath()+ "'");
		log.info("F2 : '" + f2.getPath()+ "'");
		log.info("F3 : '" + f3.getPath()+ "'");
		log.info("F4 : '" + f4.getPath()+ "'");
	
	// sets the certificate from the specific folder when the certname and NodeId are same
	  if(f1.exists()) 
             {
                   keyStorePath = certPath+"/"+nodeId + "_concat.pem";
                   pwd = "123"
                   log.info("F1 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");      
             }
	  else if(f2.exists())
             {
                  	keyStorePath = certPath+"/"+nodeId + ".jks";
                   	pwd = "abcd1234" 
                   	log.info("F2 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");          
             }
	  else if(f3.exists())
             {
                  	keyStorePath = certPath+"/truststore-"+nodeId + ".jks";
                   	pwd = "12elma";
				log.info("F3 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");
             }
	  else if(f4.exists()) 
             {
                   	keyStorePath = certPath+"/"+nodeId + ".pem";
                   	pwd = "123";
                   	log.info("F4 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");       
             }
	  else
             {
                  	log.info "No cert file is Found!!!";
                  	imFine = false;
             }
}
else
{
	//to get the certificate name from another property based on the nodeid property.
		
	
       def value = propMap.find{ it.value == nodeId }?.key
       def certName = testProject.getPropertyValue(value+"_cert");       
       log.info "cert name .... " + certName;

		File f1 = new File(certPath+"/"+certName + "_concat.pem");
		File f2 = new File(certPath+"/"+certName + ".jks");
		File f3 = new File(certPath+"/truststore-"+certName + ".jks");
		File f4 = new File(certPath+"/"+certName + ".pem");

		log.info("F1 : '" + f1.getPath()+ "'");
		log.info("F2 : '" + f2.getPath()+ "'");
		log.info("F3 : '" + f3.getPath()+ "'");
		log.info("F4 : '" + f4.getPath()+ "'");      
		     
       if(f1.exists()) 
             {
             		
				keyStorePath = certPath+"/"+certName + "_concat.pem";
				pwd = "123";
				log.info("F1 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");     
             }
       else if(f2.exists())
             {
				keyStorePath = certPath+"/"+certName + ".jks";
				pwd = "abcd1234";
				log.info("F2 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");           
             }
       else if(f3.exists())
             {
                  	keyStorePath = certPath+"/truststore-"+certName + ".jks";
                   	pwd = "abcd1234";
                   	log.info("F3 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");
                   	         
             }
       else if(f4.exists()) 
             {
				keyStorePath = certPath+"/"+certName + ".pem";
				pwd = "123";  
				log.info("F4 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");     
             }
       else
			{
			log.info "No cert file is Found!!!";
			imFine = false;
			}                             
}


if(imFine)
{
      def callTSname = testCase.getPropertyValue("sName");
      def callTCname = testCase.getPropertyValue("tName");
      
      def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
      
      callTC.setPropertyValue("keyStorePath","$keyStorePath");
      testCase.setPropertyValue("keyStorePath","$keyStorePath");
      
      SoapUI.settings.setString( SSLSettings.KEYSTORE, keyStorePath );
      SoapUI.settings.setString( SSLSettings.KEYSTORE_PASSWORD, pwd);
      log.info 'pwd='+pwd
}

assert imFine == true;

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Set Pem" disabled="true"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import org.apache.commons.lang.SystemUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 

import com.eviware.soapui.settings.SSLSettings
import com.eviware.soapui.SoapUI
def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath

def eNV = context.expand( '${#Project#ENV}' )

def propertiesPath = null;

if (System.properties['os.name'].toLowerCase().contains('windows')) 
	{
    		log.info "it's Windows OS!!";
    		File temp = new File( projectPath + "\\..\\..\\..\\Properties\\");
    		propertiesPath = temp.getCanonicalPath();
	} 
else 
	{
    		log.info "it's Linux OS!!";
    		File temp = new File(projectPath + "/../../../Properties/");
    		propertiesPath = temp.getCanonicalPath();
	}
	
log.info("Properties File Location : '" + propertiesPath+ "'");




def propMap=[:]
BufferedReader reader = new BufferedReader(new FileReader(propertiesPath + "/" + eNV +"project.properties"));

String line;
while ((line = reader.readLine()) != null)
      {
	       if (line.trim().length()==0) continue;
	       if (line.charAt(0)=='#') continue;
	
	       int delimPosition = line.indexOf("=");
	       String key = line.substring(0, delimPosition-0).trim();
	       String value = line.substring(delimPosition+1).trim();
	       propMap.put(key, value);
      }


if (System.properties['os.name'].toLowerCase().contains('windows')) 
      {
            log.info "it's Windows OS!!!";
            File temp = new File( projectPath + "\\..\\..\\..\\Certs\\" + eNV + "\\");
    		  certPath = temp.getCanonicalPath();      
      } 
else 
      {
            log.info "it's Linux OS!!!";
            File temp = new File(projectPath + "/../../../Certs/" + eNV + "/");
    		  certPath = temp.getCanonicalPath();
      }  
      
 log.info("Cert path: " + certPath );  
                  
def nodeId = context.expand( '${#TestCase#nodeid}' )

log.info "nodeId: "+nodeId;

 if (nodeId == "dece:cs")
       {
             nodeId = "dececs";
       }
 else if (nodeId == "coord:cs")
       {
             nodeId = "coordcs";
       }
 else
       {
             nodeId = nodeId;
       }


//log.info "~~~~~~~~~~~~" +nodeId
boolean imFine = true;
def pwd = null;
def certMatchesNodeID = context.expand( '${#Project#CertMatchesNodeID}' )
log.info("CertMatchesNodeID : '" + certMatchesNodeID + "'");
if (certMatchesNodeID == "YES")
{
		File f1 = new File(certPath+"/"+nodeId + "_concat.pem");
		File f2 = new File(certPath+"/"+nodeId + ".jks");
		File f3 = new File(certPath+"/truststore-"+nodeId + ".jks");
		File f4 = new File(certPath+"/"+nodeId + ".pem");

		log.info("F1 : '" + f1.getPath()+ "'");
		log.info("F2 : '" + f2.getPath()+ "'");
		log.info("F3 : '" + f3.getPath()+ "'");
		log.info("F4 : '" + f4.getPath()+ "'");
	
	// sets the certificate from the specific folder when the certname and NodeId are same
	  if(f1.exists()) 
             {
                   keyStorePath = certPath+"/"+nodeId + "_concat.pem";
                   pwd = "123"
                   log.info("F1 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");      
             }
	  else if(f2.exists())
             {
                  	keyStorePath = certPath+"/"+nodeId + ".jks";
                   	pwd = "abcd1234" 
                   	log.info("F2 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");          
             }
	  else if(f3.exists())
             {
                  	keyStorePath = certPath+"/truststore-"+nodeId + ".jks";
                   	pwd = "12elma";
				log.info("F3 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");
             }
	  else if(f4.exists()) 
             {
                   	keyStorePath = certPath+"/"+nodeId + ".pem";
                   	pwd = "123";
                   	log.info("F4 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");       
             }
	  else
             {
                  	log.info "No cert file is Found!!!";
                  	imFine = false;
             }
}
else
{
	//to get the certificate name from another property based on the nodeid property.
		
	
       def value = propMap.find{ it.value == nodeId }?.key
       def certName = testProject.getPropertyValue(value+"_cert");       
       log.info "cert name .... " + certName;

		File f1 = new File(certPath+"/"+certName + "_concat.pem");
		File f2 = new File(certPath+"/"+certName + ".jks");
		File f3 = new File(certPath+"/truststore-"+certName + ".jks");
		File f4 = new File(certPath+"/"+certName + ".pem");

		log.info("F1 : '" + f1.getPath()+ "'");
		log.info("F2 : '" + f2.getPath()+ "'");
		log.info("F3 : '" + f3.getPath()+ "'");
		log.info("F4 : '" + f4.getPath()+ "'");      
		     
       if(f1.exists()) 
             {
             		
				keyStorePath = certPath+"/"+certName + "_concat.pem";
				pwd = "123";
				log.info("F1 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");     
             }
       else if(f2.exists())
             {
				keyStorePath = certPath+"/"+certName + ".jks";
				pwd = "abcd1234";
				log.info("F2 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");           
             }
       else if(f3.exists())
             {
                  	keyStorePath = certPath+"/truststore-"+certName + ".jks";
                   	pwd = "abcd1234";
                   	log.info("F3 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");
                   	         
             }
       else if(f4.exists()) 
             {
				keyStorePath = certPath+"/"+certName + ".pem";
				pwd = "123";  
				log.info("F4 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");     
             }
       else
			{
			log.info "No cert file is Found!!!";
			imFine = false;
			}                             
}


if(imFine)
{
      def callTSname = testCase.getPropertyValue("sName");
      def callTCname = testCase.getPropertyValue("tName");
      
      def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
      
      callTC.setPropertyValue("keyStorePath","$keyStorePath");
      testCase.setPropertyValue("keyStorePath","$keyStorePath");
      
      SoapUI.settings.setString( SSLSettings.KEYSTORE, keyStorePath );
      SoapUI.settings.setString( SSLSettings.KEYSTORE_PASSWORD, pwd);
      log.info 'pwd='+pwd
}

assert imFine == true;

</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value></con:property><con:property><con:name>tName</con:name><con:value>DiscreteMediaRightConsumePost</con:value></con:property><con:property><con:name>sName</con:name><con:value>CommonSteps</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreateTOU_API" searchProperties="true" disabled="true" id="f5696054-7af5-4802-baea-a134d769585f"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpLocation",null);

tC.setPropertyValue("expectErrType","SUCCESS");

if( tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("Policy_Class", "urn:dece:type:policy:TermsOfUse");
}
else
{
	tC.setPropertyValue("Policy_Class", URLEncoder.encode("urn:dece:type:policy:TermsOfUse", "UTF-8"));
}


</script></con:config></con:testStep><con:testStep type="groovy" name="Set_TOU_Policy_Resource" id="47a860a6-1083-456e-84ff-e183fef586c3"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

String country = context.expand( '${#Project#Country}' );
def tOUUrl = context.expand( '${#Project#TOUUrl}' )

def touForCountry = "TOU_"+country
def consent_Version =  tP.getPropertyValue(touForCountry);

tP.setPropertyValue("policy_TOU",'https://'+ tOUUrl + '/Consent/Text/' + country + '/urn:dece:type:policy:TermsOfUse:' + consent_Version + '/html');

log.info "Policy TOU from Project level property " + tP.getPropertyValue("policy_TOU");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("Policy_Create_TOU");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="Policy_Create_TOU"><con:settings/><con:config service="Policy_Create" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/User/{NodeUserId}/Policy/{PolicyClass}" methodName="Policy_Create_User" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Policy_Create_TOU" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd"  xmlns:dece="${#Project#coordinatorSchema}"  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"  xmlns:md="http://www.movielabs.com/md"  xmlns:xenc="http://www.w3.org/2001/04/xmlenc#"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:Policy>
    <dece:PolicyClass>urn:dece:type:policy:TermsOfUse</dece:PolicyClass>
    <dece:Resource>${#Project#Policy_TOU}</dece:Resource>
    <dece:RequestingEntity>urn:dece:userid:org:dece:${#TestCase#NODE_USER_ID_REQ_ENTITY}</dece:RequestingEntity>
    <dece:PolicyAuthority>urn:dece:org:org:dece:${#Project#nodeIdCoo}</dece:PolicyAuthority>
    <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#TestCase#NODE_USER_ID_CREATED_BY}">
        <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
    </dece:ResourceStatus>
  </dece:Policy>
</dece:PolicyList>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="${#TestCase#NODE_USER_ID_FULL}"/>
  <con:entry key="PolicyClass" value="${#TestCase#Policy_Class}"/>
  <con:entry key="NodeAccountId" value="${#TestCase#NODE_ACCOUNT_ID_FULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def tStep  = tC.getTestStepByName('Policy_Create_TOU');

String expXML = null;
String status     = null;
String connection = null;
String contentType   = null;
String contentLength = null;
String contentLocation = null;

tStep.httpRequest.response.responseHeaders.each() { header, value ->
                switch (header) {
                                case "Location": 
                                             log.info "V2: "+tP.getPropertyValue("V2");
			if (tP.getPropertyValue("V2")=="06" || tP.getPropertyValue("V2")=="07"){
			contentLocation = URLDecoder.decode(value[0], "UTF-8");
			}else{
				contentLocation = value[0];
			}
                                                break;
                                case "#status#": 
                                                status = value[0]; 
                                                break;
                                case "Connection": 
                                                connection = value[0]; 
                                                break;
                                case "Content-Type": 
                                                contentType = value[0]; 
                                                break;
                                case "Content-Length": 
                                                contentLength = value[0]; 
                                                break;
                                case "Transfer-Encoding": 
                                                httpContentEncoding = value[0]; 
                                                break;
                }
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = tP.getPropertyValue("targetHost");
def urnacct   = tP.getPropertyValue("urnaccount");
def urnstream = tP.getPropertyValue("urnstream");
def acct      = tC.getPropertyValue("nodeaccountid");

def sh            = tC.getPropertyValue("streamhandleFULL");
def account       = tC.getPropertyValue("assertionAccountIdFULL");
def errorRespType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String orgRequest = url + "/dece/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
                case "SUCCESS":
                                expectHTTPstatus = "HTTP/1.1 201 Created";
                break;
}
                
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");
assert tC.getPropertyValue("httpStatus") == expectHTTPstatus;</script></con:config>
      </con:testStep><con:properties><con:property><con:name>contentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>contentLocation</con:name><con:value>https://qa.q.uvvu.com:7001/rest/1/06/Account/urn:dece:accountid:org:dece:D12F2DD48A10D559E0401F0A059918B0/User/urn:dece:userid:org:dece:D12F2DD48A1ED559E0401F0A059918B0/Policy/urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>contentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489/User/urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489/Policy/urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value/></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>Policy_Class</con:name><con:value>urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>SAML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVbrbuI8EH0VlP25CrkUCkQFKQT4li30Qkq77Z9VcCbBkNhp7FDo068dIAuU9mNbCQl5Mpcz4+OZuWBeHJmWzRikHFNSWsYRYVYubSpZSizqMcws4sXALI4s1x4OLLOsW97WRCn1O03lt3luNDxUrauGCTW1Uq/XVU8/q6nQ0IOaiXQfDF+oMpZBnzDuEd5UTN2oqrqh6rU7vW5V6taZXq6dN56U0j2kTPgWKmVd2YBasqYy5TyxNO3l5aX8clamaaiZum5ov4YDF00h9pTWxTqjPFDa2uijsg8IogiVEY21C21P58JnlotD4vEshU0s/71YuqY3NKHjMxx+Uwpb8PskoPnR8QglGHkRfvVkfYbAp9Qv2VFIU8yn8btJGLp0rMISqciokG+Ktg/tREd7CFPmqWzqGRtfIwggBYKgNB71m8q3024tN71LPcICmsZs//hveIAsIKIJ+CrbprWBdrrDI5VqXQCy+gRFGcMLuJJkTTwEbHObgE53VbpJIcDLAWaCoEsm0Wm78A6O62p0cAiMf+aCdi5n7eTeizJo3TvB+XDQf3z226QNwVXvxxTGpF0dLPVmDmBXORcUV7s+HpCyINHa4vH26aw2PrdD+5xhR0OEhfbrfHU5WbT7y55fGQyz+qsbrLoP933Tvwru5j+/Dy9D0pu5w9X5r7Y+Zj8DmN26iecuye18Olk54cB44Py/x+f6j+/0KnSRVr1so+no1+S5V6fxk/v9sjeZ0eDHIk7HVxV7miSj8bzb7j48kdsZPLp8nt3Q+fW4brIHGk+129pM66Jmkc4O/n3Z9s272WQGiG+Pkgb9TqknbsnjHzczKcG+GuSqViKbD+NAuNKSVrJ3WJlod9i3xB2uz7qjO51qtdG2G4bRFT+9eqZXGw2jp9u9Sr2xbTJrFAcQHUoCLGPJlrumzccAUWwxID6k6oJmotMx5QOPHY97pT4ZiUdACYM7KtqzsTJitExXfmCuKmdJROfhJJgFeKWUrii/JtepHXBI93qyYez15BEgnGCQjVvymgliMy5q8ewtMh4Z5YVXJpCJ1p7KLmuZlXpVYzhOIpBItZj6WQTlZJrkldHY+t9UPcRy6ah7l7+2d/M6/LYtgdDxsVRgMhfxXGgKR4aLuU3k/YQruwlv3duZj+XDEvXkKUZrJPuf/tJE8qPgiO04Xddxt7AL7X+w/qyxc339ScvOwHZvvmL723F/G5918PnQXws8+Cpywd4vmr+11D4goHbI/SKQv8A7Ybdrmhj4YkS0ti83KT+Xs8Uiy59qTU7CVHjX5GPQdFNzAWVihq3u6ByIVjjRTloYCtwHsQv5PsKMT4nLPQ6x6C2l/HjChugCkxtiXzTF5anr515IUTkOS35M5kRiu5WIP1yAkYWknhDfiL8Xmv5N/JivnTgiT7EgckxCeZLLwuodWiAq3GIx5mi66/yYg2PB94VFkQssXPBpknF4/0tJzq+m4iFEM8L7HSUX7M7UHCdfJWD9VXrjJh/bxR6P/3+RV3FOAQRi+2c49y/XMUu+ABLuzOVN0KOjuaE3PhrN++hab8RvJTt1OuR46w8=</con:value></con:property><con:property><con:name>sName</con:name><con:value>User_Update_Access_NonCS</con:value></con:property><con:property><con:name>status</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_00005_UserUpdate_FUNC_NonCS_Full_Update_UserName_Others</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_REQ_ENTITY</con:name><con:value>0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_CREATED_BY</con:name><con:value>0C0CD559BA911E11E05305991F0AF489</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ce02e137-2b56-4bd6-a4b9-e1e9fdc05e16</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46677643-d11e-4e41-a0a4-e6e1d2901adb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd6efb96-bbf3-4226-9917-48245caf20c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreateMUC_API" searchProperties="true" disabled="true" id="41d860d5-b2e7-4ba5-b0ee-9cd170ac2271"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpLocation",null);

tC.setPropertyValue("expectErrType","SUCCESS");

if( tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("Policy_Class","urn:dece:type:policy:ManageUserConsent");
}
else
{
	tC.setPropertyValue("Policy_Class", URLEncoder.encode("urn:dece:type:policy:ManageUserConsent", "UTF-8"));
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("Policy_Create_MUC");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="Policy_Create_MUC"><con:settings/><con:config service="Policy_Create" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/User/{NodeUserId}/Policy/{PolicyClass}" methodName="Policy_Create_User" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Policy_Create_MUC" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd"  xmlns:dece="${#Project#coordinatorSchema}"  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"  xmlns:md="http://www.movielabs.com/md"  xmlns:xenc="http://www.w3.org/2001/04/xmlenc#"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:Policy>
    <dece:PolicyClass>urn:dece:type:policy:ManageUserConsent</dece:PolicyClass>
    <dece:Resource>urn:dece:userid:org:dece:${#TestCase#NODE_USER_ID_REQ_ENTITY}</dece:Resource>
    <dece:RequestingEntity>urn:dece:org:org:dece:${#TestCase#nodeid}</dece:RequestingEntity>
    <dece:PolicyAuthority>urn:dece:org:org:dece:${#Project#nodeIdCoo}</dece:PolicyAuthority>
    <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#TestCase#NODE_USER_ID_CREATED_BY}">
        <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
    </dece:ResourceStatus>
  </dece:Policy>
</dece:PolicyList>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="${#Project#NODE_USER_ID_FAU1}"/>
  <con:entry key="PolicyClass" value="${#TestCase#Policy_Class}"/>
  <con:entry key="NodeAccountId" value="${#Project#NODE_ACCOUNT_ID_FULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def tStep  = tC.getTestStepByName('Policy_Create_MUC');

String expXML = null;
String status     = null;
String connection = null;
String contentType   = null;
String contentLength = null;
String contentLocation = null;

tStep.httpRequest.response.responseHeaders.each() { header, value ->
                switch (header) {
                                case "Location": 
                                             log.info "V2: "+tP.getPropertyValue("V2");
			if (tP.getPropertyValue("V2")=="06" || tP.getPropertyValue("V2")=="07"){
			contentLocation = URLDecoder.decode(value[0], "UTF-8");
			}else{
				contentLocation = value[0];
			}
                                                break;
                                case "#status#": 
                                                status = value[0]; 
                                                break;
                                case "Connection": 
                                                connection = value[0]; 
                                                break;
                                case "Content-Type": 
                                                contentType = value[0]; 
                                                break;
                                case "Content-Length": 
                                                contentLength = value[0]; 
                                                break;
                                case "Transfer-Encoding": 
                                                httpContentEncoding = value[0]; 
                                                break;
                }
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = tP.getPropertyValue("targetHost");
def urnacct   = tP.getPropertyValue("urnaccount");
def urnstream = tP.getPropertyValue("urnstream");
def acct      = tC.getPropertyValue("nodeaccountid");

def sh            = tC.getPropertyValue("streamhandleFULL");
def account       = tC.getPropertyValue("assertionAccountIdFULL");
def errorRespType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String orgRequest = url + "/dece/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
                case "SUCCESS":
                                expectHTTPstatus = "HTTP/1.1 201 Created";
                break;
}
                
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");
assert tC.getPropertyValue("httpStatus") == expectHTTPstatus;</script></con:config>
      </con:testStep><con:properties><con:property><con:name>SAML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVbrbuI8EH0VlP25CrkUCkQFKQT4li30Qkq77Z9VcCbBkNhp7FDo068dIAuU9mNbCQl5Mpcz4+OZuWBeHJmWzRikHFNSWsYRYVYubSpZSizqMcws4sXALI4s1x4OLLOsW97WRCn1O03lt3luNDxUrauGCTW1Uq/XVU8/q6nQ0IOaiXQfDF+oMpZBnzDuEd5UTN2oqrqh6rU7vW5V6taZXq6dN56U0j2kTPgWKmVd2YBasqYy5TyxNO3l5aX8clamaaiZum5ov4YDF00h9pTWxTqjPFDa2uijsg8IogiVEY21C21P58JnlotD4vEshU0s/71YuqY3NKHjMxx+Uwpb8PskoPnR8QglGHkRfvVkfYbAp9Qv2VFIU8yn8btJGLp0rMISqciokG+Ktg/tREd7CFPmqWzqGRtfIwggBYKgNB71m8q3024tN71LPcICmsZs//hveIAsIKIJ+CrbprWBdrrDI5VqXQCy+gRFGcMLuJJkTTwEbHObgE53VbpJIcDLAWaCoEsm0Wm78A6O62p0cAiMf+aCdi5n7eTeizJo3TvB+XDQf3z226QNwVXvxxTGpF0dLPVmDmBXORcUV7s+HpCyINHa4vH26aw2PrdD+5xhR0OEhfbrfHU5WbT7y55fGQyz+qsbrLoP933Tvwru5j+/Dy9D0pu5w9X5r7Y+Zj8DmN26iecuye18Olk54cB44Py/x+f6j+/0KnSRVr1so+no1+S5V6fxk/v9sjeZ0eDHIk7HVxV7miSj8bzb7j48kdsZPLp8nt3Q+fW4brIHGk+129pM66Jmkc4O/n3Z9s272WQGiG+Pkgb9TqknbsnjHzczKcG+GuSqViKbD+NAuNKSVrJ3WJlod9i3xB2uz7qjO51qtdG2G4bRFT+9eqZXGw2jp9u9Sr2xbTJrFAcQHUoCLGPJlrumzccAUWwxID6k6oJmotMx5QOPHY97pT4ZiUdACYM7KtqzsTJitExXfmCuKmdJROfhJJgFeKWUrii/JtepHXBI93qyYez15BEgnGCQjVvymgliMy5q8ewtMh4Z5YVXJpCJ1p7KLmuZlXpVYzhOIpBItZj6WQTlZJrkldHY+t9UPcRy6ah7l7+2d/M6/LYtgdDxsVRgMhfxXGgKR4aLuU3k/YQruwlv3duZj+XDEvXkKUZrJPuf/tJE8qPgiO04Xddxt7AL7X+w/qyxc339ScvOwHZvvmL723F/G5918PnQXws8+Cpywd4vmr+11D4goHbI/SKQv8A7Ybdrmhj4YkS0ti83KT+Xs8Uiy59qTU7CVHjX5GPQdFNzAWVihq3u6ByIVjjRTloYCtwHsQv5PsKMT4nLPQ6x6C2l/HjChugCkxtiXzTF5anr515IUTkOS35M5kRiu5WIP1yAkYWknhDfiL8Xmv5N/JivnTgiT7EgckxCeZLLwuodWiAq3GIx5mi66/yYg2PB94VFkQssXPBpknF4/0tJzq+m4iFEM8L7HSUX7M7UHCdfJWD9VXrjJh/bxR6P/3+RV3FOAQRi+2c49y/XMUu+ABLuzOVN0KOjuaE3PhrN++hab8RvJTt1OuR46w8=</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_00005_UserUpdate_FUNC_NonCS_Full_Update_UserName_Others</con:value></con:property><con:property><con:name>sName</con:name><con:value>User_Update_Access_NonCS</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>E4E99389111664AEE0401F0A07990AF6</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>expectErrType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>status</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>contentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>contentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLocation</con:name><con:value>https://qa.q.uvvu.com:7001/rest/1/06/Account/urn:dece:accountid:org:dece:D12F2DD48A10D559E0401F0A059918B0/User/urn:dece:userid:org:dece:D12F2DD48A1ED559E0401F0A059918B0/Policy/urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489/User/urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601/Policy/urn:dece:type:policy:ManageUserConsent</con:value></con:property><con:property><con:name>Policy_Class</con:name><con:value>urn:dece:type:policy:ManageUserConsent</con:value></con:property><con:property><con:name>ENNODE_USER_ID</con:name><con:value>urn%3Adece%3Auserid%3Aorg%3Adece%3AD3CD43AEEE91F252E0401F0A079913BF</con:value></con:property><con:property><con:name>ENNODE_ACCOUNT_ID</con:name><con:value>urn%3Adece%3Aaccountid%3Aorg%3Adece%3AD3CD44C830AA5460E0401F0A079913BD</con:value></con:property><con:property><con:name>ENCODED_NODE_USER_ID</con:name><con:value>urn%3Adece%3Auserid%3Aorg%3Adece%3AE1B04F1ACAC275C1E0401F0A079905C0</con:value></con:property><con:property><con:name>ENCODED_NODE_ACCOUNT_ID</con:name><con:value>urn%3Adece%3Aaccountid%3Aorg%3Adece%3AE1B04F1ACAA475C1E0401F0A079905C0</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value>E4E99389111664AEE0401F0A07990AF6</con:value></con:property><con:property><con:name>NODE_USER_ID_REQ_ENTITY</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_CREATED_BY</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0C0CD559BA911E11E05305991F0AF489</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ce02e137-2b56-4bd6-a4b9-e1e9fdc05e16</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46677643-d11e-4e41-a0a4-e6e1d2901adb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd6efb96-bbf3-4226-9917-48245caf20c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreateULC_API" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("httpStatus",null);
tC.setPropertyValue("httpConnect",null);
tC.setPropertyValue("httpContentType",null);
tC.setPropertyValue("httpContentLength",null);
tC.setPropertyValue("httpLocation",null);

tC.setPropertyValue("expectErrType","SUCCESS");

if( tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("Policy_Class","urn:dece:type:policy:UserLinkConsent");
}
else
{
	tC.setPropertyValue("Policy_Class", URLEncoder.encode("urn:dece:type:policy:UserLinkConsent", "UTF-8"));
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("PolicyCreate_ULC");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreate_ULC"><con:settings/><con:config service="Policy_Create" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/User/{NodeUserId}/Policy/{PolicyClass}" methodName="Policy_Create_User" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreate_ULC" mediaType="application/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd"  xmlns:dece="${#Project#coordinatorSchema}"  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"  xmlns:md="http://www.movielabs.com/md"  xmlns:xenc="http://www.w3.org/2001/04/xmlenc#"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:Policy>
    <dece:PolicyClass>urn:dece:type:policy:UserLinkConsent</dece:PolicyClass>
    <dece:Resource>urn:dece:userid:org:dece:${#TestCase#NODE_USER_ID_REQ_ENTITY}</dece:Resource>
    <dece:RequestingEntity>urn:dece:org:org:dece:${#TestCase#nodeid}</dece:RequestingEntity>
    <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
    <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#TestCase#NODE_USER_ID_CREATED_BY}">
        <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
    </dece:ResourceStatus>
  </dece:Policy>
</dece:PolicyList>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="${#Project#NODE_USER_ID_FAU1}"/>
  <con:entry key="PolicyClass" value="${#TestCase#Policy_Class}"/>
  <con:entry key="NodeAccountId" value="${#Project#NODE_ACCOUNT_ID_FULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def tStep  = tC.getTestStepByName('PolicyCreate_ULC');

String expXML = null;
String status     = null;
String connection = null;
String contentType   = null;
String contentLength = null;
String contentLocation = null;

tStep.httpRequest.response.responseHeaders.each() { header, value ->
                switch (header) {
                                case "Location": 
                                             log.info "V2: "+tP.getPropertyValue("V2");
			if (tP.getPropertyValue("V2")=="06" || tP.getPropertyValue("V2")=="07"){
			contentLocation = URLDecoder.decode(value[0], "UTF-8");
			}else{
				contentLocation = value[0];
			}
                                                break;
                                case "#status#": 
                                                status = value[0]; 
                                                break;
                                case "Connection": 
                                                connection = value[0]; 
                                                break;
                                case "Content-Type": 
                                                contentType = value[0]; 
                                                break;
                                case "Content-Length": 
                                                contentLength = value[0]; 
                                                break;
                                case "Transfer-Encoding": 
                                                httpContentEncoding = value[0]; 
                                                break;
                }
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = tP.getPropertyValue("targetHost");
def urnacct   = tP.getPropertyValue("urnaccount");
def urnstream = tP.getPropertyValue("urnstream");
def acct      = tC.getPropertyValue("nodeaccountid");

def sh            = tC.getPropertyValue("streamhandleFULL");
def account       = tC.getPropertyValue("assertionAccountIdFULL");
def errorRespType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String orgRequest = url + "/dece/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (errorRespType == "" || errorRespType == null) {
	errorRespType = "SUCCESS";
}
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
                case "SUCCESS":
                                expectHTTPstatus = "HTTP/1.1 201 Created";
                break;
}
                
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");
assert tC.getPropertyValue("httpStatus") == expectHTTPstatus;</script></con:config>
      </con:testStep><con:properties><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=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</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_00005_UserUpdate_FUNC_NonCS_Full_Update_UserName_Others</con:value></con:property><con:property><con:name>sName</con:name><con:value>User_Update_Access_NonCS</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>E26A4604E1520139E0401F0A05990BBB</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>E26A4604E0EC0139E0401F0A05990BBB</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>expectErrType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>status</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>contentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>contentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLocation</con:name><con:value>https://qa.q.uvvu.com:7001/rest/1/06/Account/urn:dece:accountid:org:dece:D12F2DD48A10D559E0401F0A059918B0/User/urn:dece:userid:org:dece:D12F2DD48A1ED559E0401F0A059918B0/Policy/urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/$major/$minor/Account/urn:dece:accountid:org:dece:E26A4604E0EC0139E0401F0A05990BBB/User/urn:dece:userid:org:dece:E26A4604E1520139E0401F0A05990BBB/Policy/urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>Policy_Class</con:name><con:value>urn%3Adece%3Atype%3Apolicy%3ATermsOfUse</con:value></con:property><con:property><con:name>ENNODE_USER_ID</con:name><con:value>urn%3Adece%3Auserid%3Aorg%3Adece%3AD3CD43AEEE91F252E0401F0A079913BF</con:value></con:property><con:property><con:name>ENNODE_ACCOUNT_ID</con:name><con:value>urn%3Adece%3Aaccountid%3Aorg%3Adece%3AD3CD44C830AA5460E0401F0A079913BD</con:value></con:property><con:property><con:name>ENCODED_NODE_USER_ID</con:name><con:value>urn%3Adece%3Auserid%3Aorg%3Adece%3AE1B04F1ACAC275C1E0401F0A079905C0</con:value></con:property><con:property><con:name>ENCODED_NODE_ACCOUNT_ID</con:name><con:value>urn%3Adece%3Aaccountid%3Aorg%3Adece%3AE1B04F1ACAA475C1E0401F0A079905C0</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:/DECE/RET_concat.pem</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn%3Adece%3Auserid%3Aorg%3Adece%3AE26A4604E1520139E0401F0A05990BBB</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn%3Adece%3Aaccountid%3Aorg%3Adece%3AE26A4604E0EC0139E0401F0A05990BBB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ce02e137-2b56-4bd6-a4b9-e1e9fdc05e16</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46677643-d11e-4e41-a0a4-e6e1d2901adb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd6efb96-bbf3-4226-9917-48245caf20c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43c5dbf9-3574-4373-9d3f-f1b49a7247c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>audience</con:name><con:value>urn:dece:org:org:dece:${#Project#nodeIdCoo};urn:dece:org:org:dece:${#Project#nodeIdLLASP};urn:dece:org:org:dece:${#Project#nodeIdDLASP};urn:dece:org:org:dece:${#Project#nodeIdDSP};urn:dece:org:org:dece:${#Project#nodeIdCoordCS};urn:dece:org:org:dece:${#Project#nodeIdportal};urn:dece:org:org:dece:${#Project#nodeIdLLASPCS};urn:dece:org:org:dece:${#Project#nodeIdDLASPCS};urn:dece:org:org:dece:${#Project#nodeIdDSPCS};urn:dece:org:org:dece:${#Project#nodeIdDEV};urn:dece:org:org:dece:${#Project#nodeIdCON};urn:dece:org:org:dece:${#Project#nodeIdCONCS};urn:dece:org:org:dece:${#Project#nodeIdDECE};urn:dece:org:org:dece:${#Project#nodeIdDECECS};urn:dece:org:org:dece:${#Project#nodeIdportalCS};urn:dece:org:org:dece:${#Project#nodeIdAccportal};urn:dece:org:org:dece:${#Project#nodeIdAccportalCS};urn:dece:org:org:dece:${#Project#nodeIdDEVCS};</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_P0_CreateConsume_With_Multiple_DMR_Creation_For_Single_RT"><con:settings><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRCreate/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DisceretMediaRights_CreateConsume_with_Single_RT_with_State_Fulfil_and_Available" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="70cdb2a4-f899-4f68-8eed-6549e40c1a49"><con:description/><con:settings/><con:testStep type="groovy" name="Set Node Role to Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="283fe986-64ae-4ad4-8de0-48da93beff6b"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="bc401194-3fe0-4624-bdca-809da3298f2b"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate for Multiple DMR creation for single RT"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_For_Multiple_DMR');
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = commonTC.run(null, false);

assert "$runnerTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume- State is Fulfil"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost');

commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod", testCase.getPropertyValue("DiscreteMediaFulfillmentMethod"));
commonTC.setPropertyValue("ErrorResponse", "Created");
commonTC.setPropertyValue("State", testCase.getPropertyValue("State"));
commonTC.setPropertyValue("LeaseExpiration", testCase.getPropertyValue("LeaseExpiration"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Save the DiscreteMediaTokenId and DiscreteMediaTokenOid -1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("DiscreteMediaTokenId1",testCase.getPropertyValue("DiscreteMediaTokenId"));
testCase.setPropertyValue("DiscreteMediaTokenOid1",testCase.getPropertyValue("DiscreteMediaTokenOid"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightGet" id="da1f4771-4a67-41ce-848f-3100118efb44"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightGet');

commonTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId1"));

commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ErrorResponse", "OK");


def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DB for Discrete_Media and Discrete_Media_Purchase tables-1" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DB for Discrete_Media_Token, Discrete_Media_Token_History, Purchase_Profile and Pruchased_Fulfillment_Method Tables");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));

commonTC.setPropertyValue("ExpectedCountForPurchaseProfile", testCase.getPropertyValue("ExpectedCountForPurchaseProfile"));
commonTC.setPropertyValue("PurchaseProfileCanStream", "Y");
commonTC.setPropertyValue("PurchaseProfileCanDownload", "Y");
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));

commonTC.setPropertyValue("PurchaseProfileOid", testCase.getPropertyValue("PurchaseProfileOid"));
commonTC.setPropertyValue("ExpectedCountForPurchaseFulfillmentMethod", testCase.getPropertyValue("ExpectedCountForPurchaseFulfillmentMethod"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set State Value" id="00a9e9fb-bf60-4e86-b5d7-58745e0564e9"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("OriginalState", testProject.getPropertyValue("State"));

testProject.setPropertyValue("State",'urn:dece:type:state:discretemediaright:available');</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume-State is Available"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost');

commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod", testCase.getPropertyValue("DiscreteMediaFulfillmentMethod"));
commonTC.setPropertyValue("ErrorResponse","BadRequestDiscreteMediaStateShouldBeFulfilled");
commonTC.setPropertyValue("State", testCase.getPropertyValue("State"));
commonTC.setPropertyValue("LeaseExpiration", testCase.getPropertyValue("LeaseExpiration"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Verify DMR Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Verify Discrete_Media_Rights_Remaining");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("discreteMediaRightsRemainingExp", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DMR Count"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DMR Count");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("DMRCount", testCase.getPropertyValue("DMRCount"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Reset State Value" id="73eafee0-fa92-4a0b-81f0-60611a4fa9b1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("State",testCase.getPropertyValue("OriginalState"));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>discreteMediaRightsRemainingExp</con:name><con:value/></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>C0CEF8E08CE1C7D6E0401F0A0599120B</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A695785A133A1E05307991F0A80D6</con:value></con:property><con:property><con:name>DiscreteMediaTokenId1</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A695785A133A1E05307991F0A80D6</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>089A695785A133A1E05307991F0A80D6</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid1</con:name><con:value>089A695785A133A1E05307991F0A80D6</con:value></con:property><con:property><con:name>DMRCount</con:name><con:value>1</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>ExpectedCountForPurchaseFulfillmentMethod</con:name><con:value>4</con:value></con:property><con:property><con:name>ExpectedCountForPurchaseProfile</con:name><con:value>3</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>C0CEF8E08CE1C7D6E0401F0A0599120B</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>OriginalState</con:name><con:value>urn:dece:type:state:discretemediaright:fulfilled</con:value></con:property><con:property><con:name>PurchaseProfileOid</con:name><con:value>0365EEA5D1FB0DE3E05305991F0AA1C8</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>92075</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A5DD5150A6F25E05305991F0A5F66</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A5DD5150A6F25E05305991F0A5F66</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fe8591ad-5083-486f-8428-be211f9b5982</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d536f72b-6629-4a2c-b802-2d3628d22f5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1938d22-3257-4e4c-9207-94af48c4d126</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7840c603-ded5-4306-bda0-f7b5f196121c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8365337-8279-4369-9ac3-b07eb75db930</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9fb4bd08-3f6f-470f-8974-e52ea68d7a1a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd1608db-02a8-472d-a511-47b2b2101a0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>73eafee0-fa92-4a0b-81f0-60611a4fa9b1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>283fe986-64ae-4ad4-8de0-48da93beff6b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bc401194-3fe0-4624-bdca-809da3298f2b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da1f4771-4a67-41ce-848f-3100118efb44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DisceretMediaRights_CreateConsume_with_Single_RT_with_Valid_and_Invalid_Media_Profile" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d3d4d499-0d53-42bc-a884-781d11f7736e"><con:description/><con:settings/><con:testStep type="groovy" name="Set Node Role to Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate for Multiple DMR creation for single RT"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_For_Multiple_DMR');
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = commonTC.run(null, false);

assert "$runnerTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume- Valid Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost');

commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod", testCase.getPropertyValue("DiscreteMediaFulfillmentMethod"));
commonTC.setPropertyValue("ErrorResponse", "Created");
commonTC.setPropertyValue("State", testCase.getPropertyValue("State"));
commonTC.setPropertyValue("LeaseExpiration", testCase.getPropertyValue("LeaseExpiration"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Save the DiscreteMediaTokenId and DiscreteMediaTokenOid -1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("DiscreteMediaTokenId1",testCase.getPropertyValue("DiscreteMediaTokenId"));
testCase.setPropertyValue("DiscreteMediaTokenOid1",testCase.getPropertyValue("DiscreteMediaTokenOid"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DB for Discrete_Media and Discrete_Media_Purchase tables-1" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DB for Discrete_Media_Token, Discrete_Media_Token_History, Purchase_Profile and Pruchased_Fulfillment_Method Tables");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));

commonTC.setPropertyValue("ExpectedCountForPurchaseProfile", testCase.getPropertyValue("ExpectedCountForPurchaseProfile"));
commonTC.setPropertyValue("PurchaseProfileCanStream", "Y");
commonTC.setPropertyValue("PurchaseProfileCanDownload", "Y");
commonTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));

commonTC.setPropertyValue("PurchaseProfileOid", testCase.getPropertyValue("PurchaseProfileOid"));
commonTC.setPropertyValue("ExpectedCountForPurchaseFulfillmentMethod", testCase.getPropertyValue("ExpectedCountForPurchaseFulfillmentMethod"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume-No Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost');

commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);
commonTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile", "");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod", testCase.getPropertyValue("DiscreteMediaFulfillmentMethod"));
commonTC.setPropertyValue("ErrorResponse","BadRequestMediaProfileNotValid");
commonTC.setPropertyValue("State", testCase.getPropertyValue("State"));
commonTC.setPropertyValue("LeaseExpiration", testCase.getPropertyValue("LeaseExpiration"));

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightGet"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightGet');

commonTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId1"));

commonTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ErrorResponse", "OK");


def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Verify DMR Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Verify Discrete_Media_Rights_Remaining");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("discreteMediaRightsRemainingExp", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DMR Count"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DMR Count");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("DMRCount", testCase.getPropertyValue("DMRCount"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>discreteMediaRightsRemainingExp</con:name><con:value/></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>C0CEF8E08CE1C7D6E0401F0A0599120B</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A66693FFD2DEEE05307991F0A2828</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>089A66693FFD2DEEE05307991F0A2828</con:value></con:property><con:property><con:name>DMRCount</con:name><con:value>1</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>ExpectedCountForPurchaseFulfillmentMethod</con:name><con:value>4</con:value></con:property><con:property><con:name>ExpectedCountForPurchaseProfile</con:name><con:value>3</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>C0CEF8E08CE1C7D6E0401F0A0599120B</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>PurchaseProfileOid</con:name><con:value>0365EEA5D1FB0DE3E05305991F0AA1C8</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>92075</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A4E14E165459FE05305991F0A8434</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A4E14E165459FE05305991F0A8434</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>DiscreteMediaTokenId1</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A66693FFD2DEEE05307991F0A2828</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid1</con:name><con:value>089A66693FFD2DEEE05307991F0A2828</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fe8591ad-5083-486f-8428-be211f9b5982</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d536f72b-6629-4a2c-b802-2d3628d22f5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1938d22-3257-4e4c-9207-94af48c4d126</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7840c603-ded5-4306-bda0-f7b5f196121c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8365337-8279-4369-9ac3-b07eb75db930</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9fb4bd08-3f6f-470f-8974-e52ea68d7a1a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd1608db-02a8-472d-a511-47b2b2101a0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>73eafee0-fa92-4a0b-81f0-60611a4fa9b1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_P0_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DMRCreateConsume_FUNC_RTL_POST_by_BAU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="7a10b720-f24b-495c-9f1b-ed75c19507b2"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_BAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="5c1fe4df-bb1a-4cb9-8f6d-d3ff0e3e1f5d"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="59bebae9-f3df-4233-bc95-d4a45a4bd5ce"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>pVdZc6pME773V1ieS8sAigtWkqphUVFxA9ebUzgMi7LJgKC//hs0ekxOki/v+17p9PTy9EJ3zzPWPbfaBhijKHYCvyiLL6XfDF03q2arWWFbZr3CNmtMpdWi6Uq9CnWmyiBCaJSKMsYJkn0c6378UqrSTK1CNys0q9H1NsO2q60ntlXdlIoLFGGimrA80aVi5rk+bl/MvpSSyG8HOnZw29c9hNsxbKtAGbYJZ1u/YSq9Pl9RXgxGr3Ych22Kgk8Ggsh14RMMPOqZesfzbOC26li+HicRerNp4JfSm2yapk9p7SmILKpK0zRFcxThMbBj/Sq9Fm7CyJB9M7ieBd0PfAfqrnPWc1AKiu3AKALXCiIntr0vVDMUQ+eqKyiDFciw/q8S9cfABd0PNb0DGWG9gm2duSmbIRNFyIeoOJ/JL6VfP8vgVVaLdB+bQeThD+d/Bgn5R+QGITIq+ObZDd3PNX4SrtdnBNuyD90EO0c0yssk1CHCxUmETCcbOpgUn4GLl/QXM3yrMAT/SUqeqUecBDb1SWREx0I4/jf5eszVVctCdxP0uq+He3XMr3TJqMGD35oanq61GqsapF8uEB6Zr6DuqX47fyzUe129CVmT2JY8Kc1mtVNvOopmrLU+NsZDWG9VZ4roU5HcoId+LVSW3IxazcxtNjr5C0vArVRM8IalmW6jqSpQ6BgF3OUOkV6edElxyav9yObohCp3qFqV2uK1cRAm0aTFQRdbTUGO1iqGWb+l1fWQnY4Gzr6r0TXXMkK7vFazwqKpOU6yObn6uIoifsT26Jc/Pj36kPs1QKeLk/n/VZ3mRD3W7wch7xQm+Txj9KrIslAWBQEgwQKpzANL5odnMOKt/cHeO10upXkwnXeACE7KDKSitRYX0+lASo3Fwt0s5E6HV2Zs2gNrsUAuRClbiJtVn9aXm3Bd7dAbleeN1SzY1vqh0dunPRuOFE1JR5p8UnZSNtIkenmhWRk5n5Wdwoy1ea2w3PGcMpNSMb1YFKXUHm2Ws3A951J4lqYKYLuAmUuCrfQ0b8HA2syGO2mogP2FztuKsFgomaSBSYG3RgvimyZ0NiH0jHDrufaD8h5RrhndxWnbdZPNWdopgtQV1ENXlbc1cSr1wWw93y4Xe33ZORZgbwS2N4tO3dFXQWptSAFM1/1BsJHtIxyBqcTzU0DCRQNF7vZB0OWBwgInOws7vhEIRiel+lVcKHNut7E6OYcV1ru0qzOtFrMeLhuTQ0OU/PJmkGx3tmKvOuPyQDWOcy7mzmt8LB8busPALDSnK6kXDzKzN1UL24mYrWCvbFh9yj1znUhp9kF0PtmuYs3iZWOMT1vHNJf8asy6TdNVarPQdM3whMtaMN1HdINHpDrXp+MgLgBL4QHo7uY7fqrwrTyohpxO1wqvg44UJ+C8q8aD6uLQ7x1duK6BIBssx7v9W2IMMZV4Kp1KpKykQksERp6EnjqXOjsw5y0r4i2pw0+hCKZreZCuSbzmPcL8MY6dSxwtiQdSbQMaXK9Qm9NcPI5VlgUnn5/7Hc5WDtnSaHh084CkoToK2VTBI9PfLIO94jnRPErU+WAwGmZbLenud6RXmbQ6ONY2Bem4D4EzGmj2XgxEfRKu13FY9mEEYzn0FDk7jzd413K2Ht0v1xl+QouwWZ1723Te1aXNILJUZtCb+ZNakyvgxDz1vPKulS7LmtoIm4bgm+LpRG2iBR2AoMPN6gcjq1b39jwdNlKzD/ZbvTrKXI4/cdJgo8F0Nh0sVa9cL9SPw6FHnzWKHYXjVO2mrDSdlmsGr/U0HEbOOmlZWTT2jepajxvHDb1oOKG756rJXmPD2sLySLImRyNsKpPClF3BjWc1Q9inZtQRSE1zKHdP27N+Dr0xvDbQj93hTrz2D+qxs7xrPbelQyXVimB8O+YDSBaLHTIV9Pj7BSanOEbFvLC2w3wLwjHy49JrLpUvL+2ErDiO0SYj43qWaMABWmgC0OQYqSNINGm/HRrQdY5jaAnctpwrig8QhcA3ndxWvsddp9T3AKHXxsg3UFQ5Bgm0ES59ozGPV1H2Z2T8Bj5GWkD2RF5sigzTaXL1usAzTbrBiQ2uVWdYpsWyEsOUiqMgHvvjCJgxit7viK13O+IMQSd0UL5I5tMUk3GKYxKSg35MYpd5OupPPkrIqhnl2167yrbqFHa80EU5YMoLjMRFT6EdXgJE4etvtaJDfKHOJO23rAqXSf+lix/vbtEgPIaTM+DcHx6RjKJPFl7m5syXTjPMo9M39SAxnHygk9DGkQOvSN5f/amYvFTu5SKMR78F9Tdzw31n/6n4+L+Ii+rk30v+F8N5Mv+b+N+S1De5oD6Wwd2QcXQezN4eLGQHJ1va662QD/rT4Sk5HpNL6TbzDTQi6imGohuUimBC1siTFuyRT91VUD/a4O+oP1i+09/jS2LbV2PSBT3yoRUvxx8831SE8+ebTBpF9tO34TuTJG4xyuLPaIJLXnk54m8fgrANcz5CnpCfNIiMP+n6RNeDHeJn3vYd38pP+b5++qIoYEDUOqT1B9Gj8s8UfGb8PfEe5DuWmFTTNonR1zfFvKe/lHQIg8SPZbF0ITzOmQvO+BSi9h+mv9RcNua3J1CGv3wCrZShSjq+p5fuvM7/Z644l3KBiEhh54LlpZSR1zwx7lsPc+0N4KejjeMb34229568/kX+m/IQ04/fw+v/AA==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E0A9A0C7A9B61EFCE0401F0A059910EA</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E0A9A0C7A9C51EFCE0401F0A059910EA</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E0A9A0C7AA791EFCE0401F0A059910EA</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07CE075B59150DE6E05305991F0ACCA5</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07CE075B59150DE6E05305991F0ACCA5</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83903</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_BAU1"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07CDC52AB61E5CE3E05305991F0A6BD4</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07CDC52AB61E5CE3E05305991F0A6BD4</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>4a70f324-ae4d-4440-a910-11cba97c8517</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ddac2c-cc56-4702-904d-691d3ee23502</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7cb6e7f2-fefd-4190-9252-8e8cebc0d4b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>38509f49-b63c-4c10-a9b3-9f4e76abdede</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c1fe4df-bb1a-4cb9-8f6d-d3ff0e3e1f5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>59bebae9-f3df-4233-bc95-d4a45a4bd5ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DMRCreateConsume_FUNC_RTL_POST_by_SAU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="38ed55d7-2454-48c3-ac35-cbea582ec866"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="0e15359f-b0d8-49a9-af30-e9e7c406abb2"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_SAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="483d5e2d-c6c6-41bb-9ab0-027c396ec980"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="f990d238-f9a1-4346-9455-a0c2fff110ca"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07CDF4E8D8303F6BE05307991F0A6CAD</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07CDF4E8D8303F6BE05307991F0A6CAD</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_SAU1"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83904</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07CDDAD3C7C718B1E05305991F0A1241</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07CDDAD3C7C718B1E05305991F0A1241</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E009D23CA3D5411DE0401F0A05997D1E</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E009C9444C461F0BE0401F0A059966EA</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E009CA58A4199BBFE0401F0A07997CA7</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>0df2c009-deff-4c04-8d82-522021432c34</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c8256ec-d3cf-4b55-972c-b4c3753babe1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e15359f-b0d8-49a9-af30-e9e7c406abb2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>483d5e2d-c6c6-41bb-9ab0-027c396ec980</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f990d238-f9a1-4346-9455-a0c2fff110ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DMRCreateConsume_FUNC_RTL_POST_by_FAU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="c0fd6f3d-3259-4904-970e-f0e168d7e4db"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="897fcb39-4d07-428f-90ef-e0c8aa2fd43c"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="a2bf9c5e-c9aa-4ad6-95fe-1a8e32d397d7"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="80c744b4-7a39-4782-8fb3-bee3ef65b7f4"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="43cffce0-e6b5-4d78-a1f3-9a672308e390"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID" id="f1374c29-3da0-4542-9624-f8aa38171e26"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbZcuI6EP0VyvM4ZbwCtitQRWy45QtkwUyWeZkSsgAltmwkmZB8/ZUMOECWyyRPLrV7Od066u4zBtLE9LqMIcpxRmrrNCHMK6VtpaDEywDDzCMgRczj0Iu6o6Fn1nUP7EyUWhi0lT8QActyHUt1pnpLtWcAqK7rNNTW1AGxARxoGaZQZaxAIWEcEN5WTN2wVcNQDXuitzyr6Zlm3bLN30rtBlEmfAuVuq5sQa1ZW1lwnnua9vT0VH+y6hmda6auG9rdaBjBBUqB0jnbZFQGop2tPqzHCKIkgXWYpdqZdqBzFjMvwnMCeEHRNlb8USxd011N6MQMz38olS2KQzLLyqMPSEYwBAl+AbI+I8QXWVzrJvOMYr5IP0zC0KVjFa2hCg2b/FC0Q2gnOjpASBlQ2QIYW19jNEMUEYhqv8ZhW/lx2q2VphMKCJtlNGWHx7/Dg8gKJVmOYpXt0tpCO93hO5XqnCHohQQmBcMrdCHJmgOI2PY2ETzdVe2KohleDzETBF0ziU7bh3d03FQjwHPE+FcuaO9yNk5uQFKgTuE7L72+Obx4WRtL5upsScbazfLhLrxulwD2lUtBdbWb4xEpKxJtLNJVup67/YFN8UWeXw6X/Mq3mvPmZaT9M4Z2ms8Ho2Bx7VL9Lg8erZ8r9/5hxhZPyBldO8u71mrR+K21UP+qCUEOJ1PefG7ehhPHeXGsi9vBraM93gTnYEDDEA/poDFa/ZracTO1ByaY+z0+veg3il9d08lj//fyNn2m2cIy70f3ZPBiDx0/uo6Cf3/Ox8V92K7S2cN/KNu9+aiYPiDId0dJgzCo9cUtAf55M5MSHKuzUtXLZfNhHBGudKSV7B1eIdodjj1xh5uz3vIDu9/s+0avYZy7bk9vWHrDdY2+3vV9N9g1mQ2KI4h+RmZYxpItd0ObzwHC1GOIxIiqq6wQnY4pn3gMAAe1kIzFI8gIQ5NMtGeD2kk8W1h5y0kfjIZOVg32mNsPgCu1i4xfkkvanXFED5qyoR805TGCOMdIdm5JbCaYzbgoxhKsCp4Y9RWoE1SI3k5lm/VM22loDKd5giRULc3iIkH1fJGXpdHY5muqALJSOu5Nyuf2YWLH/3Y1EDoxlgpM5nKOxD2id6aLsUvk44St/YR37rtFjOXLEgXlFMMNksNfrzyRBKlIIpjQi/xoB7vS/gvrrxr7l5dftAyG3ejqO7Z//OiP8VUHXw/9vcDD7yIX7P2m+VtL7RMCasfcrwLFK7wXdreniYkvZkRn93KXoL6sF6tVUb7VlpyFVLgXA8poaLqpRQgWYoo9T7JHRLTKi3bSylABPwpeyQ8hFnxBIg44SkVzqZXHE3bECDG5I4aiLa5PXUAPQorScbTm78n8ROy3EvGnKzD0oNQT4ivxecpo/Hpj7/jaiyPyFCsix2QuT3JdeP6AFzATbrEYdBndd/6eg/eCHwqrIldYuCDUtODo4z81OcHaCoAwKwgPA6UU7E/VEid/zpH3qvTGTTm4q00e//8qr+KSAhCJ/Z/h0r9cyDz5BMh8bzJvg74Zzj3faQWBrp+7RjmcW5vh3Ox1z6uiHKDrvBG/lezV6Zjjnf8A</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc+I6DP4rTPaxE+JcuGUKMzTQbVq6sIR2t33ZcR0BbhOHxg5Qfv2xA2SBXg7bvsBYkT59kmVJpxzHkeW2OYdU0ISVlnHEuJtLm1qWMjfBnHKX4Ri4K4gbtK97rlVGLt6aaCW/09T+VOt2o+6ED7ozRkj+2Eiv1yykE6tGSNWuwQPBUpXzDHzGBWaiqVnIdHTT1E1nhGquXXMtp1y1qvda6RZSLrGlShlpG1JL3tSmQsxcw1gsFuWFXU7SiWEhZBq/r3sBmUKMtdbpOqLcUdra6JNyCASiiJRJEhunxp7OacjdgE4YFlkKG1/he76QgRqG1Ak5nXzTClsIfTZO8qOHWcIowRFdYZWfaxDTJCy1o0mSUjGN3w3CRApYhyXRiemwb5qxT+1IoD2GKcc6n2JzgzWEMaTACJRuhn5T+3bcreWmoxQzPk7SmO8f/40PsDlEyQxCnW/D2lA7HvCNTLVOgbg+I1HG6Rx+qGKdYQJ8c5tAjocqDVIY02WPclmgS67YGbv0Do7rbHToBLj4zAXtXM4a5BZHGbROxmfxxZJfXBkekLA+cgb3yLuxh5Zfb+YEdpVzQXG16+NBURZFtLZ4ul8Z4aXfGGbRYOT8Gtz6/fPR3LzveXf9gfXDNhcQwOrF6K589HwSpMvf6C5IGZ5evVze3cbpOLPHswvxPb2z7cXJRfXSgJsn5/f8JX50JuF1vXPpO/4K34nBVTrgve+J2Z+vGpVfs8ve6ORXxH/Cz0o4ul7dsgdngh4nMyNa/qw9I9w59+c3S8v7Pnjq+w1qde+aRTg7/Pdl2zcfZA+PQMT2qMrA75TO5S1h8XEzUxIa6uNc1Z2p5sMFMKG1lJXqHW4m2x0NXXmH6zOqeZ1KzbLtqmnZnul0UcVGlUbDPEftjnfe2TaZNYsDil7CxlT5Ui13XTYfEySxy4GFkOrzJJOdjmsfIHawwCWfDeUjSBiHUaLas6g+IvKUJfXniTldVrF4GEeLqGJppR+J6LN+2h4LSPd6son2evIQCJ1RUI1b1TWXhc2FzMUznmciMstzXGaQydaeqi4r7eoVg9N4FoFiasRJmEVQnk1neWYMvv63dEx4Lh12R/lrezeuw2/bFEidkCoFrmI5A3mN8MZwMbeBvB+wvRvwFr6dhVQ9LJlPkVKyZrL/6W+ZqPooaqTted3AC7a0C+1/sP6ssdfvf9Ky02sHg6/Y/vGCP+ZnAT7v+muOe19lLqv3i+avLY0PCtA4rP3CUTinO263a5oc+HJEtLYv9xmXn8vZfJ7lb7WmRmEq4eV8MisGsowASCaH2MsoeQJmFCjGURtDQfzAeSHfp5iJKQsEFhDL5lLKj0esiAFwtSL6sisuj90/91zK1AlYirdkXiTXW8X4ww2YuETpSfFA/i2SNPx7Y29g7fiRccoNUVA2USe1Lby8UxckkbBUzrkk3QV/C+At5/vCIskFFyEL6iET8P6XkhpgTQ0TkmRM+B0tF+wO1ZyneJmB+1fpFUw+t4tFnv7/Jq/TvAQIyPWf0xxf7WOuegJssjOYN04PZ7PT9eq1Tgehs4aZz+baejZXu+2zIil77FqvxK8lO3k6rPHWfw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:07CD4EC87DD00B91E05307991F0A6EAB</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:07CD4F6FC1E51B99E05305991F0ACC9D</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:07CD572336123C14E05305991F0ADCFD</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07CDB9D3BC23402AE05305991F0AF946</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07CDB9D3BC23402AE05305991F0AF946</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07CDF4C776473F4AE05307991F0AD709</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07CDF4C776473F4AE05307991F0AD709</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1374c29-3da0-4542-9624-f8aa38171e26</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>897fcb39-4d07-428f-90ef-e0c8aa2fd43c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a2bf9c5e-c9aa-4ad6-95fe-1a8e32d397d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43cffce0-e6b5-4d78-a1f3-9a672308e390</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80c744b4-7a39-4782-8fb3-bee3ef65b7f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00004_DMRCreateConsume_FUNC_RTL_with_Invalid_RightsTokenId" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="4b3a4910-8665-4f98-8869-e00af237eb2d"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Store and Set Invalid RightsTokenId" id="69e42214-b5d5-4bb3-b554-183c1dddbfb7"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("OriginalRightsTokenId",testCase.getPropertyValue("RightsTokenId"));


//set invalid RightsTokenID
def rightsTokenId = "urn:dece:rightstokeind:org:dece:"+testCase.getPropertyValue("RightsTokenOid");
testCase.setPropertyValue("RightsTokenId",rightsTokenId);</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore RightsTokenId"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("RightsTokenId",testCase.getPropertyValue("OriginalRightsTokenId"));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID" id="e06208eb-5f9d-4eab-8ec6-041a8d36c917"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A5DD51A0E6F25E05305991F0A5F66</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A5DD51A0E6F25E05305991F0A5F66</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>OriginalRightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A5DD51A0E6F25E05305991F0A5F66</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>BadRequestRightsTokenIDNotValid</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D586970EE058A0E05305991F0AFD81</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D586970EE058A0E05305991F0AFD81</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:067810872FAF63C7E0533D991E0A53DE</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:06780D1E16496A22E0533E991E0AE3C0</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:06780CF8431D5989E0533D991E0A01FA</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVbZcuI6EP0VyvOYMpaN2VyBKodlQjYIJnMzeZlS5DYosWWwZCB8/UgGHCDLZZInl9q9nG4ddfcpx1FoOS7nkAgas8IyChl3MmlDSxPmxJhT7jAcAXcEcTz3+sqxisjBWxOt0Gs3tD9li1goCOp61SS2bj8irONataSXKmY9QFCrWnZVqnKeQo9xgZloaBYybd1EulUboZqDLMdCRbteedAKvyDh0rdUKSJtA2rJG9pEiKljGIvForgoFeNkbFgImcb99ZVHJhBhrXm6zigLlDQ3+qToA4EwJEUSR8apsadz6nPHo2OGRZrAJpb/USxkoLohdXxOxz+03Bb8Hgvi7NjCLGaU4JCusKrPNYhJ7BfccBwnVEyiD5MwkXKsw5LoxLTZD83Yh3akoz2ECcc6n2Bz42sIASTACBTuhr2G9uO4W8tMRwlmPIiTiO8f/w0PsDmE8RR8nW/T2kA73uE7lWqeAnF6jIQpp3O4UWSdYgJ8c5tAjndVGCQQ0OUV5ZKgS67QGbvwDo7rarTpGLj4ygXtXM7ayS8cptCcD1K6uHj+3b9GrYvZqENPgrv+zwDzOWpkAHaVM0F+tevjASlzEq0tuv3nyt3IHdwOzqt4GIY98GbzcnzOzLvh5Oct7nhDPBjY0WW/JJ6Hxt21H1xUBsvuqrxklbPqT3tl9pJ78fTQvZ7hefe2YveMbhdOOgtirMAePT16fHYR3N+y6c3Fw4o+tKMTKzpHk//MS/j9VOJnaZn5EAwvF/6sfNkxogkZut6j2Vm5T6Wb8yrcRQEO7tN4k+4B/n3Z9s176eMTELE9Khr02oWuvCUsPm9mSkJ9PchUnalqPlwAE1pTWane4aSy3VHfkXe4PqNKtWYi+UC6brdSalU7qFwqtet1s4Pccqnd2TaZNYoDiK2YBVTFUi13TZvPAZLI4SArlujzOJWdjmufeGxjgQs9NpSPIGYcRrFsz6tlUjGtahW9LMAMxr4VLR7R84u/0Ao3seizfuIGApK9nmyaez15CIROKajGrXjNJbG5kLWQDEhFaBbnuMggla09UV3Wsexa2eA0moagkBpR7KchFKeTaVYZg6+/lo4Jz6TDzih7bR/mdfhvWwKp41OlwFUuZyCvEd4ZLuY2kY8TtncT3rp3U5+qhyXrKRJK1kj2f73SRPEj54jbanW8lreFnWv/g/VXjVv9/hct21euN/iO7Z+W98f8qoOvh/5e4KvvIpfs/ab5W0vjEwIah9zPA/lzuhN2u6bJgS9HRHP7cme4OCum83mavdUqQiUjke4NORFNwwOSygn2MoqfgRm5C+OodSFHfRA5l+/jS8WEeQILiGRnKWTHI/ZDD7jaD3uyJS6PXT73Qsq6CViK92StUO62CvGn6y9xiNKT4oH8LOLEf72ud3ztxJF5yvVQUDZWJ7UqvHxAChJLt1QOuTjZdf6eg/eC7wvzIudYhGTTYyrg4z8FNb0aGiYkTpnotbVMsDtRM5ziZQrOq9IbN9nQzrd4+v9rvE4zChCQuz+nmX+1jDmK/2y8M5U3QQ8HM2p1a3bJbJfrtfruYEZm182Lsoeu+Ub8VrJTp0OON/8C</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPuYMbaMzcUTmKE2yZAASTGlaV86iiwbNbYMkuxAfv2RTHCBXA5Nnjxa7+Xb1afdPecwTSy3zzlmgmS0tk4Tyt1S2tVyRt0McsJdClPMXYHcoD8euVbddOHORKsN/a72u2NhAKwo0pvIaep2y4z0doiAfh+G2A5Bq+E0TanKeY6HlAtIRVezTGDrwNSt9sxsuyZwrUbdcexfWm2OGZe+pUpdWm1BrXlXWwixdA3j8fGx/tioZyw2LNMExt14FKAFTqHWO99mVAZivWd9VA8xwkmC6ihLjXPjQOc85G5AYgpFzvBzrPCtWKZhdgypE3ISf9EqWxwOaZSVRw/SjBIEE/IEVX3GWCyysNZP4owRsUjfTAKYyrGO10hHwKZfNOMQ2omODhAyDnW+gODZ1xRHmGGKcO37dNjVvpx2a6XpjEHKo4yl/PD4b3gwLXCSLXGo811az9BOd/hKpXrnGLlDipKckwJPFFmXEGH+fJsYne6qdstwRNYjwiVB11yhM/bhHR231fBJjLn4yAXtXc7WyRwmOe7171qdUcMfNX7YnGYT5/qOPmyiyTR32t0SwL5yKaiudns8ImVFoq0FovHl2X3gXP7E4Bqiy7F/Mb1xVjQNrDt2ZaPFlZNHrc56eu3NzSB/WrKHYTr9lqz4XUxMNJzHT+nqx2bzxP6cffu5nNNNg8+QGDy1mzPh30Tj9ep7EPrJfDUH0/vcy/7Mfk3icViwQWte8Am3J/QuHNmGnwknPBte0ZhfDy6//iBBEMWN8WXsiUU0b6aF2a3S2cN/KNu9+SC//4OR2B0VDYZ+7ULeEhTvNzMlIaEelaruUjUfLjAVWk9Zqd7h5rLdkdCVd7g9m81W2/TBADTtTrNvWQPTaTQGnQ4YmP1BwzN3TWaL4giil9GIqFiq5W5p8z5AlLoc0xAzvchy2em49o5HHwpYG9KpfAQZ5XiWyfYM7iGJVxmTzwGDDl1AFIlOXFiFVptk4obesH4kMDvoyQAc9OQpRmRJsGrcitdcEpsLWYsVLHKRgHoB6xTnsrUz1WVdy247BifpMsEKqZFmYZ7g+nKxLCtj8O3X0iHipXQ6mJWv7c28jv/tSiB1QqIUuMrlK5bXiF8ZLmCXyNsJ2/sJ79z385CohyXrKRhBWySHv/7SRPGj4kjf8waBF+xgV9r/YP1RY+/m5oOW/qgf3H7G9rcX/AYfdfDx0J8LPPoscsneT5q/tDTeIaBxzP0qUFiQvbC7NU0OfDkieruXu4L1VT0virx8qy3TbBhMujfkRARGgFEuJ9hmlj1galQujJPWhQr1UeRKfogvFwsaCChwKjtLrTyesB8GmKv9cChb4vrU5fMgpKybwGvxmsxL5G6rEL+7/iIXKT0pvpWfx4yFf6/rFV97cWSecj0UhMbqpFaFzRukQJl0S+SQy9i+89ccvBb8UFgVucIiJJvuc4Hf/lNT06urQYSynIqhr5WC/Yla4hSbJXb/Kr1wUw7taosn/7/G66SkAMJy9+ek9K+WMVfxn8Z7U/k56IvB7F207QbwnU67Uw5mfzuYTXDRr4pygK73QvxSslenY473/gM=</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1374c29-3da0-4542-9624-f8aa38171e26</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>897fcb39-4d07-428f-90ef-e0c8aa2fd43c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a2bf9c5e-c9aa-4ad6-95fe-1a8e32d397d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43cffce0-e6b5-4d78-a1f3-9a672308e390</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80c744b4-7a39-4782-8fb3-bee3ef65b7f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>69e42214-b5d5-4bb3-b554-183c1dddbfb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e06208eb-5f9d-4eab-8ec6-041a8d36c917</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00005_DMRCreateConsume_FUNC_RTL_with_LeaseExpiration_Element_In_request" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="91c5c42d-8f8d-4132-b826-7a0a78728e37"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="b7a8f52e-45b1-4920-afea-59954c316afb"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="04e98c4c-bc2e-46d2-b8af-833033ace7b8"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem" id="3b8c5e27-371c-4fed-aa5b-b08c40e92766"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("DMRConsumePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRConsumePost" id="48aadf91-26eb-4871-ad89-5075c88fa9b6"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRConsumePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
<DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
   <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
   <LeaseExpiration>${#TestCase#LeaseExpiration}</LeaseExpiration>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 403 Forbidden")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPuYMbaMzcUTmKE2yZAASTGlaV86iiwbNbYMkuxAfv2RTHCBXA5Nnjxa7+Xb1afdPecwTSy3zzlmgmS0tk4Tyt1S2tVyRt0McsJdClPMXYHcoD8euVbddOHORKsN/a72u2NhAKwo0pvIaep2y4z0doiAfh+G2A5Bq+E0TanKeY6HlAtIRVezTGDrwNSt9sxsuyZwrUbdcexfWm2OGZe+pUpdWm1BrXlXWwixdA3j8fGx/tioZyw2LNMExt14FKAFTqHWO99mVAZivWd9VA8xwkmC6ihLjXPjQOc85G5AYgpFzvBzrPCtWKZhdgypE3ISf9EqWxwOaZSVRw/SjBIEE/IEVX3GWCyysNZP4owRsUjfTAKYyrGO10hHwKZfNOMQ2omODhAyDnW+gODZ1xRHmGGKcO37dNjVvpx2a6XpjEHKo4yl/PD4b3gwLXCSLXGo811az9BOd/hKpXrnGLlDipKckwJPFFmXEGH+fJsYne6qdstwRNYjwiVB11yhM/bhHR231fBJjLn4yAXtXc7WyRwmOe7171qdUcMfNX7YnGYT5/qOPmyiyTR32t0SwL5yKaiudns8ImVFoq0FovHl2X3gXP7E4Bqiy7F/Mb1xVjQNrDt2ZaPFlZNHrc56eu3NzSB/WrKHYTr9lqz4XUxMNJzHT+nqx2bzxP6cffu5nNNNg8+QGDy1mzPh30Tj9ep7EPrJfDUH0/vcy/7Mfk3icViwQWte8Am3J/QuHNmGnwknPBte0ZhfDy6//iBBEMWN8WXsiUU0b6aF2a3S2cN/KNu9+SC//4OR2B0VDYZ+7ULeEhTvNzMlIaEelaruUjUfLjAVWk9Zqd7h5rLdkdCVd7g9m81W2/TBADTtTrNvWQPTaTQGnQ4YmP1BwzN3TWaL4giil9GIqFiq5W5p8z5AlLoc0xAzvchy2em49o5HHwpYG9KpfAQZ5XiWyfYM7iGJVxmTzwGDDl1AFIlOXFiFVptk4obesH4kMDvoyQAc9OQpRmRJsGrcitdcEpsLWYsVLHKRgHoB6xTnsrUz1WVdy247BifpMsEKqZFmYZ7g+nKxLCtj8O3X0iHipXQ6mJWv7c28jv/tSiB1QqIUuMrlK5bXiF8ZLmCXyNsJ2/sJ79z385CohyXrKRhBWySHv/7SRPGj4kjf8waBF+xgV9r/YP1RY+/m5oOW/qgf3H7G9rcX/AYfdfDx0J8LPPoscsneT5q/tDTeIaBxzP0qUFiQvbC7NU0OfDkieruXu4L1VT0virx8qy3TbBhMujfkRARGgFEuJ9hmlj1galQujJPWhQr1UeRKfogvFwsaCChwKjtLrTyesB8GmKv9cChb4vrU5fMgpKybwGvxmsxL5G6rEL+7/iIXKT0pvpWfx4yFf6/rFV97cWSecj0UhMbqpFaFzRukQJl0S+SQy9i+89ccvBb8UFgVucIiJJvuc4Hf/lNT06urQYSynIqhr5WC/Yla4hSbJXb/Kr1wUw7taosn/7/G66SkAMJy9+ek9K+WMVfxn8Z7U/k56IvB7F207QbwnU67Uw5mfzuYTXDRr4pygK73QvxSslenY473/gM=</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVbZcuI6EP0VyvOYMpaN2VyBKodlQjYIJnMzeZlS5DYosWWwZCB8/UgGHCDLZZInl9q9nG4ddfcpx1FoOS7nkAgas8IyChl3MmlDSxPmxJhT7jAcAXcEcTz3+sqxisjBWxOt0Gs3tD9li1goCOp61SS2bj8irONataSXKmY9QFCrWnZVqnKeQo9xgZloaBYybd1EulUboZqDLMdCRbteedAKvyDh0rdUKSJtA2rJG9pEiKljGIvForgoFeNkbFgImcb99ZVHJhBhrXm6zigLlDQ3+qToA4EwJEUSR8apsadz6nPHo2OGRZrAJpb/USxkoLohdXxOxz+03Bb8Hgvi7NjCLGaU4JCusKrPNYhJ7BfccBwnVEyiD5MwkXKsw5LoxLTZD83Yh3akoz2ECcc6n2Bz42sIASTACBTuhr2G9uO4W8tMRwlmPIiTiO8f/w0PsDmE8RR8nW/T2kA73uE7lWqeAnF6jIQpp3O4UWSdYgJ8c5tAjndVGCQQ0OUV5ZKgS67QGbvwDo7rarTpGLj4ygXtXM7ayS8cptCcD1K6uHj+3b9GrYvZqENPgrv+zwDzOWpkAHaVM0F+tevjASlzEq0tuv3nyt3IHdwOzqt4GIY98GbzcnzOzLvh5Oct7nhDPBjY0WW/JJ6Hxt21H1xUBsvuqrxklbPqT3tl9pJ78fTQvZ7hefe2YveMbhdOOgtirMAePT16fHYR3N+y6c3Fw4o+tKMTKzpHk//MS/j9VOJnaZn5EAwvF/6sfNkxogkZut6j2Vm5T6Wb8yrcRQEO7tN4k+4B/n3Z9s176eMTELE9Khr02oWuvCUsPm9mSkJ9PchUnalqPlwAE1pTWane4aSy3VHfkXe4PqNKtWYi+UC6brdSalU7qFwqtet1s4Pccqnd2TaZNYoDiK2YBVTFUi13TZvPAZLI4SArlujzOJWdjmufeGxjgQs9NpSPIGYcRrFsz6tlUjGtahW9LMAMxr4VLR7R84u/0Ao3seizfuIGApK9nmyaez15CIROKajGrXjNJbG5kLWQDEhFaBbnuMggla09UV3Wsexa2eA0moagkBpR7KchFKeTaVYZg6+/lo4Jz6TDzih7bR/mdfhvWwKp41OlwFUuZyCvEd4ZLuY2kY8TtncT3rp3U5+qhyXrKRJK1kj2f73SRPEj54jbanW8lreFnWv/g/VXjVv9/hct21euN/iO7Z+W98f8qoOvh/5e4KvvIpfs/ab5W0vjEwIah9zPA/lzuhN2u6bJgS9HRHP7cme4OCum83mavdUqQiUjke4NORFNwwOSygn2MoqfgRm5C+OodSFHfRA5l+/jS8WEeQILiGRnKWTHI/ZDD7jaD3uyJS6PXT73Qsq6CViK92StUO62CvGn6y9xiNKT4oH8LOLEf72ud3ztxJF5yvVQUDZWJ7UqvHxAChJLt1QOuTjZdf6eg/eC7wvzIudYhGTTYyrg4z8FNb0aGiYkTpnotbVMsDtRM5ziZQrOq9IbN9nQzrd4+v9rvE4zChCQuz+nmX+1jDmK/2y8M5U3QQ8HM2p1a3bJbJfrtfruYEZm182Lsoeu+Ub8VrJTp0OON/8C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:06780CF8431D5989E0533D991E0A01FA</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:06780D1E16496A22E0533E991E0AE3C0</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:067810872FAF63C7E0533D991E0A53DE</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D586970EE058A0E05305991F0AFD81</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D586970EE058A0E05305991F0AFD81</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A695789C133A1E05307991F0A80D6</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A695789C133A1E05307991F0A80D6</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2019-06-04T02:30:57</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1374c29-3da0-4542-9624-f8aa38171e26</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>897fcb39-4d07-428f-90ef-e0c8aa2fd43c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a2bf9c5e-c9aa-4ad6-95fe-1a8e32d397d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43cffce0-e6b5-4d78-a1f3-9a672308e390</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80c744b4-7a39-4782-8fb3-bee3ef65b7f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>69e42214-b5d5-4bb3-b554-183c1dddbfb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e06208eb-5f9d-4eab-8ec6-041a8d36c917</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b7a8f52e-45b1-4920-afea-59954c316afb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>04e98c4c-bc2e-46d2-b8af-833033ace7b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b8c5e27-371c-4fed-aa5b-b08c40e92766</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>48aadf91-26eb-4871-ad89-5075c88fa9b6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_P0_New_AFM_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DiscreteMediaRightCreateConsume_FUNC_by_Full_Access_User_With_AFM_NSM" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="9879571e-03ec-4547-af67-01a9d1081ceb"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreateConsume" id="b6cc8768-c47a-4908-93f7-68a91565222e"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreateConsume" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#NsmAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#ScsaAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
    <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 201 Created")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbvc6I8EP5XHO5jBwmIVZnqDKLt651trdje1S+dGILEYlASwPrXX4JK1f54vXamUyfL7rPPbja7e8HgPDQsmzEccxLR0moeUmbl0qaSxNSKICPMonCOmcWR5drXfcsoAwvuTJRSr9NUnkAD1BCa+Kqp18S/hu+rsFbFqocmDW9y7pvn1YpQZSzBPco4pLypGEA3VdBQdTACdcs0xV+5outjpfSAYyawhUoZKFtSK9ZUAs4XlqZlWVbOKuUonmoGALr257rvogDPodK62ESUO4pbW31U9jDCYYjKKJprF9qBzoXHLJdMKeRJjLe+vI98AQ00NKHjMTL9oRS22OtRP8qPDqQRJQiGZA1lfq4xDyKvZIfTKCY8mH8YhA4ksIpXSEW6SX8o2iG1E4EOGMYMqiyA+hZriH0cY4pw6X7Yayo/Tru13HQUQ8r8KJ6zw+O/8cE0xWG0wJ7KdmFtqZ0O+E6mWhcYWT2KwoSRFN/IYl1AhNn2NjE6Hao0iLFPVn3CRIGumGSn7dM7Om6y0SFTzPhXLmjvcjYgDzBMcKvz5/JqXO8sF7OMOzM8Mh7X90RD69ufWTMnsK+cC4qr3RyPirIooo3Fn3XvJvht1tbLu4Bkjcrs5qo+XqGoS/SrTL/+dYnXVXMwDScP3XQa2g06uvmPGCk5a18up/dTMGj/5NnDmtXJcp2QYPD4YPfsl7uqc90GTi191q9CNnPHE/prGDzjNTXN2Qpmq5ug2u6PbX35251dBePh2V3XWbLwYaj1cYrMFKBGG6SP4351QO3gjHve716zCGeP/6Fs9+bdZDLDiO+Osgx6ndKluCXIP29mUkI81c9VrYVsPoxjypWWtJK9w0pEuyOeJe5wcwZG27Dt82pdF0+n0QFdUK2AaqOhXwIbdDu1XZPZsDii6ETUJ9KXbLmbsvmcIJpbDFMPx2oaJaLTMeUTxA7ksNSjQ/EIIsrwKBLtWYfV5yCbRtE5ryPdh9mz79XXyywxlNJNxG/pbWz7HMcHTVnXD5ryECOyIFh2blnYTFQ24yIZS5gmPNTLKSxTnIjeHss2axlmvaoxMl+EWFLV5pGXhLi8CBZ5ajS2+TVUiFguHXZH+XP7MLDjb7scCB2PSAUmY2ljcY/4nelS2QXyccDmfsA7eDvxiHxZIqE8JmjD5PDTa53IAimKxHacruu4O9qF9j9Yf9XYub39omWnb7uD79g+Oe6T/lWAr7v+nuP+d5mL6v2m+VtL7ZMC1I5rv3DkpWTP7W5PExNfzIjW7uUuYXlZTtI0yd9qTc7CWMCLAaVXNWBoLkaJmGIvo+gZU61A0U5aGQriR84L+SHFhAfU5ZDjuWgupfx4wo7oYiZ3xJ5oi6tTF9ADlyJ1HK/4ezInFPutZPzpCowsJPWEeCB+sij2Xm/sHaw9PyJOsSJyQqfyJNeFlw/qAkUClohBF8X74O8BvOf8UFgkueDCRUFNEo4//lKSE6ypQISihPJeR8kF+1M158lfFth6VXoDkw/uYpMn/7/KqyQvAYTF/s9Iji8XMks+ATrdm8xbp0fDuQIajg5qtmOc1y73h7PTtbtFUg7Ytd6I30r28nRc462/</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZdU+o8EP4rTL08U5pWSqEjzGDRIwqKVEW9cUIaIFqS0qQF/PVvUqRS/Hg5etXJdvfZZzeb3T3icBZabotzHAvCaGk5Cyl3M2lDS2LqMsgJdymcYe4K5PqtXte1ysCFGxOt1Gk3tKcqqo4s07F1OEJIr0Aw1uvABnq9btvOCFZHTgCkKucJ7lAuIBUNzQJmRQd13QQ3oOZWbNcEZccGj1rpDsdcYkuVsrRak1ryhjYVInINY7FYlBeHZRZPDAsA07jvdX00xTOoNY/WEWWO4uabPioHGOEwRGXEZsaRUdA5CrjrkwmFIonxm6/gK1/AAHVD6gScTA603BYHHTpm2dGDlFGCYEheocpPD4spC0qtcMJiIqazL4MwgQLW8RLpyKzQA80oUtsTqMAw5lDnU2i+YQ3wGMeYIly6HXQa2sF+t5aZ3sSQ8jGLZ7x4/Dc+mKY4ZBEOdL4J643a/oCfZKp5hJHboShMOEnxpSrWCCLM324To/2hSv0Yj8myS7gs0CVX7IxtejvHdTbaZIK5+MkFbV3OGuQOhgluWmcs7c9F/eHeORxeG89jcY6iu/556/ShkRHYVs4E+dWujztFmRfR2iI8fLYWr+hP7bTLr196Fx2n/3BzWRPT8eCsC46TAetXHZvepnfHi9FrjZz7Zusve40AuX6cn6Ezu/u33/Paw2FnDtuH9vWt15sPg/rLvfVasZ5vVwjWgHN2zP/4nUH9MZnRGq5X0eM1fQ2taH7uL8/va8MX+ri0Xuxula3Is01TP7AHk3R0MbSG8DwdwPYdMy56jTycLf5F2ebN+8noGSOxOaoy6LRLp/KWoPi+mSkJCfRxpupGqvlwganQmspK9Q43ke2OBK68w/UZWMdWu12reKcAVJ2T0xNgHwK7XjdPQcs2a+amyaxZ7FD0GB0T5Uu13HXZfE8QzVyOaYBjPWWJ7HRc+waxDQUsdehAPgJGOb5hsj2bQnAa4hVaRWMRcMzDERyvnGeklS6ZuKJXcWsscFzoyaZZ6MkDjEhEsGrcqq65LGwuZC7mME1EaJZTWKY4ka09Vl3WtSo12+BkFoVYMTVmLEhCXI6mUZYZg6+/lg4Rz6SDk5vstX0Z1+6/TQqkTkCUAlexHGN5jfiT4QI2gXwdcGU74A18KwmIelgynyImaM2k+Ou9TFR95DXS8rwT3/M3tHPtf7D+qbF3dfVDy3a35fd/Y/vk+U/mTwF+7vp3jru/ZS6r95fmHy2NbwrQ2K393FGQki23mzVNDnw5IpqblzuH5Xk5SdMke6uOGoWxhJfzybQNYBk+RokcYqsb9oKpkaMYe20MOfEd57m8SDERU+oLKPBMNpdSdtxjRfQxVytiR3bF5b77Z8GlTJ3AS/GZzAvleqsYf7sBIxcpPSnuy8+CxcH7jX2CteVHxik3REHoRJ3UtrD6oi4Qk7BEzjkWb4N/BvCZ86IwT3LORciCGiUCf/2npAZYQ4MIsYSKTlvLBNtDNeMpVhF235U+wGRzO1/kyf9v8jrJSgBhuf5zkuGrfcxVT4BOtgbzm9Od2XwI6p4JnJZnVZ3CbPZOWid5Ugrsmh/EHyVbedqt8eZ/</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02B309C107AC267FE05305991F0ACEAE</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:02B2AA65814179D0E05305991F0A0ED7</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:02B2DD84CF0067EFE05305991F0A5181</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:NsM</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-08-27T12:44:03</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08C2A96150792DF8E05307991F0AD27C</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08C2A96150792DF8E05307991F0AD27C</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8baf78cd-6dae-4618-b353-3d5487be7cfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2cafa7b2-9bf2-478a-b686-78ce4a56b267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce367e17-dfc0-4f39-8618-2fe7480b333e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72fef843-6437-43db-81e3-f82c45f3d181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4220858c-44fa-444b-8f21-bfafcb0bb1f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9368f708-9828-4f39-969a-8d657911acd5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6cc8768-c47a-4908-93f7-68a91565222e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DiscreteMediaRightCreateConsume_FUNC_by_Full_Access_User_With_AFM_SCSA" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="85191af0-d357-44af-b92b-2ca1b354c68b"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreateConsume" id="f95d5f65-30db-498a-b0ae-fa1f62f0f7b4"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreateConsume" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#NsmAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#ScsaAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
    <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 201 Created")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbvc6I8EP5XHO5jBwmIVZnqDKLt651trdje1S+dGILEYlASwPrXX4JK1f54vXamUyfL7rPPbja7e8HgPDQsmzEccxLR0moeUmbl0qaSxNSKICPMonCOmcWR5drXfcsoAwvuTJRSr9NUnkAD1BCa+Kqp18S/hu+rsFbFqocmDW9y7pvn1YpQZSzBPco4pLypGEA3VdBQdTACdcs0xV+5outjpfSAYyawhUoZKFtSK9ZUAs4XlqZlWVbOKuUonmoGALr257rvogDPodK62ESUO4pbW31U9jDCYYjKKJprF9qBzoXHLJdMKeRJjLe+vI98AQ00NKHjMTL9oRS22OtRP8qPDqQRJQiGZA1lfq4xDyKvZIfTKCY8mH8YhA4ksIpXSEW6SX8o2iG1E4EOGMYMqiyA+hZriH0cY4pw6X7Yayo/Tru13HQUQ8r8KJ6zw+O/8cE0xWG0wJ7KdmFtqZ0O+E6mWhcYWT2KwoSRFN/IYl1AhNn2NjE6Hao0iLFPVn3CRIGumGSn7dM7Om6y0SFTzPhXLmjvcjYgDzBMcKvz5/JqXO8sF7OMOzM8Mh7X90RD69ufWTMnsK+cC4qr3RyPirIooo3Fn3XvJvht1tbLu4Bkjcrs5qo+XqGoS/SrTL/+dYnXVXMwDScP3XQa2g06uvmPGCk5a18up/dTMGj/5NnDmtXJcp2QYPD4YPfsl7uqc90GTi191q9CNnPHE/prGDzjNTXN2Qpmq5ug2u6PbX35251dBePh2V3XWbLwYaj1cYrMFKBGG6SP4351QO3gjHve716zCGeP/6Fs9+bdZDLDiO+Osgx6ndKluCXIP29mUkI81c9VrYVsPoxjypWWtJK9w0pEuyOeJe5wcwZG27Dt82pdF0+n0QFdUK2AaqOhXwIbdDu1XZPZsDii6ETUJ9KXbLmbsvmcIJpbDFMPx2oaJaLTMeUTxA7ksNSjQ/EIIsrwKBLtWYfV5yCbRtE5ryPdh9mz79XXyywxlNJNxG/pbWz7HMcHTVnXD5ryECOyIFh2blnYTFQ24yIZS5gmPNTLKSxTnIjeHss2axlmvaoxMl+EWFLV5pGXhLi8CBZ5ajS2+TVUiFguHXZH+XP7MLDjb7scCB2PSAUmY2ljcY/4nelS2QXyccDmfsA7eDvxiHxZIqE8JmjD5PDTa53IAimKxHacruu4O9qF9j9Yf9XYub39omWnb7uD79g+Oe6T/lWAr7v+nuP+d5mL6v2m+VtL7ZMC1I5rv3DkpWTP7W5PExNfzIjW7uUuYXlZTtI0yd9qTc7CWMCLAaVXNWBoLkaJmGIvo+gZU61A0U5aGQriR84L+SHFhAfU5ZDjuWgupfx4wo7oYiZ3xJ5oi6tTF9ADlyJ1HK/4ezInFPutZPzpCowsJPWEeCB+sij2Xm/sHaw9PyJOsSJyQqfyJNeFlw/qAkUClohBF8X74O8BvOf8UFgkueDCRUFNEo4//lKSE6ypQISihPJeR8kF+1M158lfFth6VXoDkw/uYpMn/7/KqyQvAYTF/s9Iji8XMks+ATrdm8xbp0fDuQIajg5qtmOc1y73h7PTtbtFUg7Ytd6I30r28nRc462/</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZdU+o8EP4rTL08U5pWSqEjzGDRIwqKVEW9cUIaIFqS0qQF/PVvUqRS/Hg5etXJdvfZZzeb3T3icBZabotzHAvCaGk5Cyl3M2lDS2LqMsgJdymcYe4K5PqtXte1ysCFGxOt1Gk3tKcqqo4s07F1OEJIr0Aw1uvABnq9btvOCFZHTgCkKucJ7lAuIBUNzQJmRQd13QQ3oOZWbNcEZccGj1rpDsdcYkuVsrRak1ryhjYVInINY7FYlBeHZRZPDAsA07jvdX00xTOoNY/WEWWO4uabPioHGOEwRGXEZsaRUdA5CrjrkwmFIonxm6/gK1/AAHVD6gScTA603BYHHTpm2dGDlFGCYEheocpPD4spC0qtcMJiIqazL4MwgQLW8RLpyKzQA80oUtsTqMAw5lDnU2i+YQ3wGMeYIly6HXQa2sF+t5aZ3sSQ8jGLZ7x4/Dc+mKY4ZBEOdL4J643a/oCfZKp5hJHboShMOEnxpSrWCCLM324To/2hSv0Yj8myS7gs0CVX7IxtejvHdTbaZIK5+MkFbV3OGuQOhgluWmcs7c9F/eHeORxeG89jcY6iu/556/ShkRHYVs4E+dWujztFmRfR2iI8fLYWr+hP7bTLr196Fx2n/3BzWRPT8eCsC46TAetXHZvepnfHi9FrjZz7Zusve40AuX6cn6Ezu/u33/Paw2FnDtuH9vWt15sPg/rLvfVasZ5vVwjWgHN2zP/4nUH9MZnRGq5X0eM1fQ2taH7uL8/va8MX+ri0Xuxula3Is01TP7AHk3R0MbSG8DwdwPYdMy56jTycLf5F2ebN+8noGSOxOaoy6LRLp/KWoPi+mSkJCfRxpupGqvlwganQmspK9Q43ke2OBK68w/UZWMdWu12reKcAVJ2T0xNgHwK7XjdPQcs2a+amyaxZ7FD0GB0T5Uu13HXZfE8QzVyOaYBjPWWJ7HRc+waxDQUsdehAPgJGOb5hsj2bQnAa4hVaRWMRcMzDERyvnGeklS6ZuKJXcWsscFzoyaZZ6MkDjEhEsGrcqq65LGwuZC7mME1EaJZTWKY4ka09Vl3WtSo12+BkFoVYMTVmLEhCXI6mUZYZg6+/lg4Rz6SDk5vstX0Z1+6/TQqkTkCUAlexHGN5jfiT4QI2gXwdcGU74A18KwmIelgynyImaM2k+Ou9TFR95DXS8rwT3/M3tHPtf7D+qbF3dfVDy3a35fd/Y/vk+U/mTwF+7vp3jru/ZS6r95fmHy2NbwrQ2K393FGQki23mzVNDnw5IpqblzuH5Xk5SdMke6uOGoWxhJfzybQNYBk+RokcYqsb9oKpkaMYe20MOfEd57m8SDERU+oLKPBMNpdSdtxjRfQxVytiR3bF5b77Z8GlTJ3AS/GZzAvleqsYf7sBIxcpPSnuy8+CxcH7jX2CteVHxik3REHoRJ3UtrD6oi4Qk7BEzjkWb4N/BvCZ86IwT3LORciCGiUCf/2npAZYQ4MIsYSKTlvLBNtDNeMpVhF235U+wGRzO1/kyf9v8jrJSgBhuf5zkuGrfcxVT4BOtgbzm9Od2XwI6p4JnJZnVZ3CbPZOWid5Ugrsmh/EHyVbedqt8eZ/</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02B309C107AC267FE05305991F0ACEAE</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:02B2AA65814179D0E05305991F0A0ED7</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:02B2DD84CF0067EFE05305991F0A5181</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:SCSA</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:03B9E6170FB47D69E05305991F0AF3D8</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>03B9E6170FB47D69E05305991F0AF3D8</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-08-27T12:44:03</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08C2AB7D86EB34B8E05307991F0A33C2</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08C2AB7D86EB34B8E05307991F0A33C2</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8baf78cd-6dae-4618-b353-3d5487be7cfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2cafa7b2-9bf2-478a-b686-78ce4a56b267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce367e17-dfc0-4f39-8618-2fe7480b333e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72fef843-6437-43db-81e3-f82c45f3d181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4220858c-44fa-444b-8f21-bfafcb0bb1f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9368f708-9828-4f39-969a-8d657911acd5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f95d5f65-30db-498a-b0ae-fa1f62f0f7b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DiscreteMediaRightCreateConsume_FUNC_by_Full_Access_User_With_Any_other_AFM" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="4ff45c15-fdb6-480e-9237-4342b09da8f3"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreateConsume" id="ff6a1051-3c9b-497a-9650-9c267bc1fba8"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreateConsume" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#NsmAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#ScsaAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
    <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 201 Created")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08C2D5974B616AB6E05307991F0AE0F1</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08C2D5974B616AB6E05307991F0AE0F1</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-08-27T12:44:03</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:DVD:PACKAGED</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:02B2DD84CF0067EFE05305991F0A5181</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:02B2AA65814179D0E05305991F0A0ED7</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02B309C107AC267FE05305991F0ACEAE</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZdU+o8EP4rTL08U5pWSqEjzGDRIwqKVEW9cUIaIFqS0qQF/PVvUqRS/Hg5etXJdvfZZzeb3T3icBZabotzHAvCaGk5Cyl3M2lDS2LqMsgJdymcYe4K5PqtXte1ysCFGxOt1Gk3tKcqqo4s07F1OEJIr0Aw1uvABnq9btvOCFZHTgCkKucJ7lAuIBUNzQJmRQd13QQ3oOZWbNcEZccGj1rpDsdcYkuVsrRak1ryhjYVInINY7FYlBeHZRZPDAsA07jvdX00xTOoNY/WEWWO4uabPioHGOEwRGXEZsaRUdA5CrjrkwmFIonxm6/gK1/AAHVD6gScTA603BYHHTpm2dGDlFGCYEheocpPD4spC0qtcMJiIqazL4MwgQLW8RLpyKzQA80oUtsTqMAw5lDnU2i+YQ3wGMeYIly6HXQa2sF+t5aZ3sSQ8jGLZ7x4/Dc+mKY4ZBEOdL4J643a/oCfZKp5hJHboShMOEnxpSrWCCLM324To/2hSv0Yj8myS7gs0CVX7IxtejvHdTbaZIK5+MkFbV3OGuQOhgluWmcs7c9F/eHeORxeG89jcY6iu/556/ShkRHYVs4E+dWujztFmRfR2iI8fLYWr+hP7bTLr196Fx2n/3BzWRPT8eCsC46TAetXHZvepnfHi9FrjZz7Zusve40AuX6cn6Ezu/u33/Paw2FnDtuH9vWt15sPg/rLvfVasZ5vVwjWgHN2zP/4nUH9MZnRGq5X0eM1fQ2taH7uL8/va8MX+ri0Xuxula3Is01TP7AHk3R0MbSG8DwdwPYdMy56jTycLf5F2ebN+8noGSOxOaoy6LRLp/KWoPi+mSkJCfRxpupGqvlwganQmspK9Q43ke2OBK68w/UZWMdWu12reKcAVJ2T0xNgHwK7XjdPQcs2a+amyaxZ7FD0GB0T5Uu13HXZfE8QzVyOaYBjPWWJ7HRc+waxDQUsdehAPgJGOb5hsj2bQnAa4hVaRWMRcMzDERyvnGeklS6ZuKJXcWsscFzoyaZZ6MkDjEhEsGrcqq65LGwuZC7mME1EaJZTWKY4ka09Vl3WtSo12+BkFoVYMTVmLEhCXI6mUZYZg6+/lg4Rz6SDk5vstX0Z1+6/TQqkTkCUAlexHGN5jfiT4QI2gXwdcGU74A18KwmIelgynyImaM2k+Ou9TFR95DXS8rwT3/M3tHPtf7D+qbF3dfVDy3a35fd/Y/vk+U/mTwF+7vp3jru/ZS6r95fmHy2NbwrQ2K393FGQki23mzVNDnw5IpqblzuH5Xk5SdMke6uOGoWxhJfzybQNYBk+RokcYqsb9oKpkaMYe20MOfEd57m8SDERU+oLKPBMNpdSdtxjRfQxVytiR3bF5b77Z8GlTJ3AS/GZzAvleqsYf7sBIxcpPSnuy8+CxcH7jX2CteVHxik3REHoRJ3UtrD6oi4Qk7BEzjkWb4N/BvCZ86IwT3LORciCGiUCf/2npAZYQ4MIsYSKTlvLBNtDNeMpVhF235U+wGRzO1/kyf9v8jrJSgBhuf5zkuGrfcxVT4BOtgbzm9Od2XwI6p4JnJZnVZ3CbPZOWid5Ugrsmh/EHyVbedqt8eZ/</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbvc6I8EP5XHO5jBwmIVZnqDKLt651trdje1S+dGILEYlASwPrXX4JK1f54vXamUyfL7rPPbja7e8HgPDQsmzEccxLR0moeUmbl0qaSxNSKICPMonCOmcWR5drXfcsoAwvuTJRSr9NUnkAD1BCa+Kqp18S/hu+rsFbFqocmDW9y7pvn1YpQZSzBPco4pLypGEA3VdBQdTACdcs0xV+5outjpfSAYyawhUoZKFtSK9ZUAs4XlqZlWVbOKuUonmoGALr257rvogDPodK62ESUO4pbW31U9jDCYYjKKJprF9qBzoXHLJdMKeRJjLe+vI98AQ00NKHjMTL9oRS22OtRP8qPDqQRJQiGZA1lfq4xDyKvZIfTKCY8mH8YhA4ksIpXSEW6SX8o2iG1E4EOGMYMqiyA+hZriH0cY4pw6X7Yayo/Tru13HQUQ8r8KJ6zw+O/8cE0xWG0wJ7KdmFtqZ0O+E6mWhcYWT2KwoSRFN/IYl1AhNn2NjE6Hao0iLFPVn3CRIGumGSn7dM7Om6y0SFTzPhXLmjvcjYgDzBMcKvz5/JqXO8sF7OMOzM8Mh7X90RD69ufWTMnsK+cC4qr3RyPirIooo3Fn3XvJvht1tbLu4Bkjcrs5qo+XqGoS/SrTL/+dYnXVXMwDScP3XQa2g06uvmPGCk5a18up/dTMGj/5NnDmtXJcp2QYPD4YPfsl7uqc90GTi191q9CNnPHE/prGDzjNTXN2Qpmq5ug2u6PbX35251dBePh2V3XWbLwYaj1cYrMFKBGG6SP4351QO3gjHve716zCGeP/6Fs9+bdZDLDiO+Osgx6ndKluCXIP29mUkI81c9VrYVsPoxjypWWtJK9w0pEuyOeJe5wcwZG27Dt82pdF0+n0QFdUK2AaqOhXwIbdDu1XZPZsDii6ETUJ9KXbLmbsvmcIJpbDFMPx2oaJaLTMeUTxA7ksNSjQ/EIIsrwKBLtWYfV5yCbRtE5ryPdh9mz79XXyywxlNJNxG/pbWz7HMcHTVnXD5ryECOyIFh2blnYTFQ24yIZS5gmPNTLKSxTnIjeHss2axlmvaoxMl+EWFLV5pGXhLi8CBZ5ajS2+TVUiFguHXZH+XP7MLDjb7scCB2PSAUmY2ljcY/4nelS2QXyccDmfsA7eDvxiHxZIqE8JmjD5PDTa53IAimKxHacruu4O9qF9j9Yf9XYub39omWnb7uD79g+Oe6T/lWAr7v+nuP+d5mL6v2m+VtL7ZMC1I5rv3DkpWTP7W5PExNfzIjW7uUuYXlZTtI0yd9qTc7CWMCLAaVXNWBoLkaJmGIvo+gZU61A0U5aGQriR84L+SHFhAfU5ZDjuWgupfx4wo7oYiZ3xJ5oi6tTF9ADlyJ1HK/4ezInFPutZPzpCowsJPWEeCB+sij2Xm/sHaw9PyJOsSJyQqfyJNeFlw/qAkUClohBF8X74O8BvOf8UFgkueDCRUFNEo4//lKSE6ypQISihPJeR8kF+1M158lfFth6VXoDkw/uYpMn/7/KqyQvAYTF/s9Iji8XMks+ATrdm8xbp0fDuQIajg5qtmOc1y73h7PTtbtFUg7Ytd6I30r28nRc462/</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8baf78cd-6dae-4618-b353-3d5487be7cfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2cafa7b2-9bf2-478a-b686-78ce4a56b267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce367e17-dfc0-4f39-8618-2fe7480b333e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72fef843-6437-43db-81e3-f82c45f3d181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4220858c-44fa-444b-8f21-bfafcb0bb1f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9368f708-9828-4f39-969a-8d657911acd5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ff6a1051-3c9b-497a-9650-9c267bc1fba8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_P0_Premium_RT_UHD_Media_Profile_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_Only_UHD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="1be19461-fcd0-4b5e-b8e1-7cdd3baa98d1"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileUHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";

sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};

log.info "CID Count :"+countCID;

if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}
log.info "ALID Count :"+countALID;

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}
log.info "BID Count :"+countBID;
if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}
log.info "BOID : "+BOID;

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log,testProject.getPropertyValue("DBIdentifier"));
//dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="c830901b-2858-4f70-af0f-00fcf2e93be4"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="ResetContent Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("ContentProfile",'urn:dece:type:mediaprofile:hd')</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>05D55921FBD644D2E05307991F0AC013</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:05D55921FBD644D2E05307991F0AC013</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>435043</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D533A954814E79E05307991F0A2F77</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D533A954814E79E05307991F0A2F77</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>39ee919a-fed0-43fc-b6e6-5dff3243ef44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>abd21c2a-f7d6-40e5-a4ae-d328caaee0f8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c830901b-2858-4f70-af0f-00fcf2e93be4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_UHD_HD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="46c478cd-2fee-4acd-84e2-fdf6fe6b31b7"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileUHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";

log.info "CID Count :"+sqlStrCountCID;

sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";
log.info "ALID Count :"+sqlStrCountCID;

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

log.info "Bundle Count :"+sqlStrCountCID;

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="ad53e004-7627-4592-979b-0a1ef0923958"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="ResetContent Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("ContentProfile",'urn:dece:type:mediaprofile:hd')</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08C316BBDC3A08F1E05307991F0A4645</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08C316BBDC3A08F1E05307991F0A4645</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>646137</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>08C2D5B5FD956AB2E05307991F0AC895</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:08C2D5B5FD956AB2E05307991F0AC895</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17d7d592-4511-4d1a-a623-33456c54a246</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e26cd9c4-5bd2-494b-9293-a27dc806b743</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad53e004-7627-4592-979b-0a1ef0923958</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DMRCreateConsume_FUNC_with_MediaProfile_HD_And_RightsToken_CreateConsume_with_UHD_HD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="76c755b9-68a0-4e04-9c77-e1c6525afbff"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="ResetContent Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("ContentProfile",'urn:dece:type:mediaprofile:hd')</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>05D533826E014E38E05307991F0AC870</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:05D533826E014E38E05307991F0AC870</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>891836</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D5892CEB205EFAE05307991F0A7C97</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D5892CEB205EFAE05307991F0A7C97</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>908a3e98-966b-49d6-9e16-f0cefbd9c7a7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee8003a8-cca1-4ef9-9e19-26428330daf0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76c755b9-68a0-4e04-9c77-e1c6525afbff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00004_DMRCreateConsume_FUNC_with_MediaProfile_SD_And_RightsToken_CreateConsume_with_UHD_HD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileSD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="df644751-8e60-4e32-867d-e8a0d063f129"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:SD</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D593DB19B27CD0E05305991F0A344A</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D593DB19B27CD0E05305991F0A344A</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>289064</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:05D593DBCBD47CBCE05305991F0AC623</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>05D593DBCBD47CBCE05305991F0AC623</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c6bfff8-0a22-4cdc-97c8-5b4bb1b8abf0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>137a0490-395b-4ef4-a21f-671e5c39d888</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>df644751-8e60-4e32-867d-e8a0d063f129</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00005_DMRCreateConsume_FUNC_with_MediaProfile_SD_And_RightsToken_CreateConsume_with_UHD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileSD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="0cabe94d-db57-4b05-84be-4d4591e5ea43"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>05D5336075124EB9E05307991F0A547C</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:05D5336075124EB9E05307991F0A547C</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>534124</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D53381021B4E2CE05307991F0AA353</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D53381021B4E2CE05307991F0AA353</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>04253871-6a1e-4aaa-94a1-fa6df889c0ae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aa8088ab-615f-4821-964e-906cfd325453</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0cabe94d-db57-4b05-84be-4d4591e5ea43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00006_DMRCreateConsume_FUNC_with_MediaProfile_HD_And_RightsToken_CreateConsume_with_UHD_HD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="db71c623-ebce-44d1-96a0-e44b1b3ec74b"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset Content and Media Profile after Consume"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("ContentProfile",'urn:dece:type:mediaprofile:hd')
testProject.setPropertyValue("DiscreteMediaProfileInURL",'urn:dece:type:discretemediaformat:bluray:packaged')</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D550EFC61F2E95E05307991F0A2D25</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D550EFC61F2E95E05307991F0A2D25</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>83897</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:05D533418C264E71E05307991F0A317E</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>05D533418C264E71E05307991F0A317E</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e772d71-e614-4db3-a985-d492b3fd708e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7f501baa-96f0-4c66-afb2-6f296a55f30c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>db71c623-ebce-44d1-96a0-e44b1b3ec74b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00007_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_UHD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileUHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="a7491c98-f94a-4e80-b639-71dab0747bf7"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>05D5335B5F324EBDE05307991F0A4258</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:05D5335B5F324EBDE05307991F0A4258</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>584407</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D593D06FC701D0E05307991F0AD3EA</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D593D06FC701D0E05307991F0AD3EA</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:UHD</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbecc869-1e04-4101-ac09-749a966d8daa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad4438e3-5a7a-4a6f-a66c-7fdef4ab2542</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a7491c98-f94a-4e80-b639-71dab0747bf7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_CS_P0_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00070_DMRCreateConsume_FUNC_RTL_CS_POST_by_BAU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="a9ef6ad6-0d22-49ba-b842-610016224ed9"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="e1a7a574-b43f-40e9-a305-911da1d61a62"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_BAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="8be6f29f-374f-4c58-ae45-efda6d46bd8b"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="c654b68c-9660-4537-b196-cf44a39c1231"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="194d8a12-16a2-4316-97cf-2726f778fae7"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A8F71E2967308E05305991F0A939B</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A8F71E2967308E05305991F0A939B</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_BAU1"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83903</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>089A69DFF65C1126E05305991F0A43D7</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A69DFF65C1126E05305991F0A43D7</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E0A9A0C7AA791EFCE0401F0A059910EA</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E0A9A0C7A9C51EFCE0401F0A059910EA</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E0A9A0C7A9B61EFCE0401F0A059910EA</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>4a70f324-ae4d-4440-a910-11cba97c8517</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ddac2c-cc56-4702-904d-691d3ee23502</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7cb6e7f2-fefd-4190-9252-8e8cebc0d4b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>38509f49-b63c-4c10-a9b3-9f4e76abdede</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9999ebb6-3d3f-408b-8e0e-446cd898b8af</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c654b68c-9660-4537-b196-cf44a39c1231</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>194d8a12-16a2-4316-97cf-2726f778fae7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1a7a574-b43f-40e9-a305-911da1d61a62</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8be6f29f-374f-4c58-ae45-efda6d46bd8b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00071_DMRCreateConsume_FUNC_RTL_CS_POST_by_SAU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="48ce9c76-b412-40e2-b5da-4dc59af23b75"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="12ee2804-ec23-4448-b515-37054bfcb496"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_SAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="46d7ecf7-26b1-4a7d-8e61-50e9f3f73531"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="7ca37d50-2a7a-4cc6-9bd8-65180824ef82"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="49e1a1e7-489d-4a33-b79a-d0449b690a18"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A69E17C231133E05305991F0ACAD5</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A69E17C231133E05305991F0ACAD5</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_SAU1"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83904</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>089A768B9FF230CEE05305991F0AF772</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:089A768B9FF230CEE05305991F0AF772</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E009D23CA3D5411DE0401F0A05997D1E</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E009C9444C461F0BE0401F0A059966EA</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E009CA58A4199BBFE0401F0A07997CA7</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>0df2c009-deff-4c04-8d82-522021432c34</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c8256ec-d3cf-4b55-972c-b4c3753babe1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e47ba6d-a518-4971-8c81-314f49139d03</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7ca37d50-2a7a-4cc6-9bd8-65180824ef82</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>49e1a1e7-489d-4a33-b79a-d0449b690a18</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12ee2804-ec23-4448-b515-37054bfcb496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46d7ecf7-26b1-4a7d-8e61-50e9f3f73531</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00072_DMRCreateConsume_FUNC_RTL_CS_POST_by_FAU" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="1cb211cf-10e6-4068-9bb9-5465e32a080f"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="598637d4-f712-4e80-ab0f-a5be654aad62"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="c7d00c92-1cb4-4f12-b448-797fc5f7722f"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="0f590283-86ec-41b4-94de-3df6c2146987"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbZcuI6EP0VyvM4ZbwCtitQRWy45QtkwUyWeZkSsgAltmwkmZB8/ZUMOECWyyRPLrV7Od066u4zBtLE9LqMIcpxRmrrNCHMK6VtpaDEywDDzCMgRczj0Iu6o6Fn1nUP7EyUWhi0lT8QActyHUt1pnpLtWcAqK7rNNTW1AGxARxoGaZQZaxAIWEcEN5WTN2wVcNQDXuitzyr6Zlm3bLN30rtBlEmfAuVuq5sQa1ZW1lwnnua9vT0VH+y6hmda6auG9rdaBjBBUqB0jnbZFQGop2tPqzHCKIkgXWYpdqZdqBzFjMvwnMCeEHRNlb8USxd011N6MQMz38olS2KQzLLyqMPSEYwBAl+AbI+I8QXWVzrJvOMYr5IP0zC0KVjFa2hCg2b/FC0Q2gnOjpASBlQ2QIYW19jNEMUEYhqv8ZhW/lx2q2VphMKCJtlNGWHx7/Dg8gKJVmOYpXt0tpCO93hO5XqnCHohQQmBcMrdCHJmgOI2PY2ETzdVe2KohleDzETBF0ziU7bh3d03FQjwHPE+FcuaO9yNk5uQFKgTuE7L72+Obx4WRtL5upsScbazfLhLrxulwD2lUtBdbWb4xEpKxJtLNJVup67/YFN8UWeXw6X/Mq3mvPmZaT9M4Z2ms8Ho2Bx7VL9Lg8erZ8r9/5hxhZPyBldO8u71mrR+K21UP+qCUEOJ1PefG7ehhPHeXGsi9vBraM93gTnYEDDEA/poDFa/ZracTO1ByaY+z0+veg3il9d08lj//fyNn2m2cIy70f3ZPBiDx0/uo6Cf3/Ox8V92K7S2cN/KNu9+aiYPiDId0dJgzCo9cUtAf55M5MSHKuzUtXLZfNhHBGudKSV7B1eIdodjj1xh5uz3vIDu9/s+0avYZy7bk9vWHrDdY2+3vV9N9g1mQ2KI4h+RmZYxpItd0ObzwHC1GOIxIiqq6wQnY4pn3gMAAe1kIzFI8gIQ5NMtGeD2kk8W1h5y0kfjIZOVg32mNsPgCu1i4xfkkvanXFED5qyoR805TGCOMdIdm5JbCaYzbgoxhKsCp4Y9RWoE1SI3k5lm/VM22loDKd5giRULc3iIkH1fJGXpdHY5muqALJSOu5Nyuf2YWLH/3Y1EDoxlgpM5nKOxD2id6aLsUvk44St/YR37rtFjOXLEgXlFMMNksNfrzyRBKlIIpjQi/xoB7vS/gvrrxr7l5dftAyG3ejqO7Z//OiP8VUHXw/9vcDD7yIX7P2m+VtL7RMCasfcrwLFK7wXdreniYkvZkRn93KXoL6sF6tVUb7VlpyFVLgXA8poaLqpRQgWYoo9T7JHRLTKi3bSylABPwpeyQ8hFnxBIg44SkVzqZXHE3bECDG5I4aiLa5PXUAPQorScbTm78n8ROy3EvGnKzD0oNQT4ivxecpo/Hpj7/jaiyPyFCsix2QuT3JdeP6AFzATbrEYdBndd/6eg/eCHwqrIldYuCDUtODo4z81OcHaCoAwKwgPA6UU7E/VEid/zpH3qvTGTTm4q00e//8qr+KSAhCJ/Z/h0r9cyDz5BMh8bzJvg74Zzj3faQWBrp+7RjmcW5vh3Ox1z6uiHKDrvBG/lezV6Zjjnf8A</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc+I6DP4rTPaxE+JcuGUKMzTQbVq6sIR2t33ZcR0BbhOHxg5Qfv2xA2SBXg7bvsBYkT59kmVJpxzHkeW2OYdU0ISVlnHEuJtLm1qWMjfBnHKX4Ri4K4gbtK97rlVGLt6aaCW/09T+VOt2o+6ED7ozRkj+2Eiv1yykE6tGSNWuwQPBUpXzDHzGBWaiqVnIdHTT1E1nhGquXXMtp1y1qvda6RZSLrGlShlpG1JL3tSmQsxcw1gsFuWFXU7SiWEhZBq/r3sBmUKMtdbpOqLcUdra6JNyCASiiJRJEhunxp7OacjdgE4YFlkKG1/he76QgRqG1Ak5nXzTClsIfTZO8qOHWcIowRFdYZWfaxDTJCy1o0mSUjGN3w3CRApYhyXRiemwb5qxT+1IoD2GKcc6n2JzgzWEMaTACJRuhn5T+3bcreWmoxQzPk7SmO8f/40PsDlEyQxCnW/D2lA7HvCNTLVOgbg+I1HG6Rx+qGKdYQJ8c5tAjocqDVIY02WPclmgS67YGbv0Do7rbHToBLj4zAXtXM4a5BZHGbROxmfxxZJfXBkekLA+cgb3yLuxh5Zfb+YEdpVzQXG16+NBURZFtLZ4ul8Z4aXfGGbRYOT8Gtz6/fPR3LzveXf9gfXDNhcQwOrF6K589HwSpMvf6C5IGZ5evVze3cbpOLPHswvxPb2z7cXJRfXSgJsn5/f8JX50JuF1vXPpO/4K34nBVTrgve+J2Z+vGpVfs8ve6ORXxH/Cz0o4ul7dsgdngh4nMyNa/qw9I9w59+c3S8v7Pnjq+w1qde+aRTg7/Pdl2zcfZA+PQMT2qMrA75TO5S1h8XEzUxIa6uNc1Z2p5sMFMKG1lJXqHW4m2x0NXXmH6zOqeZ1KzbLtqmnZnul0UcVGlUbDPEftjnfe2TaZNYsDil7CxlT5Ui13XTYfEySxy4GFkOrzJJOdjmsfIHawwCWfDeUjSBiHUaLas6g+IvKUJfXniTldVrF4GEeLqGJppR+J6LN+2h4LSPd6son2evIQCJ1RUI1b1TWXhc2FzMUznmciMstzXGaQydaeqi4r7eoVg9N4FoFiasRJmEVQnk1neWYMvv63dEx4Lh12R/lrezeuw2/bFEidkCoFrmI5A3mN8MZwMbeBvB+wvRvwFr6dhVQ9LJlPkVKyZrL/6W+ZqPooaqTted3AC7a0C+1/sP6ssdfvf9Ky02sHg6/Y/vGCP+ZnAT7v+muOe19lLqv3i+avLY0PCtA4rP3CUTinO263a5oc+HJEtLYv9xmXn8vZfJ7lb7WmRmEq4eV8MisGsowASCaH2MsoeQJmFCjGURtDQfzAeSHfp5iJKQsEFhDL5lLKj0esiAFwtSL6sisuj90/91zK1AlYirdkXiTXW8X4ww2YuETpSfFA/i2SNPx7Y29g7fiRccoNUVA2USe1Lby8UxckkbBUzrkk3QV/C+At5/vCIskFFyEL6iET8P6XkhpgTQ0TkmRM+B0tF+wO1ZyneJmB+1fpFUw+t4tFnv7/Jq/TvAQIyPWf0xxf7WOuegJssjOYN04PZ7PT9eq1Tgehs4aZz+baejZXu+2zIil77FqvxK8lO3k6rPHWfw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:07CD4EC87DD00B91E05307991F0A6EAB</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:07CD4F6FC1E51B99E05305991F0ACC9D</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:07CD572336123C14E05305991F0ADCFD</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07CEC40673C42F33E05305991F0AA219</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07CEC40673C42F33E05305991F0AA219</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07CE7FE0ADC272FCE05305991F0AC537</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07CE7FE0ADC272FCE05305991F0AC537</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>598637d4-f712-4e80-ab0f-a5be654aad62</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7d00c92-1cb4-4f12-b448-797fc5f7722f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0f590283-86ec-41b4-94de-3df6c2146987</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTLCS</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_CS_P0_New_AFM_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DiscreteMediaRightCreateConsume_FUNC_by_Full_Access_User_With_AFM_NSM" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="3937604a-fb49-4b0d-8e96-27bd88fbb1f5"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreateConsume"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreateConsume" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#NsmAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#ScsaAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
    <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 201 Created")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbvc6I8EP5XHO5jBwmIVZnqDKLt651trdje1S+dGILEYlASwPrXX4JK1f54vXamUyfL7rPPbja7e8HgPDQsmzEccxLR0moeUmbl0qaSxNSKICPMonCOmcWR5drXfcsoAwvuTJRSr9NUnkAD1BCa+Kqp18S/hu+rsFbFqocmDW9y7pvn1YpQZSzBPco4pLypGEA3VdBQdTACdcs0xV+5outjpfSAYyawhUoZKFtSK9ZUAs4XlqZlWVbOKuUonmoGALr257rvogDPodK62ESUO4pbW31U9jDCYYjKKJprF9qBzoXHLJdMKeRJjLe+vI98AQ00NKHjMTL9oRS22OtRP8qPDqQRJQiGZA1lfq4xDyKvZIfTKCY8mH8YhA4ksIpXSEW6SX8o2iG1E4EOGMYMqiyA+hZriH0cY4pw6X7Yayo/Tru13HQUQ8r8KJ6zw+O/8cE0xWG0wJ7KdmFtqZ0O+E6mWhcYWT2KwoSRFN/IYl1AhNn2NjE6Hao0iLFPVn3CRIGumGSn7dM7Om6y0SFTzPhXLmjvcjYgDzBMcKvz5/JqXO8sF7OMOzM8Mh7X90RD69ufWTMnsK+cC4qr3RyPirIooo3Fn3XvJvht1tbLu4Bkjcrs5qo+XqGoS/SrTL/+dYnXVXMwDScP3XQa2g06uvmPGCk5a18up/dTMGj/5NnDmtXJcp2QYPD4YPfsl7uqc90GTi191q9CNnPHE/prGDzjNTXN2Qpmq5ug2u6PbX35251dBePh2V3XWbLwYaj1cYrMFKBGG6SP4351QO3gjHve716zCGeP/6Fs9+bdZDLDiO+Osgx6ndKluCXIP29mUkI81c9VrYVsPoxjypWWtJK9w0pEuyOeJe5wcwZG27Dt82pdF0+n0QFdUK2AaqOhXwIbdDu1XZPZsDii6ETUJ9KXbLmbsvmcIJpbDFMPx2oaJaLTMeUTxA7ksNSjQ/EIIsrwKBLtWYfV5yCbRtE5ryPdh9mz79XXyywxlNJNxG/pbWz7HMcHTVnXD5ryECOyIFh2blnYTFQ24yIZS5gmPNTLKSxTnIjeHss2axlmvaoxMl+EWFLV5pGXhLi8CBZ5ajS2+TVUiFguHXZH+XP7MLDjb7scCB2PSAUmY2ljcY/4nelS2QXyccDmfsA7eDvxiHxZIqE8JmjD5PDTa53IAimKxHacruu4O9qF9j9Yf9XYub39omWnb7uD79g+Oe6T/lWAr7v+nuP+d5mL6v2m+VtL7ZMC1I5rv3DkpWTP7W5PExNfzIjW7uUuYXlZTtI0yd9qTc7CWMCLAaVXNWBoLkaJmGIvo+gZU61A0U5aGQriR84L+SHFhAfU5ZDjuWgupfx4wo7oYiZ3xJ5oi6tTF9ADlyJ1HK/4ezInFPutZPzpCowsJPWEeCB+sij2Xm/sHaw9PyJOsSJyQqfyJNeFlw/qAkUClohBF8X74O8BvOf8UFgkueDCRUFNEo4//lKSE6ypQISihPJeR8kF+1M158lfFth6VXoDkw/uYpMn/7/KqyQvAYTF/s9Iji8XMks+ATrdm8xbp0fDuQIajg5qtmOc1y73h7PTtbtFUg7Ytd6I30r28nRc462/</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZdU+o8EP4rTL08U5pWSqEjzGDRIwqKVEW9cUIaIFqS0qQF/PVvUqRS/Hg5etXJdvfZZzeb3T3icBZabotzHAvCaGk5Cyl3M2lDS2LqMsgJdymcYe4K5PqtXte1ysCFGxOt1Gk3tKcqqo4s07F1OEJIr0Aw1uvABnq9btvOCFZHTgCkKucJ7lAuIBUNzQJmRQd13QQ3oOZWbNcEZccGj1rpDsdcYkuVsrRak1ryhjYVInINY7FYlBeHZRZPDAsA07jvdX00xTOoNY/WEWWO4uabPioHGOEwRGXEZsaRUdA5CrjrkwmFIonxm6/gK1/AAHVD6gScTA603BYHHTpm2dGDlFGCYEheocpPD4spC0qtcMJiIqazL4MwgQLW8RLpyKzQA80oUtsTqMAw5lDnU2i+YQ3wGMeYIly6HXQa2sF+t5aZ3sSQ8jGLZ7x4/Dc+mKY4ZBEOdL4J643a/oCfZKp5hJHboShMOEnxpSrWCCLM324To/2hSv0Yj8myS7gs0CVX7IxtejvHdTbaZIK5+MkFbV3OGuQOhgluWmcs7c9F/eHeORxeG89jcY6iu/556/ShkRHYVs4E+dWujztFmRfR2iI8fLYWr+hP7bTLr196Fx2n/3BzWRPT8eCsC46TAetXHZvepnfHi9FrjZz7Zusve40AuX6cn6Ezu/u33/Paw2FnDtuH9vWt15sPg/rLvfVasZ5vVwjWgHN2zP/4nUH9MZnRGq5X0eM1fQ2taH7uL8/va8MX+ri0Xuxula3Is01TP7AHk3R0MbSG8DwdwPYdMy56jTycLf5F2ebN+8noGSOxOaoy6LRLp/KWoPi+mSkJCfRxpupGqvlwganQmspK9Q43ke2OBK68w/UZWMdWu12reKcAVJ2T0xNgHwK7XjdPQcs2a+amyaxZ7FD0GB0T5Uu13HXZfE8QzVyOaYBjPWWJ7HRc+waxDQUsdehAPgJGOb5hsj2bQnAa4hVaRWMRcMzDERyvnGeklS6ZuKJXcWsscFzoyaZZ6MkDjEhEsGrcqq65LGwuZC7mME1EaJZTWKY4ka09Vl3WtSo12+BkFoVYMTVmLEhCXI6mUZYZg6+/lg4Rz6SDk5vstX0Z1+6/TQqkTkCUAlexHGN5jfiT4QI2gXwdcGU74A18KwmIelgynyImaM2k+Ou9TFR95DXS8rwT3/M3tHPtf7D+qbF3dfVDy3a35fd/Y/vk+U/mTwF+7vp3jru/ZS6r95fmHy2NbwrQ2K393FGQki23mzVNDnw5IpqblzuH5Xk5SdMke6uOGoWxhJfzybQNYBk+RokcYqsb9oKpkaMYe20MOfEd57m8SDERU+oLKPBMNpdSdtxjRfQxVytiR3bF5b77Z8GlTJ3AS/GZzAvleqsYf7sBIxcpPSnuy8+CxcH7jX2CteVHxik3REHoRJ3UtrD6oi4Qk7BEzjkWb4N/BvCZ86IwT3LORciCGiUCf/2npAZYQ4MIsYSKTlvLBNtDNeMpVhF235U+wGRzO1/kyf9v8jrJSgBhuf5zkuGrfcxVT4BOtgbzm9Od2XwI6p4JnJZnVZ3CbPZOWid5Ugrsmh/EHyVbedqt8eZ/</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02B309C107AC267FE05305991F0ACEAE</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:02B2AA65814179D0E05305991F0A0ED7</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:02B2DD84CF0067EFE05305991F0A5181</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:NSM</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-08-27T12:44:03</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A69E13C691137E05305991F0A0B3E</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A69E13C691137E05305991F0A0B3E</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8baf78cd-6dae-4618-b353-3d5487be7cfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2cafa7b2-9bf2-478a-b686-78ce4a56b267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce367e17-dfc0-4f39-8618-2fe7480b333e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72fef843-6437-43db-81e3-f82c45f3d181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4220858c-44fa-444b-8f21-bfafcb0bb1f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9368f708-9828-4f39-969a-8d657911acd5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6cc8768-c47a-4908-93f7-68a91565222e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DiscreteMediaRightCreateConsume_FUNC_by_Full_Access_User_With_AFM_SCSA" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="fbb20280-a0e8-4ba3-b1db-e9ab9db5bb9f"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreateConsume"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreateConsume" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#NsmAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#ScsaAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
    <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 201 Created")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089A8F7D0E48730BE05305991F0AFB83</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089A8F7D0E48730BE05305991F0AFB83</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-08-27T12:44:03</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>03B9E6170FB47D69E05305991F0AF3D8</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:03B9E6170FB47D69E05305991F0AF3D8</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:SCSA</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:02B2DD84CF0067EFE05305991F0A5181</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:02B2AA65814179D0E05305991F0A0ED7</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02B309C107AC267FE05305991F0ACEAE</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZdU+o8EP4rTL08U5pWSqEjzGDRIwqKVEW9cUIaIFqS0qQF/PVvUqRS/Hg5etXJdvfZZzeb3T3icBZabotzHAvCaGk5Cyl3M2lDS2LqMsgJdymcYe4K5PqtXte1ysCFGxOt1Gk3tKcqqo4s07F1OEJIr0Aw1uvABnq9btvOCFZHTgCkKucJ7lAuIBUNzQJmRQd13QQ3oOZWbNcEZccGj1rpDsdcYkuVsrRak1ryhjYVInINY7FYlBeHZRZPDAsA07jvdX00xTOoNY/WEWWO4uabPioHGOEwRGXEZsaRUdA5CrjrkwmFIonxm6/gK1/AAHVD6gScTA603BYHHTpm2dGDlFGCYEheocpPD4spC0qtcMJiIqazL4MwgQLW8RLpyKzQA80oUtsTqMAw5lDnU2i+YQ3wGMeYIly6HXQa2sF+t5aZ3sSQ8jGLZ7x4/Dc+mKY4ZBEOdL4J643a/oCfZKp5hJHboShMOEnxpSrWCCLM324To/2hSv0Yj8myS7gs0CVX7IxtejvHdTbaZIK5+MkFbV3OGuQOhgluWmcs7c9F/eHeORxeG89jcY6iu/556/ShkRHYVs4E+dWujztFmRfR2iI8fLYWr+hP7bTLr196Fx2n/3BzWRPT8eCsC46TAetXHZvepnfHi9FrjZz7Zusve40AuX6cn6Ezu/u33/Paw2FnDtuH9vWt15sPg/rLvfVasZ5vVwjWgHN2zP/4nUH9MZnRGq5X0eM1fQ2taH7uL8/va8MX+ri0Xuxula3Is01TP7AHk3R0MbSG8DwdwPYdMy56jTycLf5F2ebN+8noGSOxOaoy6LRLp/KWoPi+mSkJCfRxpupGqvlwganQmspK9Q43ke2OBK68w/UZWMdWu12reKcAVJ2T0xNgHwK7XjdPQcs2a+amyaxZ7FD0GB0T5Uu13HXZfE8QzVyOaYBjPWWJ7HRc+waxDQUsdehAPgJGOb5hsj2bQnAa4hVaRWMRcMzDERyvnGeklS6ZuKJXcWsscFzoyaZZ6MkDjEhEsGrcqq65LGwuZC7mME1EaJZTWKY4ka09Vl3WtSo12+BkFoVYMTVmLEhCXI6mUZYZg6+/lg4Rz6SDk5vstX0Z1+6/TQqkTkCUAlexHGN5jfiT4QI2gXwdcGU74A18KwmIelgynyImaM2k+Ou9TFR95DXS8rwT3/M3tHPtf7D+qbF3dfVDy3a35fd/Y/vk+U/mTwF+7vp3jru/ZS6r95fmHy2NbwrQ2K393FGQki23mzVNDnw5IpqblzuH5Xk5SdMke6uOGoWxhJfzybQNYBk+RokcYqsb9oKpkaMYe20MOfEd57m8SDERU+oLKPBMNpdSdtxjRfQxVytiR3bF5b77Z8GlTJ3AS/GZzAvleqsYf7sBIxcpPSnuy8+CxcH7jX2CteVHxik3REHoRJ3UtrD6oi4Qk7BEzjkWb4N/BvCZ86IwT3LORciCGiUCf/2npAZYQ4MIsYSKTlvLBNtDNeMpVhF235U+wGRzO1/kyf9v8jrJSgBhuf5zkuGrfcxVT4BOtgbzm9Od2XwI6p4JnJZnVZ3CbPZOWid5Ugrsmh/EHyVbedqt8eZ/</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbvc6I8EP5XHO5jBwmIVZnqDKLt651trdje1S+dGILEYlASwPrXX4JK1f54vXamUyfL7rPPbja7e8HgPDQsmzEccxLR0moeUmbl0qaSxNSKICPMonCOmcWR5drXfcsoAwvuTJRSr9NUnkAD1BCa+Kqp18S/hu+rsFbFqocmDW9y7pvn1YpQZSzBPco4pLypGEA3VdBQdTACdcs0xV+5outjpfSAYyawhUoZKFtSK9ZUAs4XlqZlWVbOKuUonmoGALr257rvogDPodK62ESUO4pbW31U9jDCYYjKKJprF9qBzoXHLJdMKeRJjLe+vI98AQ00NKHjMTL9oRS22OtRP8qPDqQRJQiGZA1lfq4xDyKvZIfTKCY8mH8YhA4ksIpXSEW6SX8o2iG1E4EOGMYMqiyA+hZriH0cY4pw6X7Yayo/Tru13HQUQ8r8KJ6zw+O/8cE0xWG0wJ7KdmFtqZ0O+E6mWhcYWT2KwoSRFN/IYl1AhNn2NjE6Hao0iLFPVn3CRIGumGSn7dM7Om6y0SFTzPhXLmjvcjYgDzBMcKvz5/JqXO8sF7OMOzM8Mh7X90RD69ufWTMnsK+cC4qr3RyPirIooo3Fn3XvJvht1tbLu4Bkjcrs5qo+XqGoS/SrTL/+dYnXVXMwDScP3XQa2g06uvmPGCk5a18up/dTMGj/5NnDmtXJcp2QYPD4YPfsl7uqc90GTi191q9CNnPHE/prGDzjNTXN2Qpmq5ug2u6PbX35251dBePh2V3XWbLwYaj1cYrMFKBGG6SP4351QO3gjHve716zCGeP/6Fs9+bdZDLDiO+Osgx6ndKluCXIP29mUkI81c9VrYVsPoxjypWWtJK9w0pEuyOeJe5wcwZG27Dt82pdF0+n0QFdUK2AaqOhXwIbdDu1XZPZsDii6ETUJ9KXbLmbsvmcIJpbDFMPx2oaJaLTMeUTxA7ksNSjQ/EIIsrwKBLtWYfV5yCbRtE5ryPdh9mz79XXyywxlNJNxG/pbWz7HMcHTVnXD5ryECOyIFh2blnYTFQ24yIZS5gmPNTLKSxTnIjeHss2axlmvaoxMl+EWFLV5pGXhLi8CBZ5ajS2+TVUiFguHXZH+XP7MLDjb7scCB2PSAUmY2ljcY/4nelS2QXyccDmfsA7eDvxiHxZIqE8JmjD5PDTa53IAimKxHacruu4O9qF9j9Yf9XYub39omWnb7uD79g+Oe6T/lWAr7v+nuP+d5mL6v2m+VtL7ZMC1I5rv3DkpWTP7W5PExNfzIjW7uUuYXlZTtI0yd9qTc7CWMCLAaVXNWBoLkaJmGIvo+gZU61A0U5aGQriR84L+SHFhAfU5ZDjuWgupfx4wo7oYiZ3xJ5oi6tTF9ADlyJ1HK/4ezInFPutZPzpCowsJPWEeCB+sij2Xm/sHaw9PyJOsSJyQqfyJNeFlw/qAkUClohBF8X74O8BvOf8UFgkueDCRUFNEo4//lKSE6ypQISihPJeR8kF+1M158lfFth6VXoDkw/uYpMn/7/KqyQvAYTF/s9Iji8XMks+ATrdm8xbp0fDuQIajg5qtmOc1y73h7PTtbtFUg7Ytd6I30r28nRc462/</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8baf78cd-6dae-4618-b353-3d5487be7cfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2cafa7b2-9bf2-478a-b686-78ce4a56b267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce367e17-dfc0-4f39-8618-2fe7480b333e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72fef843-6437-43db-81e3-f82c45f3d181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4220858c-44fa-444b-8f21-bfafcb0bb1f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9368f708-9828-4f39-969a-8d657911acd5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f95d5f65-30db-498a-b0ae-fa1f62f0f7b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DiscreteMediaRightCreateConsume_FUNC_by_Full_Access_User_With_Any_other_AFM" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="e3e86b72-931f-496c-9c84-0f5ad915a819"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="restrequest" name="DMRCreateConsume"><con:settings/><con:config service="DiscreteMediaRightConsume" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight/Fulfill" methodName="DiscreteMediaRightConsumePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DMRCreateConsume" mediaType="application/xml" postQueryString="false" accept="application/xml"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#Project#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>urn:dece:userid:org:dece:${#Project#NodeUserOid}</RequestingUserID>
   <RightsTokenID>urn:dece:rightstokenid:org:dece:${#TestCase#RightsTokenOid}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
<!--   <AuthorizedFulfillmentMethod>${#Project#DvdPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#BlurayPackagedAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#SecuredigitalAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#CssrecordableAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>${#Project#NsmAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
<!--   <AuthorizedFulfillmentMethod>{#Project#ScsaAuthorizedFulfillmentMethod}</AuthorizedFulfillmentMethod>-->
    <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
 </DiscreteMediaToken>]]></con:request><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert ((com.eviware.soapui.support.types.StringList)messageExchange.responseHeaders["#status#"]).containsValue("HTTP/1.1 201 Created")</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenId" value="${#TestCase#RightsTokenId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbvc6I8EP5XHO5jBwmIVZnqDKLt651trdje1S+dGILEYlASwPrXX4JK1f54vXamUyfL7rPPbja7e8HgPDQsmzEccxLR0moeUmbl0qaSxNSKICPMonCOmcWR5drXfcsoAwvuTJRSr9NUnkAD1BCa+Kqp18S/hu+rsFbFqocmDW9y7pvn1YpQZSzBPco4pLypGEA3VdBQdTACdcs0xV+5outjpfSAYyawhUoZKFtSK9ZUAs4XlqZlWVbOKuUonmoGALr257rvogDPodK62ESUO4pbW31U9jDCYYjKKJprF9qBzoXHLJdMKeRJjLe+vI98AQ00NKHjMTL9oRS22OtRP8qPDqQRJQiGZA1lfq4xDyKvZIfTKCY8mH8YhA4ksIpXSEW6SX8o2iG1E4EOGMYMqiyA+hZriH0cY4pw6X7Yayo/Tru13HQUQ8r8KJ6zw+O/8cE0xWG0wJ7KdmFtqZ0O+E6mWhcYWT2KwoSRFN/IYl1AhNn2NjE6Hao0iLFPVn3CRIGumGSn7dM7Om6y0SFTzPhXLmjvcjYgDzBMcKvz5/JqXO8sF7OMOzM8Mh7X90RD69ufWTMnsK+cC4qr3RyPirIooo3Fn3XvJvht1tbLu4Bkjcrs5qo+XqGoS/SrTL/+dYnXVXMwDScP3XQa2g06uvmPGCk5a18up/dTMGj/5NnDmtXJcp2QYPD4YPfsl7uqc90GTi191q9CNnPHE/prGDzjNTXN2Qpmq5ug2u6PbX35251dBePh2V3XWbLwYaj1cYrMFKBGG6SP4351QO3gjHve716zCGeP/6Fs9+bdZDLDiO+Osgx6ndKluCXIP29mUkI81c9VrYVsPoxjypWWtJK9w0pEuyOeJe5wcwZG27Dt82pdF0+n0QFdUK2AaqOhXwIbdDu1XZPZsDii6ETUJ9KXbLmbsvmcIJpbDFMPx2oaJaLTMeUTxA7ksNSjQ/EIIsrwKBLtWYfV5yCbRtE5ryPdh9mz79XXyywxlNJNxG/pbWz7HMcHTVnXD5ryECOyIFh2blnYTFQ24yIZS5gmPNTLKSxTnIjeHss2axlmvaoxMl+EWFLV5pGXhLi8CBZ5ajS2+TVUiFguHXZH+XP7MLDjb7scCB2PSAUmY2ljcY/4nelS2QXyccDmfsA7eDvxiHxZIqE8JmjD5PDTa53IAimKxHacruu4O9qF9j9Yf9XYub39omWnb7uD79g+Oe6T/lWAr7v+nuP+d5mL6v2m+VtL7ZMC1I5rv3DkpWTP7W5PExNfzIjW7uUuYXlZTtI0yd9qTc7CWMCLAaVXNWBoLkaJmGIvo+gZU61A0U5aGQriR84L+SHFhAfU5ZDjuWgupfx4wo7oYiZ3xJ5oi6tTF9ADlyJ1HK/4ezInFPutZPzpCowsJPWEeCB+sij2Xm/sHaw9PyJOsSJyQqfyJNeFlw/qAkUClohBF8X74O8BvOf8UFgkueDCRUFNEo4//lKSE6ypQISihPJeR8kF+1M158lfFth6VXoDkw/uYpMn/7/KqyQvAYTF/s9Iji8XMks+ATrdm8xbp0fDuQIajg5qtmOc1y73h7PTtbtFUg7Ytd6I30r28nRc462/</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZdU+o8EP4rTL08U5pWSqEjzGDRIwqKVEW9cUIaIFqS0qQF/PVvUqRS/Hg5etXJdvfZZzeb3T3icBZabotzHAvCaGk5Cyl3M2lDS2LqMsgJdymcYe4K5PqtXte1ysCFGxOt1Gk3tKcqqo4s07F1OEJIr0Aw1uvABnq9btvOCFZHTgCkKucJ7lAuIBUNzQJmRQd13QQ3oOZWbNcEZccGj1rpDsdcYkuVsrRak1ryhjYVInINY7FYlBeHZRZPDAsA07jvdX00xTOoNY/WEWWO4uabPioHGOEwRGXEZsaRUdA5CrjrkwmFIonxm6/gK1/AAHVD6gScTA603BYHHTpm2dGDlFGCYEheocpPD4spC0qtcMJiIqazL4MwgQLW8RLpyKzQA80oUtsTqMAw5lDnU2i+YQ3wGMeYIly6HXQa2sF+t5aZ3sSQ8jGLZ7x4/Dc+mKY4ZBEOdL4J643a/oCfZKp5hJHboShMOEnxpSrWCCLM324To/2hSv0Yj8myS7gs0CVX7IxtejvHdTbaZIK5+MkFbV3OGuQOhgluWmcs7c9F/eHeORxeG89jcY6iu/556/ShkRHYVs4E+dWujztFmRfR2iI8fLYWr+hP7bTLr196Fx2n/3BzWRPT8eCsC46TAetXHZvepnfHi9FrjZz7Zusve40AuX6cn6Ezu/u33/Paw2FnDtuH9vWt15sPg/rLvfVasZ5vVwjWgHN2zP/4nUH9MZnRGq5X0eM1fQ2taH7uL8/va8MX+ri0Xuxula3Is01TP7AHk3R0MbSG8DwdwPYdMy56jTycLf5F2ebN+8noGSOxOaoy6LRLp/KWoPi+mSkJCfRxpupGqvlwganQmspK9Q43ke2OBK68w/UZWMdWu12reKcAVJ2T0xNgHwK7XjdPQcs2a+amyaxZ7FD0GB0T5Uu13HXZfE8QzVyOaYBjPWWJ7HRc+waxDQUsdehAPgJGOb5hsj2bQnAa4hVaRWMRcMzDERyvnGeklS6ZuKJXcWsscFzoyaZZ6MkDjEhEsGrcqq65LGwuZC7mME1EaJZTWKY4ka09Vl3WtSo12+BkFoVYMTVmLEhCXI6mUZYZg6+/lg4Rz6SDk5vstX0Z1+6/TQqkTkCUAlexHGN5jfiT4QI2gXwdcGU74A18KwmIelgynyImaM2k+Ou9TFR95DXS8rwT3/M3tHPtf7D+qbF3dfVDy3a35fd/Y/vk+U/mTwF+7vp3jru/ZS6r95fmHy2NbwrQ2K393FGQki23mzVNDnw5IpqblzuH5Xk5SdMke6uOGoWxhJfzybQNYBk+RokcYqsb9oKpkaMYe20MOfEd57m8SDERU+oLKPBMNpdSdtxjRfQxVytiR3bF5b77Z8GlTJ3AS/GZzAvleqsYf7sBIxcpPSnuy8+CxcH7jX2CteVHxik3REHoRJ3UtrD6oi4Qk7BEzjkWb4N/BvCZ86IwT3LORciCGiUCf/2npAZYQ4MIsYSKTlvLBNtDNeMpVhF235U+wGRzO1/kyf9v8jrJSgBhuf5zkuGrfcxVT4BOtgbzm9Od2XwI6p4JnJZnVZ3CbPZOWid5Ugrsmh/EHyVbedqt8eZ/</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02B309C107AC267FE05305991F0ACEAE</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:02B2AA65814179D0E05305991F0A0ED7</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:02B2DD84CF0067EFE05305991F0A5181</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:dvd:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B2DD2C759A67D2E05305991F0A8CA3</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-08-27T12:44:03</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:089AAF3880F264E8E05307991F0A7BBE</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>089AAF3880F264E8E05307991F0A7BBE</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8baf78cd-6dae-4618-b353-3d5487be7cfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2cafa7b2-9bf2-478a-b686-78ce4a56b267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce367e17-dfc0-4f39-8618-2fe7480b333e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72fef843-6437-43db-81e3-f82c45f3d181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4220858c-44fa-444b-8f21-bfafcb0bb1f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9368f708-9828-4f39-969a-8d657911acd5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ff6a1051-3c9b-497a-9650-9c267bc1fba8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTLCS</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_CS_P0_Premium_RT_UHD_Media_Profile_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P0</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_Only_UHD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d199459f-d844-4ff1-80e5-77480f3fd1bb"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileUHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";

sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};

log.info "CID Count :"+countCID;

if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}
log.info "ALID Count :"+countALID;

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}
log.info "BID Count :"+countBID;
if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}
log.info "BOID : "+BOID;

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log,testProject.getPropertyValue("DBIdentifier"));
//dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc>  
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="15775e18-0eba-4f79-979f-42b39d255d01"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D3985EC387CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D3985EC387CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>319228</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D37E440732BF7E05307991F0A8AD4</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D37E440732BF7E05307991F0A8AD4</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>39ee919a-fed0-43fc-b6e6-5dff3243ef44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>abd21c2a-f7d6-40e5-a4ae-d328caaee0f8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>15775e18-0eba-4f79-979f-42b39d255d01</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_UHD_HD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="49586b28-efb2-4494-8e69-7cae53b4d9f8"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileUHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";

log.info "CID Count :"+sqlStrCountCID;

sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";
log.info "ALID Count :"+sqlStrCountCID;

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

log.info "Bundle Count :"+sqlStrCountCID;

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
(select node_oid from node_role where role like '%contentprovider' and rownum&lt;2),
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="cb22dfe9-bcbb-4d82-91b6-a0ee5ad8407c"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D36FDB70D284DE05307991F0AE33A</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D36FDB70D284DE05307991F0AE33A</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>346519</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D36F98E2727E4E05307991F0AD490</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D36F98E2727E4E05307991F0AD490</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17d7d592-4511-4d1a-a623-33456c54a246</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e26cd9c4-5bd2-494b-9293-a27dc806b743</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb22dfe9-bcbb-4d82-91b6-a0ee5ad8407c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DMRCreateConsume_FUNC_with_MediaProfile_HD_And_RightsToken_CreateConsume_with_UHD_HD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="2b77ea00-f1a6-46e9-898e-b57c1cf5617a"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
   
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="d2fb9fa0-9b91-450f-a029-192e4667e48b"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D36FE6EE8286FE05307991F0AB8DE</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D36FE6EE8286FE05307991F0AB8DE</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>802110</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D3985EC8F7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D3985EC8F7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>908a3e98-966b-49d6-9e16-f0cefbd9c7a7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee8003a8-cca1-4ef9-9e19-26428330daf0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2fb9fa0-9b91-450f-a029-192e4667e48b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00004_DMRCreateConsume_FUNC_with_MediaProfile_SD_And_RightsToken_CreateConsume_with_UHD_HD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="65fc0ddc-6ba9-4750-a551-90724c142896"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileSD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
	
   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="0ec1d315-eee5-489a-8ca3-6c7cabbd8cfc"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D390D92A67CF8E05305991F0A45EE</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D390D92A67CF8E05305991F0A45EE</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>495869</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D37E440CF2BF7E05307991F0A8AD4</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D37E440CF2BF7E05307991F0A8AD4</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:SD</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c6bfff8-0a22-4cdc-97c8-5b4bb1b8abf0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>137a0490-395b-4ef4-a21f-671e5c39d888</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ec1d315-eee5-489a-8ca3-6c7cabbd8cfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00005_DMRCreateConsume_FUNC_with_MediaProfile_SD_And_RightsToken_CreateConsume_with_UHD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="05110ecb-7cd5-48da-8c29-f90505134a51"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileSD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="3675a8ad-636e-49b6-b5d5-0cfa8ace1dd9"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D37E440D72BF7E05307991F0A8AD4</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D37E440D72BF7E05307991F0A8AD4</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>302081</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D36F98E6D27E4E05307991F0AD490</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D36F98E6D27E4E05307991F0AD490</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>04253871-6a1e-4aaa-94a1-fa6df889c0ae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aa8088ab-615f-4821-964e-906cfd325453</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3675a8ad-636e-49b6-b5d5-0cfa8ace1dd9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00006_DMRCreateConsume_FUNC_with_MediaProfile_HD_And_RightsToken_CreateConsume_with_UHD_HD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="72fc1a17-a14e-437f-9159-02f909842086"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileHD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="013809c4-f60a-466e-b65c-4266b3009b54"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D36FDB7A6284DE05307991F0AE33A</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D36FDB7A6284DE05307991F0AE33A</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>747466</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D36F98E8527E4E05307991F0AD490</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D36F98E8527E4E05307991F0AD490</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e772d71-e614-4db3-a985-d492b3fd708e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7f501baa-96f0-4c66-afb2-6f296a55f30c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>013809c4-f60a-466e-b65c-4266b3009b54</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00007_DMRCreateConsume_FUNC_with_MediaProfile_UHD_And_RightsToken_CreateConsume_with_UHD_SD" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d62e6074-bd6f-4e5f-b3d8-e785c1007f2c"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile and Media Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

////def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
//createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
//createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
//
//def runnerTC = createRTTC.run(null, false);
//
//assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfileUHD"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String uuid = testProject.getPropertyValue("UUID");
def v2 = context.expand( '${#Project#versionMinor}' )


//Full User 1

def e2E_UUID_FAU1 = context.expand( '${#Project#E2E_UUID_FAU1}' )
def sAMLFullUser1 = context.expand( '${#Project#SAML-FullUser1}' )
def nodeAccountOidAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID}' )
def nodeAccountIdAllUsers = context.expand( '${#Project#NODE_ACCOUNT_ID_FULL}' )
def nodeUserOidFullUser1 = context.expand( '${#Project#NODE_USER_OID_FAU1}' )
def nodeUserIdFullUser1 = context.expand( '${#Project#NODE_USER_ID_FAU1}' )
def e2E_AccountOID_FAU1 = context.expand( '${#Project#E2E_AccountOID_FAU1}' )
def e2E_UserOID_FAU1 = context.expand( '${#Project#E2E_UserOID_FAU1}' )

//Full User 2

def e2E_UUID_FAU2 = context.expand( '${#Project#E2E_UUID_FAU2}' )
def sAMLFullUser2 = context.expand( '${#Project#SAML-FullUser2}' )
def nodeUserOidFullUser2 = context.expand( '${#Project#NODE_USER_OID_FAU2}' )
def nodeUserIdFullUser2 = context.expand( '${#Project#NODE_USER_ID_FAU2}' )
def e2E_AccountOID_FAU2 = context.expand( '${#Project#E2E_AccountOID_FAU2}' )
def e2E_UserOID_FAU2 = context.expand( '${#Project#E2E_UserOID_FAU2}' )


//Standard User 1

def e2E_UUID_SAU1 = context.expand( '${#Project#E2E_UUID_SAU1}' )
def sAMLStandardUser1 = context.expand( '${#Project#SAML-StandardUser1}' )
def nodeUserOidStandardUser1 = context.expand( '${#Project#NODE_USER_OID_SAU}' )
def nodeUserIdStandardUser1 = context.expand( '${#Project#NODE_USER_ID_SAU}' )
def e2E_AccountOID_SAU1 = context.expand( '${#Project#E2E_AccountOID_SAU1}' )
def e2E_UserOID_SAU1 = context.expand( '${#Project#E2E_UserOID_SAU1}' )

//Basic User 1

def e2E_UUID_BAU1 = context.expand( '${#Project#E2E_UUID_BAU1}' )
def sAMLBasicUser1 = context.expand( '${#Project#SAML-BasicUser1}' )
def nodeUserOidBasicUser1 = context.expand( '${#Project#NODE_USER_OID_BAU}' )
def nodeUserIdBasicUser1 = context.expand( '${#Project#NODE_USER_ID_BAU}' )
def e2E_AccountOID_BAU1 = context.expand( '${#Project#E2E_AccountOID_BAU1}' )
def e2E_UserOID_BAU1 = context.expand( '${#Project#E2E_UserOID_BAU1}' )


if(uuid == e2E_UUID_FAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLFullUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser1);

	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1);
	}
	else 
	{
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU1,"UTF-8"));
	}
	
	
}

else if(uuid == e2E_UUID_FAU2){


	testProject.setPropertyValue("NodeUserSAMLAssertion",sAMLFullUser2 );
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidFullUser2);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_FAU2);
	testProject.setPropertyValue("UserOid", e2E_UserOID_FAU2);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdFullUser2);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2);
	}
	else
	{
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_FAU2,"UTF-8"));
	}

}

else if(uuid == e2E_UUID_SAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLStandardUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidStandardUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_SAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_SAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdStandardUser1);
	
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{		
	     testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1);
	}
	else
	{		
	     testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_SAU1,"UTF-8"));
	}
	
}

	else if(uuid == e2E_UUID_BAU1){


	testProject.setPropertyValue("NodeUserSAMLAssertion", sAMLBasicUser1);
	testProject.setPropertyValue("NodeAccountOid", nodeAccountOidAllUsers);
	testProject.setPropertyValue("NodeUserOid", nodeUserOidBasicUser1);
	testProject.setPropertyValue("AccountOid", e2E_AccountOID_BAU1);
	testProject.setPropertyValue("UserOid", e2E_UserOID_BAU1);
	testProject.setPropertyValue("NodeAccountId",nodeAccountIdAllUsers);
	testProject.setPropertyValue("NodeUserId",nodeUserIdBasicUser1);
		
	if(v2!=testProject.getPropertyValue("versionURLEncode"))
	{
		testProject.setPropertyValue("AccountId", "urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1);
	}
	else 
	{		
		testProject.setPropertyValue("AccountId", URLEncoder.encode("urn:dece:accountid:org:dece:" + e2E_AccountOID_BAU1,"UTF-8"));
	}
	
}

else{

	log.info "Wrong UUID Provided"
	assert 1==2
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Project Property Values"><con:settings/><con:config><script>import groovy.sql.Sql;
import dbUtils.dbUtils;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
//def db = [url:'jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com', user: userName, password: passWord, driver:'oracle.jdbc.driver.OracleDriver'];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStrCountCID = """select count(*) from
md_basic
where
content_id = 'urn:dece:cid:org:200002'""";
sql.eachRow(sqlStrCountCID){
	countCID = it[0];
};
if(countCID == 0)
{
sqlStrCID = """insert into 
md_basic (
BASIC_OID,
CONTENT_ID,
STATUS,
RELEASE_YEAR,
WORK_TYPE,
CREATED_DATE,
CREATED_BY,
run_length,
NORMALIZED_CONTENT_ID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'active',
'01-JAN-01',
'Album',
sysdate,
'29',
'36930600000',
'urn:dece:cid:org:200002'
)""";

sql.execute(sqlStrCID);
}

sqlStrCountALID = """select count(*) from
asset_map_lp
where
alid = 'urn:dece:alid:org:200002'""";

sql.eachRow(sqlStrCountALID){
	countALID = it[0];
}

if(countALID == 0)
{
sqlStrALID = """insert into 
asset_map_lp (
MAP_LP_OID,
CID,
ALID,
STATUS,
CREATED_DATE,
CONTENT_PROFILE,
ASSET_STREAM_ALLOWED,
NORMALIZED_ALID,
NORMALIZED_CID
)
values
(
'200002',
'urn:dece:cid:org:200002',
'urn:dece:alid:org:200002',
'active',
sysdate,
'hd',
'Y',
'urn:dece:alid:org:200002',
'urn:dece:cid:org:200002')""";

sql.execute(sqlStrALID);
}
def ALID;
ALID = 'urn:dece:alid:org:200002';
def CID;
CID = 'urn:dece:cid:org:200002';
def soldAsCID;
soldAsCID = 'urn:dece:cid:org:200002';

sqlStrBIDCount = """select
count(bundle_id)
from
bundle
where
bundle_id = 'urn:dece:bid:200002'""";

Integer countBID; 
sql.eachRow(sqlStrBIDCount) {
	countBID = it[0];
}

if(countBID == 0)
{
sqlStrBID = """insert into 
bundle (
STATUS,
CREATED_DATE,
BUNDLE_ID,
BUNDLE_OID,
CREATED_BY,
NORMALIZED_BUNDLE_ID
)
values
(
'active',
sysdate,
'urn:dece:bid:200002',
'200002',
'29',
'urn:dece:bid:200002')""";

sql.execute(sqlStrBID);
}

def soldAsBundleId = 'urn:dece:bid:200002';

sqlStrBOID = """select
bundle_oid
from
bundle
where
bundle_id = '$soldAsBundleId'"""

def BOID;
sql.eachRow(sqlStrBOID) {
	BOID = it[0];
}

testProject.setPropertyValue("ALID", ALID);
testProject.setPropertyValue("CID", CID);
testProject.setPropertyValue("SoldAsDisplayName", "Avatar");
testProject.setPropertyValue("SoldAsDisplayNameLanguage", "en-US");
testProject.setPropertyValue("SoldAsCID", soldAsCID);
testProject.setPropertyValue("SoldAsBundleId", soldAsBundleId);
testProject.setPropertyValue("SoldAsBundleOid", BOID.toString());
testProject.setPropertyValue("PurchasedMediaProfile", "urn:dece:type:mediaprofile:pd");

testProject.setPropertyValue("PurchasedMediaProfileHD", "urn:dece:type:mediaprofile:hd");
testProject.setPropertyValue("PurchasedMediaProfileSD", "urn:dece:type:mediaprofile:sd");
testProject.setPropertyValue("PurchasedMediaProfilePD", "urn:dece:type:mediaprofile:pd");

def v2 = context.expand( '${#Project#versionMinor}' )

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){
 testProject.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:hd");
 testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn:dece:type:discretemediaformat:bluray:packaged");
 }
 else
 {
  testProject.setPropertyValue("ContentProfile", "urn%3Adece%3Atype%3Amediaprofile%3Ahd");
  testProject.setPropertyValue("DiscreteMediaProfileInURL", "urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged");
 }

testProject.setPropertyValue("DiscreteMediaProfile", "urn:dece:type:discretemediaformat:bluray:packaged");

testProject.setPropertyValue("DiscreteMediaProfileHD", "urn:dece:type:discretemediaformat:bluray:packaged");
testProject.setPropertyValue("DiscreteMediaProfileSD", "urn:dece:type:discretemediaformat:dvd:cssrecordable");
testProject.setPropertyValue("DiscreteMediaProfilePD", "urn:dece:type:discretemediaformat:securedigital");

testProject.setPropertyValue("PurchaseProfileBurnsLeft", "1");

testProject.setPropertyValue("PurchaseProfileBurnsLeftHD", "1");
testProject.setPropertyValue("PurchaseProfileBurnsLeftSD", "0");
testProject.setPropertyValue("PurchaseProfileBurnsLeftPD", "0");

testProject.setPropertyValue("PurchaseProfileCanDownLoad", "true");
testProject.setPropertyValue("PurchaseProfileCanStream", "true");
testProject.setPropertyValue("LicenseAcqBaseLoc", "ns3.google.com");
testProject.setPropertyValue("FulfillmentWebLoc1Location", "https://dl.bestbuy.com/wl1");
testProject.setPropertyValue("FulfillmentWebLoc1Preference", "1");
testProject.setPropertyValue("FulfillmentManifestLoc1Location",  "https://dl.bestbuy.com/ml1");
testProject.setPropertyValue("FulfillmentManifestLoc1Preference", "1");
testProject.setPropertyValue("PurchaseInfoRetailerID", "urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeid"));
def retailerTransactionId = (int)(Math.random() * 1000000);
testProject.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testCase.setPropertyValue("RetailerTransactionId", retailerTransactionId.toString());
testProject.setPropertyValue("PurchaseInfoPurchaseAccount", "urn:dece:accountid:org:dece:" + testProject.getPropertyValue("NodeAccountOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseUser", "urn:dece:userid:org:dece:" + testProject.getPropertyValue("NodeUserOid"));
testProject.setPropertyValue("PurchaseInfoPurchaseTime", "2010-11-29T08:44:01Z");

// DELETE

sqlStr = """delete from md_basic_rating_set where basic_oid = (select basic_oid from md_basic where content_id = '$CID')""";
sql.execute(sqlStr);

dataUtils = new dbUtils(log);
dataUtils.dbConnEstablish(testProject.getPropertyValue("DBIdentifier"));

//INSERT

def contentRatingOid = testCase.getPropertyValue("contentRatingOid");
log.info contentRatingOid
def pkValue = dataUtils.getNextPKVal('md_basic_rating_set', 'RATING_SET_OID');
dataUtils.dbConnClose();
sqlStr = """insert into
md_basic_rating_set
(RATING_SET_OID,
BASIC_OID,
CREATED_DATE,
CONTENT_RATING_OID)
values
($pkValue,
(select basic_oid from md_basic where content_id = '$CID'),
sysdate,
$contentRatingOid)"""
sql.execute(sqlStr);

log.info 'Woohoo!';</script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreatePost");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="RightsTokenCreatePost"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken" methodName="RightsTokenCreatePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightsTokenCreatePost" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_CS_1_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#NodeUserSAMLAssertion}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" ALID="${#Project#ALID}" ContentID="${#Project#CID}" xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ns4:SoldAs>
      <ns4:DisplayName Language="${#Project#SoldAsDisplayNameLanguage}">${#Project#SoldAsDisplayName}</ns4:DisplayName>
      <ns4:ContentID>${#Project#SoldAsCID}</ns4:ContentID>
   </ns4:SoldAs>
   <ns4:RightsProfiles>
	 <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileUHD}" HighDynamicRange="true" HighFrameRate="true" WideColorGamut="true" NextGenAudio="true">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>   
      <ns4:PurchaseProfile MediaProfile="${#Project#PurchasedMediaProfileSD}">
         <ns4:CanDownload>${#Project#PurchaseProfileCanDownLoad}</ns4:CanDownload>
         <ns4:CanStream>${#Project#PurchaseProfileCanStream}</ns4:CanStream>
      </ns4:PurchaseProfile>
     </ns4:RightsProfiles>   
   <ns4:LicenseAcqBaseLoc>${#Project#LicenseAcqBaseLoc}</ns4:LicenseAcqBaseLoc>
   <ns4:FulfillmentWebLoc MediaProfile="${#Project#PurchasedMediaProfileHD}" xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentWebLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentWebLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentWebLoc>
   <ns4:FulfillmentManifestLoc xsi:type="ns4:ResourceLocation-type">
      <ns4:Location>${#Project#FulfillmentManifestLoc1Location}</ns4:Location>
      <ns4:Preference>${#Project#FulfillmentManifestLoc1Preference}</ns4:Preference>
   </ns4:FulfillmentManifestLoc>
   <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:uhd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 
<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	
		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		 
		<ns4:Preference>3</ns4:Preference> 	
</ns4:StreamWebLoc> 

   <ns4:PurchaseInfo>
      <ns4:NodeID>${#Project#PurchaseInfoRetailerID}</ns4:NodeID>
      <ns4:RetailerTransaction>${#Project#RetailerTransactionId}</ns4:RetailerTransaction>
      <ns4:PurchaseAccount>${#Project#PurchaseInfoPurchaseAccount}</ns4:PurchaseAccount>
      <ns4:PurchaseUser>${#Project#PurchaseInfoPurchaseUser}</ns4:PurchaseUser>
      <ns4:PurchaseTime>${#Project#PurchaseInfoPurchaseTime}</ns4:PurchaseTime>
   </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Content Location and Get RightsTokenOid"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def major = context.expand( '${#Project#versionMajor}' );
def minor = context.expand( '${#Project#versionMinor}' );
def nodeAccountId =testProject.getPropertyValue("NodeAccountId");
//def callingTCName = testCase.getPropertyValue("CallingTestCase");
//def callingTestCase = testSuite.getTestCaseByName(callingTCName);
def contentLocation = testCase.getTestStepByName("RightsTokenCreatePost").httpRequest.response.responseHeaders["Location"][0];
def contentLocationURL = contentLocation.toURL();
def contentLocationURLStr = contentLocationURL.getPath();

 if (testProject.getPropertyValue("V2") != testProject.getPropertyValue("versionURLEncode")){

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn:dece:rightstokenid:org:dece:" + "[0-9A-Z]*");
	int lastColon = contentLocationURLStr.lastIndexOf(":");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 1);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);

 }
 else
 {

	assert contentLocationURL.getPath().matches("/rest/$major/$minor/Account/" + nodeAccountId + "/RightsToken/urn%3Adece%3Arightstokenid%3Aorg%3Adece%3A" + "[0-9A-Z]*");

	int lastColon = contentLocationURLStr.lastIndexOf("%3A");
	int lastSlash = contentLocationURLStr.lastIndexOf("/");
	
	def rightsTokenOid = contentLocationURLStr.substring(lastColon + 3);
	def rightsTokenId = contentLocationURLStr.substring(lastSlash + 1);
	 
	testCase.setPropertyValue("RightsTokenOid", rightsTokenOid);
	testCase.setPropertyValue("RightsTokenId", rightsTokenId);
	
}</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="4d01bb1a-a283-4202-85c7-c6e4cc1497af"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount","3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZbc6o6FP4rDvuxg4SbFqY6Y1G77bGXAe1p90snDVHSQqAkqO2vPwkqFXs57vaJyWJdvrXyZa11wmASG26PMZxzktLGKokpc0tpRyly6qaQEeZSmGDmcuQGvYuxazSBC7cmSmPU7yj3ju5YlolDtYUtXbUM21Idq41Vu20YIQTQbgNHqDJW4BFlHFLeUQygWypwVN2ZgJar667eahqG/kdp3OCcCd9CpQmUDagV6ygR55mracvlsrk0m2k+1wwAdO32YhygCCdQ6Z6sMyoD5d2NPmqGGOE4Rk2UJtqJVtM5CZkbkDmFvMjxJlb4WSygAUcTOiEj819KZYvDEZ2l5dGDNKUEwZi8QlmfC8yjNGz04nmaEx4lnyahA+lYxSukIt2ivxStDu1ARzWEOYMqi6C+8eXjGc4xRbgx9Ucd5ddht1aaTnJI2SzNE1Y//h0eTBc4TjMRkG3T2kA73OEHleqeYOSOKIoLRhb4UpI1gwizzW1idLirxnWOZ2Q1JkwQdMUkOm0X3t5xXY0+mWPGv3NBO5ezdnID4wJ3h9foJon8wTK7vCv6Gh5PnbuXooXPJ4NOCWBXuRRUV7s+7pGyItHa4mHoANMc306npg3PhrxNyQhHOdKiSWL6/hG4DI6PzqNBBpa9p+GpH5/1zN/27ObsjrAwsaety9uL1S1wRk7mG8kRmvqpeMrxv/78KvWuHbgIssenx+HUi8bnDz3/eXiO7gKQnxfF69nT4PTikek3+Sib/baP+ORPurzxwrmXWot/hhNt6beOIe0vlyNgD6agU6Wzg78u2775oHh4xIhvj5IGo35jKG4J8q+bmZSQUJ2Vqm4mmw/jmHKlK61k73AL0e5I6Io7XJ+B2bIHfWBZltGyvPZgAGwTtB1HH4Ke3ra9bZNZo9iD6KV0RmQs2XLXtPkaIEpchmmIc3WRFqLTMeULj33IYWNEffEIUsrwJBXtOVnEz/MILV65HeEHRp7n5mPLhCulcZnyK3qV92Yc5/WW7NRaso8RyQiWfVvSmgleMy5K8QwXBY/15gI2KS5EZ89lk3UN69jWGEmyGEugWpKGRYybWZSVhdHY+muoELFS6g8m5WP7NK39f9sKCJ2QSAUmcznF4hbxB7MFbBP5NGHd2E14675XhES+K1FOnhO0RlL/9cYSSY+KIj3PGwResIVdaf+F9XeNvaurb1r2x73g+ie2915wr3/XwfdD/yzw+KfIBXt/aP7eUvuCgNo+96tA4YLshN1uaWLeiwnR3b7cZ9h8bhaLRVG+1TYAppYL95oYiLoWYFSIAfYySZ8w1SoX2kHbQoV6L3Ilr+MreEQDDjlORGdplMcD1sMAM7kejkRHXB26e9ZCirpxvOIfybxYrLYS8ZfbL3KR1BPia/FZpnn4dl0f+NqJI/IU2yEndC5PclN4+YQUKBVuiZhxab7r/CMHHwWvC6siV1i4YNNDwfHnfxpyeHUUiFBaUD7qK6Vgd6CWOPlLht03pXduypldLfHk/7d4lZQUQFis/oyU/uUu5kr+0/nOUN4EfTeXBz2nfdp2LO/YrM3lfr+ay3V03Xfi95KdOu1zvPsf</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc6JKEP4rFvu4hVy8BSpaZdAYs0m0xFx2X1Lj0MgkMBBmQM2vPzOorJrLcZMnapq+fN3zTXefMhSFpt1lDFJOYlpZRiFldiFtK1lK7RgxwmyKImA2x7bbvb6yzapuo62JUhn22sqj2TSMFj6pqc3ZbKbWwbNU1LKQWmvV6rrRNEyomUKVsQyGlHFEeVsxdaOu6pZqWFO9aRumXbOqTaP5R6ncQcqEb6FS1ZUNqCVrKwHnia1pi8WiuqhV43SumbpuaA/XVy4OIEJK53SdUREo7Wz0cdUDDGGIqziOtFNtT+fUY7ZL5hTxLIVNLO+jWLqmW5rQ8RiZ/1BKW/CG1I+Lo4NoTAlGIXlFsj7XwIPYq3TDeZwSHkQfJmHo0rEKS6xio05/KNo+tCMd7SFMGVJZgIyNrwn4kALFULmdDNvKj+NurTCdpogyP04jtn/8NzxAcwjjBDyVbdPaQDve4TuV6pwCtocUhxkjOdxIsiYIA9vcJuDjXVXGKfhkeUWYIOiSSXTaLryD47oaPTIHxr9yQTuXs3Zyh8IMOq+Gn5/jQTB9uNQfJvfJ9d3D04V1PsmWw3YBYFe5EJRXuz4ekLIk0drCv5xc9OerYX0S3+eh6VJNT1aTyxFfLUz/19PTIMi75CSJ/Z/W+MIY/XRuW9cj64RmCLv9h2ayfMlv4mYy6/56GTw1oj7KWss0M/3l4tpHCbk/cxfR+HePw9nt6Ld/MRrM3EFe585V6qTDV3xpwc0qwjd1isj8Nni+74UaHl+O72aziyZBf/LVw+v57WA6SH/dtst0dvDvy7Zv3s1mT4D59ihpMOxVzsUtIf55M5MS4ql+oWonsvkwDpQrHWkle4ediXZHPFvc4fqs15qNc1NvtM5OGoZTM/p6o6Y3LMs417uOada2TWaN4gCiE1OfyFiy5a5p8zlAHNkMqAepmseZ6HRM+cRjD3FUGdKJeAQxZTCNRXtOgucaJ0HSWqHMC15IRlqLDC2wUrmJ+YiO0q7PId1vydZeS54AJgkB2bclrZngNeOiFC8oz3hoVHNUpZCJzp7KJmub9ZOGxkiUhCCBalHsZSFUkyApCqOx9ddUEWaFdNKfFo/tw7QO/20rIHQ8IhWYzOUMxC3CO7PF3CbyYcJCaSfhrftu5hH5rkQ5eUrwGsn+r78skfQoKdJ1nL7ruFvYpfY/WH/V2BmNvmjZu+q64+/YPjruo/FVB18P/b3AV99FLtj7TfO3ltonBNQOuV8G8nKyE3a7pYl5LyZEZ/tyX1D1pZrleVa81ZachKlwr4mBaGgu4EwMsNU0fgaqlS60o7aFEvVB5FK+jy/jAXU54hCJzlIpjkeshy4wuR4ORUdcHrt77oUUdeOw5O/JnFCsthLxp9svtrHUE+Kx+Czi1Pt7Xe/42okj8hTbISd0Lk9yU1h9QAocC7dEzLg43XX+noP3gu8LyyKXWLhg0yzj8PGfihxebQVhHGeUD3tKIdgdqAVOvkrA/qv0xk0xs8slnvz/Fq+SggIYxOrPSOFf7mK25D+d7wzlTdDDudzvd63WWcuqOye1Yi631nPZ6PWcsih76DpvxG8lO3U65HjnPw==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:0365EEA97B794C83E05307991F0A1DDC</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0365ED0444264C7EE05307991F0A175C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:0365F2057B851C31E05305991F0AC223</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:UHD</con:value></con:property><con:property><con:name>ContentRatingOid</con:name><con:value>0</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0C0D3985ED0A7CE0E05305991F0A0D8A</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_CS_1_concat.pem</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-09-07T01:45:09</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83905</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>484593</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0C0D375187982896E05307991F0A6538</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7f8bac65-1d67-40b1-b143-9184d15bd682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed11f47f-914c-4e55-b4d8-0dac46e20cba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c2b3189-9e83-4ebe-bf10-b61b73d72107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b99a906a-ce21-422a-b655-f8da1a178d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc6294d4-f906-4eeb-a168-897175978050</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>831a77fe-4ee9-4372-9b4c-e6a060b777f1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66e8a145-018f-431f-8665-ec475ea006a3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a346167c-21a6-4a0f-900d-603c0cfda9ee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9a4d6c0-a5a9-4062-bf88-79bd16347366</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a86d50-83c0-4245-8cfc-bc45b8ec081a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbecc869-1e04-4101-ac09-749a966d8daa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad4438e3-5a7a-4a6f-a66c-7fdef4ab2542</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d01bb1a-a283-4202-85c7-c6e4cc1497af</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTLCS</con:value></con:property><con:property><con:name>ContentProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>ContentProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_P1_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P1</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00057_DMRConsume_FUNC_RTL_POST_with_Active_Account_Active_User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="11d2d28e-01ab-4323-8837-97266ffccb7a"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="6d8e326e-00db-4c77-bbdd-73894e1a2654"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));

testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>FA9349FAB21EA95FE0401F0A079969F6</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:FA9349FAB21EA95FE0401F0A079969F6</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83890</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9570D39B97B790E0401F0A0799398D</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9570D39B97B790E0401F0A0799398D</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>bf344ccf-ff45-4e23-8981-bb238b98a610</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ea885f06-2a21-42e6-b697-a951d89c701c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aaebc1c4-248b-4c21-8845-a19a606a2c5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6d8e326e-00db-4c77-bbdd-73894e1a2654</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00059_DMRConsume_FUNC_RTL_POST_with_Pending_Account_Active_User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="2e18b004-c58b-4941-8958-d7874036632b"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Account to Pending"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account
set status = 'pending'
where
account_oid = hextoraw('$accountOid')""" ;
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));
</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="90ae905a-ab58-4b56-8b7e-17da2bea5daf"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="3a118de4-bb05-4400-8a3e-b7b4ed1f20e1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Reset Account to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account
set status = 'active'
where
account_oid = hextoraw('$accountOid')""" ;
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>FA9350CE0FA302A3E0401F0A07997F8E</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:FA9350CE0FA302A3E0401F0A07997F8E</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83892</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>OK</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA92D8C998ABA0FEE0401F0A07993527</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA92D8C998ABA0FEE0401F0A07993527</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>0c5d21ff-fb79-43d7-9555-d47231cfa6cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90ae905a-ab58-4b56-8b7e-17da2bea5daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a118de4-bb05-4400-8a3e-b7b4ed1f20e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00060_DMRConsume_FUNC_RTL_POST_with_Pending_Account_Pending_User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="e33084dc-e16f-4c19-b062-083a5a78fb87"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Account and User to Pending"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account
set status = 'pending'
where
account_oid = hextoraw('$accountOid')""" ;
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));

def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update account_user
set status = 'pending'
where
user_oid = hextoraw('$userOid')""" ;
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="f82b66c7-f9e7-4212-83e4-14ab79aa09bc"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="c8125d3d-9403-49c1-8f58-9e301cdf5007"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Reset Account and User to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account
set status = 'active'
where
account_oid = hextoraw('$accountOid')""" ;
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));

def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update account_user
set status = 'active'
where
user_oid = hextoraw('$userOid')""" ;
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA934F13E7E4B4B7E0401F0A07997884</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA934F13E7E4B4B7E0401F0A07997884</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83893</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:FA92D9ACF7CCED14E0401F0A07993C02</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>FA92D9ACF7CCED14E0401F0A07993C02</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>a1fc2467-4b43-4334-9c59-b0ca71b6ab0c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>542d1a5a-7cb7-4953-9fcb-933cd98331a2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8b19dcab-0d55-4762-9379-267bb3494e90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>995f3925-b799-4319-a1ff-bc8c6fd2de83</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f82b66c7-f9e7-4212-83e4-14ab79aa09bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8125d3d-9403-49c1-8f58-9e301cdf5007</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00061_DMRConsume_FUNC_RTL_POST_with_Unmatched_AccountId_in_Input_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="ccd37084-61df-4031-abe1-42420bac1cd8"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set NonMatching NodeAccountId"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("NodeAccountId",testProject.getPropertyValue("NodeAccountId"));

def nodeAccountOid = testProject.getPropertyValue("NodeAccountOid");
def nodeAccountId = "urn:dece:accountdi:org:dece"+nodeAccountOid;

testProject.setPropertyValue("NodeAccountId",nodeAccountId);

</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="a6194111-a546-4bba-b43d-e1a65c68c711"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset NodeAccountId"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("NodeAccountId",testCase.getPropertyValue("NodeAccountId"));</script></con:config></con:testStep><con:properties><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83894</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D50FB5483E3B88E05307991F0A403F</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08D50FB5483E3B88E05307991F0A403F</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountIdUnmatched</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FAB23CA95FE0401F0A079969F6</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FAB23CA95FE0401F0A079969F6</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>temp</con:name><con:value>urn%3Adece%3Aaccountid%3Aorg%3Adece%3AE588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>NodeAccountId</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>68615216-10dc-4506-80a9-27ce3196a048</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3aa6d4af-65b5-444e-ab9f-5b5a1df4b03a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9cd9ef42-779c-4674-80e4-9c8f2079e949</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6194111-a546-4bba-b43d-e1a65c68c711</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00102_DMRConsume_FUNC_RTL_POST_with_HD_Content_Profile_SD_DMRCreate_Consume_Success" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="33fecb41-485e-4c70-a713-c294bb2d4bbe"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="0d552fd1-63d7-4f35-85d1-1e1a36c0c8db"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="b22739b6-9ae6-4955-9f69-73514b34e621"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_SD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

//testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("ContentProfile","urn:dece:type:mediaprofile:sd");</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="eb04545f-852b-49fd-9189-70e338426f47"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="0432f413-d9ac-40f6-abb3-6cb2c5865fb4"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testProject.getPropertyValue("PurchasedMediaProfileSD"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("ExpectedCount", "2");

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset Project Content Profile" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("ContentProfile","urn%3Adece%3Atype%3Amediaprofile%3Ahd");</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BC9A4D871CEEE05305991F0A157A</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BC9A4D871CEEE05305991F0A157A</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83935</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>ConflictDiscreteMediaRightRemainingCountRestriction</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07D1BC99CA711A98E05307991F0A927F</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07D1BC99CA711A98E05307991F0A927F</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DEDBAC32B354A8C8E0401F0A05991ADA</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DEDBB137A0F6A8EFE0401F0A05992B95</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DEDBB137A0E7A8EFE0401F0A05992B95</con:value></con:property><con:property><con:name>assert2</con:name><con:value>pVdXc+LKEn7nV1DsI4WVSKJsV40CIIRIEvFlS4xGQqCERpFffyVsWOz17vU55wmmp8PXQd09z1h3HboHMEZhZPteVRJeaj+ZLt1laLhv7I222WgiSDVYGpmNLtMkzWaT0c2uXqtKGMdI8nCke9FLjSYppkG2GxSlke0e2ekx1BPZJXe16gqFuFBdsDyRtWrmOh7uXc2+1OLQ6/k6tnHP012EexHsqUAZ9wrOnn7DVHt9fkN5NRi+HqIo6BEEfDIQRI4Dn6DvEs/EB55nA/dU2/L0KA7Ru00Dv9TeZdM0fUqZJz+0CJokSYJkiYLHwLb1o/ZauQkjQ/JM/+3M657v2VB37IteglJQdPCNKnAsP7Sjg/sH1RRBkaXqBspgA1JN70eN+GXgiu6bmj6ADLHewAeduilbIBOFyIOoulxIL7Uf38vgm6wW6h42/dDFn87/DBLyEuT4ATIa+ObZDd33NX4RrtdnBHuSB50Y2wmalGUS6BDh6ixEpp2NbVwUn4Gr1/RXM3yrMAT/SUqeiUecBWzii8gItoVw9G/y9ZirNy0r3YnRa0fNqXWmR1Ae1vV+nZtklHMa7CfuDr9cITwyv4G6p/r9/LlQ73X1LgSPi7G/ngoHORGD3HQEez4AzZm9OgtCNlC0DbFtLufd2TqbUjmxz0IDzbC8PF0Wssye86ZDd8WjzsutLVmvMMZmQF4ybTMaG2TXxDAF28VktBXBsC0s8oCTlBmVZpknJdhstU6dM1gxlLGZsIkE+XpMOnlkoJbAnV2xQjKyM1/myZoeWKnb0rKp//LLp0cfSr9klF+dLP9vWiQr6JF+P/BlpzCLzzNCr4ok8XWB5wHiLZBKHLAkbnwBE846nQ8ne8CmJAfmyz4QQK4sQCpYW2E1n8tiaqxWzm4l9fucsmimQ7AVKsWFIGYrYbcZkfp6F2zpPrlTOc7YLPw9MwqM4SkdHuBE0ZR0okm5chSziSaS6yvNyorzRTkq1FRbMpX1kWOVhZgK6dWiIKaHyW69CLZLNoUXca6A5gBQS5E/KEPNXVGQWRzgURwr4HSlcweFX62UTNTArMJZk1Xhm8b3dwF0jWDvOocH5cNCuWYMVvl+4MS7i3hUeHHAq+eBKu0ZYS6OwGK73K9XJ33dTypwOAH7m0W7ZesbP7V23VSYb0eyv5MOCZyAuchxc1CEiwSKNBgBf8ABpQns7MIfubbPG/2UGNG4UmedQXuT2+cN1geko1PdLrUdr9uzc1sQvfpOjvfHg3LY9Kd1WTWSJRuxly1O6klbtymYBeZ8Iw4jOTOHc7WynwnZBg7rhjUinAvbD5XOCISX/OAo1iJat6c439umueY206bTMR2FWQSmYwY5rmv+/BSSbQ4xNLHNEzmqAEvhABgcl0durnDdMqiGlM63CqeDvhjF4HKkI5lenUfDxIFbBviZvJ4eT++JMYRU5Ih0LhZlJVa6AjDKJAzVpdg/giVnWSFniX1uDgUw30pyui3itRwWzJ/j2L/G0RI5IDI70GaHFWZJstE0UptNkHvc0uuzB+WcrY22S3bOSByrk6CZKnhieru1f1JcO1yGsbqU5ck422vx4HQsepVJqnLC7CpicgqAPZG1w0nwBX0WbLdRUPdgCCMpcBUpu0x3+Ni19y45qrcobkYKsEMv3X26HOjiTg4tlZKHC2/GdNgKjs186NaP3XRd19R20DF4zxTynNiFK9IHfp9dtM5GRtOnwzIdt1NzBE57nZ5kDsvlrCjvNJgu5vJadeutSisZj13yohHNSTBN1UHaFOfzOmNw2lDDQWhv466VhVPPoLd61E525KptB86JpeOT1gyYleUWyZolRtBRZpV5cwN3rtUJ4IhYEAkQO+ZYGuT7i34J3Cl8a6Cfu8Od+NY/iMfO8qH13JYOtahWBKPbsRxAklDtF1NBj/6+wJQU22iYV9ZeUG5BOEJeVHstpcrlpRcXK45t9IqR8XYWRIEDPENzTKsJunxXJJsk1ScB2WJZqmhYty3nDcUniLzvmXZpq9zj3qbU3wFCt4eRZ6CwkfgxPCBc+4vGMl5VyVsU49f3MNL8Yk9k2yTDsCwtdBgR8KDZFptst9smAd3s8y3QqlUnfjT1piEwIxR+3BHZDzviAkE7sFG5SJbTFBfjFBeTAp71JI4c6inRnzwUF6tmWG57PbrZbRHYdgMHlYAJ1zdiBz0Fh+AaIAK//dINHeIrdSFqPyWVv076P7r4+e4WjYLHsEsGXPrDoSKj6IuFl74580enKfrR6Zt6EBt2OdCL0EahDd+QfLz6VTFlqdzLhZ9OfvLqT+qG+87+XfHpfxEX1Nm/l/wvhstk/jfx3yWJv+SC+FwGd0NGYj+YvT1Yih282NJeb4V81p/OT3GSxNfS7ZQbaFioJyiCbBMqgnGxRuaaf0IecVdBfGuDv6P+ZPlO/4gvjg6eGhVd0C0+tOr1+I3nm4pw+XyTikaRffdt+MFkEbcIZdFXNN4pXnkl4r8+BGEPlnwFeVb8pH5o/ErXF7oe7BR+lm3f9qzyVO7r+R+KAvqFWrto/X74qPwrBV8Z/0i8B/mOJSqqaR9H6M831bKnv9R0CP3YiyShdiU8zpkrzigPUO8X029qrhvz+xMow398Am2UsVp0fFev3Xnt/8/csK/lAlEhhe0rlpdaVrzmC+Oe9TDX3gF+Hm0cxXQAKXZAV+w/jjaaY1v3AH7w5PU38u+Uh5h+/h5e/wc=</con:value></con:property><con:property><con:name>assert</con:name><con:value>pVdZc6pME773V1ieS8sALihWkqphU1TcQI3cnGIZEGWTYdNf/w0mekxOki/v+17p9PTy9EJ3zyPSfa/ZBwjBOHHDoCrxT7XfnV63aRi03aAZvdVot4xuQ2/BVoNkSNPq6Tpj0J1aVUIohVKAEj1InmpNksIMdIOiVJLuk90+RT20u5RWq65hjLBqzPJA1qqF7wWofzH7VEvjoB/qyEX9QPch6idmXwHypI85+/oVU+358RXlxWD8vEuSqE8Q5oMFTeh55oMZ+sQj8Y7n0UJ9xXUCPUlj+GbTQk+1N9k8zx/y1kMYO0STJEmCZAjMYyHX+VV7rlyFoSUFdvh65vQgDFxT99yzXoKSYbILrSrwnDB2k53/hWqKoMhSdQMWZsOk2sGvGvHHwAXdDzW9AxkjvYF2OnVVtoQ2jGFgwupqKT3Vfv0sg6+yaqwHyA5jH304/zNIMMigF0bQaqCrZ1d0P9f4SbieH6HZlwLTS5GbwWlZJpFuQlSdx9B2i4mLcPFZqHpJf7VA1wqD5j9JySNxjxPDJj6JDO86ECX/Jl/3uXrVsta9FD7TVl3LDSscaMjKJu2UFjXB6E2Hkyh/ukC4Z34FdUv12/ljod7q6k3INRjjuKVPmdhSF+xAQCuzlewK9ZySjEg1eTDke+JRiCT1vJ6uFxMzgN31Vj2JJIMy1VWMMyHyg2lEn3edSmiP8rnL8R1NC+21dkJntFyahr5dER3QDicDaz5PC10Wp25nNRrPlKzbbufcaeZaa+K8c226fUgZEcyQN6wARi7ELsz8Vj49h3G9cwZPf3y696H0awxPFyfL/y8dkuH1RL8duLJT2PjzTOCzLElcnec4ADkH5BILHImdnMGUdQ7H3cEdMDnJgsVKBDw4yUuQ886WXy8WYyG31mtPW0uiyMrLdj4EW76CL3ihWPPay4jUN1q0bYqkprCs9bIMjdYosoaHfLgzp7Iq51NVOsl7oZiqArm50JwCn8/yXqZm6qpV2exZRl4KOZ9fLPJCvptqm2W0XTG5eRYWMmgPALUSuJ08VP01ZbaWO3MvTGRwuNDZncyt13IhqGBeYZ3pGvumcqIWmb4VGb63u1M+xMpVa7A+GQMv1c7CXuaEAaccB4pktPiFMALL7crYrA/6Rswq5nAKjKtFt+PqL2HuaL2cX2xH41CTdpk5BQuBZRcAh4sEsjQYgXDAArkN3OLM7Vk65CwxJ0ZNVKkz3oB+ObnHF6QPSE+nej1qO9nQ8yPNC0FdG6fGfifvXsRZfaxY2YpJmPMWZfWM1l3KLCJ78SIMk3FhDxdKxZjzxYs5rFvOiPDOjBjL3RGIz6edJzvLZEPP0MlwbXvDvszaXtf25NYysj07OqG6Gi4OMUmzsNUktqdsnFSAI7MADParPbuQ2V4ZVEvKF1uZ1YEoJCk475vJuLk+joaZZ25bICzGm9n+8JYYi88FlsgXAi4rodLjgVUmYaisBHEPVqzjxKwjiOzC5MFiK43zLY7XaoiZP8ZRvMTREVggtDRAM8NKa0UyySxR2m1wCthVIDI7+VhsLNonu0coTJRp1M5lNLUDbRMeZN+NV3GqrMbj6aQw1HRw2ONeZZPKOGtpFSE7RMCdjtXdgQ95fR5tt0lUD8zYTKTIl6XiPNPQvucaPjmqdyh2TvJmt7nyjXw10AVtHDsKNR4ug3mry1RQap+Gfn3fyzd1VaGjrsUFNn86EVq8JkMQisyyc7SKZvOwW+UTOrdH4GDozWnhMeyJEcaaaubLxXij+PVOpZNNJj55Von2NJrlyiBvC4tFvWWx6lBFUexu055TxLPAam71hM40ck27kXdgmulBbUettePjZM0zK+rK88qi/WJqvtONzBGxJDIgdO2JNDgZZ/0c+TPztYF+7A434mv/IO47y7vWc106FFyt0Eyux3IASXxVxFNBT75fYEqKazXsC2s/KrcglMAgqT2XUuXy0k/xiuNafTwyXs+8wLMs1eoCUqRBTxAFsk1SIgnIDsM0WaZz3XJeUXyAyIWB7Za2yj3udUp9D9D0+wgGFowbWZiaO4hq32gs41WVgiUev2GAoBriPVFsAo7hGZbr0CLJ0QLJ9egW2+WYXq/J9EC7Vp2GySyYxcBOYPx+R2Te7YhLaLqRC8tFspymCI9TlOCQHPUsTTzqIdMfApjiVTMut71+s93rEMj1Iw+WgAk/tFIPPkS76BIgAr3+Nhu6iS7UpaD+lhTuMum/dPHj3TUamMdySwZU+sNCnFH4ycJLXp350mmqee/0VT1ILbcc6Di0Seyar0jeX/2pmLJUbuXCzaa/OeU3dcV9Y/+p+Oy/iPPK/N9L/hfDZTL/m/jfksQ3uSA+lsHNkJW5d2avDxa8g+Mt7flayEf94fiQZll6Kd1uuYHGWD1BESRNKNBM8Rp5UsMDDIibCuJHG/wN9QfLN/p7fGmyC5QEd0Eff2jVy/EHzzcFovL5JuFGUfz0bfjOJI5bAovkMxrn4Vdeifjbh6DZN0s+TJ7jnzyMrT/p+kTXnR3sZ9n23cApT+W+fvqiKMwQq3Vx6w/je+WfKfjM+HviLcg3LAmuJiNN4Nc31bKnP9V00wzTIJH42oVwP2cuOJNTBPt/mP5Sc9mY355ABfryCfQiTxTc8X29duN1/z9zw72UiwmxFHIvWJ5qBX7NY+OBczfX3gB+PtqE7nej7b0nz3+R/6bcxfTj9/D8Pw==</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>4c917225-d19e-469a-8bb8-32a3e4af4495</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e3c6be13-fdb0-497a-b1f5-68b6c339b24f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>687c71c4-4c5b-473b-9fa4-f48edcd26e44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5937201f-a8ea-4a78-992f-1a1df7ec141e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0d552fd1-63d7-4f35-85d1-1e1a36c0c8db</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b22739b6-9ae6-4955-9f69-73514b34e621</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eb04545f-852b-49fd-9189-70e338426f47</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0432f413-d9ac-40f6-abb3-6cb2c5865fb4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00139_DMRConsume_FUNC_RTL_POST_with_Active_Account_Blocked:TOU_User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="c155ddda-5ffc-4f6a-84d3-b2d78cdac013"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set User to Blocked:TOU"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update account_user
set status = 'blocked:tou'
where
user_oid = '$userOid'""" ;
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="e6df1e4a-fe23-4174-83de-586e684e5453"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="f4d22886-0132-49a8-a4a1-e4c12b560d45"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Reset User to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update account_user
set status = 'active'
where
user_oid = '$userOid'""" ;
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID" id="406d7a2d-b7aa-4647-96d0-34cb0dcb4abf"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>08D4C6103BEB2773E05305991F0A1555</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:08D4C6103BEB2773E05305991F0A1555</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83891</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse2</con:name><con:value>ForbiddenUserNotActive</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenUserNotActive</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA92D99620210AB8E0401F0A07993C06</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA92D99620210AB8E0401F0A07993C06</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:08D4C579737C277BE05305991F0AE697</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPuYMb4SB09ghuLkQAohAZL25KUj5DVWa8uOJRvorz+SuQQTkkOTJ4/We/l29Wl3LxmKI9PtMAYZJwmtLeOIMreUtpQ8o26CGGEuRTEwl2N30hkOXLOuu2hrotT6Xkv5iRxA+MJGKrKxr9qzpqkiswGqCXbDmjm25c9MocpYDn3KOKK8pZi6YauGoZrOVG+6luPajbplmU9K7REyJnwLlbqubEAtWUsJOU9dTVssFvWFVU+yuWbquqH9GA4mOIQYKe3LdUZloKy90cd1HzBEEa7jJNYutYrOpc/cCZlTxPMMNrH8t2Lpmt7UhI7PyPyLsrMFv0+DpDx2EU0owSgif5CszxB4mPi1TjRPMsLD+M0kDF06VmGJVWzY9IuiVaGd6KiCMGNIZSEyNr7GEEAGFEPtYdxvKV9Ou7XSdJohyoIki1n1+Hd4gBYQJSn4KtumtYF2usMjlWpfAnb7FEc5IwXcSrKmCAPb3Cbg013V7jIIyHJAmCDokkl02j68g+O6Gh6ZA+MfuaC9y1k7eURRDu37Dpw9/fqm6T3fiXt+z1rcrC5i7cmZ4FYJYF+5FOyudn08IOWORGuLVTxF4Vk+HiMvZjd3//bMpyeS6dwO/CbRNe1xdXdnnz8PaTRcwBD/mfs31/js/iYZ/ro5u7/1xj1vOiJWNvhnlXylk4Hf0R+8ueWc314Ff76PfhT3eRg94Cb5/q23XKEi8Nhs2n9YomAI6Y03uL0ejJ7HYzYPMX8WlX667dxPs94qjh6t2b+hZae/vbAArwh/t3bp7OGvyrZvfpLPfgHm26OkQd+rXYtbQvz9ZiYlxFeDUtVNZfNhHChX2tJK9g43F+2O+K64w/VZv/DsbsNpOpbTNR3n65XesPRGs2lc652r86azbTJrFAcQuwkNiIwlW+6aNu8DxLHLgPqQqUWSi07HlHc8eoijWp+OxSNIKINpItpzFl80LHCKjIdzQ4+KwEmDKIobkVK7TfiIjrJOwCGr9GTDrPTkMWCSEpCNW/KaCWIzLmrxjIqcR0a9QHUKuWjtmeyyrmlfNDRG4jQCiVSLEz+PoJ6GaVkZja2/ouFgVkrHV9Pytb2Z1+G/bQmEjk+kApO5fAVxjXBkuFjbRN5OuLGf8NZ9J/eJfFiinjwjeI2k+uuFJpIfO450ut2rSXeyhb3T/gvrjxp3R6MPWnqDzuTuM7Y/u5OfxkcdfDz05wIPPotcsPeT5q8ttXcIqB1yfxfIL8he2O2aJga+GBHt7ctN68/1vCjy8qk6chJmwrsYT0ZD001tAjgXM2w1TX4D1XZOtJMWhh3ug9g7eRVhzkM64YhDLHpLrTyesCFOgMkNsS+a4vLU9bMSUlSOw5Ifk3Ujsd1KxO8uwNjFUk+I78RnkWT+y4Ud8bUXR+QpFkRO6Fye5LKweoMWOBFuiRhzSbbv/JiDY8Grwl2Rd1i44NMs5/D2n5qcXy0FYZzklPc9pRTsz9QSJ1+l4L4ovXJTju3dHk/+f5FXSUkBDGL7Z6T0L9cxV74AOt+by5ugR0Zzw+teWaZzXhnNdvf8hZ8VdO1X4teSvTodcrz9Hw==</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>c45b508a-243f-4161-b352-3802055996de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>23bcaed0-6455-435e-9a93-5efc00ad2e13</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556d93fb-1367-4780-be5e-28335aa7b6cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>761f8571-9b00-49aa-8d63-97a1a9555042</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e715ba6f-d9a2-4335-b2f3-164ae5bdff7b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d9bcadef-fd43-4605-9b78-0c3be0bda564</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29e22459-0e42-4bb2-a76a-6e862de546b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>406d7a2d-b7aa-4647-96d0-34cb0dcb4abf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6df1e4a-fe23-4174-83de-586e684e5453</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4d22886-0132-49a8-a4a1-e4c12b560d45</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="RTL_P2_TestCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/Reports/R3/Sprint 3.4.2/DMRConsume/P2</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_Archived_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="0ce8ad2c-bf64-4a8d-88ee-8051fd2624ad"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status" id="556161c3-b35f-46bf-866b-0289f7d64a35"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('archived')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="c0a22e30-79f0-421f-9cba-1755d515826a"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BC94D4BF1AA4E05307991F0A9A29</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BC94D4BF1AA4E05307991F0A9A29</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0a22e30-79f0-421f-9cba-1755d515826a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00063_DMRConsume_FUNC_RTL_POST_with_Unmatched_RightsTokenId_with_AccountId_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="52252182-7799-46d5-b967-745be2f41c79"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));

sleep (3000);</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set NonMatching RightsTokenId" id="fe1a0c0c-82ce-4a10-b40a-7324b76f72cb"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

 def rightsTokenId = "urn:dece:rightstokenid:org:dece:098CE7FD9FC1A72F8E05305991F0A18BB";
testCase.setPropertyValue("RightsTokenOid","098CE7FD9FC1A72F8E05305991F0A18BB");
testCase.setPropertyValue("RightsTokenId", rightsTokenId);
</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="d8495076-e136-4d73-bbbf-38bf57b7ecb9"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>pVdXc+LKEn7nV1DsI4WVSKJsVykBAkSSiC9bYjQKoIRGCX79HYFhsdf29TnnCaanw9dB3T3PSPdcusMhBKPYCfyyLL5UftOQYXfAaNZIiqVq9Ua7Uds12rC2oxo7mmw3mBZkK2UZoQTKPop1P36p0CTF1MhmjSI1iulQ9U6dfGLarW2lvIQRwqoxyxNZKeee66POxexLJYn8TqAjB3V83YOoE4OOyimjDubs6DdMldfnK8qLwejVjuOwQxDgyYAAui54AoFHPBPveJ4N1FEdy9fjJIJvNg30UnmTzbLsKWOegsgiaJIkCZIlMI+BHOtX5bV0E4aG7JvB9SzofuA7QHeds16AUmBsB0aZc60gcmLb+0I1RVBkoboGc1ADVN3/VSH+GLig+6GmdyAjpNeQrVM3ZXNowgj6AJYXc/ml8utnGbzKapHuIzOIPPTh/M8gQT+FbhBCo4Zunt3Q/VzjJ+F6fYagI/vATZCTwnFRJqEOICpPI2g6+chBuPgMVL6kv5yjW4VB8E9S8kw84sSwiU8iIzoWRPG/yddjrq5alrqbwFfXc4GpuVtTOcpkmHJjWWrxWauXmtbLBcIj8xXUPdVv54+Feq+rN6HcrKp7d2Esjw2UdKcm4bS0TZLMlSE416V20u03aZQGBO8h2I6gni6ooEpNBa8fcX2bHwM5STxG8+vDg1zi1t3zbO0rDWXUG8zR4XSyRnxjg2yX6e2ajLZsTRgbGe3+IEjkrhFtDhsQV13qYDd6g128moCzsar2Wgs+jkunZag2N+nU8VL+pJ0YZ91++ePTow+FX0N4ujhZ/F83SFbUY/1+EIpOYeLPM4aviiwLVVEQOChYXCbznCXzozM35q3D0T44PTYjeW626HIid1LmXCZaG3E5mw2lzFgu3e1S7nZ5ZV7P+txGLOELUcqX4nY9IPXVNtzQXXKr8ryxngc7ZhAa/UPWt8FY0ZRsrMknZS/lY00iVxealePzWdkr1ERbMKXVnmeVuZSJ2cWiKGX2eLuah5sFm4GzNFO4eo+jFpJgK33NW1KAmdtgL40U7nCh87YiLJdKLmnctMRb4yX2TRO62xB4RrjzXPtBeR8r14ze8rTrucn2LO0VQeoJ6rGnyjtGnEkDbr5Z7FbLg77qpiXQH3O7m0Wn4ejrILO27UycbQbDYCvbKRhzM4nnZxwOF8kpcm/ABT2eU+qck5+FPd8MBKObEQMalaqs22uuT85xjfQe6epUu01tRqvm9NgUJb+6HSa7va3Y6+6kOlSNdMHG7HmD0mra1B0K5KE5W0v9eJib/Zla2k3FfA36VcMaEO6Z7UZKa8BF55PtKtY8XjUn6LRzTHPFryd1t2W6CjMPTdcMT6iqBbNDRDZ5yNDE5pQO4xJnKTzH9faLPT9T+HYRVEPOZhuF17muFCfceU/HQ3p5HPRTF2wYLsiHq8n+8JYYQ8wknshmEi4rqdQWOaNIQl9dSN09t+AtK+ItqcvPgMjNNvIw2+B4LfqY+WMcu5c4WhLPScyWa7L9ErMg2XgSq/U6d/L5hd9lbeWYr4ymR7aOUBqp47CeKWhs+ttVcFA8J1pEiboYDsejfKclvcMe9yqTVIcpsy1J6SHknPFQsw9iIOrTcLOJw6oPIhDLoafI+XmyRfu2s/PIQbVB8VNSBC164e2yRU+XtsPIUqlhf+5PmRZbQol56nvVfTtbVTW1GbYMwTfF04nYRksy4IIuO28cjZymD/YiGzUzc8Addjo9zl2WP7HScKuBbD4brlSv2ig10tHII88aUR+Hk0ztZXVpNqsyBq/1NRRGziZpW3k08Q16o8fNdEsum07oHlg6OWj1kFlaHk7WNDXCljItzeprsPWsVggGxJxIOalljuTeaXfWz6E3AdcG+rE73InX/kE8dpZ3ree2dKi4WiGIb8diAMliuYungh5/v8AUFMeomRfWTlhsQSiGflx5LaSK5aWT4BXHMTp4ZFzPoiSIbZoVaErEvVmgJLJOUl2SIxssS9N14bblXFF8gCgEvukUtoo97jqlvgcIvA6CvgGjWhokwIao8o3GIl5l2Z/j8Rv4CGoB3hOFFt3geYGjG3VWpKV2qyXi5kljpBIltiimUh4H8cSfRJwZw+j9jth8tyPOIXBCBxaLZDFNER6nKMYhOeppErvUU6o/+TDBq2ZUbHsdut5uEMjxQhcWgAkvMBIXPoV2eAkQga6/dE0H6EKdS9pvWRUuk/5LFz/e3aKBeQynYECFPzzEGYWfLLzMzZmvnWYfnb6p5xLDKQY6Dm0cOeCK5P3Vn4opSuVeLsJk/FtQf1M33Hf2n4pP/ou4qE7/veR/MVwk87+J/y1JfJML4mMZ3A0ZqfNg9vZgwTs43tJeb4V81J+OT0maJpfSbRUbaITVExRBNgkVggSvkSctOECfuKsgfrTB31F/sHynv8eXxLavxrgLevhDK1+OP3i+qRAVzzcZN4r8p2/DdyZx3GKYx5/RBBe/8grE3z4EQQcUfJg8xT9ZEBl/0vWJrgc72M+i7Tu+VZyKff30RVGAAKt1cOsPokflnyn4zPh74j3IdywxrqZdEsOvb8pFT3+p6AAEiR/LYuVCeJwzF5zxKYSdP0x/qblszG9PoBx9+QRaKyMVd3xPr9x5nf/PXHMu5QIglkLOBctLJceveWzctx7m2hvAz0eb0PxutL335PUv8t+Uh5h+/B5e/wc=</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DECD829C21C6E8C1E0401F0A0599224C</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DECD829C21D4E8C1E0401F0A0599224C</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DECD89245DA3BBAAE0401F0A0599364E</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>C0CEF8E08CE1C7D6E0401F0A0599120B</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B79B2B7861484CE05305991F0AF430</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B79B2B7861484CE05305991F0AF430</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>NotFoundRightsTokenNotFound</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>NotFoundNotFound</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/RET_concat.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>C0CEF8E08CE1C7D6E0401F0A0599120B</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83896</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:098CE7FD9FC1A72F8E05305991F0A18BB</con:value></con:property><con:property><con:name>RightsTokenIdtemp</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1FA120D9238E2E05305991F0A2B58</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>098CE7FD9FC1A72F8E05305991F0A18BB</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>df031f11-e8b5-4425-89a8-b303240ae4f8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4c7b5ed5-679b-47e7-a948-ad5ef4d8c279</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6faeecbd-c7d5-4b3e-b30f-832d49a48f74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fe1a0c0c-82ce-4a10-b40a-7324b76f72cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8495076-e136-4d73-bbbf-38bf57b7ecb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00064_DMRConsume_FUNC_RTL_POST_with_Inactive_RightsTokenId_Deleted_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d7e22b09-5e18-45c5-81c7-1fbc6b03adf9"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set RightToken Status" id="9615db26-bfb7-40b5-a177-8bcb3c12ba4f"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
rtsf.status_id
from
rights_token_status_ref rtsf
where
rtsf.status_id in ('deleted')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('RightsTokenStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set RightsTokenOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenStatus = testProject.getPropertyValue("RightsTokenStatus");
def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
sqlStr = """update rights_token set status_id = '$rightsTokenStatus' where rights_token_oid =hextoraw( '$rightsTokenOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="90b1e53f-6f8c-4bf3-9489-dcfa108faa1d"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1ADCD33856F37E05305991F0A1322</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1ADCD33856F37E05305991F0A1322</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83897</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRightsTokenNotActive</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>beb3f017-9cf5-464f-9193-a679b110c2a1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>737b8a0d-c9f0-442f-857d-9284ca87b94a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e52619a-6a07-4d44-9318-5193be046060</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>182e45fd-d9ed-4ef6-983b-2ea870a47daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9615db26-bfb7-40b5-a177-8bcb3c12ba4f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90b1e53f-6f8c-4bf3-9489-dcfa108faa1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00065_DMRConsume_FUNC_RTL_POST_with_NonExisting_RightsTokenId_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="a6b98162-6aff-41e2-9dcc-1cd222092c3b"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Set NonExisting RightsTokenId"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

 def rightsTokenId = "urn:dece:rightstokenid:org:dece:098CE7FD9FC1A72F8E05305991F0A18BB";
testCase.setPropertyValue("RightsTokenOid","098CE7FD9FC1A72F8E05305991F0A18BB");
testCase.setPropertyValue("RightsTokenId", rightsTokenId);
</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="329a5bd3-6e49-45ac-bf18-c75fff1b8107"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID 1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B7B9D5573B2109E05307991F0AB383</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B7B9D5573B2109E05307991F0AB383</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>NotFoundRightsTokenNotFound</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>NotFoundNotFound</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83898</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07CE7FD9FC1A72F8E05305991F0A16DE’</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D37AD798CB2886E05307991F0A02F0</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>957103d5-1e5b-4a73-b367-4fd8a32c82cd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d80e46b7-e802-430e-9bf0-38c02f8e0375</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6ee649cb-ccc7-4c58-817c-2cba05547aa8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>329a5bd3-6e49-45ac-bf18-c75fff1b8107</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00068_DMRConsume_FUNC_RTL_POST_with_Unmatched_ContentProfile_with_RightsToken_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="026c60cd-7595-4bd2-9637-f207e3c812ba"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Set NonMatching Content Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def contentProfiletemp = testProject.getPropertyValue("ContentProfile");
testCase.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:UHD");


</script></con:config></con:testStep><con:testStep type="groovy" name="DiscreteMediaRightCreateConsume" id="d366da55-053b-40ce-9356-ab52561c91aa"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DEE019EE2DFD8158E0401F0A05995668</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DEE019EE2E0B8158E0401F0A05995668</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DEE019EE2EE48158E0401F0A05995668</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:UHD</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B768B627233A14E05305991F0AA513</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B768B627233A14E05305991F0AA513</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ConflictContentProfileNotValidForRightsToken</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83901</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D25FC75E853ED7E05305991F0AB7B0</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D25FC75E853ED7E05305991F0AB7B0</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>38509f49-b63c-4c10-a9b3-9f4e76abdede</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>099f858e-9a5f-4f24-a3a3-b3612f793eab</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aa3210f2-6d30-4954-ad3f-b865ad889c98</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d366da55-053b-40ce-9356-ab52561c91aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00098_DMRConsume_FUNC_RTL_POST_with_HD_Content_Profile_SD_Consume_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="4f540ccf-5a37-4385-97b5-4521fc843312"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_SD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

//testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("ContentProfile", "urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testProject.getPropertyValue("PurchasedMediaProfileSD"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile" id="e9e80e84-0e88-4a06-826a-23470b049a73"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("ContentProfile","urn:dece:type:mediaprofile:sd");</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="93cfb3a2-2633-477e-ae55-e3ebad0ba814"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("ExpectedCount", "2");

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset Project Content Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testProject.setPropertyValue("ContentProfile","urn%3Adece%3Atype%3Amediaprofile%3Ahd");</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DEDBB137A0E7A8EFE0401F0A05992B95</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DEDBB137A0F6A8EFE0401F0A05992B95</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DEDBAC32B354A8C8E0401F0A05991ADA</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07D267DA6DF550D0E05307991F0A4369</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07D267DA6DF550D0E05307991F0A4369</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>ConflictDiscreteMediaRightRemainingCountRestriction</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83935</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D267DC73E650D4E05307991F0A4273</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D267DC73E650D4E05307991F0A4273</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>4c917225-d19e-469a-8bb8-32a3e4af4495</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e3c6be13-fdb0-497a-b1f5-68b6c339b24f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>687c71c4-4c5b-473b-9fa4-f48edcd26e44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5937201f-a8ea-4a78-992f-1a1df7ec141e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9e80e84-0e88-4a06-826a-23470b049a73</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>93cfb3a2-2633-477e-ae55-e3ebad0ba814</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00099_DMRConsume_FUNC_RTL_POST_with_HD_Content_Profile_HD_Consume" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="710694eb-bdf0-43cb-9587-13cf7a922ce9"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="f1112e77-1707-458e-9966-f6165809495a"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testProject.getPropertyValue("PurchasedMediaProfileHD"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("ExpectedCount", "3");

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet-PolicyDelete1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("nodeid",tP.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",tP.getPropertyValue("NODE_USER_ID_FAU1"));
tC.setPropertyValue("assertionUserIdFULL2",tP.getPropertyValue("NODE_USER_ID_FAU2"));
tC.setPropertyValue("assertionAccountIdFULL",tP.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
tC.setPropertyValue("assert",tP.getPropertyValue("SAML-FullUser1"));
tC.setPropertyValue("assert2",tP.getPropertyValue("SAML-FullUser2"));


def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Policy - Remove all Parental Control Policies")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83932</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BC77FCF51A66E05307991F0A48B2</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BC77FCF51A66E05307991F0A48B2</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07D1BC7596D01A5AE05307991F0A6719</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07D1BC7596D01A5AE05307991F0A6719</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:07D18EA56771131DE05305991F0AFAB3</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:07D1996C4E153CC4E05307991F0AED54</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:07D13D9E8D3F292DE05305991F0A0FD0</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbdcto8EH0Vxr3MGFs2TownMEMwSUghpJjQpjcdIS+g1JaJJQPp03+SAReTn48mVx6t9+fs6mh3zzmOI8trcQ6poAmrrOOIcS+XNrQsZV6COeUewzFwTxAvaPV7nlU1Pbwz0Spdv6H9mk7d+gRbth4id6rXHOLoLtiu7lpOWA9rNefMQlKV8wy6jAvMREOzTFTTEdJRbYQsD7meY1ZP3fpPrTKGlEvfUqVqaltQa97Q5kIsPMNYrVbVlV1N0plhmSYyfvR7AZlDjLXm+SajPFDa3OqTaggEoohUSRIb50ZJ5zzkXkBnDIsshW2s8K1YpmHWDakTcjr7ohW2EHbZNMmPbcwSRgmO6B+s6tMHMU/CSiuaJSkV8/jNJJCpHOuwJjpBNfZFM8rQjnRUQphyrPM5RltfQ5hCCoxA5X7YbWhfjru13HSUYsanSRrz8vHf8ABbQpQsINT5Lq0ttOMdvlKp5jkQr8tIlHG6hFtF1gUmwLe3CeR4V5W7FKZ03aNcEnTNFTpjH97BcVMNn86Ai49c0N7lbJyMcZRBc4Ge/1xZPx5rowc6NZeLE/vah3RgXcedRg5gXzkXFFe7OR6QsiDRxqJlkdseobPRYH5izpOLDr0ZXw2hf90Zrk/dCO5vLr5fDMcPw8n8N7obTW7sE24sxqPa97blPGTT3urx5mvfIcP22K6vWfowbv04WUaDb8lgGLhRgObXTxPRteEu6jg/nbtun7Hr4Mo0xqn12BNL2j+9j2K48seZef9z9HjVHtPQurcuboZ9fAmx/a3DjEfUYQ+8UaSzh78s2735IJs8AhG7o6JB169cylvC4v1mpiQ01Ke5qrdQzYcLYEJrKivVO7xMtjsaevION2fzzEdup+Wcnp0hZCO/Yzq26dTr6NJsXbYu7F2T2aA4gNhO2JSqWKrlbmjzPkASexxYCKm+TDLZ6bj2jkcfC1zpsqF8BAnjMEpke0bJcpI46+jPbJamKD59WiFKYhH+TrTKbSIGbJC2pgLSclN2Sk15CIQuKKjOrYjNJbO5kMV4wstMRKi6xFUGmeztqWqznlVzHYPTeBGBgmrESZhFUF3MF3lpDL75WjomPJcOO6P8ub2Z2OG/XQ2kTkiVAle5XIC8R3hlutR2ibydsLuf8M59KwupelmyoCKlZIOk/OsvTxRBCpK02u1O0A52sAvtf7D+qHF7MPigpd9rBXefsf3VDn6hjzr4eOjPBe59Frlk7yfNX1oa7xDQOOR+EShc0r2wuz1NTnw5I5q7l/uEq0/VbLnM8rd6pmZhKt3LAYUcw7SMAEgmp9jzKPkNzCi8GEetDAXwg+CFvAwxE3MWCCwgls2lkh+P2BED4GpH7Mq2uD52AS2FlKUTsBavydqR3G8V4ndXYOIRpSfFd/KzStLw74294msvjsxTroiCspk6qXXh+Q1ekES6pXLQJem+89ccvBa8LCyKXGARklCTTMDbfypqgjU0TEiSMdH1tVywP1VznOJ5Ad5fpRdu8sFdbPL0/1d5neYUICD3f05z/2oh89QTYLO9ybwNejicbb/ecX370qpbpeFsXvpmUZQSuuYL8UvJXp0OOd78Dw==</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPuYMbYwV09ghtikcQoJjUlL89IR8mKc2hJYMtD8+iMZcIBcDk2ePFrv5dvVp9095ziJK3aXc0hFxGhpncSU27m0rWUptRnmEbcpToDbgth+d9C3K2XTxjsTreS5be03Ro0AN2sTHU+CiV6doLqOUQv0qWVN6lXAaNqaSlXOM/AoF5iKtlYxUVVHSEfVEarYqGVXm+Vm03zQSj8g5dK3VCmb2hbUmre1mRBz2zBWq1V5ZZVZGhoV00TGeND3yQwSrHXONxnlgdLOVp+UAyAQx6RMWGKcGwc65wG3/SikWGQpbGMFb8UyDbNlSJ2AR+EXrbCFwKNTlh8dTBmNCI6jJ6zqMwAxY0GpG4csjcQseTMJZCrHOqyJTlCVftGMQ2gnOjpAmHKs8xlGW193MIUUKIHS/Z3X1r6cdmu56SjFlE9ZmvDD47/hAbqEmM0h0PkurS200x2+UqnOORDboyTOeLSEG0XWOSbAt7cJ5HRXpWEK02jdj7gk6JordMY+vKPjphpuFAIXH7mgvcvZOPmB4ww647Ob8WjeuPpe52gwNL6ii8tx+riE+dP3dg5gXzkXFFe7OR6RsiDRxmJo1YKncbN2sRyeeex6iG9psF745mOf3yyo3/yW1GlqLcTPhtmbOEk4cYx46oXdRW10NhyMF55vXnlrw/g6yDLy88G8alxeBTjs+clZZRWPg0EDPayenCAcfOXjcDi87lvWL+Km99d15k4t1PrV7HbZ3Lka1c16eE2vv9/W6apnjh9H/tPgW/Pi/j577M9w4mzTPcJ/KNu9eT+bPAIRu6OigeeWLuUtYfF+M1OSKNCnuao9V82HC6BC6ygr1TvsTLa7KLDlHW7OZsNFrVbdqfZQzXLkx6xZZqPVQpdmt+fWqrsms0FxBNFhdBqpWKrlbmjzPkCS2BxoAKm+ZJnsdFx7x6OLBS559E4+AkY5jJhsz8iymoyhBX1KIUStxQLgD541HleBVrph4pbept2pgPSwKdcOmvIdkGgegercithcMpsLWYwFXmYiRuUlLlPIZG9PVZu1K9VmzeBRMo9BQTUSFmQxlOezeV4ag2++FR0TnkvveqP8ub2Z2PG/XQ2kThApBa5yuQB5j/DKdLF2ibydcHM/4Z37bhZE6mXJgoo0Ihskh7+eeaIIUpCk6zg93/F3sAvtf7D+qLFze/tBS7ff9Yefsf3t+L/RRx18PPTnAvc/i1yy95PmLy2NdwhoHHO/CBQso72wuz1NTnw5Izq7l7vA5UU5Wy6z/K021CxMpXs5oFDNMCuGDySTU+zviP0BahRejJNWhgL4UfBCfggxEzPqCywgkc2llB9P2BF94GpH9GRbXJ+6gB6ElKUTsBavyZxY7rcK8bsrMLGJ0pPiofysWBo839grvvbiyDzliigiGqqTWhf+vsELwqTbSA46lu47f83Ba8EPhUWRCyxCEmqSCXj7T0lNsLaGCWEZFZ6r5YL9qZrjFH/nYD8rvXCTD+5ik4/+f5XXo5wCBOT+z6Pcv1rIbPUEaLg3mbdBj4ez5bZ6Tde6rLQqbj6ca5vhbF66ZlGUA3SdF+KXkr06HXO88x8=</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>e53543da-dddb-4d1a-a1ca-29984d3392a8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be271483-0593-4b9d-a890-68309df86c63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0db8018b-ac73-480d-9c52-8f1e7c3d9a50</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b896f50-49a7-47d1-8399-801216578e60</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1112e77-1707-458e-9966-f6165809495a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00100_DMRConsume_FUNC_RTL_POST_with_SD_Content_Profile_HD_Consume_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="00f4ec02-8477-4911-80c0-f80bc415374f"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_SD_Content_Profile');
//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);


def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

//testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("ContentProfile","urn:dece:type:mediaprofile:sd")
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Content Profile" id="ff626a6a-50b8-4088-ab9a-86c9fa260e27"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("ContentProfile","urn:dece:type:mediaprofile:HD");</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="90d33701-150b-4b9d-9803-bde76912fd70"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVbZcuI6EP0VynlMGS/YLK5AlWOW6xu2wSTD8JISsgAltkwsmSVffyUDDhDIZZInl9q9nG4ddfcdBWGgWzalKGY4Irl1GBBqpdKqlMTEigDF1CIgRNRi0PLsTtvS86oF9iZSzq1XpWe9YBgTDUxloMKCbJimKleg78tTUzUmZqVcKvpTrkppglxCGSCsKumqZsiaKmvFoWpaeskyi/mKZoyl3BOKKffNVfKqtAO1plVpztjCUpTVapVfFfJRPFN0VdWUUaftwTkKgVS722aUBoprO32Y9xFEQQDzMAqVO+VI586nlodnBLAkRrtY/qVYqqJWFK7jUzy7kTJb5LtkGqVHB5CIYAgC/A5EfTqIzSM/ZwezKMZsHl5MQlOFYxmtoQw1g9xIyjG0Kx0dIYwpkOkcaDtfAzRFMSIQ5R4HblW6ue7WUtNhDAidRnFIj49/hweRJQqiBfJluk9rB+16h2cqVbtD0HIJDBKKl6gryLoAENHdbSJ4vatcP0ZTvG5jygm6pgKdcgjv5LitRh3PEGXfuaCDy9k6eQJBgmpTqHZ/Tep2qxUkyi+317lt+lDxupORW00BHCqnguxqt8cTUmYk2lq83CL1qfwyWvtFh+LHV01XFbffiFrtbu+hE5o9thjqtBAMxq7zZ7waDDbjXg+W/3Gffm+ahfC1XH4FpdbolY7R+Pc4Th6evPdOz+0sC3aQjHVnTSZdJyQK8AqsE4wH88ZGe6CgPzMaxfVjx2Yjz1Hao0XcWo7/XQcdsz9q3ibvLzhuzYa2ERdvW81Ga6yOHv9Us3QO8B/L9m/eSyYvCLL9UdDAreea/JYA+7qZCQnmrE9VrYVoPpQhwqSasBK9w0p4u8O+xe9we1bNslHWC/d2+d4x6k6loZoF1axUtKZq60alsW8yWxQnEJ2ITLGIJVruljZfA4ShRRHxUSwvo4R3Oip94bEOGMi5ZMAfQUQoGka8PYMIvhi0uMIVEmrmS9nflMNKEa0mUq4bsR7pxfaUofi4J5ePevIAQbzASDRuwWvKiU0Zr8UbWCYs0PJLkCco4a09Fl3W0o2yqVAcLgIkkCph5CcByi/mi7QyCt1+dRlAmkoHjWH62i7mdfpvXwKu42OhQEUu94hfIzozXIx9IhcT1rTDhPfu7cTH4mHxerIYwy2S418fNBH8yDhiO07Dc7w97Ez7L6y/a+z0et+0rLdtr/8T22fHe9a+6+D7oX8WuP1T5Jy9PzT/bKl8QUDllPtZIH+JD8Lu1zQ+8PmIqO1f7hvIv+WT5TJJ32pJjMKYu+fzSTMVVVc8BBM+xDbD6BURJfOiXLUxZMBPgmfyY4gJmxOPAYZC3lxy6fGKFdFDVKyILu+K62v3z6OQvHQMrdk5mRPw9VYg/nIDhhYUelzc559VFPsfN3bG10EcniffEBkmM3ES28LmAi9gxN1iPuei+ND5OQfngh8LsyJnWBgn1CRh6PKfnBhgVQlAGCWEuXUpFRwO1RQn2yyQ9aH0yU06t7NFHv//Ji/jlAIQ8fWf4tS/2Mcs8QTI7GAw74KezuZSs2Q3m42CYZeMw9ncrBt6VpQjdLVP4s+Sgzqdcrz2Hw==</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbd6o6EP4rLvrYhVwERVZ1Lepl113tRazt2S9dMQRNCwklAe359SdBpWovx90+sTLM5ZvJl5k5YyCOTNdjDKUcU1JZxRFhbiFtKVlKXAoYZi4BMWIuh67vjYauWdVdsDVRKoNuS3l0nIZhwgCos6ZhqNasBlXQ0B21bjtQF/JaM5wJVcYyNCCMA8JbiqkblmroqlGf6LZrOq5tVg2n/kepTFHKhG+hUtWVDagVaykLzhNX05bLZXVZq9J0rpm6bmgPo6EPFygGSvtsnVERKG1v9GE1QBBFEaxCGmtn2p7OWcBcH88J4FmKNrGCz2Lpmt7UhE7A8PxEKW1RMCAhLY4dQCjBEET4XyDrM0J8QYOKF81pivki/jQJQ5eOVbSCKjQscqJo+9COdLSHMGVAZQtgbHyNUYhSRCCq3I0HLeXkuFsrTCcpICykacz2j3+HB5EcRTRBgcq2aW2gHe/wg0q1zxB0BwRGGcM5upJkTQBEbHObCB7vqnKTohCvhpgJgq6YRKftwjs4rqvRxXPE+HcuaOdy1k6mIMpQ++FyABxrOhtNPN2BfxYXQR9Pnxr49+uoVQDYVS4E5dWujwekLEm0tljkybDTfGbMGqZj3xrUg9rFw2pZ6xi/eqc3lD97vcunhvfyMrOxcWuf/vOQzdhi+bq4ZM/TEZnW6E2IuwieZ3l2NaUjGNZeQgyD85D1ovxyptWeuwNwF0ez+9hoJg6aXJ7rUf1uNL29j/F1/db7dXFx/zs8nfUZ90N0Pib02kuWnagbdk6bD40GGPHcZkMMW2U6O/j3Zds372ezJwT59ihpMOhW+uKWAP+6mUkJDtSwUHUT2XwYR4QrbWkle4ebiXaHA1fc4fqs247lWJ5uN3u2Wev3e7pd0xvNptHXvX7PsbdNZo3iAGKHkhDLWLLlrmnzNUAYuwyRAKVqTjPR6Zjyhccu4KAyIGPxCChhaEJFe6YJYMis5dnTU2rQOG2YwWuzvgiVyhXl1+Q69UKO0v2W7Oy15DGCOMFI9m1JayZ4zbgoxQvIMx4Z1RxUCcpEZ09lk3VNy7E1huMkQhKoFtMgi1A1WSRFYTS2/poqgKyQjnuT4rF9mtbhv20FhE6ApQKTuZwjcYvog9libRP5NGHD2E14697LAizflSgnTzFcI9n/9cYSSY+SIl6n0/M7/hZ2qf0X1t817lxff9OyO/T8m5/YPnb8R+O7Dr4f+meBhz9FLtj7Q/P3ltoXBNQOuV8GCnK8E3a7pYl5LyZEe/tyX0D1pZrleVa81YachKlwL8aTYWu6qfkIZmKGvU7oMyJa6UU7amEogR8EL+X7EDO+ID4HHMWiuVSK4xEboo+Y3BAHoimujl0/90KK0nG04h/JOpHYbiXiLxdg6EKpJ8Q34rOkafB2Yx/42okj8hQLIsdkLk9yWXj9hBeQCrdYjDma7jr/yMFHwfeFZZFLLFwQapZx9PmfipxfLQVASDPCB12lEOzO1AInf02Q+6b0zk0xtss9Hv//Iq/iggIQie2f4cK/XMdc+QTIfGcub4IejuZGv+GJoVyzvIZVjGZ7M5q7llkWZQ9d+534vWSnToccb/8H</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:05847F7AFFE34A74E05305991F0AFD42</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:0584823BA8BC4DC9E05305991F0A249E</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:058484A059E523FFE05307991F0AFE85</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:HD</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05852D1257CA28DAE05307991F0A68FB</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05852D1257CA28DAE05307991F0A68FB</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>MediaProfileNotValidForRightsToken</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83933</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D26779229E4D73E05307991F0A99C2</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D26779229E4D73E05307991F0A99C2</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>e3c6be13-fdb0-497a-b1f5-68b6c339b24f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd698d94-3a97-43b6-8973-7ee5137ca49c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>600b4844-42cb-4a12-af34-b6ceaf949e41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>86ed10da-f939-456c-85c1-b3f463acc419</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ff626a6a-50b8-4088-ab9a-86c9fa260e27</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90d33701-150b-4b9d-9803-bde76912fd70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_Blocked_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="b6be2cce-53ad-4ba7-9db1-f709172cb020"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('blocked')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="05e364c7-1617-418c-933b-0a88b8271432"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>nVdbc6rKEn73V1juR8twFcVKUjUIKioqAl54OYUwIspNhpv++jOY6EqystbJPr7gND3dX1/o+eYZWYFP9wBCMEm9KKzL4kvjP/yOYyDDUy1n51AttrvbtyyK51pch4dtnoekTdGNuoxQBuUQpVaYvjRokmJaJN8iWZ1s92iqR7NPZLdjNuormCBsGqs8kY16Gfgh6t3cvjSyJOxFFvJQL7QCiHqp3dOAMu1hzZ51x9R4fX5DeXOYvB7SNO4RhP3kQBv6vv1kRwHxTHzSeXZQT/Pc0EqzBL77dNBL431vURRPBfMUJS5BkyRJkDyBdRzkuf80Xmv3zdCRw330tu5bYRR6tuV7V6sCpcD0EDl14LtR4qWH4A+mKYIiK9MtWNotm2LDfxrELwc3dD+09AlkgqwWOljU3dgS7mECQxvWjaX80vjnZxV826snVoj2URKgL+t/BwmGOfSjGDotdI/sju7nFr9J1+sztHtyaPsZ8nI4q9oktmyI6osE7r1y6iHcfA6q38pfL9G9w6D9b0ryTHzEiWET32RG9FyI0v+nXh9r9WZlZfkZfM3VVGs3QchKiGtDjliauU4oZYeR7ZcbhI/Kb6AepX5ff23UR1+9bzKK/XZSshY6bl2BhevlilINurgoYb5y5qY5v0RBWBznSVzEEr+AGTHZN4f6ZrgLg7y5XR1DS5P6uts+LdTaRKVnEz9JV+W4yJoOClSD0ZriYCAdDiLjiO45vW410+cHG/l8LACfEpLlrhU9Q32doP2rQfvugVGBbsxrlyIEfT84jbaSEaTmVDsaL79i+hhDFdcEXm5BVv83bZIXrdR6LPrVpNjjzzOFr4os95tivw9g3wWFLABXFqZXMBPc0/lw8oZ8QQpANQZABBdlCQrR3YorVZ1IhbNa+eZKHgwEZckWI7AVa/iFKJUr0dyMSWttxlt6QJqaIDibZbRjxrEzOhWjgz1TdKWY6fJFOUrlTJfI9U3mlnh9VY4KNdcNprY+CryylAqxuHkUpeIwM9fLeGvwhX2VVAWwQ0AZUv+gjPRgRdnM8mAfpakCTje5cFD6q5VSSjpY1AR3tsKx6f2BGduBE+8C//DB+Agb153h6rIb+pl5lY5KXxr2tfNQk3eMqEpjsNwau/XqZK0Hec0ezcDu7tFre9YmKlyzW4jqdjyJTPmQ2zOgSoKgApwuEijycAyioQAUFnjltX8UuKjvDApiTKNak/eH3ObinTfIGpK+RXW71Ha65hZnTpTCpjnJdseDctgM5s2J5uQGn/LXLcqbOWd5lF3Ge3UjjdJJuR+pWm23EMuNPWo67pjwr/wgUTpjkFwvB19xl+mam6PLztvv18Jmzvqdva8wy3jv7+MLauqRekpIToAMTWwv+SStAVcRABgejaOgKkK3SqojF+pWESwwkNIMXI90OqFX5/Eo9+0tA6Jysp4fT++FccRCEohClXBbSbWuCJyqCCPNkAZHYAiumwiuNBBUWwTqVp4UW5wvY4SVv+ZxcMujKwlAYkzA8aMaY5B8Ok81lgWXUDDCAX9QzuXa4QKyc4bSVJvFbKGg2T4019FJCbzESDLNmExm03KnZ8PTEc+qPalNcsasSfkpBt5soh9OYiRai3i7TeNmaCd2KseBIpfXuYmOXW8XkONmmxIWpGh3aCPYFcbQksxJ4mrUZLQMF0yHr6FsfxkFzWO3WDd1jYs7Tj/ci5cLYSYrMgLRgF+2z05J06eDUUy5Yj8Gp51Fz0qfFy68NDF1u1iqk7UWNNu1dj6dBuRVJ9hZPC+0YcFKqtpkHEEf6ShOvG3WdctkHjr01kq53CRXnBf7J57OTjobMys3wMVa5E7cURY1ld3YZuB2YntMLIkcSJ39VB5edlfrGgfz9wH6dTo8hG/zg/g4WT6Nnjvp0HC3Qju9L6sDSBbrA3wqWOnfCUwl8ZzW/qbaiysWhFIYpo3XaldFXnoZpjie08NHxttaane7A44BNMt2GFaQJJIlqQEJyA7Ps1IH3FnOG4ovEPtRuPcqXxWPezul/g7QDnoIhg5MWnmU2QeIGn+xWOWrLodLfPxGIYJ6hHkix4pt0Ol0ugD/OApwNMN025zAgD4psR2pUZ9F6TycJ2CfwuQzR+x+4ohLaHuxBysiWZ2mCB+nKMUpOVt5lvrUU249hTDDVDOp2B7e120TyAtiH1aAiSByMh8+xYf4liACvT3plmWjm5ShGfp2zP8xvq/v7qnAOo5XKaAqGAHicsJv2C51j+S3iNlvWfHdPMgcrzrNcV7TxLPfkHx+9atdqj559EoV0h3zQ/Wr4JNZ4mtED09O7tmPjn9cBjCXxGzj9V6Qs/V0fsryPLuVoFMxqQSbJyiC5AgN2hmmQxc9OsGQeJggfsREH6i/eH7IP+PL0kOopfhrDnDD1G/LH1xDNIiqa4iMG7786R3nk0uctxSW6Xeyvo9vKxXiv15o7J5d6WHxAj+KKHF+lesbWx/84Dir8eWFbrWqeOflD11hR9ish0dYlHw0/p2B75x/Fj6S/MCS4m7aZSn885t6NZteGpZtR1mYymLjJvg4L28400sMe7+UfjNzY37vVL5Ef6TyG2Wq4ckVWI2Hrve/lVverV1siHch74blpVHiWyl2Hrof5vM7wG9HNMOJfxvRnyN5/U38u+RDTr9+D6//BQ==</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BD11A4CB1B8BE05307991F0A562B</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BD11A4CB1B8BE05307991F0A562B</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>05e364c7-1617-418c-933b-0a88b8271432</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_BlockedTOU_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="6ac80beb-65a7-40c2-8f68-737f40bdf9ce"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('blocked:tou')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="0ef72c4e-4669-46ac-8aad-72c9bc36fe6c"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BD0C57FA1A9AE05307991F0A4E01</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BD0C57FA1A9AE05307991F0A4E01</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ef72c4e-4669-46ac-8aad-72c9bc36fe6c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_Deidentified_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="c06ea607-ca58-48a2-bd69-ff73eb88a803"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('deidentified')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="e3441409-1a0a-4d33-bd50-2ee924def52f"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1FA120C2238E2E05305991F0A2B58</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1FA120C2238E2E05305991F0A2B58</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e3441409-1a0a-4d33-bd50-2ee924def52f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_Deleted_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="edbe2429-58d9-4187-aacd-0ce929bc3c32"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('deleted')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="2091306c-9af5-4b1d-af79-080a73f161ba"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BD0C58BE1A9AE05307991F0A4E01</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BD0C58BE1A9AE05307991F0A4E01</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2091306c-9af5-4b1d-af79-080a73f161ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_ForcedDeleted_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="6148f725-517a-4b65-82c1-e2324f813fdd"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('forcedeleted')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="e35eb5cc-c513-4814-b3a1-564e5f4a14cd"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BCD936331B4BE05307991F0A2EBC</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BCD936331B4BE05307991F0A2EBC</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e35eb5cc-c513-4814-b3a1-564e5f4a14cd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_MergeDeleted_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="44efd76e-6216-4e7e-a5f2-a6957ad33eb5"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('mergedeleted')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="be5ad460-0636-40c2-9a6a-02c1f12d026d"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1F28FE474277BE05305991F0A8D5F</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1F28FE474277BE05305991F0A8D5F</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be5ad460-0636-40c2-9a6a-02c1f12d026d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_Other_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="f07d68fa-661a-49cc-b5ec-f76fc37e29a1"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('other')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="67ce7c95-0a2a-409c-9262-9807ec3e90e8"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1F151679D235AE05305991F0A9B54</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1F151679D235AE05305991F0A9B54</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67ce7c95-0a2a-409c-9262-9807ec3e90e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00062_DMRConsume_FUNC_RTL_POST_with_Inactive_AccountId_Suspended_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d596462a-43de-4edd-bded-807e2b14deb8"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set Account Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
asr.status
from
account_status_ref asr
where
asr.status in ('suspended')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('AccountStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountStatus = testProject.getPropertyValue("AccountStatus");
def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = '$accountStatus' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="1f0886f7-fabc-4cb5-97c4-e344ab462f99"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset AccountOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83895</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BD0FF9171A92E05307991F0AEA8E</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BD0FF9171A92E05307991F0AEA8E</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9349FC3D334C99E0401F0A05991817</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ccf77183-dadd-418c-be07-321559f6f7b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80ddaeb9-8352-49a0-aee7-a571fc578478</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4ae5bc8-65ed-47d1-89bf-3d9ac6e1227b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94897f0d-4cec-4f65-8561-7303c6376576</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6de8e7e-5fdf-43be-ba18-a2f2630fde70</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>556161c3-b35f-46bf-866b-0289f7d64a35</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f0886f7-fabc-4cb5-97c4-e344ab462f99</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00064_DMRConsume_FUNC_RTL_POST_with_Inactive_RightsTokenId_Other_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="0cc49b8b-3aeb-4ed1-bf83-e9005a670570"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="eeae9ea2-9583-4ebe-a9a3-8bdd34e96673"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="9ea9d56f-6ee1-4332-b2d4-e173b455c612"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set RightToken Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
rtsf.status_id
from
rights_token_status_ref rtsf
where
rtsf.status_id in ('other')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('RightsTokenStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set RightsTokenOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenStatus = testProject.getPropertyValue("RightsTokenStatus");
def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
sqlStr = """update rights_token set status_id = '$rightsTokenStatus' where rights_token_oid =hextoraw( '$rightsTokenOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="8cf64b81-3931-4ec9-acd4-e7c2b835bd03"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRightsTokenNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83897</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D2679B4AC24D95E05307991F0A3BF3</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D2679B4AC24D95E05307991F0A3BF3</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>beb3f017-9cf5-464f-9193-a679b110c2a1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>737b8a0d-c9f0-442f-857d-9284ca87b94a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e52619a-6a07-4d44-9318-5193be046060</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>182e45fd-d9ed-4ef6-983b-2ea870a47daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>249603dd-3924-4a95-953d-8d3778ba90ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9615db26-bfb7-40b5-a177-8bcb3c12ba4f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8cf64b81-3931-4ec9-acd4-e7c2b835bd03</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eeae9ea2-9583-4ebe-a9a3-8bdd34e96673</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9ea9d56f-6ee1-4332-b2d4-e173b455c612</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00064_DMRConsume_FUNC_RTL_POST_with_Inactive_RightsTokenId_Pending_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="2bb3ab7f-b722-4bf9-a601-9cb2305beb0d"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="badb886e-d036-4176-901d-ce936e29a5c3"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="da68524f-a555-4671-9196-c66e7cde191e"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set RightToken Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
rtsf.status_id
from
rights_token_status_ref rtsf
where
rtsf.status_id in ('pending')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('RightsTokenStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set RightsTokenOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenStatus = testProject.getPropertyValue("RightsTokenStatus");
def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
sqlStr = """update rights_token set status_id = '$rightsTokenStatus' where rights_token_oid =hextoraw( '$rightsTokenOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="ad783d7b-2e55-45e4-99a2-7a91928a096b"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRightsTokenNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83897</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D229207B9F3080E05307991F0A2569</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D229207B9F3080E05307991F0A2569</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>beb3f017-9cf5-464f-9193-a679b110c2a1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>737b8a0d-c9f0-442f-857d-9284ca87b94a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e52619a-6a07-4d44-9318-5193be046060</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>182e45fd-d9ed-4ef6-983b-2ea870a47daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>249603dd-3924-4a95-953d-8d3778ba90ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9615db26-bfb7-40b5-a177-8bcb3c12ba4f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>badb886e-d036-4176-901d-ce936e29a5c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da68524f-a555-4671-9196-c66e7cde191e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad783d7b-2e55-45e4-99a2-7a91928a096b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00064_DMRConsume_FUNC_RTL_POST_with_Inactive_RightsTokenId_Suspended_Status_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="5921d68f-5805-4331-805f-0f8a531883f9"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Get and Set RightToken Status"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

sqlStr="""select
rtsf.status_id
from
rights_token_status_ref rtsf
where
rtsf.status_id in ('suspended')""";

sql.eachRow(sqlStr){
	STATUS = it[0];
}

log.info "Status :"+STATUS;

testProject.setPropertyValue('RightsTokenStatus',STATUS);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set RightsTokenOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//DBConn
def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )
def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def rightsTokenStatus = testProject.getPropertyValue("RightsTokenStatus");
def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
sqlStr = """update rights_token set status_id = '$rightsTokenStatus' where rights_token_oid =hextoraw( '$rightsTokenOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="efb559f1-75aa-47f6-88d9-7a337365a265"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E588F63A236D34BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E588F63A238034BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E588F63A244734BEE0401F0A07994E7A</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>FA9570C2BAC6ECA7E0401F0A07993983</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRightsTokenNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83897</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1F1516821235AE05305991F0A9B54</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1F1516821235AE05305991F0A9B54</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>beb3f017-9cf5-464f-9193-a679b110c2a1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>737b8a0d-c9f0-442f-857d-9284ca87b94a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e52619a-6a07-4d44-9318-5193be046060</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>182e45fd-d9ed-4ef6-983b-2ea870a47daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>249603dd-3924-4a95-953d-8d3778ba90ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9615db26-bfb7-40b5-a177-8bcb3c12ba4f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>efb559f1-75aa-47f6-88d9-7a337365a265</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Error Codes_P1_TestCases"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00040_DMRConsume_ERRC_401_Security_UserNotActive" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="937e6fec-00aa-4548-9e12-a9764df92521"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Set UserOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));
def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update account_user set status = 'deleted' where user_oid = hextoraw('$userOid')""";
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="3ddb0dc4-60f8-4813-a992-a3611160c747"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset User to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));
def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update account_user set status = 'active' where user_oid = hextoraw('$userOid')""";
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D56C75CE0B0207E05307991F0A8F4A</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D56C75CE0B0207E05307991F0A8F4A</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenUserNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Certs\3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83874</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D0380FE51E02B4E05305991F0AFB43</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D0380FE51E02B4E05305991F0AFB43</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f79e670d-7c38-41da-a692-252156dd45db</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0a3edd8a-c003-448d-8d71-d0dcb35b9845</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc1b175-187f-4b74-8140-acb17741b4c6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3ddb0dc4-60f8-4813-a992-a3611160c747</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00041_DMRConsume_ERRC_401_Security_UserNotInAccount" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="d67afca0-7119-48e4-89c7-e2657eaaaff0"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
//createRTTC.setPropertyValue("NodeId", testCase.getPropertyValue("NodeId"));
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Set UserOid to a value not belonging to this account"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def nodeUserOid = testProject.getPropertyValue("NodeUserOid");
def accountOid = testProject.getPropertyValue("AccountOid");

Integer countUser;
sqlStr = """select count(*) from account_user where privilege = 'full' and status = 'active'""";
sql.eachRow(sqlStr){
	countUser = it[0];	
};

def random = new Random();
Integer randomInt = random.nextInt(countUser - 1 + 1) + 1;
sqlStr = """select user_oid from (select user_oid, rownum numRow from account_user where account_oid not in (hextoraw($accountOid)) and status = 'active') a where a.numRow = $randomInt""";
def userOid;
sql.eachRow(sqlStr){
	userOid = it[0];	
};

sqlStr = """update node_user set user_oid = $userOid where node_user_id =hextoraw( '$nodeUserOid')""";
sql.executeUpdate(sqlStr);

sql.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="c838bad8-88b5-4cec-91d3-11829f9a62e7"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset to a Valid User for this Account"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def nodeUserOid = testProject.getPropertyValue("NodeUserOid");
def userOid = testProject.getPropertyValue("UserOid");
sqlStr = """update node_user set user_oid = $userOid where node_user_id =hextoraw( '$nodeUserOid')""";
sql.executeUpdate(sqlStr);</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83875</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D0322E9C3D7433E05305991F0A8924</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D0322E9C3D7433E05305991F0A8924</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>NotFoundUserNotFound</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D56C74A52B0205E05307991F0AD7CD</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D56C74A52B0205E05307991F0AD7CD</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVdZk6LMEn33Vxh+jx02m7jFdEcUm42KyiIuLzcQSkARlAJBfv0tcLS1p2e+ufehw66kMutk5iE59QNZh4DuA4RgnPhRWJeFt8Z/6A0LWZbqNNmOxTZblG03e06HbLaYbhuykGRbnXajLiOUQjlEiRUmbw2apJgmyTYZyiB7fYbut7qvJEmvG3UTxgiHxlteyUY9PwQh6lfHvjXSOOxHFvJRP7QOEPUTu68DZdzHO/vWDVPj/ccVZXVg/O4lybFPEParA20YBParHR2IH8TTnh8O6uu+G1pJGsOfZzrorfHTN8uy14x5jWKXoEmSJMgegfc4yHf/abzXbs7QkcNtdF3zVhiFvm0FfmGVoBSYeJFTB4EbxX7iHX4TmiIosgzdhLndtKlW+E+D+DygQveXkZ5AxshqIs+ibsE0uIUxDG1Yn2vyW+Ofv+vg1deIrRBto/iAvqz/N0gwPMMgOkKniW6Z3dD9fcRvyvX+A9p9ObSDFPlnOClpcrRsiOqzGG79fOwjTD4H1av213N0Yxi0/5eW/CAecWLYxDeVEXwXouT/6ddjr65RTCtI4Xt3vzBmypHi5/AjPBuCvZjupU4rnS+UtwrC4+YrqHurf66/EvXOq59OprzbT7Jz8YFiRZwkxVbfmbtzLEyXs0mbTxkSFy5Dnd1AL9SjSZq9dfAx1cWCoZbTUeAqWSEGqjvnXqbhpcYHiSmDXFvJRtekZ6sTGuWmsMh7fhRInkm2LOlAUujESkM4dWMy1df6aDplEv9lMWwdbPaACnMWj5OePqx5STg2ivFkwC/88en8ou7kt8+cHnMo8xrBS5Vk+f+SJXuClVj3BV9Oii1+PRP4rsiykBY8Dy66CzKZAy7+24EJ5+5P3t4f9DKSA6oqAYHngp04VsB+AKi5yHkKb5pKzhdgyLkTEzsaNRCsOUUTMyFbCaaqfoiZZzgD87IZBOm6ECcKQJUz7ymiJpqCZoiKAqKrLVeEzSDfKbqSyepKqOEAgpgfC2fQS+Ag921aZhWdpVc6m66XJrZLl/Fhct4YYqDwyoDXTwNd3jCCKg6BtlrYtJRi32J8OEa11Zx7cBoe4Q5AKSPxmaBQjH2mGHN6ImhWZTOebYo8GCoqyni1ympQE7OhOS8+a8FzCu8cxFw0wOxaC9vgpQm5Xg6RtWBDRQOZ4FbOIzFzpjcgikpmNf5aq7GYaaI2n0iKJmciqGyCmAVoQ0+8zcA724yaDw2we2wMr4oLKcTPQ+1sX9hTzRpIYHMwKZvRPNtnfWsZZe66mwnqajiK1jIOMwGqyHEqwIBIUKaG68+BMWey06Pfo3043krRAXpxTaGi0f5c5GTXZ6bubLJghe2+Mxv4M8ZyPEIObHrH7IEsQ2dEearlaCtCE0K/aE9H8yX041WRTFiVavtdtqYt0vlSiIKO87FczUcv+cpWjelMny9mRZ5PTrtuESQfU+4j1oeK4E4nEM6Q/UKQlsQZXYHlVx87zKetRkK2BlyFA2Cwc13RxwTmPnZXEn5oiojJCxQ+w68JP9DBYPAiypygqlvJo2b2wEzn1ESRRSfAZbqsllpQW/OcgDtFWov1cUVL5NoAThVMbYmSq87Zl+ESrtVJYJgJyI7mNqQocnBUP7ZK5tpKyQBHznQOv0VcLZXB3Joeh2Q+MtskdVKdYKj3wJzJdXqfTz13fdm76z1uyurh1VkZIDCNB47JmGKLmmqImgK61/ctV+Q5owX2IT9uDnYuGLhnlXNkcKImqeQ8FwQwutqQAegcrQpxp/Bi5V8DuWJhWpw3Sw+twok/NcQUkzZ9oMtuQ5P/yrGSYrVnjp14oIKvHBOvHBPB9vQidwUKsW3+iBaZyw3Ek9oxx8PekVSX432Ne5EIN/GD1jTsZsboZUFdso63UxeLnix4/Eu4XXnMJuFIq7BVONx3Br62F8J2K7goY0Vl5z4RXMgdPGVoXJvIVCgySSERvTh94Q5r/1AUTIueH2Z6epbn1ghRF29zWvSy3eyjTRDx4MIWnfVZlZaRvbp+R74OybvxOkaJxwH7NIFv2ktPNztoJ7dl+R2WhbqEP45W8mcdV1p8p7mttvaPpRhECQyTxnvpVWq4foqVnu/08ZfzuhZEkmpxgGV6nNASGVIkWyQlkYBke712r9u+ib0rii8Q+Sjc+uVZpZy9fqz/DNA+9BEMHRg3z1FqexA1/hCxrFddDjWsQqIQQSPCcrkldNttvk1TbYGmOhQpihIp0FxHpGih3SWpRn0SJdNwGoNtAuMnqUzRT1JZg7Z/9GGpp0tRgbCqQAkuyck6p0lAvZ6t1xCmWHHHpejt060uSyD/cAxgCZg4RE4awNejd6wKRKDrL920bFRZGZqhK7Xz2/y+PruVAu9x/HIDKpPhIG4n/Eb0M7dMfsm49e3l4BYepI5fihpc1yT27SuS50efdCl5cudKmdIN833rV8NTWOJrRveTnLNv3xl/vxNhSY1F1/utISfr9fSans9p1YJOKShjHJ6gCLJN6NBOsSq8GNEehsQ9BPFXgvyO+svJd/szvjTxQj3Bb/MBE6ZeLf/iNqZDVN7GZEz4/G+vek9H4rolME++s/EBvrSViP94r7P7drkPm2f4J4ti57Nd38R6OAfnWY4vP3TLVSm/L79hhR3hsD4eYVH8GPy7AN8d/my8F/mOJcFs2qQJ/P2Tejmb3hqWbUdpmMhCozI8zssKZ3I5wv7npl/CVAL4540mR7+90SyVsY4n18Fq3Pf6/7656Vd0sSH2Qn6F5a2R48s5Pjx0H+bzT4C/jOguQ5Mdrivx/OeI7vR6JGC4ewGfMnn/xfyr5aGmX9+H9/8C</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Certs\3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>9aeefc5b-8526-4628-92a1-cdc02a224f18</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b4d98a5-948b-4318-9043-f52781d67dc2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>36fe4e05-0105-4fa8-8a19-d7e3cbdce946</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c838bad8-88b5-4cec-91d3-11829f9a62e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00043_DMRConsume_ERRC_409_Request_DiscreteMediaRightAccountNotActive" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="76969b8b-2e31-43e9-be4a-793d6b1f241d"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Set AccountOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'deleted' where account_oid = hextoraw('$accountOid')""";
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="d705a775-ac95-4093-879f-2bcdd60a153d"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset Account"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = testProject.getPropertyValue("DBUsername")
def passWord = testProject.getPropertyValue("DBPassword")
def jDBCConnStr = context.expand( '${#Project#JDBCConnStr}' )
def jDBCDriver = context.expand( '${#Project#JDBCDriver}' )

def db = [url:jDBCConnStr, user: userName, password: passWord, driver:jDBCDriver];
def sql = Sql.newInstance(db.url, db.user, db.password, db.driver);

def accountOid = testProject.getPropertyValue("AccountOid");
sqlStr = """update account set status = 'active' where account_oid = hextoraw('$accountOid')""";
sql.executeUpdate(sqlStr);</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D5773496862405E05305991F0A5833</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D5773496862405E05305991F0A5833</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenAccountNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Certs\3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83877</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D07DF3230A5AB3E05307991F0AF213</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D07DF3230A5AB3E05307991F0AF213</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>c2b66036-0e92-4820-9b35-1d0f0802767f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0449a903-789a-4ed0-bcaf-6cf5205d3078</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>169daedf-755f-4f58-b23c-079a796f9d16</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d705a775-ac95-4093-879f-2bcdd60a153d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00049_DMRConsume_ERRC_409_Request_DiscreteMediaRightContentProfileNotValidForRightsToken" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="74cee2a6-2d60-4ef3-9c9e-c54468a2f8af"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="4642ad46-a2bc-4ec6-b2c4-bb1d4319c6c2"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="07185be6-88bb-4795-90d2-364bdc8a3272"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Invalid Content Profile"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


testCase.setPropertyValue("ContentProfile","urn:dece:type:mediaprofile:UHD");</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="66d7dda6-76de-4746-8073-228919fa135a"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1BC7946A01CC4E05305991F0A881F</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1BC7946A01CC4E05305991F0A881F</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83883</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Certs\3232.pem</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ConflictMediaProfileNotValidForRightsToken</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05D5773BC37222EAE05307991F0A4888</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05D5773BC37222EAE05307991F0A4888</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:UHD</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DC4642F181FF6538E0401F0A05993A69</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DC46AD32F3CCF233E0401F0A07995793</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DC46AD32F3BFF233E0401F0A07995793</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>b978b0a0-16f4-4ef8-a748-3fc5380988b9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7c06f56b-8bfb-4c5a-9487-72ad1018f524</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3982dcae-431a-4fe5-a3be-c0a0374dd9a4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66d7dda6-76de-4746-8073-228919fa135a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4642ad46-a2bc-4ec6-b2c4-bb1d4319c6c2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07185be6-88bb-4795-90d2-364bdc8a3272</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Error Codes_P2_TestCases"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00039_DMRConsume_ERRC_401_Security_RoleInvalid" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="cc43e13f-b6e0-4706-84e4-8aa2332adf6c"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Change Role to nodeIdCoo"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue("nodeIdCoo"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="a6a72878-4174-4308-a0dc-135b7debee83"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D1872113D90C67E05307991F0A2F1C</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1872113D90C67E05307991F0A2F1C</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83873</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:coordinator</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:700035</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B7D2DE499B6BE2E05307991F0AB0FB</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B7D2DE499B6BE2E05307991F0AB0FB</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>bee4d6e9-5ffd-4371-badd-16490f300d9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3d431579-5127-4844-a88e-0ad1262aa013</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6b33d75e-4ba3-4e88-8b48-5a2549158f7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6a72878-4174-4308-a0dc-135b7debee83</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00045_DMRConsume_ERRC_400_Request_DiscreteMediaRightRightsTokenIdInvalid" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="cc8a815b-93a9-4642-aa3a-dd9ac4383d34"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="027c334f-60d5-4f48-b448-a125606761a6"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters" id="6685cca6-8781-4c22-b671-12589fb075b2"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Set Invalid RightsTokenId"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def rightsTokenId = "urn:dece:rightsstokenid:" + testCase.getPropertyValue("RightsTokenId").split("urn:dece:")[1].split("rightstokenid:")[1];
testCase.setPropertyValue("RightsTokenId", rightsTokenId);
</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="5364d1cd-ce5d-459c-875b-21d4ee27cee1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83879</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightsstokenid:org:dece:07D192B179522D81E05307991F0A4290</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D192B179522D81E05307991F0A4290</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>BadRequestRightsTokenIDNotValid</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0689599897C713A3E05305991F0A82DF</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0689599897C713A3E05305991F0A82DF</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>rightsTokenId_temp</con:name><con:value>urn:dece:rightstokenid:org:dece:EDC99AB4F3438DE0E0401F0A07995D81</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>eaf33f91-8f35-4eea-9aa7-4c901788d1e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a855bea4-f9e2-4aab-b3dc-2e580a8f42af</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c730899e-1001-4cfa-a8ec-2dbdc0601a97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>027c334f-60d5-4f48-b448-a125606761a6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5364d1cd-ce5d-459c-875b-21d4ee27cee1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6685cca6-8781-4c22-b671-12589fb075b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00046_DMRConsume_ERRC_403_Request_DiscreteMediaRightRightsTokenIdNotActive" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="c2c8c820-64c7-45d2-aa40-a6a2aa2f1cad"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="839672d1-358c-4fd4-8ed8-611077f18499"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="fabc1829-0ad9-4620-be5b-29f34537a3c5"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Set RightsTokenOid status to anything but Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));
def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
sqlStr = """update rights_token set status_id = 'deleted' where rights_token_oid =hextoraw( '$rightsTokenOid')""";
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="5253994b-c313-474d-856e-d02bf4ae36e8"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset RightsTokenOid status to Active"><con:settings/><con:config><script>import groovy.sql.Sql;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

dbObject = new dbUtils.dbUtils(log,context.expand( '${#Project#targetSystem}'));
def rightsTokenOid = testCase.getPropertyValue("RightsTokenOid");
sqlStr = """update rights_token set status_id = 'active' where rights_token_oid =hextoraw( '$rightsTokenOid')""";
dbObject.dbConnExecuteUpdate(sqlStr,context.expand( '${#Project#targetSystem}'));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B77F933A187BAEE05305991F0A51F1</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B77F933A187BAEE05305991F0A51F1</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRightsTokenNotActive</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83880</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D192B1795C2D81E05307991F0A4290</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D192B1795C2D81E05307991F0A4290</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>9a4b533d-eaff-49ab-a9d8-5ec3bc362e42</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aff32456-39f0-4b8e-9128-66341d2ed199</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4860aae1-9954-437c-ac57-96340ac0240d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5253994b-c313-474d-856e-d02bf4ae36e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>839672d1-358c-4fd4-8ed8-611077f18499</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fabc1829-0ad9-4620-be5b-29f34537a3c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00047_DMRConsume_ERRC_404_Request_DiscreteMediaRightRightsTokenNotFound" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="09712436-c21e-46e1-a8a7-e627a29eed21"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="864b2fad-d2a8-4a80-8c43-9ff1ae3d4d12"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="8c366bda-a978-4f91-8698-9b8700098f38"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Set NonExisting RightsTokenId"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def rightsTokenId ="urn:dece:rightstokenid:org:dece:"+"068C1F4CD59A5FADE05305991F0A46E9";
testCase.setPropertyValue("RightsTokenId", rightsTokenId);

testCase.setPropertyValue("RightsTokenOid","068C1F4CD59A5FADE05305991F0A46E9");
</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="d4fbe978-0426-422f-95cb-1b9455b4ec07"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>068C1F4CD59A5FADE05305991F0A46E9</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:068C1F4CD59A5FADE05305991F0A46E9</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83881</con:value></con:property><con:property><con:name>NodOid</con:name><con:value>700035</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>ErrorResponse1</con:name><con:value>NotFoundNotFound</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>NotFoundRightsTokenNotFound</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>02B77F933A1C7BAEE05305991F0A51F1</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:02B77F933A1C7BAEE05305991F0A51F1</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ef54264d-c279-4fa0-9aa8-95d6420f135f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75edc8e9-1146-489e-a400-6ebd6a0dbf0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53539d36-c760-4e96-9b3f-31eda9f3ab83</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4fbe978-0426-422f-95cb-1b9455b4ec07</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>864b2fad-d2a8-4a80-8c43-9ff1ae3d4d12</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c366bda-a978-4f91-8698-9b8700098f38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Authentication_P2_TestCases"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00001_DMRConsume_PERM_Access_Control_Rights_Coordinator_Negative" searchProperties="true" id="91cbe169-d5ff-4ad2-bbbe-8c419406e2ac"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to COORD" id="1e80c600-c8cf-4dbb-bf8a-42886fe9fcc7"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="38cca0f9-85b5-47d5-b5db-c5ab4924c187"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83841</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdCoo</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D0322E9AF07433E05305991F0A8924</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D0322E9AF07433E05305991F0A8924</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:coordinator</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0589B0B2270722F8E05307991F0A1664</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0589B0B2270722F8E05307991F0A1664</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>43b8a7e6-7939-4782-be7f-90b93126e181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c52e7061-26c8-4dbc-aff1-9a7cd2241f1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>23627700-1599-45d6-9ace-e9ccbd015f18</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e80c600-c8cf-4dbb-bf8a-42886fe9fcc7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>38cca0f9-85b5-47d5-b5db-c5ab4924c187</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DMRConsume_PERM_Access_Control_Rights_Cordinator_Customer_Support_Negative" searchProperties="true" id="146883b0-e9c4-43b0-83d4-77ff4e52720f"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to COORD CS" id="06ad577a-d17f-49fd-bd6e-55c30c2e7596"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User" id="4570cc3b-b6eb-4fb9-9a9a-f7f488ae29b7"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="eb8ad1c0-9bb5-4117-8fa6-d94032eee302"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Store the SAML and Account Information" id="20a7aa4b-a88b-4678-8b36-2e986b9044e6"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("StoreSAML-FullUser2",tP.getPropertyValue("SAML-FullUser2"));
tC.setPropertyValue("StoreNodeUserSAMLAssertion",tP.getPropertyValue("NodeUserSAMLAssertion"));
tC.setPropertyValue("StoreNodeAccountId",tP.getPropertyValue("NodeAccountId"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS" id="96666ab0-88c7-471c-8ac3-ad60a342a529"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")
tC.setPropertyValue("UserName",tP.getPropertyValue("Username"));

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

tP.setPropertyValue("SAML-FullUser2",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("NodeUserSAMLAssertion",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("NodeAccountId",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="5ce19674-1cc8-4da4-8892-a7686407f01f"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore SAML and Account Information" id="666f3c19-3d24-454c-b98e-95ee7489062e"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("SAML-FullUser2",tC.getPropertyValue("StoreSAML-FullUser2"));
tP.setPropertyValue("NodeUserSAMLAssertion",tC.getPropertyValue("StoreNodeUserSAMLAssertion"));
tP.setPropertyValue("NodeAccountId",tC.getPropertyValue("StoreNodeAccountId"));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_887365b9-acad-42e9-a470-d2aeb3da335a</con:value></con:property><con:property><con:name>assertionUUID1</con:name><con:value>_887365b9-acad-42e9-a470-d2aeb3da335a</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05888D103BE10F2BE05307991F0AF34E</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05888D103BE10F2BE05307991F0AF34E</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdCoordCS</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:coordinator:customersupport</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>07D034B19C292824E05307991F0A2482</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:07D034B19C292824E05307991F0A2482</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>07D03AF7A6490BBEE05305991F0AF5E1</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:07D03AF7A6490BBEE05305991F0AF5E1</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83846</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D0380FE49B02B4E05305991F0AFB43</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D0380FE49B02B4E05305991F0AFB43</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=nVbbcuI4EP0VyvNI+W5urkAVCcnEO7kNEGqSly0hN0aJLYElY5KvX8mAgwnJsvsEare6T3cfHemMoyR2/D7nkArCaG2dxJT7hbWrZSn1GeKE+xQlwH2B/VH/9sZ3DMtHuy1aLRh0tb/b7ZbbbEw7OsIo1D0H5D+vZemhg2Dqhsh1G0i6cp5BQLlAVHQ1x7I93bZ12xvbtm/ZvusZ7bb1rNUmkHIZW7oYlrYFteZdbS7EwjfNPM+N3DVYGpmOZdnmn9ubEZ5DgrTe2aaiIlHa2/pjIwQMcYwNzBLzzKz4nIXcH5GIIpGlsM0VfpXLMq2OKX1CTqIfWrkXwoDOWLG8QJRRglFM3pHqzy2IOQtr/ThiKRHz5MsibEsF1mGNdWx79IdmVqGdGKiCMOVI53Nkb2MNYQYpUAy1x2HQ1X6cNrVi6zhFlM9YmvDq8r/hAbqCmC0g1PmurC200wMe6VTvDLAfUBxnnKzgTpF1gTDw7TQBnx6q9pDCjKxvCJcEXXOFztyHd7DcdGNAIuDi/wxobzibIBMUZ9BrIj5awsrtNDhp3rPB82s+S9qPj/wvr1sA2HcuDOVoN8sDUpYk2uyI/9RnlyM3GnZgUP/5c8gjNg9w45eYoqXDn8g5iDSNltl9eD22GE2e4sm6xWbDzHlxSP4A9bnrTW4f3Ut7fJ2/zpJlmp6HHhIje2C3o9Xb1HFu284jwy/oV/3qjuPrtolMcxC0p/O7pRU6z6/N5e+739P7+sO0f9VqBty0XvLgoTOYupPGIjNv1hev9cn7U9Qty9nDX7Xtzvwom74AFrulokEwqF3JKSHxvZgpCwn1WeHqL5T4cAFUaD21S2mHn0m5I6EvZ7hZW62B5Uro/abXsc7PLy+thms1Oh37yupfNS7tnchsUBxAvGB0RlQuJbkb2nwPECc+BxpCqq9YJpWOa99EHCCBagEdykPAKIcxk/KM1/l73nhfdki8Xs3dfNl6b6IMpLjeMXFP79P+TEBalWSvIslDwGRBQOm2ojWXvOZCtmKJVpmIbWOFDAqZVPZUiazveO2GyUmyiEEBNRMWZjEYi/miaIzJN7+OVB5eWDFjaejjzYn7srbDb7s2SJ+QKAeuCjoHOUo4csE4u2o+Vd04ehHtwvezkKjDJXsqUoI3SKqfPqiiOFLyZFfWDnfpfmiohDYPqyqzhSuCS8aX97aUcykAvd1glshYGtlqlRWjaCmhS2V4U9VpWo45ApxJiXobs1egZhnFPOk+KIEfJC/tVYiZmNORQAISyZ1asTzhATACrh4AgeT8+tTXRSWlbJ2AtThmu4jl40Uh/vZ9g32s/KT5Qf7kcoofEzsSay+PrFPe/4LQSK3UXfD2HTmIVDGW7gc/FuBY8qqxbHKJRUhCTTMBX3+pKXnqaghjllERDLTCsC+ZBU7xtgD/w+lTmEKVy2ca+fd3mk4KCmCQjztOivjqtvXVEaDRnuxuk35SXu/c7lw4HafteIXytjbKK1XHKZtSQdf7ZP5s2evTIcd7/wA=</con:value></con:property><con:property><con:name>StoreNodeAccountId</con:name><con:value>urn:dece:accountid:org:dece:07D034B19C2B2824E05307991F0A2482</con:value></con:property><con:property><con:name>StoreNodeUserSAMLAssertion</con:name><con:value>SAML2 Assertion=pVZrU+o8EP4rTM/n0gsthY4ww3UEUVHQo35xQrql0TatTQror3+TAhXw8nL0Uyfb3Wef3Wx294ShKDTdFmOQchLT0ioKKXNzaUPJUurGiBHmUhQBczl2J63zkWuWdRdtTZTSoNtQHmdWxca2VVMNMGzVQshR6+D4qjOrIzwzTR1ZnlBlLIMBZRxR3lBM3bBUw1ANa2rorlV3DaNcq9QelNItpExgC5WyrmxIrVhDCThPXE1bLpflZaUcp3PN1HVDuzsfTXAAEVKaJ+uIckdpc6OPyx5gCENcxnGknWh7OicecydkThHPUtj48r7ypWt6XRM6HiPzP0phC96A+nF+7CAaU4JRSN6QzM858CD2Sq1wHqeEB9GXQRi6BFZhhVVsWPSPou1TOxJoj2HKkMoCZGywrsGHFCiG0s31oKH8Oe7WctNpiijz4zRi+8d/4wN0AWGcgKeybVgbascDfpKp5glgd0BxmDGygAtZrAnCwDa3Cfh4qNI4BZ+sRoSJAl0xyU7bpXdwXGejS+bA+E8uaOdy1iC3KMygyYf+09mzzu6fvI6V1atp9saq2K44jtXICewq54LiatfHg6IsimhtEXgvIT2z/T4E9eHU0pOaBc+0cnoVvF68mLZp3Nut8b3jDJfJvVPvj3vj20vS7vSMa/P+/GFh3731T9vsLagvhg+nZ5V22PbtN+vmNIH7y5ubi7hKdGs1sE1fT8bGcDTNnJdh9JDGEFwkzl/r7/wW7LNp7Y7MyNXqzKkOAzCunHhsWnfzRXoV1UcP8W2/Gl9ZrUYRzg7/fdn2zU+y2RNgvj3KMhh0S31xS4h/38ykhHiqn6u6iWw+jAPlSlNayd7hZqLdEc8Vd7g+605Xr7T6TqtqtfV2u9fT7Ypu1+tGX2/17Z6xbTJrFgcUOzH1ifQlW+66bL4niCOXAfUgVRdxJjodU75B7CKOSgN6LR5BTBlMY9GejeWKzKsBWurPRmA8pTXfmr1VWISfldJFzC/pZdryOaT7Tbmy15SvAZOEgOzcsrCZqGzGRTJe0CLjoVFeoDKFTPT2VLZZ17RqtsZIlIQgqWpR7GUhlJMgyVOjsfXXVBFmufS6N82f25eBHf7b5kDoeEQqMBlLG8Q9wifTRd8G8nXA1d2At/CtzCPyZYmE8pTgNZP9X+91IgukKJJWp9ObdCZb2oX2P1j/1LhzeflDy+6oNRn/xvaxM3k0fgrwc9e/czz6LXNRvb80/2ipfVOA2mHtF468Bdlxu93TxMQXM6K5fbkvqPxSzhaLLH+rjpyFqYAXA8qwNd3UJoAzMcVep/EzUK1A0Y5aGQriB84L+T7FjAd0whGHSDSXUn48YkecAJM74kC0xdWxC+ieS5E6Div+mawTiv1WMv52BcYulnpCPBafZZy+B/4Z1o4fEadYETmhc3mS68LrF3WBYwFLxKCL013wzwA+c74vLJJccOGioGYZh6//lOQEaygI4zijfNBVcsHuVM158tcE3HelDzD54C42efL/q7xK8hLAIPZ/RnJ8uZC58gnQ+c5k3jj9MJyttlHvmG2zZlr5cHbWw1mMJbNIyh675gfxR8lOng5rvPkf</con:value></con:property><con:property><con:name>StoreSAML</con:name><con:value>SAML2 Assertion=pVZbd6I6FP4rLuYZCQhWWNW1vIzW1l6OdGpnXmaFEDQtJEgC2vn1J0Fl1F6Op31iZbMv3975svc+5zCJLa/LOc4EYbS2TmLKvVLa1vKMegxywj0KE8w9gTy/ez3xrDrw4M5Eq40Hbe130AKOG5pIR0HY0u0IhLobBFi3m85ZC7kNsxk0pSrnOR5TLiAVbc0Cpq2bQDeb98D1bNuzQd0E9i+t9oAzLn1LlTrQtqDWvK0thEg9w1itVvVVo86yuWEBYBqP1xMfLXACtc75JqMyUNbZ6qN6iBGOY1RHLDHOjQOd85B7PplTKPIMb2OF78UCBnANqRNyMv+mVbY4HNOIlcc+pIwSBGPyB6r6XGOxYGGtG89ZRsQieTcJEyjHOl7LGpo2/aYZh9BOdHSAMONQ5wtobn1NcYQzTBGu/ZiO29q3026tNL3PIOURyxJ+ePx/eDAtcMxSHOp8l9YW2ukO36hU5xwjb0xRnHNS4BtF1hQizLe3idHprmp3GY7IekK4JOiaK3TGPryj46YaAzLHXHzmgvYuZ+PkAcY57gTDoDW+DPhFYj2kBjV+OPjiOfoFx8aqXQLYVy4F1dVujkekrEi0sbicsp/X0YVZ3HD8BNiU9x6Xl3Di5s0oa1xbzL9YzwbDeUhGs64/AxyPgqfr0Sx6AObEdIvQvZz2xHLG14vswbZnRnrTu3gMR6O7dH2W94ElQDywRmeDK3E1mD1e/rlb/Rq5yer5yWLzxzls3L604mE3mDxNHyJ7icAIvFw9Pi/vb6bFLAt+2v/0r+Dsz3A2K1rtKp09/Iey3Zv38+AJI7E7KhqMB7WhvCUoPm5mSkJCPSpVvVQ1Hy4wFVpHWane4eWy3ZHQk3e4OQOn1TKbraHlDM1GrzX8DpyGfEuuOQTdpmsOdk1mg+IIYp/RiKhYquVuaPMxQJR4HNMQZ3rBctnpuPaBxwEUsDamU/kIGOX4nsn2vGYBRZKTwfJ5bhYrd+msgpQkQGi1GyZu6W3WjQTODnqyaR305ClGJCVYNW7Fay6JzYWsxRIWuYjNegHrFOeytWeqy3qW3XIMTpI0xgqpkbAwj3E9XaRlZQy++Vo6RLyUTr/fl6/t3byO/+1KIHVCohS4yqWH5TXiN4ZLY5fI+wk7+wnv3HfzkKiHJespMoI2SA5//aWJ4kfFkW6//93v+zvYlfb/sP6scf/29pOWg0nXv/uK7e++/9v8rIPPh/5a4MlXkUv2ftH8taXxAQGNY+5XgcKC7IXdrWly4MsR0dm93CWsL+t5UeTlWz1TozCT7uV8Mh0DWIaPUS6H2Ms9e8bUqLwYJ20MFfCj4JX8EGIuFtQXUOBENpdaeTxhRfQxVyviWHbF9an750FIWTqB1+ItWT+W661C/OEGjDyk9KT4Tn5WLAv/3tgbvvbiyDzlhigInauT2hZe3uEFYtItkXOOZfvO33LwVvBDYVXkCouQhApygd//U1MDrK1BhFhOxXiglYL9oVriFC8p9v4qvXJTzu1qkSf/vcnrpKQAwnL956T0r/YxTz0BOt8bzNugr2azY9mDltU9c5xeOZvPNrPZ7bd6VVEO0HVeiV9L9up0zPHOvw==</con:value></con:property><con:property><con:name>StoreSAML-FullUser2</con:name><con:value>SAML2 Assertion=pVZrU+o8EP4rTM/n0gsthY4ww3UEUVHQo35xQrql0TatTQror3+TAhXw8nL0Uyfb3Wef3Wx294ShKDTdFmOQchLT0ioKKXNzaUPJUurGiBHmUhQBczl2J63zkWuWdRdtTZTSoNtQHmdWxca2VVMNMGzVQshR6+D4qjOrIzwzTR1ZnlBlLIMBZRxR3lBM3bBUw1ANa2rorlV3DaNcq9QelNItpExgC5WyrmxIrVhDCThPXE1bLpflZaUcp3PN1HVDuzsfTXAAEVKaJ+uIckdpc6OPyx5gCENcxnGknWh7OicecydkThHPUtj48r7ypWt6XRM6HiPzP0phC96A+nF+7CAaU4JRSN6QzM858CD2Sq1wHqeEB9GXQRi6BFZhhVVsWPSPou1TOxJoj2HKkMoCZGywrsGHFCiG0s31oKH8Oe7WctNpiijz4zRi+8d/4wN0AWGcgKeybVgbascDfpKp5glgd0BxmDGygAtZrAnCwDa3Cfh4qNI4BZ+sRoSJAl0xyU7bpXdwXGejS+bA+E8uaOdy1iC3KMygyYf+09mzzu6fvI6V1atp9saq2K44jtXICewq54LiatfHg6IsimhtEXgvIT2z/T4E9eHU0pOaBc+0cnoVvF68mLZp3Nut8b3jDJfJvVPvj3vj20vS7vSMa/P+/GFh3731T9vsLagvhg+nZ5V22PbtN+vmNIH7y5ubi7hKdGs1sE1fT8bGcDTNnJdh9JDGEFwkzl/r7/wW7LNp7Y7MyNXqzKkOAzCunHhsWnfzRXoV1UcP8W2/Gl9ZrUYRzg7/fdn2zU+y2RNgvj3KMhh0S31xS4h/38ykhHiqn6u6iWw+jAPlSlNayd7hZqLdEc8Vd7g+605Xr7T6TqtqtfV2u9fT7Ypu1+tGX2/17Z6xbTJrFgcUOzH1ifQlW+66bL4niCOXAfUgVRdxJjodU75B7CKOSgN6LR5BTBlMY9GejeWKzKsBWurPRmA8pTXfmr1VWISfldJFzC/pZdryOaT7Tbmy15SvAZOEgOzcsrCZqGzGRTJe0CLjoVFeoDKFTPT2VLZZ17RqtsZIlIQgqWpR7GUhlJMgyVOjsfXXVBFmufS6N82f25eBHf7b5kDoeEQqMBlLG8Q9wifTRd8G8nXA1d2At/CtzCPyZYmE8pTgNZP9X+91IgukKJJWp9ObdCZb2oX2P1j/1LhzeflDy+6oNRn/xvaxM3k0fgrwc9e/czz6LXNRvb80/2ipfVOA2mHtF468Bdlxu93TxMQXM6K5fbkvqPxSzhaLLH+rjpyFqYAXA8qwNd3UJoAzMcVep/EzUK1A0Y5aGQriB84L+T7FjAd0whGHSDSXUn48YkecAJM74kC0xdWxC+ieS5E6Div+mawTiv1WMv52BcYulnpCPBafZZy+B/4Z1o4fEadYETmhc3mS68LrF3WBYwFLxKCL013wzwA+c74vLJJccOGioGYZh6//lOQEaygI4zijfNBVcsHuVM158tcE3HelDzD54C42efL/q7xK8hLAIPZ/RnJ8uZC58gnQ+c5k3jj9MJyttlHvmG2zZlr5cHbWw1mMJbNIyh675gfxR8lOng5rvPkf</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20141114_041957</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>1b6e986d-683d-4a04-977e-0ac6fb47e901</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d6a6cdeb-f8e9-4bad-b1f2-4015d7c3c759</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>588ec59a-80bd-4f98-909a-8c0d932c8e17</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06ad577a-d17f-49fd-bd6e-55c30c2e7596</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>96666ab0-88c7-471c-8ac3-ad60a342a529</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eb8ad1c0-9bb5-4117-8fa6-d94032eee302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4570cc3b-b6eb-4fb9-9a9a-f7f488ae29b7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5ce19674-1cc8-4da4-8892-a7686407f01f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DMRConsume_PERM_Access_Control_Rights_Linked_LASP_Customer_Support_Negative" searchProperties="true" id="ae685761-a03a-4620-adb4-7fbfab177901"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to LLASP" id="41c2bb6b-3edd-4617-85dc-93782bafcca5"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="a49f31d5-a6fd-4ac6-a288-d8e8d2dabc87"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0588913508391783E05307991F0A20F0</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0588913508391783E05307991F0A20F0</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdLLASPCS</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:lasp:linked:customersupport</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83850</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D037C1651102C3E05305991F0A89CA</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D037C1651102C3E05305991F0A89CA</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>0a926895-2eac-4fb2-a45e-0905bbd350d5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>95cdf273-424c-4b4a-9ee2-96c516b37685</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c854126-8e02-4aad-909e-a868692e00fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41c2bb6b-3edd-4617-85dc-93782bafcca5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a49f31d5-a6fd-4ac6-a288-d8e8d2dabc87</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00004_DMRConsume_PERM_Access_Control_Rights_Dynamic_LASP_Customer_Support_Negative" searchProperties="true" id="3e24e261-3737-416b-b601-a77dc240cd49"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to DLASP" id="044016c0-32ac-4316-8e58-be8d6a833844"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="58840719-e1be-4305-89ca-b13de3600b8f"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05888D10CAA80F2FE05307991F0A64F1</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05888D10CAA80F2FE05307991F0A64F1</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdDLASPCS</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:lasp:dynamic:customersupport</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83851</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D07DEED4BD3CA5E05305991F0A6F38</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D07DEED4BD3CA5E05305991F0A6F38</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>04db248b-d6dd-458d-a991-76a6f6eb65f2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>30e26549-1fd6-4e2c-b13a-4d6ec7e3391d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ec98da50-4c72-429c-acdf-cfc93b314550</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>044016c0-32ac-4316-8e58-be8d6a833844</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>58840719-e1be-4305-89ca-b13de3600b8f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00005_DMRConsume_PERM_Access_Control_Rights_Acces_Portal_Negative" searchProperties="true" id="aa1321f1-4e77-4ce2-b4d4-fcbc94b50c6d"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to Access Portal"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="c33b2656-6b21-4527-b39c-06c0e251c40d"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05888D10CAAC0F2FE05307991F0A64F1</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05888D10CAAC0F2FE05307991F0A64F1</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdAccportal</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:lasp:dynamic:customersupport</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83851</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D02A0757635EA0E05305991F0A50A5</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D02A0757635EA0E05305991F0A50A5</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>04db248b-d6dd-458d-a991-76a6f6eb65f2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>30e26549-1fd6-4e2c-b13a-4d6ec7e3391d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ec98da50-4c72-429c-acdf-cfc93b314550</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>044016c0-32ac-4316-8e58-be8d6a833844</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c90edc0-18a6-40ec-9590-97cb478bebfd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c33b2656-6b21-4527-b39c-06c0e251c40d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00006_DMRConsume_PERM_Access_Control_Rights_Access_Portal_Customer_Support_Negative" searchProperties="true" id="5cfad0ac-93d2-43ca-8652-4fcad0d5bbec"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to Acess Portal CS" id="1f88a45e-22be-4572-88f2-0f6653a2c639"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="fc6281bf-ed60-4aef-9768-1eb11b7646b2"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE01483207B8FCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE014BA539BD4E30E0401F0A05996986</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE014832086DFCC0E0401F0A07990A3B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:05885737E6CA1430E05307991F0A49EE</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>05885737E6CA1430E05307991F0A49EE</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdAccportalCS</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:accessportal:customersupport</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83860</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D07DF31AF55AB3E05307991F0AF213</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D07DF31AF55AB3E05307991F0AF213</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>16500634-7585-4f39-82c8-ff5c5273d81c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ce89815e-06ad-429a-ae0d-9733e0f2fc9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06d03a60-08eb-41cf-aae5-6faf319360d6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f88a45e-22be-4572-88f2-0f6653a2c639</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc6281bf-ed60-4aef-9768-1eb11b7646b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Authentication_P1_TestCases"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00002_DMRConsume_PERM_Access_Control_Rights_Retailer_Successful" searchProperties="true" id="d0e2c697-4d17-40cb-97e4-7faaffd697b7"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="5d815e0f-e5f6-4bb1-b5b9-4be9ea285aa4"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="7a2bc97d-e0bd-4d61-99d0-24840c7f82ca"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);

</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83842</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D034A841162820E05307991F0ACEB7</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D034A841162820E05307991F0ACEB7</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07D030F5C7981EC5E05307991F0A9F1F</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07D030F5C7981EC5E05307991F0A9F1F</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>E214EC65175384AEE0401F0A059920A6</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>E214F59FCD2CCC3AE0401F0A0599431D</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>E214EC65173B84AEE0401F0A059920A6</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>nVfZkqrKEn33KwzPo2GDgANGd0cUk6Ki4qwvN7AoBmWSAkG//hbauu3evfftc5+0srIyVw5krXrFhu8xHYAxihM3DMqq9Fb5DwNpDnF1WGvv4K7G0Q2uZsCmUWvDBmIgazTrsFEpqxinSA1wYgTJW4Wh62yNbtUYZk43OxzTabAvDZ7bVspLFGNimqi80JVy7nsB7lzdvlXSOOiEBnZxJzB8hDsJ7MyANuwQzY5xx1R5f72hvDqM350kiToUBV9MBJHnwRcY+tQr9Unn1cSdmWsHRpLG6MOnid8qH2ezLHvJ2JcwtimGpmmK5imiY2LX/qfyXrofRqYaWOFtLRpBGLjQ8NyLUYDSUOKEZhl4dhi7ieP/wXSdqtOF6RrKYQ3WueCfCvXLwRXdDy19Ahljo4Ydo343NkUWilEAUXkxVd8q//ysgrez89gIsBXGPv6y/neQUHBCXhghs4bvkd3R/dziN+l6f0WwowbQS7F7QqOiTSIDIlyexMhy86GLSfOZuHwtfznH9w5D8N+U5JV6xklgU99kRnJthJP/p17PtbpZWRpeit45O4li2Z/lE3k2mkuqBXuSKISaRx3erhCelW+gHqX+WH9t1EdffRzqqhPR6ilcVUl3sLmYOFZvoW+18y5Wq06VkQaOqwho5IlCt+Xngy7ESHb2F8FpVfmt6k4X6NDlGcngHGFc2q39y0lmXGk6iN2NZiwTQxkddzqrOCrfUNoLGBlVvRHw9MYS4chcrqe8ZOBRri+9ZKiKR41yWtmyd8xmVulApVas+fM6s2Ss9WB3HC7efsX0HEMR1wCdr0EW/9cNmphNjMdCLCaFRT7PBL1rqipWJVEESLRBpgrAVoXhBYwE+3B0Dm6Xz2gB6AsFSOCsTUEm2RtpqesDOTOXS2+7VBVF0KZc1gMbqUQ2JDlfStt1nzZW22jDKPR2Jgjmehru2H5k9g5Zz4Ejba5lo7l61vZyPprL9Ooqs3Oyvmh7rT6eL9jSai/w2lTOpOzqUZIzZ7RdTaPNgs/gRdY1wHVBfSGLjtab+8s6ZKcO3MtDDRyucsHRxOVSy+U5mJQEe7Qksc1FZRtB34x2vuc8Ge8R43Ozuzzvul66vch7TZS74uzYnak7VtLlPphuFrvV8mCslFMJ9kZgd/foNlxjHWb2tp1J+qY/CLeqc4IjoMuCoAOSLhpoarcPwq4ANA64+UXcC81QNJWM6jO4VOW9bnN9do9rbHRpz6i32/XNcNWcHJuSHFS3g3S3dzRnrYyrg5l5WvAJf9ngU/XUNNw6zCNLX8u9ZJBbPX1W2k2kfA17VdPuU96FV2Kt1Qfx5ex4mj1NVs0xPu9cy1oJ6zHntSxPY6eR5VnRGVfnoX6I6aaAWIbanE+DpARsTQCgu1/sBV0T2kVSTTXTN5pgAEVOUnDZM8mAWR77vZMHNywI88FqvD98FMaUMlmgMl0mbSWX2hIwiyL0ZgtZ2YOFYNuxYMuKoEMJ6Bt1kG1IvhY9ovw1j8o1j7YsAJndgibfK7ELmk/GyYzjwDkQFoHCO9oxX5lNn24dkTycjSIu0/DICrar8KD5bryI09liMBgN89087R72ZFZZ9GxwYrcl+XSIgDsazJ2DFErGJNpskqgawBgmauRran4Zb/G+7e58ul9t1IUJLcEWs/B32aJryNtBbM/qg940mLAtvoRT69zzq/t2tqrOZ82oZYqBJZ3P1DZe0iEIFX7aOJo5wxycRTZsZlYfHHYGM8o9Xjjz8mA7h9lUH6xmfrVRapyGQ5++zCluFI2zWTfjZF2vsqYw781xREZK2rbzeByYzMZImqctvWy6kXfgmfQw5yJ2afukWJOTGbW0SUnn1nDr260I9qkpdQJyyxqq3fPuYlwifwxvA/TrdHgIb/ODep4sn0bPnXTMSLcimNyXxQWkSmWF3ApG8ncCU0hcs2ZdVTtRwYJwgoKk8l6cKshLJyUUxzU75Mq4rWWmzikNXhElRhRFFsg0R9cVGtANnufYunRnOTcUXyCKYWC5ha+Cx91uqb8DhH4Ho8BEce0UptBBuPIXi0W+ymowJddvGGA0DwlPbAqCLDAsAByog4YoMA0WsAzXbgpAYZU2qJRHYTIOxjGwEhR/5oj8J444RdCNXFQQyeI2xeQ6xQlJydE4pYlXfzkZLwFKCdWMC7bXIT4aFHb9yEMFYMoPzdRDL5ETXRNE4dsvQ0gPvkpZhmWu1/wf4/u6d08F0THdQgEXwQiIlBN9w3a5eyS/Rcx9y4rv5kFqusVtTvKaxC68Ifm89atdij559EoR0h3zQ/Wr4JNZ6mtED0/myYWPjn88BgiXJGzj/V6Qo/FyfElPp/RaglbBpGJinqpTdIuaIZgSOnSehwcUUA8T1I+Y6AP1F88P+Wd8aeIEs4R8zT5pmPJ1+YNnyAzh4hmikobPf/rG+eSS5C1BefKdTPTIa6VA/NcHDezAQo+IJ+QnC2PzV7m+sfXkh8RZjC83sItVwTvPf+gKGBKzLhlhYfxs/DsD3zn/LHwk+YElId20SxP0551yMZveKgaEYRokqlS5Cp7n5RVnco5Q55fSb2auzO+Dyuf4j1R+rQ1nZHL5RuWh6/5v5Zp7bReIyCnsXrG8VXLyKiXOA/tpPn8A/DqiZbHZqLdYoc0B+XlEMzRoPhL4KZL338S/S55y+vV7eP8v</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>275f74d3-6f42-4390-bb69-5d5ac8474ac2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e411a637-c012-493e-b34b-4521e48e1cf3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd56f63c-340d-43a5-a449-c2920263c522</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>49609656-884e-4b90-a314-ba08ed8a8a2c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7a2bc97d-e0bd-4d61-99d0-24840c7f82ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5d815e0f-e5f6-4bb1-b5b9-4be9ea285aa4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00004_DMRConsume_PERM_Access_Control_Rights_Dynamic_LASP_Negative" searchProperties="true" id="33fde658-19fd-40af-8b3c-9a8311ea55c5"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role" id="5f96affd-8c27-43cf-86a8-2f8e8685231a"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="ec2ee31e-858b-42c1-842d-e58fa62b4cb2"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE66FE0F88857AA8E0401F0A07990AC2</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE66FE24BCD46D22E0401F0A05992A11</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE66FE47EA8B01B4E0401F0A05992A1B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0589D756A4F14682E05305991F0AD8EC</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0589D756A4F14682E05305991F0AD8EC</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdDLASP</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:lasp:dynamic</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83844</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D01A4773CF34F4E05305991F0AA6E3</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D01A4773CF34F4E05305991F0AA6E3</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7d2c51be-66b7-47af-add5-bfc2eaafcd24</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e07b0a6c-41fa-4f72-bef7-7d0896e536f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6aa7979-a7c0-4d26-a2f2-c1d0ae6ae7da</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5f96affd-8c27-43cf-86a8-2f8e8685231a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ec2ee31e-858b-42c1-842d-e58fa62b4cb2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00005_DMRConsume_PERM_Access_Control_Rights_DSP_Negative" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="b451ee84-85b5-427a-a0c9-f5414cb6c41e"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role" id="40292143-e327-4ef8-aa58-e8c95431ceb6"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="633972ea-85ef-4fb1-b2ab-e59d150daf03"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="c8112a20-aacf-4315-af35-08e50c2be257"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID 1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE66FE0F88857AA8E0401F0A07990AC2</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE66FE24BCD46D22E0401F0A05992A11</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE66FE47EA8B01B4E0401F0A05992A1B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0589D756DEC84686E05305991F0A21CD</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0589D756DEC84686E05305991F0A21CD</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdDSP</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:dsp</con:value></con:property><con:property><con:name>OrgOid</con:name><con:value>5</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83845</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D01C48DB643986E05305991F0A49F9</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D01C48DB643986E05305991F0A49F9</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ef2c335c-c413-4142-a979-4102ea925a48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b5a8b07-778c-4075-87d8-014b0e6a9792</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1a7ff076-a198-4e31-a76c-ba62dc55ea8d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>40292143-e327-4ef8-aa58-e8c95431ceb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>633972ea-85ef-4fb1-b2ab-e59d150daf03</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8112a20-aacf-4315-af35-08e50c2be257</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00011_DMRConsume_PERM_Access_Control_Rights_Retailer_Customer_Support_Successful" searchProperties="true" id="200d9322-c499-4a79-9103-b6e0b48ad48c"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role" id="b7650c1d-b42a-4d2b-8666-007db189119c"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="0a4899dc-1843-403b-a3d8-68f8dc0aef3f"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
commonTC.setPropertyValue("ErrorResponse", testSuite.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="0e4bc57f-7549-4a51-b538-910d39d4f896"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DISCRETE_MEDIA_TOKEN_HISTORY Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate DISCRETE_MEDIA_TOKEN_HISTORY Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate PURCHASE_PROFILE Table"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Validate PURCHASE_PROFILE Table");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
//existingTC.setPropertyValue("ExpectedCount", "1");
existingTC.setPropertyValue("ExpectedCount", "3");
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID 1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE66FE0F88857AA8E0401F0A07990AC2</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE66FE24BCD46D22E0401F0A05992A11</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE66FE47EA8B01B4E0401F0A05992A1B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:07D04803A6DC2EAAE05305991F0A01B3</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>07D04803A6DC2EAAE05305991F0A01B3</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTLCS</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer:customersupport</con:value></con:property><con:property><con:name>OrgOid</con:name><con:value>12</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83849</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D0345C5EDA2822E05307991F0A6525</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D0345C5EDA2822E05307991F0A6525</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5a6113fc-c54d-4631-9802-1c072a1e3a01</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8b911fd2-1ecc-46e1-9e41-88a74fdfc29d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0299748-297e-4a97-8d74-5492170845e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b7650c1d-b42a-4d2b-8666-007db189119c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0a4899dc-1843-403b-a3d8-68f8dc0aef3f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e4bc57f-7549-4a51-b538-910d39d4f896</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00016_DMRConsume_PERM_Access_Control_Rights_DSP_Customer_Support_Negative" searchProperties="true" id="c920df7a-ec4e-46b8-bb38-f535d6ae1300"><con:description/><con:settings/><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);

def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role" id="688dc4ef-6b33-49d9-b64d-4131655777e2"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Changing UUID for another User"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU2}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="6cadcaa7-2502-46f3-8dd6-6f72cd9f29fb"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
commonTC.setPropertyValue("DiscreteMediaFulfillmentMethod",testCase.getPropertyValue("DiscreteMediaProfile"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Discrete Media Rights Remaining" id="802715b0-fe7f-4266-bbf9-75c85125dfbb"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Discrete Media Rights Remaining");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
existingTC.setPropertyValue("PurchasedMediaProfile", testCase.getPropertyValue("ContentProfile"));

def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Get Lease Created Date"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def existingTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Get Lease Created Date");
existingTC.setPropertyValue("RightsTokenOid", testCase.getPropertyValue("RightsTokenOid"));
def runnerExistingTC = existingTC.run(null, false);
assert "$runnerExistingTC.status" != "FAILED";

sleep (1000);</script></con:config></con:testStep><con:testStep type="groovy" name="Call Validate DiscreteMediaToken Details"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def dmtTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('Validate DiscreteMediaToken Details');

def actXML = null;
try
{
	//actXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightGetGet - DiscreteMediaRightGetGet').httpRequest.response.getResponseContent();
	actXML = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('DiscreteMediaRightConsumePost').getTestStepByName('DMRConsumePost').httpRequest.response.getResponseContent();
	log.info 'actXML='+actXML
}
catch (Throwable e)
{
	log.info e;		
}


//Have included
dmtTC.setPropertyValue("DiscreteMediaTokenOid",testCase.getPropertyValue("DiscreteMediaTokenOid"));
dmtTC.setPropertyValue("DiscreteMediaTokenId",testCase.getPropertyValue("DiscreteMediaTokenId"));
dmtTC.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));
dmtTC.setPropertyValue("ContentProfile",testSuite.getPropertyValue("ContentProfile").split("urn:dece:type:mediaprofile:")[1]);

//
dmtTC.setPropertyValue("ActualXML", actXML);
//dmtTC.setPropertyValue("RTTestCaseName", "Get Valid DMTs");

def runnerDMTTC = dmtTC.run(null, false);
assert "$runnerDMTTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID 1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE66FE0F88857AA8E0401F0A07990AC2</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE66FE24BCD46D22E0401F0A05992A11</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE66FE47EA8B01B4E0401F0A05992A1B</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0589CE7D624133EFE05305991F0A66FB</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0589CE7D624133EFE05305991F0A66FB</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/3232.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdDSPCS</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>3232</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:dsp:customersupport</con:value></con:property><con:property><con:name>OrgOid</con:name><con:value>17</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>83852</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D03AF7A6DF0BBEE05305991F0AF5E1</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>07D03AF7A6DF0BBEE05305991F0AF5E1</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>a0765d7f-a498-441d-a63b-19074c3e2c08</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09462b5d-3aec-4fdb-9d24-59c7990c0629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7cfb936-b761-43ab-a1d5-7116425a027d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>688dc4ef-6b33-49d9-b64d-4131655777e2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6cadcaa7-2502-46f3-8dd6-6f72cd9f29fb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>802715b0-fe7f-4266-bbf9-75c85125dfbb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_00003_DMRConsume_PERM_Access_Control_Rights_Linked_LASP_Negative" searchProperties="true" id="7e58d483-997e-44fb-b8dc-c2c8f98e2e5b" disabled="true"><con:description/><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties" id="cc0cfb1a-e153-4257-a16b-8f1a7394f5d7"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call Account Create" id="55ce6b4a-4795-4eb4-91c5-8524ee84cdb2"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("AccountCreate API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="Feed data for First User Create" id="ca94ef3e-8b21-4a42-92d4-ae64678c1de1"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def uname= "userget_firstuser"+new Date().format( 'yyyyMMdd_hhmms' );

tC.setPropertyValue("ResponseTypeUserCreate","SUCCESS");
tC.setPropertyValue("userType","ADULT");
tC.setPropertyValue("Privilege","full");
tC.setPropertyValue("GivenName",uname);
tC.setPropertyValue("SurName",uname);
tC.setPropertyValue("UserName",uname);
tP.setPropertyValue("UserName",uname);

tC.setPropertyValue("PrimaryEmail",tP.getPropertyValue("PrimaryEmail"));
tC.setPropertyValue("DisplayImageURL",tP.getPropertyValue("DisplayImageURL"));
tC.setPropertyValue("AlternateEmail",tP.getPropertyValue("AlternateEmail"));
tC.setPropertyValue("PostalAddress",tP.getPropertyValue("PostalAddress"));
tC.setPropertyValue("PostalCode",tP.getPropertyValue("PostalCode"));
tC.setPropertyValue("Locality",tP.getPropertyValue("Locality"));
tC.setPropertyValue("StateOrProvince",tP.getPropertyValue("StateOrProvince"));
tC.setPropertyValue("Country",tP.getPropertyValue("Country"));
tC.setPropertyValue("TelephoneNumber",tP.getPropertyValue("TelephoneNumber"));
tC.setPropertyValue("MobileTelephoneNumber",tP.getPropertyValue("MobileTelephoneNumber"));
tC.setPropertyValue("Language1",tP.getPropertyValue("Language1"));
tC.setPropertyValue("MeetsAgeOfMajority",tP.getPropertyValue("MeetsAgeOfMajority"));
tC.setPropertyValue("urnUser",tP.getPropertyValue("urnUser"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));
tC.setPropertyValue("QuestionID1",tP.getPropertyValue("QuestionID1"));
tC.setPropertyValue("QuestionResponse1",tP.getPropertyValue("QuestionResponse1"));
tC.setPropertyValue("QuestionID2",tP.getPropertyValue("QuestionID2"));
tC.setPropertyValue("QuestionResponse2",tP.getPropertyValue("QuestionResponse2"));
tC.setPropertyValue("ResourceStatus",tP.getPropertyValue("ResourceStatus"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call First User Create" id="2195940f-0c56-4b68-9ecb-75cb1f45bff6"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("FullUser1Create API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS API for First User" id="1eea1ae2-8fce-4aca-880c-60494af9a65d">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

//tS.setPropertyValue("audience",callTS.getPropertyValue("audience"));

//def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")
//
//myTC.setPropertyValue("tName",tC.getName());
//myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

tP.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("SAML-FullUser1",context.expand( '${#TestCase#SAML}'));
tC.setPropertyValue("SAML",context.expand( '${#TestCase#SAML}')); 
tP.setPropertyValue("UUID",context.expand( '${#TestCase#assertionUUID}'));
tP.setPropertyValue("E2E_UUID_FAU1",context.expand( '${#TestCase#assertionUUID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FAU1",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tP.setPropertyValue("NodeAccountId",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",context.expand( '${#TestCase#NODE_ACCOUNT_ID_FULL}'));
//tP.setPropertyValue("NODE_USER_ID_FAU1",context.expand( '${#TestCase#NODE_USER_ID}'));
tC.setPropertyValue("NODE_USER_ID_FAU1",context.expand( '${#TestCase#NODE_USER_ID}'));
//tP.setPropertyValue("NodeAccountId",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));
tC.setPropertyValue("NODE_USER_ID_FULL1",context.expand( '${#TestCase#NODE_USER_ID_FULL}'));
</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Establish Test Case Properties 1" id="94b28a0e-fde7-43bc-9f14-ec21b8f929c9">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("tokentype",null);
tC.setPropertyValue("audience",null);
tC.setPropertyValue("username",null);
tC.setPropertyValue("password",null);

tC.setPropertyValue("expectErrType","SUCCESS");</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="84953c58-a625-4e1e-846a-121fff2c6033">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def dbUtils;

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
log.info "Calling TC:" + tC.getPropertyValue("tName");
//
//def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
//def callTS = tP.getTestSuiteByName(callTSname);
//
//tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
//tC.setPropertyValue("username",callTC.getPropertyValue("UserName"));
tC.setPropertyValue("password",tP.getPropertyValue("password"));

if( tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("tokentype",tP.getPropertyValue("urntokenType_userpassword"));
	tP.setPropertyValue("audience","urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdRTLCS")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdAccportal")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdAccportalCS")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDLASP")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDLASPCS")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdLLASPCS")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDSP")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdDSPCS")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdCoo")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdCON")+
			";urn:dece:org:org:dece:"+tP.getPropertyValue("nodeIdCONCS")+";")
}
else
{
	tC.setPropertyValue("tokentype",URLEncoder.encode(tP.getPropertyValue("urntokenType_userpassword"), "UTF-8"));
	tP.setPropertyValue("audience","urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdRTLCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdAccportal")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdAccportalCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDLASP")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDLASPCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdLLASPCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDSP")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdDSPCS")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdCoo")+";urn%3Adece%3Aorg%3Aorg%3Adece%3Acoord%3Acs;"+"urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdCON")+";urn%3Adece%3Aorg%3Aorg%3Adece%3A"+tP.getPropertyValue("nodeIdCONCS")+";")
}

	</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Establish pem" id="55a67bf0-27b8-41e7-8d71-1fdf4e193a05">
        <con:settings/>
        <con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );
keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("POST - STS");
RestTestRequestStep testStep1 = testCase.getTestStepByName("GET - STS");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep1, keyStorePath);

</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="POST - STS" id="33064daf-42df-44eb-b1f0-e71c587dd817"><con:settings/><con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange" methodName="STSCreate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS" mediaType="application/xml" postQueryString="false" accept="" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="audience" value="${#Project#audience}"/>
  <con:entry key="tokentype" value="${#TestCase#tokentype}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers" id="26306110-f884-4dee-aeb5-fdd9f10d2987">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def tStep = tC.getTestStepByName('POST - STS');

tC.setPropertyValue("status", null);
tC.setPropertyValue("connection", null);
tC.setPropertyValue("contentType", null);
tC.setPropertyValue("contentLength", null);
tC.setPropertyValue("contentLocation", null);
/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("V1");
String minor = tP.getPropertyValue("V2");

tP.setPropertyValue("targetURL","qa.p.uvvu.com:7001");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("status", status);
tC.setPropertyValue("connection", connection);
tC.setPropertyValue("contentType", contentType);
tC.setPropertyValue("contentLength", contentLength);
tC.setPropertyValue("contentLocation", contentLocation);

this.log.info "contentLength [$contentLength]";
this.log.info "status [$status]";
this.log.info "contentType [$contentType]";
this.log.info "contentLocation [$contentLocation]";

/*
 *if (contentLength.toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
     rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);

     int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
  
	String XMLbody  = strVal.substring(startAssert, strVal.length());
     
	tC.setPropertyValue("XMLbody", XMLbody);
}
*/</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers and save assertion" id="3bc995ef-80d7-47f4-8a0d-6b89bfa3b9e4">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//def url           = tP.getPropertyValue("targetURL");
//def urnacct       = tP.getPropertyValue("urnaccount");
//def urnstream     = tP.getPropertyValue("urnstream");
def expectErrType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");
def nodeaccountid = tC.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
//String orgRequest  = url + "/dece/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 201 Created";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = true;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("status");
//assert tC.getPropertyValue("status") == expectHTTPstatus;

// Connection
log.info "doConnectionClose=="+doConnectionClose;
if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("connection");
	assert tC.getPropertyValue("connection") == expectHTTPconnection;
}
/*
//Content-Length
if (contentLengthZero) {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
} else {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
}
*/	
//Content-Type
if (doContentTypeHeader) {
	assert tC.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
log.info "doContentLocaton=="+doContentLocaton;
if (doContentLocaton) {
	assert tC.getPropertyValue("contentLocation") != null;
	
	def b = tC.getPropertyValue("contentLocation").toURL();
	log.info "Path=="+b.getPath();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[_,0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	tC.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	//assert tC.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.saml2:Assertion.size() == 1;
		assert myXML.ds:Signature.size()    == 1;
		assert myXML.ds:SignedInfo.size()   == 1;
		assert myXML.ds:DigestValue.size()  == 1;
		assert myXML.ds:SignatureValue.size()  == 1;
		assert myXML.ds:X509Certificate.size() == 1;
		assert myXML.saml2:NameID.size()    == 1;
		assert myXML.saml2:AudienceRestriction.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
	}
}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Return the assertion information to the Calling Test Case" id="4488c2d8-81b0-4320-9011-ccded6d0be04">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",null);
callTC.setPropertyValue("assertionUUID1",null);
callTC.setPropertyValue("assertionUUID",tC.getPropertyValue("assertionUUID"));
callTC.setPropertyValue("assertionUUID1",tC.getPropertyValue("assertionUUID"));</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers 1" id="616ce30e-5417-4768-adb9-b92b136e862e">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def tStep  = tC.getTestStepByName('GET - STS');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("V1");
String minor = tP.getPropertyValue("V2");
String XMLbody = "";

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();

rawResp = new ByteArrayOutputStream();

rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
log.info  "startAssert: "+startAssert;

if (startAssert > 0) {
	XMLbody  = strVal.substring(startAssert, strVal.length());
}

tC.setPropertyValue("XMLbody", XMLbody);
tC.setPropertyValue("status", status);
tC.setPropertyValue("connection", connection);
tC.setPropertyValue("contentType", contentType);
tC.setPropertyValue("contentLength", contentLength);
tC.setPropertyValue("contentLocation", contentLocation);
</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="GET - STS" id="b52f844e-6d83-456b-b0f2-1358ebb758cb"><con:settings/><con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{assertionUUID}" methodName="STSGet" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - STS" mediaType="application/xml" sslKeystore="RET_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="assertionUUID" value="${#TestCase#assertionUUID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Key Elements from &lt;Assertion> Body" id="e42b2ea1-5946-430c-8e3a-efb1326c022b">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def XMLbody = tC.getPropertyValue("XMLbody");
def expectErrType = tC.getPropertyValue("expectErrType");

int lastColon = 0;
int lastSlash = 0;

if (expectErrType == "" || expectErrType == "SUCCESS") {
	tC.setPropertyValue("SAML",null);
	tC.setPropertyValue("NODE_ACCOUNT_ID",null);
	tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",null);
	tC.setPropertyValue("NODE_USER_ID",null);
	tC.setPropertyValue("NODE_USER_ID_FULL",null);
	
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion");

			// Verify response sizes...
			assert myXML.size() == 1;

			def accountId = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			def userId    = myXML."saml2:Subject"."saml2:NameID";
			def NotBefore = myXML."saml2:Conditions".@NotBefore.text();
			def NotOnOrAfter = myXML."saml2:Conditions".@NotOnOrAfter.text();
			def AudienceRestriction = myXML."saml2:Conditions".AudienceRestriction;
			
			this.log.info "accountId [$accountId]";
			this.log.info "userId [$userId]";
			this.log.info "NotBefore [$NotBefore]";
			this.log.info "NotOnOrAfter [$NotOnOrAfter]";
			this.log.info "AudienceRestriction [$AudienceRestriction]";
						
			//tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",accountId.toString());
			//tC.setPropertyValue("NODE_USER_ID_FULL",userId.toString());
			tC.setPropertyValue("assertionNotBefore",NotBefore.toString());
			tC.setPropertyValue("assertionNotOnOrAfter",NotOnOrAfter.toString());
			tC.setPropertyValue("assertionAudienceRestriction",NotBefore.toString());
			tC.setPropertyValue("NODE_ACCOUNT_ID",accountId.toString().substring(accountId.toString().lastIndexOf(':') + 1).toString());
			tC.setPropertyValue("NODE_USER_ID",userId.toString().substring(userId.toString().lastIndexOf(':') + 1).toString());
			
			if (tP.getPropertyValue("V2") != tP.getPropertyValue("versionURLEncode"))
			{
                    tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",accountId.toString());
				tC.setPropertyValue("NODE_USER_ID_FULL",userId.toString());
        	     } 
        	     else 
        	     {
				tC.setPropertyValue("NODE_ACCOUNT_ID_FULL",URLEncoder.encode(accountId.toString()));
				tC.setPropertyValue("NODE_USER_ID_FULL",URLEncoder.encode(userId.toString()));        	     	
		     }
	} 
	else {
		return false;
	}
}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers" id="f3f635c8-db34-437c-8f3c-ce9155f6dba2">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//def url           = tP.getPropertyValue("targetURL");
//def urnacct       = tP.getPropertyValue("urnaccount");
//def urnstream     = tP.getPropertyValue("urnstream");
def expectErrType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");
def nodeaccountid = tC.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String orgRequest  = url + "/dece/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 200 OK";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("status");
//assert tC.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("connection");
	assert tC.getPropertyValue("connection") == expectHTTPconnection;
}
/*
//Content-Length
if (contentLengthZero) {
	assert tC.getPropertyValue("contentLength").toInteger() == 0;
} else {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
}
*/	
//Content-Type
if (doContentTypeHeader) {
	assert tC.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert tC.getPropertyValue("contentLocation") != null;
	
	def b = tC.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/dece/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	tC.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert tC.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.saml2:Assertion.size() == 1;
		assert myXML.ds:Signature.size()    == 1;
		assert myXML.ds:SignedInfo.size()   == 1;
		assert myXML.ds:DigestValue.size()  == 1;
		assert myXML.ds:SignatureValue.size()  == 1;
		assert myXML.ds:X509Certificate.size() == 1;
		assert myXML.saml2:NameID.size()    == 1;
		assert myXML.saml2:AudienceRestriction.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
/*
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
		*/
	} else {
		return false;
	}
}



</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>" id="43e57809-653f-4bdf-ae41-e16e5a3d99a8">
        <con:settings/>
        <con:config><script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
import java.lang.*;

import org.opensaml.xml.util.Base64;

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)


int compressedLength = 0;
//String XMLbody = tC.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = tC.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");


String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
tC.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);

byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);
// finally, URL encode it
tC.setPropertyValue("SAML", "SAML2 Assertion="+base64encodeStr);


</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Return extracted Properties back to calling Test Case" id="da1fc91e-1bcc-44af-ab43-550255181698">
        <con:settings/>
        <con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

String acctID = tC.getPropertyValue("NODE_ACCOUNT_ID");
String userID = tC.getPropertyValue("NODE_USER_ID");

//tP.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
callTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
callTC.setPropertyValue("assertionUUID",tC.getPropertyValue("assertionUUID"));

if (acctID != null &amp;&amp; acctID.length() > 0) {
	
	callTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
	//callTC.setPropertyValue("NODE_ACCOUNT_ID1",tC.getPropertyValue("NODE_ACCOUNT_ID"));
	callTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
	//callTC.setPropertyValue("NODE_ACCOUNT_ID_FULL1",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));
} else {
	callTC.setPropertyValue("assertionAccountId","ERROR");
}
if (userID != null &amp;&amp; userID.length() > 0) {
	callTC.setPropertyValue("NODE_USER_ID",tC.getPropertyValue("NODE_USER_ID"));	
	//callTC.setPropertyValue("NODE_USER_ID1",tC.getPropertyValue("NODE_USER_ID"));
	callTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
	//tP.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL"));
	//callTC.setPropertyValue("NODE_USER_ID_FULL1",tC.getPropertyValue("NODE_USER_ID_FULL"));
} else {
	callTC.setPropertyValue("assertionUserId","ERROR");
}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call Policy Create - TOU" id="fe3fff67-7813-42df-a9a7-82f156629095"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateTOU_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));


def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Call Policy Create - MUC" id="46163d32-8201-4e13-8049-0e52f03678b8" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("PolicyCreateMUC_API")

myTC.setPropertyValue("nodeid",tC.getPropertyValue("nodeid"));
myTC.setPropertyValue("SAML",tC.getPropertyValue("SAML"));
myTC.setPropertyValue("NODE_USER_ID_REQ_ENTITY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_USER_ID_CREATED_BY",tC.getPropertyValue("NODE_USER_ID_FAU1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID",tC.getPropertyValue("NODE_ACCOUNT_ID"));
myTC.setPropertyValue("NODE_USER_ID_FULL",tC.getPropertyValue("NODE_USER_ID_FULL1"));
myTC.setPropertyValue("NODE_ACCOUNT_ID_FULL",tC.getPropertyValue("NODE_ACCOUNT_ID_FULL"));

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to that for Retailer"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tS.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Call Extract and Store Account and User Info based on Assertion UUID" id="a0af3194-df38-459c-b0c4-a96be37f7bcf"><con:settings/><con:config><script>def extractStoreTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("Extract and Store Account and User Info based on Assertion UUID");
def runnerExtractStoreTC = extractStoreTC.run(null, false);
assert "$runnerExtractStoreTC.status" != "FAILED";</script></con:config></con:testStep><con:testStep type="groovy" name="Call RightsTokenCreate and get RightsTokenId and set other parameters"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_Valid_AccountId');
def createRTTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName('RightsTokenCreate_FUNC_RTL_With_HD_Content_Profile');
createRTTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
createRTTC.setPropertyValue("CallingTestCaseName", testCase.name);
def runnerTC = createRTTC.run(null, false);

assert "$runnerTC.status" != "FAILED";

testCase.setPropertyValue("ContentProfile", testSuite.getPropertyValue("ContentProfile"));
testCase.setPropertyValue("DiscreteMediaProfile", testSuite.getPropertyValue("DiscreteMediaProfile"));</script></con:config></con:testStep><con:testStep type="groovy" name="Update Node Role to LLASP" id="8a4a347b-b0fc-4874-b5cb-8ca12d920f89"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("nodeid",tP.getPropertyValue(tC.getPropertyValue("nodeid")));</script></con:config></con:testStep><con:testStep type="groovy" name="Store the SAML and Account Information" id="a6927d39-2377-422d-96bb-84061fdff3f9"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("StoreSAML-FullUser2",tP.getPropertyValue("SAML-FullUser2"));
tC.setPropertyValue("StoreNodeUserSAMLAssertion",tP.getPropertyValue("NodeUserSAMLAssertion"));
tC.setPropertyValue("StoreNodeAccountId",tP.getPropertyValue("NodeAccountId"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS" id="238504c2-d906-46ac-8b79-3102037e1c69" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();


def callTSname = tS.getPropertyValue("sName");

def callTS = tP.getTestSuiteByName(callTSname);

def myTC = tP.getTestSuiteByName("E2E").getTestCaseByName("STS_API")
tC.setPropertyValue("UserName",tP.getPropertyValue("Username"));

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

tP.setPropertyValue("SAML-FullUser2",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("NodeUserSAMLAssertion",context.expand( '${#TestCase#SAML}'));
tP.setPropertyValue("NodeAccountId",context.expand( '${#TestCase#NODE_ACCOUNT_ID}'));

</script></con:config></con:testStep><con:testStep type="groovy" name="Call DiscreteMediaRightCreateConsume" id="3cb3ab59-a99f-4db5-8aa7-cfad2d4ae0b1"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testRunner.testCase.testSuite.project.getTestSuiteByName("CommonSteps").getTestCaseByName("DiscreteMediaRightConsumePost");
commonTC.setPropertyValue("CallingTestSuiteName", testSuite.name);
commonTC.setPropertyValue("CallingTestCaseName", testCase.name);

commonTC.setPropertyValue("RightsTokenOid",testCase.getPropertyValue("RightsTokenOid"));
commonTC.setPropertyValue("RightsTokenId",testCase.getPropertyValue("RightsTokenId"));
commonTC.setPropertyValue("ContentProfile",testCase.getPropertyValue("ContentProfile"));
commonTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
testProject.setPropertyValue("DiscreteMediaRightsRemainingHD", "1");
def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore SAML and Account Information" id="8b21bb43-c1f2-4e91-80f0-1d8b9e305ada"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tP.setPropertyValue("SAML-FullUser2",tC.getPropertyValue("StoreSAML-FullUser2"));
tP.setPropertyValue("NodeUserSAMLAssertion",tC.getPropertyValue("StoreNodeUserSAMLAssertion"));
tP.setPropertyValue("NodeAccountId",tC.getPropertyValue("StoreNodeAccountId"));</script></con:config></con:testStep><con:testStep type="groovy" name="Reset UUID" id="946bc732-3e44-4154-ba58-36f619923c22"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def uuid = context.expand( '${#Project#E2E_UUID_FAU1}' )
testProject.setPropertyValue("UUID", uuid);</script></con:config></con:testStep><con:properties><con:property><con:name>QC_Id</con:name><con:value>83843</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdLLASP</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>0589CE7D622F33EFE05305991F0A66FB</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:0589CE7D622F33EFE05305991F0A66FB</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>ForbiddenRoleInvalid</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>0589AAA22AEE1665E05307991F0AB7F0</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:0589AAA22AEE1665E05307991F0AB7F0</con:value></con:property><con:property><con:name>RequestorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU2"].value}</con:value></con:property><con:property><con:name>CreatorUUID</con:name><con:value>${=project.properties["E2E_UUID_FAU1"].value}</con:value></con:property><con:property><con:name>DiscreteMediaTokenCreatedBy</con:name><con:value>3232</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>DE66FE24BCD46D22E0401F0A05992A11</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>DE66FE47EA8B01B4E0401F0A05992A1B</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>DE66FE0F88857AA8E0401F0A07990AC2</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assert2</con:name><con:value>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</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Certs\3232.pem</con:value></con:property><con:property><con:name>StoreSAML-FullUser2</con:name><con:value>SAML2 Assertion=pVbbcuI4EP0VyvOYMr5hA65AlcNlllkuARN2k5eUkAUoYyRjyQby9SsZcICQLJM8udTuy+nWUXffMrAMTddjDMUcU1LYLEPC3ExaU5KYuBQwzFwCloi5HLq+1+u6ZlF3wcFEKXSaNeXZKeuwUkKBqoOprpamoKpWjWlJ1R0H2oZVLhlVR6gylqAOYRwQXlNM3Siphq4aztjQXdtwLb1oG+aTUpigmAnfQqWoK3tQG1ZTFpxHrqat1+vi2irSeK6Zum5o//a6PlygJVDqt7uMskBxfa8PiwGCKAxhEdKldqud6NwGzPXxnACexGgfK/golq7pVU3oBAzPfyi5LQo6ZEazYwMQSjAEIX4Fsj49xBc0KHjhnMaYL5YfJmHo0rGKNlCFRon8ULRTaFc6OkEYM6CyBTD2vkZohmJEICo8jDo15cd1t5aZjmNA2IzGS3Z6/DM8iKQopJEIyA5p7aFd7/BCpeq3CLodAsOE4RT1JVkjABHb3yaC17sq3MdohjddzARBN0yi047hnR131WjiOWL8Kxd0dDk7JxMQJqhebt6k7aGXWMZ2vsbbG/QA0vGdxdK7dS0DcKycCfKr3R3PSJmTaGcxG+CeZj2EIXsd6P3Hx/5GC/j8989Kq2EPTY9NXsLgZ+eu396u0uCFbFA/HUVa6j/+M93CsWM6aTct04pvbcfa04zMb9JJr7sBw3XD86N2CCuV5l/euBstTScJ/WFv8jpL5tPyr2FLFCSyzEXpCU+mDfupFTirqV+u/vLGwzV97GvdUmLjuDNcv65R5e+HzUMtT+cI/6ns8Ob9ZPqCID8cJQ06zUJb3BLgnzczKcGBOstU3Ug2H8YR4UpdWsne4Sai3eHAFXe4O+t2papb1ZLTMlp2u2S1dNvS7WrVaOue4ej6ocnsUJxBbFAywzKWbLk72nwOEC5dhkiAYjWlieh0TPnEYxNwUOiQkXgElDA0pqI9G3Th8KBqhZsY0jKNtsnsZfX6EpeUQp/yARnE3oyj+LQnWyc9eYQgjjCSjVvymgliMy5qsQJpwkOjmIIiQYlo7bHssq5Zqtgaw8soRBKptqRBEqJitIiyymhs9zVVAFkmHbXG2Wv7MK/zf4cSCJ0ASwUmc7lD4hrRheFiHhL5OGHnOOGDey8JsHxYop48xnCH5PTXG00kP3KOeI1Gy2/4B9i59h9Yf9W4MRh80bLZ9fz779g+N/xn46sOvh76e4G730Uu2PtN8/eW2icE1M65nwcKUnwU9rCmiYEvRkT98HJXoLgqJmmaZG+1LEdhLNyL+WTYmm5qPoKJGGLbMf2NiJZ70a7aGHLgZ8Fz+SnEhC+IzwFHS9FcCtnxihXRR0yuiB3RFTfX7p8nIUXpONrwS7JGKNZbifjTDRi6UOoJ8b34rGkcvN3YBV9HcUSeYkPkmMzlSW4L2w94Aalwi8Wco/Gx80sOLgU/FeZFzrFwQahpwtHHfwpygNUUACFNCO80lUxwPFQznHwbIfdN6Z2bbG7nizz+/01exRkFIBLrP8OZf7mPufIJkPnRYN4HfT+bK95ds2rbbat9PJsrjv32Rk/Q1d+J30uO6nTO8fp/</con:value></con:property><con:property><con:name>StoreNodeUserSAMLAssertion</con:name><con:value>SAML2 Assertion=pVbbcuI4EP0VyvOYMr5hA65AlcNlllkuARN2k5eUkAUoYyRjyQby9SsZcICQLJM8udTuy+nWUXffMrAMTddjDMUcU1LYLEPC3ExaU5KYuBQwzFwCloi5HLq+1+u6ZlF3wcFEKXSaNeXZKeuwUkKBqoOprpamoKpWjWlJ1R0H2oZVLhlVR6gylqAOYRwQXlNM3Siphq4aztjQXdtwLb1oG+aTUpigmAnfQqWoK3tQG1ZTFpxHrqat1+vi2irSeK6Zum5o//a6PlygJVDqt7uMskBxfa8PiwGCKAxhEdKldqud6NwGzPXxnACexGgfK/golq7pVU3oBAzPfyi5LQo6ZEazYwMQSjAEIX4Fsj49xBc0KHjhnMaYL5YfJmHo0rGKNlCFRon8ULRTaFc6OkEYM6CyBTD2vkZohmJEICo8jDo15cd1t5aZjmNA2IzGS3Z6/DM8iKQopJEIyA5p7aFd7/BCpeq3CLodAsOE4RT1JVkjABHb3yaC17sq3MdohjddzARBN0yi047hnR131WjiOWL8Kxd0dDk7JxMQJqhebt6k7aGXWMZ2vsbbG/QA0vGdxdK7dS0DcKycCfKr3R3PSJmTaGcxG+CeZj2EIXsd6P3Hx/5GC/j8989Kq2EPTY9NXsLgZ+eu396u0uCFbFA/HUVa6j/+M93CsWM6aTct04pvbcfa04zMb9JJr7sBw3XD86N2CCuV5l/euBstTScJ/WFv8jpL5tPyr2FLFCSyzEXpCU+mDfupFTirqV+u/vLGwzV97GvdUmLjuDNcv65R5e+HzUMtT+cI/6ns8Ob9ZPqCID8cJQ06zUJb3BLgnzczKcGBOstU3Ug2H8YR4UpdWsne4Sai3eHAFXe4O+t2papb1ZLTMlp2u2S1dNvS7WrVaOue4ej6ocnsUJxBbFAywzKWbLk72nwOEC5dhkiAYjWlieh0TPnEYxNwUOiQkXgElDA0pqI9G3Th8KBqhZsY0jKNtsnsZfX6EpeUQp/yARnE3oyj+LQnWyc9eYQgjjCSjVvymgliMy5qsQJpwkOjmIIiQYlo7bHssq5Zqtgaw8soRBKptqRBEqJitIiyymhs9zVVAFkmHbXG2Wv7MK/zf4cSCJ0ASwUmc7lD4hrRheFiHhL5OGHnOOGDey8JsHxYop48xnCH5PTXG00kP3KOeI1Gy2/4B9i59h9Yf9W4MRh80bLZ9fz779g+N/xn46sOvh76e4G730Uu2PtN8/eW2icE1M65nwcKUnwU9rCmiYEvRkT98HJXoLgqJmmaZG+1LEdhLNyL+WTYmm5qPoKJGGLbMf2NiJZ70a7aGHLgZ8Fz+SnEhC+IzwFHS9FcCtnxihXRR0yuiB3RFTfX7p8nIUXpONrwS7JGKNZbifjTDRi6UOoJ8b34rGkcvN3YBV9HcUSeYkPkmMzlSW4L2w94Aalwi8Wco/Gx80sOLgU/FeZFzrFwQahpwtHHfwpygNUUACFNCO80lUxwPFQznHwbIfdN6Z2bbG7nizz+/01exRkFIBLrP8OZf7mPufIJkPnRYN4HfT+bK95ds2rbbat9PJsrjv32Rk/Q1d+J30uO6nTO8fp/</con:value></con:property><con:property><con:name>StoreNodeAccountId</con:name><con:value>urn:dece:accountid:org:dece:0589CE7D61D733EFE05305991F0A66FB</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20141016_050824</con:value></con:property><con:property><con:name>accountname</con:name><con:value>accname_20141016_050821</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0589AB1A72EA6330E05305991F0AF5EB</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0589AB1A72EA6330E05305991F0AF5EB</con:value></con:property><con:property><con:name>ResponseTypeUserCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>userType</con:name><con:value>ADULT</con:value></con:property><con:property><con:name>Privilege</con:name><con:value>full</con:value></con:property><con:property><con:name>GivenName</con:name><con:value>userget_firstuser20141016_050824</con:value></con:property><con:property><con:name>SurName</con:name><con:value>userget_firstuser20141016_050824</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>DisplayImageURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>PostalAddress</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PostalCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Locality</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StateOrProvince</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Country</con:name><con:value>US</con:value></con:property><con:property><con:name>TelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MobileTelephoneNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Language1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>MeetsAgeOfMajority</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>urnUser</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>QuestionID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionID2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QuestionResponse2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResourceStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>0589AB3CE1556277E05305991F0A9F12</con:value></con:property><con:property><con:name>NODE_USER_ID1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:0589AB3CE1556277E05305991F0A9F12</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL1</con:name><con:value>urn:dece:userid:org:dece:0589AB3CE1556277E05305991F0A9F12</con:value></con:property><con:property><con:name>user_oid1</con:name><con:value>0589AB3CE1566277E05305991F0A9F12</con:value></con:property><con:property><con:name>account_oid</con:name><con:value>0589AB1A72EB6330E05305991F0AF5EB</con:value></con:property><con:property><con:name>DateOfBirth</con:name><con:value>1995-10-21</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_5dacf480-39c1-4d8d-98a0-a85b1b7894b2</con:value></con:property><con:property><con:name>assertionUUID1</con:name><con:value>_5dacf480-39c1-4d8d-98a0-a85b1b7894b2</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPOYMbINBOwJzDhcGp9CQjFJ0750hCxAwUhGkrn011cy4AK5HJo8ebTey7erT7t7LeA8djxfCMwlYbSwnsdUeJm0bqScegwKIjwK51h4Enmh3+t6TtHy4N7EKAStuvGrEkE0Ltcss+Qi2yxHtch0a9AyYa0yskfVmlseOUpViBQHVEhIZd1wLLts2pZpXw1t2ytVPdstlm37p1F4xFwo30qlaBk7UGtRN6ZSJh4Aq9WquCoVGZ8Ax7Js8NTrhmiK59BoXG8zygLxxk4fFSOMcByjImJzcA2OdK4j4YVkQqFMOd7Fit6KZQHLBUonEmRyYeS2OAromGXHJqSMEgRj8hvq+vSwnLKo4McTxomczt9Mwra0YxOvkYnsMr0wwDG0Mx0dIeQCmmIK7Z2vAR5jjinChYdBUDcuzru1zHTIIRVjxufi+PhveDBd4pglODLFPq0dtPMdvlKpxjVGXkBRnAqyxHearAlEWOxuE6PzXRX6HI/JukuEIuhaaHTgEN7JcVuNFplgIT9yQQeXs3XyCOMUN4LlKrn7D2+mrnvJflpX6ddSX1oDAO5/1DMAh8qZIL/a7fGElDmJthbN9iS64WvYnETIBaP4+0N/3LodD7qs1u98v6veh1FS7Y/AoOav18m3AU793jP++tPq9VpyOHl44iNHPj7PFs0Zr6HBj5ndiWfkAYTsMu60hsv4QXbKs0ceOYmbdEGrPKr8uL18khiV0AbUNkEVBjc3rkzXbfllAgnrVPiX7vJqCFfVQTl4WC2+dS6rt0+i1qvn6RzgP5bt33yYjp4xkvujpkHQKnTULUH5fjPTEhKZ40zVS3TzERJTaTS0le4dXqraHYk8dYfbs1Wpuf5Nqdm2K5Urp1ptW5WSVXFdu2P5bsd29k1mi+IEYpPRMdGxdMvd0uZ9gGjuCUwjzM0lS1WnE8Y7HltQwkJAB+oRMCrwkKn2PE8X0rJKDFLb2jjPv5d8RuCEqO59x+Q9vef+WGJ+3JLLRy15gBFJCNZ9W9NaKF4LqUqxgMtUxnZxCYsUp6qzc91kPadcqwBB5kmMNVAwZ1Ea42IyTbLCALH9OiZEIpMO2sPssb2Z1um/fQWUTkS0gtC53GB1i/iV2WLtE3k74ephwnv3fhoR/a5UOSUnaIvk+Ndflmh65BTxm8122Az3sHPtf7D+qHHz/v6Dlq2uH/Y/Y/urGf6yP+rg46E/F7j7iawVcT8TWpm/tATvcA+c0j4PFC3JQdj9gqZGvRoOjf2jXcDiopgul2n2TKt6CHLlXk0muwIsB4QYpWp8bYZshinIvYCzdoUc+EnwXH4MMZVTGkoo8Vz1lUJ2PGM5DLHQy2Gg+uH63M3zKKQqncRr+ZqsGavFViN+d/dFHtJ6StxXnxXj0d8be8XXQRyVp9oNJaETfdJ7wuYNXiCm3BI14Rg/dP6ag9eCHwvzIudYpCLUKJX47T8FPbrqBkSIpVQGLSMTHI7TDKfcJNj7q/TCTTax8xWe/P8Ob5KMAgirxV+QzL/exDz9BOjkYCTvgr6cyrZfddr+ValkHU7lTqV9kxflCF3jhfil5KBOpxxv/AE=</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FAU1</con:name><con:value>0589AB1A72EA6330E05305991F0AF5EB</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:0589AB1A72EA6330E05305991F0AF5EB</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU1</con:name><con:value>0589AB3CE1556277E05305991F0A9F12</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>36a7ab8a-8dce-4a5b-9688-6ff05a4a44b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e3f5664b-05a1-4986-ad58-bd10567c341c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ec74dfff-7d0c-4ad1-9b84-a0257926363d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8a4a347b-b0fc-4874-b5cb-8ca12d920f89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3cb3ab59-a99f-4db5-8aa7-cfad2d4ae0b1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property><con:property><con:name>nodeid</con:name><con:value>nodeIdRTL</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Test Configuration/Setup" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Authentication Contexts" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Extract Properties from calling test case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC;

tC.setPropertyValue("nodeid", null);
tC.setPropertyValue("username", null);

try {
	callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname);

	tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
	tC.setPropertyValue("username",callTC.getPropertyValue("username"));
}
catch(Throwable e) {
	log.info "ERROR during getTestCaseByName - $e";
}


</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Authentication Context"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
def dbAcct;

int lastColon;
String nodeID = tC.getPropertyValue("nodeid").toString();
String userID = tC.getPropertyValue("username").toString();
String rturn = tP.getPropertyValue("urnRightsLocker").toString();
String useroid = "";
String acctoid = "";
String uuid = "";
String assertionAccountIdFULL = "";
String assertionUserIdFULL = "";
String assertion = "";
String rightslocker;

assert nodeID.length() > 0;
assert userID.length() > 0;

try {
	def a = new dbUtils.dbUser(log,tP.getPropertyValue("targetSystem"));
	useroid = a.userGetUserOID(userID);
	acctoid = a.userGetAccountOIDbyUsername(userID);
} 
catch (Throwable e) {
	log.info "ERROR during dbUtils.dbUser - $e";
}
/*
*  Null calling test cases current Properties
*/
callTC.setPropertyValue("assert",null);
callTC.setPropertyValue("assertId",null);
callTC.setPropertyValue("assertionUUID",null);
callTC.setPropertyValue("assertionAccountIdFULL",null);
callTC.setPropertyValue("assertionAccountId",null);
callTC.setPropertyValue("assertionUserIdFULL",null);
callTC.setPropertyValue("assertionUserId",null);
callTC.setPropertyValue("accountoid",null);
callTC.setPropertyValue("useroid",null);
callTC.setPropertyValue("rightslockerFULL",null);
callTC.setPropertyValue("rightslocker",null);

/*
*  LP2 security contexts
*/

if (tP.getPropertyValue("targetSystem").toString() == "LP1") {
	switch (nodeID) {
		case "221700":  // Dynamic lasp and his/her customer service node
		case "221701":
		if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
				uuid = "_526ae30b-f38b-416f-a6f9-22095ba20967";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:C9E7EEF12F676AE4E0401F0A05997BB6";
				assertion="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";
				assertionUserIdFULL="urn:dece:userid:org:dece:C9E7F7B295BDC2E7E0401F0A05990FA5";
			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
				uuid = "_6fc4dd17-6c0f-45df-857e-93310644a1d7";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:C9E7EEF12F676AE4E0401F0A05997BB6";
				assertionUserIdFULL="urn:dece:userid:org:dece:C9E81C4F93CAF5C0E0401F0A05995564";
			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
				uuid = "_a9099f3c-82c2-4cb3-bc70-00040b1765f2";
				assertion="pVdbk6K8Fn33V1jOY5fNRVGxursqXEVFBfH6cgohAspFCQj660/A1tGenvnmO+ehy85m7521d1aSlTdkBj7dBQjBOPGisKoI77X/mCzJstuGVe/QFl1vWptGfWO1yTpJkk1yQ7VbzJauVRWEUqiEKDHD5L1GkxRdJ9k61TYopkvTXbr92uqw61p1DmOEU2OXV7JWzQM/RN1y2vdaGofdyEQe6oZmAFE3sbpToA672LNr3jDVPt6uKMsJ4w83SQ5dgrBebWhB37derSgg3ognnzcbdaeeE5pJGsPPOW30XvuMzbLsNWu8RrFD0LgogmQJ7GMjz/lR+6jcgqGthNvoOubNMAo9y/S9i1mAUmHiRnYV+E4Ue4kb/CY1RVBkkboOc6tuUc3wR434OUGJ7i8zPYGMkVlHrkndkulwC2MYWrA605X32o+/W8FrrBGbIdpGcYC+jP8dJBieoB8doF1Ht8pu6P4+4zft+niDVlcJLT9F3gmOCpocTAui6iSGWy8fegiTz0bVcvmrOboxDFr/ZkneiEecGDbxTWcEz4Eo+V/W63Gtrlnmpp/Cj46LXvrrQ8t3xuuX7WVx7h3ZxXLnnLLovYTw6HwFdV/qz/FXot559Rk02EzzNTUYr+e7ORcLQ+/o2uY5MBjBitg1mwbqQjRc11ruJ9xAWCWBZFinnrFpNTdboaeOjIa1Vi5DYxCZceXFm2iDSxrGLdbgGfXsBDrTI8yWND5zu/l6g2gUUot0jOKDe2JDkI8zqZ9uDFncnPsTOKJmJK0d1i4V71GFM8f9LFzSF9XvqWqr08w77z9reqyhqGsAz2WRxf9LhmQFMzHvA744KbZ4eybwQ1UUIb3wPDhPHZApHHDw3w6MOGd/dPeezGYkBzRNAgLP+TtxqIK9DKiZyLkqP5+rOX8Bfc4ZzXGgUQH+mlN1MROylTDXtJ6YuYYtz88b2U/XF3GkAlQG864q6uJc0A1RVUF0teWqsJHznTpVM0VbCRWcQBDzw8WW2QTKuWfRCqNOGXo1ZdL1co7t0nkYjE4bQ/RVXpX56VGeKpuGoIl9oK8WFi2lOPYyDA5RZTXjHoL6B7gDUMpIPCe4qMY+U40ZPRJ0s7QZzzZVkfuqhjJeK6uSK2LWn88uP3vBcypvB2IuGmBy7YVl8NKIXC/7yFwwoaqDTHDK4IGY2eMbEFUjswp/7dVQzHRRn40kVVcyEZQ2Qcx8tKFH7kZ2T1ZDy/sG2D0uDK+JCynE30P9ZJ2ZY8WUJbAJ5pTV0F3LYzxzGWXOupMJ2qo/iNYKTjMCmshxGsCASFCUhvvPgSE3Z8YHj6U9ONxKUQDduKJS0WB/uuRkx2uMnclowQjbfXsie5OGabuE4lv0rrEHigLtAeVqpq2vCF0IvUtrPJgtoRevLsmI0aiW12Eq+iKdLYXIb9u95Wo2eMlXlmaMJ9PZYnLJ89Fx17n4SW/M9eJpXxWc8QjCCbJeCNKUOKMjMPyqt8N82uokZCrAUTkA5J3jiB4mMNfbXUnY01URkxeofCbzC16eAll+ERVO0LSt5FITS56nM2qkKqLt4zadV0vdr6x5TsArRZqL9WFFS+TaAHaZTGuKkqPNmJf+Eq61kW/ME5Ad5tuQokj5oPW2auZYasEAW8mmHN5FXCVVwMwcH/pkPpi3SOqo2X5/yoJZI5/S+3zsOuvz3lnv8aKsHrbOygD+3HjgmIIptqhohqiroHPdb7mqzBq6bwX5YRNYuWDgNSuDI4MTdUkjZ7kggMHVhgxA52h1EXcqL5bxFZCrJqbFabN00SoceWNDTDFp0we67DY0+Y8cKyhWeebYkQca+Mox8coxEWyPL0pHoBDT4g9okTmcLB619nzYZw+kthzuK9yLRDiJ5zfHYSczBi8L6py13Z22WLCK4PIv4XblNjYJR5oXS4P9fVv29L0Qtpr+WR2qGjPzCP9M7uAxQ8PKSKFCsZFcJIKN0xcuWHvB5dJo0rNgMk1PyswcIOrsbo4LNttNei2CiOUzc2mvT5q0jKzV9R75ekjejddjlHg8YJ9O4Jv2mqabHbSS27C4hxWhKuHL0Uz+rOMKi2fXt6Vr91CIQZTAMKl9FFGFhuumWOl5dhffnNcxz4qdBu53g20JbUZsili0UBIJSIZlabLD38TeFcUXiHwUbr1irkLOXi/rPwO0gi6CoQ3j+ilKLRei2h8yFv2qKqGOVUgUImhEWC5TrYbASaBJd6QOCVhG5AHVaTV5jmZoutPo1KqjKBmH4xhsExg/S+XOk1TWoeUdPFjo6UJUIKwqUIJbcjRPaeJTryfzNYQpVtxxIXq7dLPDEMgLDj4sABNBZKc+fD24h7JBBLr+0nXTQqWVpqk2SZZ657cVfv12awb2sb3CARXlcBAvKPxG9lO3Wn6pufHt8+CWHqS2V8ga3Nkk9qwrkudPPwlTMOXOlmtRN9R3538RTP0/wfSvwcQfSiK+dvM+l33yHma+vX6woMeS7+NGh6P5enxNT6e0JEC7kLMxTk9QBEkTU2ilWJOejWgPQ+Kegvir58Ad9ZeZ7/ZnfGnihtMEnyUBpmu1HP7FW3AKUfEWVPB2y//2ofk0Je5bAvPkOxvv4ydjgfiPr0qraxV+2DzBP1kU2z+X65tcD/PgOovD0wudYlSI//NveGFFOK2HD9Aofkz+XYLvJn823pt8x5JgNm3SBP7+S7U4Gd9rpmVFaZgoQq00PJ7WJc7kfIDdn06/pCnl9+d7Kke/fU8t1eEUn5uBWbv7ev/sXPdKulgQRyGvxPJey1G32Cuh83A7fAL8ckG0RVGiaKnVboHnC6LNca17A58q+fjF/Kvloadf98PHfwE=";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:C9E7EEF12F676AE4E0401F0A05997BB6";
				assertionUserIdFULL="urn:dece:userid:org:dece:C9E83EEB396D75E4E0401F0A0599208C";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "_7c5f1539-9b2e-45d1-bb7e-8b979b72d117";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C687F959B4B13ABE0401F0A059957EB";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {
//				uuid = "_b4044919-6af3-4e53-9536-841689b9c7e2";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C8037347D051C11E0401F0A07996251";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "_61be2c77-ae92-4243-a7a0-658cb7383305";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9CDFDA6C0B79F3ADE0401F0A05996EAE";
			} else {
				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
				assert 1 == 2;
			}
			break;

			 case "221500":  // Linked lasp and his/her customer service node
                case "221501":
                if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
                       uuid = "_c668fd22-f1e9-4d24-91b0-1f314dbf28f0";
                       assertion="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";
                       
                       assertionAccountIdFULL="urn:dece:accountid:org:dece:C9E1BEFA25290915E0401F0A079935C4";
                       assertionUserIdFULL="urn:dece:userid:org:dece:C9E25FD41A10D76DE0401F0A07996532";
                       //assertionUserIdFULL="urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A99";  
                	
//                	uuid="_2e3f93ea-f54f-4541-9533-5de09656bf54";
//                       assertion="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";
//                       //assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//                       assertionAccountIdFULL="urn:dece:accountid:org:dece:910600";
//                       assertionUserIdFULL="urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79";
//
////                       assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
////                       assertionUserIdFULL="urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79";
//
//     //                  uuid = "_e88f056e-1995-4ca1-b67f-fdb26dcbb61c";
//       //                assertion="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";
////                                                                //uuid = "_cf87626d-39cc-4521-bdc0-7d967c886229";
////                                                                //assertion="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";
                       
                                               } else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
                                                                uuid = "_b812c5f2-04fa-463f-8bbd-d128596e9031";
                                                                assertion="pVdZk6LMEn33VxjOY4fNJirGdEcUi4iKCuL6coOlBJRFKRD0198CR8fu6ZlvvnsfOuxKMrNOZp2qOvUdmWFA9wBCMEn9OKor4lvjP1aXom12RzfJ1s5sttrMrtm1LKfpUHSX5dqQIxmqUVcQyqASodSM0rcGTVLYn2tSHYNiehTXo1uvbIfZNupLmCCcGru8ko16EQYR6lXTvjWyJOrFJvJRLzJDiHqp3ZsDddzDnj3zjqnx/v2GspoweffS9NgjCPvVgTYMAvvVjkPiO/HB57uDenPfjcw0S+CPOR301vgRm+f5a868xolL0CRJEiRHYB8H+e63xnvtHgwdJdrFt7FgRnHk22bgX80SlApTL3bqIHDjxE+98DepKYIiy9RNWNhNm2pF3xrEzwkqdH+Z6QPIBJlN5JnUPZkOdzCBkQ3rC115a3z7uxW8xRqJGaFdnITo0/jfQYLRGQbxETpNdK/sju7vM37Rrvfv0O4pkR1kyD/DSUmTo2lDVJ8lcOcXYx9h8jmoXi1/vUB3hkH73yzJd+IZJ4ZNfNEZ0XchSv+X9Xpeq1uWpRlk8J1b7VrW3hSF+Ni2hj7V4TMpOyxOMjy8VRCenW+gHkv9Y/yZqA9e/QjaR2isto5ScIUDD1yyvC1OpxbN2C07nNGzcN2ft5jTyGKn6czvjJ2DFG7HpvmyaY/nJDPmuh7ts2kWcBF5qk0ywjy5Fml4RqgNDM+e2S7DJPMVpw/6rirCjmyS1Mk6Wr4tK93J1E+DcLjL/FWhXlmdoxxhcBkjbzQ4tGuLkDWWnHWcK24crY3tKkBvP2t6rqGsawQvVZHl/2uW5EQzNR8DoTwpdnh7pvBdVRQxuwoCuMxdkCs8cPHfHkx493DyDr7M5SQPNK0PRIEP9tJYBQcZUAuJ91RhuVQL4QqGvDtZ4kCjBoItr+pSLuYbcalpAyn3DEdeXiw5yLZXaaICVAULnirp0lLUDUlVQXyzFapoycVenau5om3EGk4gSsXx6shcCuXCt2mFVecsvZmz2Xa9xPb+ZRxOzpYhBaqgysL8JM8VixE1aQj0zcqm+xmOvY7DY1zbLPinoOER7gHs5ySeE1xV45CrxoKeiLpZ2YyPNlWRh6qGckGrqpJrUj5cLq4/eyHwquCEUiEZYHbrhW0I/Qm5XQ+RuWIjVQe56FbBIyl3pncgqkbmNeHWq7GU65K+mPRVXcklUNlEKQ+QRU88S/bONqMVQwPsnxdG0KRVP8LfI/1sX9hTzZT7wAqXlM3onu2zvrmOc3fbzUVtMxzFWwWnmQBN4nkNYEAkKEvD/efBmF+y06PP0T4c7/pxCL2kplLx6HC+FmTXZ6bubLJixd2hM5P9GWM6HqEENr1nDkBRoDOiPM109A2hi5F/bU9HizX0k801nbAa1fa7bE1fZYu1GAcdZ7DeLEYvxcbWjOlsvljNrkUxOe271yAdTPlBMh+qojudQDhD9gtBmn3e6IqssBnsMZ92OgnZGnBVHgB577qSjwnMD/Y3Eg50VcLkBaqQy8JKkOdAll8khRc1bdf3qJktL7MFNVEVyQlwmy6btR7UtgIv4pUizdX2uKH75NYATpVMa0l9V1uwL8M13GqTwFimID8udxFFkfJRG+zU3LXVkgGOks95vIv4WqaAhTk9DslitGzjva05wXDOgQVTzOlDMfXc7eXgbg94UTZPW2djgGBpPHFMwRRb1TRD0lXQve23QlUWjB7YYXG0QrsQDbxmVXBs8JLe18hFIYpgdLMhA9AF2lylvSpIVXwNFKqJaXG21h7aRBN/akgZJm32RJe9RZP/yLGSYrWPHDsJQAOfOSbdOCaB3elF6YoUYtvCEa1yl5elk9ZZjofckdTW40ONf+kTbuoHrWnUzY3Ry4q65B1vr61WnCJ6wku023iMlfKkebU1ODx0ZF8/iFG7FVzUsaqxC58ILuQennI0rk0UKpKY9NonuCR74cOtH16vTItehLN5dlYW5ghRF886rbh8Pxu0CSKRL+y1sz1r/XVsb273yOdD8mG8HaPE8wH74QS+a695Zu2hnd6H5T2siPU+vhzN9M86rrT4TnNXufaOpRhEKYzSxnsZVWq4XoaVnu/08M15GwucRLN9sUXxEit22qJEtkiqTwKyw3FtlqHvYu+G4hNEIY52fjlXKWdvl/WfAdphD8HIgUnzHGe2B1HjDxnLftWVSMcqJI4QNGIsl9t9iWyDbrfVZllAMS2W7rYlkRYZkQd9jpQa9UmcTqNpAnYpTD5K5fYHqaxD2z/6sNTTpahAWFWgFLfkZJ6zNKBez+ZrBDOsuJNS9OK4LksgPzwGsARMhLGTBfD16B2rBhHo9ks3TRtVVpqmWJKs9M5vK/z87d4M7OP4pQMqy+EhXlD4heyn7rX8UjPz5fPgnh5kjl/KGtzZNPHtG5KPn34SpmTKgy23ou6oH87/Ipj6f4LpX4OJP5REfO7mYy7n7D/NfH/9YEGPJd/7nQ4n8/X0mp3PWUWATilnE5yeoAiSJubQzrAmvRjxAUbEIwXxV8+BB+pPMz/sH/FlqRfNU3yWhJiu9Wr4F2/BOUTlW1DB263424fmhylx31JYpF/ZhAA/GUvEf3xV2j279MPmGf7J48T5uVxf5HqaB9dZHp5+5JajUvxffsMLO8ZpfXyAxslz8q8SfDX5R+OjyQ8sKWaTlaXw91/q5cn41jBtO86iVBEbleH5tK5wppcj7P10+iVNJb9/vKcK9Nv31Fodz/G5GZqNh6//z85Nv6KLDXEU8issb40C9cq9ErlPt8MPgJ8uCHw39AHN0hzJUezzBcGwQuvRwA+VvP9i/tXy1NPP++H9vw==";
                                                                assertionAccountIdFULL="urn:dece:accountid:org:dece:C9E1BEFA25290915E0401F0A079935C4";
                                                                assertionUserIdFULL="urn:dece:userid:org:dece:C9E25FD41BE5D76DE0401F0A07996532";
                                                } else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
                                                                uuid = "_3a1f6795-edc1-41a1-a1c8-478c43ef75ee";
                                                                assertion="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";
                                                                assertionAccountIdFULL="urn:dece:accountid:org:dece:C9E1BEFA25290915E0401F0A079935C4";
                                                                assertionUserIdFULL="urn:dece:userid:org:dece:C9E1BEFA295F0915E0401F0A079935C4";
//                                                } else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//                                                                uuid = "_d5fa0fab-02b7-4c2e-8f3e-be751e888a9f";
//                                                                assertion="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";
//                                                                assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//                                                                assertionUserIdFULL="urn:dece:userid:org:dece:9DD0CB55ED027BCEE0401F0A07993B89";
//                                                } else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {            
//                                                                uuid = "_4c98aa5a-d6a4-4a2d-b254-b8ed0e3f125e";
//                                                                assertion="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";
//                                                                assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//                                                                assertionUserIdFULL="urn:dece:userid:org:dece:9E101B8D6302F7B1E0401F0A05991B2A";
//                                                } else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//                                                                uuid = "_0bfd64d3-aaeb-4d61-9678-e42081e8ed6e";
//                                                                assertion="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";
//                                                                assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//                                                                assertionUserIdFULL="urn:dece:userid:org:dece:A7CF96020A3C1A69E0401F0A05996CA5";
                                                } else {
                                                                log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
                                                                assert 1 == 2;
                                                }
                                                break;


////			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
////				uuid = "a0d4c2f9-822f-46ed-ac24-d19f7a74222c";
////				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
////				assertion="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";
////				assertionUserIdFULL="urn:dece:userid:org:dece:9B66525BAF67015BE0401F0A059942CA";
////				_dbcebee6-4b5f-46bc-ba19-4e5742dc25b5
//			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//				uuid = "_65251036-9b49-4391-9446-a93ab26d5f83";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertion="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";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B66525BAF67015BE0401F0A059942CA";
//			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
//				uuid = "2d1d2bfa-79f5-4014-91fb-2ff971fe8efa";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B65694912BBFE26E0401F0A07996B66";
//			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
//				uuid = "e6ebc1a4-032e-454a-a26c-a2eed56e9e34";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B66525BB290015BE0401F0A059942CA";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "96687fc0-db29-43f5-b59f-0a5a7940907c";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C687F959B4B13ABE0401F0A059957EB";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {
//				uuid = "f55923ec-8d11-40bc-a28c-804fd6ee71f6";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C8037347D051C11E0401F0A07996251";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "933749ce-9688-4a96-82d8-75f33cecf02a";
//				assertion="nVdZk6LKEn73VxjOY4fNoqgY0x1RrKKiguD2cgOhBJRFWQT59afA1taenjlz7kOHXUkuX2Z+JFk/Y8P3yD6IYxglbhjUJe6tQbda3TZtwibd6fWabYPuNHuk1Wt2qV2rZUJzh5NGoy7FcQqlIE6MIHlrkDhBNHG6iXc1ot3HW/0W9dptEZtGfQGjGHlGKq94o577XhD3q6hvjTQK+qERu3E/MHwY9xOzPwfyuI80+8YNUuP95xVkFTB6d5Lk2Mcw89WCJvQ889UMfewn9qTz04r7c9cOjCSN4EdMK35rfNhmWfaatV7DyMZIHMcxnMaQjhW79o/Ge+1mDC0p2IXXM2sEYeCahucWRglKhokTWnXg2WHkJo7/G9cERuCl6ybMzaZJtIMfDewzQIXuLz09gYxioxk7BnFzpsIdjGBgwrquSm+NH3/VwKupFhlBvAsjP/5y/m+IYHCGXniEVjO+JXYD9/cev6nW+09o9qXA9NLYPcNJyZKjYcK4Povgzs3Hboy4Z8X1qvv1PL4RDJr/pSM/sUecCDb2TWU414Zx8v+067FVVy8Lw0vhuzQeZ12Ar8+pTYYso+ysHsm6nKYelLcKwqPyFdS90x/nrzy90+rDSE4pjNVyesPSPVFcFoHvHGTJF4k2zkTLtei3h/t2NjDwET8YHzpz3+9EWqcYTtrTLjjgbFtynKIr+QSWeLV9zuapWGD6tFhLth4IbsehsIFEc4UwdTdKQXgL7OIchpke7I3c7eqL/WwrRjmeLYxuvuENip5wq/wyjEc1XfWP1Ih/4b0B4Z9tFR7it8+cHnMo8xrBS5Vk+f+KwmnOSIz7gS0HxQ69nQl8lyWJSwuWBZe5DTKJATb624MJYx9OzsEV6QxngKIIgGMZb8+PZXAQAaHzjCOzi4WcswUYMvZkgQy1GvA2jKzyGZetuYWiDPjM0SxxcdmKXrop+IkM4sqYdWRe5RecqvGyDMKrLJe5rZjv5bmcScqaqyEHHJ8fC0ukEyjmrklKlDynyPWcSjerBZILl7E/OW813pNZWWTnJ3EubVucwg+Bul6apJAi22LsH8PaWmcejIZHuAdQyHAUExSydshkTScnnGpUMu1ZJkviUFbijFWqrMQanw0XevFZC5aRWcvnc14Ds2stTI0VJvhmNYyNJRXIKsg4uzIe8Zk1vQGRFTyrsddajflM5VV9IsiqlPGgknF85sVbcuJsRedstpR8qIH9Y2NYhV8KAXoeqGfzQp1qhiiArb8gzJbqmC7lGqswsze9jFPWw1G4kZCbCVB4hlEAAoSDMjVUfwaMmQU1Pbo06cLxTgh96EQ1mQhHh3OR4z23NbVnkyXF7Q7dmejOWoblYJJnkvvWAUgStEaEoxiWusZULnCLznSkr6AbrYtkQilEx+1RNXWZ6isu9LrWYLXWRy/52lS06WyuL2dFnk9O+17hJYMpM4jmQ5mzpxMIZ7H5guGGwGg9jmLXgz3i007FIVUDtswAIO5tm3cRgZnB/krCgSrziLxAZjORXbLiHIjiCy8xnKLsBIeYmeIi1YmJLPGWh8p0Wa9Ur7ZhGQ51CjeWm+OaFPCNBqzKmdLmBVvRqZfhCm6UiactEpAdF7uAIHDxqAx2cmabcskAS8rmDHqLmFoqAd2YHod4Plp0cOKkWN5wTgO9lc/JQz517M3lYG8OqCnrh1dnrQFvoT1wTEIUW9YUjVdl0Lu+b7ks6S3VM/38uPXNnNNQzyrjUGN4VVBwPec4MLrKYg2Qebwu+L3M8pV9DeSygWhx3q6ceB1M3KnGp4i06QNd9lsS/1eOlRSrPXPsxAIFfOUYf+UYD3anF6nHETHVYY/xMrMZkT8p3cV4SB9xZTU+1JgXAbMT12tPg16mjV6WxCXrOntluaQlzmFfgt3aaW0TBjcKU4HDQ1d01QMXdNreRR7LCqW7mHfB9/CUxePaRCICvpUUAkZH6Qvjb1y/KFptUvdn8/Qs6cYoJi7O9rSks/1s0MGwSLxQRXdzVoRVaK6v35GvQ/IuvI5R7HHAPk3g2+o1T7d7aCa3Y/kdlri6gD6ORvLnNa6UuFZzV6n2j+UuGCcwSBrvpVW5wvVTtOi5Vh99Oa9nmuUEDnRYnOnSQgtwPN7GCQEHOEXTHR7wt13viuILRDYMdm4Zq1xmrx/rPwM0/f4WGhGMGn/wVNapLgUq2j7CIIZa+Nb4n0VaVo+mKWLbanVwq9smdlsLdrtExyQsApqk2evgXatD9Rr1SZhMg2kEdgmMHnbl3tddWYWme3RhuVB/rBVxgmpyMs5p4pGvZ+M1gCnauKNy6e13cZzEYtc/erBEjvmhlXrw9egcqwph8fWXbBpmXElxmmhX685vE/367FYTpGO5pUJc5sJA1E/4zdJP3hL5JWHy28vBzT1ILbfcalCBk8g1r0ieH33ypSTKJ1kIonPDfFf9O9OyGr+aYn9AhH0txj2SdXYf4t6uLmgbRwtbdWOJUS9PxuvpNT2f08/uRcg9RmDovzk0U7RRXrTwAAPs7gL7m13+DvpL4Lv8GV6aOME8QYPAR0yrV8d/v8c9WaMKJDBPvpOxHrq5lcH/eLkz+2aph8Qz9JOFkfVZ+G98PcRBkMsh5gZ2eSqX8Mtzfz/ekL4ZIq8ummNh9Oj7O/vvYj8L7+W6Q0kQLbZpAn//pF4OqLeGYZphGiQS16gEj0OzwpxcjrD/qfSLm2oL/rjW5L+7wxLYSh7PTQf6RuOu6/67ctOtGm9CZBW7FZa3Ro4u6Ch4YD8M6Q+AT3Oa6XQokmKA0KFwgmIe53SbZMG9gE+ZvP8i/lXyUNOvzH7/Bw==";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9CDFDA6C0B79F3ADE0401F0A05996EAE";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;
//          case "221701":
//		if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//				uuid = "_0eb6fd40-606e-4a79-b5c3-8f6cfabf9b93";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertion="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";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B66525BAF67015BE0401F0A059942CA";
//			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
//				uuid = "_81a99d6e-472a-433b-9173-6782e2296710";
//				assertion="nVdZk6LKEn73VxjOo2GzKCrGdEcUq9iigri+3EAoAWVRCgT99afA1radnjlz7kOHXUkuX2Z+JFk/kRn4dA8gBOPEi8KqIrzW/telTJa127DR6tBmo9Vsbhos1Wk22p0uDWmabXcoslZVEEqhEqLEDJPXGk1SdIPsNKiOQXZ6VLNHtV7aXWpdq85hjLBrrPKCrfLAD1GvDPtaS+OwF5nIQ73QDCDqJVZvCtRhD2v2zBum2tvPK8oyYPzmJsmhRxDWiw0t6PvWixUFxE/ii85PG/WmnhOaSRrDj5g2eq192GZZ9pI1X6LYIWiSJAmSJbCOjTznR+2tcjOGthJuo+uZN8Mo9CzT9y5mAUqFiRvZVeA7UewlbvAb1xRBkYXrBsythkW1wh814jNAie4vPX0BGSOzgVyTujnT4RbGMLRgdaYrr7Uff9fBq60RmyHaRnGAns7/DRIMT9CPDtBuoFtmN3R/7/Gbcr39hFZPCS0/Rd4JjgqaHEwLouokhlsvH3oIk89G1bL91RzdGAat/9KSn8QjTgyb+KYygudAlPw//Xrs1dXL3PRT+NZB0onW1+1swKz5zcBqaRqxynwa1JXXEsKj8hXUvdUf52ei3nn1YeQEQOyO6aU924u6sVn6LHHQeXLtLEyuL/S79fqhHyxOyoilF0LWNS+aFORTKhX7SwrpfR05k7W3ObtoFDAVC+6W3L4lHZL2ahjM8jZLcexgU2eEjrlPdJBzRms5dXcrUZh5s0ncFthVNmDJk8VxmS5rpjkQWKoPz+eOWUnzU5R2101WsT3fBdwJtF4/c3rMocjrHZ7LJIv/lwzJCmZi3g98MSm2+PVM4JuqKEJ64XlwnjogUzjg4L8dGHHO/ujuPZnNSA5omgQEnvN34lAFexlQM5FzVX4+V3P+AgacM5pjQ6MC/DWn6mImZCthrml9MXMNW56fN7Kfri/iSAWoNOZdVdTFuaAboqqC6CrLVWEj5zt1qmaKthIq2IEg5oeLLbMJlHPPohVGnTL0asqk6+Ucy6XzMBidNoboq7wq89OjPFU2TUETB0BfLSxaSrHtZRgcospqxj0YDQ5wB6CUkTgmuKjGPlONGT0SdLOUGV9lqiIPVA1lvFZmJVfEbDCfXT5rwXMqbwdiLhpgcq2FZfDSiFwvB8hcMKGqg0xwSuN3MbPHNyCqRmYV/lqroZjpoj4bSaquZCIoZYKY+WhDj9yN7J6sppYPDLB7bAyviQspxM9D/WSdmWPFlCWwCeaU1dRdy2M8cxllzrqbCdpq8B6tFexmBDSR4zSAAZGgSA3XnwNDbs6MDx5Le3C4laIAunFFpaL3/emSk12vOXYmowUjbPediexNmqbtEopv0bvmHigKtN8pVzNtfUXoQuhd2uP32RJ68eqSjBiNantdpqIv0tlSiPyO3V+uZu/1fGVpxngynS0mlzwfHXfdi5/0x1w/ng5UwRmPIJwgq06QpsQZXYHhV/0d5tNWJyFTAY7KASDvHEf0MIG5/u5Kwr6uipi8QOUzmV/w8hTIcl1UOEHTtpJLTSx5ns6okaqIto/LdF4tdb+y5jkBd4o0F+vDipbItQHs0pnWEiVHmzH1wRKutZFvzBOQHebbkKJI+aD1t2rmWGrBAFvJphx+i7hKqoCZOT4MyPx93iapo2b7gykLZs18Su/zseusz3tnvcdNWT28OisD+HPjgWMKptiiohmiroLu9X3LVWXW1H0ryA+bwMoFA/esNI4MTtQljZzlggDerzJkADpHq4u4U3mxtK+AXDUxLU6bpYtW4cgbG2KKSZs+0GW3ocl/5VhBscpXjh15oIFnjolXjolge6wrXYFCTJs/oEXmcLJ41Drz4YA9kNpyuK9wdYlwEs9vjcNuZrzXF9Q567g7bbFgFcHl6+F25TY3CUeaF0uDg31H9vS9ELZb/lkdqhoz8wj/TO7gMUPDykihQrGZXCSCjdM6F6y94HJptuhZMJmmJ2VmviPq7G6OCzbbTfptgojlM3PprE+atIys1fU78jwk78LrGCUeB+yXCXzbvabpZget5HYsvsOKUJXwx9FM/rzHFRLPbmxL1d6hWAZRAsOk9lZYFTtcL8Wbnmf38Jfzema5NtNmWyxFc5wk0m2RbJGURAKyw7Jtrt2+LXtXFE8Q+SjcekWsYp29fqz/DNAKehtoxjCu/cFTUaeqEup4+4hCBI3otSa1BJHiO22uy5NCV+BJpt1qsxJosqzUYUW6Vh1FyTgcx2CbwPhhQ+4+b8g6tLyDB4s1+mOXQAkuxNE8pYlPv5zMlxCmeM+Oi1W31yFJmkBecPBhAZcIIjv14cvBPZRlIdD1l26YFiqlJEu1yh3nt9k9P7sVAuvYXqGAilw4iJsIv1n1yVsivyTc/PZKcHMPUtsrVhlc1ST2rCuSr48+SVKw486QIqUb5rvqs+CLW+I5o3sk++RZd57fb0J4kcarVnnZQLghR/Pl+JKeTulnC2LsnqAI/N8UWineBc9GtIchcXdB/NUafkf9FPku/4ovTdxwmuB3OMB8qZbHf7+DfbHGJUhgnnwn43186yqC//FiZvWsQg+LJ/gni2L7s/Lf+HqIgyEX88cLneJU7M/n3zTYirBbD8+gKH50/p2D74J/Fd7rdceSYGJs0gT+/km1GC6vNdOyojRMFKFWCh4HXokzOR9g71PpFzflBvtxJcnRb68kS3U4tVwYmLW7rvfvyg2v7LwFsRXySiyvtRzfrnHw0HkYsB8An2Zsm6EZDkhthqQY7j5jGZZt0Ty4F/BLJm+/iH+VPNT0mdpv/wA=";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B65694912BBFE26E0401F0A07996B66";
//			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
//				uuid = "_e5bf2d6d-89d8-4153-8711-465ce13f4c3f";
//				assertion="nVdbc6JME773V1juZcpwEhVrk6rhGFRUDh5vvkIYFEVABgT99e+A0Zhsdt99v4uUmaYPT3c/ND0/kX0I6B5ACCapH4V1VXxp/A+ya492226zy7ndZotimWa3Q1HNVpt1IMV4LYfxGnUVoQyqIUrtMH1p0CRFN8lOk+pYZKdHsT2q80xyzKpRn8EEYddY5Zls1ItDEKJeFfalkSVhL7KRj3qhfYColzo9E2jDHtbs2TdMjdefV5RVwOR1m6ZxjyCcZxc6MAicZyc6ED+JTzo/XdQz/U1op1kC32O66KXxbpvn+XPOPEfJhqBJkiRIjsA6LvI3PxqvtZsxdNXQi65nwQ6j0HfswL/YJSgNptvIrYNgEyV+uj38xjVFUGTpugkLp+lQrfBHg/gIUKH7S0+fQCbIbqKtTd2cGdCDCQwdWJ8a6kvjx9918GprJXaIvCg5oC/n/wYJhicYRDF0m+iW2Q3d33v8plyvP6HTU0MnyJB/gqOSJrHtQFSfJNDzi6GPMPlcVK/aXy/QjWHQ+S8t+Uk84sSwiW8qI/obiNL/p1+Pvbp6mdlBBl+9obVDVn/fTqAUR5PpmaXpwXzHngfSSwXhUfkK6t7q9/NXot559W6kMkNWPOYtkiEPO9JbpPbBMlfeoAURp66ThZrldm70k1USS9xx5nu2+WSGbucysFrMeQ8DUswuc81R7AFXA+ZgupovJjZrnvZHqs2p6dtR6i/c5G35dIThYhxzgyW3GDC5zJmEIe7X+zf9PGTZ4YWDOVcs58nR258EYy3XAnlwdA0vViSzJbqkLoXdl4+cHnMo8xrAc5Vk+f+CJTnRTu37QSgnhYdfzxS+aqqKEQsCOJsbkKs82OC/HRjxm/1xu/cVLid5oOsyEAU+2ElDDewVQE0lfqsJs5lWCBfQ5zejGTa0aiBY8Zoh5WK+FGe6/iblW8tVZue1EmSrizTSAKqMha0mGdJMNCxJ00B0lRWauFaKnWZquaovxRp2IEpFfHEVLoVK4Tu0ymomSy9NNlstZlgun4eH0WltSYEmaIpgHhVTXTOiLvWBsZw7tJxh28vwEEe15ZR/MOrHcAegnJM4Jrho1j7XrCk9Eg27klmfZZqq9DUd5YJeZaXUpLw/m14+aiHwmuAepEKywORaC8cS5BG5WvSRPWdDzQC5uKmMB1Lujm9ANJ3Ma8K1VkMpNyRjOpI1Q80lUMlEKQ/Qmh5t18r25DB60bfA7rExgi7N5RA/D42Tc2aPNVuRwfowoxzG2Do+69uLKN+surmoL/uDaKViNyOgSzyvAwyIBGVquP48GPIzdhz7HO3DoSdHB7hNahoVDfanS0F2fWa8mYzmrOjtOxPFnzC2uyXUwKF3zB6oKnQH1Fa3XWOJORz6l/Z4MF1AP1le0hGrU22/y9aMeTZdiFHQcd8Wy+ngqVg6ujWemNP55FIUo+OuewnStzH/lph9TdyMRxBOkPNEkLbMW12RFZZvO8wnzyAhWwMbjQdA2W02ko8JzL/triR8MzQJkxdoQq4Ic0ExgaI8SSov6ronb6mJo8yyKTXSVMkNcJnOy4UR1FYCL+JOkfZ8FS9pmVxZwK2c6S1J3uhT9qm/gCt9FFizFOTxzAspilRi/c3T8o2jlQxw1dzk8VvE1zIVTO1x3CeLwaxNUkfdDfomB6ZMYdL7YrzdrM77zWqPm7J8eHWWFghm1gPHVEyxeU23JEMD3ev7VmjqlDEC51DE64NTiBbuWWUcWbxkyDo5LUQRDK4yZAG6QMuLtNMEqbKvgUKzMS1O68UWLcORP7akDJM2e6DLbk2T/8qxkmK1zxw7CkAHXzkmXTkmAe/4pHZFCrFtIUbzfMMr0lHvzIZ9Lib1xXBf459kYpP6QWscdnNr8DSnznlnu9Pnc04Vt8JT6C23zDrlSfvi6LC/7yi+sRfDdis4a0NNZ6c+EZzJHTzmaFgbqVQoMelFJrgke+IPK/9wuTAtenqYmNlJndoDRJ236+Ocy3eTtzZBJMqZvXRWJ11eRM7y+h35OiTvwusYJR4H7KcJfNu9zGy9g056O5bfYVWsy/jjaKd/3uNKie82vUq1F5fLIEphmDZeS6tyh+tleNPz3R7+cl7PHN9uszTL8zSHv9csL5EtkpJJQLIc16IFcFv2rii+QBSi0PPLWOU6e/1Y/xmgc+itoZ3ApPEHT2Wd6mpo4O0jChG0opeGRLFSpwv4LtVhZIFiaUkmWzQjS4xMdckW06iPonQcjhPgpTB52JC7XzdkAzp+7MNyjX7fJVCKC3G0T1ka0M8n+zmEGd6zk3LV7XVIkiaQf4gDWMIlDpGbBfA53sZVWQh0/aWbtoMqKclRrWrH+W12X5/dCoF1XL9UQGUuPMRNhN+s+uQtkV8SZr69Etzcg8z1y1UGVzVNfOeK5POjD5KU7LgzpEzphvmu+lXwyS3xNaN7JPfkO3ee329CeJHGq1Z12UC4IUf7+ficnU7ZRwsS7J6gCPyfCZ0M74JnK9rDkLi7IP5qDb+j/hL5Lv+ML0u3oZnid/iA+VKvjv9+B/tkjUuQwiL9TiYE+NZVBv/jxczpOaUeFk/wTx4l7kflv/H1EAdDLuePH27KU7k/n3/TYCfCbn08g6Lk0fl3Dr4L/ll4r9cdS4qJsc5S+Psn9XK4vDRsx4myMFXFRiV4HHgVzvQcw96H0i9uqg32/UpSoN9eSRba0HS28GA37rr+vys3/arzDsRWyK+wvDQKfLvGwcPNw4B9B/jdjAVym/3TjP2cyesv4l8lDzX9Su3XfwA=";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B66525BB290015BE0401F0A059942CA";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "_afd452da-6f5f-4c69-aee8-837e7039cfce";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C687F959B4B13ABE0401F0A059957EB";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {
//				uuid = "_089a6e14-06b8-4b6a-ab64-700b7dd3b23c";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C8037347D051C11E0401F0A07996251";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "_bf4fc7e1-34f8-4614-a0bb-9f50d72e580e";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9CDFDA6C0B79F3ADE0401F0A05996EAE";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;

//		case "221500":  // Linked lasp and his/her customer service node
//		case "221501":
//		if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//			    // uuid = "_688aab64-1e79-4787-a76f-3370fbec24be";
////				assertion="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";
//				uuid = "_105eaa8d-9cf5-4a73-add3-22bc3e6e7c9c";
//				assertion="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";
//                    assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79";
//			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
//				uuid = "_3811cbd0-1664-4f37-8320-a0c8e16daa8f";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B7969EE9EA1770CE0401F0A079930AA";
//			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
//				uuid = "_5e960aee-6a96-4ba0-be44-f0e4a3e2a7c1";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B76DB4774834457E0401F0A05992F99";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "_f67d6d17-308a-4881-bb57-eb8e91790ba1";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9DD0CB55ED027BCEE0401F0A07993B89";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {	
//				uuid = "_887c776b-3f61-4ac4-bebb-33678fc4f905";
//				assertion="nVfbkqLKEn33KwznscPm4gU1pjuiuEijooJ4fTmBRQkoglIgyNfvAltbnZ7Zs89Dh11JZtbKzEWx6ic29x7bARijMHIDv6yIb5X/tVoc5LjmulrbNJlq3YT16hqtybLW5FobWN+06UalrGAcI8XHkelHbxWWZtgqzVWZpsFwHbbZYeuvTINdVcozFGKSmri80pVyuvd83Cm2favEod8JTOzijm/uEe5EsDMB6qBDPDvmFVPl/ecFZbFh+O5E0aFDUfDVQhB5HnyFwZ76ST34/LRwZ+LavhnFIfrc08Jvlc/YJElek9prENoUS9M0Rbcp4mNh1/5ReS9dg5Gl+JvgshZMP/BdaHpuZuagVBQ5gVUGnh2EbuTsf5OaoRg6T11FKaxCpu7/qFBfGxTo/jLTA8gQm1XsmMw1mY42KEQ+ROWprrxVfvzdBC+xRmj6eBOEe/y0/m+QkH9CXnBAVhVfK7ui+/uM37Tr/SeCHcWHXozdExrmNDmYEOHyOEQbNx24mJDPwuVi/OUUXxmG4H8ZyU/qHieBTX3TGdG1EY7+n3ndz+qSZWZ6MXpXgHZ2LMNrmspyH0yb7XOI48QynMPyrYBw73wBdRv15/qZqDdefQZ9BOmIn8TpIotQKrXhQBFWZrq2l32Hbb6M3ek0Q8JJnxwH3f7A9P2UPnK4t1mj2o7lcNwUN8NWoAfTFrWLSrbq2oMkMwaRJXOcp24+mjt+IeqLOQzmwA9ONGsbhmw2FXHNnBaeJ7BiCwSTrh+1zmoGucF2nJ7YmlnbtkteS9s62dzUNs1xW8Y7RNNvXzXd15DX1Ufnosj8/0WDbotmZN4WQn5SbMjrGaF3VVHEOBMEcJ7YIFF4YJO/LRjy9u7o7Fy5ndA80LQuEAXe20oDFexkwEwl3lGF2UxNhQz0eHs4I4FGCXgrXtWlREyW4kzTPqTEMSx5dl7LXrzKpKEKcBEsOKqkSzNRNyRVBcHFlqriWk636kRNFG0plkgCUUoPmSW3IySnLmSVhjppsMtJI14tZsTePQ/2w9PakDxVUGVhcpQnyromalIP6Ms5ZLsxic0G+0NQWk75u6DeAW0B6iY02RNkqrFLVGPKDkXdLGzGo01V5J6q4UTQiqrkkpT0ZtPsqxcCrwrWXkolA4wvvYCG0B3Sq0UPm/OGr+ogEe0iuC8l1ugKRNXopCRcejWQEl3Sp8OuqiuJBAqbKCUeXrNDZy07J1jT0p4BtveDETRp3vXJc18/wXPjWDLlLljvZwys6Q50G665CBJ71UpEbdnrByuFpBkCTeJ5DRBANMhLI/3nwYCfNUYHt826aLDpBnvkhCWVCfq7U5bSLbc2ssfDeUPc7Lix7I5rpuVQigfZbW0HFAVZfcbRTEtfUrrou1lz1J8ukBsus2jY0Jim22qU9Hk8XYiBx1kfi+W0/5IuoWaMxpPpfJyl6fC4bWVe9DHiP8JJTxXt0RChMYYvFG12eaMlNoTlx5bwaaPTqFECtsoDIG9tW3IJgfmP7YWEH7oqEfICVUhkYS7IEyDLL5LCi5q26TrMGMqzeMoMVUWyPNKm83Khe6WVwItkUrQ5Xx2WbJdeGcAqkml1qWtr08ZLb4FW2tAzZhFIDrONzzC0fNA+NmpiQzVngKUkE568RXwpVsDUHB16dNqfNWnmqFleb9IG01o6YXfpyLFX55292pGhLO9enaUBvJlxxzGFUGxe0gxJV0Hr8r6lqjKt6R7cp4f1HqaiQWZWBAcGL+ldjZ6mogj6Fxs2AJviZSZtVUEq4ksgVU1Ci9N64eClP3RHhhQT0sZ3dNmuWfpfOZZTrPTIsaMANPDMMenCMQlsji9KS2Rwoykc8DyxeVk6atxs0GsfaG0x2JX4ly5lR65XH/mtxOi/zJlzwjlbbT5vK6IjvPibpVNbRzxtZlBDvR0nu/pO9Jt176wOVK0xdSnvTG/RMcGD0lBhfKkWZV2qHcYv/H7l7rOsVmen+/EkPilTs4+Zs7M+ztvJdvzRpKhQPjcybnXSuosAfn5Hng/Jm/FyjFL3B+zDCXzVXpN4vUUwui7z77Ailrvk42hGf9ZxucW1qpvCtXPIxSCOkB9V3vOoXMN1YqL0XKtDvpyXdVtiaIZvic0azXY5npHoOs10aUA32m2GZ8FV7F1QPEEUAn/j5nvlcvbysf4zQLjvrJEZorDyh0x5n8qKrxP1EfgYGQGRsw2O5hihDrh6W2AaoshJXK3G002ebol1qVUpD4No5I9CsIlQeKeQuWeFrCPoHlyUy+hPLYEj0oijeYojj309ma8+ionODnOp2+FomqWwuz94KIdL7QMr9tDrwTkUbaHw5ZetmhAXVrrN0IXG+W11z8+ujSA+lps74LwWHpEhom+kPnMt5Llg9vsrwTU9iC03lzKkq1HowguSx0dfJMnZcWNIXtIV88312fCQlnqu6LaTdXLhjee3mxAR0kRqFZcNTAZyNF+Pr/HpFH+NICTpKYYi/00QjIkWPBvBDvnULQX1VzL8hvpp55v9EV8cOf4kIu/wnvClXCz//Q72EE1aQKRg9J1N8MitK9/8jxcz2IG5HzGPyU8ShNZX57/JdbcPgZyfP65v56tcP59/M2AYkLQuOYOC8D75dwm+2/zReOvXDUtEiLGOI/T7J+X8cHmrmBAGsR8pYqUw3B94Bc7ofECdL6df0hQK9vNKkuLfXkkW6mACHbQ3Kzdf99+dq24xeYhIFHYLLG+VlNyuyea+fXfAfgJ8OGP5ZgO0OV5oi7wksML9GcsBrn1r4EMl77+Yf7Xc9fSZ2u//AA==";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9E101B8D6302F7B1E0401F0A05991B2A";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "_ab770958-1d02-48e0-9215-8fef86c0d2bf";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:A7CF96020A3C1A69E0401F0A05996CA5";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;
////			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//				uuid = "07167646-6ba5-4ea6-b7be-6bb0b6b0a0a4";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79";
//			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
//				uuid = "0a17e176-a563-485f-aa32-05dab065a69e";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B7969EE9EA1770CE0401F0A079930AA";
//			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
//				uuid = "b1ed13c7-3219-4ef3-ab8c-d2ba512df03f";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B76DB4774834457E0401F0A05992F99";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "addabf28-99ed-4739-ba4e-09691aff4aa7";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9DD0CB55ED027BCEE0401F0A07993B89";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {	
//				uuid = "3efee6a8-5517-443c-b7b0-1a5e5e586822";
//				assertion="nVdpc6JaE/7ur7CcjynDoohYk1QdVlFRQVzwy1sIR0BZlEXQX38PGI1mMnPnvpVKJafp5enuh6bPz8QMfLIHkgTGqReFdZl/a7TgFsKO2W1SFEE32+2W1dzQG7xJmBREP91OlyQbdTlJMiiHSWqG6VuDxAmiidNNgtAJutdq9SjylSHpdaO+gHGCPCOVV7xRLwI/THpV1LdGFoe9yEy8pBeaAUx6qdWbAWXUQ5o98wap8f7zCrIKGL+7aXroYZj1akML+r71akUB9hN70vlpJ72Z54RmmsXwI6advDU+bPM8f81br1HsYCSO4xjOYEjHTjznR+O9djOGthxuo+uZM8Mo9CzT9y5mCUqBqRvZdeA7UeylbvAb1wRG4KXrJiyspkW0wx8N7DNAhe4vPT2BjBOzmbgmcXOmoYbFMLRgfa7Jb40ff9XAq6kem2GyjeIg+XL+b4hgeIJ+dIB2M7kldgP39x6/qdb7T2j15NDys8Q7wXHJkoNpwaQ+jeHWK0ZegrhnJ/Wq+/UiuREMWv+lIz+xR5wINvZNZXjPgUn6/7TrsVVXLwvTz+B72p8zxzhcgEV7OB6Ee3OVXvwRPegD662C8Kh8BXXv9Mf5K0/vtPowcoeZGHUYgz7R584YDrbKlKN2/S5kKTt0c+ZM8AuxE7fi7WqlTb25MSyCYrJ3jUVfPxn6uK3Rie7tWlSfUWuD9Wm9E/2CD6Dff6FbG9Jj6GM+SPvG1plaA5+Nbcgqok+EEi4x2Xa1LjpCAJbqUBXb3cByj5MNxIAmG7Bm6ZmeFH1TftGDTjDZ7iB4+8zpMYcyryE8V0mW/68onOHN1LwfuHJQbNHbmcJ3RZb57MJx4DxzQC6zwEG/OzBmnf3R3XsSk+MsUFUR8Bzr74SRAvYSIOYC6yrcYqEU3AUMWGe8QIZ6DfhrVtGEnM8NfqGqfSF3dVtanDeSn60vwlgBSWXMuYqgCQte0wVFAdFVVij8Rip2ykzJZdXga8gBLxSHiy0xKZQKzyJlSplRpDGjsvVqgeTieRSMTxtd8BVOkbjZUZrJmxavCgOgGUuLFDNkexkFh6hmzNkHo8EB7gAUcxzFBBdF3+eKPifHvGZWMv1ZpsjSQFGTnFOrrKSakA8W88tnLThW4exAKAQdTK+1sHROHOPr1SAxl1SoaCDnncp4KOT25AZEUfG8xl1rNRJyTdDmY1HR5FwAlYwXcj/ZkGN3I7knq6UWAx3sHhvDqcJSDNHzUDtZZ+pYMyURbIIFYbU01/Ioz1xFubPu5rxqDIbRWkZuxkAVWFYFCBAOytRQ/VkwYhfU5OAxpAdHWzEKoBvXFCIa7k+XAu96rYkzHS8pfrunp5I3bZm2i8m+Re5aeyDL0B4SrmramoFpfOhdOpPhfAW92LikY0olOl6XqmnLbL7iI5+2+ytjPnwpDEvVJ9PZfDm9FMX4uOte/LQ/YfvxbKDwzmQM4TSxXjDcFFm9y1Oc0d8hPm01HFI14CgsANLOcQQPEZjt764k7GuKgMgLFC6XuCUnzYAkvQgyy6vqVnSJqSUtsjkxVmTB9lGZzsZK82trjuVRp3BzuT4YpIivdWBXztS2IDrqnHoZrOBaHfv6IgX5YbENCQKXDmp/q+SOpZQMsOV8xqK3iK1lMpibk8MAL4aLDk4cVdsfzBgwbxUzcl9MXGd93jvrPWqK8fDqGDrwF/oDx2REsWVN1QVNAd3r+1Yo8ryl+VZQHDaBVfA66lllHOmsoIkqPi94HgyvskQHZJEYF2GncEJlXwOFYiJanDYrNzHCsTfRhQyRNnugy25D4v/KsZJitWeOHTmggq8cE64cE8D2+CJ3eSKhOtwhWeYOKwlHlV6MBswBV1ejfY19ETEn9fz2JOzm+vBlSZxz2t2pyyUj8y73Em4Nt7VJWdy8WCoc7GnJ0/Z82Gn7Z2WkqNTcw/wzvoPHPBnVxjIRCq30ImJMnL2wwdoLLpdWm5wH01l2kufmMCHO7ua4ZPLdtN/BsFg6Uxd6fVLFVWQZ1+/I1yF5F17HKPY4YJ8m8G31mmWbHbTS27H8Dst8XUQfRzP98xpXSjy7ua1Ue4dyF0xSGKaN99KqXOF6GVr0PLuHvpzXMyMQOMF2+U4LJ0WaJQS8jRMiDnCKYQiWBLdd74riC0QuCrdeGatcZq8f6z8DtILeBpoxjBt/8FTWqS6HGto+ojCBevTW+B9O2u1tt0ujLZe0LNumTZwhGUi3qFa7teluOjizZZj2xuo26uMonYSTGGxTGD/syuTXXVmDlnfwYLlQf6wVSYpqcjRPWeqTryfzNYQZ2rjjcunt0ThOYokXHHxYIseCyM58+HpwD1WFsOT6l2yaVlJJbbg1Mz9tJodq6fltul+f3SqDdGyvVEjKjFiIugq/Wf3bt3R+SZv89opwcw8y2yt3G1TmNPasK5LnR5+sKenySRmCoG6Y76p/Z4ozBP6rKfYHRNjXYtwj2SfvIe7tAoN2crS2VfeWBHX0aL4eX7PTKfvsYYzcYwSGYzNoZWitPOvRHobY3QP2Nwv9HfOXuHf5M7osdcNZiqZBgOhWr47/fpl7skYFSGGRfifjfHR9K4P/8YZn9axSD4mn6E8exfZn3b/x9RAHQS4nmRc65ancxM/P7f14TXpWhLx6aJhF8aPv7+y/i/0svJfrDiVFrNhkKfz9k3o5pd4apmVFWZjKfKMSPE7OCnN6PsDep9IvbqpV+ONuU/zuIktgK2U0s1wYmI27rvfvyk2varwFkVXiVVjeGgW6paPgofMwqT8APg1rtkMBhmY5hmcFjuQehzUNaOZewKdM3n8R/yp5qOlXZr//Aw==";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9E101B8D6302F7B1E0401F0A05991B2A";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "b5aebae5-3293-4965-81b3-2bbdef552223";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:A7CF96020A3C1A69E0401F0A05996CA5";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;

//          case "221501":
//		if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//				uuid = "_688aab64-1e79-4787-a76f-3370fbec24be";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79";
//			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
//				uuid = "_3811cbd0-1664-4f37-8320-a0c8e16daa8f";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B7969EE9EA1770CE0401F0A079930AA";
//			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
//				uuid = "_5e960aee-6a96-4ba0-be44-f0e4a3e2a7c1";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B76DB4774834457E0401F0A05992F99";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "_f67d6d17-308a-4881-bb57-eb8e91790ba1";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9DD0CB55ED027BCEE0401F0A07993B89";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {	
//				uuid = "_887c776b-3f61-4ac4-bebb-33678fc4f905";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9E101B8D6302F7B1E0401F0A05991B2A";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "_ab770958-1d02-48e0-9215-8fef86c0d2bf";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79";
//				assertionUserIdFULL="urn:dece:userid:org:dece:A7CF96020A3C1A69E0401F0A05996CA5";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;
//		


		case "441500":  // Primary retailer node.
		     if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
				uuid = "_05bf8789-34a9-43ff-b430-0b26b776a941";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:CE0F1A1CC2F19345E0401F0A07990CC5";
				assertionUserIdFULL="urn:dece:userid:org:dece:CE0F2321D3D05F41E0401F0A07991D0B";
			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
				uuid = "_556749a8-10c2-4181-8220-2f21f596c31a";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:CE0F1A1CC2F19345E0401F0A07990CC5";
				assertionUserIdFULL="urn:dece:userid:org:dece:CE0F8DBCA50CFE59E0401F0A07995CAE";
			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
				uuid = "_3cce3aff-3c12-4619-9a61-1ee75d928857";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:CE0F1A1CC2F19345E0401F0A07990CC5";
				assertionUserIdFULL="urn:dece:userid:org:dece:CE0FA9BFE5F30C65E0401F0A07990DF9";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "_2fb391e8-77ce-4eeb-aefb-597941300598";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C687F959C4B13ABE0401F0A059957EB";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {
//				uuid = "_7d5aaa73-55ff-47ed-b496-f648d6cdedba";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:A7CBDAFAC3D09D4FE0401F0A05995C7C";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "_79c142f8-c331-4f22-a70e-40506eb81bf5";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9D1D45A45534E4E5E0401F0A059975E3";
			} else {
				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
				assert 1 == 2;
			}
			break;	
//			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//				uuid = "49603255-a83a-4b60-9fda-9e0e8c49f662";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B4E7893991CB1C5E0401F0A0599216F";
//			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
//				uuid = "c0ebab51-e3a2-4bb9-992b-8cf531a0c4ee";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B6294BDB283209BE0401F0A07995359";
//			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
//				uuid = "3069c569-b149-4c99-96cb-64f4d6ce520a";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9B630FEB48949993E0401F0A05995D5F";
//			} else if (userID == tP.getPropertyValue("userFull2Org1Name").toString()) {
//				uuid = "9948d9a7-48ff-4b7a-967b-54967c3eba07";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9C687F959C4B13ABE0401F0A059957EB";
//			} else if (userID == tP.getPropertyValue("userStandard2Org1Name").toString()) {
//				uuid = "82cd1a22-09e4-4b8f-ae6c-0f4522697786";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:A7CBDAFAC3D09D4FE0401F0A05995C7C";
//			} else if (userID == tP.getPropertyValue("userBasic2Org1Name").toString()) {
//				uuid = "9214a2e6-40f2-4fc6-9674-3c9897286447";
//				assertion="nVdZk6LKEn73Vxiexw6bRVExpjuiWBsVFcT15QYWxaIIyCLor78Fto729MyZex867Epy+TLzI8n6kZgHn+6DJEFx6oVBXRHeGixNtU0adZpt0qabbRt2mmyn2262INtju3Sv0253G3UlSTKkBElqBulbgyYpqkl2mxRlUK0+2esz7Gur09s06gsUJ9gzVnklG/Xi4AdJv4r61sjioB+aiZf0A/OAkn4K+zOgjvpYs2/eIDXef1xBVgHjdzdNoz5BwFcLQeT78BWGB+IH8aTzw0r6M88JzDSL0WdMK3lrfNrmef6at17D2CFokiQJkiWwjpV4zj+N99rNGFlKYIfXM28GYeBB0/cuZglKRakbWnXgO2Hspe7hN64pgiJL101UwCak2sE/DeJngArdX3p6AhknZjNxTermTEc2ilEAUX2uK2+Nf/6qgVdTIzaDxA7jQ/Ll/L8hQsEJ+WGErGZyS+wG7u89flOt9x8I9pUA+lnindC4ZElkQpTUpzGyvWLkJZh7VlKvul8vkhvBEPxfOvKDeMSJYRPfVEbwHJSk/0+7Hlt19bIw/Qy9j462uJVWw8mqMyThaWWLm0yJGFuT528VhEflK6h7pz/PX3l6p9Wn0daBE5JoR6Bjn5MXLyCTHKXTQ2uVYgqbU2+Zz2JvL9pnVp5Hp/wk6dC3R9lCXaypeeGNFq2de2TCbJ+1lZoCM95crLLDerg4tEfgfAKO2fIv64sRZep0xXOSOy1cdjk70ilqE8d1Znz0hDnvbo97qSdKHwHSbHuw9TeL2uhlzK/UCZtthcthjzPohW8/c3rMocxriM5VkuX/K4ZkBTM17we+HBQ2fjtT9K4qipBdeB6cZw7IFQ44+G8HxpyzP7p7T2ZzkgOaJgGB5/ydOFLBXgbUXORclV8s1IK/gAHnjBfY0KgBf8OpupgL+VpYaNqHmLuGJS/OW9nPNhdxrIKkMuZdVdTFhaAboqqC8CorVGErFzt1puaKthZq2IEgFtHFktkUyYUHaYVRZwy9njHZZrXAcuk8OoxPW0P0VV6V+dlRninblqCJA6Cvl5CWMmx7GR2isLaecw9GgwjtAJJyEscEF9XY56oxp8eCblYy41mmKvJA1ZKc16qs5JqYDxbzy89a8JzKWwexEA0wvdYCGrw0JjerQWIumUDVQS44lfFQzK3JDYiqkXmNv9ZqJOa6qM/HkqoruQgqmSDmfrKlx+5Wdk+wpRUDA+weG8Nr4lIK8PNAP8Ezc6yZsgS2hwUFW7oLPcYzV2HubHq5oK0Hw3CjYDdjoIkcpwEMiARlarj+HBhxC2YSeSztoZEthQfkxjWVCof706Uge15r4kzHS0aw992p7E1bpuUSig/pXWsPFAVZQ8rVTEtfE7oQeJfOZDhfIS9eX9Ixo1Edr8fU9GU2Xwmh37U+Vuv58KVYQ82YTGfz5fRSFOPjrnfx048J9xHPBqrgTMYITRP4QpCmxBk9geHXHzvMJ1snEVMDjsoBIO8cR/QwgbmP3ZWEH7oqYvIClc9lfsnLMyDLL6LCCZpmSy41hfIim1NjVREtH5fpvF7pfm3DcwLuFGkuN9GalsiNAazKmdYWJUebMy+DFdpoY99YpCCPFnZAUaQcaR+2mjtQLRlgKfmMw28RV8sUMDcn0YAshosOSR01yx/MWDBvFTN6X0xcZ3PeO5s9bsr64dVZG8BfGA8cUzDFljXNEHUV9K7vW6Eq85buw0MRbQ+wEAzcs8o4NDhRlzRyXggCGF5liQHoIllfxJ3Ki5V9DRSqiWlx2q7cZB2MvYkhZpi02QNddlua/FeOlRSrPXPsyAMNfOWYeOWYCOzji9ITqITp8FGyzB1OFo9adzEasBGprUb7GvciEU7q+e1J0MuN4cuSOuddd6ctl6wiuPxLYK/d1jblSPMCNTTYd2VP3wtBp+2f1ZGqMXOP8M/kDh3zZFQbK1QgttKLRLBx9sIdNt7hcmm16flhOstOytwcJtQZz9clm++mHx2CiOUzc+luTpq0CuH6+h35OiTvwusYJR4H7NMEvq1es2y7QzC9HcvvsCLUJfxxNNM/r3GlxLOadqXaj8pdMElRkDbeS6tyhetneNHzrD7+cl7PrEAJbQa0GabVFtsiI5JtkpJIQDIs22XE1m3Xu6L4ApEPA9srY5XL7PVj/WeA8NDfIjNGceMPnso61ZVAx9tHGCTICN8a/2G2eMnqtqhOj6W3DNXqMrRpkhTqsNDu0D3LZLYdZFFsCzXq4zCdBJMY2CmKH3Zl+uuurCPoRR4qF+rPtSJJcU2O5ilLffr1ZL4GKMMbd1wuvf0uSdJE4h0iH5XIiUNoZT56jdyoqhCRXH/ppgmTSmoh28z8tJlE1dLz23S/PrtVButYXqmQlBlxCHcVfbP6t2/p/JI2/e0V4eYeZJZX7ja4zGnswSuS50c/WVPS5U4ZkqXoG+a76lfBk1via0b3SNbJg3fi3y9GeLHGu1d1+UhwW47m6/E1O52yn42IsXuCIkhihmCGd8OzEe5RQNw9EH+zld8xf4l7lz+jy1I3mKX4lT5gztSr47/fyJ6scQFSVKTfyXgf38HK4H+8psE+LPWweIp/8jC2ftb9G18PcTDkchx5gVOeynX6/NzeT673YYi9engihfGj7+/sv4v9LLyX6w4lxazYZin6/ZN6OWreGiaEYRakitCoBI/jr8KcniPU/6n0i5tqn/28oBS/u41SxEodzaCLDmbjruv9u3LTqxoP8bTB+hWWt0aBr9o4eOA8jNtPgE8Tl2uL3R7bYlkKcBT/NHFpqiPdC/iUyfsv4l8lDzX9yuz3/wI=";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F";
//				assertionUserIdFULL="urn:dece:userid:org:dece:9D1D45A45534E4E5E0401F0A059975E3";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;
//		case "5440":   // Node role nodeID
//			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
//				uuid = "23bb46c7-37b2-4f8e-93e6-9aca3f85fb39";
//				assertion="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";
//				assertionAccountIdFULL="urn:dece:accountid:org:dece:A7D3704DE2DBB149E0401F0A05992C66";
//				assertionUserIdFULL="urn:dece:userid:org:dece:A7D3704DE2DDB149E0401F0A05992C66";
//			} else {
//				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
//				assert 1 == 2;
//			}
//			break;
          case "5440":   // Node role nodeID
			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
				uuid = "_c582e669-9f85-463f-b216-4a766e439a0f";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:A7D3704DE2DBB149E0401F0A05992C66";
				assertionUserIdFULL="urn:dece:userid:org:dece:A7D3704DE2DDB149E0401F0A05992C66";
			} else {
				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
				assert 1 == 2;
			}
			break;
		case "5480":   // Node role Portal
		case "5481":
			if (userID == tP.getPropertyValue("userFull1Org1Name").toString()) {
				uuid = "c94e52a8-a532-4450-afdc-959031e7feb5";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:A8A874EEB244D14EE0401F0A07990FBA";
				assertionUserIdFULL="urn:dece:userid:org:dece:A8A874EEB246D14EE0401F0A07990FBA";
			} else if (userID == tP.getPropertyValue("userStandard1Org1Name").toString()) {
				uuid = "8600b7d6-a9b4-4ecd-9426-f153ace57cce";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:A8A874EEB244D14EE0401F0A07990FBA";
				assertionUserIdFULL="urn:dece:userid:org:dece:A8A8758570162DA4E0401F0A05991AED";
			} else if (userID == tP.getPropertyValue("userBasic1Org1Name").toString()) {
				uuid = "3b7eac4f-7db3-48a6-8137-d4ae1c34744d";
				assertion="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";
				assertionAccountIdFULL="urn:dece:accountid:org:dece:A8A874EEB244D14EE0401F0A07990FBA";
				assertionUserIdFULL="urn:dece:userid:org:dece:A8A874EEB259D14EE0401F0A07990FBA";
			} else {
				log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
				assert 1 == 2;
			}
			break;
		default:
			log.info "ERROR - NodeID supplied is not configured!";
			assert 1 == 2;
			break;
	}
}

/*
*  Get the account's rightslocker
*/
try {
	dbAcct = new dbUtils.dbAccount(log,tP.getPropertyValue("targetSystem"));
}
catch(Throwable e) {
	log.info "ERROR - dbUtils.dbAccount - $e";
	assert 1 == 2;
}
finally {
	try {
		rightslocker = dbAcct.accountGetRightsLockerId(acctoid);

		log.info "rightslocker: $rightslocker";
	}
	catch(Throwable e) {
		log.info "ERROR - dbAcct.accountGetRightsLockerId - $e";
		assert 1 == 2;
	}
	finally {
		assert rightslocker.length() > 0;
     }
}
/*
*  If we are here then we lived.  Now we will populate all the other 
*  generic values everyone gets.
*/
callTC.setPropertyValue("accountoid",acctoid);
callTC.setPropertyValue("useroid",useroid)
callTC.setPropertyValue("assertId",uuid);
callTC.setPropertyValue("assertionUUID",uuid);
callTC.setPropertyValue("assertionAccountIdFULL",assertionAccountIdFULL);
callTC.setPropertyValue("assertionUserIdFULL",assertionUserIdFULL);
//callTC.setPropertyValue("policyCreator",assertionUserIdFULL);
callTC.setPropertyValue("assert",assertion);
callTC.setPropertyValue("rightslocker",rightslocker);
callTC.setPropertyValue("rightslockerFULL", rturn + rightslocker);

lastColon = assertionAccountIdFULL.lastIndexOf(':');
callTC.setPropertyValue("assertionAccountId",assertionAccountIdFULL.substring(lastColon + 1));
lastColon = assertionUserIdFULL.lastIndexOf(':');
callTC.setPropertyValue("assertionUserId",assertionUserIdFULL.substring(lastColon + 1));
</script></con:config></con:testStep><con:properties><con:property><con:name>tName</con:name><con:value>RightsTokenCreate API</con:value></con:property><con:property><con:name>sName</con:name><con:value>Test Cases Containing APIs</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>441500</con:value></con:property><con:property><con:name>username</con:name><con:value>streamcreatefau</con:value></con:property><con:property><con:name>synced</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77332</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Authorization Information Extraction via STS" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Establish Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodetype",null);
tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("username",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("tokentype",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("nodeaccountid",null);
tC.setPropertyValue("nodeuserid",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("assert",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properities"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("tokentype",callTC.getPropertyValue("tokentype"));
tC.setPropertyValue("expectErrTypeSTS",callTC.getPropertyValue("expectErrTypeSTS"));


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract OID level User/Account Information"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status;

def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

a = new dbUtils.dbUtils(log,tP.getPropertyValue("targetSystem").toString());


String nodeid = tC.getPropertyValue("nodeid").toString();
String uname = tC.getPropertyValue("username").toString();
String sys = tP.getPropertyValue("targetSystem");
String results = null;
String accountoid = null;
String useroid = null;
String nodeUser = null;
String nodeAccount = null;
String userRowId = null;
String acctRowId = null;
String sql = """select to_char(rawtohex(a.ACCOUNT_OID)) ACCOUNT_OID, to_char(rawtohex(a.USER_OID)) USER_OID, 
to_char(rawtohex(b.NODE_USER_ID)) NODE_USER_ID, to_char(rawtohex(c.NODE_ACCOUNT_ID)) NODE_ACCOUNT_ID, 
to_char(rawtohex(b.ROW_OID)) ROW_OID, to_char(rawtohex(c.ROW_OID)) ROW_OID
from 
   ACCOUNT_USER a, NODE_USER b, NODE_ACCOUNT c
where 
   a.USERNAME = '$uname'
   AND
   a.USER_OID = b.USER_OID
   AND
   a.ACCOUNT_OID = c.ACCOUNT_OID
   AND
   b.NODE_OID = c.NODE_OID 
   AND 
   b.NODE_OID = '$nodeid'""";

results = a.SelectFromDB(sql,sys);
log.info results;

/*
*  If zero length, no need to continue;
*/
assert results.length() > 0;

try {
	def myXML = new XmlSlurper().parseText(results);

	accountoid = myXML.ResultSet.Row[0].ACCOUNT_OID.text();
	useroid = myXML.ResultSet.Row[0].USER_OID.text();
	nodeUser = myXML.ResultSet.Row[0].NODE_USER_ID.text();
	nodeAccount = myXML.ResultSet.Row[0].NODE_ACCOUNT_ID.text();
	userRowId = myXML.ResultSet.Row[0].ROW_OID[0].text();
	acctRowId = myXML.ResultSet.Row[0].ROW_OID[1].text();
}
catch(Throwable e) {
	log.info e; 
	assert 1 == 2;
}
finally {
	log.info "accountoid[$accountoid]";
	log.info "useroid[$useroid]";
	log.info "nodeUser[$nodeUser]";
	log.info "nodeAccount[$nodeAccount]";
	log.info "userRowId[$userRowId]";
	log.info "acctRowId[$acctRowId]";

	tC.setPropertyValue("accountoid", accountoid);
	tC.setPropertyValue("useroid", useroid);
	tC.setPropertyValue("userrowid", userRowId);
	tC.setPropertyValue("accountrowid", acctRowId);
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract and Update current ACCOUNT_USER.CREATED_BY_NODE_ID"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def dbUser;
def createdby;

tC.setPropertyValue("orginialCreatedBy", null);

try {
	dbUser = new dbUtils.dbUser(log,tP.getPropertyValue("targetSystem"));
}
catch (Throwable e) {
	log.info "ERROR - dbUtils.dbUser - $e";
	assert 1 == 2;
}
finally {
	try {
		createdby = dbUser.userGetCreatedByNode(tC.getPropertyValue("useroid").toString());
	}
	catch (Throwable e) {
		log.info "ERROR - dbUser.userGetCreatedByNode - $e";
		assert 1 == 2;
	}
	finally {
		if (createdby.length() == 0) {
			/*
			*  CREATE_BY_NODE_OID is null.  So we will react accordingly.
			*/
			createdby = "null";
		}
	}
}

tC.setPropertyValue("orginialCreatedBy", createdby);

/*
*  Update the user's CREATED_BY_NODE_OID for STS
*/

</script></con:config></con:testStep><con:testStep type="groovy" name="Establish whether login is necessary for node/user combo"><con:settings/><con:config><script>def tC    = testRunner.getTestCase();
def tS    = tC.getTestSuite();
def tP    = tS.getProject();
def today = new Date();

String node      = tC.getPropertyValue("nodeid");
String user      = tC.getPropertyValue("username");
String propAssertion  = node + "_" + user + "_assertion";
String propAssertUUID = node + "_" + user + "_assertUUID";
String propUser       = node + "_" + user;
String propAccountoid = node + "_" + user + "_accountoid";
String propUseroid    = node + "_" + user + "_accountoid";
String propassertionAccountId = node + "_" + user + "_assertionAccountId";
String propassertionAccountIdFULL = node + "_" + user + "_assertionAccountIdFULL";
String propassertionUserId = node + "_" + user + "_assertionUserId";
String propassertionUserIdFULL = node + "_" + user + "_assertionUserIdFULL";
String prop      = tC.getPropertyValue(propUser);
String asstuuid  = tC.getPropertyValue(propAssertUUID);
String assbinary = tC.getPropertyValue(propAssertion);
String assAccountId = tC.getPropertyValue(propAssertion);
String assUserId = tC.getPropertyValue(propassertionUserId);
String assAccountIdFULL = tC.getPropertyValue(propassertionAccountIdFULL);
String assUserIdFULL = tC.getPropertyValue(propassertionUserIdFULL);
String tday = String.format('%tY/%&lt;tm/%&lt;td',today);

this.log.info "Date[$tday] - prop[$prop] - asstuuid[$asstuuid] - assbinary[$assbinary]";
this.log.info "propAssertion[$propAssertion] - propAssertUUID[$propAssertUUID] - propUser[$propUser]";

if (prop == null) {
	tC.setPropertyValue("doSTS","true");
	tC.setPropertyValue(propUser,tday);
	tC.setPropertyValue(propAssertUUID,null);
	tC.setPropertyValue(propAssertion,null);
	tC.setPropertyValue(propAccountoid,null);
	tC.setPropertyValue(propUseroid,null);
	tC.setPropertyValue(propassertionAccountId,null);
	tC.setPropertyValue(propassertionUserId,null);
	tC.setPropertyValue(propassertionAccountIdFULL,null);
	tC.setPropertyValue(propassertionUserIdFULL,null);
	} else if (prop != tday) {
	tC.setPropertyValue("doSTS","true");
	tC.setPropertyValue(propUser,tday);
	tC.setPropertyValue(propAssertUUID,null);
	tC.setPropertyValue(propAssertion,null);
	tC.setPropertyValue(propAccountoid,null);
	tC.setPropertyValue(propUseroid,null);
	tC.setPropertyValue(propassertionAccountId,null);
	tC.setPropertyValue(propassertionUserId,null);
	tC.setPropertyValue(propassertionAccountIdFULL,null);
	tC.setPropertyValue(propassertionUserIdFULL,null);
	tC.setPropertyValue("nodeuserid",null);
} else {
	// Check the UUID property
	if (asstuuid == null || asstuuid == "") {
		log.info "assertionUUID is null/empty";
		tC.setPropertyValue("doSTS","true");
		tC.setPropertyValue(propAssertion,null);
		tC.setPropertyValue(propAssertUUID,null);
		tC.setPropertyValue(propAccountoid,null);
		tC.setPropertyValue(propUseroid,null);
		tC.setPropertyValue(propassertionAccountId,null);
		tC.setPropertyValue(propassertionUserId,null);
		tC.setPropertyValue(propassertionAccountIdFULL,null);
		tC.setPropertyValue(propassertionUserIdFULL,null);
	// Check the assertion binary property
	} else if (assbinary == null || assbinary == "") {
		tC.setPropertyValue("doSTS","true");
		tC.setPropertyValue(propAssertion,null);
		tC.setPropertyValue(propAssertUUID,null);
		tC.setPropertyValue(propAccountoid,null);
		tC.setPropertyValue(propUseroid,null);
		tC.setPropertyValue(propassertionAccountId,null);
		tC.setPropertyValue(propassertionUserId,null);
		tC.setPropertyValue(propassertionAccountIdFULL,null);
		tC.setPropertyValue(propassertionUserIdFULL,null);
	} else {
		int lastSlash = assUserIdFULL.lastIndexOf(':');
		
		tC.setPropertyValue("doSTS","false");
		tC.setPropertyValue("assertionUUID",asstuuid);
		tC.setPropertyValue("assert",assbinary);
		tC.setPropertyValue("accountoid",propAccountoid);
		tC.setPropertyValue("useroid", propUseroid);
		tC.setPropertyValue("assertionAccountId",assAccountId);
		tC.setPropertyValue("assertionUserId",assUserId);
		tC.setPropertyValue("assertionAccountIdFULL",assAccountIdFULL);
		tC.setPropertyValue("assertionUserIdFULL",assUserIdFULL);
		tC.setPropertyValue("nodeuserid",assUserIdFULL.substring(lastSlash + 1));
	}
}
log.info "doSTS is " + tC.getPropertyValue("doSTS");
</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

String node = tC.getPropertyValue("nodeid");
String user = tC.getPropertyValue("username");
String propAssertion  = node + "_" + user + "_assertion";
String propAssertUUID = node + "_" + user + "_assertUUID";
String propUser = node + "_" + user;

log.info "propUser[$propUser] - propAssertion[$propAssertion] - propAssertUUID[$propAssertUUID]";

def doSTS = tC.getPropertyValue("doSTS");

if (doSTS == "true") {
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("STS API")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	if (runnerTC.status != Status.FINISHED) {
		tC.setPropertyValue(propUser,null);
		tC.setPropertyValue(propAssertUUID,null);
		tC.setPropertyValue(propAssertion,null);
	} 

	assert runnerTC.status == Status.FINISHED;
}


</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS GET"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def doSTS = tC.getPropertyValue("doSTS");

String node = tC.getPropertyValue("nodeid");
String user = tC.getPropertyValue("username");
String propassertionAccountId = node + "_" + user + "_assertionAccountId";
String propassertionAccountIdFULL = node + "_" + user + "_assertionAccountIdFULL";
String propassertionUserId = node + "_" + user + "_assertionUserId";
String propassertionUserIdFULL = node + "_" + user + "_assertionUserIdFULL";

if (doSTS == "true") {
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("STS GET API")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
	
	tC.setPropertyValue(propassertionAccountId,tC.getPropertyValue("assertionAccountId"));
	tC.setPropertyValue(propassertionAccountIdFULL,tC.getPropertyValue("assertionAccountIdFULL"));
	tC.setPropertyValue(propassertionUserId,tC.getPropertyValue("assertionUserId"));
	tC.setPropertyValue(propassertionUserIdFULL,tC.getPropertyValue("assertionUserIdFULL"));
} 


</script></con:config></con:testStep><con:testStep type="groovy" name="Store assertionUID for the node/user"><con:settings/><con:config><script>def tC    = testRunner.getTestCase();
def tS    = tC.getTestSuite();
def tP    = tS.getProject();
def today = new Date();

String node = tC.getPropertyValue("nodeid");
String user = tC.getPropertyValue("username");
String prop = tC.getPropertyValue(node + "_" + user);
String asst = tC.getPropertyValue(node + "_" + user + "_assertUUID");
String tday = String.format('%tY/%&lt;tm/%&lt;td',today);

this.log.info "Date[$tday] - prop[$prop] - asst[$asst]";

if (prop == tday) {
	tC.setPropertyValue(node + "_" + user + "_assertUUID", tC.getPropertyValue("assertionUUID"));
	tC.setPropertyValue(node + "_" + user + "_assertion", tC.getPropertyValue("assert"));
} else {
	tC.setPropertyValue(node + "_" + user,null)
	tC.setPropertyValue(node + "_" + user + "_assertUUID",null);
	tC.setPropertyValue(node + "_" + user + "_assertion",null);
}
</script></con:config></con:testStep><con:testStep type="jdbc" name="Extract ACCOUNT/ACCOUNT_USER Information" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${#Project#JDBCDriver}</con:driver><con:connectionString>${#Project#JDBCConnStr}</con:connectionString><con:password/><con:query>select a.ACCOUNT_OID, a.USER_OID, b.NODE_USER_ID, c.NODE_ACCOUNT_ID, b.ROW_OID, c.ROW_OID
from 
   ACCOUNT_USER a, NODE_USER b, NODE_ACCOUNT c
where 
   a.USERNAME = :uname
   AND
   a.USER_OID = b.USER_OID
   AND
   a.ACCOUNT_OID = c.ACCOUNT_OID
   AND
   b.NODE_OID = c.NODE_OID 
   AND 
   b.NODE_OID = :nodeid
</con:query><con:assertion type="XPath Match"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:properties><con:property><con:name>uname</con:name><con:value>${#TestCase#username}</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>${#TestCase#nodeid}</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Extract and Store the ACCOUNT.ACCOUNT_OID lockerId"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

String node = tC.getPropertyValue("nodeid");
String user = tC.getPropertyValue("username");
String propAccountoid = node + "_" + user + "_accountoid";
String propUseroid = node + "_" + user + "_useroid";

tC.setPropertyValue(propAccountoid,tC.getPropertyValue("accountoid"));
tC.setPropertyValue(propUseroid,tC.getPropertyValue("useroid"));

a = new dbUtils.dbAccount(log,tP.getPropertyValue("targetSystem"));

def x = a.accountGetRightsLockerId(tC.getPropertyValue("accountoid"));

this.log.info "x[$x]";

tC.setPropertyValue("rightslocker",tP.getPropertyValue("urnLocker") + x);


</script></con:config></con:testStep><con:testStep type="groovy" name="Setup base node-level information based on calling Node type"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def baseNodeType = tC.getPropertyValue("nodetype");

//
//  Establish project-defined properties at the test case
//  level
//
tC.setPropertyValue("cid",tP.getPropertyValue("cid"));
tC.setPropertyValue("alid",tP.getPropertyValue("alid"));
tC.setPropertyValue("deceorgid",tP.getPropertyValue("deceorgid"));

if (tP.getPropertyValue("targetPort") == "443") {
	tC.setPropertyValue("targetURL",tP.getPropertyValue("targetHost"));
	tP.setPropertyValue("targetURL",tP.getPropertyValue("targetHost"));
} else {
	tC.setPropertyValue("targetURL",tP.getPropertyValue("targetHost") + ":" + tP.getPropertyValue("targetPort"));
	tP.setPropertyValue("targetURL",tP.getPropertyValue("targetHost") + ":" + tP.getPropertyValue("targetPort"));
}
//
//  Establish the basic nodeaccountid, nodeuserid, etc.. by 
//  nodetype
tC.setPropertyValue("assert",tC.getPropertyValue("assert"));
tC.setPropertyValue("assertId",tC.getPropertyValue("assertId"));
tC.setPropertyValue("nodeaccountid",tC.getPropertyValue("assertionAccountId"));
tC.setPropertyValue("nodeuserid",tC.getPropertyValue("assertionUserId"));

</script></con:config></con:testStep><con:testStep type="groovy" name="Promote variables to calling TestCase"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def toTCName = tC.getPropertyValue("tName");
def toTSName = tC.getPropertyValue("sName")

String usernodeConcat = tC.getPropertyValue("nodeid") + "_" + tC.getPropertyValue("username");
String usernodeUUIDConcat = tC.getPropertyValue("nodeid") + "_" + tC.getPropertyValue("username") +	"_assertUUID";

//
//  Transfer all the properites created in this test case
//  to the calling testcase.
//
if (toTCName != "" &amp;&amp; toTSName != "") {
	def toTC = testRunner.testCase.testSuite.project.getTestSuiteByName(toTSName).getTestCaseByName(toTCName);

	Map testCasePropertiesMap = tC.getProperties();
	Set testCasePropertiesKeySet = testCasePropertiesMap.keySet();
	Iterator iter = testCasePropertiesKeySet.iterator();
	
	while(iter.hasNext()){
		String testCasePropertyKey = (String)iter.next();

		switch (testCasePropertyKey) {
			case "assert":
			case "assertionAccountId":
			case "assertionAccountIdFULL":
			case "assertionUserId":
			case "assertionUserIdFULL":
			case "assertionUUID":
			case "cid":
			case "deceorgid":
			case "rightslocker":
			case "targetURL":
			case "useroid":
			case "accountoid":
			case "nodeaccountid":
			case "nodeuserid":
					toTC.setPropertyValue(testCasePropertyKey,tC.getPropertyValue(testCasePropertyKey));	
			break;
		}
	}
}</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Copy of TC_DECE_11005 - StreamCreate - DLP - STS-based Stream Create</con:value></con:property><con:property><con:name>sName</con:name><con:value>Dynamic LASP Test Cases</con:value></con:property><con:property><con:name>nodetype</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value>221700</con:value></con:property><con:property><con:name>username</con:name><con:value>pjgorg1full1</con:value></con:property><con:property><con:name>password</con:name><con:value>testing</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeaccountid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeuserid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>accountoid</con:name><con:value>0900</con:value></con:property><con:property><con:name>useroid</con:name><con:value>0600</con:value></con:property><con:property><con:name>userrowoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>accountrowoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>orginalCreatedBy</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>userrowid</con:name><con:value>9B66525BAF68015BE0401F0A059942CA</con:value></con:property><con:property><con:name>accountrowid</con:name><con:value>9B66525BAF66015BE0401F0A059942CA</con:value></con:property><con:property><con:name>orginialCreatedBy</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Authorization Information Extraction via STS OLD" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Establish Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodetype",null);
tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("username",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("tokentype",null);
tC.setPropertyValue("expectErrTypeSTS",null);
tC.setPropertyValue("expectErrTypeSTSGet",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("nodeaccountid",null);
tC.setPropertyValue("nodeuserid",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properities"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("tokentype",callTC.getPropertyValue("tokentype"));
tC.setPropertyValue("expectErrTypeSTS",callTC.getPropertyValue("expectErrTypeSTS"));


</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("STS API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;


</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS GET"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("STS GET API")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;


</script></con:config></con:testStep><con:testStep type="jdbc" name="Extract ACCOUNT/ACCOUNT_USER Information"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${#Project#JDBCDriver}</con:driver><con:connectionString>${#Project#JDBCConnStr}</con:connectionString><con:password/><con:query>select a.ACCOUNT_OID, a.USER_OID, b.NODE_USER_ID, c.NODE_ACCOUNT_ID, b.ROW_OID, c.ROW_OID
from 
   ACCOUNT_USER a, NODE_USER b, NODE_ACCOUNT c
where 
   a.USERNAME = :uname
   AND
   a.USER_OID = b.USER_OID
   AND
   a.ACCOUNT_OID = c.ACCOUNT_OID
   AND
   b.NODE_OID = c.NODE_OID 
   AND 
   b.NODE_OID = :nodeid
</con:query><con:assertion type="XPath Match"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:properties><con:property><con:name>uname</con:name><con:value>${#TestCase#username}</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>${#TestCase#nodeid}</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="LLP TestCase-Level Property Transfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" entitize="false" transferToAll="false"><con:name>accountoid</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/ACCOUNT_OID[1]</con:sourcePath><con:targetType>accountoid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" transferToAll="false" entitize="false" ignoreEmpty="false"><con:name>useroid</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/USER_OID[1]</con:sourcePath><con:targetType>useroid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Setup base node-level information based on calling Node type"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def baseNodeType = tC.getPropertyValue("nodetype");

//
//  Establish project-defined properties at the test case
//  level
//
tC.setPropertyValue("cid",tP.getPropertyValue("cid"));
tC.setPropertyValue("alid",tP.getPropertyValue("alid"));
tC.setPropertyValue("deceorgid",tP.getPropertyValue("deceorgid"));

if (tP.getPropertyValue("targetPort") == "443") {
	tC.setPropertyValue("targetURL",tP.getPropertyValue("targetHost"));
	tP.setPropertyValue("targetURL",tP.getPropertyValue("targetHost"));
} else {
	tC.setPropertyValue("targetURL",tP.getPropertyValue("targetHost") + ":" + tP.getPropertyValue("targetPort"));
	tP.setPropertyValue("targetURL",tP.getPropertyValue("targetHost") + ":" + tP.getPropertyValue("targetPort"));
}
//
//  Establish the basic nodeaccountid, nodeuserid, etc.. by 
//  nodetype
tC.setPropertyValue("assert",tC.getPropertyValue("assert"));
tC.setPropertyValue("assertId",tC.getPropertyValue("assertId"));
tC.setPropertyValue("nodeaccountid",tC.getPropertyValue("assertionAccountId"));
tC.setPropertyValue("nodeuserid",tC.getPropertyValue("assertionUserId"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Promote variables to calling TestCase"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def toTCName = tC.getPropertyValue("tName");
def toTSName = tC.getPropertyValue("sName")

//
//  Transfer all the properites created in this test case
//  to the calling testcase.
//
if (toTCName != "" &amp;&amp; toTSName != "") {
	def toTC = testRunner.testCase.testSuite.project.getTestSuiteByName(toTSName).getTestCaseByName(toTCName);

	Map testCasePropertiesMap = tC.getProperties();
	Set testCasePropertiesKeySet = testCasePropertiesMap.keySet();
	Iterator iter = testCasePropertiesKeySet.iterator();
	while(iter.hasNext()){
		String testCasePropertyKey = (String)iter.next();

		switch (testCasePropertyKey) {
			case "synced":
			case "nodetype":
			case "assertionAccountId":
			case "assertionUserId":
			case "expectErrTypeSTS":
			case "expectErrTypeSTSGet":
			case "username":
			case "password":
			case "tName":
			case "sName":
			break;
			default:
				toTC.setPropertyValue(testCasePropertyKey,tC.getPropertyValue(testCasePropertyKey));	
			break;
		}
	}
}</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>nVdZc6pKEH73V1ieR8uwKCpWkqphkaCigrjgGw4joCzKIuivvwNGY3JylnseUmaaXr7p/qan5zk2fY/ugThGUeKGQVUWXmptGpptposaWwu2Gi1EWo1Np8M2sJjqoC3bpDtMrSrHcYrkIE7MIHmp0SRFNUiqQbd1qtmjuz2q+8R2mHWtukBRjD1jlSeyVs19L4h7ZdSXWhoFvdCM3bgXmD6KewnszYAy6mHNnnmDVHt9voIsA0avTpIcegQBnywEkefBJxj6xDPxSefZinsz1w7MJI3Qe0wrfqm922ZZ9pQ1n8LIJmiSJAmSJbCOFbv2j9pr5WaMLDnYhtc1bwZh4ELTcy9mAUpBiRNaVeDZYeQmjv8L1xRBkYXrBsphA1Kt4EeN+AhQovtLT59ARrHZiB2TujnT0BZFKICoOtfkl9qPvyrg1VSPzCDehpEff1n/P0QoOCEvPCCrEd82dgP39x6/ydbrM4I9OYBeGrsnNC5YcjAhiqvTCG3dfOTGmHtWXC2rX83jG8EQ/D8VeSYecWLYxDeZEVwbxcm/lOuxVFcvC9NL0evUAZ1Tezd1zgIiAGWouw1CnbFLbrovJYRH5Suoe6Xf1195eqfVu9FR9o9qa7ng0EniYSeKzh3dWEzfFM4w7KHlWDM1uwh5AKZmmPqrpLUZwKaROfNd1+2zui7BXOvK/LAeQK7CHdXNeRH6giLVkZ8tdUaX2PFgOnDqLRs5ctwZrxxfnroad9yJXLa+tN7OK3MpW6y5uoyai9XIGQUboDgHv7JNVjOun0Ab+oEyyTh31n352NPjHop9DdG53GTx/4ohWcFMzPuCLxrFFp/OBL0qsiykF54H55kNMpkDNv7bgTFn74/O3pXYjOSAqvaBwHPeThwpYC8Bai5yjsIvFkrOX8CAs8cLbKhXgLfmFE3MhMwQFqr6JmaObkmL80by0vVFHCsgLo15RxE1cSFouqgoILzKckXYSPlOmSmZrBpCBTsQxPxwsSQ2QVLuQlpmlBlDGzMmXa8WWN4/j/zxaaOLnsIrEj87SjN50xRUcQA0YwnpfoptLyP/EFaMOfdgNDigHUD9jMQxwUXR95miz+mxoJmlTP8sU2RpoKhxxqvlrqSKmA0W88tHLnhO4S1fzEUdTK+5gDrfH5Pr1SA2l0ygaCAT7NJ4KGbW5AZEUcmswl9zNRIzTdTm476iyZkISpkgZl68ocfORnJOsKnmAx3sHgvDq+KyH+DvgXaCZ+ZYMaU+2PgLCjY1B7qMa67CzF53M0E1BsNwLWM3Y6CKHKcCDIgExdZw/jkw4hbM5OCytItG237oIyeqKFQ43J8uOdl1mxN7Ol4ywnbfmUrutGlaDiF7kN4190CWkTWkHNW0NIPQhMC9tCfD+Qq5kXFJxoxKtd0uU9GW6XwlhF7HelsZ82E9N6CqT6az+XJ6yfPxcde9eMnbhHuLZgNFsCdjhKYxrBOk2ef0rsDwxtsO82mrkYipAFvhAJB2ti26mMDc2+5KwjdNETF5gcJnEr/kpRmQpLooc4KqbvsONYXSIp1TY0UWLQ+n6WysNK+y5jkBV4o0l+uDQffJtQ6s0pnaEvu2OmfqgxVaq2NPXyQgOyy2AUWR0kF92yqZDZWCAZaczTh8irhKKoO5OTkMyHy4aJPUUbW8wYwF82Y+o/f5xLHX57293uOiGA9Hx9CBt9AfOCZjii0rqi5qCuhez1uuyPOm5kE/P2x8mAs6rllpHOqcqPVVcp4LAhheZbEO6Dw2LuJO4cXSvgJyxcS0OG1WTmwEY3eiiykmbfpAl92GJv/IsYJilc8cO/JABV85Jl45JoLtsS53BSpm2vwhXmY2J4lHtbMYDdgDqa5G+wpX7xN24nqtSdDN9GF9SZ2zjrNTl0tWFhy+HmwNp7lJONK8QBUN9h3J1fZC0G55Z2WkqMzcJbwzuUPHLB5VxjIViM3k0ifYKK1z/tr1L5dmi57701l6kufmMKbOzua4ZLPd9K1NEJF0Zi6d9Untr0JoXO+Rr03yLry2UeKxwX7qwLfRa5Zudggmt2VxD8tCtY8vRzP5/RhXSFyrsS1Ve4diFowTFCS118KqGOF6KR70XKuHb87rmgVAaHe7ba5Fdbg22RHJFkn1SUAyLNvuNLnbrHdF8QUiHwZbt4hVDLPXy/r3AKHf2yAzQlHtN56KPFXlQMPTRxjESA9faly72WwCju2KJNPnWwzJNQVS6LKA5UlA86BWHYfJJJhEYJug6GFA7nwdkDUE3YOLiin6fZaIE5yIo3lKE496OplPAUrxmB0Vk26PbnWZMgGElfoHiD/g7hYdwjh5OjiHcpj55Ta+frvtGOtYbqEQF6A5hKuFvhnpyRvin3ZGfzv639yD1HKLmQWnL4lceEXy+dMHGwoa3KlAshR5w3xX/WtT+t9NW/9oylIU8++m7Z9Nid+kkPhavXsk6+Q+xL29pPDjAM+P5QMqxiw7mk/Hp/R0SktedUiSJiLsniAJlpghmOL59qyHexQQdw/E37ws7pi/xL3LP6NLEyeYJbgt+fgIVMvln1+Vn6xxAhKUJ9/JeA+/I4vgv31qwh4s9LB4in+yMLI+8v6Nr4c4GHLRUt3ALlbFk+D8ubzvR7cHQ+zVxV01jB59f2f/XezPwnu67lASzIpNmqBff6kW7fKlZkIYpkEiC7VS8NjCS8zJ+YB6H0o/uSln8vdHVh7/8pG1UkYz6CDfrN113T8rN9yy8BBhq9gtsbzU8rhXcD6wH66Md4C/uDWY390an3fy+pP4Z8lDTr8y+/U/</con:value></con:property><con:property><con:name>assertId</con:name><con:value>62ca658e-fdc4-4e0d-b779-2ca17ef93275</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>9AAD6886B415B607E0401F0A0599673B</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value>9AAD6886B417B607E0401F0A0599673B</con:value></con:property><con:property><con:name>expectErrTypeSTS</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeaccountid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9AAD6886B415B607E0401F0A0599673B</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>221700</con:value></con:property><con:property><con:name>nodetype</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeuserid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9AAD6886B417B607E0401F0A0599673B</con:value></con:property><con:property><con:name>orgid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>password</con:value></con:property><con:property><con:name>sName</con:name><con:value>Dynamic LASP Test Cases</con:value></con:property><con:property><con:name>synced</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value></con:property><con:property><con:name>targetURL</con:name><con:value>qa.p.uvvu.com:7002</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_10506 - StreamCreate - FUNC - DLP - StreamRightsRentalExpired - RightsTokenID expired by one year</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>pjgorg1full1</con:value></con:property><con:property><con:name>useroid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0600</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">62ca658e-fdc4-4e0d-b779-2ca17ef93275</con:value></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>cid</con:name><con:value>urn:dece:cid:file:AGAIN_PATS_CID_DONT_TOUCH_1.txt</con:value></con:property><con:property><con:name>alid</con:name><con:value>urn:dece:alid:file:AGAIN_PATS_CID_DONT_TOUCH_1.txt</con:value></con:property><con:property><con:name>deceorgid</con:name><con:value>urn:dece:org:org:dece:1</con:value></con:property><con:property><con:name>accountoid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0900</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:9AAD6886B415B607E0401F0A0599673B</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:9AAD6886B417B607E0401F0A0599673B</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77336</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish High-Level Policies for User/Account/Node" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("policyExists",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for UserLinkConsent"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserLinkConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for UserLinkConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserLinkConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for EnableManageUserConsent"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableManageUserConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for EnableManageUserConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableManageUserConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ManageUserConsent"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ManageUserConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for ManageUserConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:ManageUserConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for EnableUserDataUsageConsentRequired" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for EnableUserDataUsageConsentRequired if necessary" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for EnableUserDataUsageConsent" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for EnableUserDataUsageConsent if necessary" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for UserDataUsageConsent"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserDataUsageConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for UserDataUsageConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserDataUsageConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>221500</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:C9E25FD41A10D76DE0401F0A07996532</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:C9E1BEFA25290915E0401F0A079935C4</con:value></con:property><con:property><con:name>policyExists</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_04750 - StreamCreate - LLPCS - Policy - AllowAdult - US - MMPA - Can create stream that IS_ADULT = 'y' with policy</con:value></con:property><con:property><con:name>sName</con:name><con:value>Link LASP Customer Service Test Cases</con:value></con:property><con:property><con:name>policyClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:policy:UserDataUsageConsent</con:value></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">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</con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyResource</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyCreator</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>PolicyID</con:name><con:value>urn:dece:policyid:org:dece:CE727449C10C6C57E0401F0A07994E6E</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish LockerViewAll" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("policyExists",null);
tC.setPropertyValue("policyClass", "urn:dece:type:policy:LockerViewAllConsent");
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
tC.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
tC.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));

if (tC.getPropertyValue("policyResource") == null || tC.getPropertyValue("policyResource") == "") {
	tC.setPropertyValue("policyResource","urn:dece:rightslockerid:org:dece:0900");
}
if (tC.getPropertyValue("policyCreator") == null || tC.getPropertyValue("policyCreator") == "") {
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
}
if (tC.getPropertyValue("policyRequestEntity") == null || tC.getPropertyValue("policyRequestEntity") == "") {
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
}</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for LockerViewAll"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate LockerViewAll if necessary" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def exists = tC.getPropertyValue("policyExists");

if (exists != "true") {
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}
</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>221500</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:LockerViewAllConsent</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value>urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79</con:value></con:property><con:property><con:name>policyExists</con:name><con:value>true</con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value>urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79</con:value></con:property><con:property><con:name>policyResource</con:name><con:value>urn:dece:type:rating:US:MPAA:G</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>sName</con:name><con:value>Link LASP Customer Service Test Cases</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_04682 - StreamCreate - LLPCS - Policy - BlockUnratedContent - US - MMPA - PG-13 - Nonenforcement of Policy unrated/unknown content blocked</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77340</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish Parental Control Rating" searchProperties="true" id="61ec0d62-3a4c-4644-95c7-c71fbd9b423a"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionUserIdFULL1",null);
tC.setPropertyValue("assertionUserIdFULL2",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assert2",null);
tC.setPropertyValue("policyExists",null);
tC.setPropertyValue("policyClass","urn:dece:type:policy:ParentalControl:RatingPolicy");
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("returnXMLResult","true");
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));
tC.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
tC.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));

if (tC.getPropertyValue("policyCreator") == null || tC.getPropertyValue("policyCreator") == "") {
	tC.getPropertyValue("policyCreator") == tC.getPropertyValue("assertionUserIdFULL1");
}
</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ParentalControl:RatingPolicy"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:RatingPolicy");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:RatingPolicy","UTF-8"));
}

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyDelete for ParentalControl:RatingPolicy if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
	
if (tC.getPropertyValue("policyExists") == "true") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
	def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:RatingPolicy");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:RatingPolicy","UTF-8"));
}

	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for ParentalControl:RatingPolicy"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

//tC.setPropertyValue("policyRequestEntity",tC.getPropertyValue("assertionUserIdFULL"));
//tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
//tC.setPropertyValue("policyResource","urn:dece:type:rating:US:MPAA:G");

	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ParentalControl:RatingPolicy2" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>D0B7FECAB7D27EADE0401F0A07993BF2</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>policyExists</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">false</con:value></con:property><con:property><con:name>policyGetXML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:Policy:PolicyNotFound">
      <dece:Reason Language="en">The policy was not found.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62/User/urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2/Policy/urn:dece:type:policy:ParentalControl:RatingPolicy</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#Policy:PolicyNotFound</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>policyResource</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:rating:us:mpaa:pg-13</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>returnXMLResult</con:name><con:value>true</con:value></con:property><con:property><con:name>sName</con:name><con:value>RTL_P2_TestCases</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_00079_DMRConsume_FUNC_RTL_POST_by_BAU_with_RatingPolicy_Parental_Control_Policy_Negative</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77341</con:value></con:property><con:property><con:name>PolicyID</con:name><con:value>urn:dece:policyid:org:dece:08D4C578A15B1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assert2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>PolicyIDEncoded</con:name><con:value>urn:dece:policyid:org:dece:08D4C578A15B1993E05307991F0A34C2</con:value></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish High-Level Policies for User/Account/Node1" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("policyExists",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for UserLinkConsent" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserLinkConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for UserLinkConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserLinkConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for EnableManageUserConsent" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableManageUserConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for EnableManageUserConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableManageUserConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ManageUserConsent" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ManageUserConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for ManageUserConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:ManageUserConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for EnableUserDataUsageConsentRequired" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for EnableUserDataUsageConsentRequired if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for EnableUserDataUsageConsent" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for EnableUserDataUsageConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for UserDataUsageConsent" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserDataUsageConsent");

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for UserDataUsageConsent if necessary"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

if (tC.getPropertyValue("policyExists") == "false") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:UserDataUsageConsent");
	tC.setPropertyValue("policyRequestEntity",tP.getPropertyValue("urnNode") + tC.getPropertyValue("nodeid"));
	tC.setPropertyValue("policyResource",tC.getPropertyValue("assertionUserIdFULL"));
	tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>221500</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:9B65A97BC9DDEC2CE0401F0A05997A79</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:9B65A97BC9DBEC2CE0401F0A05997A79</con:value></con:property><con:property><con:name>policyExists</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_04650 - StreamCreate - LLP - Policy - Nonenforcement of Policy ParentalControl:RatingPolicy - US - MMPA - G rating - Full User</con:value></con:property><con:property><con:name>sName</con:name><con:value>Link LASP Test Cases</con:value></con:property><con:property><con:name>policyClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbc6rKEn73V1iuR8twUbxVkqrhIkEFBfH6cgphhFEEZUDQX78HjMZkJWuvfR5SZpq+fN390fQ8Y2vvs12AMYxiFAZlRXyp/G9Nw4bNtWCN49hmrdFZ12udNduoNRya5ViLs9sdplJWME6gEuDYCuKXCkszbI1u1dimydBdttFttJ7azeaqUp7BCBPXROWJrpSzvR/gbhH2pZJEQTe0MMLdwNpD3I3t7gSowy7R7Fo3TJXX5yvKImD06sXxoUtR9pMDbej79pMd7qln6pPOs4O7E+QGVpxE8D2mg18q77Zpmj6l9acwcimWpmmK7lBEx8HI/VV5Ld2MoaMEm/B6FqwgDJBt+ehi5aBUGHuhUwa+G0Yo9vY/uGYohs5d12Bm12ymEfyqUB8BCnR/6ekTyAhbNexZzM2ZATcwgoENy1NDean8+rsOXm3NyArwJoz2+Mv5v0GCwQn64QE6NXzL7Ibu7z1+U67XZ2h3lcD2E4xOUMtpcrBsiMvjCG5QNkSYkM/B5aL95QzfGAbt/9KSZ+oRJ4FNfVMZEbkQx/9Pvx57dfUys/wEvkZbBbST6mAu7LWVGJ5G42rTPG+Pszl+KSA8Kl9B3Vv9fv5K1Duv3o3WMhpHvr6duZt+2Fp5mk/Rzo7eTg4dNNLSS1+C9b7fmlxCxsStCCEd708rUZsFaYsZeI1m2jMpwfcuAYpLGzr1JgbV2gD6YtOafNJTZ4SO7SVK7flbvT40m77hLy+nBoOd7VA+SH2sy5PVFMhKnaZSZ1p3Dmk82G3tdmk3eDs2q9q5veQG7A5w2aT98pHTYw55XgN4LpLM/19wdEe0Yut+EPJJsSGvZwxfVUURk4sggPPEBanCA5f8bYHGu7ujt0NyJ6V5oOs9IAq8v5WGKtjJgJlKvKcKs5maCRfQ511tRgzNEvBXvGpIqZguxZmuv0mpZzry7LyW/WR1kTQV4MJY8FTJkGaiYUqqCsKrLFPFtZxt1YmaKvpSLBEHopQdLo7ciaGcIZtVOHXCscsJl6wWMyLvnYd77bQ2JV8VVFmYHOWJsq6LutQHxnJus72E2F6G+0NYWk75B6P+AW4B7KU0iQkuqrlLVXPKaqJhFTLzs0xV5L6q41TQi6zkkpT2Z9PLRy0EXhWcvZRJJhhfa2GbQk+jV4s+tuZcoBogFd3CeCARCtyAqDqdloRrrYZSakjGVOuphpJKoJCJUurjNat5a9k72XU965tg+9gYQZfmvYA8D4yTfeaOJUvugfV+xth1w7MRh6xFmLqrdirqy/4gXCnEjQZ0ied1QADRIE+N1J8HQ37GjQ6owyI43PTCPfSiksqEg93pktFtVB+5Y23OiZtda0zekLrleJTi2+y2vgOKAp0B4+mWYywpQwzQpTkaTBcQRctLrHE600RtrmTMk+lCDP2W87ZYTgfVbGnr5mg8mc7HlyzTjtv2xY/fRvxbNOmrojvSIBxju0rRVo832yInLN+2hE8bg4ZcCbgqD4C8dV0JEQLzb9srCd8MVSLkBaqQysJckCdAlquSwou6vul5zNiWZ8mU0VRFcnxSpvNyYfillcCLpFO0NV8dlmyPXpnAKZzpDann6lOu2l/Ala755iwG6WG2CRiGlg/620ZNXVvNGeAo6YQnbxFfShQwtUaHPp0NZk2aOeqO3590wLSeTdhdNvLc1XnnrnakKcuHV2dpAn9mPnBMIRSbl3RTMlTQvr5vmapM64Zv77PDem9nokl6VhiHJi8ZPZ2eZqIIBlcZNgGb4eVF2qqCVNiXQKZahBan9cLDy0BDI1NKCGmTB7ps1yz9rxzLKVb6zLGjAHTwlWPSlWMS2ByrSltkMNcUDnieurwsHfXWbNjvHGh9MdyV+GqPcmPkN0ZBOzUH1TlzTlveVp/PO4roCdVgs/Tq65inrYutw/6uJSNjJwbNhn9Wh6rOTRHln+ktPKZ4WNIUJpDq8aVHdaKkyu9XaH+51BvsdD+eJCdlag0wc/bWx3kn3Y7fmhQVyWfu0lqd9N4itJfX78jXIXkXXsco9ThgP03g2+41SdZbaMe3Y/4dVsRyj3wcrfjPe1wuQU5tU6h2D/kyiGMYxJXX3Crf4boJ2fSQ0yVfzuu5wzc50GnxQkcUJYEVJLpBMz0a0Fyn0wKtzm3Zu6L4AlEIgw3KY+Xr7PVj/WeA9r67hlYEo8ofPOV1KiuBQbaPMMDQDF8qnbbANrheixXqHNtpiW2Jp0EDNNsNpt2m66BS1sJ4FIwisIlh9LAht75uyAa00QHBfI1+3yVwTApxtE5J7LNPJ+spgAnZs6N81e22aJqlMNoffJjDpfahk/jw6eAdirJQ+PrL1iwbF1K6w9DFjvNjdl+f3QpBdByUK+A8Fx6SJsJvVv36LZHfEq5/eyW4uQeJg/JVhlQ1jpB9RfL50QdJcnbcGZKndMN8V/070w7DcL+bUn9ARH0txj2Sc0IPcW8XFrKDky2tuKdg0suj9XR8Sk6n5KN7EXFPMRT5bwLthKyRZzPcwYC6u6D+aoO/o/4S+S7/jC+JvWASk9d/T6hWLo7/fn37ZE1KEMMs/k4m+OTClgf/453O7tq5HhGPyU8aRs5H5b/x9RCHQM5HFwrc/JSv3ucfGmyHxC0i4yuMHp1/5+C74J+F93rdscSEGOskhj8/Kedz6aVi2XaYBLEiVgrB46wscMbnA+x+KP3mplh+328zGf7xNrNQhxPbg3urctdF/65cQ0XnbUisMCqwvFQycjEnwQP3YTa/A/xhPPN/Gs+fM3n9Tfy75KGmX6n9+g8=</con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyResource</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyCreator</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Remove all Parental Control Policies" searchProperties="true" id="0235bb7b-cd02-4489-b4f2-edf797c24f0a"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionUserIdFULL1",null);
tC.setPropertyValue("assertionUserIdFULL2",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assert2",null);
tC.setPropertyValue("policyExists",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("returnXMLResult","true");
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));



tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));
</script></con:config></con:testStep><con:testStep type="groovy" name="EnableParentalControlInvolvingSteps" disabled="true"><con:settings/><con:config><script>def testSuite = context.testCase.testSuite;
def totalTestCases = testSuite.getTestCases().size();

 for(n in (0..totalTestCases-1))
def policyClass = context.expand( '${#TestCase#policyClass}' )
{   if(policyClass == "urn:dece:type:policy:ParentalControl:RatingPolicy") {
   if(testSuite.getTestCaseAt(n).name == "Policy - Remove all Parental Control Policies"){
   //testSuite.getTestCaseAt(n).setDisabled(false)
	if(testSuite.getTestCaseAt(n).getTestStepByName("PolicyGet for ParentalControl:BlockUnratedContent") || testSuite.getTestCaseAt(n).getTestCaseByName("PolicyDelete for ParentalControl:BlockUnratedContent")){
		testSuite.getTestCaseAt(n).getTestStepByName("PolicyGet for ParentalControl:BlockUnratedContent").setDisabled(true)
		testSuite.getTestCaseAt(n).getTestStepByName("PolicyDelete for ParentalControl:BlockUnratedContent").setDisabled(true)
	}
   
   }
}

}</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ParentalControl:RatingPolicy"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:RatingPolicy");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:RatingPolicy","UTF-8"));
}
def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyDelete for ParentalControl:RatingPolicy"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
	
if (tC.getPropertyValue("policyExists") == "true")
{
tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:RatingPolicy");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:RatingPolicy","UTF-8"));
}
	

	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ParentalControl:BlockUnratedContent"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:BlockUnratedContent");
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:BlockUnratedContent");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:BlockUnratedContent","UTF-8"));
}


def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyDelete for ParentalControl:BlockUnratedContent"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
	
if (tC.getPropertyValue("policyExists") == "true") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:BlockUnratedContent");
	def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:BlockUnratedContent");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:BlockUnratedContent","UTF-8"));
}

	
	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ParentalControl:AllowAdult"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:AllowAdult");
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:AllowAdult");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:AllowAdult","UTF-8"));
}



def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyDelete for ParentalControl:AllowAdult"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
	
if (tC.getPropertyValue("policyExists") == "true") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:AllowAdult");
	def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:AllowAdult");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:AllowAdult","UTF-8"));
}

	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="remove policies" disabled="true"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def useroid = context.expand( '${#TestCase#useroid}' )

a = new dbUtils.dbPolicy(log,tP.getPropertyValue("targetsystem"));
log.info "useroid"+useroid;
a.policyDelete(302,useroid,"deleted")
a.policyDelete(300,useroid,"deleted")
a.policyDelete(304,useroid,"deleted")
</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for ParentalControl:NoPolicyEnforcement"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:NoPolicyEnforcement");
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:NoPolicyEnforcement");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:NoPolicyEnforcement","UTF-8"));
}


def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyDelete for ParentalControl:NoPolicyEnforcement"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
	
if (tC.getPropertyValue("policyExists") == "true") {
	tC.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:NoPolicyEnforcement");
	def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", "urn:dece:type:policy:ParentalControl:NoPolicyEnforcement");
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode("urn:dece:type:policy:ParentalControl:NoPolicyEnforcement","UTF-8"));
}

	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:properties><con:property><con:name>useroid</con:name><con:value>0600</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_00085_DMRConsume_FUNC_RTL_POST_by_BAU_with_NoPolicyEnforcement_Parental_Control_Policy_Negative</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>sName</con:name><con:value>RTL_P2_TestCases</con:value></con:property><con:property><con:name>returnXMLResult</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77342</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>policyResource</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyRequestEntity</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PolicyIDEncoded</con:name><con:value>urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>PolicyID</con:name><con:value>urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>policyGetXML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:PolicyList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Policy PolicyID="urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1">
      <dece:PolicyClass>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</dece:PolicyClass>
      <dece:RequestingEntity>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:role:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreationDate="2014-11-27T09:51:00.000Z" CreatedBy="urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:value></con:property><con:property><con:name>policyExists</con:name><con:value>false</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>D0B7FECAB7D27EADE0401F0A07993BF2</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>1118b9c0-9658-4d95-ba03-b7e57a6ed36c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - General Policy Establishment" searchProperties="true" id="dd2c9652-611b-4d32-b529-410778ebdbce"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("policyExists",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("returnXMLResult","true");
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
tC.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));

if (tC.getPropertyValue("policyCreator") == null || tC.getPropertyValue("policyCreator") == "") {
	tC.getPropertyValue("policyCreator") == tC.getPropertyValue("assertionUserIdFULL1");
}
</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyGet for Policy" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyDelete for Policy if necessary" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
	
if (tC.getPropertyValue("policyExists") == "true") {
	tC.setPropertyValue("policyClass", tC.getPropertyValue("policyClass"));

	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="PolicyCreate for Policy"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def policyClass = context.expand( '${#TestCase#policyClass}' )

def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded", policyClass);
}
else
{
	tC.setPropertyValue("policyClassEncoded", URLEncoder.encode(policyClass,"UTF-8"));
}


	def myTC = tP.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Block unrated content")

	myTC.setPropertyValue("tName",tC.getName());
	myTC.setPropertyValue("sName",tS.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;

</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>policyExists</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyGetXML</con:name><con:value><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2011/08/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Error ErrorID="urn:dece:errorid:org:dece:Policy:PolicyNotFound">
      <Reason Language="en">The supplied policy was not found.</Reason>
      <OriginalRequest>https://qa.p.uvvu.com:7001/rest/$major/$minor/Account/urn:dece:accountid:org:dece:D0A738982B0871D4E0401F0A0799246D/User/urn:dece:userid:org:dece:D0B7FECAB7D27EADE0401F0A07993BF2/Policy/urn:dece:type:policy:ParentalControl:BlockUnratedContent</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/$major/$minor/error/en/ErrorList.html#Policy:PolicyNotFound</ErrorLink>
   </Error>
</ErrorList>]]></con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>policyResource</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:rating:us:mpaa:x</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>returnXMLResult</con:name><con:value>true</con:value></con:property><con:property><con:name>sName</con:name><con:value>RTL_P2_TestCases</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_00085_DMRConsume_FUNC_RTL_POST_by_BAU_with_NoPolicyEnforcement_Parental_Control_Policy_Negative</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77343</con:value></con:property><con:property><con:name>PolicyID</con:name><con:value>urn:dece:policyid:org:dece:D10E11162D271256E0401F0A07991400</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assert2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change a step's script for all Steps in a Suite" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Change a step's script for all Steps in a Suite"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = "Authentication/Permission Test Cases"; 

def oldString = """tC.setPropertyValue("nodeid","221500");""";
def newString = """tC.setPropertyValue("nodeid","221501");""";

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{			
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	testStepList = targetTestCase.getTestStepList();
	testStepCount = targetTestCase.getTestStepCount();
	if(targetTestCase.isDisabled() == false)
	{
		for(j = 0; j &lt;= testStepCount - 1; j++)
		{
			try
			{
				def testStepName = testStepList[j].name;

				//Find if a step contains
				
				targetTestStep = targetTestCase.getTestStepByName(testStepList[j].name);
				//stepScript = testStepList[j].getScript();
				//if (stepScript.contains("QC_ResultExportLevel")) {
					log.info "TC[" + targetTestCase.name + "] STEP[$testStepName]";
				//}	
				
				if (testStepName == "Establish Requesting Entity Environment") {
					log.info "Hit!";
					targetTestStep = targetTestCase.getTestStepByName(testStepList[j].name);
					//stepScript = testStepList[j].getScript();
					//stepScript = stepScript.replace(oldString, newString);
					//targetTestStep.setScript(stepScript);		

					/*
					*  Delete a step
					*/
					//targetTestCase.removeTestStep(targetTestStep);

					/*
					*  Replaces step's script completely
					*/
					stepScript = """import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Authentication Contexts")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;
""";
					targetTestStep.setScript(stepScript);		
				}
				
			}
			catch(Throwable e)
			{
				log.info e;
			}	
		}
	}
}						
log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Remove a Property" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Remove a Property"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
//def testSuite = testCase.getPropertyValue("TestSuite"); 
def testSuite = "Link LASP Test Cases";
def propertyName;

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);	

	for( prop in targetTestCase.properties) {
		/*
		*  This will remove all test case properties
		*/
   		//targetTestCase.removeProperty( prop.value.name )
   		log.info "prop.value.name is " + prop.value.name;
   		if (prop.value.name == "synced") {
   			targetTestCase.removeProperty( prop.value.name )
   		}
   	}
}
/*	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	propertyName = testCase.getPropertyValue("PropertyName");	
	propertyValue = testCase.getPropertyValue("PropertyValue");		
	if(targetTestCase.isDisabled() == false)
	{
		try
		{
			//nodeRole = targetTestCase.getPropertyValue("ErrorResponse");
			propertyName = "synced";			
			/*if(nodeRole == 'ForbiddenRightsTokenAccessNotAllowed')
			{
				nodeRole = 'ForbiddenDiscreteMediaRightOwnerMismatch';
			}
			*/
			/*
			propertyValue = null
			targetTestCase.setPropertyValue(propertyName, propertyValue);
			log.info "Done with Test Case '" + TCList[i].name + "'";
		}
		catch(Throwable e)
		{
			log.info e.text;
		}		
	}	
}
*/
log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>FUNC_USER_CONSENT_POLICIES</con:value></con:property><con:property><con:name>PropertyName</con:name><con:value>NumberOfPolicyRequestingEntities</con:value></con:property><con:property><con:name>PropertyValue</con:name><con:value>1</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rename a Step" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Change a step's script for all Steps in a Suite"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = "DECE Customer Service (DECECS) Test Cases"; 
def stepName  = "Change context to LLPCS";
def stepNewName  = "Change context to DLPCS";

def TCList  = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{			
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	testStepList  = targetTestCase.getTestStepList();
	testStepCount = targetTestCase.getTestStepCount();
	if(targetTestCase.isDisabled() == false)
	{
		for(j = 0; j &lt;= testStepCount - 1; j++)
		{
			try
			{
				if (testStepList[j].name == stepName) {
					log.info "Renaming Step " + testStepList[j].name;
					targetTestStep = targetTestCase.getTestStepByName(testStepList[j].name);
					targetTestStep.name = stepNewName;
				}
				
				//stepScript = testStepList[j].getScript();
				//stepScript = stepScript.replace(oldString, newString);
				//targetTestStep.setScript(stepScript);		
			}
			catch(Throwable e)
			{
				log.info "ERROR:" + e;
			}	
		}
	}
}						
log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rename Test Cases" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Rename Test Cases"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

import java.io.*;

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
//def testSuite = testCase.getPropertyValue("TestSuite"); 
def testSuite = "Link LASP Customer Service Test Cases";

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

def TCNum = 13;

//BufferedWriter bufferedWriter = null;
//bufferedWriter = new BufferedWriter(new FileWriter("c:\\DiscreteMediaLeaseCreateQuestions.txt"));

def oldTestCaseName;
def newTestCaseName;

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	//if(targetTestCase.isDisabled() == false)
	//{
		targetTestCase.setFailOnError(true);
		oldTestCaseName = TCList[i].name;
		//newTestCaseName = oldTestCaseName.replace(" ", "");
		//newTestCaseName = newTestCaseName.replace("_POST_", "_GET_");
		//newTestCaseName = newTestCaseName.replace("_RTL_", "_RTL_CS_");
		newTestCaseName = oldTestCaseName.replace("- LLP -", "- LLPCS -");	
		/*	
		if (TCNum.toString().length() == 1)
			newTestCaseName = "TC_DECE_0000" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		else if (TCNum.toString().length() == 2)
			newTestCaseName = "TC_DECE_000" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		else if (TCNum.toString().length() == 3)
			newTestCaseName = "TC_DECE_00" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		else if (TCNum.toString().length() == 4)
			newTestCaseName = "TC_DECE_0" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
			*/
		targetTestCase.name = newTestCaseName;	
		TCNum = TCNum + 1;
		log.info "Done renaming Test Case '" + oldTestCaseName + "' to '" + newTestCaseName + "'";
	//}
	//else
	//{
	//	bufferedWriter.write(targetTestCase.name);
	//	bufferedWriter.newLine();
	//}
}

//if (bufferedWriter != null) {
	//bufferedWriter.flush();
     //bufferedWriter.close();
//}

log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>PERM_ACCOUNT_CONSENT_POLICIES</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Remove a Step for all Testcases in a Suite" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Change a step's script for all Steps in a Suite"><con:settings/><con:config><script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = "Authentication/Permission Test Cases"; 
def stepName  = "Save node's current role";

def TCList  = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{			
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	testStepList  = targetTestCase.getTestStepList();
	testStepCount = targetTestCase.getTestStepCount();
	if(targetTestCase.isDisabled() == false)
	{
		for(j = 0; j &lt;= testStepCount - 1; j++)
		{
			try
			{
				if (testStepList[j].name == stepName) {
					log.info "Removing Step " + testStepList[j].name;
					targetTestStep = targetTestCase.getTestStepByName(testStepList[j].name);
					targetTestCase.removeTestStep(targetTestStep);
				}
				
				//stepScript = testStepList[j].getScript();
				//stepScript = stepScript.replace(oldString, newString);
				//targetTestStep.setScript(stepScript);		
			}
			catch(Throwable e)
			{
				log.info "ERROR:" + e;
			}	
		}
	}
}						
log.info 'Woohoo!'
</script></con:config></con:testStep><con:properties><con:property><con:name>TestSuite</con:name><con:value>RTL_CS</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Test Cases Containing APIs" disabled="true"><con:description/><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS GET API" searchProperties="true" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assertXML",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertId",null);
tC.setPropertyValue("assertionAccountId",null);
tC.setPropertyValue("assertionUserId",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("expectErrTypeSTSGet",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("expectErrTypeSTSGet",callTC.getPropertyValue("expectErrTypeSTSGet"));


</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase    = testRunner.getTestCase();
def testSuite   = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep testStep = testCase.getTestStepByName("STS - GET");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

//switch (nodeId) {
//	case "221500":
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\910_concat.pem";
//	break;
//	case "221501":  // LLPCS
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\221501_concat.pem";
//	break;
//	case "441500":
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\912_concat.pem";
//	break;
//	case "221700":
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\914_concat.pem";
//	break;
//	case "1910":  // LLP Standalone
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1910.pem";
//	break;
//	case "1912":  // RTR Standalone
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1912.pem";
//	break;
//	case "666":
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\666_concat.pem";
//	break;
//	case "80080010":  // DLPCS
//	default:
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\80080010.pem";
//	break;
//}

switch (nodeId) {
	case "1910":  // LLP standalone
		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1910.pem";
	break;
	case "1914":  // DLP standalone
		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1914_concat.pem";
	break;
	case "221500":  // LLP
		keyStorePath = "C:\\certificates\\221500_concat.pem";
	break;
	case "221501":  // LLPCS
		keyStorePath = "C:\\certificates\\221501_concat.pem";
	break;
	case "221700":  // DLP
		keyStorePath = "C:\\certificates\\221700_concat.pem";
	break;
	case "221701":  // DLPCS
		keyStorePath = "C:\\certificates\\221701_concat.pem";
	break;
	case "441500":  // RTR
	default:
		keyStorePath = "C:\\certificates\\" + nodeId + "_concat.pem";
	break;
}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="delay" name="Delay 3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="restrequest" name="STS - GET"><con:settings/><con:config service="DECE StreamCreate API" resourcePath="/rest/{MAJOR}/{MINOR}/SecurityToken/Assertion/{ASSERTION}" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="STS - GET" mediaType="application/xml" sslKeystore="912_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def tStep  = tC.getTestStepByName('STS - GET');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();
rawResp = new ByteArrayOutputStream();
rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
String XMLbody  = strVal.substring(startAssert, strVal.length());

tC.setPropertyValue("XMLbody", XMLbody);
tC.setPropertyValue("status", status);
tC.setPropertyValue("connection", connection);
tC.setPropertyValue("contentType", contentType);
tC.setPropertyValue("contentLength", contentLength);
tC.setPropertyValue("contentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url           = tP.getPropertyValue("targetURL");
def urnacct       = tP.getPropertyValue("urnaccount");
def urnstream     = tP.getPropertyValue("urnstream");
def expectErrType = tC.getPropertyValue("expectErrTypeSTSGet");
def XMLbody       = tC.getPropertyValue("XMLbody");
def nodeaccountid = tC.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");
String orgRequest  = url + "/rest/$major/$minor/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "" || expectErrType == null) {
	expectErrType = "SUCCESS";
	tC.setPropertyValue("expectErrTypeSTSGet",expectErrType);
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = true;
		dobodyXML = true;
		errorID = "Forbidden";
		errorReason = "Forbidden";
	break;
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("status");
assert tC.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("connection");
	assert tC.getPropertyValue("connection") == expectHTTPconnection;
}

//Content-Length
if (contentLengthZero) {
	assert tC.getPropertyValue("contentLength").toInteger() == 0;
} else {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert tC.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert tC.getPropertyValue("contentLocation") != null;
	
	def b = tC.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	tC.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert tC.getPropertyValue("contentLocation") == null;
}

this.log.info "expectErrType [$expectErrType]";

if (dobodyXML) {
	if (XMLbody.length() > 0) {
			def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion", ds: "http://www.w3.org/2000/09/xmldsig#", ec: "http://www.w3.org/2001/10/xml-exc-c14n#", xs: "http://www.w3.org/2001/XMLSchema");

			if (expectErrType == "SUCCESS") {
				// Verify response sizes...
				this.log.info "Assertion size: " + myXML."saml2:Assertion".size();

				/*
				assert myXML."saml2:Assertion".size() == 1;
				assert myXML."saml2:Assertion"."ds:Signature".size()    == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo".size()   == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo"."ds:Reference"."ds:DigestValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignatureValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:KeyInfo"."ds:X509Data"."ds:X509Certificate".size() == 1;
				assert myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID".size() == 1;
				*/
				def samlRespNodeAccount = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
				log.info "samlRespNodeAccount[$samlRespNodeAccount]";
				
				//def samlRespNodeAccount = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
			
			} else {
				// ErrorCode
				this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
				assert myXML.Error.@ErrorID.toString() == errorID;
	
				// ErrorReason
				this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
				assert myXML.Error.Reason.toString() == errorReason;

				// ErrorLink
				this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
				assert myXML.Error.ErrorLink.toString() == errorLink;
			}
		} else {
			return false;
		}
}



</script></con:config></con:testStep><con:testStep type="groovy" name="Extract NodeUserID and NodeAccountId"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def XMLbody       = tC.getPropertyValue("XMLbody");
def expectErrType = tC.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion");

			// Verify response sizes...
			assert myXML.size() == 1;

			/*
			String accountId = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID";
			*/
			String accountId = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Subject"."saml2:NameID";
			
			this.log.info "accountId [$accountId]";
			this.log.info "userId [$userId]";

			tC.setPropertyValue("assertionAccountId",accountId.substring(accountId.lastIndexOf(":")+1, accountId.length()));
			tC.setPropertyValue("assertionUserId",   userId.substring(userId.lastIndexOf(":")+1,userId.length()));
			tC.setPropertyValue("assertionAccountIdFULL",accountId);
			tC.setPropertyValue("assertionUserIdFULL",userId);

			this.log.info "assertionAccountId property is " + tC.getPropertyValue("assertionAccountId");
			this.log.info "assertionUserId property is " + tC.getPropertyValue("assertionUserId");
	} else {
		return false;
	}
}



</script></con:config></con:testStep><con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>"><con:settings/><con:config><script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
//import org.apache.commons.codec.binary.Base64;
import org.opensaml.xml.util.Base64;

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def expectErrType = tC.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	
int compressedLength = 0;
//String XMLbody = tC.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = tC.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");

String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
tC.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);
    
//ByteArrayOutputStream byteOutputStream    = new ByteArrayOutputStream();
//DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(byteOutputStream);

//deflaterOutputStream.write(xmlBytes, 0, xmlBytes.length);
//deflaterOutputStream.close();

/*
// next, base64 encode it
Base64 base64Encoder = new Base64();

byte[] base64EncodedByteArray = base64Encoder.encode(byteOutputStream.toByteArray());
String base64EncodedMessage = new String(base64EncodedByteArray);
*/
byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);

// finally, URL encode it
//String urlEncodedMessage = URLEncoder.encode(base64EncodedMessage, "UTF-8");
tC.setPropertyValue("assert", base64encodeStr);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Return extracted Properties back to calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertXML",tC.getPropertyValue("assertXML"));
callTC.setPropertyValue("assert",tC.getPropertyValue("assert"));
callTC.setPropertyValue("assertId",tC.getPropertyValue("assertId"));
callTC.setPropertyValue("assertionAccountId",tC.getPropertyValue("assertionAccountId"));
callTC.setPropertyValue("assertionUserId",tC.getPropertyValue("assertionUserId"));
callTC.setPropertyValue("assertionAccountIdFULL",tC.getPropertyValue("assertionAccountIdFULL"));
callTC.setPropertyValue("assertionUserIdFULL",tC.getPropertyValue("assertionUserIdFULL"));</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">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</con:value></con:property><con:property><con:name>assertAccountId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">f9a79652-36ee-4f84-8ecc-ca19333e74a6</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9B4E7893991AB1C5E0401F0A0599216F</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9B4E7893991CB1C5E0401F0A0599216F</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>f9a79652-36ee-4f84-8ecc-ca19333e74a6</con:value></con:property><con:property><con:name>assertPackaged</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertRaw</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertUserId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>connection</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">4219</con:value></con:property><con:property><con:name>contentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">text/xml;charset=ISO-8859-1</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>0912441500</con:value></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>status</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 200 OK</con:value></con:property><con:property><con:name>synced</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Authorization Information Extraction via STS</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:9B4E7893991CB1C5E0401F0A0599216F</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<saml2:Assertion ID="f9a79652-36ee-4f84-8ecc-ca19333e74a6" IssueInstant="2011-06-16T20:20:59.550Z" Version="2.0" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"><saml2:Issuer>http://c.decellc.com/</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#f9a79652-36ee-4f84-8ecc-ca19333e74a6">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"><ec:InclusiveNamespaces PrefixList="ds saml2 xs" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>2MFqzu97w8kD7sHd/GoOSlGs4co=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
Onno3aSuEtrMt0zzPIhVGu8HzPD8Vut2KVa8/h2x9P9YSJxrU3qBt15Al9Fjiz1Grbf0/gKrbyyT
J2rJqFaXfDPh3mnCHmiV43VFYKJhszLWIpDyWNLVzECPo+DZCef97jXN88wL/0fuCOqzXZPBY3bg
tvTFV2xLn+Uw2Z+aRSs=
</ds:SignatureValue>
<ds:KeyInfo><ds:X509Data><ds:X509Certificate>MIIDuzCCAySgAwIBAgIBAjANBgkqhkiG9w0BAQQFADCBljELMAkGA1UEBhMCVVMxCzAJBgNVBAgT
AlZBMREwDwYDVQQHEwhTdGVybGluZzENMAsGA1UEChMEREVDRTEMMAoGA1UECxMDbGxjMSMwIQYD
VQQDExpzdG9teGxic2I5MS52YS5uZXVzdGFyLmNvbTElMCMGCSqGSIb3DQEJARYWc2FudG9zLmpo
YUBuZXVzdGFyLmJpejAeFw0xMDAzMTkwMTU2NDRaFw0xMTAzMTkwMTU2NDRaMIGJMQswCQYDVQQG
EwJVUzELMAkGA1UECBMCdmExETAPBgNVBAcTCFN0ZXJsaW5nMRAwDgYDVQQKEwdOZXVzdGFyMQ0w
CwYDVQQLEwRERUNFMRIwEAYDVQQDEwlsb2NhbGhvc3QxJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5q
aGFAbmV1c3Rhci5iaXowgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALBV5Opi92ieLfFomehr
M1oKkvzx08i3OgPNW5Dfk7PGiP3adh/Ilc2j3kAIIedK1hQadRY/RDniz6OKUXeirYztN5Q16i85
RWuUXDol7dHXYUK+xYcQTOPSUWPzxxNqj8zltHOBHrSJMDgONeePsc+/0aFBT8D5CYHjHEwfR0e5
AgMBAAGjggEiMIIBHjAJBgNVHRMEAjAAMCwGCWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRl
ZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4EFgQU5+JXeZQNlTVtAwpVfn110GpQHfMwgcMGA1UdIwSBuzCB
uIAUaOpJ0xKV601qQdlJS9AU3xS2kxOhgZykgZkwgZYxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJW
QTERMA8GA1UEBxMIU3RlcmxpbmcxDTALBgNVBAoTBERFQ0UxDDAKBgNVBAsTA2xsYzEjMCEGA1UE
AxMac3RvbXhsYnNiOTEudmEubmV1c3Rhci5jb20xJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5qaGFA
bmV1c3Rhci5iaXqCAQAwDQYJKoZIhvcNAQEEBQADgYEAfq+I8D1s56CpsWwgBGEqQ7VLJ9p0QXLk
B+F/gtil4On8wTK+W1yw7hjQWW9IDhC+nfYh3btB0azcQeJk7GiRkDn64lyMLMQ5Ui/ly0jeqwsL
NI1nE3tzF/9ru+BmZimzz342UmPSuvIUaKs1yhbqW9wjPH6//rGy5z7ZvQFXocY=</ds:X509Certificate></ds:X509Data></ds:KeyInfo></ds:Signature><saml2:Subject><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">urn:dece:userid:org:dece:9B4E7893991CB1C5E0401F0A0599216F</saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><saml2:SubjectConfirmationData InResponseTo="FFCFC5F1FD2A0834B0EB83D3233B6E81" NotOnOrAfter="2011-06-17T20:20:59.550Z" Recipient="http://stdecqavutl1.va.neustar.com:2485/saml/dumpcustomerpost.php"/></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions NotBefore="2011-06-16T20:20:49.550Z" NotOnOrAfter="2012-06-16T20:20:59.550Z"><saml2:AudienceRestriction><saml2:Audience>urn:dece:org:org:dece:441500</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions><saml2:Advice><saml2:AssertionURIRef>https://qa.q.uvvu.com:7002/rest/1/0/SecurityToken/Assertion/f9a79652-36ee-4f84-8ecc-ca19333e74a6</saml2:AssertionURIRef></saml2:Advice><saml2:AuthnStatement AuthnInstant="2011-06-16T20:20:59.550Z"><saml2:AuthnContext><saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef><saml2:AuthenticatingAuthority>urn:dece:org:neustar:coordinator</saml2:AuthenticatingAuthority></saml2:AuthnContext></saml2:AuthnStatement><saml2:AttributeStatement><saml2:Attribute Name="accountID" NameFormat="urn:dece:type:accountID"><saml2:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">urn:dece:accountid:org:dece:9B4E7893991AB1C5E0401F0A0599216F</saml2:AttributeValue></saml2:Attribute></saml2:AttributeStatement></saml2:Assertion>]]></con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate API" searchProperties="true" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid","441500");
tC.setPropertyValue("username",null);
tC.setPropertyValue("password",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("tokentype",tP.getPropertyValue("urntokenType_userpassword"));
tC.setPropertyValue("streamhandle",null);
tC.setPropertyValue("rightstokenid",null);
tC.setPropertyValue("rightstokenidFULL",null);
tC.setPropertyValue("cid",null);
tC.setPropertyValue("alid",null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("cid",callTC.getPropertyValue("cid"));
tC.setPropertyValue("alid",callTC.getPropertyValue("alid"));

if (tC.getPropertyValue("cid") == "null" || tC.getPropertyValue("cid") == null) {
		tC.setPropertyValue("cid",tP.getPropertyValue("cid"));
}
if (tC.getPropertyValue("alid") == "null" || tC.getPropertyValue("alid") == null) {
		tC.setPropertyValue("alid",tP.getPropertyValue("alid"));
}</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Identity as RTR Consumer"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Authentication Contexts")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;


</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("POST - RightsTokenCreate");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="POST - RightsTokenCreate"><con:settings/><con:config service="DECE StreamCreate API" resourcePath="/rest/{MAJOR}/{MINOR}/Account/{ACCT}/RightsToken" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - RightsTokenCreate" mediaType="application/xml" postQueryString="false" sslKeystore="441500_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}"/>
  &lt;con:entry key="Tester" value="${#Project#tester}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://${#Project#targetHost}:${#Project#targetPort}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"  xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#alid}" ContentID="${#TestCase#cid}">
                <ns4:SoldAs>
                                <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>
                                <ns4:ContentID>${#TestCase#cid}</ns4:ContentID>
                </ns4:SoldAs>
                <ns4:RightsProfiles>
                                <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd">
                                                <ns4:CanDownload>true</ns4:CanDownload>
                                                <ns4:CanStream>true</ns4:CanStream>
                                </ns4:PurchaseProfile>
                                <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd">
                                                <ns4:CanDownload>true</ns4:CanDownload>
                                                <ns4:CanStream>true</ns4:CanStream>
                                </ns4:PurchaseProfile>
                                <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:pd">
                                                <ns4:CanDownload>true</ns4:CanDownload>
                                                <ns4:CanStream>true</ns4:CanStream>
                                </ns4:PurchaseProfile>
                </ns4:RightsProfiles>
                <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc>
                <ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type">
                                <ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location>
                                <ns4:Preference>1</ns4:Preference>
                </ns4:FulfillmentWebLoc>
                <ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type">
                                <ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location>
                                <ns4:Preference>1</ns4:Preference>
                </ns4:FulfillmentWebLoc>
                <ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type">
                                <ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location>
                                <ns4:Preference>3</ns4:Preference>
                </ns4:FulfillmentManifestLoc>
                <ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type">
                                <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location>
                                <ns4:Preference>1</ns4:Preference>
                </ns4:FulfillmentManifestLoc>
                <ns4:PurchaseInfo>
                                <ns4:NodeID>urn:dece:org:org:dece:${#TestCase#nodeid}</ns4:NodeID>
                                <ns4:RetailerTransaction>RetailerTransaction_1_node0799_RetailerNode</ns4:RetailerTransaction>
                                <ns4:PurchaseAccount>${#TestCase#assertionAccountIdFULL}</ns4:PurchaseAccount>
                                <ns4:PurchaseUser>${#TestCase#assertionUserIdFULL}</ns4:PurchaseUser>
                                <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>
                </ns4:PurchaseInfo>
</ns4:RightsTokenData>
]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ACCT" value="${#TestCase#assertionAccountIdFULL}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract RightsToken Handle from API Result"><con:settings/><con:config><script>
def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def targetHost = testProject.getPropertyValue("targetHost");
def nodeaccountId  = testCase.getPropertyValue("assertionAccountIdFULL");
def urnRightsToken = testProject.getPropertyValue("urnRightsToken");
def tStep  = testCase.getTestStepByName('POST - RightsTokenCreate');

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String rightsid = null;
String rightsidFULL = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

def b = contentLocation.toURL();
def urlStr = b.getPath();

//Assert the hostname in the URL is correct
//assert b.getHost().matches(targetHost.toString());
//Assert the protocol is correct
//assert b.getProtocol().matches("https");
//Assert the URI is correct
assert b.getPath().matches("/rest/$major/$minor/Account/$nodeaccountId/RightsToken/$urnRightsToken[0-9, A-F]*");

int lastSlash = urlStr.lastIndexOf(':');
int lastEle = urlStr.lastIndexOf('/');

rightsid = urlStr.substring(lastSlash + 1);
rightsidFULL = urlStr.substring(lastEle + 1);

//this.log.info "lastSlash is " +lastSlash + "andstreamHandle is " + streamHandle ;

this.log.info "rightstokenid [$rightsid]";
this.log.info "rightsidFULL [$rightsidFULL]";
testCase.setPropertyValue("rightstokenid",rightsid);
testCase.setPropertyValue("rightstokenidFULL",rightsidFULL);



</script></con:config></con:testStep><con:testStep type="groovy" name="Return RightsToken to calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("rightstokenid",tC.getPropertyValue("rightstokenid"));
callTC.setPropertyValue("rightstokenidFULL",tC.getPropertyValue("rightstokenidFULL"));</script></con:config></con:testStep><con:testStep type="delay" name="Delay"><con:settings/><con:config><delay>2000</delay></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">CE0F1A1CC2F69345E0401F0A07990CC5</con:value></con:property><con:property><con:name>alid</con:name><con:value>urn:dece:alid:file:AGAIN_PATS_CID_DONT_TOUCH_1.txt</con:value></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">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</con:value></con:property><con:property><con:name>assertId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_05bf8789-34a9-43ff-b430-0b26b776a941</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">CE0F1A1CC2F19345E0401F0A07990CC5</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:CE0F1A1CC2F19345E0401F0A07990CC5</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">CE0F2321D3D05F41E0401F0A07991D0B</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:CE0F2321D3D05F41E0401F0A07991D0B</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_05bf8789-34a9-43ff-b430-0b26b776a941</con:value></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>cid</con:name><con:value>urn:dece:cid:file:AGAIN_PATS_CID_DONT_TOUCH_1.txt</con:value></con:property><con:property><con:name>deceorgid</con:name><con:value>urn:dece:org:org:dece:1</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>I:\deceAPI\certs\912_concat.pem</con:value></con:property><con:property><con:name>nodeaccountid</con:name><con:value>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</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>441500</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>dlp</con:value></con:property><con:property><con:name>nodeuserid</con:name><con:value>9B4E7893991CB1C5E0401F0A0599216F</con:value></con:property><con:property><con:name>orgid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value>testing</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77320</con:value></con:property><con:property><con:name>rightslocker</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">CE0F1A1CC2FD9345E0401F0A07990CC5</con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">D0D02D5740AA3AF2E0401F0A079955E6</con:value></con:property><con:property><con:name>rightstokenidFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:rightstokenid:org:dece:D0D02D5740AA3AF2E0401F0A079955E6</con:value></con:property><con:property><con:name>sName</con:name><con:value>Link LASP Customer Service Test Cases</con:value></con:property><con:property><con:name>streamhandle</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>targetURL</con:name><con:value>qa.p.uvvu.com:7002</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_11304 - StreamCreate - LLPCS - &lt;RequestingUserID> does not match security token</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>transactionid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>username</con:name><con:value>streamcreatefau</con:value></con:property><con:property><con:name>useroid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">CE0F2321D3D55F41E0401F0A07991D0B</con:value></con:property><con:property><con:name>rightslockerFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">CE0F1A1CC2FD9345E0401F0A07990CC5</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value>urn:dece:userid:org:dece:CE0F2321D3D05F41E0401F0A07991D0B</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy GET for User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true" id="c28c3ebb-bee1-407f-851d-8e54bcb4ad15"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assert2",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL1",null);
tC.setPropertyValue("assertionUserIdFULL2",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("returnXMLResult",null);
tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("expectErrTypePolicyGet",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("policyClassEncoded",callTC.getPropertyValue("policyClassEncoded"));
tC.setPropertyValue("returnXMLResult",callTC.getPropertyValue("returnXMLResult"));
tC.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));

if (tC.getPropertyValue("expectErrTypePolicyGet") == null || tC.getPropertyValue("expectErrTypePolicyGet") == "") {
		tC.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}
if (tC.getPropertyValue("returnXMLResult") == null || tC.getPropertyValue("returnXMLResult") == "") {
		tC.setPropertyValue("returnXMLResult","false");
}</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("GET - PolicyGet I");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="GET - PolicyGet I"><con:settings/><con:config service="Coordinator APIs" resourcePath="/rest/{MAJOR}/{MINOR}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="GET-1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - PolicyGet I" mediaType="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#assert2}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="MINOR" value="${#Project#versionMinor}"/>
  <con:entry key="MAJOR" value="${#Project#versionMajor}"/>
  <con:entry key="POLICYCLASS" value="${#TestCase#policyClassEncoded}"/>
  <con:entry key="USER" value="${#TestCase#assertionUserIdFULL2}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('GET - PolicyGet I');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Process response body and headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def myXML;
def XMLbody = tC.getPropertyValue("XMLbody");
def httpStatus = tC.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = tC.getPropertyValue("policyClass");
def coordinatorSchema = context.expand( '${#Project#coordinatorSchema}' )

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	try {
		myXML = new XmlSlurper().parseText(XMLbody);
	}
	catch(Throwable e) {
		log.info "ERROR - XmlSlurper - $e";
		assert 1 == 2;
	}
	finally {
		xmlPolicyClass = myXML.Policy[0].PolicyClass.text();
		log.info "xmlPolicyClass[$xmlPolicyClass]";
		log.info "tcPolicyClass[tcPolicyClass]";
	}
}

if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
	
	def PolicyID = context.expand( '${GET - PolicyGet I#ResponseAsXml#declare namespace ns1=\'${#Project#coordinatorSchema}\'; //ns1:PolicyList[1]/ns1:Policy[1]/@PolicyID}' )
    //def PolicyID = context.expand( '${#TestCase#XMLbody#declare namespace ns1=\'http://www.decellc.org/schema/2012/12/coordinator\'; //ns1:PolicyList[1]/ns1:Policy[1]/@PolicyID}' )
	log.info "================="+PolicyID
	tC.setPropertyValue("PolicyID",PolicyID);
} else if ( httpStatus == "HTTP/1.1 404 Not Found") {
	policyWasFound = "false";
} else {
	log.info "ERROR!";
	assert 1 == 2;
}




tC.setPropertyValue("policyExists", policyWasFound);</script></con:config></con:testStep><con:testStep type="groovy" name="Return policyExists to calling test case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",tC.getPropertyValue("policyExists"));
callTC.setPropertyValue("PolicyID",tC.getPropertyValue("PolicyID"));
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))	
{
	callTC.setPropertyValue("PolicyIDEncoded",tC.getPropertyValue("PolicyID"));
}
else 
{
	callTC.setPropertyValue("PolicyIDEncoded",URLEncoder.encode(tC.getPropertyValue("PolicyID"),"UTF-8"));
}

if (tC.getPropertyValue("returnXMLResult") == "true") {
	callTC.setPropertyValue("policyGetXML",tC.getPropertyValue("XMLbody"));
}
</script></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypePolicyGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpContentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 200 OK</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>policyExists</con:name><con:value>true</con:value></con:property><con:property><con:name>PolicyID</con:name><con:value>urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77321</con:value></con:property><con:property><con:name>returnXMLResult</con:name><con:value>true</con:value></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Policy - Remove all Parental Control Policies</con:value></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>XMLbody</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:PolicyList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Policy PolicyID="urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1">
      <dece:PolicyClass>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</dece:PolicyClass>
      <dece:RequestingEntity>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:role:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreationDate="2014-11-27T09:51:00.000Z" CreatedBy="urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS API" searchProperties="true" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assertXML",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertId",null);
tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("assertionAccountId",null);
tC.setPropertyValue("assertionUserId",null);
tC.setPropertyValue("tokentype",null);
tC.setPropertyValue("expectErrTypeSTS",null);
</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Required Properties from Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("password",callTC.getPropertyValue("password"));
tC.setPropertyValue("tokentype",callTC.getPropertyValue("tokentype"));
tC.setPropertyValue("expectErrTypeSTS",callTC.getPropertyValue("expectErrTypeSTS"));


</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep  testStep = testCase.getTestStepByName("POST - STS");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

//switch (nodeId) {
//	case "221500":  // LLP
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\910_concat.pem";
//	break;
//	case "221700":  // DLP
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\914_concat.pem";
//	break;
//	case "441500":  // RTR
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\912_concat.pem";
//	break;
//	case "1910":  // LLP Standalone
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1910.pem";
//	break;
//	case "1912":  // RTR Standalone
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1912.pem";
//	break;
//	case "80080010":  // DLPCS
//	default:
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\80080010.pem";
//	break;
//}
switch (nodeId) {
	case "1910":  // LLP standalone
		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1910.pem";
	break;
	case "1914":  // DLP standalone
		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1914_concat.pem";
	break;
	case "221500":  // LLP
		keyStorePath = "C:\\certificates\\221500_concat.pem";
	break;
	case "221501":  // LLPCS
		keyStorePath = "C:\\certificates\\221501_concat.pem";
	break;
	case "221700":  // DLP
		keyStorePath = "C:\\certificates\\221700_concat.pem";
	break;
	case "221701":  // DLPCS
		keyStorePath = "C:\\certificates\\221701_concat.pem";
	break;
	case "441500":  // RTR
	default:
		keyStorePath = "C:\\certificates\\" + nodeId + "_concat.pem";
	break;
}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="delay" name="Delay 3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="restrequest" name="POST - STS"><con:settings/><con:config service="DECE StreamCreate API" resourcePath="/rest/{MAJOR}/{MINOR}/SecurityToken/SecurityTokenExchange" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS" mediaType="application/xml" postQueryString="false" sslKeystore="80080010.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://${#Project#targetURL}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="http://www.decellc.org/schema/201$major/$minor/coordinator">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="tokentype" value="${#TestCase#tokentype}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def tStep  = tC.getTestStepByName('POST - STS');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("status", status);
tC.setPropertyValue("connection", connection);
tC.setPropertyValue("contentType", contentType);
tC.setPropertyValue("contentLength", contentLength);
tC.setPropertyValue("contentLocation", contentLocation);

this.log.info "contentLength [$contentLength]";

if (contentLength.toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
     rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);

     int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");

	String XMLbody  = strVal.substring(startAssert, strVal.length());
     
	tC.setPropertyValue("XMLbody", XMLbody);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers and save assertion"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url           = tP.getPropertyValue("targetURL");
def urnacct       = tP.getPropertyValue("urnaccount");
def urnstream     = tP.getPropertyValue("urnstream");
def expectErrType = tC.getPropertyValue("expectErrType");
def XMLbody       = tC.getPropertyValue("XMLbody");
def nodeaccountid = tC.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = true;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");
String orgRequest  = url + "/dece/$major/$minor/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "text/plain; charset=UTF-8";
		contentLengthZero = true;
		doContentLocaton  = true;
		dobodyXML = false;
	break;
	case "FORBIDDEN":
	default:
		errorReason = "Forbidden";
		errorID = "Forbidden";
		errorLink = "";
		orgRequest = "";
		doContentLocaton  = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("status");
assert tC.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + tC.getPropertyValue("connection");
	assert tC.getPropertyValue("connection") == expectHTTPconnection;
}


//Content-Length
log.info "ContentLength[" + tC.getPropertyValue("contentLength") + "]";
if (contentLengthZero) {
	assert tC.getPropertyValue("contentLength").toInteger() == 0;
} else {
	assert tC.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert tC.getPropertyValue("contentType") == expectHTTPcontenttype;
}

if (doContentLocaton) {
	assert tC.getPropertyValue("contentLocation") != null;
	
	def b = tC.getPropertyValue("contentLocation").toURL();
	log.info "b[$b]";
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	tC.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert tC.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} else {
		return false;
	}
}



</script></con:config></con:testStep><con:testStep type="groovy" name="Return the assertion to the Calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",tC.getPropertyValue("assertionUUID"));</script></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def myTC = tP.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",tC.getName());
myTC.setPropertyValue("sName",tS.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertAccountId</con:name><con:value>94B6AE0F85ADC20DE0401F0A0799081F</con:value></con:property><con:property><con:name>assertId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionAccountId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUserId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertPackaged</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertRaw</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertUserId</con:name><con:value>94B6AE0F85AFC20DE0401F0A0799081F</con:value></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>connection</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLength</con:name><con:value>431</con:value></con:property><con:property><con:name>contentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRightsTokenCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTS</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>5440</con:value></con:property><con:property><con:name>password</con:name><con:value>testing</con:value></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>status</con:name><con:value>HTTP/1.1 403 Forbidden</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Authorization Information Extraction via STS</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>pjgorg1full1</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ErrorList xmlns="http://www.decellc.org/schema/201$major/$minor/coordinator" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#" >
<Error ErrorID="Forbidden">
       <Reason>Forbidden</Reason>
        <OriginalRequest></OriginalRequest>
       <ErrorLink></ErrorLink>
    </Error>
</ErrorList>
]]></con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy GET for Account" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("returnXMLResult",null);
tC.setPropertyValue("XMLbody",null);
tC.setPropertyValue("expectErrTypePolicyGet",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("returnXMLResult",callTC.getPropertyValue("returnXMLResult"));
tC.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));

if (tC.getPropertyValue("expectErrTypePolicyGet") == null || tC.getPropertyValue("expectErrTypePolicyGet") == "") {
		tC.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}
if (tC.getPropertyValue("returnXMLResult") == null || tC.getPropertyValue("returnXMLResult") == "") {
		tC.setPropertyValue("returnXMLResult","false");
}</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("GET - PolicyGet for Account");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="GET - PolicyGet for Account"><con:settings/><con:config service="Coordinator APIs" resourcePath="/rest/{MAJOR}/{MINOR}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - PolicyGet for Account" mediaType="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#Query_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('GET - PolicyGet for Account');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Process response body and headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def XMLbody    = tC.getPropertyValue("XMLbody");
def httpStatus = tC.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = tC.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


tC.setPropertyValue("policyExists", policyWasFound);</script></con:config></con:testStep><con:testStep type="groovy" name="Return policyExists to calling test case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",tC.getPropertyValue("policyExists"));

if (tC.getPropertyValue("returnXMLResult") == "true") {
	callTC.setPropertyValue("policyGetXML",tC.getPropertyValue("XMLbody"));
}
</script></con:config></con:testStep><con:properties><con:property><con:name>tName</con:name><con:value>Policy - Establish High-Level Policies for User/Account/Node</con:value></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>221500</con:value></con:property><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:C9E1BEFA25290915E0401F0A079935C4</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:C9E25FD41A10D76DE0401F0A07996532</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:EnableManageUserConsent</con:value></con:property><con:property><con:name>expectErrTypePolicyGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value><![CDATA[<PolicyList xmlns="http://www.decellc.org/schema/2011/08/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Policy PolicyID="urn:dece:policyid:org:dece:CE7270E3494E33BDE0401F0A05995AC3">
      <PolicyClass>urn:dece:type:policy:EnableManageUserConsent</PolicyClass>
      <Resource>urn:dece:userid:org:dece:C9E25FD41A10D76DE0401F0A07996532</Resource>
      <RequestingEntity>urn:dece:org:org:dece:221500</RequestingEntity>
      <PolicyAuthority>urn:dece:role:coordinator</PolicyAuthority>
      <ResourceStatus>
         <Current CreatedBy="urn:dece:userid:org:dece:C9E25FD41A10D76DE0401F0A07996532" CreationDate="2012-11-14T09:49:44.000Z">
            <Value>urn:dece:type:status:active</Value>
         </Current>
      </ResourceStatus>
   </Policy>
</PolicyList>]]></con:value></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 200 OK</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>962</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyExists</con:name><con:value>true</con:value></con:property><con:property><con:name>returnXMLResult</con:name><con:value>false</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77322</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreate for User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true" id="905338fc-7097-4947-8a2c-5a01570fe135"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
tC.setPropertyValue("policyAuthority","urn:dece:role:coordinator");
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("streamhandleFULL",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("rightstokenid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyAuthority",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("policyStatus",null);
tC.setPropertyValue("policyResourceXML",null);
tC.setPropertyValue("expectErrTypePolicyCreate",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("policyClassEncoded",callTC.getPropertyValue("policyClassEncoded"));
tC.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
tC.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
tC.setPropertyValue("policyAuthority",callTC.getPropertyValue("policyAuthority"));
tC.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
tC.setPropertyValue("policyStatus",callTC.getPropertyValue("policyStatus"));
tC.setPropertyValue("expectErrTypePolicyCreate",callTC.getPropertyValue("expectErrTypePolicyCreate"));
tC.setPropertyValue("policyAuthority", "urn:dece:role:type:coordinator");

if (tC.getPropertyValue("expectErrTypePolicyCreate") == null || tC.getPropertyValue("expectErrTypePolicyCreate") == "") {
		tC.setPropertyValue("expectErrTypePolicyCreate","SUCCESS");
}
if (tC.getPropertyValue("policyCreator") == null || tC.getPropertyValue("policyCreator") == "") {
		tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
}

switch (tC.getPropertyValue("policyClass")) {
	case "urn:dece:type:policy:EndUserLicenseAgreement":
		tC.setPropertyValue("policyResource","urn:dece:agreement:enduserlicenseagreement:10");
	break;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Policy &lt;dece:Resource> XML"><con:settings/><con:config><script><![CDATA[def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

	
mmpaRatingsUS = ["us:mpaa:g","us:mpaa:pg","us:mpaa:pg-13","us:mpaa:r","us:mpaa:nc-17","us:mpaa:nr","us:mpaa:m","us:mpaa:gp","us:mpaa:sma","us:mpaa:x"];
tvpgRatingsUS = ["us:tvpg:tv-y","us:tvpg:tv-y7","us:tvpg:tv-y7-fv","us:tvpg:tv-g","us:tvpg:tv-pg","us:tvpg:tv-14","us:tvpg:tv-ma"];
tvpgRatingsreasoncodesUS = ["us:tvpg:v","us:tvpg:s","us:tvpg:l","us:tvpg:d","us:tvpg:fv"];
fabUS = ["us:fab:c","us:fab:f","us:fab:pd","us:fab:pd-m","us:fab:em","us:fab:ao"];
fabreasoncodesUS = ["us:fab:violence","us:fab:frightening","us:fab:sexual","us:fab:mildlang","us:fab:stronglang","us:fab:substance","us:fab:intense","us:fab:bnudity","us:fab:fnudity","us:fab:explicit","us:fab:erotica"];
esrbgamesUS = ["us:esrb:ec","us:esrb:e","us:esrb:e10+","us:esrb:t","us:esrb:m","us:esrb:ao","us:esrb:rp"];
mpaattrailersUS = ["us:mpaat:gb","us:mpaat:rb"];
tvmovieRatingsGB = ["gb:bbfc:u","gb:bbfc:pg","gb:bbfc:12","gb:bbfc:15","gb:bbfc:18","gb:bbfc:r18"];
chvrsRatingsCA = ["ca:chvrs:g","ca:chvrs:pg","ca:chvrs:14a","ca:chvrs:18a","ca:chvrs:r"];
cbscRatingsCA = ["ca:cbsc:c","ca:cbsc:c8","ca:cbsc:g","ca:cbsc:pg","ca:cbsc:14+","ca:cbsc:18+"];
filmtvifcoIE = ["ie:ifco:g","ie:ifco:pg","ie:ifco:12","ie:ifco:15","ie:ifco:18"];
filmtvncsAU = ["au:ncs:g","au:ncs:pg","au:ncs:m","au:ncs:ma15","au:ncs:r18"];
filmtvoflcNZ = ["nz:oflc:g","nz:oflc:pg","nz:oflc:m","nz:oflc:rp13","nz:oflc:r13","nz:oflc:r15","nz:oflc:rp16","nz:oflc:r16","nz:oflc:r18","nz:oflc:r"];
MocRatingFR = ["fr:moc:u","fr:moc:10","fr:moc:12","fr:moc:16","fr:moc:18"];
FSKRatingDE = ["de:fsk:0","de:fsk:6","de:fsk:12","de:fsk:16","de:fsk:18"];
FSKRatingAT = ["at:fsk:0","at:fsk:6","at:fsk:12","at:fsk:16","at:fsk:18"];
FSKRatingCH = ["ch:fsk:0","ch:fsk:6","ch:fsk:12","ch:fsk:16","ch:fsk:18"];
KijkwijzerRatingBE= ["be:kijkwijzer:al","be:kijkwijzer:6","be:kijkwijzer:9","be:kijkwijzer:12","be:kijkwijzer:16"];
MocRatingLU = ["lu:moc:u","lu:moc:10","lu:moc:12","lu:moc:16","lu:moc:18"];
FSKRatingLU= ["lu:fsk:0","lu:fsk:6","lu:fsk:12","lu:fsk:16","lu:fsk:18"];
KijkwijzerRatingNL= ["nl:kijkwijzer:al","nl:kijkwijzer:6","nl:kijkwijzer:9","nl:kijkwijzer:12","nl:kijkwijzer:16"];

String resourceXml = "";
String urnRating   = testProject.getPropertyValue("urnRating");

def resource = testCase.getPropertyValue("policyResource");

switch (resource) {
	case "${urnRating}us:mpaa:g":
	case "${urnRating}us:mpaa:pg":
	case "${urnRating}us:mpaa:pg-13":
	case "${urnRating}us:mpaa:r":
	case "${urnRating}us:mpaa:nc-17":
	case "${urnRating}us:mpaa:nr":
	case "${urnRating}us:mpaa:m":
	case "${urnRating}us:mpaa:gp":
	case "${urnRating}us:mpaa:sma":
	case "${urnRating}us:mpaa:x":
		for (rating in mmpaRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
	case "${urnRating}us:tvpg:tv-y":
	case "${urnRating}us:tvpg:tv-y7":
	case "${urnRating}us:tvpg:tv-y7-fv":
	case "${urnRating}us:tvpg:tv-g":
	case "${urnRating}us:tvpg:tv-pg":
	case "${urnRating}us:tvpg:tv-14":
	case "${urnRating}us:tvpg:tv-ma":
		for (rating in tvpgRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
        case "${urnRating}us:tvpg:v":
	case "${urnRating}us:tvpg:s":
	case "${urnRating}us:tvpg:l":
	case "${urnRating}us:tvpg:d":
	case "${urnRating}us:tvpg:fv":
		for (rating in tvpgRatingsreasoncodesUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
        case "${urnRating}us:fab:c":
	case "${urnRating}us:fab:f":
	case "${urnRating}us:fab:pd":
	case "${urnRating}us:fab:pd-m":
	case "${urnRating}us:fab:em":
	case "${urnRating}us:fab:ao":
        	for (rating in fabUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
        case "${urnRating}us:fab:violence":
	case "${urnRating}us:fab:frightening":
	case "${urnRating}us:fab:sexual":
	case "${urnRating}us:fab:mildlang":
	case "${urnRating}us:fab:stronglang":
        case "${urnRating}us:fab:substance":
	case "${urnRating}us:fab:intense":
	case "${urnRating}us:fab:bnudity":
	case "${urnRating}us:fab:fnudity":
	case "${urnRating}us:fab:explicit":
	case "${urnRating}us:fab:erotica":
		for (rating in fabreasoncodesUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;

        case "${urnRating}us:esrb:ec":
	case "${urnRating}us:esrb:e":
	case "${urnRating}us:esrb:e10+":
	case "${urnRating}us:esrb:t":
	case "${urnRating}us:esrb:m":
	case "${urnRating}us:esrb:ao":
        case "${urnRating}us:esrb:rp":
        	for (rating in esrbgamesUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;

        case "${urnRating}us:mpaat:gb":
        case "${urnRating}us:mpaat:rb":
        	for (rating in mpaattrailersUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
   
     case "${urnRating}gb:bbfc:e":  
	case "${urnRating}gb:bbfc:u":
	case "${urnRating}gb:bbfc:pg":
	case "${urnRating}gb:bbfc:12":
	case "${urnRating}gb:bbfc:15":
	case "${urnRating}gb:bbfc:18":
	case "${urnRating}gb:bbfc:r18":
		for (rating in tvmovieRatingsGB) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>" + rating.replaceAll("&","&amp;") + "</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;

          
        case "${urnRating}ca:chvrs:g":
	case "${urnRating}ca:chvrs:pg":
	case "${urnRating}ca:chvrs:14a":
	case "${urnRating}ca:chvrs:18a":
	case "${urnRating}ca:chvrs:r": 
	
		for (rating in chvrsRatingsCA) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;

        case "${urnRating}ca:cbsc:e": 
        case "${urnRating}ca:cbsc:c":
	case "${urnRating}ca:cbsc:c8":
	case "${urnRating}ca:cbsc:g":
	case "${urnRating}ca:cbsc:pg":
	case "${urnRating}ca:cbsc:14+":
        case "${urnRating}ca:cbsc:18+":
      		for (rating in cbscRatingsCA) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
        case "${urnRating}ie:ifco:e": 
        case "${urnRating}ie:ifco:g":
	case "${urnRating}ie:ifco:pg":
	case "${urnRating}ie:ifco:12":
	case "${urnRating}ie:ifco:15":
	case "${urnRating}ie:ifco:18":
      		for (rating in filmtvifcoIE) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
        case "${urnRating}au:ncs:e": 
        case "${urnRating}au:ncs:g":
	case "${urnRating}au:ncs:pg":
	case "${urnRating}au:ncs:m":
	case "${urnRating}au:ncs:ma15":
	case "${urnRating}au:ncs:r18":
      		for (rating in filmtvncsAU) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
        
        case "${urnRating}nz:oflc:e": 
        case "${urnRating}nz:oflc:g":
	case "${urnRating}nz:oflc:pg":
	case "${urnRating}nz:oflc:m":
	case "${urnRating}nz:oflc:rp13":
	case "${urnRating}nz:oflc:r13":
	case "${urnRating}nz:oflc:r15":
	case "${urnRating}nz:oflc:rp16":
        case "${urnRating}nz:oflc:r16": 
        case "${urnRating}nz:oflc:r18":
	case "${urnRating}nz:oflc:r":
	      		for (rating in filmtvoflcNZ) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
       	case "${urnRating}fr:moc:u":
		case "${urnRating}fr:moc:10":
		case "${urnRating}fr:moc:12":
		case "${urnRating}fr:moc:16":
		case "${urnRating}fr:moc:18":
		       for (rating in MocRatingFR) { 
                       rating = urnRating + rating;
                       this.log.info "rating[$rating] - resource[$resource]";
                       resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
                       if (rating == resource) {
                             log.info "Terminating Loop";
                             break;
                       }
		       }
		break;
		
		case "${urnRating}de:fsk:0":
		case "${urnRating}de:fsk:6":
		case "${urnRating}de:fsk:12":
		case "${urnRating}de:fsk:16":
		case "${urnRating}de:fsk:18":
		       for (rating in FSKRatingDE) { 
                       rating = urnRating + rating;
                       this.log.info "rating[$rating] - resource[$resource]";
                       resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
                       if (rating == resource) {
                             log.info "Terminating Loop";
                             break;
                       }
		       }
		 break; 

		case "${urnRating}at:fsk:0":
 		case "${urnRating}at:fsk:6":
 		case "${urnRating}at:fsk:12":
		case "${urnRating}at:fsk:16":
		case "${urnRating}at:fsk:18":
        for (rating in FSKRatingAT) { 
		   rating = urnRating + rating;
		   this.log.info "rating[$rating] - resource[$resource]";
		   resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
		   if (rating == resource) {
		    log.info "Terminating Loop";
		    break;
   }
  }
  break;

			  case "${urnRating}ch:fsk:0":
			 case "${urnRating}ch:fsk:6":
			 case "${urnRating}ch:fsk:12":
			 case "${urnRating}ch:fsk:16":
			 case "${urnRating}ch:fsk:18":
			        for (rating in FSKRatingCH) { 
			   rating = urnRating + rating;
			   this.log.info "rating[$rating] - resource[$resource]";
			   resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			   if (rating == resource) {
			    log.info "Terminating Loop";
			    break;
			   }
  }
  break;

  case "${urnRating}be:kijkwijzer:al":
	case "${urnRating}be:kijkwijzer:6":
	case "${urnRating}be:kijkwijzer:9":
	case "${urnRating}be:kijkwijzer:12":
	case "${urnRating}be:kijkwijzer:16":
      		for (rating in KijkwijzerRatingBE) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;

		case "${urnRating}lu:fsk:0":
	case "${urnRating}lu:fsk:6":
	case "${urnRating}lu:fsk:12":
	case "${urnRating}lu:fsk:16":
	case "${urnRating}lu:fsk:18":
      		for (rating in FSKRatingLU) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;

		case "${urnRating}lu:moc:u":
	case "${urnRating}lu:moc:10":
	case "${urnRating}lu:moc:12":
	case "${urnRating}lu:moc:16":
	case "${urnRating}lu:moc:18":
      		for (rating in MocRatingLU) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;

		case "${urnRating}nl:kijkwijzer:al":
	case "${urnRating}nl:kijkwijzer:6":
	case "${urnRating}nl:kijkwijzer:9":
	case "${urnRating}nl:kijkwijzer:12":
	case "${urnRating}nl:kijkwijzer:16":
      		for (rating in KijkwijzerRatingNL) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
       
   
	default:
		resourceXml = "<dece:Resource>$resource</dece:Resource>";
		break;
}

this.log.info "resource [$resource]";
this.log.info "resourceXml [$resourceXml]";


testCase.setPropertyValue("policyResourceXML", resourceXml);]]></script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("POST - PolicyCreate");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="POST - PolicyCreate"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - PolicyCreate" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>${#TestCase#policyClass}</dece:PolicyClass>
      ${#TestCase#policyResourceXML}
      <!--<dece:RequestingEntity>${#TestCase#policyRequestEntity}</dece:RequestingEntity>-->
      <dece:RequestingEntity>urn:dece:userid:org:dece:${#TestCase#policyRequestEntity}</dece:RequestingEntity>
      <dece:PolicyAuthority>${#TestCase#policyAuthority}</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#TestCase#policyCreator}">
            <dece:Value>${#TestCase#policyStatus}</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="POLICYCLASS" value="${#TestCase#policyClassEncoded}"/>
  <con:entry key="USER" value="${#TestCase#assertionUserIdFULL2}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('POST - PolicyCreate');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify the response headers and body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = tP.getPropertyValue("HOST");
def urnacct   = tP.getPropertyValue("urnaccount");

def acct      = tC.getPropertyValue("nodeaccountid");

def sh            = tC.getPropertyValue("streamhandleFULL");
def account       = tC.getPropertyValue("assertionAccountIdFULL");
def errorRespType = tC.getPropertyValue("expectErrTypePolicyCreate");
def XMLbody       = tC.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");
String orgRequest = url + "/rest/$major/$minor/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";

/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
	break;
}
	
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");
assert tC.getPropertyValue("httpStatus") == expectHTTPstatus;
</script></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypePolicyCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62/User/urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2/Policy/urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>policyAuthority</con:name><con:value>urn:dece:role:type:coordinator</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value>08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value>08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>policyResource</con:name><con:value>urn:dece:type:rating:us:mpaa:pg-13</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>streamhandleFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Policy - Establish Parental Control Rating</con:value></con:property><con:property><con:name>username</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyResourceXML</con:name><con:value><![CDATA[<dece:Resource>urn:dece:type:rating:us:mpaa:g</dece:Resource>
<dece:Resource>urn:dece:type:rating:us:mpaa:pg</dece:Resource>
<dece:Resource>urn:dece:type:rating:us:mpaa:pg-13</dece:Resource>
]]></con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77323</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreate for Account" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
tC.setPropertyValue("policyAuthority","urn:dece:role:coordinator");
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("streamhandleFULL",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("rightstokenid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyAuthority",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("policyStatus",null);
tC.setPropertyValue("policyResourceXML",null);
tC.setPropertyValue("expectErrTypePolicyCreate",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
tC.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
tC.setPropertyValue("policyAuthority",callTC.getPropertyValue("policyAuthority"));
tC.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
tC.setPropertyValue("policyStatus",callTC.getPropertyValue("policyStatus"));
tC.setPropertyValue("expectErrTypePolicyCreate",callTC.getPropertyValue("expectErrTypePolicyCreate"));
tC.setPropertyValue("policyAuthority", "urn:dece:role:type:coordinator");

if (tC.getPropertyValue("expectErrTypePolicyCreate") == null || tC.getPropertyValue("expectErrTypePolicyCreate") == "") {
		tC.setPropertyValue("expectErrTypePolicyCreate","SUCCESS");
}
if (tC.getPropertyValue("policyCreator") == null || tC.getPropertyValue("policyCreator") == "") {
		tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL"));
}

switch (tC.getPropertyValue("policyClass")) {
	case "urn:dece:type:policy:EndUserLicenseAgreement":
		tC.setPropertyValue("policyResource","urn:dece:agreement:enduserlicenseagreement:10");
	break;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Policy &lt;dece:Resource> XML"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
/*
*  Complete rating set which doesn't appear to work
mmpaRatingsUS = ["US:MPAA:G", "US:MPAA:PG", "US:MPAA:PG-13","US:MPAA:R", "US:MPAA:NC-17", "US:MPAA:NR",
	"US:MPAA:M", "US:MPAA:GP", "US:MPAA:SMA","US:MPAA:X"];
*/
	
mmpaRatingsUS = ["US:MPAA:G", "US:MPAA:PG", "US:MPAA:PG-13","US:MPAA:R", "US:MPAA:NC-17"];

String resourceXml = "";
String urnRating   = testProject.getPropertyValue("urnRating");

def resource = testCase.getPropertyValue("policyResource");

switch (resource) {
	case "${urnRating}US:MPAA:M":
	case "${urnRating}US:MPAA:NC-17":
	case "${urnRating}US:MPAA:R":
	case "${urnRating}US:MPAA:PG-13":
	case "${urnRating}US:MPAA:PG":
		for (rating in mmpaRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "&lt;dece:Resource>$rating&lt;/dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
	break;
	default:
		resourceXml = "&lt;dece:Resource>$resource&lt;/dece:Resource>";
	break;
}

this.log.info "resource [$resource]";
this.log.info "resourceXml [$resourceXml]";

testCase.setPropertyValue("policyResourceXML", resourceXml);


</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("POST - PolicyCreate Account");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="POST - PolicyCreate Account"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/{MAJOR}/{MINOR}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - PolicyCreate Account" mediaType="application/xml" postQueryString="false" sslKeystore="221700_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding/><con:endpoint>https://${#Project#targetHost}:${#Project#targetPort}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>${#TestCase#policyClass}</dece:PolicyClass>
      ${#TestCase#policyResourceXML}
      <!--<dece:Resource>${#TestCase#policyResource}</dece:Resource>-->
      <dece:RequestingEntity>${#TestCase#policyRequestEntity}</dece:RequestingEntity>
      <dece:PolicyAuthority>${#TestCase#policyAuthority}</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="${#TestCase#policyCreator}">
            <dece:Value>${#TestCase#policyStatus}</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('POST - PolicyCreate Account');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify the response headers and body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = tP.getPropertyValue("targetHost");
def urnacct   = tP.getPropertyValue("urnaccount");
def urnstream = tP.getPropertyValue("urnstream");
def acct      = tC.getPropertyValue("nodeaccountid");

def sh            = tC.getPropertyValue("streamhandleFULL");
def account       = tC.getPropertyValue("assertionAccountIdFULL");
def errorRespType = tC.getPropertyValue("expectErrTypePolicyCreate");
def XMLbody       = tC.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");
String orgRequest = url + "/rest/$major/$minor/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml";

/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
	break;
}
	
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");
assert tC.getPropertyValue("httpStatus") == expectHTTPstatus;
</script></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:C9E7EEF12F676AE4E0401F0A05997BB6</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:C9E7F7B295BDC2E7E0401F0A05990FA5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypePolicyCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>770</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 403 Forbidden</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>221700</con:value></con:property><con:property><con:name>policyAuthority</con:name><con:value>urn:dece:role:type:coordinator</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:EnableManageUserConsent</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value>urn:dece:userid:org:dece:C9E7F7B295BDC2E7E0401F0A05990FA5</con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value>urn:dece:org:org:dece:221700</con:value></con:property><con:property><con:name>policyResource</con:name><con:value>urn:dece:userid:org:dece:C9E7F7B295BDC2E7E0401F0A05990FA5</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>streamhandleFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Policy - Establish High-Level Policies for User/Account/Node</con:value></con:property><con:property><con:name>username</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>XMLbody</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2011/08/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Error ErrorID="urn:dece:errorid:org:dece:Policy:LatestTOUNotAccepted">
      <Reason Language="en">Latest TOU Policy is Not Accepted</Reason>
      <OriginalRequest>https://qa.p.uvvu.com:7001/rest/$major/$minor/Account/urn:dece:accountid:org:dece:C9E7EEF12F676AE4E0401F0A05997BB6/Policy/urn:dece:type:policy:EnableManageUserConsent</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/$major/$minor/error/en/ErrorList.html#Policy:LatestTOUNotAccepted</ErrorLink>
   </Error>
</ErrorList>]]></con:value></con:property><con:property><con:name>policyResourceXML</con:name><con:value>&lt;dece:Resource>urn:dece:userid:org:dece:C9E7F7B295BDC2E7E0401F0A05990FA5&lt;/dece:Resource></con:value></con:property><con:property><con:name>QC_Id</con:name><con:value>77324</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyDelete for User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true" id="065a02b4-9793-4ac7-86a6-80744d3800f3"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("expectErrTypePolicyGet",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
def v2 = context.expand( '${#Project#versionMinor}' )
if(v2!=tP.getPropertyValue("versionURLEncode"))
{
	tC.setPropertyValue("policyClassEncoded",callTC.getPropertyValue("policyClass"));
	tC.setPropertyValue("PolicyIDEncoded",callTC.getPropertyValue("PolicyID"));
}
else
{
	tC.setPropertyValue("policyClassEncoded",URLEncoder.encode(callTC.getPropertyValue("policyClass"),"UTF-8"));
	tC.setPropertyValue("PolicyIDEncoded",URLEncoder.encode(callTC.getPropertyValue("PolicyID"),"UTF-8"));
}
tC.setPropertyValue("PolicyID",callTC.getPropertyValue("PolicyID"));

tC.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));

if (tC.getPropertyValue("expectErrTypePolicyGet") == null || tC.getPropertyValue("expectErrTypePolicyGet") == "") {
		tC.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("DELETE - PolicyDelete");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="DELETE - PolicyDelete"><con:settings/><con:config service="Policies" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="DELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DELETE - PolicyDelete" mediaType="application/xml" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Authorization" value="${#TestCase#assert}"/>
  &lt;con:entry key="If-Match" value="*"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="MINOR" value="${#Project#versionMinor}"/>
  <con:entry key="MAJOR" value="${#Project#versionMajor}"/>
  <con:entry key="POLICYCLASS" value="${#TestCase#PolicyIDEncoded}"/>
  <con:entry key="USER" value="${#TestCase#assertionUserIdFULL2}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('DELETE - PolicyDelete');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Process response body and headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def XMLbody    = tC.getPropertyValue("XMLbody");
def httpStatus = tC.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = tC.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


tC.setPropertyValue("policyExists", policyWasFound);</script></con:config></con:testStep><con:testStep type="groovy" name="Return policyExists to calling test case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",tC.getPropertyValue("policyExists"));
</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Policy - Remove all Parental Control Policies</con:value></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value>SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>expectErrTypePolicyGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>policyExists</con:name><con:value>false</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 200 OK</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QC_Id</con:name><con:value>77325</con:value></con:property><con:property><con:name>PolicyID</con:name><con:value>urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value>urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value>urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>assert2</con:name><con:value>SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>PolicyIDEncoded</con:name><con:value>urn:dece:policyid:org:dece:08D514127D224B7DE05307991F0AE1F1</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyDelete for Account" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("expectErrTypePolicyGet",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));

if (tC.getPropertyValue("expectErrTypePolicyGet") == null || tC.getPropertyValue("expectErrTypePolicyGet") == "") {
		tC.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}</script></con:config></con:testStep><con:testStep type="groovy" name="pem set"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep  testStep = testCase.getTestStepByName("DELETE - PolicyDelete");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

//switch (nodeId) {
//	case "10":  // Portal
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\10_concat.pem";
//	break;
//	case "1910":  // LLP standalone
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1910.pem";
//	break;
//	case "221500":  // LLP
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\910_concat.pem";
//	break;
//	case "221501":  // LLPCS
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\221501_concat.pem";
//	break;
//	case "221700":  // DLP
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\914_concat.pem";
//	break;
//	case "221701":  // DLPCS
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\221701_concat.pem";
//	break;
//	case "441500":  // RTR
//	default:
//		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\912_concat.pem";
//	break;
//}
switch (nodeId) {
	case "1910":  // LLP standalone
		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1910.pem";
	break;
	case "1914":  // DLP standalone
		keyStorePath = "C:\\Documents and Settings\\ashwin.tikle\\Desktop\\certs\\1914_concat.pem";
	break;
	case "221500":  // LLP
		keyStorePath = "C:\\certificates\\221500_concat.pem";
	break;
	case "221501":  // LLPCS
		keyStorePath = "C:\\certificates\\221501_concat.pem";
	break;
	case "221700":  // DLP
		keyStorePath = "C:\\certificates\\221700_concat.pem";
	break;
	case "221701":  // DLPCS
		keyStorePath = "C:\\certificates\\221701_concat.pem";
	break;
	case "441500":  // RTR
	default:
		keyStorePath = "C:\\certificates\\" + nodeId + "_concat.pem";
	break;
}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('DELETE - PolicyDelete');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Process response body and headers"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def XMLbody    = tC.getPropertyValue("XMLbody");
def httpStatus = tC.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = tC.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


tC.setPropertyValue("policyExists", policyWasFound);</script></con:config></con:testStep><con:testStep type="groovy" name="Return policyExists to calling test case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");
def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",tC.getPropertyValue("policyExists"));
</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_04600 - StreamCreate - DLPCS - Policy - Can create stream when ShareMediaHistory policy is absent</con:value></con:property><con:property><con:name>sName</con:name><con:value>Dynamic LASP Customer Service Test Cases</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>221700</con:value></con:property><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">d8a2af59-94ce-4d58-a97b-8920da8cf22a</con:value></con:property><con:property><con:name>assert</con:name><con:value>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</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:9B66525BAF67015BE0401F0A059942CA</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ShareMediaHistory</con:value></con:property><con:property><con:name>expectErrTypePolicyGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>policyExists</con:name><con:value>false</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 200 OK</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QC_Id</con:name><con:value>77326</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreate for Block unrated content" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" discardOkResults="true" id="92bb757e-0715-46bf-b13b-1805cd96a9f8"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def tC  = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

tC.setPropertyValue("nodeid",null);
tC.setPropertyValue("policyStatus","urn:dece:type:status:active");
tC.setPropertyValue("policyAuthority","urn:dece:role:coordinator");
tC.setPropertyValue("accountoid",null);
tC.setPropertyValue("streamhandleFULL",null);
tC.setPropertyValue("useroid",null);
tC.setPropertyValue("rightstokenid",null);
tC.setPropertyValue("assertionUUID",null);
tC.setPropertyValue("assert",null);
tC.setPropertyValue("assert2",null);
tC.setPropertyValue("assertionAccountIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL",null);
tC.setPropertyValue("assertionUserIdFULL1",null);
tC.setPropertyValue("assertionUserIdFULL2",null);
tC.setPropertyValue("policyClass",null);
tC.setPropertyValue("policyResource",null);
tC.setPropertyValue("policyRequestEntity",null);
tC.setPropertyValue("policyAuthority",null);
tC.setPropertyValue("policyCreator",null);
tC.setPropertyValue("policyStatus",null);
tC.setPropertyValue("policyResourceXML",null);
tC.setPropertyValue("expectErrTypePolicyCreate",null);


</script></con:config></con:testStep><con:testStep type="groovy" name="Extract required Properties from calling Test Case"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def callTSname = tC.getPropertyValue("sName");
def callTCname = tC.getPropertyValue("tName");

def callTC = tP.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

tC.setPropertyValue("username",callTC.getPropertyValue("username"));
tC.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
tC.setPropertyValue("assert",callTC.getPropertyValue("assert"));
tC.setPropertyValue("assert2",callTC.getPropertyValue("assert2"));
tC.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
tC.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
tC.setPropertyValue("assertionUserIdFULL1",callTC.getPropertyValue("assertionUserIdFULL1"));
tC.setPropertyValue("assertionUserIdFULL2",callTC.getPropertyValue("assertionUserIdFULL2"));
tC.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
tC.setPropertyValue("policyClassEncoded",callTC.getPropertyValue("policyClassEncoded"));
tC.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
tC.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
tC.setPropertyValue("policyAuthority",callTC.getPropertyValue("policyAuthority"));
tC.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
tC.setPropertyValue("policyStatus",callTC.getPropertyValue("policyStatus"));
tC.setPropertyValue("expectErrTypePolicyCreate",callTC.getPropertyValue("expectErrTypePolicyCreate"));
tC.setPropertyValue("policyAuthority", "urn:dece:role:type:coordinator");

if (tC.getPropertyValue("expectErrTypePolicyCreate") == null || tC.getPropertyValue("expectErrTypePolicyCreate") == "") {
		tC.setPropertyValue("expectErrTypePolicyCreate","SUCCESS");
}
if (tC.getPropertyValue("policyCreator") == null || tC.getPropertyValue("policyCreator") == "") {
		tC.setPropertyValue("policyCreator",tC.getPropertyValue("assertionUserIdFULL1"));
}

switch (tC.getPropertyValue("policyClass")) {
	case "urn:dece:type:policy:EndUserLicenseAgreement":
		tC.setPropertyValue("policyResource","urn:dece:agreement:enduserlicenseagreement:10");
	break;
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Policy &lt;dece:Resource> XML" disabled="true"><con:settings/><con:config><script><![CDATA[def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
/*
*  Complete rating set which doesn't appear to work
mmpaRatingsUS = ["us:mpaa:G", "us:mpaa:pg", "us:mpaa:pg-13","us:mpaa:r", "us:mpaa:nc-17", "us:mpaa:NR",
	"us:mpaa:m", "us:mpaa:GP", "us:mpaa:SMA","us:mpaa:X"];
*/
	
mmpaRatingsUS = ["us:mpaa:g","us:mpaa:pg","us:mpaa:pg-13","us:mpaa:r","us:mpaa:nc-17"];
chvrsRatingsCA = ["CA:chvrs:g","CA:chvrs:pg","CA:chvrs:14a","CA:chvrs:18a","CA:chvrs:r","CA:chvrs:e"];
tvpgRatingsUS = ["us:tvpg:tv-y","us:tvpg:tv-y7","us:tvpg:tv-y7-fv","us:tvpg:tv-pg","us:tvpg:tv-14","us:tvpg:tv-ma"];
cbscRatingsCA = ["CA:cbsc:c","CA:cbsc:c8","CA:cbsc:g","CA:cbsc:pg","CA:cbsc:14+","CA:cbsc:18+","CA:cbsc:e"];
tvmovieRatingsUK = ["gb:bbfc:u","gb:bbfc:pg","gb:bbfc:12","gb:bbfc:12a","gb:bbfc:15","gb:bbfc:18","gb:bbfc:r18",];
//tvmovieRatingsGB = ["gb:film & tv:bbfc:u","gb:film & tv:bbfc:pg","gb:film & tv:bbfc:12","gb:film & tv:bbfc:12a","gb:film & tv:bbfc:15","gb:film & tv:bbfc:18","gb:film & tv:bbfc:r18",];
tvmovieRatingsGB = ["gb:film & tv:bbfc:u","gb:film & tv:bbfc:pg","gb:film & tv:bbfc:12","gb:film & tv:bbfc:15","gb:film & tv:bbfc:18","gb:film & tv:bbfc:r18",];

String resourceXml = "";
String urnRating   = testProject.getPropertyValue("urnRating");

def resource = testCase.getPropertyValue("policyResource");

switch (resource) {
	case "${urnRating}us:mpaa:m":
	case "${urnRating}us:mpaa:nc-17":
	case "${urnRating}us:mpaa:r":
	case "${urnRating}us:mpaa:pg-13":
	case "${urnRating}us:mpaa:pg":
		for (rating in mmpaRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
	case "${urnRating}us:tvpg:tv-y":
	case "${urnRating}us:tvpg:tv-y7":
	case "${urnRating}us:tvpg:tv-y7-fv":
	case "${urnRating}us:tvpg:tv-pg":
	case "${urnRating}us:tvpg:tv-14":
	case "${urnRating}us:tvpg:tv-ma":
		for (rating in tvpgRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
	case "${urnRating}gb:bbfc:u":
	case "${urnRating}gb:bbfc:pg":
	case "${urnRating}gb:bbfc:12":
	case "${urnRating}gb:bbfc:12a":
	case "${urnRating}gb:bbfc:15":
	case "${urnRating}gb:bbfc:18":
	case "${urnRating}gb:bbfc:r18":
		for (rating in tvmovieRatingsUK) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>" + rating.replaceAll("&","&amp;") + "</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
     case "${urnRating}CA:chvrs:g":
	case "${urnRating}CA:chvrs:pg":
	case "${urnRating}CA:chvrs:14a":
	case "${urnRating}CA:chvrs:18a":
	case "${urnRating}CA:chvrs:r":
     case "${urnRating}CA:chvrs:e": 
		for (rating in chvrsRatingsCA) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
        
     case "${urnRating}CA:cbsc:c":
	case "${urnRating}CA:cbsc:c8":
	case "${urnRating}CA:cbsc:g":
	case "${urnRating}CA:cbsc:pg":
	case "${urnRating}CA:cbsc:14+":
        case "${urnRating}CA:cbsc:18+":
        case "${urnRating}CA:cbsc:e": 
		for (rating in cbscRatingsCA) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
     case "${urnRating}gb:film & tv:bbfc:u":
	case "${urnRating}gb:film & tv:bbfc:pg":
	case "${urnRating}gb:film & tv:bbfc:12":
	//case "${urnRating}gb:film & tv:bbfc:12a":
	case "${urnRating}gb:film & tv:bbfc:15":
	case "${urnRating}gb:film & tv:bbfc:18":
	case "${urnRating}gb:film & tv:bbfc:r18":
		for (rating in tvmovieRatingsGB) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>" + rating.replaceAll("&","&amp;") + "</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
   
	default:
		resourceXml = "<dece:Resource>$resource</dece:Resource>";
		break;
}

this.log.info "resource [$resource]";
this.log.info "resourceXml [$resourceXml]";

testCase.setPropertyValue("policyResourceXML", resourceXml);
]]></script></con:config></con:testStep><con:testStep type="groovy" name="Set Pem"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String nodeId = testProject.getPropertyValue("nodeid");
log.info "nodeid:"+nodeId;
testCase.setPropertyValue("keyStorePath","");

def myTC = testProject.getTestSuiteByName("E2E").getTestCaseByName("SetPem");

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

//assert runnerTC.status == Status.FINISHED;

keyStorePath = testCase.getPropertyValue("keyStorePath");

RestTestRequestStep testStep = testCase.getTestStepByName("POST - PolicyCreate");
this.log.info "testStep [$testStep]";
soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="POST - PolicyCreate"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - PolicyCreate" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>${#TestCase#policyClass}</dece:PolicyClass>
     
      <!--<dece:RequestingEntity>${#TestCase#policyRequestEntity}</dece:RequestingEntity>-->
      <dece:RequestingEntity>urn:dece:userid:org:dece:${#TestCase#policyRequestEntity}</dece:RequestingEntity>
      <dece:PolicyAuthority>${#TestCase#policyAuthority}</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#TestCase#policyCreator}">
            <dece:Value>${#TestCase#policyStatus}</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="POLICYCLASS" value="${#TestCase#policyClassEncoded}"/>
  <con:entry key="USER" value="${#TestCase#assertionUserIdFULL2}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();
def tStep  = tC.getTestStepByName('POST - PolicyCreate');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

tC.setPropertyValue("XMLbody", expXML);
tC.setPropertyValue("httpStatus", status);
tC.setPropertyValue("httpConnect", connection);
tC.setPropertyValue("httpContentType", contentType);
tC.setPropertyValue("httpContentLength", contentLength);
tC.setPropertyValue("httpContentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify the response headers and body"><con:settings/><con:config><script>def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

def url       = tP.getPropertyValue("HOST");
def urnacct   = tP.getPropertyValue("urnaccount");

def acct      = tC.getPropertyValue("nodeaccountid");

def sh            = tC.getPropertyValue("streamhandleFULL");
def account       = tC.getPropertyValue("assertionAccountIdFULL");
def errorRespType = tC.getPropertyValue("expectErrTypePolicyCreate");
def XMLbody       = tC.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = tP.getPropertyValue("versionMajor");
String minor = tP.getPropertyValue("versionMinor");
String orgRequest = url + "/rest/$major/$minor/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml";

/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
	break;
}
	
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + tC.getPropertyValue("httpStatus");
assert tC.getPropertyValue("httpStatus") == expectHTTPstatus;
</script></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZtc6o6EP4rDufjHeRF0MpUZ6hoS2utFdpzbr900hA1FQIlQdFffxNUqtb2etpPTJZ9eXbzZHfPKYhC3bIpRSnDMankUUioVUhbUpYSKwYUU4uACFGLQcuzb/uWXlUtsDWRKq7Tkp7Vl4ZWD5q6bDYBkI16AOUXpJqyqY8NbfwyftEMg6tSmiGXUAYIa0m6qhmypsl6w1ebVq1umbVq0zCepMojSin3zVWqqrQBldOWNGUssRRlsVhUF7VqnE4UXVU15c9t34NTFAGpfb7OqAiUtjf6sBogiMIQVmEcKefKns55QC0PTwhgWYo2sYLPYqmK2lS4TkDx5JdU2qLAJeO4OHYAiQmGIMQrIOpzi9g0Dip2OIlTzKbRp0loqnAsoxzKUDPIL0nZh3aioz2EKQUynQJt42uExihFBKLKw8htSb9Ou7XC1E8BoeM4jej+8e/wIDJHYZygQKbbtDbQTnd4pFLtcwQtl8Awo3iOBoKsCYCIbm4TwdNdVYYpGuO8jyknaE4FOmUX3sFxXQ0HTxBl37mgnctZO3kEYYbagX07Ml34e+Zofj4n2mp4b8crfOUOH1oFgF3lQlBe7fp4QMqSRGsLeE+wgZxL/NZUqfMKxuQJ67OJ3wOTq8tO7fdlXjMzs3Gjh/90vcWkYSyDCfJXuXp91e/X9deLpMvYWZ7Ug9Bbge7rDHp1hTy5974zGPgDP/cf3t5W3bvaaDCjIzhQ/1wncU9NlHx4zW7+DS4eDKMbhdPQf5w0x4uFdzO4P+stg9mwd3N5M5wuz5TbO3U0gJHbKtPZwb8v2755L3t5RZBtj4IGrlPp8VsC7OtmJiQ4kMeFqpWI5kMZIkxqCyvRO6yMtzscWPwO12f1zDE6ZsPu2Y6hNe1aVzVraqPZ1Hqqbepdfdtk1igOIHZiMsYilmi5a9p8DRBGFkUkQKk8jzPe6aj0hUcHMFBxyYg/gphQ5Me8PS8YDWcrzkxDw2comNI5M7RgqUuVQczuyF1qjxlK91qypu+15BGCOMFI9G1Ba8p5TRkvxRuYZyzUqnNQJSjjnT0VTdbSjTNToThKQiSAKlEcZCGqJtOkKIxC119dBpAW0lHXLx7bp2kd/ttWgOsEWChQkcsF4reIjswWY5vI5wmbuwlv3dtZgMW74uVkKYZrJPu/3lki6FFSxO50ul7H28Iutf/C+rvGnbu7b1o6fdsb/sT2ueM9a9918P3QPwvc/ylyzt4fmn+0VL4goHLI/TJQMMc7YbdbGp/3fEK0ty83qb5Vs/k8K55qQwzClHvn00kzFVVXPAQzPsKWfjxDRCmdKCftCyXug9ilfB9hxqbEY4ChiPeWSnE8YUH0EBULost7Yn7q9rkXkleOoZwdk3VCvtwKxF/uv9CCQo+Lh/yziNPg/cKO+NqJw/Pk+yHDZCJOYldYfkILGHO3mE+5ON11fszBseD7wrLIJRbG+fSSMfT5n4oYXy0JQBhnhLmOVAh2R2qBky0TZL0rfXBTTO1yjcf/v8fLuKAARHz5p7jwL7YxS7wAMtkZy5ugRyaz6XS6Nb1Rvygms7mezEanXk7mfXTtD+KPkp06HXK8/R8=</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypePolicyCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>httpContentLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:08D4C575DCE3276BE05305991F0A4C62/User/urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2/Policy/urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>urn:dece:org:org:dece:3232</con:value></con:property><con:property><con:name>policyAuthority</con:name><con:value>urn:dece:role:type:coordinator</con:value></con:property><con:property><con:name>policyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>policyCreator</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>policyRequestEntity</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>policyResource</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:rating:us:mpaa:x</con:value></con:property><con:property><con:name>policyStatus</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>sName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>streamhandleFULL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Policy - General Policy Establishment</con:value></con:property><con:property><con:name>username</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>policyResourceXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>QC_Id</con:name><con:value>77323</con:value></con:property><con:property><con:name>assertionUserIdFULL1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:08D4C57AFAD419A3E05307991F0A52E2</con:value></con:property><con:property><con:name>assert2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SAML2 Assertion=pVZbc9o6EP4rjPvYAV+wMXgCM44hKQ25FAdO6UtHyAsoMbIjyUDy6ysZcIGQHJo8ebTey7erT7t7xtE8tjyfc2CCJLS0mseUe7m0qWWMegnihHsUzYF7Anuhf93zrIrhoa2JVuq2m9rvWm1i4WoVyhMjwmXbdsbleqNmli03siPbaBgudqQq5xl0KReIiqZmGaZdNpXOvdHwqq5nNSqmY/3SSkNgXPqWKhVD24Ba8aY2EyL1dH25XFaW1UrCprplGKb+87oX4hnMkdY6W2eUB2KtjT6uRIAhjnEFJ3P9TN/TOYu4F5IpRSJjsIkVvRXL0I2GLnUiTqZftMIWoi6dJPkxQDShBKOYvCBVn2sQsyQq+fE0YUTM5m8mYRrKcRlWuIxNm37R9H1oJzraQ8g4KvMZMje++jABBhRDadDvNrUvp91abnrPEOWThM35/vHf8ABdQJykEJX5Nq0NtNMdHqlU6wyw16U4zjhZwI0ia4ow8M1tAj7dVemOwYSseoRLgq64Qqfvwjs4rqvRJlPg4iMXtHM5aydDFGfQ8ldsGVwE0+/u6MX+yfzz88XobjC6in48NnMAu8q5oLja9fGAlAWJ1hbRt9l8+fx8I8Sted0f/LoxR6Pry3o6dFw3jekwc8H6gdMr0rhYXTqBi6D7PRsZwydn+PPhavXA3SmEN19r5x3UX/VeFsbgvF8fP40vB+B+u3qc2cz+zx0GGA9Rt93xH0cTdhknMH5M47Fbxzi0/YiNHGN5Q+44ngaX4/q5/XV2Cd2B6d4Neg80IaNarRNFfrNIZwf/vmz75sNs/ABYbI+KBt126ULeEhLvNzMlIVF5kqt6qWo+XAAVWktZqd7hZbLdkciTd7g+G/W2HThu3TftC7PRqHYMp2q4jYZ5YfhVO7C2TWaN4gBikNAJUbFUy13T5n2AeO5xoBGw8iLJZKfj2jse20igUpf25SNIKIf7RLZnkxnJBBpxY5UukOlWY77AtdpT/aWmlW4ScUtvmT8RwPaasmntNeU+YJISUJ1bEZtLZnMhi/GEFpmIzcoCVShksrcz1WY9y647OifzNAYFVZ8nURZDJZ2leWl0vv5aZYR5Lu137vPn9mZih/+2NZA6EVEKXOVyDvIe4ch0MbeJvJ2ws5vw1r2fRUS9LFlQwQheI9n/9ZcniiAFSfwg6IRBuIVdaP+D9UeNg9vbD1q2e3549xnb30H42/yog4+H/lzg3meRS/Z+0vy1pf4OAfVD7heBogXZCbvd0+TElzOitX25aeWpki0WWf5UXTUKmfQu55Pp6Ialh4AzOcSe75NHoHrhRD9pYyhwH8Qu5PsIMzGjoUAC5rK3lPLjCStiCFytiF3ZFVen7p97IWXlBKzEMVkQy/VWIX53A8YeVnpSfCc/y4RFfy/siK+dODJPuSEKQqfqpLaF5zdogRPplsg5l7Bd58ccHAu+LyyKXGARkk/jTMDbf0pqgDU1hHGSUdFta7lgd6jmOMVzCt5fpVdu8rldLPLk/zf5MskpgEGu/5zk/tU+5qkXQKc7g3kT9MhsdtpBp2q5cktRs9lZz2Y7qBWzeR9d65X4tWSnToccb/0B</con:value></con:property><con:property><con:name>assertionUserIdFULL2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:08D4C578A14F1993E05307991F0A34C2</con:value></con:property><con:property><con:name>policyClassEncoded</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\API_Projects\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:requirements/><con:properties><con:property><con:name>AccountDisplayName</con:name><con:value>Acc_Create_20130930_062450</con:value></con:property><con:property><con:name>AccountId</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>AccountOid</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value>suspended</con:value></con:property><con:property><con:name>ADULT_MIN_AGE</con:name><con:value>18</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:org:200002</con:value></con:property><con:property><con:name>AllowAdult</con:name><con:value>urn:dece:type:policy:ParentalControl:AllowAdult</con:value></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>APID</con:name><con:value>urn:dece:apid:org:200002</con:value></con:property><con:property><con:name>audience</con:name><con:value>urn:dece:org:org:dece:RET_CS_1;urn:dece:org:org:dece:ACCESS;urn:dece:org:org:dece:ACCESCS;urn:dece:org:org:dece:DLASP;urn:dece:org:org:dece:DLASP_CS_1;urn:dece:org:org:dece:LLASP_CS_1;urn:dece:org:org:dece:DSP;urn:dece:org:org:dece:DSP_CS_1;urn:dece:org:org:dece:COO;urn:dece:org:org:dece:CON;urn:dece:org:org:dece:CON_CS_1;</con:value></con:property><con:property><con:name>Batch_HostName</con:name><con:value>https://qa.b.uvvu.com:7001</con:value></con:property><con:property><con:name>BlockUnratedContent</con:name><con:value>urn:dece:type:policy:ParentalControl:BlockUnratedContent</con:value></con:property><con:property><con:name>BlurayPackagedAuthorizedFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>cacheDuration</con:name><con:value>86400</con:value></con:property><con:property><con:name>CertMatchesNodeID</con:name><con:value>YES</con:value></con:property><con:property><con:name>CertMatchesNodeName</con:name><con:value>YES</con:value></con:property><con:property><con:name>certspath</con:name><con:value>C:\Certs\</con:value></con:property><con:property><con:name>certsPath_Linux</con:name><con:value>../../Certs/QALP1/</con:value></con:property><con:property><con:name>certsPath_Windows</con:name><con:value>../../Certs/QALP1/</con:value></con:property><con:property><con:name>CHILD_MAX_AGE</con:name><con:value>12</con:value></con:property><con:property><con:name>CID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>CIDStatus</con:name><con:value>suspended</con:value></con:property><con:property><con:name>clusterNumber</con:name><con:value>1</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>ContentProfiletemp</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>contentProfile_temp</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>coordinatorSchema</con:name><con:value>http://www.decellc.org/schema/2015/03/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_02</con:name><con:value>http://www.decellc.org/schema/2015/03/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_06</con:name><con:value>http://www.decellc.org/schema/2012/12/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_07</con:name><con:value>http://www.decellc.org/schema/2013/06/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_11</con:name><con:value>http://www.decellc.org/schema/2013/10/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_21</con:name><con:value>http://www.decellc.org/schema/2013/10/coordinator</con:value></con:property><con:property><con:name>coords</con:name><con:value>FALKY,COORD-10000,COORD-3034,COORD-2999,COORD-2509,COORD-627,UV-135,UV-340,Coord-2180</con:value></con:property><con:property><con:name>Country</con:name><con:value>US</con:value></con:property><con:property><con:name>CssrecordableAuthorizedFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:dvd:cssrecordable</con:value></con:property><con:property><con:name>DBHost</con:name><con:value>LP3CH</con:value></con:property><con:property><con:name>DBIdentifier</con:name><con:value>LP1</con:value></con:property><con:property><con:name>DBPassword</con:name><con:value>lp1db_23</con:value></con:property><con:property><con:name>DBUsername</con:name><con:value>DEQA1_APP</con:value></con:property><con:property><con:name>Device_HostName</con:name><con:value>https://qa.d.uvvu.com:7001</con:value></con:property><con:property><con:name>disablePriority</con:name><con:value>P3,CHILD</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfileEncoded</con:name><con:value>urn%3Adece%3Atype%3Adiscretemediaformat%3Abluray%3Apackaged</con:value></con:property><con:property><con:name>DiscreteMediaProfileHD</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfileInURL</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfileInURLtemp</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfileInURL_temp</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>DiscreteMediaProfilePD</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>DiscreteMediaProfileSD</con:name><con:value>urn:dece:type:discretemediaformat:dvd:cssrecordable</con:value></con:property><con:property><con:name>DiscreteMediaRightsRemaining</con:name><con:value>0</con:value></con:property><con:property><con:name>DiscreteMediaRightsRemainingHD</con:name><con:value>1</con:value></con:property><con:property><con:name>DiscreteMediaRightsRemainingPD</con:name><con:value>0</con:value></con:property><con:property><con:name>DiscreteMediaRightsRemainingSD</con:name><con:value>0</con:value></con:property><con:property><con:name>DvdPackagedAuthorizedFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:dvd:packaged</con:value></con:property><con:property><con:name>E2E_AccountOID_BAU1</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>E2E_AccountOID_FAU1</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>E2E_AccountOID_FAU2</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>E2E_AccountOID_SAU1</con:name><con:value>0C0CD559B90A1E11E05305991F0AF489</con:value></con:property><con:property><con:name>E2E_UserOID_BAU1</con:name><con:value>0C0C9E8C6AD23F75E05307991F0A8176</con:value></con:property><con:property><con:name>E2E_UserOID_FAU1</con:name><con:value>0C0CD5590A651E07E05305991F0A0601</con:value></con:property><con:property><con:name>E2E_UserOID_FAU2</con:name><con:value>0C0CD559BA921E11E05305991F0AF489</con:value></con:property><con:property><con:name>E2E_UserOID_SAU1</con:name><con:value>0C0CD5584A6D3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>E2E_UUID_BAU1</con:name><con:value>_5dd254bd-43e4-49bd-9628-c5e4c053ea1e</con:value></con:property><con:property><con:name>E2E_UUID_FAU1</con:name><con:value>_e8750b20-00a7-426f-9a20-b6079bebd4a4</con:value></con:property><con:property><con:name>E2E_UUID_FAU2</con:name><con:value>_2619ac58-12e7-4888-a037-e90f72c0de1d</con:value></con:property><con:property><con:name>E2E_UUID_SAU1</con:name><con:value>_a8111a4e-e0ff-4a1f-a013-9f8a53f03bb1</con:value></con:property><con:property><con:name>enablePriorityScript</con:name><con:value>falsedisablePriority=P3,CHILD,CLG</con:value></con:property><con:property><con:name>ENV</con:name><con:value>QALP1</con:value></con:property><con:property><con:name>envIdentifier</con:name><con:value>LP1</con:value></con:property><con:property><con:name>ExecutionPriority</con:name><con:value>P0,P1,P2,P3</con:value></con:property><con:property><con:name>Extract_Device_Account_ID</con:name><con:value>Extract_Device_Account_ID</con:value></con:property><con:property><con:name>FulfillmentManifestLoc1Location</con:name><con:value>https://dl.bestbuy.com/ml1</con:value></con:property><con:property><con:name>FulfillmentManifestLoc1Preference</con:name><con:value>1</con:value></con:property><con:property><con:name>FulfillmentWebLoc1Location</con:name><con:value>https://dl.bestbuy.com/wl1</con:value></con:property><con:property><con:name>FulfillmentWebLoc1Preference</con:name><con:value>1</con:value></con:property><con:property><con:name>GeoProfile</con:name><con:value>US</con:value></con:property><con:property><con:name>HOST</con:name><con:value>qa.p.uvvu.com</con:value></con:property><con:property><con:name>ISCNode</con:name><con:value>yes</con:value></con:property><con:property><con:name>JDBCConnStr</con:name><con:value>jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com</con:value></con:property><con:property><con:name>JDBCDriver</con:name><con:value>oracle.jdbc.driver.OracleDriver</con:value></con:property><con:property><con:name>JKSAliasName</con:name><con:value>qalp1</con:value></con:property><con:property><con:name>JKSPassword</con:name><con:value>testing</con:value></con:property><con:property><con:name>LeaseCreatedDate</con:name><con:value>null</con:value></con:property><con:property><con:name>LeaseExpirationDate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>LeaseStatus</con:name><con:value>active</con:value></con:property><con:property><con:name>LeaseType</con:name><con:value>fulfilled</con:value></con:property><con:property><con:name>LicenseAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>LicenseAcqLoc1DRMType</con:name><con:value>urn:dece:drm:playready:11</con:value></con:property><con:property><con:name>LicenseAcqLoc1Location</con:name><con:value>https://dl.bestbuy.com/al1</con:value></con:property><con:property><con:name>LicenseAcqLoc1Preference</con:name><con:value>1</con:value></con:property><con:property><con:name>LicenseAcqLoc2DRMType</con:name><con:value>urn:dece:drm:playready:11</con:value></con:property><con:property><con:name>LicenseAcqLoc2Location</con:name><con:value>https://dl.bestbuy.com/al2</con:value></con:property><con:property><con:name>LicenseAcqLoc2Preference</con:name><con:value>2</con:value></con:property><con:property><con:name>LicenseAcqLoc3DRMType</con:name><con:value>urn:dece:drm:playready:11</con:value></con:property><con:property><con:name>LicenseAcqLoc3Location</con:name><con:value>https://dl.bestbuy.com/al3</con:value></con:property><con:property><con:name>LicenseAcqLoc3Preference</con:name><con:value>3</con:value></con:property><con:property><con:name>md_schema_06</con:name><con:value>http://www.movielabs.com/schema/md/v1.2/md</con:value></con:property><con:property><con:name>md_schema_07</con:name><con:value>http://www.movielabs.com/schema/md/v1.2/md</con:value></con:property><con:property><con:name>md_schema_11</con:name><con:value>http://www.movielabs.com/schema/md/v2.1/md</con:value></con:property><con:property><con:name>md_schema_21</con:name><con:value>http://www.movielabs.com/schema/md/v2.1/md</con:value></con:property><con:property><con:name>NodeAccountId</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NodeAccountIdtemp</con:name><con:value>urn:dece:accountid:org:dece:FA934F13E36DB4B7E0401F0A07997884</con:value></con:property><con:property><con:name>NodeAccountOid</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET_CS_1</con:value></con:property><con:property><con:name>nodeIdAccportal</con:name><con:value>ACCESS</con:value></con:property><con:property><con:name>nodeIdAccportal2</con:name><con:value>ACCESS_2</con:value></con:property><con:property><con:name>nodeIdAccportalCS</con:name><con:value>ACCESCS</con:value></con:property><con:property><con:name>nodeIdAccportalCS2</con:name><con:value>ACCESSCS_2</con:value></con:property><con:property><con:name>nodeIdCON</con:name><con:value>CON</con:value></con:property><con:property><con:name>nodeIdCON2</con:name><con:value>CON_2</con:value></con:property><con:property><con:name>nodeIdCONCS</con:name><con:value>CON_CS_1</con:value></con:property><con:property><con:name>nodeIdCONCS2</con:name><con:value>CON_CS_2</con:value></con:property><con:property><con:name>nodeIdCoo</con:name><con:value>COO</con:value></con:property><con:property><con:name>nodeIdCoo2</con:name><con:value>COO_2</con:value></con:property><con:property><con:name>nodeIdCoordCS</con:name><con:value>coord:cs</con:value></con:property><con:property><con:name>nodeIdDECE</con:name><con:value>DECE</con:value></con:property><con:property><con:name>nodeIdDECECS</con:name><con:value>dece:cs</con:value></con:property><con:property><con:name>nodeIdDECECS1</con:name><con:value>truststore-dece-cs</con:value></con:property><con:property><con:name>nodeIdDEV</con:name><con:value>DEV</con:value></con:property><con:property><con:name>nodeIdDEV2</con:name><con:value>DEV_2</con:value></con:property><con:property><con:name>nodeIdDEVCS</con:name><con:value>DEV_CS_1</con:value></con:property><con:property><con:name>nodeIdDEVCS2</con:name><con:value>DEV_CS_2</con:value></con:property><con:property><con:name>nodeIdDLASP</con:name><con:value>DLASP</con:value></con:property><con:property><con:name>nodeIdDLASP2</con:name><con:value>DLASP_2</con:value></con:property><con:property><con:name>nodeIdDLASPCS</con:name><con:value>DLASP_CS_1</con:value></con:property><con:property><con:name>nodeIdDLASPCS2</con:name><con:value>DLASP_CS_2</con:value></con:property><con:property><con:name>nodeIdDSP</con:name><con:value>DSP</con:value></con:property><con:property><con:name>nodeIdDSP2</con:name><con:value>DSP_2</con:value></con:property><con:property><con:name>nodeIdDSPCS</con:name><con:value>DSP_CS_1</con:value></con:property><con:property><con:name>nodeIdDSPCS2</con:name><con:value>DSP_CS_2</con:value></con:property><con:property><con:name>nodeIdLLASP</con:name><con:value>LLASP</con:value></con:property><con:property><con:name>nodeIdLLASP2</con:name><con:value>LLASP_2</con:value></con:property><con:property><con:name>nodeIdLLASPCS</con:name><con:value>LLASP_CS_1</con:value></con:property><con:property><con:name>nodeIdLLASPCS2</con:name><con:value>LLASP_CS_2</con:value></con:property><con:property><con:name>nodeIdportal</con:name><con:value>iscportal1</con:value></con:property><con:property><con:name>nodeIdportalCS</con:name><con:value>iscportalcs1</con:value></con:property><con:property><con:name>nodeIdRetailerforDeviceAuthToken</con:name><con:value/></con:property><con:property><con:name>nodeIdRTL</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodeIdRTL1</con:name><con:value>sriniretailer</con:value></con:property><con:property><con:name>nodeIdRTL2</con:name><con:value>RET_2</con:value></con:property><con:property><con:name>nodeIdRTLCS</con:name><con:value>RET_CS_1</con:value></con:property><con:property><con:name>nodeIdRTLCS1</con:name><con:value>RET_CS_1</con:value></con:property><con:property><con:name>nodeIdRTLCS2</con:name><con:value>RET_CS_2</con:value></con:property><con:property><con:name>nodeIdSPCLCS</con:name><con:value>dece:cs</con:value></con:property><con:property><con:name>NodeUserId</con:name><con:value>urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>NodeUserOid</con:name><con:value>0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>NodeUserSAMLAssertion</con:name><con:value>SAML2 Assertion=pVZbU+JKEP4rVPZxK2QSbiYlVCGXXUpUJFmPx5etYdKB0WSCMxNAf/2ZCZAFRA+rT6nu9OXry3T3ucBJ7HhtIYBLmrLSKomZ8HJu08g481IsqPAYTkB4knh++2roOWXk4a2KURp0m8ZvOGvU0MRBJkK4YVademS6WJGTOmq4E5iEVVxVokJkMGBCYiabhoPsmolsEzUCdOZVG57jlG0XPRilO+BC2VYiZWRsQK1E05hJOfcsa7lclpeVcsqnloOQbd1fDX0ygwQbrfN1RLkj3trIk3IIBOKYlEmaWOfWnsx5KDyfThmWGYeNr/A9X8hCrqVkQkGn34xCF8IBi9Kc7GCWMkpwTF+xzs8VyFkaltrxNOVUzpJ3g7CRNmzCipjErrJvhrUP7URDewi5wKaYYXtjawwRcGAESr/Gg6bx7bSq5aoBx0xEKU/EPvl3eIAtIE7nEJpiG9YG2ukGj2SqdQ7EGzASZ4Iu4Fo36xwTEJtqAjndVGnEIaKrIRWqQVdCo7N24R2Q62x06RSE/EyBdoqzNnKH4wxaN1F16V+Or75XBBvddBfW9CUe82QRTEkzB7ArnDOK0q7Jg6YsmmitMavePf2A0b9Pg8a4U+vcjS/tZ1HLglcY/uo+hMMxC6LgYtW/JfZTcpmIKHyZ/Hx4HvB24I7lXe86wbV7Hj/a0e3ygfxTaQTZ/eqpX6+PBFy/vlxd/mj3bm/vBxb57jYq5CeaD6l1cUsxdr73OZv+fAiD59F1F1Zpn91FrxWyCpLe5Gzm/rhyFnW4mFpB8Jj4Vd5rFuHs4N/nbd+8n00egcgtqdtg0C31VZWw/HiYaQ4NzSgX9eZ6+AgJTBotraVnh5epcUdDT9VwTaMO6nRrNRe161W7hxo9VKugmuvafdRGdWRvh8waxQHETsoiqn3pkbtum48BksQTwELg5iLN1KQTxgcWu1ji0oCN1SNImYAgVePZnq8SMastEl55rSePKcmmzxXbATBK16m8YTe8HUngezPZtvdm8hgInVPQg1v3tVCNLaTKxTNeZDK2ywtcZpCp0c71lPWc6lnNEjSZx6CRWkkaZjGU57N5nhlLrL+OiYnIueNekL+2d+M6/LdNgZIJqRYQOpYLUGWEI8vF3gbyfsDV3YC35ttZSPXDUvmUnJI1kv1ff9pE90fRI+1Op+d3/C3sQvovtD+r3Lm5+aRmd9j2R1/R/d3xf9ufNfB5119zPPwqctW9X1R/q2l90IDWYe8XjsIF3XG7PdPUwlcrorV9ufPyczlbLLL8qTb0JuTKuqUfg4UcyweSqR32EqRPwKzCiHXSwVDgPvBd8PcRZnLGfIklJGq2lHLyhAvRB6EvxIEaiqtTz889lypzElbyGK8Tq+tWI/7wACYe0XKKPVKfZcrDPwU7YmvHj4pTHYiSsqmm9LHw8k5bkFSZpWrNpXzX+DEDx5zvM4skF1ik6qdJJuH9PyW9v5oGJiTNmBx0jZyxu1NznPJlDt4foTdm8rVd3PH0/w95k+YtQNR+UvK5fX2OefoFsOnOXt44PbaaL1zk2j3b3l3N/eqZWyRlD13rDfstZydPhz3e+g8=</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL1</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>Node_ID</con:name><con:value>urn:dece:org:org:dece:500500</con:value></con:property><con:property><con:name>Node_OID</con:name><con:value>500500</con:value></con:property><con:property><con:name>NODE_USER_ID_BAU</con:name><con:value>urn:dece:userid:org:dece:0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU1</con:name><con:value>urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>NODE_USER_ID_FAU2</con:name><con:value>urn:dece:userid:org:dece:0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_ID_SAU</con:name><con:value>urn:dece:userid:org:dece:0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>NODE_USER_OID_BAU</con:name><con:value>0C0C9E8C6AD13F75E05307991F0A8176</con:value></con:property><con:property><con:name>NODE_USER_OID_FAU1</con:name><con:value>0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>NODE_USER_OID_FAU2</con:name><con:value>0C0CD559BA911E11E05305991F0AF489</con:value></con:property><con:property><con:name>NODE_USER_OID_SAU</con:name><con:value>0C0CD5584A6C3197E05307991F0A6BE8</con:value></con:property><con:property><con:name>NoPolicyEnforcement</con:name><con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value></con:property><con:property><con:name>NsmAuthorizedFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:nsm</con:value></con:property><con:property><con:name>OrgID</con:name><con:value>ISC_R1</con:value></con:property><con:property><con:name>Password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PolicyCountry</con:name><con:value>US</con:value></con:property><con:property><con:name>Policy_TOU</con:name><con:value>https://qa.c.uvvu.com:7001/Consent/Text/US/urn:dece:type:policy:TermsOfUse:20140811/html</con:value></con:property><con:property><con:name>PORT</con:name><con:value>7001</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>Provision_HostName</con:name><con:value>https://qa.p.uvvu.com:7001</con:value></con:property><con:property><con:name>PurchasedMediaProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PurchasedMediaProfileHD</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PurchasedMediaProfilePD</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PurchasedMediaProfileSD</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PurchasedMediaProfileUHD</con:name><con:value>urn:dece:type:mediaprofile:uhd</con:value></con:property><con:property><con:name>PurchaseInfoPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:0C0CD559B9091E11E05305991F0AF489</con:value></con:property><con:property><con:name>PurchaseInfoPurchaseTime</con:name><con:value>2010-11-29T08:44:01Z</con:value></con:property><con:property><con:name>PurchaseInfoPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:0C0CD5590A641E07E05305991F0A0601</con:value></con:property><con:property><con:name>PurchaseInfoRetailerID</con:name><con:value>urn:dece:org:org:dece:RET_CS_1</con:value></con:property><con:property><con:name>PurchaseProfileBurnsLeft</con:name><con:value>1</con:value></con:property><con:property><con:name>PurchaseProfileBurnsLeftHD</con:name><con:value>1</con:value></con:property><con:property><con:name>PurchaseProfileBurnsLeftPD</con:name><con:value>0</con:value></con:property><con:property><con:name>PurchaseProfileBurnsLeftSD</con:name><con:value>0</con:value></con:property><con:property><con:name>PurchaseProfileCanDownLoad</con:name><con:value>true</con:value></con:property><con:property><con:name>PurchaseProfileCanStream</con:name><con:value>true</con:value></con:property><con:property><con:name>QC_AutoMapping</con:name><con:value>enabled</con:value></con:property><con:property><con:name>QC_BulkUpdate</con:name><con:value>disabled</con:value></con:property><con:property><con:name>QC_Domain</con:name><con:value>Default</con:value></con:property><con:property><con:name>QC_password</con:name><con:value>******</con:value></con:property><con:property><con:name>QC_Project</con:name><con:value>DECE</con:value></con:property><con:property><con:name>QC_ProjectPath</con:name><con:value/></con:property><con:property><con:name>QC_ReExport</con:name><con:value>enabled</con:value></con:property><con:property><con:name>QC_ResultExportLevel</con:name><con:value>off</con:value></con:property><con:property><con:name>QC_RunName</con:name><con:value/></con:property><con:property><con:name>QC_soapUI_ARGS</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value>Root\DECE_API\DECE_API_7.1\IOT Test Cases\DiscreteMedia\DiscreteMediaRightLeaseCreate\Authentication</con:value></con:property><con:property><con:name>QC_TestPlanDirectory</con:name><con:value>Subject\DECE_1.0_Release\DECE_API\APIs\DiscreteMediaRightUpdate</con:value></con:property><con:property><con:name>QC_TestSet</con:name><con:value>Authentication</con:value></con:property><con:property><con:name>QC_TestType</con:name><con:value>MANUAL</con:value></con:property><con:property><con:name>QC_URL</con:name><con:value>http://stprqc01.va.neustar.com:8080/qcbin</con:value></con:property><con:property><con:name>QC_user</con:name><con:value>bhjoshi</con:value></con:property><con:property><con:name>Query_HostName</con:name><con:value>https://qa.q.uvvu.com:7001</con:value></con:property><con:property><con:name>Request_XML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RestVersion</con:name><con:value>/rest/$major/$minor</con:value></con:property><con:property><con:name>RetailerTransactionId</con:name><con:value>484593</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:07D1FA120D9238E2E05305991F0A2B58</con:value></con:property><con:property><con:name>RightsTokenStatus</con:name><con:value>pending</con:value></con:property><con:property><con:name>Rights_ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property><con:property><con:name>Rights_APID</con:name><con:value>urn:dece:apid:file:INTERACTIVE_MetadataDigitalCreate.txt:39983831</con:value></con:property><con:property><con:name>Rights_CID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>runTeardown</con:name><con:value>false</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=pVZbU+JKEP4rVPZxK2QSbiYlVCGXXUpUJFmPx5etYdKB0WSCMxNAf/2ZCZAFRA+rT6nu9OXry3T3ucBJ7HhtIYBLmrLSKomZ8HJu08g481IsqPAYTkB4knh++2roOWXk4a2KURp0m8ZvOGvU0MRBJkK4YVademS6WJGTOmq4E5iEVVxVokJkMGBCYiabhoPsmolsEzUCdOZVG57jlG0XPRilO+BC2VYiZWRsQK1E05hJOfcsa7lclpeVcsqnloOQbd1fDX0ygwQbrfN1RLkj3trIk3IIBOKYlEmaWOfWnsx5KDyfThmWGYeNr/A9X8hCrqVkQkGn34xCF8IBi9Kc7GCWMkpwTF+xzs8VyFkaltrxNOVUzpJ3g7CRNmzCipjErrJvhrUP7URDewi5wKaYYXtjawwRcGAESr/Gg6bx7bSq5aoBx0xEKU/EPvl3eIAtIE7nEJpiG9YG2ukGj2SqdQ7EGzASZ4Iu4Fo36xwTEJtqAjndVGnEIaKrIRWqQVdCo7N24R2Q62x06RSE/EyBdoqzNnKH4wxaN1F16V+Or75XBBvddBfW9CUe82QRTEkzB7ArnDOK0q7Jg6YsmmitMavePf2A0b9Pg8a4U+vcjS/tZ1HLglcY/uo+hMMxC6LgYtW/JfZTcpmIKHyZ/Hx4HvB24I7lXe86wbV7Hj/a0e3ygfxTaQTZ/eqpX6+PBFy/vlxd/mj3bm/vBxb57jYq5CeaD6l1cUsxdr73OZv+fAiD59F1F1Zpn91FrxWyCpLe5Gzm/rhyFnW4mFpB8Jj4Vd5rFuHs4N/nbd+8n00egcgtqdtg0C31VZWw/HiYaQ4NzSgX9eZ6+AgJTBotraVnh5epcUdDT9VwTaMO6nRrNRe161W7hxo9VKugmuvafdRGdWRvh8waxQHETsoiqn3pkbtum48BksQTwELg5iLN1KQTxgcWu1ji0oCN1SNImYAgVePZnq8SMastEl55rSePKcmmzxXbATBK16m8YTe8HUngezPZtvdm8hgInVPQg1v3tVCNLaTKxTNeZDK2ywtcZpCp0c71lPWc6lnNEjSZx6CRWkkaZjGU57N5nhlLrL+OiYnIueNekL+2d+M6/LdNgZIJqRYQOpYLUGWEI8vF3gbyfsDV3YC35ttZSPXDUvmUnJI1kv1ff9pE90fRI+1Op+d3/C3sQvovtD+r3Lm5+aRmd9j2R1/R/d3xf9ufNfB5119zPPwqctW9X1R/q2l90IDWYe8XjsIF3XG7PdPUwlcrorV9ufPyczlbLLL8qTb0JuTKuqUfg4UcyweSqR32EqRPwKzCiHXSwVDgPvBd8PcRZnLGfIklJGq2lHLyhAvRB6EvxIEaiqtTz889lypzElbyGK8Tq+tWI/7wACYe0XKKPVKfZcrDPwU7YmvHj4pTHYiSsqmm9LHw8k5bkFSZpWrNpXzX+DEDx5zvM4skF1ik6qdJJuH9PyW9v5oGJiTNmBx0jZyxu1NznPJlDt4foTdm8rVd3PH0/w95k+YtQNR+UvK5fX2OefoFsOnOXt44PbaaL1zk2j3b3l3N/eqZWyRlD13rDfstZydPhz3e+g8=</con:value></con:property><con:property><con:name>SAML-BasicUser1</con:name><con:value>SAML2 Assertion=pVdbU+o6FP4rTH10SpsCQjvCDBYvbFGQIlt9cWK6gGibliYF9NefpEAFvBy2PmFW1+Vb9+Uxx2FgOU3OIRE0YoVFGDDuZNS6libMiTCn3GE4BO4I4njNq45jFU0Hr0W0QrtV1x4rvm9Vyk++Xi5BWS/b8i/7yKrppAJlYlZKgBFIVs5TaDMuMBN1zTJRRTeRblYHZs0p1xyzWrRN80ErDCHhUrdkKZraCtSC17WJELFjGPP5vDgvFaNkbFimiYy7q45HJhBirXG89CgzlDRW/KToA4EgIEUShcaxscVz7HPHo2OGRZrAypb/lS3TMG1D8vicjg+0XBb8NhtF2dPFLGKU4IC+YRWfKxCTyC80g3GUUDEJv3QCmUqxDguiE1RmB5qxDW1PRVsIE451PsFopasPI0iAESjc9tt17WC/rGWigwQzPoqSkG8//w0PsBkEUQy+ztduraDtr/CTSDWOgThtRoKU0xlcq2KNMQG+yiaQ/VUVegmM6KJDuSzQBVfojE14O89lNFp0DFz8JEEbyVkqGeIghcYAew83ndsbuF/U0utLd/5w/+cZo8OT+Us9A7DJnBHy1C6fO0WZF9FSogV2qYdrQ46NQTQdThPu0rvQGpwHh5fn4eDofNacha1e+vzi3YeHN3bpeX47Cw1m2v3FPFig0fCGTFHMyWt7iCwvbS3Eqe11iTcO4cnuPbVYaRDEpcnFvTG9fOhGd/fm0Sx64bXR+eS8Vn7p0+f5xQi56G+Px/yoU6UXw/K1dVMdX3l/uuiq3Q7Z2wX+ezhp1nN3NvBv09Y976VPz0DE+qnKoN0qnMksYfH9MFMU6uujjNWJ1fDhApjQGkpKzQ4nleOO+o7M4fJtuqZrn9bco2YLlc6qlVPZLWbVttGZ2ayh6tF6yCxR7EB0IzaiypYaucuy+R4gCR0OzIdEn0WpnHRc+0ZjCwtcaLO+bIKIcRhEcjyTl+okeIvjec2myCTTVyiN/GplYWmF60h0WTdpjgQkWzMZoa2Z3AdCYwpqcKu65rKwuZCxmOJZKgJUnOEig1SO9kRNWccq1yoGp2EcgEJqhJGfBlCMJ3EWGYMvfy0dE55R+6eDrNu+9Gv32zoEksenioErX05AphE+LJeqU1k78rXD5U2H1+qbqU9VY8l4ioSSJZLtT+9louojr5Gm6556rreGnXP/g/RPhd1u94eSrU7T6/1G9tH1HtFPFfzc9O8Md36LXFbvL8U/ShrfFKCxW/u5IX9GN8yuzzS58OWKaKw7Ny5Oi+lslmatWlWbMJHaDdUMhmkZHpBU7rDXQfQCzMiVGHsdDDnuHds5fRthKibME1hAKGdLIXvucSF6wNWF2JZDcbHv+bllUkZOwEJ8RnMDed0qxN8ewMQhik+Se/JnHiX+e8I+0bVhR/opD0RB2Vi91LHw+kVZkEiqpXLNRcmm8s8UfGZ8m5gHOcciZD09pQK+/lJQ+6uuYUKilIl2S8sImzs1wyleY3DemT6oydZ2fsfT/z/kdZqVAJH/M0j+TL86xxzVAWy8sZdXRndXc6tSsU9s00anCGWrubJczWflmp0HZQtd4wP5I2UjTrs13vgP</con:value></con:property><con:property><con:name>SAML-FullUser1</con:name><con:value>SAML2 Assertion=pVZbU+JKEP4rVPZxK2QSbiYlVCGXXUpUJFmPx5etYdKB0WSCMxNAf/2ZCZAFRA+rT6nu9OXry3T3ucBJ7HhtIYBLmrLSKomZ8HJu08g481IsqPAYTkB4knh++2roOWXk4a2KURp0m8ZvOGvU0MRBJkK4YVademS6WJGTOmq4E5iEVVxVokJkMGBCYiabhoPsmolsEzUCdOZVG57jlG0XPRilO+BC2VYiZWRsQK1E05hJOfcsa7lclpeVcsqnloOQbd1fDX0ygwQbrfN1RLkj3trIk3IIBOKYlEmaWOfWnsx5KDyfThmWGYeNr/A9X8hCrqVkQkGn34xCF8IBi9Kc7GCWMkpwTF+xzs8VyFkaltrxNOVUzpJ3g7CRNmzCipjErrJvhrUP7URDewi5wKaYYXtjawwRcGAESr/Gg6bx7bSq5aoBx0xEKU/EPvl3eIAtIE7nEJpiG9YG2ukGj2SqdQ7EGzASZ4Iu4Fo36xwTEJtqAjndVGnEIaKrIRWqQVdCo7N24R2Q62x06RSE/EyBdoqzNnKH4wxaN1F16V+Or75XBBvddBfW9CUe82QRTEkzB7ArnDOK0q7Jg6YsmmitMavePf2A0b9Pg8a4U+vcjS/tZ1HLglcY/uo+hMMxC6LgYtW/JfZTcpmIKHyZ/Hx4HvB24I7lXe86wbV7Hj/a0e3ygfxTaQTZ/eqpX6+PBFy/vlxd/mj3bm/vBxb57jYq5CeaD6l1cUsxdr73OZv+fAiD59F1F1Zpn91FrxWyCpLe5Gzm/rhyFnW4mFpB8Jj4Vd5rFuHs4N/nbd+8n00egcgtqdtg0C31VZWw/HiYaQ4NzSgX9eZ6+AgJTBotraVnh5epcUdDT9VwTaMO6nRrNRe161W7hxo9VKugmuvafdRGdWRvh8waxQHETsoiqn3pkbtum48BksQTwELg5iLN1KQTxgcWu1ji0oCN1SNImYAgVePZnq8SMastEl55rSePKcmmzxXbATBK16m8YTe8HUngezPZtvdm8hgInVPQg1v3tVCNLaTKxTNeZDK2ywtcZpCp0c71lPWc6lnNEjSZx6CRWkkaZjGU57N5nhlLrL+OiYnIueNekL+2d+M6/LdNgZIJqRYQOpYLUGWEI8vF3gbyfsDV3YC35ttZSPXDUvmUnJI1kv1ff9pE90fRI+1Op+d3/C3sQvovtD+r3Lm5+aRmd9j2R1/R/d3xf9ufNfB5119zPPwqctW9X1R/q2l90IDWYe8XjsIF3XG7PdPUwlcrorV9ufPyczlbLLL8qTb0JuTKuqUfg4UcyweSqR32EqRPwKzCiHXSwVDgPvBd8PcRZnLGfIklJGq2lHLyhAvRB6EvxIEaiqtTz889lypzElbyGK8Tq+tWI/7wACYe0XKKPVKfZcrDPwU7YmvHj4pTHYiSsqmm9LHw8k5bkFSZpWrNpXzX+DEDx5zvM4skF1ik6qdJJuH9PyW9v5oGJiTNmBx0jZyxu1NznPJlDt4foTdm8rVd3PH0/w95k+YtQNR+UvK5fX2OefoFsOnOXt44PbaaL1zk2j3b3l3N/eqZWyRlD13rDfstZydPhz3e+g8=</con:value></con:property><con:property><con:name>SAML-FullUser2</con:name><con:value>SAML2 Assertion=pVbrbuI8EH0VlP25CrkUCkQFKQT4li30Qkq77Z9VcCbBkNhp7FDo068dIAuU9mNbCQl5Mpcz4+OZuWBeHJmWzRikHFNSWsYRYVYubSpZSizqMcws4sXALI4s1x4OLLOsW97WRCn1O03lt3luNDxUrauGCTW1Uq/XVU8/q6nQ0IOaiXQfDF+oMpZBnzDuEd5UTN2oqrqh6rU7vW5V6taZXq6dN56U0j2kTPgWKmVd2YBasqYy5TyxNO3l5aX8clamaaiZum5ov4YDF00h9pTWxTqjPFDa2uijsg8IogiVEY21C21P58JnlotD4vEshU0s/71YuqY3NKHjMxx+Uwpb8PskoPnR8QglGHkRfvVkfYbAp9Qv2VFIU8yn8btJGLp0rMISqciokG+Ktg/tREd7CFPmqWzqGRtfIwggBYKgNB71m8q3024tN71LPcICmsZs//hveIAsIKIJ+CrbprWBdrrDI5VqXQCy+gRFGcMLuJJkTTwEbHObgE53VbpJIcDLAWaCoEsm0Wm78A6O62p0cAiMf+aCdi5n7eTeizJo3TvB+XDQf3z226QNwVXvxxTGpF0dLPVmDmBXORcUV7s+HpCyINHa4vH26aw2PrdD+5xhR0OEhfbrfHU5WbT7y55fGQyz+qsbrLoP933Tvwru5j+/Dy9D0pu5w9X5r7Y+Zj8DmN26iecuye18Olk54cB44Py/x+f6j+/0KnSRVr1so+no1+S5V6fxk/v9sjeZ0eDHIk7HVxV7miSj8bzb7j48kdsZPLp8nt3Q+fW4brIHGk+129pM66Jmkc4O/n3Z9s272WQGiG+Pkgb9TqknbsnjHzczKcG+GuSqViKbD+NAuNKSVrJ3WJlod9i3xB2uz7qjO51qtdG2G4bRFT+9eqZXGw2jp9u9Sr2xbTJrFAcQHUoCLGPJlrumzccAUWwxID6k6oJmotMx5QOPHY97pT4ZiUdACYM7KtqzsTJitExXfmCuKmdJROfhJJgFeKWUrii/JtepHXBI93qyYez15BEgnGCQjVvymgliMy5q8ewtMh4Z5YVXJpCJ1p7KLmuZlXpVYzhOIpBItZj6WQTlZJrkldHY+t9UPcRy6ah7l7+2d/M6/LYtgdDxsVRgMhfxXGgKR4aLuU3k/YQruwlv3duZj+XDEvXkKUZrJPuf/tJE8qPgiO04Xddxt7AL7X+w/qyxc339ScvOwHZvvmL723F/G5918PnQXws8+Cpywd4vmr+11D4goHbI/SKQv8A7Ybdrmhj4YkS0ti83KT+Xs8Uiy59qTU7CVHjX5GPQdFNzAWVihq3u6ByIVjjRTloYCtwHsQv5PsKMT4nLPQ6x6C2l/HjChugCkxtiXzTF5anr515IUTkOS35M5kRiu5WIP1yAkYWknhDfiL8Xmv5N/JivnTgiT7EgckxCeZLLwuodWiAq3GIx5mi66/yYg2PB94VFkQssXPBpknF4/0tJzq+m4iFEM8L7HSUX7M7UHCdfJWD9VXrjJh/bxR6P/3+RV3FOAQRi+2c49y/XMUu+ABLuzOVN0KOjuaE3PhrN++hab8RvJTt1OuR46w8=</con:value></con:property><con:property><con:name>SAML-StandardUser1</con:name><con:value>SAML2 Assertion=pVbrcuI8DH0VJvs7OOZSIFOY4drNLlAW2m7bPzuuo4C3iZPGDren/+wAKVDaj21nmGGsSEdHsizpUpDAL9hNISCWLOS5ZeBzYafSupHE3A6JYMLmJABhS2pPmoO+XchbNtmZGDmnUzf+kCrGmJTABMvzzBLBnkksXDRrXpWUi55VfHrCSlWIBBwuJOGybhQsXDYtbFqVG6tqlyrql7cwfjRydxALha1U8paxJbUUdWMmZWQjtFgs8otiPoynqGBZGN0P+hM6g4AYjctNRKmjuLHVp3kXKPg+zdMwQJfoQOfSFfaETTmRSQxbX+57vixk1ZDScQWbfjMyW3Ad7oXpsU14yBklPlsTnZ8ByFno5pr+NIyZnAXvBoEtDWzCkpoUl/g3Ax1SOxPogGEsiClmBG+xxuBBDJxC7nbs1I1v591aanoTEy68MA7E4fHf+ACfgx9G4JpiF9aW2vmAJzLVuARqO5z6iWBzGOpijQgFsb1NoOdD5UYxeGzZZ0IV6FJodmif3tFxk40Om4KQn7mgvcvZgNwRP4FGFIxh/bvnxKz1+Lj4VV40f6/wfeDA8LmeEthXTgXZ1W6OR0WZFdHG4ufD6OKqtuCsHDtRd+A89Ka9AW8VuleVZuv7LRp1mouidCvV8WhIZysQ4U8S9EkBXd3dJ6Vbf9QN2+ULvzfqoE53GfxEw5fVIwz6hdnt3UyuBzcL+p0EpLbi5flo3XqJPDy2fng/xN+r1i/sIj7HVXSxHN4H3btBl2L5gChrrb3nTvGi7Kxbw9uSf/s8K/jjh3oWzh7/Q9nuzU+Sp79A5e6oy8Dp5Hrqloj8uJlpCXNNL1W1I918hAQujYa20r3DTlS7Y66t7nBzttpWu1MuV0vNi3YR1ypdq1y0KrUa7lnNi1a3umsyGxZHFNsh95j2pVvupmw+JkgDWwB3ITbnYaI6nTA+QOwQSXIOH6tHEHIBN6Fqz9wKE6+a+C/ryvwve3oqv3jTKCp6Rm4Yymt+HTc9CfFBS8b4oCWPgbKIge7buqyFqmshVSpeyDyRPs7PSZ5Dojp7rJusXShVy0iwIPJBE0VB6CY+5KNZlCYGic1/wSRUpNJx9yZ9bO+GdfxtlwGl4zKtIHQsLVC3CCdmS3EXyPsBl/YD3sE3E5fpd6XSKWNGN0wOP71WiS6PrESa7XZ30p7saGfa/2D9WeP29fUnLTv95mT0Fds/7ckf/FmAz7v+muP+V5mr6v2i+VtL9EEBouPazxy5c7bndrelqXmvJkRj93Kj/Es+mc+T9KlW9CCMFTrSjwFZBTQBmqgRtroJn4GjDASdtS9kvI98Z/JDhomc8YkkEgLVW3Lp8YwFcQJCL4iO6onLc7fPA5cqcxKW8pSs7avlVjP+cP+lNtV6SjxSf4swdl8v7ATWnh8Vp9oPJeNTfdK7wuqdsqChgmVqyoXxPvgpgFPOD4VZkjMuUtXTUyLh/S85Pb7qBqE0TLh0OkYq2B+pKU+5isB+VXoDk07tbI1n/7/HmywtAQpq+RcsxdfbmK1fAJ/ujeWt0xOTudaqWTXcxTidzOXNZO6VqrUsKQfsGm/EbyV7eTqu8cZ/</con:value></con:property><con:property><con:name>Sate</con:name><con:value>urn:dece:type:state:discretemediaright:fulfilled</con:value></con:property><con:property><con:name>SchemaNameSpace</con:name><con:value>http://www.decellc.org/schema/2013/10/coordinator</con:value></con:property><con:property><con:name>scriptsPath_Linux</con:name><con:value>/opt/dece/scripts</con:value></con:property><con:property><con:name>scriptsPath_Windows</con:name><con:value>C:\Scripts</con:value></con:property><con:property><con:name>ScsaAuthorizedFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:scsa</con:value></con:property><con:property><con:name>SecuredigitalAuthorizedFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>SoldAsBundleId</con:name><con:value>urn:dece:bid:200002</con:value></con:property><con:property><con:name>SoldAsBundleOid</con:name><con:value>[32, 0, 2]</con:value></con:property><con:property><con:name>SoldAsCID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar</con:value></con:property><con:property><con:name>SoldAsDisplayNameLanguage</con:name><con:value>en-US</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:fulfilled</con:value></con:property><con:property><con:name>StoreNodeAccountId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StoreNodeUserSAMLAssertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StoreSAML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>targerHostd</con:name><con:value>qa.d.uvvu.com</con:value></con:property><con:property><con:name>targetDeviceDomain</con:name><con:value>qa.d.uvvu.com:7001</con:value></con:property><con:property><con:name>targetHost</con:name><con:value>qa.p.uvvu.com</con:value></con:property><con:property><con:name>targetHostb</con:name><con:value>qa.b.uvvu.com:7001</con:value></con:property><con:property><con:name>targetHostC</con:name><con:value>qa.c.uvvu.com:7001</con:value></con:property><con:property><con:name>targetHostd</con:name><con:value>qa.d.uvvu.com</con:value></con:property><con:property><con:name>targetHostP</con:name><con:value>qa.p.uvvu.com:7001</con:value></con:property><con:property><con:name>targetHostq</con:name><con:value>qa.q.uvvu.com</con:value></con:property><con:property><con:name>targetHostS</con:name><con:value>qa.s.uvvu.com:7001</con:value></con:property><con:property><con:name>targetPort</con:name><con:value>7001</con:value></con:property><con:property><con:name>targetPortd</con:name><con:value>7001</con:value></con:property><con:property><con:name>targetPortq</con:name><con:value>7001</con:value></con:property><con:property><con:name>targetsystem</con:name><con:value>LP1</con:value></con:property><con:property><con:name>targetURL</con:name><con:value>qa.p.uvvu.com:7001</con:value></con:property><con:property><con:name>targetUrlSHost</con:name><con:value>qa.s.uvvu.com:7001</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>TOUUrl</con:name><con:value>qa.c.uvvu.com:7001</con:value></con:property><con:property><con:name>TOU_AT</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_AU</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_BE</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_CA</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_CH</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_DE</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_FR</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_GB</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_IE</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_LU</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_NL</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_NZ</con:name><con:value>20140811</con:value></con:property><con:property><con:name>TOU_US</con:name><con:value>20140811</con:value></con:property><con:property><con:name>URLEncode</con:name><con:value>NO</con:value></con:property><con:property><con:name>urnaccount</con:name><con:value>urn:dece:accountid:org:dece:</con:value></con:property><con:property><con:name>urnRating</con:name><con:value>urn:dece:type:rating:</con:value></con:property><con:property><con:name>urntokenType_userpassword</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>UserName</con:name><con:value>userget_firstuser20150107_022012</con:value></con:property><con:property><con:name>usernameFAU1</con:name><con:value>user_create_20130930_062452</con:value></con:property><con:property><con:name>UserOid</con:name><con:value>0C0CD5590A651E07E05305991F0A0601</con:value></con:property><con:property><con:name>UUID</con:name><con:value>_e8750b20-00a7-426f-9a20-b6079bebd4a4</con:value></con:property><con:property><con:name>versionMajor</con:name><con:value>2015</con:value></con:property><con:property><con:name>versionMinor</con:name><con:value>02</con:value></con:property><con:property><con:name>versionURLEncode</con:name><con:value>06</con:value></con:property><con:property><con:name>YOUTH_MIN_AGE</con:name><con:value>13</con:value></con:property><con:property><con:name>Streams_APID</con:name><con:value>urn:dece:apid:file:AUDIO_MetadataDigitalCreate.txt:242394094</con:value></con:property><con:property><con:name>Streams_ALID</con:name><con:value>urn:dece:alid:file:EXAMPLE_ALID_Version_561393521.txt</con:value></con:property><con:property><con:name>Streams_CID</con:name><con:value>urn:dece:cid:file:A_File_Name_with_NUMBERS_344946277.txt</con:value></con:property><con:property><con:name>Flaky_Disabled</con:name><con:value>true</con:value></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:parameters/></con:reporting><con:eventHandlers type="TestRunListener.afterStep" name="TestRunListener.afterStep"><con:script>if(testStepResult.getTestStep().config.type.toString() == "restrequest")
{
                byte [] tempByteArrRequest = testStepResult.getRawRequestData();
                String tempRequest = new String(tempByteArrRequest);

                log.info("-----------------------------&lt;" + testStepResult.getTestStep().getName() + " Request>--------------------------------");
                log.info(tempRequest);
                log.info("-----------------------------&lt;/" + testStepResult.getTestStep().getName() + " Request>--------------------------------");

                byte [] tempByteArrResponse = testStepResult.getRawResponseData();
                String tempResponse = new String(tempByteArrResponse);


                log.info("-----------------------------&lt;" + testStepResult.getTestStep().getName() + " Response>--------------------------------");
                log.info(tempResponse);
                log.info("-----------------------------&lt;/" + testStepResult.getTestStep().getName() + " Response>--------------------------------");
}
</con:script></con:eventHandlers><con:sensitiveInformation/></con:soapui-project>