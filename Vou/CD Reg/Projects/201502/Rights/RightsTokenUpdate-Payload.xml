<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="RightsTokenUpdate_Payload_R201502" resourceRoot="" soapui-version="4.6.1" activeEnvironment="Default" xmlns:con="http://eviware.com/soapui/config">
  <con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.ProTestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="true"/>
  <con:entry key="Enable UI" value="true"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="true"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value="C:\Rights_API\Execution_Reports\R3_Reports\Build_1_0_6_1_Patch2\P0_P1\RightsTokenUpdate"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="true"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="R2-release"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="true"/>
  <con:entry key="Enable UI" value="true"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="true"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value="D:\Execution_Report_R2_Builds\Build_1_0_3_1_N\RightsTokenUpdate\R2Release"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="true"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting></con:settings>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="RightsTokenUpdate" type="rest" id="4f095486-a149-44fa-8062-38956118bc68" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT" rootPart=""/><con:endpoints>
      <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
    </con:endpoints>
    <con:resource name="RightsTokenUpdate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" id="a141a8a9-835d-44be-8276-22c9c61ecc1c">
      <con:description/>
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>AccountID</con:name>
          <con:value/>
          <con:style>TEMPLATE</con:style>
          <con:default/>
        </con:parameter>
        <con:parameter>
          <con:name>RightsTokenID</con:name>
          <con:value/>
          <con:style>TEMPLATE</con:style>
          <con:default/>
        </con:parameter>
      </con:parameters>
      <con:method name="RightTokenUpdate" method="PUT" id="5bed7a43-912d-4743-8126-6298c51833f6">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST">
          <con:mediaType>application/xml</con:mediaType>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/html</con:mediaType>
          <con:status>500 401 502 403</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/xml</con:mediaType>
          <con:status>405 400 500 503</con:status>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>400 401 500 404 403</con:status>
          <con:params/>
          <con:element xmlns:sch="http://www.     .org/schema">sch:Errors</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/plain</con:mediaType>
          <con:status>500 400</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>0</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="REQUEST">
          <con:mediaType>multipart/form-data</con:mediaType>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:RightsTokenData</con:element>
        </con:representation>
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405 412</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400 404 500 403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>412</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:xfor="http://cxf.apache.org/bindings/xformat">xfor:XMLFault</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="5c23b0b9-f83f-44f6-9ec4-449bb7f1c207">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=zVdbk6q6En73V1iuxymHizJeanRXuMiggnLz9oYQAUVQAoL8+h10dDmzZt3OOQ/HKkvTSXd/3f0l6bz+k++D6gnGyI/CXo16JmtVGNqR44dur2Yag3q79k+/8oqsfUB3AUIwTvDKqsT3apv12nFokq4j22um9SZkWvV1g7bqDIk/L7WqhFAKpRAlVpj0ajRJkXWyXadog2K6TLPLtJ9bzc6qVp3d3NOlewwoRN2Lw14tjcNuZCEfdUNrD1E3sbs6kMddvLJr3dDU+u/4Lg5jov/qoK7uu6GVpDF8N+igXs1LkkOXILIse84az1HsEjRGSpAdAq9xkO9+q+FY35WhI4Wb6DrmrDAKfdsK/MIqPcow8SKnCgI3iv3E2//ENEVQZGm6DnO7blPN8FuN+O7ggu4PLX0AGSOrjjyLuhnT4AbGuGqwampSr/btd4W5ahmxFaJNFO/Rp/HfgYHhCQbRATp1dIvphuvPLX6RqP4rtLtSaAcp8k9QKat/sGyIqtMYbvx87CPMKQdVL5Wv5uhGHGj/TTFeiUecGDbxRWZ434Uo+U8q9Vilq5WZFaSwzzfGu21+6px8CSb6qM1Zlq6fTNph5d4FwuPiK6h7kd/Hnyl6Z9S7EhdF+tjRMsG3kCENJqbZYodNVVstj6d2Ieub4sVrDQNa8rdrHa74+ESAsSJHyxe0J6LN3JHGx7x5biQ6FVSmjdnJGNJPpn6aSWn6hhaAtNTRvAUoZT7fycrKYqTQzwTuJSniztGebhdhkaDWU9PN2x410MZK1onE9b5NVBIPEnAKduaGbxHqfEmHzd73mB5jKOMawfMlyPL/giE7vJVY9wFXHgAbvDET2JcliU8LjgNn3QWZxAIXf7dAYd3d0dv5YicjWaCqA8BzbLAVxjLYiYAyBdaTudlMzrkCDFlXmWFFowKCFStrQsZnS36mqm9C5hmOODuvxSBdFYIiA3RR5jxZ0IQZrxmCLIPoKstlfi3mW1mXM0ld8hVsgBfyQ+GInQSKuW/TEiPrDL3UmXS1mGH54DzeK6e1IQQyJ4ucfhR1ad3gVWEItOXcpgcp1i3G+0NUWZrsg9LwALcADjIS+wSFbOwy2TBphdesi8z4KJMlcSirKOPUS1RiRciGM7P4nguOlTlnL+SCAabXXNgGN1DI1WKIrDkTyhrIePeiPBIyZ3IDIqtkVuGuuRoLmSZopjKQNSkTwEXGC1mA1rTirUXvZDfUfGiA7WNhOFWYD0I8H2on+8wcK5Y4AOv9jLIbmmf7jG8tosxdtTNeXQ5H0UrCZhSgCiyrAgyIBGVoOP8sGLMzZnLwO7QPx5tBtIdeXJGpaLQ7FTnZ9hsTd6rMGX6za01Ff9qwHI+QApveNnZAkqAzojzVcrQlofGhX7xMRuYC+vGySBRGpV78NlPR5qm54KOg5bwtluboKV/aqjGZ6uZ8WuS5cty2iyB5m7BvsT6UeXeiQDhF9hNBWgPWaPMMt3zbYj5tNBIyFeDKLADi1nUFHxOYfdteSfimyQImL5C5TOTmnKgDUXwSJJZX1c3Ao6a2OEtNSpElwQlwms7LhRZUVhzL40qR1nx1WNIDcmUA52JMbQoDVzWZp+ECrlQlMGYJyA6zTUhRpHhQ3zZy5tpyyQBHynQW7yK2kkrAtCaHIZmPZi8kdVSdYKh3gNnIdXqXTzx3dd65qx0uyvJh6ywNEMyMB45JmGLzimoImgza1/2Wy5LZ0AJ7nx/WezvnDVyzi3JksII2UEkz53kwusqQAegcLQthK3PCRb8CctnCtDitFx5ahoo/MYQUkzZ9oMt2TZO/5VhJscpHjh05oILPHBOuHBPA5vgktXkKMS/cAc0zlxWFo9qajYedA6kuxrsK+zQg3MQPmpOwnRmjpzl1zlreVp3POxLvcU/hZuk11glLWoWtwuGuJfrajg9fmsFZHssqY/pEcCa38JihcUWRqFBoJMWA6MTpE7tf+fuiaDRpcz/V05NkWiNEnb31cd7JttO3F4KIxTNTtFYndbCI7OX1Hvl8SN6F12OUeDxgP5zAt5ZKT9dbaCe3YXkPS3x1gC9HK/l5e0Y9UxeJ79Q3l6XdNEQHaGMY0Kn1NzF0olfi0eQnf1wUbvxSsWw2rzfvr5tBe99dQyuGce0Xlsqgq1Ko4VYiChE0ol4N4RMiDf1jirF6+IKtVZUomYSTGGwSGF+6VurrrlXD4Rx8WLa2D40AzK39IYDPdrQnLNuO0jBB+A+69Bo/BfZ57hYDXuP45QJUwmIhTib83Ek32l3qhukPsd/Mg9Txy5YCJySJffuK5ONU/z02lDjQPlon60A9n6znEKa4rY8vYd6w31U+Cz6YJz5HdvfonHz7zrv7U0PicefTByzHC3e7H+c+a+AmuBSXwBFGjnHDO961XxD3dwP6Bz9jrLXtwB8sv9u4yz9iSxMv1BO8n/a4/NXL8PfPnA/aOPwE5slXMi7AAEvnv3z72F27XIfFU/yTRbHzPetf2Ppq8qPwHs8dU4KLtk4T+POZarl3e7V3nvtO7SK4HQ4Pu+Ix/bzACQS4qkh87Qejl97vvZnPf/Zoo4iFPNZtD+6t2n2t//vFdf9SJxvvc7y+m5wPGH+On5vYeejW+hTdaDL3vHyA1P9B/KPkv0hifOvv/yaNmjD4v0shGPAsh/OIr6pG83+Sys+bs/8v" xmlns="http://eviware.com/soapui/config"/></con:setting>
          </con:settings>
          <con:endpoint>https://qa.p.dece.neustar.com:443</con:endpoint>
          <con:request><![CDATA[<dece:RightsTokenData xmlns:dece="http://www.decellc.org/schema" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.decellc.org/schema dece.xsd ">
  <dece:ALID>urn:dece:alid:ISAN:0000-3BAB-9352-0000-G-0000-0000-Q:p2611</dece:ALID>
  <dece:CID>urn:dece:cid:ISAN:0000-3BAB-9352-9999-G-0000-9999-Q</dece:CID>
  <dece:SoldAs>
    <dece:DisplayName Language="EN">Avatar22 BestBuy Special Packaging</dece:DisplayName>
    <dece:RetailerCID>urn:dece:cid:ISAN:0000-3BAB-9352-9999-G-0000-9999-Q</dece:RetailerCID>
  </dece:SoldAs>
  <dece:RightsProfiles>
    <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
      <!--<dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaprofile:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>-->
      <dece:CanDownload>true</dece:CanDownload>
      <dece:CanStream>true</dece:CanStream>
    </dece:PurchaseProfile>
  </dece:RightsProfiles>
  <dece:LicenseAcqLoc DRMID="urn:dece:drm:playready:11">
    <dece:Location>ns3.google.com</dece:Location>
    <dece:Preference>0</dece:Preference>
  </dece:LicenseAcqLoc>
  <dece:LicenseAcqLoc DRMID="urn:dece:drm:playready:11">
    <dece:Location>https://dl.bestbuy.com/p/aaaa</dece:Location>
    <dece:Preference>2</dece:Preference>
  </dece:LicenseAcqLoc>
  <dece:LicenseAcqLoc DRMID="urn:dece:drm:playready:11">
    <dece:Location>https://dl.bestbuy.com/p/bbbbb</dece:Location>
    <dece:Preference>3</dece:Preference>
  </dece:LicenseAcqLoc>
  <dece:FulfillmentWebLoc xsi:type="dece:ResourceLocation-type">
    <dece:Location>https://dl.bestbuy.com/p/cccc</dece:Location>
    <dece:Preference>1</dece:Preference>
  </dece:FulfillmentWebLoc>
  <dece:FulfillmentManifestLoc xsi:type="dece:ResourceLocation-type">
    <dece:Location>https://dl.bestbuy.com/p/dddddd</dece:Location>
    <dece:Preference>0</dece:Preference>
  </dece:FulfillmentManifestLoc>
  <dece:PurchaseInfo>
    <dece:RetailerID>urn:dece:org:org:dece:2</dece:RetailerID>
    <dece:RetailerTransaction>85800ee740</dece:RetailerTransaction>
    <dece:PurchaseAccount>urn:dece:accountid:org:dece:100131</dece:PurchaseAccount>
    <dece:PurchaseUser>urn:dece:userid:org:dece:100241</dece:PurchaseUser>
    <dece:PurchaseTime>2010-11-29T08:44:01Z</dece:PurchaseTime>
  </dece:PurchaseInfo>
</dece:RightsTokenData>]]></con:request>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:entry key="AccountID" value="urn:dece:accountid:org:dece:100131"/>
            <con:entry key="RightsTokenID" value="A582BD1BC802C2C4E0401F0A2222590512 "/>
          </con:parameters>
        </con:request>
        <con:request name="RTU_Request_Node0702_V7.8" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" id="133978b9-7b00-48f8-a401-3e85b42fe98a">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6rMFn33V1ieR8swiRErSVUziooK4vjG0ALKoAyC/vrbYDRmOMN3H1KmN3tYvfeiWf2SGIFP9kCSwDj1orAu868NhsY7tEXZLWprmK02pJ9bpoF3W13bJKlnnN52Gdioy0mSQTlMUiNMXxskThAtnGyRXZ3EeyTRo6mndpveNOoLGCcoM3J5whv1IvDDpFdVfW1kcdiLjMRLeqERwKSXWr0ZUEY95NkzbpAaby9XkFXB+M1N00MPw6wnG1rQ960nKwqwF+yTz4ud9GaeExppFsP3mnby2niPzfP8KaeeotjBSBzHMZzBkI+deM6vxlvtFgxtOdxG1zVnhFHoWYbvXYwSlAJTN7LrwHei2Evd4DepCYzAy9QtWFgti2iHvxrYR4EK3T9m+gQyToxW4hrELZkGtzCGoQXrc01+bfz6pwFeQ/XYCJNtFAfJl/V/QwTDE/SjA7RbyW1jN3D/nvGHbr29QKsnh5afJd4JjkuWHAwLJvVpDLdeMfISxD07qVfTrxfJjWDQ+i8TecEecSLY2A+d4T0HJun/M67HUV2zLAw/g28mN06WzfyCW7pDdzaUnJ2PA7ANXVp5rSA8Ol9B3Sf9vv7K0zut3oMC14+js3VQiQmmNjOs+TzMGWBehktjOeLb+wBnbAwG5tJfqxDz5n6Em53jWRrtTpu+DHhyg1nxbEu7qy5Wm5GXvg2D4xYG8LCnsnXEUKcZt1t4oYaz3OBkbYKJCYVV9xh7piFHSiRiwZkf2sFgp84WWTc/HrcmFfcBU+vYS5PEFkVnWaydS38/nyavH3t63EO5ryE8V5ss/1/ROMMbqXFfcOVBsUVvZwrfFFnmswvHgfPMAbnMAgf97cCYdfZHd+9JTI6zQFVFwHOsvxNGCthLgJgLrKtwi4VScBcwYJ3xAgXqNeBvWEUTcj5f8wtV7Qu5q9vS4mxKfra5CGMFJFUw5yqCJix4TRcUBURXW6HwplTslJmSy+qar6EEvFAcLrbEpFAqPIuUaWVGk+sZnW1WC2QXz6NgfDJ1wVc4ReJmR2kmmxSvCgOgrZcWKWYo9jIKDlFtPWcfggYHuANQzHFUE1wUfZ8r+pwc85pR2fTPNkWWBoqa5Jxa7UqqCflgMb989IJjFc4OhELQwfTaC0vnxDG+WQ0SY0mHigZy3qmCh0JuT25AFBXPa9y1VyMh1wRtPhYVTc4FUNl4IfcTkxy7puSeLEotBjrYPQ6GU4WlGKLnoXayzvSxZkgiMIMFYVGaa3m0Z6yi3Nl0c15dD4bRRkZpxkAVWFYFCBAOyq2h/rNgxC7oycFjSA+OtmIUQDeuKUQ03J8uBd71qIkzHS9pfrt/nkrelDJsF5N9i9xReyDL0B4SrmrY2hrT+NC7dCbD+Qp68fqSjmmV6HhduqYts/mKj/xnu79az4fNYm2p+mQ6my+nl6IYH3fdi5/2J2w/ng0U3pmMIZwmVhPDDZHVuzzNrfs7xKethkO6BhyFBUDaOY7gIQKz/d2VhH1NERB5gcLlErfkpBmQpKYgs7yqbkWXmFrSIpsTY0UWbB+16bxeaX5tw7E8mhRuLDeHNSniGx3YVTK1LYiOOqebgxXcqGNfX6QgPyy2IUHg0kHtb5XcsZSSAbacz1j0FrG1TAZzY3IY4MVw0cGJo2r7gxkD5lQxI/fFxHU2572z2aOhrB9enbUO/IX+wDEZUWxZU3VBU0D3+r4VijynNN8KioMZWAWvo5lVwZHOCpqo4vOC58Hwakt0QBbJ+iLsFE6o4mugUAxEi5O5cpN1OPYmupAh0mYPdNmZJP5XjpUUq33m2JEDKvjKMeHKMQFsj025yxMJ3eEOyTJ3WEk4qs+L0YA54OpqtK+xTRFzUs9vT8Jurg+bS+KcP7s7dblkZN7lmuF27VJmyuLGxVLhYP8sedqeDztt/6yMFJWee5h/xnfwmCej2lgmQoFKLyLGxFmTDTZecLlQbXIeTGfZSZ4bw4Q4u+ZxyeS7ab+DYbF0pi/Pm5MqriJrff2OfD0k78brMYo9HrCfTuCb9Jpl5g5a6W1Zfodlvi6ij6OR/lnGlRbPbm0r196h1IJJCsO08VZGlRKulyGh59k99OW8rhnAcBwnEhRgOZ5piwLexgkRBzjNMKTYoW5a74riC0QuCrdeWasUs9eP9Z8BWkHPhEYM48YfMpV9qsuhhtRHFCZQj14bSNy2uS6D3h0G7wjdLgm6lCgCkiPbhMiJ7UZ9HKWTcBKDbQrjm0CmWjjxVSBr0PIOHixV9LuWSFLUiKNxylKfeDoZTyHMkMyOS6XbI9tdumoAZmfBwUIP0OkWH6IkfTq4h0rM/HYbX5/ddox8bK90SErQLETTgj9I+vYN8bedkT9K/1t6kNleqVlQ+9LYs65IPj/6YENJgzsV8Geme8N8d/3nUOZ7KPYHRNjXZtwr2Sfvoe7tYoK0NpJj1X0kQUM7Gk/Hp+x0yqoxPZdSM0bpMQLDsRm0MiQXz3q0hyF2z4D9i1C/Y/5S927/jC5L3XCWorc8QIyqV8u/X9I+RaMGpLBIf7JxPrqWlcX/eHOzelbph8xT9JNHsf3R9x9yPdRBkMsTygudclUq7PPn8b6/CT0rQlk9dEhF8WPun+J/qv3ZeG/XHUqKWGFmKfz9k3p5+rw2DMuKsjCV+UZleDwRK8zp+QB7H07f0lQS9/3OUiS/vbOslNHMcmFgNO6+3t+dW141eAtd1pF/heW1UaDbNyoeOg8n8DvAx0OYwBGDyXubPuF9+2b+bnno3Ff+vv0P" xmlns="http://eviware.com/soapui/config"/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="http://www.decellc.org/schema/2010/10/dece" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<ns4:SoldAs>
		<ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>
		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID>
	</ns4:SoldAs>
	<ns4:RightsProfiles>
		<ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
			<!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining>-->
			<ns4:CanDownload>true</ns4:CanDownload>
			<ns4:CanStream>true</ns4:CanStream>
		</ns4:PurchaseProfile>
		<ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
			<!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining>-->
			<ns4:CanDownload>true</ns4:CanDownload>
			<ns4:CanStream>true</ns4:CanStream>
		</ns4:PurchaseProfile>
		<ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
			<!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining>-->
			<ns4:CanDownload>true</ns4:CanDownload>
			<ns4:CanStream>true</ns4:CanStream>
		</ns4:PurchaseProfile>
	</ns4:RightsProfiles>
	<!--<ns4:ResourceStatus>
		<ns4:Current CreatedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") CreationDate="2011-02-17T15:12:03">
			<ns4:Value>urn:dece:type:status:active</ns4:Value>
			<ns4:Description>new rights token</ns4:Description>
		</ns4:Current>
	</ns4:ResourceStatus>-->
	<ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc>
	<ns4:FulfillmentWebLoc>
		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location>
		<ns4:Preference>1</ns4:Preference>
	</ns4:FulfillmentWebLoc>
	<ns4:FulfillmentWebLoc>
		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location>
		<ns4:Preference>1</ns4:Preference>
	</ns4:FulfillmentWebLoc>
	<ns4:FulfillmentManifestLoc>
		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location>
		<ns4:Preference>3</ns4:Preference>
	</ns4:FulfillmentManifestLoc>
	<ns4:FulfillmentManifestLoc>
		<ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location>
		<ns4:Preference>1</ns4:Preference>
	</ns4:FulfillmentManifestLoc>
	<ns4:PurchaseInfo>
		<ns4:NodeID>urn:dece:org:org:dece:222259</ns4:NodeID>
		<ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>
		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:107006</ns4:PurchaseAccount>
		<ns4:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</ns4:PurchaseUser>
		<ns4:PurchaseTime>2011-06-24T15:12:03</ns4:PurchaseTime>
	</ns4:PurchaseInfo>
  <ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</ns4:RightsLockerID>
</ns4:RightsTokenFull>]]></con:request>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:entry key="AccountID" value="urn:dece:accountid:org:dece:107006"/>
            <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:A582BD1BC802C2C4E0401F0A2222590512 "/>
          </con:parameters>
        </con:request>
      </con:method>
    <con:method name="DeleteMethod" method="DELETE" id="83b7e106-dd65-42c2-a989-6bc71e49a7de"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml" id="09290d2b-66f3-4554-81d2-4c5d191c28d4"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="GetMethod" method="GET" id="7d51d2a6-8257-4145-b5eb-4a13fe3949b9"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml" id="6d8aaffb-d20a-4dbb-81d5-0900bb1cc1d5"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="PostMethod" method="POST" id="6da55b24-567e-4072-860b-b55a90d1b84d"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="4eaadf5a-fda1-4e3e-b3ea-4dfa6b5de2ad"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="HeadMethod" method="HEAD" id="c65d13d6-4f01-4d23-8751-015019cba27d"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" id="fe72f108-8567-4c35-8282-295e61b1103e"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource>
    <con:resource name="RightsTokenUpdate_Without_AccountId" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/RightsToken/{RightsTokenID}" id="a141a8a9-835d-44be-8276-22c9c61ecc1c">
      <con:description/>
      <con:settings/>
      <con:parameters>
        
        <con:parameter>
          <con:name>RightsTokenID</con:name>
          <con:value/>
          <con:style>TEMPLATE</con:style>
          <con:default/>
        </con:parameter>
      </con:parameters>
      <con:method name="RightTokenUpdate" method="PUT" id="5bed7a43-912d-4743-8126-6298c51833f6">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST">
          <con:mediaType>application/xml</con:mediaType>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/html</con:mediaType>
          <con:status>500 401 502 403</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/xml</con:mediaType>
          <con:status>405 400 500</con:status>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>400 401 500 404 403</con:status>
          <con:params/>
          <con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/plain</con:mediaType>
          <con:status>500 400</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>0</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="REQUEST">
          <con:mediaType>multipart/form-data</con:mediaType>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:RightsTokenData</con:element>
        </con:representation>
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>412</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="5c23b0b9-f83f-44f6-9ec4-449bb7f1c207">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>https://qa.p.dece.neustar.com:443</con:endpoint>
          <con:request><![CDATA[<dece:RightsTokenData xmlns:dece="http://www.decellc.org/schema" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.decellc.org/schema dece.xsd ">
  <dece:ALID>urn:dece:alid:ISAN:0000-3BAB-9352-0000-G-0000-0000-Q:p2611</dece:ALID>
  <dece:CID>urn:dece:cid:ISAN:0000-3BAB-9352-9999-G-0000-9999-Q</dece:CID>
  <dece:SoldAs>
    <dece:DisplayName Language="EN">Avatar22 BestBuy Special Packaging</dece:DisplayName>
    <dece:RetailerCID>urn:dece:cid:ISAN:0000-3BAB-9352-9999-G-0000-9999-Q</dece:RetailerCID>
  </dece:SoldAs>
  <dece:RightsProfiles>
    <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
      <!--<dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaprofile:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>-->
      <dece:CanDownload>true</dece:CanDownload>
      <dece:CanStream>true</dece:CanStream>
    </dece:PurchaseProfile>
  </dece:RightsProfiles>
  <dece:LicenseAcqLoc DRMID="urn:dece:drm:playready:11">
    <dece:Location>ns3.google.com</dece:Location>
    <dece:Preference>0</dece:Preference>
  </dece:LicenseAcqLoc>
  <dece:LicenseAcqLoc DRMID="urn:dece:drm:playready:11">
    <dece:Location>https://dl.bestbuy.com/p/aaaa</dece:Location>
    <dece:Preference>2</dece:Preference>
  </dece:LicenseAcqLoc>
  <dece:LicenseAcqLoc DRMID="urn:dece:drm:playready:11">
    <dece:Location>https://dl.bestbuy.com/p/bbbbb</dece:Location>
    <dece:Preference>3</dece:Preference>
  </dece:LicenseAcqLoc>
  <dece:FulfillmentWebLoc xsi:type="dece:ResourceLocation-type">
    <dece:Location>https://dl.bestbuy.com/p/cccc</dece:Location>
    <dece:Preference>1</dece:Preference>
  </dece:FulfillmentWebLoc>
  <dece:FulfillmentManifestLoc xsi:type="dece:ResourceLocation-type">
    <dece:Location>https://dl.bestbuy.com/p/dddddd</dece:Location>
    <dece:Preference>0</dece:Preference>
  </dece:FulfillmentManifestLoc>
  <dece:PurchaseInfo>
    <dece:RetailerID>urn:dece:org:org:dece:2</dece:RetailerID>
    <dece:RetailerTransaction>85800ee740</dece:RetailerTransaction>
    <dece:PurchaseAccount>urn:dece:accountid:org:dece:100131</dece:PurchaseAccount>
    <dece:PurchaseUser>urn:dece:userid:org:dece:100241</dece:PurchaseUser>
    <dece:PurchaseTime>2010-11-29T08:44:01Z</dece:PurchaseTime>
  </dece:PurchaseInfo>
</dece:RightsTokenData>]]></con:request>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="RightsTokenID" value="A582BD1BC802C2C4E0401F0A2222590512 " xmlns="http://eviware.com/soapui/config"/></con:parameters>
        </con:request>
        <con:request name="RTU_Request_Node0702_V7.8" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" id="133978b9-7b00-48f8-a401-3e85b42fe98a">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6rMFn33V1ieR8swiRErSVUziooK4vjG0ALKoAyC/vrbYDRmOMN3H1KmN3tYvfeiWf2SGIFP9kCSwDj1orAu868NhsY7tEXZLWprmK02pJ9bpoF3W13bJKlnnN52Gdioy0mSQTlMUiNMXxskThAtnGyRXZ3EeyTRo6mndpveNOoLGCcoM3J5whv1IvDDpFdVfW1kcdiLjMRLeqERwKSXWr0ZUEY95NkzbpAaby9XkFXB+M1N00MPw6wnG1rQ960nKwqwF+yTz4ud9GaeExppFsP3mnby2niPzfP8KaeeotjBSBzHMZzBkI+deM6vxlvtFgxtOdxG1zVnhFHoWYbvXYwSlAJTN7LrwHei2Evd4DepCYzAy9QtWFgti2iHvxrYR4EK3T9m+gQyToxW4hrELZkGtzCGoQXrc01+bfz6pwFeQ/XYCJNtFAfJl/V/QwTDE/SjA7RbyW1jN3D/nvGHbr29QKsnh5afJd4JjkuWHAwLJvVpDLdeMfISxD07qVfTrxfJjWDQ+i8TecEecSLY2A+d4T0HJun/M67HUV2zLAw/g28mN06WzfyCW7pDdzaUnJ2PA7ANXVp5rSA8Ol9B3Sf9vv7K0zut3oMC14+js3VQiQmmNjOs+TzMGWBehktjOeLb+wBnbAwG5tJfqxDz5n6Em53jWRrtTpu+DHhyg1nxbEu7qy5Wm5GXvg2D4xYG8LCnsnXEUKcZt1t4oYaz3OBkbYKJCYVV9xh7piFHSiRiwZkf2sFgp84WWTc/HrcmFfcBU+vYS5PEFkVnWaydS38/nyavH3t63EO5ryE8V5ss/1/ROMMbqXFfcOVBsUVvZwrfFFnmswvHgfPMAbnMAgf97cCYdfZHd+9JTI6zQFVFwHOsvxNGCthLgJgLrKtwi4VScBcwYJ3xAgXqNeBvWEUTcj5f8wtV7Qu5q9vS4mxKfra5CGMFJFUw5yqCJix4TRcUBURXW6HwplTslJmSy+qar6EEvFAcLrbEpFAqPIuUaWVGk+sZnW1WC2QXz6NgfDJ1wVc4ReJmR2kmmxSvCgOgrZcWKWYo9jIKDlFtPWcfggYHuANQzHFUE1wUfZ8r+pwc85pR2fTPNkWWBoqa5Jxa7UqqCflgMb989IJjFc4OhELQwfTaC0vnxDG+WQ0SY0mHigZy3qmCh0JuT25AFBXPa9y1VyMh1wRtPhYVTc4FUNl4IfcTkxy7puSeLEotBjrYPQ6GU4WlGKLnoXayzvSxZkgiMIMFYVGaa3m0Z6yi3Nl0c15dD4bRRkZpxkAVWFYFCBAOyq2h/rNgxC7oycFjSA+OtmIUQDeuKUQ03J8uBd71qIkzHS9pfrt/nkrelDJsF5N9i9xReyDL0B4SrmrY2hrT+NC7dCbD+Qp68fqSjmmV6HhduqYts/mKj/xnu79az4fNYm2p+mQ6my+nl6IYH3fdi5/2J2w/ng0U3pmMIZwmVhPDDZHVuzzNrfs7xKethkO6BhyFBUDaOY7gIQKz/d2VhH1NERB5gcLlErfkpBmQpKYgs7yqbkWXmFrSIpsTY0UWbB+16bxeaX5tw7E8mhRuLDeHNSniGx3YVTK1LYiOOqebgxXcqGNfX6QgPyy2IUHg0kHtb5XcsZSSAbacz1j0FrG1TAZzY3IY4MVw0cGJo2r7gxkD5lQxI/fFxHU2572z2aOhrB9enbUO/IX+wDEZUWxZU3VBU0D3+r4VijynNN8KioMZWAWvo5lVwZHOCpqo4vOC58Hwakt0QBbJ+iLsFE6o4mugUAxEi5O5cpN1OPYmupAh0mYPdNmZJP5XjpUUq33m2JEDKvjKMeHKMQFsj025yxMJ3eEOyTJ3WEk4qs+L0YA54OpqtK+xTRFzUs9vT8Jurg+bS+KcP7s7dblkZN7lmuF27VJmyuLGxVLhYP8sedqeDztt/6yMFJWee5h/xnfwmCej2lgmQoFKLyLGxFmTDTZecLlQbXIeTGfZSZ4bw4Q4u+ZxyeS7ab+DYbF0pi/Pm5MqriJrff2OfD0k78brMYo9HrCfTuCb9Jpl5g5a6W1Zfodlvi6ij6OR/lnGlRbPbm0r196h1IJJCsO08VZGlRKulyGh59k99OW8rhnAcBwnEhRgOZ5piwLexgkRBzjNMKTYoW5a74riC0QuCrdeWasUs9eP9Z8BWkHPhEYM48YfMpV9qsuhhtRHFCZQj14bSNy2uS6D3h0G7wjdLgm6lCgCkiPbhMiJ7UZ9HKWTcBKDbQrjm0CmWjjxVSBr0PIOHixV9LuWSFLUiKNxylKfeDoZTyHMkMyOS6XbI9tdumoAZmfBwUIP0OkWH6IkfTq4h0rM/HYbX5/ddox8bK90SErQLETTgj9I+vYN8bedkT9K/1t6kNleqVlQ+9LYs65IPj/6YENJgzsV8Geme8N8d/3nUOZ7KPYHRNjXZtwr2Sfvoe7tYoK0NpJj1X0kQUM7Gk/Hp+x0yqoxPZdSM0bpMQLDsRm0MiQXz3q0hyF2z4D9i1C/Y/5S927/jC5L3XCWorc8QIyqV8u/X9I+RaMGpLBIf7JxPrqWlcX/eHOzelbph8xT9JNHsf3R9x9yPdRBkMsTygudclUq7PPn8b6/CT0rQlk9dEhF8WPun+J/qv3ZeG/XHUqKWGFmKfz9k3p5+rw2DMuKsjCV+UZleDwRK8zp+QB7H07f0lQS9/3OUiS/vbOslNHMcmFgNO6+3t+dW141eAtd1pF/heW1UaDbNyoeOg8n8DvAx0OYwBGDyXubPuF9+2b+bnno3Ff+vv0P" xmlns="http://eviware.com/soapui/config"/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="http://www.decellc.org/schema/2010/10/dece" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<ns4:SoldAs>
		<ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>
		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID>
	</ns4:SoldAs>
	<ns4:RightsProfiles>
		<ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
			<!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining>-->
			<ns4:CanDownload>true</ns4:CanDownload>
			<ns4:CanStream>true</ns4:CanStream>
		</ns4:PurchaseProfile>
		<ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
			<!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining>-->
			<ns4:CanDownload>true</ns4:CanDownload>
			<ns4:CanStream>true</ns4:CanStream>
		</ns4:PurchaseProfile>
		<ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
			<!--<ns4:DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining>-->
			<ns4:CanDownload>true</ns4:CanDownload>
			<ns4:CanStream>true</ns4:CanStream>
		</ns4:PurchaseProfile>
	</ns4:RightsProfiles>
	<!--<ns4:ResourceStatus>
		<ns4:Current CreatedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") CreationDate="2011-02-17T15:12:03">
			<ns4:Value>urn:dece:type:status:active</ns4:Value>
			<ns4:Description>new rights token</ns4:Description>
		</ns4:Current>
	</ns4:ResourceStatus>-->
	<ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc>
	<ns4:FulfillmentWebLoc>
		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location>
		<ns4:Preference>1</ns4:Preference>
	</ns4:FulfillmentWebLoc>
	<ns4:FulfillmentWebLoc>
		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location>
		<ns4:Preference>1</ns4:Preference>
	</ns4:FulfillmentWebLoc>
	<ns4:FulfillmentManifestLoc>
		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location>
		<ns4:Preference>3</ns4:Preference>
	</ns4:FulfillmentManifestLoc>
	<ns4:FulfillmentManifestLoc>
		<ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location>
		<ns4:Preference>1</ns4:Preference>
	</ns4:FulfillmentManifestLoc>
	<ns4:PurchaseInfo>
		<ns4:NodeID>urn:dece:org:org:dece:222259</ns4:NodeID>
		<ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>
		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:107006</ns4:PurchaseAccount>
		<ns4:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</ns4:PurchaseUser>
		<ns4:PurchaseTime>2011-06-24T15:12:03</ns4:PurchaseTime>
	</ns4:PurchaseInfo>
  <ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</ns4:RightsLockerID>
</ns4:RightsTokenFull>]]></con:request>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:A582BD1BC802C2C4E0401F0A2222590512 " xmlns="http://eviware.com/soapui/config"/></con:parameters>
        </con:request>
      </con:method>
    <con:method name="DeleteMethod" method="DELETE" id="83b7e106-dd65-42c2-a989-6bc71e49a7de"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml" id="09290d2b-66f3-4554-81d2-4c5d191c28d4"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="GetMethod" method="GET" id="7d51d2a6-8257-4145-b5eb-4a13fe3949b9"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml" id="6d8aaffb-d20a-4dbb-81d5-0900bb1cc1d5"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="PostMethod" method="POST" id="6da55b24-567e-4072-860b-b55a90d1b84d"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="4eaadf5a-fda1-4e3e-b3ea-4dfa6b5de2ad"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="HeadMethod" method="HEAD" id="c65d13d6-4f01-4d23-8751-015019cba27d"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" id="fe72f108-8567-4c35-8282-295e61b1103e"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:inferredSchema><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<inf:schema xmlns:inf="http://www.eviware.com/soapui/InferredSchema"><inf:namespace>http://www.decellc.org/schema</inf:namespace><inf:particle xsi:type="inf:ElementParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>Errors</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:sch="http://www.decellc.org/schema">sch:_Errors</inf:reference></inf:type></inf:particle><inf:prefix key="http://www.w3.org/2001/XMLSchema" value="xs"/><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>Errors_Error</inf:name><inf:attribute xsi:type="inf:AttributeParticle" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:name>ErrorID</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:attribute><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>Reason</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>OriginalRequest</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:particle xsi:type="inf:ElementParticle"><inf:name>ErrorLink</inf:name><inf:type xsi:type="inf:SimpleType"><inf:completed>false</inf:completed><inf:typeName>string</inf:typeName></inf:type></inf:particle><inf:comesBefore qname="sch:ErrorLink" xmlns:sch="http://www.decellc.org/schema"/><inf:comesBefore qname="sch:OriginalRequest" xmlns:sch="http://www.decellc.org/schema"><inf:other>sch:ErrorLink</inf:other></inf:comesBefore><inf:comesBefore qname="sch:Reason" xmlns:sch="http://www.decellc.org/schema"><inf:other>sch:OriginalRequest</inf:other><inf:other>sch:ErrorLink</inf:other></inf:comesBefore></inf:content></inf:complexType><inf:complexType><inf:completed>true</inf:completed><inf:mixed>false</inf:mixed><inf:name>_Errors</inf:name><inf:content xsi:type="inf:SequenceContent" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><inf:completed>true</inf:completed><inf:particle xsi:type="inf:ElementParticle"><inf:name>Error</inf:name><inf:type xsi:type="inf:TypeReference"><inf:reference xmlns:sch="http://www.decellc.org/schema">sch:Errors_Error</inf:reference></inf:type></inf:particle><inf:comesBefore qname="sch:Error" xmlns:sch="http://www.decellc.org/schema"/></inf:content></inf:complexType></inf:schema>]]></con:inferredSchema>
  </con:interface>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="STS" type="rest" id="c0c28649-80fa-4369-9bb0-615ff58ae0b9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT" rootPart=""/><con:endpoints/>
    <con:resource name="STS" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange?" id="c30ffb3c-d112-41e5-b364-430126a4e7dc">
      <con:settings/>
      <con:parameters><con:parameter disableUrlEncoding="true"><con:name>tokentype</con:name><con:value>${#TestCase#tokentype}</con:value><con:style>QUERY</con:style><con:default>${#TestCase#tokentype}</con:default></con:parameter></con:parameters>
      <con:method name="STS - POST" method="POST" id="4d5b920f-bc80-4375-b2d1-b59e136e15aa">
        <con:settings/>
        <con:parameters>
          
        </con:parameters>
        <con:representation type="REQUEST">
          <con:mediaType>application/xml</con:mediaType>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>403</con:status>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>text/plain</con:mediaType>
          <con:status>201</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2013/10/coordinator">coor:ErrorList</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="8967c716-04ad-4e51-907a-be9229dd4a9e">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="STS Get" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{ASSERTION}" id="b3a7cbd6-766f-407c-b7ff-509e1e04b4f1">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ASSERTION</con:name>
          <con:value>${#TestCase#assertionUUID}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:default>${#TestCase#assertionUUID}</con:default>
        </con:parameter>
      </con:parameters>
      <con:method name="STS- GET" method="GET" id="f83428e5-fc73-46e6-8897-fa23546a8e18">
        <con:settings/>
        <con:parameters/>
        <con:request name="Request 1" mediaType="application/xml" id="521b0bd1-ee9d-4bb4-bbe2-f1f2dc368a56">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
  </con:interface>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="RightsTokenCreate" type="rest" basePath="" definitionUrl="C:\Documents and Settings\schinna\Desktop\Rights_8.0\RightsArchive\RTC wadl\RightsTokenCreate_1.wadl" id="8ad02845-6a05-4b8b-b079-b0e79231879f" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT"/><con:endpoints>
      <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
    </con:endpoints>
    <con:resource name="RightsTokenCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" id="e2a4c239-3efe-4e94-80b6-ee570c0b2cfa">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>AccountID</con:name>
          <con:value/>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default/>
        </con:parameter>
      </con:parameters>
      <con:method name="RightsTokenCreate Request" method="POST" id="91047985-4005-4224-b292-2f5c3f7620a8">
        <con:settings/>
        <con:parameters>
          <con:parameter>
            <con:name>AccountID</con:name>
            <con:value/>
            <con:style>TEMPLATE</con:style>
            <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
            <con:default/>
          </con:parameter>
        </con:parameters>
        <con:representation type="REQUEST" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>201</con:status>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status/>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="FAULT" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>400 401 403 404</con:status>
          <con:params/>
          <con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="FAULT" id="">
          <con:mediaType>text/html</con:mediaType>
          <con:status>413 500</con:status>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="FAULT" id="">
          <con:mediaType>text/plain</con:mediaType>
          <con:status>400</con:status>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="f3e36fdb-048f-4219-aee4-bf9f8796a9c8">
          <con:settings/>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
  </con:interface>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DEC Policy PolicyGet API" type="rest" basePath="" definitionUrl="C:\Documents and Settings\jbaisakh\Desktop\DEC%20Policy%20PolicyGet%20API_1_1.wadl" id="f8c4c24d-acd2-4df4-9d67-477953a4e7cc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT"/><con:endpoints>
      <con:endpoint>${#Project#Query_HostName}</con:endpoint>
    </con:endpoints>
    <con:resource name="PolicyGet" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" id="4a6dc383-a49d-483e-b7d8-801193d7c87b">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ACCT</con:name>
          <con:value>${#TestCase#assertionAccountIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionAccountIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>USER</con:name>
          <con:value>${#TestCase#assertionUserIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionUserIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>POLICYCLASS</con:name>
          <con:value>${#TestCase#policyClass}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#policyClass}</con:default>
        </con:parameter>
        
        
      </con:parameters>
      <con:method name="GET" method="GET" id="e227e45b-8e18-4a68-a97a-040a1983e1aa">
        <con:settings/>
        <con:parameters/>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>0</con:status>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:request name="PolicyGet I" mediaType="application/xml" id="4e7a97f8-fed5-4d05-ae12-a37cede1fd20">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="PolicyGet for Account" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" id="471b1637-eea0-4ada-b444-2f51310e07cd">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ACCT</con:name>
          <con:value>${#TestCase#assertionAccountIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionAccountIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>POLICYCLASS</con:name>
          <con:value>${#TestCase#policyClass}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#policyClass}</con:default>
        </con:parameter>
        
        
      </con:parameters>
      <con:method name="GET" method="GET" id="5c6e7041-bca3-4f45-a29d-b39e05592f8f">
        <con:settings/>
        <con:parameters/>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>0</con:status>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:request name="PolicyGet for Account" mediaType="application/xml" id="5da167c3-2167-44f4-a3b9-499399544e24">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
  </con:interface>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DECE Policy PolicyCreate" type="rest" basePath="" definitionUrl="C:\Documents and Settings\jbaisakh\Desktop\DECE%20Policy%20PolicyCreate_1_1.wadl" id="55b6566d-835b-4883-8425-49428f15507d" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT"/><con:endpoints>
      <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
    </con:endpoints>
    <con:resource name="PolicyCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" id="2e727243-e5a6-4fb6-a7eb-a62942cdf009">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ACCT</con:name>
          <con:value>${#TestCase#assertionAccountIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionAccountIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>USER</con:name>
          <con:value>${#TestCase#assertionUserIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionUserIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>POLICYCLASS</con:name>
          <con:value>${#TestCase#policyClass}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#policyClass}</con:default>
        </con:parameter>
        
        
      </con:parameters>
      <con:method name="POST" method="POST" id="0a45a7c9-a0df-421a-9e59-2b275863fbcb">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status/>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="FAULT" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>400 403</con:status>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>0 201</con:status>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:request name="PolicyCreate I" mediaType="application/xml" postQueryString="false" id="d212f45b-3ffe-4d2b-a738-9f5ffea87704">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="PolicyCreate Account" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" id="95f00848-cad3-41c5-8cb4-de87ae205a76">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ACCT</con:name>
          <con:value>${#TestCase#assertionAccountIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionAccountIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>POLICYCLASS</con:name>
          <con:value>${#TestCase#policyClass}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#policyClass}</con:default>
        </con:parameter>
        
        
      </con:parameters>
      <con:method name="POST" method="POST" id="bb4c2605-fc49-4b01-9347-27f6d24c39d1">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status/>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="FAULT" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>400 403</con:status>
          <con:params/>
          <con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:representation type="RESPONSE" id="">
          <con:mediaType>application/xml</con:mediaType>
          <con:status>0 201</con:status>
          <con:params/>
          <con:element xsi:nil="true"/>
          <con:description xsi:nil="true"/>
        </con:representation>
        <con:request name="PolicyCreate Account" mediaType="application/xml" postQueryString="false" id="394ae9f0-34b1-45e4-9344-c2c525642c44">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
  </con:interface>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DECE Policy PolicyDelete" type="rest" basePath="" definitionUrl="C:\Documents and Settings\jbaisakh\Desktop\DECE%20Policy%20PolicyDelete_1_1.wadl" id="0a2d5977-c054-422a-a7e8-a1d98e0063ea" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT"/><con:endpoints>
      <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
    </con:endpoints>
    <con:resource name="PolicyDelete" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" id="5504366a-d22c-431d-afa2-e94587b699db">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ACCT</con:name>
          <con:value>${#TestCase#assertionAccountIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionAccountIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>USER</con:name>
          <con:value>${#TestCase#assertionUserIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionUserIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>POLICYCLASS</con:name>
          <con:value>${#TestCase#policyClass}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#policyClass}</con:default>
        </con:parameter>
        
        
      </con:parameters>
      <con:method name="DELETE" method="DELETE" id="280b255b-4048-4fa1-b650-a4a8ecf84cea">
        <con:settings/>
        <con:parameters/>
        <con:request name="PolicyDelete I" mediaType="application/xml" id="e8ea7fc2-7f47-4588-b4d7-356c93492122">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="PolicyDelete Account" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" id="9b989d0e-5b9b-4614-9649-315853dd92d0">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>ACCT</con:name>
          <con:value>${#TestCase#assertionAccountIdFULL}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#assertionAccountIdFULL}</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>POLICYCLASS</con:name>
          <con:value>${#TestCase#policyClass}</con:value>
          <con:style>TEMPLATE</con:style>
          <con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type>
          <con:default>${#TestCase#policyClass}</con:default>
        </con:parameter>
        
        
      </con:parameters>
      <con:method name="DELETE" method="DELETE" id="f00c6282-1893-451a-adde-73e4478ce1c8">
        <con:settings/>
        <con:parameters/>
        <con:request name="PolicyDelete Account" mediaType="application/xml" id="371f26cf-de0e-4b01-93eb-b745f94aaeea">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request/>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
  </con:interface>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="AccountCreate" type="rest" basePath="" id="96832831-dfd7-4c3f-867a-449ab64ee57d" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://qa.p.uvvu.com</con:endpoint></con:endpoints><con:resource name="AccountCreate" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account" id="6e62f945-1b6a-481a-8ff6-fd0d75c2c330"><con:settings/><con:parameters/><con:method name="Method 1" method="POST" id="a729c509-f6d8-4616-99f9-ba472a036e4b"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:Account</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2013/10/coordinator">coor:ErrorList</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="468eca8c-56c4-4ea4-9d37-76d7181c38c6"><con:settings/><con:endpoint>https://qa.p.uvvu.com</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="FirstUser" type="rest" basePath="" id="c98ce04b-7553-4a92-8034-af38266274b5" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://qa.p.uvvu.com</con:endpoint></con:endpoints><con:resource name="Firstuser" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User" id="a6124af3-3319-4ada-b6c2-ae00a06b9bff"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value>AccountID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AccountID</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="ecfed9cb-4388-47d0-b309-663b6f13e91c"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="614c6d28-407a-4676-a3c0-a42268e2bf15"><con:settings/><con:endpoint>https://qa.p.uvvu.com</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="UserCreate" type="rest" basePath="" id="830ed136-cf6b-4783-b61f-4b448fb47d7f" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://qa.p.uvvu.com</con:endpoint></con:endpoints><con:resource name="UserCreate" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User" id="a2dbb27a-f88f-44fc-8d65-ca8c10948882"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value>AccountID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AccountID</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="a04b24b5-f568-443b-9235-88f1bf801e03"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:User</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>503 404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/xml;charset=UTF-8</con:mediaType><con:status>303</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2015/03/coordinator">coor:ErrorList</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="3f408cde-f82e-4071-a0bb-ff8bd61f7c08"><con:settings/><con:endpoint>https://qa.p.uvvu.com</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DMRCreate" type="rest" basePath="" id="7119128f-c743-40c5-8ba0-3da596c06fd1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint></con:endpoints><con:resource name="DMRCreate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight" id="6cce7dd9-d777-45b9-b313-79f59be5f073"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>NodeAccountId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>NodeAccountId</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>RightsTokenId</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>RightsTokenId</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="5d58d244-0aa0-4084-bb09-94fee7b1bd4a"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/xml</con:mediaType><con:status>400 409 403</con:status><con:params/><con:element xmlns:coor="${#Project#coordinatorSchema}">coor:ErrorList</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:proj="${#Project#coordinatorSchema}">proj:DiscreteMediaToken</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/xml</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:ErrorList</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="51a48af6-bc63-47f1-9200-abe2efc1494e"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="RightsTokenGet" type="rest" basePath="" id="9edcb52e-1044-42f6-b420-c78a52f720df" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#Query_HostName}</con:endpoint></con:endpoints><con:resource name="RightsTokenGet" path="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" id="2ec76740-7cba-4f1d-89f9-69e889076319"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value>AccountID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AccountID</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RightsTokenID</con:name><con:value>RightsTokenID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>RightsTokenID</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="5cd2acc7-baf7-4f1f-8c59-36578cb7c4ea"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="${#Project#coordinatorSchema}">coor:RightsToken</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2012/12/coordinator">coor:RightsToken</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/xml;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:coor="http://www.decellc.org/schema/2015/03/coordinator">coor:ErrorList</con:element></con:representation><con:request name="Request 1" mediaType="application/xml" postQueryString="false" id="a22c26f0-f2d9-4e76-aaff-614ce79fc5ed"><con:settings/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DiscreteMediaRightConsume" type="rest" basePath="" definitionUrl="C:\Users\aravind.racharla\Desktop\Services\DiscreteMediaRightConsume_1.wadl" id="3591122d-32a0-4e18-8c12-c6c3a645111b" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/C:/Users/aravind.racharla/Desktop/Services/DiscreteMediaRightConsume_1.wadl"><con:part><con:url>file:/C:/Users/aravind.racharla/Desktop/Services/DiscreteMediaRightConsume_1.wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02">
  <doc xml:lang="en" title="DiscreteMediaRightConsume"/>
  <resources base="${#Project#Provision_HostName}">
    <resource path="rest/1/06/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/{ContentProfile}/DiscreteMediaRight/{DiscreteMediaProfile}/Consume" id="DiscreteMediaRightConsume">
      <doc xml:lang="en" title="DiscreteMediaRightConsume"/>
      <param name="NodeAccountId" default="${#Project#NodeAccountId}" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="RightsTokenId" default="${#TestCase#RightsTokenId}" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="ContentProfile" default="${#TestCase#ContentProfile}" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="DiscreteMediaProfile" default="${#TestCase#DiscreteMediaProfile}" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <method name="POST" id="DiscreteMediaRightConsumePost">
        <doc xml:lang="en" title="DiscreteMediaRightConsumePost"/>
        <request>
          <representation mediaType="application/xml"/>
        </request>
        <response status="200 201 202">
          <representation mediaType="application/xml"/>
        </response>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="400 401 403 404 409 500">
          <representation mediaType="application/xml" element="sch:Errors" xmlns:sch="http://www.decellc.org/schema"/>
        </response>
        <response status="400 401 404 500 503">
          <representation mediaType="text/html"/>
        </response>
        <response status="500">
          <representation mediaType="text/plain"/>
        </response>
        <response status="400 405 500">
          <representation mediaType="text/xml"/>
        </response>
        <response status="201">
          <representation mediaType="text/plain"/>
        </response>
      </method>
      <method name="PUT" id="DiscreteMediaRightConsumePut">
        <doc xml:lang="en" title="DiscreteMediaRightConsumePut"/>
        <request>
          <representation mediaType="application/xml"/>
        </request>
        <response status="200 202">
          <representation mediaType="application/xml"/>
        </response>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="400">
          <representation mediaType="application/xml" element="sch:Errors" xmlns:sch="http://www.decellc.org/schema"/>
        </response>
        <response status="503">
          <representation mediaType="text/html"/>
        </response>
        <response status="405 500">
          <representation mediaType="text/plain"/>
        </response>
        <response status="400 405">
          <representation mediaType="text/xml"/>
        </response>
      </method>
      <method name="GET" id="DiscreteMediaRightConsumeGet">
        <doc xml:lang="en" title="DiscreteMediaRightConsumeGet"/>
        <request/>
        <response status="202">
          <representation mediaType="application/xml"/>
        </response>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="400 401">
          <representation mediaType="application/xml" element="sch:Errors" xmlns:sch="http://www.decellc.org/schema"/>
        </response>
        <response status="500 503">
          <representation mediaType="text/html"/>
        </response>
        <response status="405 500">
          <representation mediaType="text/plain"/>
        </response>
        <response status="400 405">
          <representation mediaType="text/xml"/>
        </response>
      </method>
      <method name="DELETE" id="DiscreteMediaRightConsumeDelete">
        <doc xml:lang="en" title="DiscreteMediaRightConsumeDelete"/>
        <request/>
        <response status="202">
          <representation mediaType="application/xml"/>
        </response>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="400">
          <representation mediaType="application/xml" element="sch:Errors" xmlns:sch="http://www.decellc.org/schema"/>
        </response>
        <response status="503">
          <representation mediaType="text/html"/>
        </response>
        <response status="405 500">
          <representation mediaType="text/plain"/>
        </response>
        <response status="400 405">
          <representation mediaType="text/xml"/>
        </response>
      </method>
      <method name="OPTIONS" id="DiscreteMediaRightConsumeOptions">
        <doc xml:lang="en" title="DiscreteMediaRightConsumeOptions"/>
        <request/>
        <response status="202">
          <representation mediaType="application/xml"/>
        </response>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="400">
          <representation mediaType="application/xml" element="sch:Errors" xmlns:sch="http://www.decellc.org/schema"/>
        </response>
        <response status="503">
          <representation mediaType="text/html"/>
        </response>
        <response status="500">
          <representation mediaType="text/plain"/>
        </response>
        <response status="400 405">
          <representation mediaType="text/xml"/>
        </response>
        <response status="200">
          <representation mediaType="text/xml"/>
        </response>
      </method>
      <method name="HEAD" id="DiscreteMediaRightConsumeHead">
        <doc xml:lang="en" title="DiscreteMediaRightConsumeHead"/>
        <request/>
        <response status="202">
          <representation mediaType="application/xml"/>
        </response>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="400">
          <representation mediaType="application/xml" element="sch:Errors" xmlns:sch="http://www.decellc.org/schema"/>
        </response>
        <response status="503">
          <representation mediaType="text/html"/>
        </response>
        <response status="405 500">
          <representation mediaType="text/plain"/>
        </response>
        <response status="400 405">
          <representation mediaType="text/xml"/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://${</con:endpoint></con:endpoints><con:resource name="DiscreteMediaRightConsume" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/{ContentProfile}/DiscreteMediaRight/{DiscreteMediaProfile}/Consume" id="8fcd0d55-879f-4eda-8bdc-22b61ba2a8d3"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>${#Project#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>RightsTokenId</con:name><con:value>${#TestCase#RightsTokenId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#RightsTokenId}</con:default></con:parameter><con:parameter><con:name>ContentProfile</con:name><con:value>${#TestCase#ContentProfile}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#ContentProfile}</con:default></con:parameter><con:parameter><con:name>DiscreteMediaProfile</con:name><con:value>${#TestCase#DiscreteMediaProfile}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#DiscreteMediaProfile}</con:default></con:parameter></con:parameters><con:method name="DiscreteMediaRightConsumePost - DiscreteMediaRightConsumePost" method="POST" id="ddeb129c-c40e-46dd-ad65-0f598c7cc97d"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200 201 202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 404 409 500</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>400 401 404 500 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/plain</con:mediaType><con:status>201</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="3faf154e-f761-49de-86e8-cfcd60b63915" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightConsumePut - DiscreteMediaRightConsumePut" method="PUT" id="5f38c85f-7289-4a65-a013-1e1c64a1eca9"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200 202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="d019cfb5-1fee-4cfc-8671-dacaa709c16a" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightConsumeGet - DiscreteMediaRightConsumeGet" method="GET" id="ab8491ae-5f78-4af9-9443-bf4aa8f84b66"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>500 503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="0450f20f-3a9e-49f3-a626-cd628b97bebf" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightConsumeDelete - DiscreteMediaRightConsumeDelete" method="DELETE" id="8fc6f3b3-09ed-4463-b37f-bfedce930448"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="a1e64358-05a2-4933-a4f7-6699137b3a66" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightConsumeOptions - DiscreteMediaRightConsumeOptions" method="OPTIONS" id="1c8a7c3b-fa63-4ca0-8581-03329a55b25b"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="80119a46-0bf6-415a-a6e0-f4d34a1834c0" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightConsumeHead - DiscreteMediaRightConsumeHead" method="HEAD" id="ce96c430-29a4-45e6-9efc-761d22b21c09"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>202</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sch="http://www.decellc.org/schema">sch:Errors</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="8ecf04e6-7f5d-4f36-b1f6-59ca2e0a65f7" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="DiscreteMediaRightUpdate" type="rest" basePath="" definitionUrl="C:\Users\aravind.racharla\Desktop\Services\DiscreteMediaRightUpdate_1.wadl" id="a2afe3f1-e5db-417a-9843-7111bcf4c6ef" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/C:/Users/aravind.racharla/Desktop/Services/DiscreteMediaRightUpdate_1.wadl"><con:part><con:url>file:/C:/Users/aravind.racharla/Desktop/Services/DiscreteMediaRightUpdate_1.wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02">
  <doc xml:lang="en" title="DiscreteMediaRightUpdate"/>
  <resources base="${#Project#Provision_HostName}">
    <resource path="rest/1/06/Account/{NodeAccountId}/RightsToken/DiscreteMediaRight/{DiscreteMediaTokenId}" id="DiscreteMediaRightUpdate">
      <doc xml:lang="en" title="DiscreteMediaRightUpdate"/>
      <param name="NodeAccountId" default="${#Project#NodeAccountId}" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="DiscreteMediaTokenId" default="${#TestCase#DiscreteMediaTokenId}" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <method name="PUT" id="DiscreteMediaRightUpdatePut">
        <doc xml:lang="en" title="DiscreteMediaRightUpdatePut"/>
        <request>
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </request>
        <response status="">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="200">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 403 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
        </response>
        <response status="500">
          <representation mediaType="text/xml"/>
        </response>
      </method>
      <method name="GET" id="DiscreteMediaRightUpdateGet">
        <doc xml:lang="en" title="DiscreteMediaRightUpdateGet"/>
        <request/>
        <response status="">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="200">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
      </method>
      <method name="POST" id="DiscreteMediaRightUpdatePost">
        <doc xml:lang="en" title="DiscreteMediaRightUpdatePost"/>
        <request>
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </request>
        <response status="">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="200">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
        <response status="405">
          <representation mediaType="text/plain"/>
        </response>
      </method>
      <method name="DELETE" id="DiscreteMediaRightUpdateDelete">
        <doc xml:lang="en" title="DiscreteMediaRightUpdateDelete"/>
        <request/>
        <response status="">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="200">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
          <representation mediaType="text/xml"/>
        </response>
        <response status="400 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
        <response status="405">
          <representation mediaType="text/plain"/>
        </response>
      </method>
      <method name="OPTIONS" id="DiscreteMediaRightUpdateOptions">
        <doc xml:lang="en" title="DiscreteMediaRightUpdateOptions"/>
        <request/>
        <response status="">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="200">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
        <response status="405">
          <representation mediaType="text/plain"/>
        </response>
      </method>
      <method name="HEAD" id="DiscreteMediaRightUpdateHead">
        <doc xml:lang="en" title="DiscreteMediaRightUpdateHead"/>
        <request/>
        <response status="">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="200">
          <representation mediaType="application/xml" element="dece:DiscreteMediaToken" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
        <response status="405">
          <representation mediaType="text/plain"/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://${</con:endpoint></con:endpoints><con:resource name="DiscreteMediaRightUpdate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/DiscreteMediaRight/{DiscreteMediaTokenId}" id="1911c2db-f494-4404-a843-317003eb8612"><con:settings/><con:parameters><con:parameter><con:name>NodeAccountId</con:name><con:value>${#TestCase#NodeAccountId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#NodeAccountId}</con:default></con:parameter><con:parameter><con:name>DiscreteMediaTokenId</con:name><con:value>${#TestCase#DiscreteMediaTokenId}</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#TestCase#DiscreteMediaTokenId}</con:default></con:parameter></con:parameters><con:method name="DiscreteMediaRightUpdatePut" method="PUT" id="5544ed59-2756-4e74-9890-0e052bc6f18e"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 403 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="dd7125df-0ac9-4c44-b8a8-d4aaf670ae2c" mediaType="application/xml" postQueryString="false"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightUpdateGet" method="GET" id="7255a4b8-118f-4846-b8df-b11d287cde18"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="0838022a-ec0b-4303-aa73-61d7ec1aa732" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightUpdatePost" method="POST" id="f1847a54-5c58-4ca9-8bc1-bb9f6b9b8124"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="f113c03a-1f82-4cdc-9e5a-d8155d758272" mediaType="application/xml"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightUpdateDelete" method="DELETE" id="2c7759b6-9b3b-4e2e-a924-486a5b237d38"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="f2149bf1-ad92-41c8-8071-4890ba35fb40" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightUpdateOptions" method="OPTIONS" id="c062a0df-0376-49ae-8031-1acdb87884c9"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="a6e105eb-2d4f-48ba-9d2e-649c8a6be0c7" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="DiscreteMediaRightUpdateHead" method="HEAD" id="2b8aa30d-0a88-4f76-a1f5-1ed6dad17e1b"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:DiscreteMediaToken</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="c80c1e77-e255-452f-874a-39ebe3a073fc" mediaType="application/json"><con:settings/><con:endpoint>https://${</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="UserStatusUpdate" type="rest" basePath="" definitionUrl="C:\Users\aravind.racharla\Desktop\Services\UserStatusUpdate_1.wadl" id="18cdb93b-e19e-4797-9986-7c3b09ee5fb6" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/C:/Users/aravind.racharla/Desktop/Services/UserStatusUpdate_1.wadl"><con:part><con:url>file:/C:/Users/aravind.racharla/Desktop/Services/UserStatusUpdate_1.wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02">
  <doc xml:lang="en" title="UserStatusUpdate"/>
  <resources base="${#Project#Provision_HostName}">
    <resource path="rest/${#Project#V1}/${#Project#V2}/Account/{AccountID}/User/{UserID}/ResourceStatus/Current/Update" id="UserStatusUpdate">
      <doc xml:lang="en" title="UserStatusUpdate"/>
      <param name="AccountID" default="AccountID" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <param name="UserID" default="UserID" type="xs:string" required="false" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
      <method name="PUT" id="UserStatusUpdate">
        <doc xml:lang="en" title="UserStatusUpdate"/>
        <request>
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </request>
        <response status="">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 401 403 404">
          <representation mediaType="application/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="400 404 500">
          <representation mediaType="text/xml"/>
        </response>
        <response status="303">
          <representation mediaType="application/xml"/>
        </response>
        <response status="500">
          <representation mediaType="text/html"/>
        </response>
        <response status="0">
          <representation mediaType=""/>
        </response>
        <response status="403">
          <representation mediaType="text/html;charset=utf-8"/>
        </response>
      </method>
      <method name="GET" id="UserStatusUpdate - GET">
        <doc xml:lang="en" title="UserStatusUpdate - GET"/>
        <request/>
        <response status="405">
          <representation mediaType="text/plain"/>
          <representation mediaType="text/plain; charset=UTF-8"/>
          <representation mediaType="text/plain;charset=UTF-8"/>
        </response>
        <response status="403">
          <representation mediaType="text/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
          <representation mediaType="application/xml" element="coor:ErrorList" xmlns:coor="${#Project#coordinatorSchema}"/>
        </response>
      </method>
      <method name="POST" id="UserStatusUpdate - POST">
        <doc xml:lang="en" title="UserStatusUpdate - POST"/>
        <request>
          <representation mediaType="application/xml"/>
        </request>
        <response status="">
          <representation mediaType="application/xml"/>
        </response>
        <response status="405">
          <representation mediaType="text/plain"/>
          <representation mediaType="text/plain; charset=UTF-8"/>
        </response>
        <response status="404">
          <representation mediaType="text/html; charset=iso-8859-1"/>
        </response>
        <response status="403">
          <representation mediaType="application/xml" element="coor:ErrorList" xmlns:coor="${#Project#coordinatorSchema}"/>
        </response>
      </method>
      <method name="DELETE" id="UserStatusUpdate - DELETE">
        <doc xml:lang="en" title="UserStatusUpdate - DELETE"/>
        <request/>
        <response status="405">
          <representation mediaType="text/plain"/>
          <representation mediaType="text/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
        <response status="403">
          <representation mediaType="application/xml" element="coor:ErrorList" xmlns:coor="${#Project#coordinatorSchema}"/>
        </response>
      </method>
      <method name="HEAD" id="UserStatusUpdate - HEAD">
        <doc xml:lang="en" title="UserStatusUpdate - HEAD"/>
        <request/>
        <response status="405">
          <representation mediaType="text/plain"/>
          <representation mediaType=""/>
        </response>
        <response status="403">
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
          <representation mediaType=""/>
        </response>
      </method>
      <method name="OPTIONS" id="UserStatusUpdate - OPTIONS">
        <doc xml:lang="en" title="UserStatusUpdate - OPTIONS"/>
        <request/>
        <response status="405">
          <representation mediaType="text/xml" element="dece:ErrorList" xmlns:dece="http://www.decellc.org/schema/2010/10/dece"/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>${#Project#Provision_HostName}</con:endpoint></con:endpoints><con:resource name="UserStatusUpdate" path="rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/User/{UserID}/ResourceStatus/Current/Update" id="f47095ae-21ab-4a76-b51f-56179b4c9fab"><con:settings/><con:parameters><con:parameter><con:name>AccountID</con:name><con:value>AccountID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AccountID</con:default></con:parameter><con:parameter><con:name>UserID</con:name><con:value>UserID</con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>UserID</con:default></con:parameter></con:parameters><con:method name="UserStatusUpdate" method="PUT" id="069e5a41-3f64-40d6-b617-6a0b64f18955"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>400 401 403 404</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>400 404 500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>303</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html</con:mediaType><con:status>500</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType/><con:status>0</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="0a41b874-cc94-4ef0-9e43-52677a9c76b8" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserStatusUpdate - GET" method="GET" id="fc10dac2-1d11-4185-82e7-29bfde59cc19"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain;charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="${#Project#coordinatorSchema}">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="73dabf15-c0fe-45ec-b1e3-42bd4904d099" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserStatusUpdate - POST" method="POST" id="99b068d9-cd8b-48ea-81fc-6f56bda68d2e"><con:settings/><con:parameters/><con:representation type="REQUEST" id=""><con:mediaType>application/xml</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/plain; charset=UTF-8</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>404</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="${#Project#coordinatorSchema}">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="83234d6c-9899-422d-b13a-a69d278458bb" mediaType="application/xml"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserStatusUpdate - DELETE" method="DELETE" id="c87d50f8-74da-437c-ba47-bbdb75cd50eb"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>405</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:coor="${#Project#coordinatorSchema}">coor:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="12628ed6-b85a-4b36-baa8-a47209c1d465" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserStatusUpdate - HEAD" method="HEAD" id="00a63d99-b7fd-402b-a572-62487f446d73"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>text/plain</con:mediaType><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>405</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="FAULT" id=""><con:mediaType/><con:status>403</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="e73ba1fb-da10-4975-b8b6-e441aeacefce" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method><con:method name="UserStatusUpdate - OPTIONS" method="OPTIONS" id="d2f79a8f-9f43-4a38-b363-a45fa2ab9047"><con:settings/><con:parameters/><con:representation type="FAULT" id=""><con:mediaType>text/xml</con:mediaType><con:status>405</con:status><con:params/><con:element xmlns:dece="http://www.decellc.org/schema/2010/10/dece">dece:ErrorList</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="5f7f63c5-44b7-48f2-babf-a1a639051701" mediaType="application/json"><con:settings/><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="setup_project_level_properties" id="64ed98d2-7445-49f1-866a-68f6d7afecf0"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="load_properties_file" searchProperties="true" id="cf1f2686-7251-4c5c-bf79-0775649e91c6"><con:settings/><con:testStep type="groovy" name="read_properties" id="9290d47a-a95e-4d6a-95f0-1e2e58f78971"><con:settings/><con:config><script>

def tC = testRunner.getTestCase();
def tS = tC.getTestSuite();
def tP = tS.getProject();

log.info("Set Environment properties!!!");
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath
log.info("Project Path : '" + projectPath + "'");

def eNV = context.expand( '${#Project#ENV}' )
log.info("Environment: '" + eNV+ "'");

log.info "versionMinor: "+tP.getPropertyValue("versionMinor");

def versionMinor = context.expand( '${#Project#versionMinor}' )
def schema = tP.getPropertyValue("coordinatorSchema_"+versionMinor);

tP.setPropertyValue("coordinatorSchema",schema);
log.info "Setting the coordinatorSchema value ---- "+schema;

def propertiesPath = null;

if (System.properties['os.name'].toLowerCase().contains('windows')) 
	{
    		log.info "it's Windows OS!!";
    		File temp = new File( projectPath + "\\..\\..\\..\\Properties\\");
    		propertiesPath = temp.getCanonicalPath();
	} 
else 
	{
    		log.info "it's Linux OS!!";
    		File temp = new File(projectPath + "/../../../Properties/");
    		propertiesPath = temp.getCanonicalPath();
	}
	
log.info("Properties File Location : '" + propertiesPath+ "'");


def propMap=[:]
BufferedReader reader = new BufferedReader(new FileReader(propertiesPath + "/" + eNV +"project.properties"));
log.info("Load property file : '" + propertiesPath + "/" + eNV +"project.properties"+ "'");
String line;
while ((line = reader.readLine()) != null)
	{
		if (line.trim().length()==0) continue;
		if (line.charAt(0)=='#') continue;

		int delimPosition = line.indexOf("=");
		String key = line.substring(0, delimPosition-0).trim();
		String value = line.substring(delimPosition+1).trim();
		propMap.put(key, value);
	}

propMap.each{ k, v -> tP.setPropertyValue(k,v)}


log.info "updated_project_properties from properties file";

tP.setPropertyValue("CID",tP.getPropertyValue("Rights_CID"));

tP.setPropertyValue("ALID",tP.getPropertyValue("Rights_ALID"));

tP.setPropertyValue("APID",tP.getPropertyValue("Rights_APID"));
</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite>
  <con:testSuite name="R1_RightsTokenUpdate_RTL_TestCases" id="341da09f-1ccc-4042-8261-d53884776a72">
    <con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/soapUIReports/R3/ReportAt-2013-10-16:10-04-30</con:setting></con:settings>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId" searchProperties="true" id="593b3a47-f4c7-4602-84e6-6f9624ca7241">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" id="5dd025eb-4742-4b74-8ce7-be641e53d421" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="d074afac-ee6c-43cb-a742-f451575cd284">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="282756a1-8d2c-4d3e-bd9d-df053db618d2"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="ac66b9fa-3822-44b5-893c-bbe30abba7c5"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="78a6dea0-0886-4ce5-af9b-c74fd9a811aa"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" id="d958a884-fd8f-4fd6-8e80-afaccc0d0ffd"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="b9ab4a64-0b7f-4d2b-aca0-10599b14a0ad">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="4a9dc12b-7f26-4ffd-92a0-04b4e7fec536">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="8cebcab2-c7a2-49ae-b184-16307139824a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="58be2494-03bd-4291-b51c-cbeab1441439">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="f0f00d8d-404b-48d0-896e-268ee96bf4b6">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="12706ef0-9854-4bd7-8c5b-915a5a210e9b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>157E6F9FC6F64D2FE05305991F0A9450</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_f56a89de-d53d-4373-b9e5-45710f9fb0dc</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>157E6F9FC7854D2FE05305991F0A9450</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:157E6F9FC6FD4D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:157E6F9FC6FD4D2FE05305991F0A9450</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2013</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>RLDGbyList_firstuser20150507_1431004119648</con:value></con:property><con:property><con:name>useroid</con:name><con:value>157E6F9FC7024D2FE05305991F0A9450</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Capital Media Profile HD" searchProperties="true" id="17b9c185-bf03-42af-8fd8-ca6907e6dbc8">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="df581a9f-88a5-46af-aa3b-cd9d4afd4a77"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="69ee79da-e083-4aa4-ac1a-51dc8b067889">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="08aed1bc-1f87-4821-b77f-3f3d349aa9a9"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="2ebd47d2-cddf-4a79-a39f-2bb23c5ea71b"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="23f7964b-4cf9-4e61-ae36-eb7aedf84ae4"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="d056e812-ecf4-471e-ad73-7e9abb4be267"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="9bdd25ff-ce54-4ca0-a25e-7dc8e736963c">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="b97d262e-1e66-4bc1-b807-4bbbd6853e89">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:HD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="85a20803-c263-4bd3-b3ce-4ff996190ed7">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="03a658a1-0730-4b8d-ab09-c850df318a39">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="12bbcfbb-2fea-49b2-93d9-9c1de4440222">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="a08fab90-8fcb-4d82-981f-a351433721c4">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080CB251184E452FE05305991F0A8307</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:HD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1970</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080CB251184E452FE05305991F0A8307</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10002_RightsTokenUpdate_FUNC_RTL_With_Capital RightsLockerId" searchProperties="true" id="57c68922-4df7-4396-abd8-aaa28ceaa0bd">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="f125f513-c417-4f7a-b656-a316bce0d595"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="90a76e76-5637-413b-864b-2467bade8077">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="ad96ebb1-fd62-4c67-8397-6bad619d4b43"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="61cbaa0a-4d18-4603-83fa-ba8cc0b427e1"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="d5e916cb-d529-4e93-afaa-82153bead499"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="49a72a83-65da-465f-a25a-40ba88989a0b"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="9a02e231-c7ce-45f5-9853-e60c241bdcb0">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="e9a997b6-e8c8-4243-b192-24cbe21557ad">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","URN:DECE:RIGHTSLOCKERID:ORG:DECE:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:HD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="b8eadfe6-347a-4d16-b69c-b9b788e16223">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="aee37119-3ca1-4732-9266-0c98aead7487">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="71636cff-f51f-450e-ae9e-3014fd107a64">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="7b360c7c-4588-4164-b6c9-90841dec4861">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080CB6D0C9955705E05307991F0AAA79</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:HD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>URN:DECE:RIGHTSLOCKERID:ORG:DECE:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>URN:DECE:RIGHTSLOCKERID:ORG:DECE:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1727</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-pattern-valid: Value 'URN:DECE:RIGHTSLOCKERID:ORG:DECE:080C1196C10A3A07E05305991F0A063A' is not facet-valid with respect to pattern 'urn:dece:.*' for type 'EntityID-type'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A/RightsToken/urn:dece:rightstokenid:org:dece:080CB6D0C9955705E05307991F0AAA79</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080CB6D0C9955705E05307991F0AAA79</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10003_RightsTokenUpdate_FUNC_RTL_With_Mixed_Media Profile HD" searchProperties="true" id="a553405c-2633-4073-8c53-14bec992ca4e">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="f5956f18-9f8f-4b2f-8538-1184fca73c74"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="58954eb2-54de-4c3c-8132-749b3aee16f0">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="750bfc10-8eb0-4077-b365-61878558b52c"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="59ba6188-a561-493f-ab01-01da254d65a6"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="4a271fbd-82a8-4838-a58f-4a9311c23ef9"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="3f2e4e6e-58a3-41b2-bc01-93c8308547ba"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="4979b5d1-b897-4b5e-b4c8-75b6d8ad3d05">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="3b4e2172-1dda-47e9-8b8b-9af4a3bfb2f4">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="afdb82b4-66f7-4ceb-8bf8-06dcaef378e9">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="86357091-2703-4936-878b-0d670ea696db">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="1497d9e5-9052-4eb3-8e29-86459bde0b14">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="aec926a5-0a9d-4b62-a3b4-98bf53d1deff">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080D37D9F604100EE05305991F0AC2D6</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1974</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080D37D9F604100EE05305991F0AC2D6</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10004_RightsTokenUpdate_FUNC_RTL_With_Capital Alid" searchProperties="true" id="9db67f57-215e-444f-b451-cef8a62f2a49">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="21846f18-3944-4c98-9759-f9b19663ef28"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="68724c71-ca66-4190-9f40-2b7cd729f2fe">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="88406590-37d7-42e8-bf37-3db275508fa4"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="f936af87-a477-43c6-a474-f5bdc9a78867"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="0c9a00fd-bac0-4023-be8c-dc6588e5d008"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="1843950e-d63e-42b4-a7b0-9d12d2f9f02e"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="ddc2fe40-dc59-4c87-b9bc-c10891117749">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="b01a690c-7371-4bff-b42c-24420843578e">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("ALID","URN:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="eee50ea0-46eb-4e92-9c48-c0ff2c62105e">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="4dfed6e9-5e3a-4293-8b81-d3e6114a599a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="d22adee6-956f-4464-bb84-bb6d777d3e28">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="d5a118b9-8083-4634-9fdb-0628fcd1ea41">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080F7D4D3EB16ED4E05307991F0A30C3</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2380</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080F7D4D3EB16ED4E05307991F0A30C3</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value/></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10005_RightsTokenUpdate_FUNC_RTL_With_Capital CID" searchProperties="true" id="ef621de0-1289-4eec-b845-b27bf6efb261">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="d9c3d0e8-5577-4022-8418-449cdbaee3b1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="32c272e0-7213-4354-932e-510f57300bdb">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="08721c50-e87a-437f-b569-a0a6a22ab514"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="de2d7321-1180-4b88-8cec-0275739037b4"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="43584259-99ca-4c8f-b56c-1b327729ac0d"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="ca27e299-68f2-4e0d-9f6b-4cf39ecc4af6"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="6560bf9e-7435-4ef3-b36e-1322a201daf9">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="1f44c468-a414-41b9-aa5f-e9cfe442e539">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="928f892b-6baf-408a-a3cf-84e6ac7127e2">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="041fd2d1-daf0-4841-b53b-f9af0c3ff9f5">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="084bfc0c-029f-49cf-8160-96b7207b2b9f">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="07b63c5d-a901-48cd-8778-c5dd30ed9460">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value/></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value/></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value/></con:property><con:property><con:name>assertionAccountId</con:name><con:value/></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value/></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value/></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value/></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value/></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value/></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value/></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1974</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value/></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value/></con:property><con:property><con:name>useroid</con:name><con:value/></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10006_RightsTokenUpdate_FUNC_RTL_With_Mixed_Alid" searchProperties="true" id="d68dd8b4-f5ed-46cf-ae6c-df79ce3a714c">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="6c11fc6a-0033-4024-99b8-96d31cbd0354"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="e93d529d-0498-4d7f-af22-0282b4aa7864">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="cb1f76de-e1f9-474a-9eb6-64c74fab6f31"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="2e703d79-7ccf-45b6-b664-90d95fc451cd"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="8dccde00-affc-41da-818f-2bc43982c184"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="ce139495-3982-41f9-827e-c302b5e2df2a"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="db119357-a828-4761-8f50-5bfaaeb514f1">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="82205cae-c644-4e48-969a-fbb36a3d0d54">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("ALID","URN:DECE:ALID:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="1c235e05-25da-4bb4-9e38-2c72da4a4b27">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="5495e352-014e-48e2-b827-22daa0f95b91">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="0d0464e2-34db-4758-a934-947a94a45213">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="87b6d8d3-b459-4788-9ccf-12a3da037a61">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080F68C7E36818D0E05305991F0A152A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">          <ns4:SoldAs>                     <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                       <ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:sd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>3</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID>                    <ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount>                        <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser>                              <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>4930</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080F68C7E36818D0E05305991F0A152A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value/></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10007_RightsTokenUpdate_FUNC_RTL_With_Mixed CID" searchProperties="true" id="39573092-c2ff-41b8-831f-e289df0807af">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="1a0ce604-f01f-4d85-98e9-0c888e6bafd8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="66b32d52-5e03-4a7d-b490-32935b723658">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="499f35c7-051d-488a-81c9-07dee43493b4"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="65ced704-1e67-48cd-b1c9-8ba31f0b881a"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="71ecef46-a72e-4744-be37-3529a9abd644"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="b5fae23d-e350-45b7-8dd0-d4b5c1d32523"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="31f3f897-25c8-473f-8bd5-4b4737bec8be">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="18bb4f2f-4e94-4ef1-b306-c303896ab0e7">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="6ebfe736-b72a-4527-a102-056c4f43419a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="5e7e2e68-f567-4027-baed-534ce5593367">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="2d2ef674-3253-4fc9-b994-83742fc7ac6d">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="b7c1538f-eb81-43a9-934c-3cd322364b05">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value/></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value/></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value/></con:property><con:property><con:name>assertionAccountId</con:name><con:value/></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value/></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value/></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value/></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value/></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value/></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value/></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1974</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value/></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value/></con:property><con:property><con:name>useroid</con:name><con:value/></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10008_RightsTokenUpdate_FUNC_RTL_With_Capital StreamWebLoc" searchProperties="true" id="c2c68c8d-79af-428c-a3cc-4dc9cec0e13e">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="7f09ddc1-4309-4485-9a13-529a5494d885"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="04687243-40e9-4b88-945e-e95a9adf0efb">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="8edafd96-90bb-4630-9416-487bbad8feae"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="e9d32603-d826-429e-82ef-ebc74dcf58c4"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="18920261-187c-4366-a4c1-455ce2b0efc4"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="9cf78304-a30f-46e4-8b2c-15f57710cb4f"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="e4d8027b-a08a-4ddd-83f8-650bba822d92">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="9e14d84a-457f-41e7-9f12-02948ed3fa54">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="0b281295-37e5-42cd-9970-1fd79be99e6a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="b0ba62df-6934-45bc-94dd-5f4ca818d95b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="8dcb9473-b81e-4531-a215-ac06cb20a290">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="f41089db-ffcf-4749-bfe0-abd5d54b9ff1">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080FDF4519055FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZrb+I4FP0rKPNxFOKE8EhUkCgpWzotbXl0GL6sjOOAIbEhdiDtr187QEroY9mVkJBvrs899+FjX3EYhZbb5hzHgjBaSqOQcjezNrUkpi6DnHCXwghzVyB32H64d60ycOFxi1bqeU3t7zoAdq1iI90M6jXdNs1Ad6BT0xvOzAQ1y545OJCunCe4R7mAVDQ1C5i2bpq6WR+ZtluRP6tcrVpTrfSCYy6xpUsZaAdSKW9qCyHWrmHsdrvyrlJm8dywADCNycP9EC1wBLXW1T6jLFDcOvijso8RDkNURiwyroyCz5XP3SGZUyiSGB9i+V/FAgZwDOnjczL/oeV7sd+jAcuWHUgZJQiG5A2q+jxgsWB+qR3OWUzEIvoyCRMoYB2nSEemTX9oRpHahUAFhjGHOl9A84A1wAGOMUW4NB70mtqPy7qWbR3FkPKAxREvLv8bH0y3OGRr7Ov8mNaB2uWAn1SqdYWR26MoTDjZ4r4a1jVEmB+6idHlUKWnGAckvSdcDmjKFTvjlN7Zcl8Nj8wxF/+nQSfN2YO8wDDBrQ5cpZvJ2/LhjzMjjVVgXK9SFjj98XTezAicOmeGvLX75dlQ5kO03zHg/nK1Ctgzub3tz6dLMJqZ1p/0ZcZ+jybdB/5MBk/Pr/iX2V0PfqLYHrcr23D619ib/JoJMf59642XUdx9rGADVCujbvi23UK0vBut7nrptNoHTtWjVg30PfrUSN4qm2fy+BrepQ83Yr6eDNj9pDbeEL/fNq+TisnEDQtfKmPwM36Z7paO83bLounrtn0bTcfNPJ0T/kXb8cwPk9kSI3FcqjHoeaWu7BIU34uZshBfDzJXd63EhwtMhdZSu5R2uImUO+K7sof7NWiArlerOFal07augXUjCwGqjmN2QfvaqXaOIrNncUaxw2hAVCwlufux+Z4gilyOqY9jfcsSqXRc+wbRgwKWenQgDwGjHI+YlOf5arV7Q6m5rs9Ss84pB4vdyjZZVSv1mXikj3E7EDguanK9oMkDjMiaYCXcaq65HGwuZC02cJuI0CxvYZniREp7rFTWtexG1eAkWodYMTUi5ichLq8X66wyBt//WzpEPLMObkbZafsyr/NvxxJIH58oB65yucayjfiTy8U6JvJlwhY4TfgI3058og6WrKeICdozKX56HxM1H/mMyIyOlHPPc0MB1ThPKA/kbwnKBz2/rqWKy3PfOrZjA8ubcrLdJlkD6krfYgkvRcesGsAyhhglUpleR2yFqZGjGBddAznxs+C5vUgxEQs6FFDgSE5MKVtecO8PMVf3fk+Oenrpo6IQUpZO4FR8ZuuE8s2iGH/7rEEuUn7S/CT/diz23zv2CdZJHJmnvPYFoXO1UlfA6xdzgZiEJVK8WHwK/hnAZ8GLxrzIORchB2qWCPz1l5JSpaYGEWIJFT1PywynSpnxFK9r7L47fYDJxDh/nZF/f57pJBsBhOWbjpMMX12yrjoCdH6itoegHwS3a1dNB9jVrtfIBLe+F1zPtr28KAV2rQ/mj5aTOp3PeOsf</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_7004634c-1f76-411f-9a96-89b10624b9ef</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080FDF4519045FD8E05307991F0AD44D</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080FD63923CA2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080FD63923CA2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080FE35E3BA44E05E05305991F0A0494</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080FD63923CA2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080FDF45190C5FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080FD63923CA2B02E05305991F0AB95C</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080FDF45190C5FD8E05307991F0AD44D</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2273</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080FE35E3BA44E05E05305991F0A0494</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0805151416234915756</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080FD63923CB2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10009_RightsTokenUpdate_FUNC_RTL_With_Capital LicenseaqqBaseLoc" searchProperties="true" id="79dbaf6d-bb43-4b14-8f94-88fa1de7ce36">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="c02dfcc3-6b2d-4820-9c89-16e5994e0251"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="94595b76-bcd9-4e1c-966d-8b3742e3dce9">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="7945dc6f-95e9-498b-988b-9fe8df19bda8"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="56d8c49b-f0c7-4554-ac78-fcf2f9a96906"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="bd0af8e3-7cb6-47c9-91fb-7fccc49881d6"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="5a0c6be0-1544-4866-9ac5-6e449e8f9378"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="d3fef00a-8c94-495a-9095-f66a08ccb83c">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="5235f136-0474-4940-b29a-e3690125cbb3">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="e69282e0-d789-4980-9f3e-c2405d3d47ed">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="dfe6f3ca-d6f1-46df-a545-8f2bcf6094a6">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="e534b357-61b7-41d9-983f-8d385cbb130a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="f8064781-ee3d-41b4-b37e-b2db8f874e57">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>081002B4321B3759E05307991F0AA8FF</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbZcuo4EP0VyvcxZbwSwBWoIiwTJiGQQLb7MqXIDSjYEkgyS77+SgYcTJZh5smldqv7dPfRkS4EiiM3aAgBXBJGC+s4oiJIrTUj4TRgSBARUBSDCCQOho3eTeAW7QDttxiFbqtm/FPyPYzABROHJd/0z6uOiSq2bYav7rkblquvpbGvXIVIoEuFRFTWDNd2fNNxTKc8cvzA9wPHK7q2/dsoPAIXKrZyKdrGDtRa1IyplPPAslarVXHlFRmfWMrfsZ57N0M8hRgZ9YttRWkiXt/542IIGKIIFzGLrQsr53MRimBIJhTJhMMuV/hdLtuyq5byCQWZ/DKyvRB26ZilyyaijBKMIvKOdH96IKcsLDSiCeNETuNvi3BsHdiENTax49NfhpWHdmKgHEIukCmmyNnFuocxcKAYCg/33Zrx67SppVtHHFExZjwW+eV/wwN0CRGbQ2iKfVk7aKcH/KJT9QvAQZfiKBFkCbearHOEQeymCfj0UIUBhzFZ3xChCLoWGp11CO9oue1Gi0xAyP8zoIPhbIM8oiiBOmq1W4+Ls4e7K3QdJcPKoP/0xOwX9FzyaymAQ+fUkI12uzwiZUai7Q5RealWWpv+5u49emgk4ah99uait/tbNfyzfq9yu+g8NN8q3huZoEl7fNdJnuVmbRMvfprOGrOm5/4Wo79QeTBolqy2uJLRwGvf+Kv+1WDslNdo3JxcidcYiPtc5bxdLpdeXtp+q/8+nT09X9sPt+3ZYlGls9ceDqHHF31UTSZUhCzGneq4D/MGKm2a3cX137NaVs4B/rxtf+aHyesbYLlfahp0W4WOmhKSP4uZtpDQHKeuwVyLj5BApVHXu7R2BImSOxIGaobbtV1xbNttnZebzY5XLl227ZJnl6tVp2M3Wp7r7kVmi+IIYpPRMdG5tORuafMzQBwHAmgI3FyyRCmdMH6I2EISFbr0Xh0CRgWMmJJnZ+PYPOIsIeGSeH5lvpmtGYsXC6Nwy2Sf9nljLIHnNbmc0+R7wGROQAu35rVQxBZS9WKBlomMnOISFSkkStq5VtnA9SslS5B4HoFGasUsTCIozqfztDOW2H5dE2GRWu/bo/S0fVvX8b99C5RPSLSD0LVcghojfHG52PtCvi3YtQ8L3odX54Pog6X6KTnBWyT5Xx800fzIOKIq2kPOPI8NuajWcUFZIjU1nBE9u66ViqtzX9+PY4GKi2KyXCbpAMpa37gKr0THKVm2aw0BJ0qZNiM2A2plUayTroEM+FHyzJ6HmMgpHUokIVaMKaTLE+79IQh973cV1denPipyKVXrJKzlV7ZmpN4sGvGPzxocYO2nzAP1WTEefkzsi1gHeVSd6tqXhE70Sl8Bm294gZkKS5R4MX4Y/KsAXyXPG7MmZ1ikItRrIuH7PwWtSjUDYcwSKrstIzUcKmWKU27mEHw4fQqTinH2OiP//jwzSUoBDOpNJ0gaX1+ygT4CdHKgtruknwX30vdcp6EEt3oouI1Kp5M1JYeu/sn82XLQp2OO1/8A</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_543cae2e-cd54-4691-a800-db262d79b5f4</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>081002B4321A3759E05307991F0AA8FF</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081002D67CCF375BE05307991F0AD322</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081002D67CCF375BE05307991F0AD322</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>081002EF6FF13768E05307991F0A7C9C</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081002D67CCF375BE05307991F0AD322</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:081002B432223759E05307991F0AA8FF</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081002D67CCF375BE05307991F0AD322</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:081002B432223759E05307991F0AA8FF</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2210</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:081002EF6FF13768E05307991F0A7C9C</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0814551416235495955</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081002D67CD0375BE05307991F0AD322</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10010_RightsTokenUpdate_FUNC_RTL_With_Capital CanDownload" searchProperties="true" id="b2c41b1f-b10b-4570-bfaa-a4b393c59c3a">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="8a3797b6-115b-4d39-ae27-6d8d25e5279b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="9312afa7-b564-46a1-bba6-07e9e572c801">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="877f9d49-a858-402a-840d-882fca88f644"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="2c0f429b-b28b-413d-bf0d-839f7c4ae6f0"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="a7ad1125-c1ba-4156-ae4f-c36f50a41700"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="e447dd40-0508-4303-a856-b1abd764edb3"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="cc11eed9-83f9-41b9-b1db-483701d3ebac">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="7068f0d5-c61f-4722-bfe3-04686c903c6a">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","TRUE");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="2dba6b88-7758-4642-ae44-45662aba2cff">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="a08138a2-877d-44cd-b160-7e1febeadca6">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="76c58dbb-c4b2-4a26-9979-79fafc2eff5b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="2f31657e-c75d-4fac-94ea-ca36cf6772c7">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>TRUE</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10011_RightsTokenUpdate_FUNC_RTL_With_Mixed CanDownload" searchProperties="true" id="b33ee52b-0ff3-4744-a263-463c583c039a">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="7a9094d9-2250-42f3-acc4-6152fb481cfa"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="3d35af4c-e841-4b57-af69-32fc8e1ecb61">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="27d91a1a-14a3-44e2-83d2-42f80620c1fd"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="73e16ee4-d7d8-43e8-b5e6-e2e3726f9c7d"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="ac824c74-ae89-44db-924e-e2f660a60933"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="ce727e4b-545b-439a-a77b-400f6bbe1d87"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="4d45169a-8392-4a40-a027-03f8fdc1dbbf">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="134293ed-fe49-45a5-9c8f-db82141f6811">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","True");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="d4feffe5-c3f2-48d6-8d6c-fc9a96194c14">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="565184d2-3d26-4640-9627-7351216f64e6">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="4ab487aa-e310-42ca-8ec4-dbb727132d48">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="1e5dddd0-b168-4474-862d-668936f7b282">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>True</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10012_RightsTokenUpdate_FUNC_RTL_With_Capital CanStream" searchProperties="true" id="bb883ede-925c-4206-b62f-f380cfbdee61">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="ad66417d-8f7c-4c98-a220-3088311ee5c7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="69d9a35b-3e8e-4e57-b537-f97edc33591e">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="d5684eb5-4eb3-4a05-917b-be1e17490ce1"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="a11a8645-41fb-4acc-8ae8-6a5dfbfee434"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="bf5bb789-9fa9-4642-abbb-e932a98de190"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="813c348e-dd5b-4e9f-9ad2-5aa844669e56"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="ac24a793-25d2-460f-aa6d-cb06602ed6b1">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="4ed38010-85c9-4d9d-b42b-81e1f0ac2c65">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","TRUE");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="4ba7ce9a-cb12-4458-9ea1-8b768a5d8261">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="5526a48f-2711-4579-ac1a-06850e10747c">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="9ee2a8cb-66fe-4d53-bd92-eaab11e44990">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="0539bc17-baac-45ce-9925-7a57fb6d98c4">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>TRUE</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10013_RightsTokenUpdate_FUNC_RTL_With_Mixed CanStream" searchProperties="true" id="f186bf60-0c43-408a-8688-1f3c615353fc">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="6ec57c3a-c8a5-49cf-b99f-1a83a6ee00ce"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="9238b2d7-dbdf-4fb4-8022-5e19cd8865d8">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="ab9c3e7e-aee4-4554-abb8-59e9ac279a8d"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="6ce194ed-00f1-46b1-a657-6b35ddac7961"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="65a7017f-3d01-46cb-8bac-99587291b8b6"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="7f8449f1-b901-43a9-97e5-23904265650b"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="9870e8b7-79bf-46ce-8747-a3868fbf637d">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="3e2d5a3a-821d-424c-a55b-20362e69dbf5">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","True");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="7129e4d4-0169-4baf-ab26-7c0f57dd9d2a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="4162f458-cecb-4613-9788-cd066072a1b8">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="ba37c423-5d6f-4bf5-8490-39bc18641e5f">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="3b0dfe40-25ff-4d7a-b7a3-6fb0de74d57d">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>TRUE</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10014_RightsTokenUpdate_FUNC_RTL_With_Small Node_Id" searchProperties="true" id="ff5c33ab-8f1e-40f7-9f74-8e4674d75bf1">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="4ee40d5a-ae88-4cf9-9846-37cc4c44497b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="92223bc1-0687-4aeb-8587-06686c505217">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="52b680ee-4cf3-4410-a330-4133f7dd7200"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="d8c3915a-3f73-42a8-bf1d-50705ca2f424"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="daea79ec-8cc9-4cad-a542-5ccee721c9ed"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="30ed9654-ca39-404c-8905-45e1ea4d22ec"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="ac12e79f-0919-41c1-9c35-bfe486f632f1">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="5095123d-8c68-4c36-a55b-4fc4e2fc46fd">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="3e2e1674-b4b6-4d6c-9ea8-d8bce89f266c">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="db9173ae-5ec3-4e23-b1bd-357ee40342ff">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="b5f6674e-b0f5-40e9-97e3-045ff2ceeefe">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="b751fe23-f3d5-4884-8cf6-825a621d2ca4">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08103C88F7BA4ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc6o6FP4rDvtxD3IRBJnqjNW6j9O72G7blzNpiJgWEkyCYn/9SVDZYi/Hc56YLFa+9a1LvuSMgzSxgz7niAlMSaNIE8KD0trVckYCCjjmAQEp4oGAQdi/vgrsphmA/RatMR52tb8933JakfeiuxA4umP7lt5peW2944F2qw1c37Na0pXzHI0JF4CIrmablqNblm55U8sNTDNo2U3PsZ+1xiNiXGJLl6ap7UgVvKsthMgCw1iv1811q0lZbNimaRmz66sQLlAKtN7ZNqMyEOvt/GEzQhAlCWxCmhpnRs3nLOJBiGMCRM7QLlb0VSzTMDuG9Ik4jn9o1V4UjcmclssBIJRgCBL8DlR9rpFY0KjRT2LKsFikXyZhmQpYRwXUoeWQH5pRp3YiUI0h40DnC2DtsCZojhgiEDUeJuOu9uO0rpVbpwwQPqcs5fXlf+ODyAolNEORzvdp7aidDvhJpXpnCAZjApOc4xW6UcOaAYj4rpsIng7VuGNojosrzOWAFlyxMw7pHS231RjiGHHxfxp00JwtyCNIctR7C/1zK6cPb/TaLTb2BQsHtne3WU3eebckcOhcGqrWbpdHQ1kN0XbHZeeSJs/T1Pl5aUAOjEywNl532kv4++nx1jbZryFMCvPd+2kP/3rAYfYWoc5deP9rNP/1HN+6/eeHl9nTLHGsvIAbP5zHc9eYzew38+phQ28Hc3a3htePryFcpwN/unxxC4skRcaFH/rJ+h7Yl4P4ZtG++JnczBbZyvx9P32iafbE/DDyB08GcTYTOmt1rsbdKp0D/nXb/syH+csrgmK/VGMwHjZGsktAfC9myoIjfV66BpkSHy4QEVpP7VLaEeRS7nAUyB5u16Zvma2h7fmjc8dut90L022Zbqdjjcx+a3g+2IvMlsURxQElc6xiKcndjs33BGEacEQixPQVzaXSce0bxCEQoDEmE3kIKOFoSqU8g9c0j9cuc14ptLDf9gtqxsv3Zaw1bqi4JbesPxeI1TXZr2nyBEGcYaSEW801l4PNhazFEqxykVjNFWgSlEtpZ0plA9vxXYPjNEuQYmqkNMoT1MwWWVkZg2+/tg4gL62Ti2l52r7M6/jfvgTSJ8LKgatczpFsI/rkcrH3iXyZsG0dJryH7+cRVgdL1lMwDLdM6r/+jImaj2pGZEZ7ypXnsaGGahwnVAWKVhhWg15d11LF5bnv7duxBM1lM1+t8rIBntI3JuGl6FiuYdpGiGAulWkzpW+IGBWKcdI1UBE/Cl7Z6xRzsSChAAKlcmIa5fKEez9EXN37YznqxamPilpIWTqBCvGZbZDIN4ti/O2zBgZQ+UnznfysKYv+dOwTrIM4Mk957QtMYrVSV8Dmi7mAVMJiKV6UHYJ/BvBZ8LqxKnLFRciBeskF+vpPQ6lSVwMQ0pyI8VArDYdKWfIUmwwFf5w+wJRiXL3O8L8/z3RcjgBE8k3HcYmvLtlAHQESH6jtLugHwR34/sg77zj94agUXG8ruB175FVFqbHrfTB/tBzU6XjGe/8A</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_78143d7b-5ca4-4281-9376-97a636a58713</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08103C88F7B94ADFE05307991F0A92F7</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08103D278FB42665E05305991F0A3DBC</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08103D278FB42665E05305991F0A3DBC</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08103EFC25DF5446E05307991F0A3EEF</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08103D278FB42665E05305991F0A3DBC</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08103C88F7C14ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  True</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08103D278FB42665E05305991F0A3DBC</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08103C88F7C14ADFE05307991F0A92F7</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1701</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'True' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7/RightsToken/urn:dece:rightstokenid:org:dece:08103EFC25DF5446E05307991F0A3EEF</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08103EFC25DF5446E05307991F0A3EEF</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_083181416236468162</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08103D278FB52665E05305991F0A3DBC</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10015_RightsTokenUpdate_FUNC_RTL_With_Mixed_Node_Id" searchProperties="true" id="57e54c19-4407-4230-901a-70804a17ea9e">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="a3d5b3ac-d527-40ea-b27f-c0e70330c986"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="bfa9b4ce-2faf-4c19-bea8-66ffcfe0f530">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="c2b4efde-8d63-4b61-8919-f46bcee27798"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="4f66e409-4e1a-484c-8809-b348587626f6"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="5bc0c4e5-a87a-4d65-bb9b-0ba987aadb54"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="5dbb1a65-2a28-4d8f-a521-ece382448af8"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="2ee95fe3-d2fd-46bf-9816-575f209aaeb1">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="9e250334-38e0-4474-8198-430814d3ccf9">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser","urn:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="327a9be1-fa78-4780-b9d9-7946ba548fed">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="7224ed92-44d9-487e-8ea0-cbe8df69bf5b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="feebbfca-fb08-4676-b380-eec3d7e6d485">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="ee53abfc-7a9c-46a8-9805-15c8c32644b4">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106119170228C9E05307991F0AB846</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZtc6o6EP4rDudjh5cgiDDVGd9666l9uWJb2y93YoiaFgKSoNZffxJUKrb2eu8nJstm99ndJ09yyWAUml6LMZxyEtPKOgop83JrQ8lS6sWQEeZRGGHmceT5rduBZ2qGB/dblEq/21D+AbhmI6tmq+YE1FRrYpuqa9Ud1TbcaWAhx4TIFq6MZbhPGYeUNxTTAJYKgAqcEbA9YHhVW7Od6qtSecIpE7GFi2YoO1Br1lDmnCeerq9WK21V1eJ0ppuGAfTx7cBHcxxBpXm5rShPlDZ3/kgLMMJhiDQUR/qlXvK5DJjnkxmFPEvxLldwKpehG64ufAJGZr+UYi8O+nQa58sOpDElCIZkA2V/bjGfx0GlFc7ilPB5dLIIYMjAKl4jFQGL/lL0MrQzA5UQpgyqbA7BLtYQT3GKKcKVx2G/ofw6b2r51lEKKZvGacTKy/+GB9MlDuMEByrbl7WDdn7AbzrVvMTI61MUZows8Z0kawIRZrtpYnR+qMpDiqdkPSBMEHTNJDr9EN7RctuNLplhxv/PgA6Gsw3yBMMMN613e5NZN8Y64Xds/bKeg1YXXbcXfwezRg7g0Dk3FKPdLo9IWZBou8Nng+pLZNk+ub99n6SjZytB0wmY29cPqP5B2MgASbJub2Jn2v5rsXh8c2lnDGpz40l/Du7Hi876+ffNGyCc2+58oA98aiyuL6IXaxw5g96w2o+vei9CHvz6ze8L94nOb5zNc225HD+R26x3V3ciOgEXfqfW0x2r2jKqr+PNYzR+q06CMZ7d+SCE/kscZN1Xo1GUc4C/bNufeT+bvGHE90tJg363ciWmBPnPYiYtJFCnuauXSPFhHFOuNOUuqR1eJuSOBJ6Y4XZt1IFRA1W37fbapnXV7hl21XBcF1wZLbfWtvcis0VxBLET0ymRuaTkbmnzM0AUeQzTAKfqMs6E0jHlh4hdyGGlT4fiEMSU4VEs5DlzAjec1TYfq5CAabByQpguphbCSuUu5vf0Pm1NOU7LmlwvafIQI5IQLIVb8poJYjMuerGAy4yHQFtCjeJMSHsqVdYzrbqtMxIlIZZI9UjMM8RaMk/yzuhs+zVViFhuHfZG+Wk7Wdfxv30LhE9ApAOTtbSxGCP+5nIx94WcLNgEhwXvw7eygMiDJfrJU4K2SMq/Pmki+VFwRFS0h1x4HhtKUfXjgopEwZKggujFdS1UXJz75n4cC6gttGy5zPIBOFLfUhFeiA6wdcPUfYwyoUwfo/gdU72Iop91DRTAj5IX9jLEjM+pzyHHkWBMJV+ece/7mMl7vy+ovj73UVFKKVrH8Zp/Z+uE4s0iEf/4rEEekn7C/CA+qzgNPif2TayDPKJOce1zQmdyJa+AjxO8QLEIS4R4xelh8O8CfJe8bCyaXGDhglCTjOPTfypSlRoKRCjOKO93ldxwqJQ5Tv6RYO/T6UuYXIyL1xn59+eZSnIKSNUR/nl8ecl68gjQ2YHa7pJ+FVzgAscAZr3jHgpuu27ViqaU0DW/mL9aDvp0zPHmHw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_1e65c465-2b16-4b52-9487-509fd4c72ac5</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106119170128C9E05307991F0AB846</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>0810614B2F6C0568E05305991F0A60ED</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2336</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseAccountNotValid">
      <dece:Reason Language="en">The purchase account ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseAccountNotValid</dece:ErrorLink>
   </dece:Error>
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseUserNotValid">
      <dece:Reason Language="en">The purchasing member's user ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseUserNotValid</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0841191416237079661</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08106139B9EC24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10016_RightsTokenUpdate_FUNC_RTL_With_Capital AccountId" searchProperties="true" id="b9f51fee-1150-42de-8f90-a83d859883d0">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="c083166e-c271-4825-8f89-87e256ab2a69"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="4e934bbe-6176-4e73-b0ae-95d7dbc548a1">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="c8d63698-71ce-4669-bece-f5c1331b3056"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="06351ebd-d8e7-495d-a7ed-f0991cb0a58b"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="e015a55d-9249-40de-abd3-4fa111174610"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="3d74b8d2-771f-47ea-a1cf-d3ef7899bd26"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="62b4633e-a0b5-4644-9c58-b214e5fc2396">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="e22c26fa-3e21-4002-9a3c-e14293d99144">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","URN:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","urn:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="f3fbc6aa-05bd-421e-819d-f915a0ffd9e7">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="84335284-0bfe-4cfd-a7a1-f9ebb3eba780">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="b38f3efb-5c3f-470d-b2ea-502d4277d6a9">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="aa33b1c8-694e-4667-a549-a35fe9b93c91">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106C6500BD21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbZcuo4EP0VynlMeZHBLK5AFWHJECDkBpJJ5WVKkdqgXCODJbPk669kwMFkGWaeXGq3uk93Hx3pSuB56PpNISCWLOKFzTzkwk+tdSOJuR9hwYTP8RyEL4k/bg4Hvms5Pj5sMQq9dt34p1atIq8Er2bVLRfNEg0cs0bcwHQDVCxTWi0HVVCuQiTQ40JiLuuG66CSiZCJKhPk+ajsFx2rWC6/GIUniIWKrVwsx9iD2oi6MZNy4dv2er221kUriqe26zjIfh4OxmQGc2w0rnYVpYnixt6fWBQIhCGxSDS3r+yczxUV/phNOZZJDPtc9Ltcju3UbOVDBZteGNleoD0eROmyhXnEGcEhe8e6P0OQs4gWmuE0ipmczb8tAjk6sAkbYhJU4heGnYd2ZqAcwlhgU8ww2sd6gABi4AQKjw+9unFx3tTSrZMYcxFE8Vzkl/8ND/AVhNECqCkOZe2hnR/wi041roD4PU7CRLAV3GmyLjABsZ8mkPNDFe5jCNhmwIQi6EZodPYxvJPlrhttNgUh/8+AjoazC/KEwwQai9n6dhSGstUq0rtOdwub575XexqMXkk9BXDsnBqy0e6WJ6TMSLTb0Ww5mxWxH7ttVLsZVYLiUnq015FeKXm+H5RHl/fDrXfbCbeiImd3YUX2u/1Z5WU8smOgdxUbowhux53YFaX5xHunL4hPg9fgr6fNdoUqLwmbJhw3rx3591SSwbS8FHYtls37yfVw6YW/fl1S1OyP1fG7HpDVcBKQ0c3msvXSt9/fgvf1y8OW3jxJul30+WM9K+cIf952OPPj5PUNiDwsNQ167UJXTQnLn8VMWxg1g9TVX2jxERK4NBp6l9YOP1Fyx6ivZrhbO1XkVFCrVuy4bQ91Kh3HKzqVWg11nWa1i9yDyOxQnEBsRTxgOpeW3B1tfgZI5r4ATiE2V1GilE4YP0RsY4kLPf6gDkHEBUwiJc/oLQJ3CaJSdbevaFmWb7/dYhIn661RuIvkiI/iZiAhzotyNSfKD0DYgoFWbk1soZgtpGrGEq8SGSJrhS0OidL2WMus75aqni3YfBGChmrPI5qEYC1mi7Q1tth9XRMTkVofOpP0uH1b2Om/Qw+UD2XaQeharkHNEb64XdxDId8W7KLjgg/hmwll+mSphsqYkR2S/K8PnmiCZCRRFR0gZ56nhlxU+7SgLBFdMZIxPbuvlYyrg984jGOJraWVrFZJOoCKFrhYhVeqgzzbce0xkERJ03YS/QZuZ1Hss+6BDPhJ8syeh5jIGR9LLGGuGFNIl2dc/GMQ+uLvKa5vzn1V5FKq1knYyK9srVA9WjTiH981xCfaT5nv1WcdxfRjYl/EOsqj6lT3vmR8qlf6Dth+wwsSqbBMqVcUHwf/KsBXyfPGrMkZFqkI9ZpI+P5PQctS3cCERAmXvbaRGo6lMsUptwvwP5w+hUnVOHuesX9/n5kspQBRT0Hln8bXt6yvjwCfHsntPump4pZbZc9xrlsuapdTxfV2itvsutWsKTl0jU/mz5ajPp1yvPEH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_988154eb-8263-4df0-9c2f-2f136dd86f8e</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08106C65014921D6E05305991F0AAF28</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>URN:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1797</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08106C65014921D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0847161416237436056</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081071C93E2E51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10017_RightsTokenUpdate_FUNC_RTL_With_Capital UserId" searchProperties="true" id="7f266b3c-5c3a-4a4f-9921-5cc2093af67a">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="fe1b9992-056c-44e7-9b33-01937572cc89"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="57f65d2e-c503-4bf8-bdf8-c2ee453d3765">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="d8658572-2929-49c8-8740-aa790c96d90c"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="a4d31bf1-3837-43e0-9ece-38f5f7c83b09"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="a3de9530-161c-4b5e-83c1-984abc6c8421"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="1165f70f-9591-4505-852f-e40bc2c17584"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="0beb3911-3b86-4d3c-a2e7-4a92d5c65b88">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="a6b46926-d5f9-4625-aec8-8354161fb1e1">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","URN:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="6da4d616-45e7-47eb-8a6d-fea8533fd989">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="bf481f4b-9ac5-4cf8-8363-3eb455a961d0">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="1f635927-4442-4d3d-8e82-0fb4c28f74a6">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="afd5131e-dfd6-4a0a-ba30-be99c0219870">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106119170228C9E05307991F0AB846</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZtc6o6EP4rDudjh5cgiDDVGd9666l9uWJb2y93YoiaFgKSoNZffxJUKrb2eu8nJstm99ndJ09yyWAUml6LMZxyEtPKOgop83JrQ8lS6sWQEeZRGGHmceT5rduBZ2qGB/dblEq/21D+AbhmI6tmq+YE1FRrYpuqa9Ud1TbcaWAhx4TIFq6MZbhPGYeUNxTTAJYKgAqcEbA9YHhVW7Od6qtSecIpE7GFi2YoO1Br1lDmnCeerq9WK21V1eJ0ppuGAfTx7cBHcxxBpXm5rShPlDZ3/kgLMMJhiDQUR/qlXvK5DJjnkxmFPEvxLldwKpehG64ufAJGZr+UYi8O+nQa58sOpDElCIZkA2V/bjGfx0GlFc7ilPB5dLIIYMjAKl4jFQGL/lL0MrQzA5UQpgyqbA7BLtYQT3GKKcKVx2G/ofw6b2r51lEKKZvGacTKy/+GB9MlDuMEByrbl7WDdn7AbzrVvMTI61MUZows8Z0kawIRZrtpYnR+qMpDiqdkPSBMEHTNJDr9EN7RctuNLplhxv/PgA6Gsw3yBMMMN613e5NZN8Y64Xds/bKeg1YXXbcXfwezRg7g0Dk3FKPdLo9IWZBou8Nng+pLZNk+ub99n6SjZytB0wmY29cPqP5B2MgASbJub2Jn2v5rsXh8c2lnDGpz40l/Du7Hi876+ffNGyCc2+58oA98aiyuL6IXaxw5g96w2o+vei9CHvz6ze8L94nOb5zNc225HD+R26x3V3ciOgEXfqfW0x2r2jKqr+PNYzR+q06CMZ7d+SCE/kscZN1Xo1GUc4C/bNufeT+bvGHE90tJg363ciWmBPnPYiYtJFCnuauXSPFhHFOuNOUuqR1eJuSOBJ6Y4XZt1IFRA1W37fbapnXV7hl21XBcF1wZLbfWtvcis0VxBLET0ymRuaTkbmnzM0AUeQzTAKfqMs6E0jHlh4hdyGGlT4fiEMSU4VEs5DlzAjec1TYfq5CAabByQpguphbCSuUu5vf0Pm1NOU7LmlwvafIQI5IQLIVb8poJYjMuerGAy4yHQFtCjeJMSHsqVdYzrbqtMxIlIZZI9UjMM8RaMk/yzuhs+zVViFhuHfZG+Wk7Wdfxv30LhE9ApAOTtbSxGCP+5nIx94WcLNgEhwXvw7eygMiDJfrJU4K2SMq/Pmki+VFwRFS0h1x4HhtKUfXjgopEwZKggujFdS1UXJz75n4cC6gttGy5zPIBOFLfUhFeiA6wdcPUfYwyoUwfo/gdU72Iop91DRTAj5IX9jLEjM+pzyHHkWBMJV+ece/7mMl7vy+ovj73UVFKKVrH8Zp/Z+uE4s0iEf/4rEEekn7C/CA+qzgNPif2TayDPKJOce1zQmdyJa+AjxO8QLEIS4R4xelh8O8CfJe8bCyaXGDhglCTjOPTfypSlRoKRCjOKO93ldxwqJQ5Tv6RYO/T6UuYXIyL1xn59+eZSnIKSNUR/nl8ecl68gjQ2YHa7pJ+FVzgAscAZr3jHgpuu27ViqaU0DW/mL9aDvp0zPHmHw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_1e65c465-2b16-4b52-9487-509fd4c72ac5</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106119170128C9E05307991F0AB846</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>0810614B2F6C0568E05305991F0A60ED</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2336</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseAccountNotValid">
      <dece:Reason Language="en">The purchase account ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseAccountNotValid</dece:ErrorLink>
   </dece:Error>
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseUserNotValid">
      <dece:Reason Language="en">The purchasing member's user ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseUserNotValid</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0841191416237079661</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08106139B9EC24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10018_RightsTokenUpdate_FUNC_RTL_With_Mixed AccountId" searchProperties="true" id="80a27138-8a77-4034-a492-b14692f9f5cd">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="a3a4ace1-8672-4efc-ab8f-2f28ab177a46"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="4e04904c-3954-4d77-a0fd-3384c8babee4">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="db75e4db-61ee-4e58-a64c-46ecdcb5445d"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="c74ef5ce-03df-4450-91f9-ab54cc2ccf08"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="c899ce20-ac6d-43c8-a726-d687bb2f265c"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="bcf25daa-17bb-4e02-bd5e-d95f0dd04a38"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="e88780fa-d101-4090-8874-73d2442c11bc">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="f957296d-f965-47b4-9c6b-8a9c96665eee">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:Dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","urn:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="9b822857-fee9-445f-91c3-8df8615154d2">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="59ce708b-6171-4d19-a401-9871a331d3e4">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="2235b2e8-037a-45ef-a540-6a7562c7df55">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="0ff8f7dd-5054-4470-8f5e-db17e9f014d5">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106C6500BD21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbZcuo4EP0VynlMeZHBLK5AFWHJECDkBpJJ5WVKkdqgXCODJbPk669kwMFkGWaeXGq3uk93Hx3pSuB56PpNISCWLOKFzTzkwk+tdSOJuR9hwYTP8RyEL4k/bg4Hvms5Pj5sMQq9dt34p1atIq8Er2bVLRfNEg0cs0bcwHQDVCxTWi0HVVCuQiTQ40JiLuuG66CSiZCJKhPk+ajsFx2rWC6/GIUniIWKrVwsx9iD2oi6MZNy4dv2er221kUriqe26zjIfh4OxmQGc2w0rnYVpYnixt6fWBQIhCGxSDS3r+yczxUV/phNOZZJDPtc9Ltcju3UbOVDBZteGNleoD0eROmyhXnEGcEhe8e6P0OQs4gWmuE0ipmczb8tAjk6sAkbYhJU4heGnYd2ZqAcwlhgU8ww2sd6gABi4AQKjw+9unFx3tTSrZMYcxFE8Vzkl/8ND/AVhNECqCkOZe2hnR/wi041roD4PU7CRLAV3GmyLjABsZ8mkPNDFe5jCNhmwIQi6EZodPYxvJPlrhttNgUh/8+AjoazC/KEwwQai9n6dhSGstUq0rtOdwub575XexqMXkk9BXDsnBqy0e6WJ6TMSLTb0Ww5mxWxH7ttVLsZVYLiUnq015FeKXm+H5RHl/fDrXfbCbeiImd3YUX2u/1Z5WU8smOgdxUbowhux53YFaX5xHunL4hPg9fgr6fNdoUqLwmbJhw3rx3591SSwbS8FHYtls37yfVw6YW/fl1S1OyP1fG7HpDVcBKQ0c3msvXSt9/fgvf1y8OW3jxJul30+WM9K+cIf952OPPj5PUNiDwsNQ167UJXTQnLn8VMWxg1g9TVX2jxERK4NBp6l9YOP1Fyx6ivZrhbO1XkVFCrVuy4bQ91Kh3HKzqVWg11nWa1i9yDyOxQnEBsRTxgOpeW3B1tfgZI5r4ATiE2V1GilE4YP0RsY4kLPf6gDkHEBUwiJc/oLQJ3CaJSdbevaFmWb7/dYhIn661RuIvkiI/iZiAhzotyNSfKD0DYgoFWbk1soZgtpGrGEq8SGSJrhS0OidL2WMus75aqni3YfBGChmrPI5qEYC1mi7Q1tth9XRMTkVofOpP0uH1b2Om/Qw+UD2XaQeharkHNEb64XdxDId8W7KLjgg/hmwll+mSphsqYkR2S/K8PnmiCZCRRFR0gZ56nhlxU+7SgLBFdMZIxPbuvlYyrg984jGOJraWVrFZJOoCKFrhYhVeqgzzbce0xkERJ03YS/QZuZ1Hss+6BDPhJ8syeh5jIGR9LLGGuGFNIl2dc/GMQ+uLvKa5vzn1V5FKq1knYyK9srVA9WjTiH981xCfaT5nv1WcdxfRjYl/EOsqj6lT3vmR8qlf6Dth+wwsSqbBMqVcUHwf/KsBXyfPGrMkZFqkI9ZpI+P5PQctS3cCERAmXvbaRGo6lMsUptwvwP5w+hUnVOHuesX9/n5kspQBRT0Hln8bXt6yvjwCfHsntPump4pZbZc9xrlsuapdTxfV2itvsutWsKTl0jU/mz5ajPp1yvPEH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_988154eb-8263-4df0-9c2f-2f136dd86f8e</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08106C65014921D6E05305991F0AAF28</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>URN:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1797</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08106C65014921D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0847161416237436056</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081071C93E2E51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10019_RightsTokenUpdate_FUNC_RTL_With_Mixed UserId" searchProperties="true" id="f852f137-7823-47d2-90c7-fd7165ce7c29">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="3a5ecb39-d5be-4043-a8db-3b784b50abd1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="436e09b6-a3ff-4f12-a748-ec232fa8627b">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="87b1c6e5-225d-46f9-b3ef-53a624fbe7da"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="2663527c-8b2a-4a5b-83a7-25bddb779003"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="e464a92e-21c8-45be-a56b-b8b900fcaeb0"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="a7e49c38-3803-4952-a2bc-8844e131e0b3"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="e259037a-0061-4586-90d7-f2e1367130b8">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="288aceaa-0fb9-4c13-b35e-9c0dade302dc">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","urn:Dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="ea18ca90-baa7-488e-92b8-505b821075b7">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="2c8e91de-f6e5-4823-b98e-7f9c8ecef105">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Update Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="179ced9a-165e-45da-b40f-48e4a3057015">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="b7f43271-23fa-4000-a3f8-cb40430ef2cb">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATE  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106119170228C9E05307991F0AB846</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZtc6o6EP4rDudjh5cgiDDVGd9666l9uWJb2y93YoiaFgKSoNZffxJUKrb2eu8nJstm99ndJ09yyWAUml6LMZxyEtPKOgop83JrQ8lS6sWQEeZRGGHmceT5rduBZ2qGB/dblEq/21D+AbhmI6tmq+YE1FRrYpuqa9Ud1TbcaWAhx4TIFq6MZbhPGYeUNxTTAJYKgAqcEbA9YHhVW7Od6qtSecIpE7GFi2YoO1Br1lDmnCeerq9WK21V1eJ0ppuGAfTx7cBHcxxBpXm5rShPlDZ3/kgLMMJhiDQUR/qlXvK5DJjnkxmFPEvxLldwKpehG64ufAJGZr+UYi8O+nQa58sOpDElCIZkA2V/bjGfx0GlFc7ilPB5dLIIYMjAKl4jFQGL/lL0MrQzA5UQpgyqbA7BLtYQT3GKKcKVx2G/ofw6b2r51lEKKZvGacTKy/+GB9MlDuMEByrbl7WDdn7AbzrVvMTI61MUZows8Z0kawIRZrtpYnR+qMpDiqdkPSBMEHTNJDr9EN7RctuNLplhxv/PgA6Gsw3yBMMMN613e5NZN8Y64Xds/bKeg1YXXbcXfwezRg7g0Dk3FKPdLo9IWZBou8Nng+pLZNk+ub99n6SjZytB0wmY29cPqP5B2MgASbJub2Jn2v5rsXh8c2lnDGpz40l/Du7Hi876+ffNGyCc2+58oA98aiyuL6IXaxw5g96w2o+vei9CHvz6ze8L94nOb5zNc225HD+R26x3V3ciOgEXfqfW0x2r2jKqr+PNYzR+q06CMZ7d+SCE/kscZN1Xo1GUc4C/bNufeT+bvGHE90tJg363ciWmBPnPYiYtJFCnuauXSPFhHFOuNOUuqR1eJuSOBJ6Y4XZt1IFRA1W37fbapnXV7hl21XBcF1wZLbfWtvcis0VxBLET0ymRuaTkbmnzM0AUeQzTAKfqMs6E0jHlh4hdyGGlT4fiEMSU4VEs5DlzAjec1TYfq5CAabByQpguphbCSuUu5vf0Pm1NOU7LmlwvafIQI5IQLIVb8poJYjMuerGAy4yHQFtCjeJMSHsqVdYzrbqtMxIlIZZI9UjMM8RaMk/yzuhs+zVViFhuHfZG+Wk7Wdfxv30LhE9ApAOTtbSxGCP+5nIx94WcLNgEhwXvw7eygMiDJfrJU4K2SMq/Pmki+VFwRFS0h1x4HhtKUfXjgopEwZKggujFdS1UXJz75n4cC6gttGy5zPIBOFLfUhFeiA6wdcPUfYwyoUwfo/gdU72Iop91DRTAj5IX9jLEjM+pzyHHkWBMJV+ece/7mMl7vy+ovj73UVFKKVrH8Zp/Z+uE4s0iEf/4rEEekn7C/CA+qzgNPif2TayDPKJOce1zQmdyJa+AjxO8QLEIS4R4xelh8O8CfJe8bCyaXGDhglCTjOPTfypSlRoKRCjOKO93ldxwqJQ5Tv6RYO/T6UuYXIyL1xn59+eZSnIKSNUR/nl8ecl68gjQ2YHa7pJ+FVzgAscAZr3jHgpuu27ViqaU0DW/mL9aDvp0zPHmHw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_1e65c465-2b16-4b52-9487-509fd4c72ac5</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106119170128C9E05307991F0AB846</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>0810614B2F6C0568E05305991F0A60ED</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2336</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseAccountNotValid">
      <dece:Reason Language="en">The purchase account ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseAccountNotValid</dece:ErrorLink>
   </dece:Error>
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseUserNotValid">
      <dece:Reason Language="en">The purchasing member's user ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseUserNotValid</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0841191416237079661</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08106139B9EC24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/>
    <con:reportParameters/>
  </con:testSuite>
  
  
  
  
  
  
  
  
  
  
  <con:testSuite name="R1_RightsTokenUpdateWithoutAccountId_RTL_TestCases" id="b6278971-f9f9-4ebe-bc38-e2e82a750757">
    <con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder">/opt/dece/soapUIReports/R3/ReportAt-2013-10-16:10-04-30</con:setting></con:settings>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId" searchProperties="true" id="554d4511-d92e-4165-a10d-3bfebf74c735">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="3f11f299-7e5e-4023-99fa-5075958981df"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="99e12365-ee5b-43d7-b199-da5104c2717b">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="2238e963-b831-408b-abe1-3d43d3e06657"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="a5ea397c-6d0b-4d5f-b29c-a1126c5fc1b3"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="f8dbaa08-837f-4240-9f4d-10b2cea2b6f7"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" id="7e8139fb-4464-4ae1-a077-5ebf54f8175f"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="c2c2ba9c-4006-4b65-b86d-b98676d832eb">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="798b6668-5ef9-4fdf-9f34-ef3c23087cb8">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="aeb58ac1-9c55-40d4-b446-9051d39d9952">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="a28a3889-0724-427a-a179-f3204db5e3f1">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="8f3ca65a-9583-47ef-9deb-2a63ebbb97e4">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="9b1777cd-9346-4c25-bbb4-d61364cab280">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>081E3284E5D40F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbU+o6FP4rTPejU5reoO0IMwh4rKK4LbodX87ENJRom0CTAvrrT1KgUrwcznnqZHXlW9+65EtOOcxSK+hxjnNBGG2ss5TyoLR2tCKnAYOc8IDCDPNAoCDqXY8CqwkCuNuiNcJBR/vbNS3TND1HN13/WXdM39c9z3d1q4UwbtmW7zm+dOW8wCHlAlLR0SxgSn9TN70JaAe2Hzh20/LAk9Z4wDmX2NKlCbQtqTXvaDMh5oFhrFar5spusjwxLABM4/F6FKEZzqDWPd1kVAbKu1t/1IwxwmmKmohlxqlR8zmNeRCRhEJR5HgbK/4uFjCAb0ifmJPkl1btxXFIp6xc9iFllCCYkneo6nONxYzFjV6asJyIWfZtEiZQwDpeIx2ZDv2lGXVqRwLVGOYc6nwGzS3WHZ7iHFOEG/d3YUf7dVzXyq2THFI+ZXnG68v/xgfTJU7ZHMc636W1pXY84BeV6p5iFIQUpQUnS3yjhnUOEebbbmJ0PFTjNsdTsh4RLgd0zRU7Y5/ewXJTjQFJMBf/p0F7zdmAPMC0wN0kfnjMny7R+CoUlhiGV61bwvL7l/7K6ZQE9p1LQ9XazfJgKKsh2uy4ERfnEzNajz3nwaR30+f82bfXZzd/TRee+5pkTo/322Dmw5b5NgGJGb7n92B+Hl9e3DwtPPhCz64gDaNR7yQaFNAZ5KvBqn8fXf454W/L14tX8vh7OIwurp5eQMQvCvJ2Yi5/j8e+fXLFxjH2Jlni3F5n0Box4I3X0W0Lj57a7fEf9nKToGtz1J6et57f+/zE61Tp7PGv23ZnPiqeXzASu6Uag3DQOJddguJnMVMWEuvT0jWYK/HhAlOhddUupR1BIeWOxIHs4WYNPHNoWz23Zbk917WdIXBt4Pq+eQ56JvD9nchsWBxQ7DM6JSqWktzN2PxMEGUBxzTGub5khVQ6rv2AOIACNkJ6Jw8BoxxPmJLn1YrFALVfV4VrOQC2IceLl2SlNW6YGNNx3psKnNck2QQ1Sb7DiMwJVrqtxprLueZClmIBl4VIzeYSNikupLLnSmQDy/Fcg5NsnmJF1MhYXKS4OZ/Ny8IYfPO1dIh4ab0bTsrD9m1ah/92FZA+MVEOXOVyhmUX8Rd3i71L5PuE7f2Ed/C9IibqXMlyipygDZP6r48pUeNRjYjMaEe58jw01FCNw4SqQPGSoGrOq9tairg89t1dOxawuWgWy2VRNqCt5C2X8FJzTNcAlhFhVEhhepuwV0yNCsU46haoiB8Er+x1ioWY0UhAgTM5MY1yecS1H2Gurv1QTvr62DdFLaQsncBr8ZWtn8oni2L846sGBUj5SfOt/KxYHn907AusvTgyT3nrC0ITtVI3wNs3c4GYhCVSu1i+D/4VwFfB68aqyBUXIQfquRD4+z8NJUodDSLECirCgVYa9oWy5Cne5jj4cPoEU2px9Tgj//4600k5AgjLJx0nJb66YwN1BGiyJ7bboJ/11nOG7sAG57ZX6m17o7dnoNeuilJj1/1k/mzZq9PhjHf/AQ==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_51211184-159b-4199-8895-26cee6329849</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>081E3284E5D30F38E05307991F0AB0A7</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081E32A5625A5534E05305991F0A1099</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081E32A5625A5534E05305991F0A1099</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>081E358F3A23188CE05307991F0A857D</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081E32A5625A5534E05305991F0A1099</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:081E3284E5DB0F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081E32A5625A5534E05305991F0A1099</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:081E3284E5DB0F38E05307991F0AB0A7</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1752</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:081E358F3A23188CE05307991F0A857D</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141118_0110251416296425743</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081E32A5625B5534E05305991F0A1099</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Capital Media Profile HD" searchProperties="true" id="a71589ac-5ed1-4b0d-858b-05d442627213">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="ea9245a0-7cdf-40f7-adef-c637f350a7d7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="6d3a496a-e3ba-40e8-9ae0-44d55e07dbe4">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="8c4a3a93-f4b1-467b-a36f-5ac054fa2f7d"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="0545758c-08b1-4a26-91bb-bae11410a0ff"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="b3ce9017-96d6-49ba-83f4-97931525a515"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="f79b3df5-7532-42b6-9f1d-718d8de077c0"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="4941396d-73eb-4a8b-955b-821f5eddc5da">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="a7ed2027-491d-412e-b7b4-b7969749ad17">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:HD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="b5211e64-4830-4b75-b3b1-5001d9e2c685">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="199e0755-c521-4f9e-9f13-215e0442f6b6">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="8822032c-b406-49e1-a8e7-acf838f87e82">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="b4cfea46-22b1-4e6d-af1b-54c91cbfe3ae">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080CB251184E452FE05305991F0A8307</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:HD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1970</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080CB251184E452FE05305991F0A8307</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10002_RightsTokenUpdate_FUNC_RTL_With_Capital RightsLockerId" searchProperties="true" id="9c3f4a22-dd99-48f8-b116-e996d94e8308">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="ba069d4e-7842-495b-a574-f5da8c1ed5aa"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="ee1b5d7b-0f19-4139-aacf-48788fdd826d">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="dd7294a4-4ba1-41d0-8d63-4f41071b5950"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="b91379c1-ac29-4a1c-89f2-908f8722541a"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="25de0fd9-42f2-405a-a494-98c879159103"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="d335de2a-6134-4169-9ec1-df911137c3f5"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="daad36f8-7a7b-4926-a30b-2f7b564e7876">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="ac34b27e-1c59-4216-8804-04bad63de3d5">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","URN:DECE:RIGHTSLOCKERID:ORG:DECE:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:HD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="b3e6482a-13fa-4d3c-91eb-3fd4bc551568">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="694b0d45-05a3-422e-bc9b-e60685692007">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="ed421ba8-757b-400f-bd04-9be1ab314433">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="dd25825f-7cf5-4f82-8ce9-e64b12dd8882">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080CB6D0C9955705E05307991F0AAA79</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:HD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>URN:DECE:RIGHTSLOCKERID:ORG:DECE:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:HD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>URN:DECE:RIGHTSLOCKERID:ORG:DECE:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1727</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-pattern-valid: Value 'URN:DECE:RIGHTSLOCKERID:ORG:DECE:080C1196C10A3A07E05305991F0A063A' is not facet-valid with respect to pattern 'urn:dece:.*' for type 'EntityID-type'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A/RightsToken/urn:dece:rightstokenid:org:dece:080CB6D0C9955705E05307991F0AAA79</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080CB6D0C9955705E05307991F0AAA79</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10003_RightsTokenUpdate_FUNC_RTL_With_Mixed_Media Profile HD" searchProperties="true" id="faa0c428-1887-445c-afe5-54cddb757318">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="b3c80c9e-cb26-4f23-ba43-24576cff89cd"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="88469f22-6dd0-4d42-af0f-dcc98e089842">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="92f329e7-2c28-4c1a-8652-492b00a32c25"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="4ccfb573-da3c-4bc7-9412-62cf810f7229"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="e17f9f2d-9537-4ba7-b487-e7523e8e0f94"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="28867825-b63c-4661-9c26-804ddd343895"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="171b048d-26d9-41b3-b9cb-3f8c49ec4228">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="ccacdeef-e1a9-4ba2-b4b7-d95b413e27c8">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="417d646d-c7c2-485b-a2c8-68472be1290a">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="9c7d940f-bcf5-439d-b376-6d82bd00dc88">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="931dd952-1439-4bf8-9c7f-4866b1f58d82">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="c741b45d-a7e6-4150-b5d4-c0f1b73fb9a4">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080D37D9F604100EE05305991F0AC2D6</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1974</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080D37D9F604100EE05305991F0AC2D6</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10004_RightsTokenUpdate_FUNC_RTL_With_Capital Alid" searchProperties="true" id="843cdaf9-03ba-4a25-8364-7670b1c3bc75">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="ea741638-3f08-4c28-b434-06fa1731b74a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="28d90e63-a5ad-4a94-8247-0f0999e7d090">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="2ab44771-1eae-4fb2-825c-321182e3b7d7"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="859e945a-7d13-4426-bc8e-f4fffb53b1ae"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="d44a46bb-58fb-40a9-a6d9-57754bbc7a8a"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="19928bb9-d063-4a36-a515-b75b4f17beca"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="a5ec45e9-0fc6-4a9c-b6fc-b874eb13542b">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="4803c2e3-8f38-43e5-966b-63b9886c5642">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("ALID","URN:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="469e7b9b-b697-4121-872a-9e33b0f510a4">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="5db3bdbe-4c5e-4baf-8a08-d54f9e4b46e2">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="223d154e-89af-4d0c-8e4b-014bfb4cc832">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="6e7c15e6-f056-44fd-bcc7-7d0eba790782">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080F7D4D3EB16ED4E05307991F0A30C3</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2380</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080F7D4D3EB16ED4E05307991F0A30C3</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value/></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10005_RightsTokenUpdate_FUNC_RTL_With_Capital CID" searchProperties="true" id="38a5e7f0-b87e-4a80-9e3c-5f8ba70cf1b1">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="d38a1c74-2c12-47b4-842b-756a4dd91f41"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="b047899e-d046-4168-9307-7a23da897a7f">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="60ca57d7-ffe2-4fda-abe0-7cac75d6c648"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="72783d4e-ba94-44db-a93d-e48fbc9bfa86"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="9a0af197-d207-464c-808a-61a39fc33812"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="05cabbf5-5f53-4b91-9bd9-36e8fe86a65e"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="d3bafbff-e20e-4816-96d0-53723b4bfbd4">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="b64c96a1-d041-4fc1-abad-588e2c1fbeaf">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="7165e9d4-8432-4bf2-9c16-349631c5e2f8">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="47c1f6ac-3f6d-404a-9947-493dd151db26">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="5e3fda52-8833-43a8-9c2f-7d9e49303e79">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="10de1112-be21-44bc-97c6-396f9c5f3a62">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value/></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value/></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value/></con:property><con:property><con:name>assertionAccountId</con:name><con:value/></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value/></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value/></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value/></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value/></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value/></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value/></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1974</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value/></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value/></con:property><con:property><con:name>useroid</con:name><con:value/></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10006_RightsTokenUpdate_FUNC_RTL_With_Mixed_Alid" searchProperties="true" id="b356b52b-a521-4bd4-8613-5b37b71790ff">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="4e4c34fd-85ca-47dc-8b1a-f05cb4be1f1e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="5c763a3b-96f6-42b7-b6f9-c325af2001bc">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="fb3cc4e2-351a-497f-a20d-eaa12e03ee7d"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="1e2ad2a3-0a6f-4743-93cc-55e833349dcb"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="e99662cb-bed1-47ec-ba3e-04b693b799d7"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="049cd660-bf46-4a59-8a8d-486efd3c590e"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="c9d6e048-bb09-48c7-b557-54655fcadacd">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="1e5e31dc-f9cf-4e49-8f91-64ede61572fd">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("ALID","URN:DECE:ALID:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="5c7c906a-87df-4c69-bbb0-3fea02dc358d">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="884412ac-0cd5-44d0-8843-949e16c82c81">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="c96446e8-cd21-4427-a384-a0855ef1b480">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="2b617492-9ce1-45aa-a7ad-71a1d8de5f4b">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080C1196C1033A07E05305991F0A063A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc9o4FP4rjPuYMZZsHMATmKFAt25I0gaatnnZMfKxUbBlkGQu+fUrGXAwuSy7Tx4dH33nOxd90pUI0sT2ekIAlzRjtU2aMOEV1o6Rc+ZlgaDCY0EKwpPEG/duRp5dR15w2GLU/EHH+LuBATnNBjEbUYjNhmtPzWljSsy2TdqRHbVdaGLlKkQOPhMyYLJj2Ag3TIxN3Jxg5CHbc1C9jfCjUXsALhS2cqkjY09qIzrGTMqFZ1nr9bq+duoZjy0bIWz9vhmNyQzSwOhe7TIqAvHu3p/UQyCQJKROstS6sio+V6HwxjRmgcw57GOF78VCFmpbyicUNP5klHsh9FmUFct+wDJGSZDQ50DX5wbkLAtrvSTOOJWz9N0kMNLAJmyISXCDfTKsKrUzgSoMuQhMMQvwHuseIuDACNR+3vsd49N5XSu2TnjARJTxVFSX/40PsBUk2QJCUxzS2lM7H/CNSnWvgHg+I0ku6Apu9bAuAgJi300g50PVvnOI6GZEhRrQjdDsrGN6J8tdNQY0BiH/T4OOmrMDeQiSHLppcvlwPXjAeJlPe/7z4/V8666b7da89bNTEDh2Lgxla3fLk6Esh2i3I/+xdp27wWjyO5wtbhqOHC5+jict+EYw+z1f+67jW80Rz0dDcdtb8h93jzM3suT4UQ7DPzb78fVP/6IBDTToTa1vLbT0F+gvN//6tO3zLHQG6VNvfheHuD2Kby5+PTnJH7oKWuFw6n+Z5N83mN/cslmUJGH4dZMs3dEzv3jot93RtSPZErYQWTF7Du301+Qx65TpHPGv2g5nfpxPn4DIw1KPgT+ofVFdCuTHYqYtNDSjwtVbaPEREpg0unqX1g4vV3JHQ0/1cLdGLdTHeOA4zc8De4j7Q+Q6qNlu4y+o17oc2AeR2bE4odjPWER1LC25u7H5mCBJPQEsBG6uslwpnTA+QBwEMqj57F4dgowJmGRKnre5PU+XbTSXLsP4aRnHAnEnRs9G7TaTd+yO9yIJvKrJTkWT74HQBQUt3HquhRpsIVUtlsEqlwmur4I6g1xJO9cq69mNlmsJmi4S0EytNAvzBOqL2aKojCV2X9sMiCis98NJcdrezev036EEyiek2kHoXD6DaiO8cbnYh0TeT/jyOOEDfC8PqT5Yqp6SU7JjUv31MiZ6PsoZURkdKJeep4YKqnWaUBkoXFFSDnp5XSsVV+e+e2jHMqgv6/lqlRcNaGp94wpeiQ52LWRbYyC5UqbtJJsDs0oU66xroCR+Ery0VynmcsbGMpCQqompFcsz7v0xCH3v+2rUN+c+KiohVekkbORbtn6i3iya8YfPGuIR7afM39VnnfHwpWNvYB3FUXmqa19SFuuVvgK278wFyRQsVeKV8WPwtwDeCl41lkUuuUg1UNNcwvt/alqVOkZASJYz6Q+MwnCslAVPuV2A9+L0CqYQ4/J1Rv/9eWbSYgQIqDedoAW+vmQ9fQRYfKS2+6CvBbd92cfIdnqoWQiuuxNcdOn0yqJU2HVfmV9bjup0OuPdfwA=</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_41e0374c-4fd1-452b-b4bc-92c9f2f95e71</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080F68C7E36818D0E05305991F0A152A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>080C1196C10A3A07E05305991F0A063A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">          <ns4:SoldAs>                     <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                       <ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:sd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>3</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID>                    <ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount>                        <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser>                              <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>4930</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080F68C7E36818D0E05305991F0A152A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value/></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0335201416218720604</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080C11D337BE2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10007_RightsTokenUpdate_FUNC_RTL_With_Mixed CID" searchProperties="true" id="a3913d5c-0934-4b97-b2bb-57a774e79693">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="268d99a3-2d5e-4962-888b-2940fd4ac005"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="fb96dcf6-5fcf-4388-80f4-2a65ec91b8ff">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="90bf2ba0-eaee-4552-975b-b1ae09e0b03f"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="a229f5cd-6ea6-481e-83c2-454e8d92d2cc"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="6681fbee-6e6e-4db8-bcb5-24e7f03e31cc"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="83298677-72e1-4b26-9e5d-cd6bc0d88845"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="f7e16efd-7a52-4bfd-812c-93d40c18e984">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="a2e81b77-f612-4f50-91dc-88b75f453f8c">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","URN:DECE:TYPE:MEDIAPROFILE:hD");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="430cffb6-1578-493b-8aba-2c8d8a5a35ff">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="96f87d31-5eb3-4d87-b58e-de5dba73fa79">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="c1d117f2-89e9-4884-abce-473cd518bfef">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="b9d29f45-ffde-480d-a3d2-82f6e061dc1a">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value/></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value/></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value/></con:property><con:property><con:name>assertionAccountId</con:name><con:value/></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value/></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value/></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value/></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value/></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value/></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>URN:DECE:TYPE:MEDIAPROFILE:hD</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value/></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080C1196C1023A07E05305991F0A063A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080C11D337BD2E1CE05307991F0A86D2</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080C1196C10A3A07E05305991F0A063A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1974</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value/></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value/></con:property><con:property><con:name>useroid</con:name><con:value/></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10008_RightsTokenUpdate_FUNC_RTL_With_Capital StreamWebLoc" searchProperties="true" id="83e9df16-432e-4fac-8be0-ac2f7627549b">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="01c1d850-80ef-48de-89c4-d7f725723d0a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="c885821a-1564-40fd-bacc-1bf397bf89e9">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="10ae0601-80b9-4086-a1ea-6624acf5faaf"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="ae5ff618-2571-47a6-962d-dfab3f55606f"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="97c3a47f-27b8-4472-8f32-6366a1f0242f"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="85274448-b6df-4c70-abb8-2bb599409c2d"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="d8483351-8fc4-4c23-bfc1-0c0b384ee2e1">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="ad7fee8a-5679-4194-8a28-0d120d96eedc">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="5ef22a9a-8b8e-4df3-8a42-ad8bf77ddfc4">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="08e6685e-ee17-4a51-94ba-0b4b216ed8e6">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="7c0ea4e8-7986-4f10-893b-bd799913ef2c">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="3f45e109-9965-4b1e-b756-8e0bfc01b127">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>080FDF4519055FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZrb+I4FP0rKPNxFOKE8EhUkCgpWzotbXl0GL6sjOOAIbEhdiDtr187QEroY9mVkJBvrs899+FjX3EYhZbb5hzHgjBaSqOQcjezNrUkpi6DnHCXwghzVyB32H64d60ycOFxi1bqeU3t7zoAdq1iI90M6jXdNs1Ad6BT0xvOzAQ1y545OJCunCe4R7mAVDQ1C5i2bpq6WR+ZtluRP6tcrVpTrfSCYy6xpUsZaAdSKW9qCyHWrmHsdrvyrlJm8dywADCNycP9EC1wBLXW1T6jLFDcOvijso8RDkNURiwyroyCz5XP3SGZUyiSGB9i+V/FAgZwDOnjczL/oeV7sd+jAcuWHUgZJQiG5A2q+jxgsWB+qR3OWUzEIvoyCRMoYB2nSEemTX9oRpHahUAFhjGHOl9A84A1wAGOMUW4NB70mtqPy7qWbR3FkPKAxREvLv8bH0y3OGRr7Ov8mNaB2uWAn1SqdYWR26MoTDjZ4r4a1jVEmB+6idHlUKWnGAckvSdcDmjKFTvjlN7Zcl8Nj8wxF/+nQSfN2YO8wDDBrQ5cpZvJ2/LhjzMjjVVgXK9SFjj98XTezAicOmeGvLX75dlQ5kO03zHg/nK1Ctgzub3tz6dLMJqZ1p/0ZcZ+jybdB/5MBk/Pr/iX2V0PfqLYHrcr23D619ib/JoJMf59642XUdx9rGADVCujbvi23UK0vBut7nrptNoHTtWjVg30PfrUSN4qm2fy+BrepQ83Yr6eDNj9pDbeEL/fNq+TisnEDQtfKmPwM36Z7paO83bLounrtn0bTcfNPJ0T/kXb8cwPk9kSI3FcqjHoeaWu7BIU34uZshBfDzJXd63EhwtMhdZSu5R2uImUO+K7sof7NWiArlerOFal07augXUjCwGqjmN2QfvaqXaOIrNncUaxw2hAVCwlufux+Z4gilyOqY9jfcsSqXRc+wbRgwKWenQgDwGjHI+YlOf5arV7Q6m5rs9Ss84pB4vdyjZZVSv1mXikj3E7EDguanK9oMkDjMiaYCXcaq65HGwuZC02cJuI0CxvYZniREp7rFTWtexG1eAkWodYMTUi5ichLq8X66wyBt//WzpEPLMObkbZafsyr/NvxxJIH58oB65yucayjfiTy8U6JvJlwhY4TfgI3058og6WrKeICdozKX56HxM1H/mMyIyOlHPPc0MB1ThPKA/kbwnKBz2/rqWKy3PfOrZjA8ubcrLdJlkD6krfYgkvRcesGsAyhhglUpleR2yFqZGjGBddAznxs+C5vUgxEQs6FFDgSE5MKVtecO8PMVf3fk+Oenrpo6IQUpZO4FR8ZuuE8s2iGH/7rEEuUn7S/CT/diz23zv2CdZJHJmnvPYFoXO1UlfA6xdzgZiEJVK8WHwK/hnAZ8GLxrzIORchB2qWCPz1l5JSpaYGEWIJFT1PywynSpnxFK9r7L47fYDJxDh/nZF/f57pJBsBhOWbjpMMX12yrjoCdH6itoegHwS3a1dNB9jVrtfIBLe+F1zPtr28KAV2rQ/mj5aTOp3PeOsf</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_7004634c-1f76-411f-9a96-89b10624b9ef</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>080FDF4519045FD8E05307991F0AD44D</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>080FD63923CA2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:080FD63923CA2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>080FE35E3BA44E05E05305991F0A0494</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:080FD63923CA2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:080FDF45190C5FD8E05307991F0AD44D</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="URN:DECE:TYPE:MEDIAPROFILE:hD" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:080FDF4519045FD8E05307991F0AD44D</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:080FD63923CA2B02E05305991F0AB95C</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:080FDF45190C5FD8E05307991F0AD44D</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2273</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:080FE35E3BA44E05E05305991F0A0494</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0805151416234915756</con:value></con:property><con:property><con:name>useroid</con:name><con:value>080FD63923CB2B02E05305991F0AB95C</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10009_RightsTokenUpdate_FUNC_RTL_With_Capital LicenseaqqBaseLoc" searchProperties="true" id="a58971f7-b288-4f30-abd6-2cceecfdb79b">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="8b88c68f-a225-49ad-8e9c-c00d969ff090"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="8b65c510-f329-4763-be03-7e9cb83df0e1">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="d2525d0c-74f9-445f-ad65-b5de3aaa7dc7"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="10184d71-c09c-45ad-8acb-640fc9f40d3f"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="920358e6-ee2e-4a6c-8866-a2e2d9502e3f"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="bc039b23-1eb2-42f7-81af-ce18a5d1c748"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="935710e1-ea44-47d2-b70c-a83f7342770f">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="37a36844-ef77-4985-89dd-c8b455d8bf0d">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="b67df8f2-5380-42b9-a7e9-31dd863a299c">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="36fc344e-1716-4036-a2a1-b9c798bdec57">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="3eefe83d-7330-41e3-a0c7-dd25ecd18308">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="ed13cca8-2f3b-40cd-9284-3f127ce1e148">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>081002B4321B3759E05307991F0AA8FF</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbZcuo4EP0VyvcxZbwSwBWoIiwTJiGQQLb7MqXIDSjYEkgyS77+SgYcTJZh5smldqv7dPfRkS4EiiM3aAgBXBJGC+s4oiJIrTUj4TRgSBARUBSDCCQOho3eTeAW7QDttxiFbqtm/FPyPYzABROHJd/0z6uOiSq2bYav7rkblquvpbGvXIVIoEuFRFTWDNd2fNNxTKc8cvzA9wPHK7q2/dsoPAIXKrZyKdrGDtRa1IyplPPAslarVXHlFRmfWMrfsZ57N0M8hRgZ9YttRWkiXt/542IIGKIIFzGLrQsr53MRimBIJhTJhMMuV/hdLtuyq5byCQWZ/DKyvRB26ZilyyaijBKMIvKOdH96IKcsLDSiCeNETuNvi3BsHdiENTax49NfhpWHdmKgHEIukCmmyNnFuocxcKAYCg/33Zrx67SppVtHHFExZjwW+eV/wwN0CRGbQ2iKfVk7aKcH/KJT9QvAQZfiKBFkCbearHOEQeymCfj0UIUBhzFZ3xChCLoWGp11CO9oue1Gi0xAyP8zoIPhbIM8oiiBOmq1W4+Ls4e7K3QdJcPKoP/0xOwX9FzyaymAQ+fUkI12uzwiZUai7Q5RealWWpv+5u49emgk4ah99uait/tbNfyzfq9yu+g8NN8q3huZoEl7fNdJnuVmbRMvfprOGrOm5/4Wo79QeTBolqy2uJLRwGvf+Kv+1WDslNdo3JxcidcYiPtc5bxdLpdeXtp+q/8+nT09X9sPt+3ZYlGls9ceDqHHF31UTSZUhCzGneq4D/MGKm2a3cX137NaVs4B/rxtf+aHyesbYLlfahp0W4WOmhKSP4uZtpDQHKeuwVyLj5BApVHXu7R2BImSOxIGaobbtV1xbNttnZebzY5XLl227ZJnl6tVp2M3Wp7r7kVmi+IIYpPRMdG5tORuafMzQBwHAmgI3FyyRCmdMH6I2EISFbr0Xh0CRgWMmJJnZ+PYPOIsIeGSeH5lvpmtGYsXC6Nwy2Sf9nljLIHnNbmc0+R7wGROQAu35rVQxBZS9WKBlomMnOISFSkkStq5VtnA9SslS5B4HoFGasUsTCIozqfztDOW2H5dE2GRWu/bo/S0fVvX8b99C5RPSLSD0LVcghojfHG52PtCvi3YtQ8L3odX54Pog6X6KTnBWyT5Xx800fzIOKIq2kPOPI8NuajWcUFZIjU1nBE9u66ViqtzX9+PY4GKi2KyXCbpAMpa37gKr0THKVm2aw0BJ0qZNiM2A2plUayTroEM+FHyzJ6HmMgpHUokIVaMKaTLE+79IQh973cV1denPipyKVXrJKzlV7ZmpN4sGvGPzxocYO2nzAP1WTEefkzsi1gHeVSd6tqXhE70Sl8Bm294gZkKS5R4MX4Y/KsAXyXPG7MmZ1ikItRrIuH7PwWtSjUDYcwSKrstIzUcKmWKU27mEHw4fQqTinH2OiP//jwzSUoBDOpNJ0gaX1+ygT4CdHKgtruknwX30vdcp6EEt3oouI1Kp5M1JYeu/sn82XLQp2OO1/8A</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_543cae2e-cd54-4691-a800-db262d79b5f4</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>081002B4321A3759E05307991F0AA8FF</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081002D67CCF375BE05307991F0AD322</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081002D67CCF375BE05307991F0AD322</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>081002EF6FF13768E05307991F0A7C9C</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081002D67CCF375BE05307991F0AD322</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:081002B432223759E05307991F0AA8FF</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:081002B4321A3759E05307991F0AA8FF</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081002D67CCF375BE05307991F0AD322</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:081002B432223759E05307991F0AA8FF</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2210</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:081002EF6FF13768E05307991F0A7C9C</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0814551416235495955</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081002D67CD0375BE05307991F0AD322</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10010_RightsTokenUpdate_FUNC_RTL_With_Capital CanDownload" searchProperties="true" id="816cb2b4-c18b-4bf5-9b39-ac37950166c2">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="2e18d36c-f695-4159-b9f6-fc6116ad5126"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="15fd749f-bf6f-401a-8cdd-b60a9139238c">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="78212adb-502f-4ec0-9a2c-36117f4fc70e"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="2063226e-1248-4f40-b353-520ce855731c"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="f13f9ad0-1d3f-4c0a-a724-94ab29d76c6c"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="4b82e1b0-62ce-442e-9d48-7d345ae1bd45"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="77e3f238-3526-4c23-8f7d-e05cc6ed6915">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="127e24ee-c6a4-499b-8ae8-0e4e82c9b581">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","TRUE");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="e5aeffea-1680-4e8b-9f63-48259a203a35">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="b606e88b-d7e5-4ef0-93c6-7777f289c273">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="76f9e1f3-a442-4303-aa2a-77839b7606c0">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="78a59006-81fb-4c04-b72b-313304d3ecc8">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>TRUE</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10011_RightsTokenUpdate_FUNC_RTL_With_Mixed CanDownload" searchProperties="true" id="7804120c-35d8-4a9b-bad5-3bd6e7f32f73">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="d8439900-94f7-41f9-9c8d-988e60320f96"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="6d170e89-7cc0-4a46-a878-a8ad375b5c24">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="57f49674-b86f-4540-91df-a4d943b90969"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="8449f8fa-ae99-4aea-97c1-d9d37342db1b"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="08142851-9acd-4284-9f3e-8cfac3eecdca"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="3bfb22d1-d407-4bc7-823d-80e0efb3068a"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="e026c624-4846-4677-9aa3-7580aaf0eb2f">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="61d47e33-35ce-4ae4-85ad-d28f89a2b71a">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","True");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="b1ea0a0f-dc33-401a-80de-387b83bd6722">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="71af5476-83c4-48d1-8bca-ff3c8103aff6">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="5959268e-b27a-4fb4-9860-e5b85c471b7c">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="7087290c-b817-40e5-bb4c-311a53597461">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>True</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10012_RightsTokenUpdate_FUNC_RTL_With_Capital CanStream" searchProperties="true" id="63b9fd94-d78b-46d6-83d5-a91ee4504c35">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="e4b4d49c-2637-4f4c-9303-a3d552eb3fda"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="7fb36488-819c-4961-9f57-fdd74402240b">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="eae1d292-97a6-4f7c-844c-174d635e8e5e"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="5e0b7a44-6f00-4a46-96bd-0a0c871ac688"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="7433c81a-d14b-4b24-aae0-494b4f6ed61c"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="71306462-f769-4964-8eb3-eb57ac435d79"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="808c0f62-8304-41b0-a82a-7974c2aa32dd">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="0b3fde4d-4204-4bf2-a785-f7cc9ccccb79">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","TRUE");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="3e9bfd64-837e-4bdf-b078-f3a531776da8">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="7268bc52-805c-4742-9443-3b0ea7078789">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="8df8ed30-238d-4d7b-be74-0098fdabc55c">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="fc1e87ef-32b4-44f9-aa83-3be36ce9b2b0">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>TRUE</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10013_RightsTokenUpdate_FUNC_RTL_With_Mixed CanStream" searchProperties="true" id="05b9c315-20fb-4fd3-9a38-46cac2d4ceac">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="e6a876a6-fc85-4f4f-bce3-fccb57ef0ca3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="2a7f0269-b573-497f-a941-02eac624c8ed">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="8b0f7c9a-411b-4ed0-8595-d8b4f78e6820"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="9078813a-ecd5-4c77-b602-b54ccafded82"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="610cc270-57bb-46db-bd29-5382ee8093d5"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="aca1f394-1f04-4dcb-8be4-b3afe714e032"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="45cc8a7f-5d2c-4691-b6dd-d753c0f4e8be">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="b607193f-a6b1-48ea-979c-3734e7ba3de7">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");

testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","True");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="e331b36b-3076-4dfc-8edf-d86086cff5dc">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="84d15ff4-5b08-4c38-9e0f-1cd74843b39e">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="c807c23c-dbd7-4d6a-a750-5ffbe2c0eb7e">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="83bc1d0d-6f05-4b3d-b27a-1aeebd30368b">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08100C02FEA32F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvM4ZXwlBFegytwynk1mWCDZzLxsCbkBJbZsLMkm+fqVDDiYXJbdJ5fardOnLzrSFUNxZHs+Y5BxktDGNo4o80prVxMZ9RLECPMoioF5HHsz//bGs5umhw5btEYw7Gp/O3DhLBC09E64QLqLXNA7C9TW2651gcNl2EKWKV0ZExBQxhHlXc02LVe3LN1qzy3Xcy88t9M0285vrXEPGZPY0qUpd+1IbVlXW3OeeoZRFEWzcJpJtjJs07SMh9ubGV5DjLTe1S6jMlDW2/vjZggYogg3cRIbV0bN5ypk3oysKOIig32s8KNYpmF2DOkTMrL6olV7IQzoMimXA0QTSjCKyAtS9bkFvk7Chh+tkozwdfxhEpapgHXYYh1bLv2iGXVqZwLVGGYM6WyNrD3WFJaQAcXQuJsGXe3LeV0rt84zRNkyyWJWX/43PkBziJIUQp0d0tpTOx/wnUr1rgB7AcWRYCSHH2pYU4SB7bsJ+HyoxiSDJdneECYHdMsUO+OY3slyV40hWQHj/6dBR83ZgdyjSEBv9Xiz/PoriEwyWYwL7vrsepZET2RUJN2SwLFzaahau1ueDGU1RHv4+82Lk/+15RsM2XeHxb+Lyctoa74Mr6/Nh8jAjvg2/476mOSFmBa37uzxm//kDJ76o0304ifx5G50vaBZuBSTX3/eXjxMA/trsFhsYJzeuSicrH7ODfO3EKyfGtth8LQpHGNcsOC2/dXvzyc57k/X4WzT5+vHwR/9dfB9HC1H6XB7PRcP9p19jcZZsOGps7zrVukc8a/bDmd+JhaPgPlhqcYgGDbGskuIfy5mykJCfVm6eqkSH8aBcq2ndint8ISUOxJ6soe7tXlpmebAHrXMTssdm9bIbDlmu9OxxqY/9Eedg8jsWJxQHCR0SVQsJbm7sfmcII49BjSETM8TIZWOaZ8gDhFHjYBO5SFIKIN5IuXZguJlJaI8ctBCWPElDcWl+Ygfc6Q1fiT8J/2Z+UsOWV2U2zVRngImKQGl3GqwmZxsxmUxNigXPLKaOWpSEFLbMyWznu1etgxG4jQCRdWIk1BE0EzXaVkag+2+to4wK63T0bw8bh8mdvrvUAPpExLlwFQufZB9hHduF+eQyIcJ2+Zxwgd4X4REnSxZUJ4RvGNS//U6J2pAqiGRGR0oV56nhhqqcZpQFSjMCa4mvbqvpYzLg987tGODmpumyHNRNqCtBC6T8FJ1rJZh2sYMsJDS9DxPnoAaFYpx1j1QET8JXtnrFAVf0xlHHGI5MY1yecbFPwOmLv5Azvr23FdFLaQsHYctf882iOSjRTH+9F2DPaz8pHkiP0WSha8dewfrKI7MU977nNCVWqk74PmDucCJhCVSvZLsGPw9gPeC141VkSsuXA7UQnD4+E9DyVJXQxgngvJgqJWGY6ksefLnFLxXpzcwpRpXzzPy7+8znZQjgEE+6hgp8dUt66kjQFdHcrsP+lZxTXs88m17LD9KcVs7xbUHLb8qSo1d7435reWoTqcz3vsH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_3e63bae5-9dba-4a4e-9ba7-7416cdfd5a10</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08100C4428432F9AE05305991F0A035A</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>TRUE</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  TRUE</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08100C2E50954F01E05307991F0ADAE9</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08100C02FEAA2F2FE05305991F0A2C5A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1735</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'TRUE' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08100C02FEA22F2FE05305991F0A2C5A/RightsToken/urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08100C4428432F9AE05305991F0A035A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0817321416235652801</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08100C2E50964F01E05307991F0ADAE9</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10014_RightsTokenUpdate_FUNC_RTL_With_Small Node_Id" searchProperties="true" id="20b819d7-e4a5-4401-aee7-26fab2f9799d">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="abe6a544-bbf5-41ce-b5f4-50996039ddea"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="1999a05f-067d-4dbe-8b69-86fb82d58e94">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="df76f418-a064-4644-b250-21ba4f8e159e"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="8c8b83b9-80d4-4cf9-8b0f-9d7fee267ba6"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="331e9d3e-f653-488d-9f62-a7fe696fabf4"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="b886853e-c846-4eeb-bce0-410903e344a1"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="d787b50d-483f-4a01-9384-c00ef58a7a36">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="9be2fc02-88ee-4b90-93c2-7eefe6ad111f">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="1f4cc4d0-05dd-497e-b108-76c945890b7e">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="46e9c2c9-41f4-4c00-8367-9c9973109c5a">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="32e31481-51a3-4b67-9e46-83c22a77520c">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="fc574ee7-6625-4962-9786-75e5debeb76b">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08103C88F7BA4ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZbc6o6FP4rDvtxD3IRBJnqjNW6j9O72G7blzNpiJgWEkyCYn/9SVDZYi/Hc56YLFa+9a1LvuSMgzSxgz7niAlMSaNIE8KD0trVckYCCjjmAQEp4oGAQdi/vgrsphmA/RatMR52tb8933JakfeiuxA4umP7lt5peW2944F2qw1c37Na0pXzHI0JF4CIrmablqNblm55U8sNTDNo2U3PsZ+1xiNiXGJLl6ap7UgVvKsthMgCw1iv1811q0lZbNimaRmz66sQLlAKtN7ZNqMyEOvt/GEzQhAlCWxCmhpnRs3nLOJBiGMCRM7QLlb0VSzTMDuG9Ik4jn9o1V4UjcmclssBIJRgCBL8DlR9rpFY0KjRT2LKsFikXyZhmQpYRwXUoeWQH5pRp3YiUI0h40DnC2DtsCZojhgiEDUeJuOu9uO0rpVbpwwQPqcs5fXlf+ODyAolNEORzvdp7aidDvhJpXpnCAZjApOc4xW6UcOaAYj4rpsIng7VuGNojosrzOWAFlyxMw7pHS231RjiGHHxfxp00JwtyCNIctR7C/1zK6cPb/TaLTb2BQsHtne3WU3eebckcOhcGqrWbpdHQ1kN0XbHZeeSJs/T1Pl5aUAOjEywNl532kv4++nx1jbZryFMCvPd+2kP/3rAYfYWoc5deP9rNP/1HN+6/eeHl9nTLHGsvIAbP5zHc9eYzew38+phQ28Hc3a3htePryFcpwN/unxxC4skRcaFH/rJ+h7Yl4P4ZtG++JnczBbZyvx9P32iafbE/DDyB08GcTYTOmt1rsbdKp0D/nXb/syH+csrgmK/VGMwHjZGsktAfC9myoIjfV66BpkSHy4QEVpP7VLaEeRS7nAUyB5u16Zvma2h7fmjc8dut90L022Zbqdjjcx+a3g+2IvMlsURxQElc6xiKcndjs33BGEacEQixPQVzaXSce0bxCEQoDEmE3kIKOFoSqU8g9c0j9cuc14ptLDf9gtqxsv3Zaw1bqi4JbesPxeI1TXZr2nyBEGcYaSEW801l4PNhazFEqxykVjNFWgSlEtpZ0plA9vxXYPjNEuQYmqkNMoT1MwWWVkZg2+/tg4gL62Ti2l52r7M6/jfvgTSJ8LKgatczpFsI/rkcrH3iXyZsG0dJryH7+cRVgdL1lMwDLdM6r/+jImaj2pGZEZ7ypXnsaGGahwnVAWKVhhWg15d11LF5bnv7duxBM1lM1+t8rIBntI3JuGl6FiuYdpGiGAulWkzpW+IGBWKcdI1UBE/Cl7Z6xRzsSChAAKlcmIa5fKEez9EXN37YznqxamPilpIWTqBCvGZbZDIN4ti/O2zBgZQ+UnznfysKYv+dOwTrIM4Mk957QtMYrVSV8Dmi7mAVMJiKV6UHYJ/BvBZ8LqxKnLFRciBeskF+vpPQ6lSVwMQ0pyI8VArDYdKWfIUmwwFf5w+wJRiXL3O8L8/z3RcjgBE8k3HcYmvLtlAHQESH6jtLugHwR34/sg77zj94agUXG8ruB175FVFqbHrfTB/tBzU6XjGe/8A</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_78143d7b-5ca4-4281-9376-97a636a58713</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08103C88F7B94ADFE05307991F0A92F7</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08103D278FB42665E05305991F0A3DBC</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08103D278FB42665E05305991F0A3DBC</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08103EFC25DF5446E05307991F0A3EEF</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:08103D278FB42665E05305991F0A3DBC</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08103C88F7C14ADFE05307991F0A92F7</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  True</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:08103D278FB42665E05305991F0A3DBC</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08103C88F7C14ADFE05307991F0A92F7</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1701</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: 'True' is not a valid value for 'boolean'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08103C88F7B94ADFE05307991F0A92F7/RightsToken/urn:dece:rightstokenid:org:dece:08103EFC25DF5446E05307991F0A3EEF</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08103EFC25DF5446E05307991F0A3EEF</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_083181416236468162</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08103D278FB52665E05305991F0A3DBC</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10015_RightsTokenUpdate_FUNC_RTL_With_Mixed_Node_Id" searchProperties="true" id="894f1ad5-4347-4848-aa07-fa5ec74fa5d9">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="628bd6c8-9ad4-49cb-8a43-d7dad7a2fa82"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="8e21d0c0-94b8-443d-a993-04699a99fdfe">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="46e58998-4c7b-46a9-82d7-8db83375d536"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="40d0520e-17d2-4fda-9b4d-28fde440e81c"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="30081660-7aea-444b-9b07-34a7bc067832"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="dc5602d4-e84d-4bae-902d-ae017348b208"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="212710ed-1b31-4a1f-a210-199f3369eafd">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="3ea63484-9c21-429f-ae07-88720be892c8">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser","urn:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="c4516a3b-ffef-4509-af1f-249d724566e9">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="df60e821-e52d-4676-8bf5-8a35913de93f">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="ea084010-4e26-4c58-9a1d-232e89a8c5f2">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="56ebc2d0-7f0f-465b-b902-334b0b6988d0">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106119170228C9E05307991F0AB846</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZtc6o6EP4rDudjh5cgiDDVGd9666l9uWJb2y93YoiaFgKSoNZffxJUKrb2eu8nJstm99ndJ09yyWAUml6LMZxyEtPKOgop83JrQ8lS6sWQEeZRGGHmceT5rduBZ2qGB/dblEq/21D+AbhmI6tmq+YE1FRrYpuqa9Ud1TbcaWAhx4TIFq6MZbhPGYeUNxTTAJYKgAqcEbA9YHhVW7Od6qtSecIpE7GFi2YoO1Br1lDmnCeerq9WK21V1eJ0ppuGAfTx7cBHcxxBpXm5rShPlDZ3/kgLMMJhiDQUR/qlXvK5DJjnkxmFPEvxLldwKpehG64ufAJGZr+UYi8O+nQa58sOpDElCIZkA2V/bjGfx0GlFc7ilPB5dLIIYMjAKl4jFQGL/lL0MrQzA5UQpgyqbA7BLtYQT3GKKcKVx2G/ofw6b2r51lEKKZvGacTKy/+GB9MlDuMEByrbl7WDdn7AbzrVvMTI61MUZows8Z0kawIRZrtpYnR+qMpDiqdkPSBMEHTNJDr9EN7RctuNLplhxv/PgA6Gsw3yBMMMN613e5NZN8Y64Xds/bKeg1YXXbcXfwezRg7g0Dk3FKPdLo9IWZBou8Nng+pLZNk+ub99n6SjZytB0wmY29cPqP5B2MgASbJub2Jn2v5rsXh8c2lnDGpz40l/Du7Hi876+ffNGyCc2+58oA98aiyuL6IXaxw5g96w2o+vei9CHvz6ze8L94nOb5zNc225HD+R26x3V3ciOgEXfqfW0x2r2jKqr+PNYzR+q06CMZ7d+SCE/kscZN1Xo1GUc4C/bNufeT+bvGHE90tJg363ciWmBPnPYiYtJFCnuauXSPFhHFOuNOUuqR1eJuSOBJ6Y4XZt1IFRA1W37fbapnXV7hl21XBcF1wZLbfWtvcis0VxBLET0ymRuaTkbmnzM0AUeQzTAKfqMs6E0jHlh4hdyGGlT4fiEMSU4VEs5DlzAjec1TYfq5CAabByQpguphbCSuUu5vf0Pm1NOU7LmlwvafIQI5IQLIVb8poJYjMuerGAy4yHQFtCjeJMSHsqVdYzrbqtMxIlIZZI9UjMM8RaMk/yzuhs+zVViFhuHfZG+Wk7Wdfxv30LhE9ApAOTtbSxGCP+5nIx94WcLNgEhwXvw7eygMiDJfrJU4K2SMq/Pmki+VFwRFS0h1x4HhtKUfXjgopEwZKggujFdS1UXJz75n4cC6gttGy5zPIBOFLfUhFeiA6wdcPUfYwyoUwfo/gdU72Iop91DRTAj5IX9jLEjM+pzyHHkWBMJV+ece/7mMl7vy+ovj73UVFKKVrH8Zp/Z+uE4s0iEf/4rEEekn7C/CA+qzgNPif2TayDPKJOce1zQmdyJa+AjxO8QLEIS4R4xelh8O8CfJe8bCyaXGDhglCTjOPTfypSlRoKRCjOKO93ldxwqJQ5Tv6RYO/T6UuYXIyL1xn59+eZSnIKSNUR/nl8ecl68gjQ2YHa7pJ+FVzgAscAZr3jHgpuu27ViqaU0DW/mL9aDvp0zPHmHw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_1e65c465-2b16-4b52-9487-509fd4c72ac5</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106119170128C9E05307991F0AB846</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>0810614B2F6C0568E05305991F0A60ED</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2336</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseAccountNotValid">
      <dece:Reason Language="en">The purchase account ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseAccountNotValid</dece:ErrorLink>
   </dece:Error>
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseUserNotValid">
      <dece:Reason Language="en">The purchasing member's user ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseUserNotValid</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0841191416237079661</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08106139B9EC24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10016_RightsTokenUpdate_FUNC_RTL_With_Capital AccountId" searchProperties="true" id="bf9b340c-87a7-46c6-9fe7-29a0cb735c99">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="3904875d-c25a-4587-8181-c2e368648c1c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="a655f4c1-714e-4012-9cac-a3a419a4346d">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="6d85a225-c7d7-479c-99c2-3c55ae70b0bd"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="028b7e68-f612-4369-9068-1650507f56e8"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="518da406-0be4-43bd-935d-0b33ed33b339"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="4a5b6f4c-212a-4965-b746-b8c83af5cb76"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="107a9775-729d-4120-ac0a-8ee61bca59ff">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="088d597f-3d26-4e10-bb58-752f93762492">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","URN:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","urn:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="7f39ca82-a2cd-4c2c-a531-1353411940f8">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="e8cc43ee-f320-43c6-8902-d6b52d446844">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="3de8b774-1010-4691-97d8-bab19c047a10">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="14d6dd29-1c54-424d-8a70-256db44e2892">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106C6500BD21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbZcuo4EP0VynlMeZHBLK5AFWHJECDkBpJJ5WVKkdqgXCODJbPk669kwMFkGWaeXGq3uk93Hx3pSuB56PpNISCWLOKFzTzkwk+tdSOJuR9hwYTP8RyEL4k/bg4Hvms5Pj5sMQq9dt34p1atIq8Er2bVLRfNEg0cs0bcwHQDVCxTWi0HVVCuQiTQ40JiLuuG66CSiZCJKhPk+ajsFx2rWC6/GIUniIWKrVwsx9iD2oi6MZNy4dv2er221kUriqe26zjIfh4OxmQGc2w0rnYVpYnixt6fWBQIhCGxSDS3r+yczxUV/phNOZZJDPtc9Ltcju3UbOVDBZteGNleoD0eROmyhXnEGcEhe8e6P0OQs4gWmuE0ipmczb8tAjk6sAkbYhJU4heGnYd2ZqAcwlhgU8ww2sd6gABi4AQKjw+9unFx3tTSrZMYcxFE8Vzkl/8ND/AVhNECqCkOZe2hnR/wi041roD4PU7CRLAV3GmyLjABsZ8mkPNDFe5jCNhmwIQi6EZodPYxvJPlrhttNgUh/8+AjoazC/KEwwQai9n6dhSGstUq0rtOdwub575XexqMXkk9BXDsnBqy0e6WJ6TMSLTb0Ww5mxWxH7ttVLsZVYLiUnq015FeKXm+H5RHl/fDrXfbCbeiImd3YUX2u/1Z5WU8smOgdxUbowhux53YFaX5xHunL4hPg9fgr6fNdoUqLwmbJhw3rx3591SSwbS8FHYtls37yfVw6YW/fl1S1OyP1fG7HpDVcBKQ0c3msvXSt9/fgvf1y8OW3jxJul30+WM9K+cIf952OPPj5PUNiDwsNQ167UJXTQnLn8VMWxg1g9TVX2jxERK4NBp6l9YOP1Fyx6ivZrhbO1XkVFCrVuy4bQ91Kh3HKzqVWg11nWa1i9yDyOxQnEBsRTxgOpeW3B1tfgZI5r4ATiE2V1GilE4YP0RsY4kLPf6gDkHEBUwiJc/oLQJ3CaJSdbevaFmWb7/dYhIn661RuIvkiI/iZiAhzotyNSfKD0DYgoFWbk1soZgtpGrGEq8SGSJrhS0OidL2WMus75aqni3YfBGChmrPI5qEYC1mi7Q1tth9XRMTkVofOpP0uH1b2Om/Qw+UD2XaQeharkHNEb64XdxDId8W7KLjgg/hmwll+mSphsqYkR2S/K8PnmiCZCRRFR0gZ56nhlxU+7SgLBFdMZIxPbuvlYyrg984jGOJraWVrFZJOoCKFrhYhVeqgzzbce0xkERJ03YS/QZuZ1Hss+6BDPhJ8syeh5jIGR9LLGGuGFNIl2dc/GMQ+uLvKa5vzn1V5FKq1knYyK9srVA9WjTiH981xCfaT5nv1WcdxfRjYl/EOsqj6lT3vmR8qlf6Dth+wwsSqbBMqVcUHwf/KsBXyfPGrMkZFqkI9ZpI+P5PQctS3cCERAmXvbaRGo6lMsUptwvwP5w+hUnVOHuesX9/n5kspQBRT0Hln8bXt6yvjwCfHsntPump4pZbZc9xrlsuapdTxfV2itvsutWsKTl0jU/mz5ajPp1yvPEH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_988154eb-8263-4df0-9c2f-2f136dd86f8e</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08106C65014921D6E05305991F0AAF28</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>URN:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1797</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08106C65014921D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0847161416237436056</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081071C93E2E51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10017_RightsTokenUpdate_FUNC_RTL_With_Capital UserId" searchProperties="true" id="628acd78-7f45-42f6-ba42-6372c692a8ea">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="7d21489d-b8a3-4cd9-bd41-ad9eba419832"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="77cc5d2b-2dc1-4089-ab47-3e4e8b6708d5">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="830db72b-31dd-4267-876b-2ab97bdc0ba9"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="1c6def59-ca95-4cd7-9d58-f9d07edf6e92"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="d8f03581-fb0b-44db-8065-79fb45a176bd"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="942aeee0-89e2-4b18-b3dc-0fad571cb35a"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="5b18609d-0509-4600-8105-d34f9eb37ad3">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="19216040-b28a-4596-8a48-a0f12d4c8557">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","URN:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="f15ec961-9108-4001-a90c-46637e5c39a3">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="e012fb84-7ab3-4b86-b747-7bcf91a877d1">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="99c61e18-3b39-40e7-bd9e-e959b827ed14">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="823d7107-0351-4a21-b401-1b3e176fdbdb">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106119170228C9E05307991F0AB846</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZtc6o6EP4rDudjh5cgiDDVGd9666l9uWJb2y93YoiaFgKSoNZffxJUKrb2eu8nJstm99ndJ09yyWAUml6LMZxyEtPKOgop83JrQ8lS6sWQEeZRGGHmceT5rduBZ2qGB/dblEq/21D+AbhmI6tmq+YE1FRrYpuqa9Ud1TbcaWAhx4TIFq6MZbhPGYeUNxTTAJYKgAqcEbA9YHhVW7Od6qtSecIpE7GFi2YoO1Br1lDmnCeerq9WK21V1eJ0ppuGAfTx7cBHcxxBpXm5rShPlDZ3/kgLMMJhiDQUR/qlXvK5DJjnkxmFPEvxLldwKpehG64ufAJGZr+UYi8O+nQa58sOpDElCIZkA2V/bjGfx0GlFc7ilPB5dLIIYMjAKl4jFQGL/lL0MrQzA5UQpgyqbA7BLtYQT3GKKcKVx2G/ofw6b2r51lEKKZvGacTKy/+GB9MlDuMEByrbl7WDdn7AbzrVvMTI61MUZows8Z0kawIRZrtpYnR+qMpDiqdkPSBMEHTNJDr9EN7RctuNLplhxv/PgA6Gsw3yBMMMN613e5NZN8Y64Xds/bKeg1YXXbcXfwezRg7g0Dk3FKPdLo9IWZBou8Nng+pLZNk+ub99n6SjZytB0wmY29cPqP5B2MgASbJub2Jn2v5rsXh8c2lnDGpz40l/Du7Hi876+ffNGyCc2+58oA98aiyuL6IXaxw5g96w2o+vei9CHvz6ze8L94nOb5zNc225HD+R26x3V3ciOgEXfqfW0x2r2jKqr+PNYzR+q06CMZ7d+SCE/kscZN1Xo1GUc4C/bNufeT+bvGHE90tJg363ciWmBPnPYiYtJFCnuauXSPFhHFOuNOUuqR1eJuSOBJ6Y4XZt1IFRA1W37fbapnXV7hl21XBcF1wZLbfWtvcis0VxBLET0ymRuaTkbmnzM0AUeQzTAKfqMs6E0jHlh4hdyGGlT4fiEMSU4VEs5DlzAjec1TYfq5CAabByQpguphbCSuUu5vf0Pm1NOU7LmlwvafIQI5IQLIVb8poJYjMuerGAy4yHQFtCjeJMSHsqVdYzrbqtMxIlIZZI9UjMM8RaMk/yzuhs+zVViFhuHfZG+Wk7Wdfxv30LhE9ApAOTtbSxGCP+5nIx94WcLNgEhwXvw7eygMiDJfrJU4K2SMq/Pmki+VFwRFS0h1x4HhtKUfXjgopEwZKggujFdS1UXJz75n4cC6gttGy5zPIBOFLfUhFeiA6wdcPUfYwyoUwfo/gdU72Iop91DRTAj5IX9jLEjM+pzyHHkWBMJV+ece/7mMl7vy+ovj73UVFKKVrH8Zp/Z+uE4s0iEf/4rEEekn7C/CA+qzgNPif2TayDPKJOce1zQmdyJa+AjxO8QLEIS4R4xelh8O8CfJe8bCyaXGDhglCTjOPTfypSlRoKRCjOKO93ldxwqJQ5Tv6RYO/T6UuYXIyL1xn59+eZSnIKSNUR/nl8ecl68gjQ2YHa7pJ+FVzgAscAZr3jHgpuu27ViqaU0DW/mL9aDvp0zPHmHw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_1e65c465-2b16-4b52-9487-509fd4c72ac5</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106119170128C9E05307991F0AB846</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>0810614B2F6C0568E05305991F0A60ED</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2336</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseAccountNotValid">
      <dece:Reason Language="en">The purchase account ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseAccountNotValid</dece:ErrorLink>
   </dece:Error>
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseUserNotValid">
      <dece:Reason Language="en">The purchasing member's user ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseUserNotValid</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0841191416237079661</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08106139B9EC24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10018_RightsTokenUpdate_FUNC_RTL_With_Mixed AccountId" searchProperties="true" id="f0cc6182-a6bc-4d12-8956-109e492bdbed">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="d0cbda61-8e52-4ee5-a758-f0a73ef82646"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="42a7bb80-f59a-4064-a36d-7422e1668d69">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="81271b29-0f30-4578-9395-3dcf02ac4b9e"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="21de60f1-652a-4342-9676-7081218c3416"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="ac037235-072e-41d0-9e93-3f8c230e8fd8"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="fc059339-3009-468d-a2d3-20d506295904"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="02b1e5fb-2e14-4e7f-b0ce-dd888f0bd9fb">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="7ef7dbeb-47a9-4ac5-a830-bbda024f9d0c">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:Dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","urn:dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="87f8e010-9368-4ee0-97df-6eeec5ce99bb">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="c78b166e-f494-424e-a4b5-ae7776687e8f">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="3507f916-fead-4d7c-bcb2-b3f475717849">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="e9452ba0-ffad-45f1-9da7-b2281207d65c">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106C6500BD21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVbZcuo4EP0VynlMeZHBLK5AFWHJECDkBpJJ5WVKkdqgXCODJbPk669kwMFkGWaeXGq3uk93Hx3pSuB56PpNISCWLOKFzTzkwk+tdSOJuR9hwYTP8RyEL4k/bg4Hvms5Pj5sMQq9dt34p1atIq8Er2bVLRfNEg0cs0bcwHQDVCxTWi0HVVCuQiTQ40JiLuuG66CSiZCJKhPk+ajsFx2rWC6/GIUniIWKrVwsx9iD2oi6MZNy4dv2er221kUriqe26zjIfh4OxmQGc2w0rnYVpYnixt6fWBQIhCGxSDS3r+yczxUV/phNOZZJDPtc9Ltcju3UbOVDBZteGNleoD0eROmyhXnEGcEhe8e6P0OQs4gWmuE0ipmczb8tAjk6sAkbYhJU4heGnYd2ZqAcwlhgU8ww2sd6gABi4AQKjw+9unFx3tTSrZMYcxFE8Vzkl/8ND/AVhNECqCkOZe2hnR/wi041roD4PU7CRLAV3GmyLjABsZ8mkPNDFe5jCNhmwIQi6EZodPYxvJPlrhttNgUh/8+AjoazC/KEwwQai9n6dhSGstUq0rtOdwub575XexqMXkk9BXDsnBqy0e6WJ6TMSLTb0Ww5mxWxH7ttVLsZVYLiUnq015FeKXm+H5RHl/fDrXfbCbeiImd3YUX2u/1Z5WU8smOgdxUbowhux53YFaX5xHunL4hPg9fgr6fNdoUqLwmbJhw3rx3591SSwbS8FHYtls37yfVw6YW/fl1S1OyP1fG7HpDVcBKQ0c3msvXSt9/fgvf1y8OW3jxJul30+WM9K+cIf952OPPj5PUNiDwsNQ167UJXTQnLn8VMWxg1g9TVX2jxERK4NBp6l9YOP1Fyx6ivZrhbO1XkVFCrVuy4bQ91Kh3HKzqVWg11nWa1i9yDyOxQnEBsRTxgOpeW3B1tfgZI5r4ATiE2V1GilE4YP0RsY4kLPf6gDkHEBUwiJc/oLQJ3CaJSdbevaFmWb7/dYhIn661RuIvkiI/iZiAhzotyNSfKD0DYgoFWbk1soZgtpGrGEq8SGSJrhS0OidL2WMus75aqni3YfBGChmrPI5qEYC1mi7Q1tth9XRMTkVofOpP0uH1b2Om/Qw+UD2XaQeharkHNEb64XdxDId8W7KLjgg/hmwll+mSphsqYkR2S/K8PnmiCZCRRFR0gZ56nhlxU+7SgLBFdMZIxPbuvlYyrg984jGOJraWVrFZJOoCKFrhYhVeqgzzbce0xkERJ03YS/QZuZ1Hss+6BDPhJ8syeh5jIGR9LLGGuGFNIl2dc/GMQ+uLvKa5vzn1V5FKq1knYyK9srVA9WjTiH981xCfaT5nv1WcdxfRjYl/EOsqj6lT3vmR8qlf6Dth+wwsSqbBMqVcUHwf/KsBXyfPGrMkZFqkI9ZpI+P5PQctS3cCERAmXvbaRGo6lMsUptwvwP5w+hUnVOHuesX9/n5kspQBRT0Hln8bXt6yvjwCfHsntPump4pZbZc9xrlsuapdTxfV2itvsutWsKTl0jU/mz5ajPp1yvPEH</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_988154eb-8263-4df0-9c2f-2f136dd86f8e</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>08106C65014921D6E05305991F0AAF28</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>URN:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:08106C6500BC21D6E05305991F0AAF28</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081071C93E2D51E7E05307991F0A8F12</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106C6500C421D6E05305991F0AAF28</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1797</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:08106C65014921D6E05305991F0AAF28</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0847161416237436056</con:value></con:property><con:property><con:name>useroid</con:name><con:value>081071C93E2E51E7E05307991F0A8F12</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_10019_RightsTokenUpdate_FUNC_RTL_With_Mixed UserId" searchProperties="true" id="37fac7d7-fc5a-47e1-86f6-bea2da07b042">
      <con:description>The test case is to Update the rightstoken with RightsTokenUpdate API .
Verify that the Account information and Rightstoken information.
Ensure all required field is included in the Update request. Send the RightsTokenUpdate API transaction. 
Verify that the token has been Updated successfully and that it contains the ID for the Updated rights token.

Expected Result :

Response-Code: 200</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Set Node Role" disabled="true" id="065fb1a6-0467-44e0-a41b-343af389193b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8ac29158-abbd-4252-9afe-036460d17b57</con:targetTestCase><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name></con:property><con:property><con:name>Node_OID</con:name><con:value>${#Project#Node_OID}</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep>
      <con:testStep type="groovy" name="Reset User Credentials" id="3251edb7-69b5-4a31-b04c-dfb7494f1a89">
        <con:settings/>
        <con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username","");
testCase.setPropertyValue("password","");
testCase.setPropertyValue("assertXML","");
testCase.setPropertyValue("assert","");
testCase.setPropertyValue("assertId","");
testCase.setPropertyValue("assertionAccountId","");
testCase.setPropertyValue("assertionUserId","");
testCase.setPropertyValue("assertionAccountIdFULL","");
testCase.setPropertyValue("assertionUserIdFULL","");
testCase.setPropertyValue("rightstokenid","");
testCase.setPropertyValue("DBrightstokenid","");
testCase.setPropertyValue("accountoid","");
testCase.setPropertyValue("useroid","");
testCase.setPropertyValue("RightsLockerID","");
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node RETAILER" id="da8d61a7-903d-46e5-b6a9-11c50f352673"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",testProject.getPropertyValue("nodeIdRTL"));



</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Create_Account_User_STS" id="966b4128-844c-40b5-9619-ad81e2ca85ff"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


log.info testCase.getName();

testCase.setPropertyValue("nodetype","retailer");
//testCase.setPropertyValue("nodeid",testProject.getPropertyValue("NodeID"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("loopuntil","25");
testCase.setPropertyValue("expectErrTypeSTS","SUCCESS");
testCase.setPropertyValue("expectErrTypeSTSGet","SUCCESS");

def RTCRequest = testProject.getTestSuiteByName("E2E_TestCases");
RTCRequest.setPropertyValue("country","US");

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;




</script></con:config></con:testStep>
      <con:testStep type="groovy" name="SetUp User Credentials" id="edf80175-5475-4ae4-9c8e-1d110a3fd0bf"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
accountID = testProject.getPropertyValue("accountOID");
rightsLockerID = testProject.getPropertyValue("rightsLockerID");


myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;
userID = testProject.getPropertyValue("userOID");

testCase.setPropertyValue("username",testProject.getPropertyValue("UserName"));
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("assertXML",testProject.getPropertyValue("assertXML"));
testCase.setPropertyValue("assert",testProject.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testProject.getPropertyValue("assertId"));
testCase.setPropertyValue("assertionAccountId",testProject.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("assertionUserId",testProject.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("assertionAccountIdFULL",testProject.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",testProject.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("accountoid",accountID);
testCase.setPropertyValue("useroid",userID);
testCase.setPropertyValue("RightsLockerID",rightsLockerID);
testProject.setPropertyValue("useroid",userID);</script></con:config></con:testStep>
      
      
      <con:testStep type="groovy" name="Set Account and User Status Active" disabled="true" id="ee86c5d7-572d-4ee8-bb10-db91d17fa9c6"><con:settings/><con:config><script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

//accountID = testProject.getPropertyValue("accountOID");
//log.info "accountID-->"+accountID
//USerID = callingTCase.getPropertyValue("useroid");
//testCase.setPropertyValue("AccountOid",accountID.toString());

//UserSetStatus = callingTCase.getPropertyValue("UserStatus");



assert myAccount.accountSetStatus(testCase.getPropertyValue("accountoid"),"active");
assert myUser.userSetStatus(testCase.getPropertyValue("useroid"),"active");

//log.info UserStatus.toString();

//testCase.setPropertyValue("UserStatus",UserStatus.toString());
//callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script></con:config></con:testStep>
      <con:testStep type="groovy" name="Verify RightsToken ID to Update" id="062d4254-d50a-4a92-bfb1-12f2e23bdae3">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def RTGRequest = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("RightsToken-Generation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

mydb = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def rtStatus = mydb.rightstokenGetStatus(testCase.getPropertyValue("DBrightstokenid"));
def rtDBinfo = mydb.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
def RT_Data5 = mydb.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());
testCase.setPropertyValue("rtDBinfo",rtDBinfo.toString());
log.info rtStatus;

		if ( rtStatus.toString()!='active'){
			log.info "Calling RightsToken Create API for a new RightsToken !"
			def runnerRTG = RTGRequest.run( null , false )
			assert runnerRTG.status == Status.FINISHED;
		}
		else{
			log.info "Rights Tokenid  is Valid :" + testCase.getPropertyValue("rightstokenid");
			def Val_DbResultRTSHXml =  new XmlSlurper().parseText(RT_Data5.toString());
			def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
			testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());
						
		}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Feed RightsTokenUpdate Request with Valid Data" id="69d86fee-03a5-4b10-9c1a-1632e699b15f">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT");

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTUReq"));

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');
testCase.setPropertyValue("CID","URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt");
testCase.setPropertyValue("nodeid","Ret");


testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("RightsLockerID","urn:dece:rightslockerid:org:dece:"+testProject.getPropertyValue("rightsLockerID"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsBundleID","");
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.GOOGLE.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.BESTBUY.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/DDD");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount","urn:dece:accountid:org:dece:"+testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("PIPurchaseUser","urn:Dece:userid:org:dece:"+testCase.getPropertyValue("assertionUserId"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("expectErrTypeRTUpdate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
//testCase.setPropertyValue("rcRTStatusHistory",null);</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Call RightsToken Update Request" id="03eec8c6-5651-42a6-8bb3-bb1206aa67cd">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Get Information on RightsToken Updated" id="f1071f3a-caeb-4c05-bf74-e8bbec019f41">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-UpdateWithoutAccountId Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify RightsTokenUpdate RESPONSE" id="293ac7a6-cc22-450a-9df2-30ca7ab6e956">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTresponseVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Response Validation")

RTresponseVal.setPropertyValue("TCaseName",testCase.getName());
RTresponseVal.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTresponseVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify DB with Updated RightsTokenData" id="89681338-ba7c-4719-b080-41f32192649d">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTUdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights UPDATEWithoutAccId  Data Validation");

RTUdataVal.setPropertyValue("TCaseName",testCase.getName());
RTUdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTU = RTUdataVal.run( null , false )

assert runnerRTU.status == Status.FINISHED;</script></con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>08106119170228C9E05307991F0AB846</con:value></con:property><con:property><con:name>AccountStatus</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>AccountStatusXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>assert</con:name><con:value>nVZtc6o6EP4rDudjh5cgiDDVGd9666l9uWJb2y93YoiaFgKSoNZffxJUKrb2eu8nJstm99ndJ09yyWAUml6LMZxyEtPKOgop83JrQ8lS6sWQEeZRGGHmceT5rduBZ2qGB/dblEq/21D+AbhmI6tmq+YE1FRrYpuqa9Ud1TbcaWAhx4TIFq6MZbhPGYeUNxTTAJYKgAqcEbA9YHhVW7Od6qtSecIpE7GFi2YoO1Br1lDmnCeerq9WK21V1eJ0ppuGAfTx7cBHcxxBpXm5rShPlDZ3/kgLMMJhiDQUR/qlXvK5DJjnkxmFPEvxLldwKpehG64ufAJGZr+UYi8O+nQa58sOpDElCIZkA2V/bjGfx0GlFc7ilPB5dLIIYMjAKl4jFQGL/lL0MrQzA5UQpgyqbA7BLtYQT3GKKcKVx2G/ofw6b2r51lEKKZvGacTKy/+GB9MlDuMEByrbl7WDdn7AbzrVvMTI61MUZows8Z0kawIRZrtpYnR+qMpDiqdkPSBMEHTNJDr9EN7RctuNLplhxv/PgA6Gsw3yBMMMN613e5NZN8Y64Xds/bKeg1YXXbcXfwezRg7g0Dk3FKPdLo9IWZBou8Nng+pLZNk+ub99n6SjZytB0wmY29cPqP5B2MgASbJub2Jn2v5rsXh8c2lnDGpz40l/Du7Hi876+ffNGyCc2+58oA98aiyuL6IXaxw5g96w2o+vei9CHvz6ze8L94nOb5zNc225HD+R26x3V3ciOgEXfqfW0x2r2jKqr+PNYzR+q06CMZ7d+SCE/kscZN1Xo1GUc4C/bNufeT+bvGHE90tJg363ciWmBPnPYiYtJFCnuauXSPFhHFOuNOUuqR1eJuSOBJ6Y4XZt1IFRA1W37fbapnXV7hl21XBcF1wZLbfWtvcis0VxBLET0ymRuaTkbmnzM0AUeQzTAKfqMs6E0jHlh4hdyGGlT4fiEMSU4VEs5DlzAjec1TYfq5CAabByQpguphbCSuUu5vf0Pm1NOU7LmlwvafIQI5IQLIVb8poJYjMuerGAy4yHQFtCjeJMSHsqVdYzrbqtMxIlIZZI9UjMM8RaMk/yzuhs+zVViFhuHfZG+Wk7Wdfxv30LhE9ApAOTtbSxGCP+5nIx94WcLNgEhwXvw7eygMiDJfrJU4K2SMq/Pmki+VFwRFS0h1x4HhtKUfXjgopEwZKggujFdS1UXJz75n4cC6gttGy5zPIBOFLfUhFeiA6wdcPUfYwyoUwfo/gdU72Iop91DRTAj5IX9jLEjM+pzyHHkWBMJV+ece/7mMl7vy+ovj73UVFKKVrH8Zp/Z+uE4s0iEf/4rEEekn7C/CA+qzgNPif2TayDPKJOce1zQmdyJa+AjxO8QLEIS4R4xelh8O8CfJe8bCyaXGDhglCTjOPTfypSlRoKRCjOKO93ldxwqJQ5Tv6RYO/T6UuYXIyL1xn59+eZSnIKSNUR/nl8ecl68gjQ2YHa7pJ+FVzgAscAZr3jHgpuu27ViqaU0DW/mL9aDvp0zPHmHw==</con:value></con:property>
        
        <con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value>_1e65c465-2b16-4b52-9487-509fd4c72ac5</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>08106119170128C9E05307991F0AB846</con:value></con:property>
        
        <con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property>
        
        
        
        <con:property><con:name>assertionUserId</con:name><con:value>08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_a50de6e4-c2c5-4169-83c0-5400256061e9</con:value></con:property>
        <con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>0810614B2F6C0568E05305991F0A60ED</con:value></con:property>
        
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTUreate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>expectErrTypeSTS</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTSGet</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property>
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/DDD</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.BESTBUY.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property>
        
        
        
        
        
        
        <con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.GOOGLE.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value>25</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>Ret</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        <con:property><con:name>rcUUID</con:name><con:value>1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.GOOGLE.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/DDD</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:Ret</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:urn:dece:userid:org:dece:08106139B9EB24FBE05307991F0A96B5</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:08106119170928C9E05307991F0AB846</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2336</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseAccountNotValid">
      <dece:Reason Language="en">The purchase account ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseAccountNotValid</dece:ErrorLink>
   </dece:Error>
   <dece:Error ErrorID="urn:dece:errorid:org:dece:PurchaseUserNotValid">
      <dece:Reason Language="en">The purchasing member's user ID is not valid.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:08106119170128C9E05307991F0AB846/RightsToken/urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#PurchaseUserNotValid</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:0810614B2F6C0568E05305991F0A60ED</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:Ret</con:value></con:property>
        
        
        
        <con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>rtDBinfo</con:name><con:value>&lt;Results>
  &lt;ResultSet fetchSize='10' />
&lt;/Results></con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLExpDate</con:name><con:value>2013-06-06 09:12:06.0</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        
        
      <con:property><con:name>SqlStr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141117_0841191416237079661</con:value></con:property><con:property><con:name>useroid</con:name><con:value>08106139B9EC24FBE05307991F0A96B5</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>CID</con:name><con:value>URN:DECE:CID:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>ac66b9fa-3822-44b5-893c-bbe30abba7c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78a6dea0-0886-4ce5-af9b-c74fd9a811aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d958a884-fd8f-4fd6-8e80-afaccc0d0ffd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d074afac-ee6c-43cb-a742-f451575cd284</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5dd025eb-4742-4b74-8ce7-be641e53d421</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282756a1-8d2c-4d3e-bd9d-df053db618d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/>
    <con:reportParameters/>
  </con:testSuite><con:testSuite name="Setup" id="8f00be04-a957-4a6f-a699-59ad2730b70e" disabled="true"><con:description/><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AccName_Gen" searchProperties="true" id="a1bf6cdf-c2ab-40c5-a270-219bf4d5ea7d"><con:settings/><con:testStep type="datagen" name="AccName" id="eddadaf4-3602-4934-bc5f-f07b7ed77ed3"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="Script"><con:configuration><script>def today= "Rights_Account_" + new Date().format( 'yyyyMMdd_hhmms' )+ System.currentTimeMillis();

return today; 
</script></con:configuration><con:name>AccName</con:name><con:mode>READ</con:mode><con:shared>true</con:shared></con:property></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="025bf66d-a1b6-46ac-8dc1-6ae39a075f85"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>DisplayName</con:name><con:sourceType>AccName</con:sourceType><con:sourceStep>AccName</con:sourceStep><con:targetType>AccountDisplayName</con:targetType><con:targetStep>#Project#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Node_Setup" searchProperties="true" id="8ac29158-abbd-4252-9afe-036460d17b57"><con:settings/><con:testStep type="jdbc" name="Update_Node_Role" id="eaf2976c-54ce-4aa7-af2d-8d524b6a33d6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" maxRows="" fetchSize="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${#Project#JDBCDriver}</con:driver><con:connectionString>${#Project#JDBCConnStr}</con:connectionString><con:password/><con:query>update NODE_ROLE set ROLE = '${#TestCase#Node_Value}' where NODE_OID = '${#Project#Node_OID}'</con:query><con:storedProcedure>false</con:storedProcedure><con:assertion type="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>Node_OID</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Account_Delete" searchProperties="true" id="46856f29-9ede-4855-bb1b-b97eda1e3f82"><con:settings/><con:testStep type="jdbc" name="Delete_Account" id="21f09036-1bbe-4dfc-bfd4-58e586541bc7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" maxRows="" fetchSize="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${#Project#JDBCDriver}</con:driver><con:connectionString>${#Project#JDBCConnStr}</con:connectionString><con:password/><con:query>DECLARE
accountid ACCOUNT.ACCOUNT_OID%TYPE;
newsfeedid NEWSFEED_EVENT.NEWSFEED_EVENT_OID%TYPE;
BEGIN
select ACCOUNT_OID into accountid from NODE_ACCOUNT where NODE_ACCOUNT_ID = '${#Project#NODEACCID}';
--select NEWSFEED_EVENT_OID into newsfeedid from NEWSFEED_EVENT where ACCOUNT_OID = accountid;
delete from RIGHTS_LOCKER where ACCOUNT_OID = accountid;
delete from NODE_ACCOUNT where ACCOUNT_OID = accountid;
delete from DRM_DOMAIN where ACCOUNT_OID = accountid;
delete from ACCOUNT_STATUS_HISTORY where ACCOUNT_OID = accountid;
--delete from NEWSFEED_PARM_VAL where NEWSFEED_EVENT_OID = newsfeedid;
--delete from NEWSFEED_EVENT where ACCOUNT_OID = accountid;
delete from ACCOUNT where ACCOUNT_OID = accountid;
END;</con:query><con:storedProcedure>false</con:storedProcedure><con:assertion type="JDBC Status"/><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>ACCID</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get_User_Details" searchProperties="true" id="386e587c-c7bc-44d8-93a5-4c104c98dc5f"><con:settings/><con:testStep type="groovy" name="Groovy Script" id="a72e37c1-9788-46a4-b754-64e665e913a5"><con:settings/><con:config><script>String userid;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def targetHost = testProject.getPropertyValue("targetHost");
//def nodeaccountId = testCase.getPropertyValue("nodertraccountid");

def a = testRunner.testCase.getTestStepByName('User_Create').httpRequest.response.responseHeaders["Content-Location"];
def b = a.toURL();
def urlStr = b.getPath();

//Assert the hostname in the URL is correct
//assert b.getHost().matches(targetHost.toString());
//Assert the protocol is correct
//assert b.getProtocol().matches("https");
//Assert the URI is correct
//assert b.getPath().matches("/dece/Account/urn:dece:accountid:org:dece:[0-9]*" );
//this.log.info "b is " + b.getPath();


//this.log.info "urlStr is " +urlStr;

int lastSlash = urlStr.lastIndexOf(':');
accountid = urlStr.substring(lastSlash + 1);

//this.log.info "lastSlash is " +lastSlash + "and user id is " + userid ;

testProject.setPropertyValue("NODEUSERID",userid);
</script></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="UserName_Gen" searchProperties="true" id="53d870c8-fd8c-4be2-8211-40b09d9015fa"><con:settings/><con:testStep type="datagen" name="UserName" id="ab49dede-053d-4c1d-ae35-448a7c26793a"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="Script"><con:configuration><script>def today= "Rights_TokenUpdate_User_" + new Date().format( 'yyyyMMdd_hhmms' )+ System.currentTimeMillis();

return today; 
</script></con:configuration><con:name>UserName</con:name><con:mode>READ</con:mode><con:shared>true</con:shared></con:property></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="635fd133-93cd-4bc1-80bb-f2b6165a1469"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>DisplayName</con:name><con:sourceType>UserName</con:sourceType><con:sourceStep>UserName</con:sourceStep><con:targetType>UserName</con:targetType><con:targetStep>#Project#</con:targetStep></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>Node_Value</con:name><con:value>urn:dece:role:dece</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Delete" searchProperties="true" id="eadddc6a-4830-4bdd-b126-b5fb31833aec"><con:settings/><con:testStep type="jdbc" name="Delete_User" id="0d39da84-9ab1-4595-af23-f4e04d951a0a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" maxRows="" fetchSize="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${#Project#JDBCDriver}</con:driver><con:connectionString>${#Project#JDBCConnStr}</con:connectionString><con:password/><con:query>DECLARE
MyAccount ACCOUNT.ACCOUNT_OID%TYPE;
MyUser ACCOUNT_USER.USER_OID% TYPE;
num NUMBER;
BEGIN
SELECT count(*) into num FROM ACCOUNT_USER where ACCOUNT_OID = (select ACCOUNT_OID from NODE_ACCOUNT where NODE_ACCOUNT_ID = '${#Project#NODEACCID}');
IF (num > 0)
THEN
for MyUser in (SELECT USER_OID FROM ACCOUNT_USER where ACCOUNT_OID= (select ACCOUNT_OID from NODE_ACCOUNT where NODE_ACCOUNT_ID = '${#Project#NODEACCID}'))
LOOP
Select ACCOUNT_OID into MyAccount from ACCOUNT_USER where USER_OID = MyUser.USER_OID;
--delete from node_user_saml_assertion where NODE_USER_OID = (select NODE_USER_OID from node_user where USER_OID = MyUser.USER_OID) ;
delete from node_user where USER_OID = MyUser.USER_OID;
delete from user_address where USER_OID = MyUser.USER_OID;
delete from user_alt_email where USER_OID = MyUser.USER_OID;
delete from user_language where USER_OID = MyUser.USER_OID;  
delete from user_status_history where USER_OID = MyUser.USER_OID;
delete from user_security_questions where USER_OID = MyUser.USER_OID;
delete from email_notification where USER_OID = MyUser.USER_OID;
delete from account_user_avatar where USER_OID = MyUser.USER_OID;
delete from NEWSFEED_PARM_VAL where NEWSFEED_EVENT_OID in (select NEWSFEED_EVENT_OID from NEWSFEED_EVENT where ACCOUNT_OID = 
MyAccount);
delete from NEWSFEED_EVENT where ACCOUNT_OID = MyAccount;
delete from account_user where USER_OID = MyUser.USER_OID;
commit;
END LOOP;
END IF;
END;
</con:query><con:storedProcedure>false</con:storedProcedure><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>synced</con:name><con:value>true</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set_PEM" searchProperties="true" id="b70068a2-925f-4f73-a2da-490e7db455b7"><con:settings/><con:testStep type="groovy" name="Set_Pem_File" id="f783981e-1568-41e3-a1c6-2e4d5a7387c8"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase    = testRunner.getTestCase();
def testSuite   = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep testStep = testCase.getTestStepByName("RightTokenUpdateRequest PUT");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {
	case "222259":
		keyStorePath = "/opt/dece/certs/222259_concat.pem";
	break;
	case "0798":
		keyStorePath = "/opt/dece/certs/0798_concat.pem";
	break;
	case "0701":
		keyStorePath = "/opt/dece/certs/0701_concat.pem";
	break;
	case "0702":
		keyStorePath = "/opt/dece/certs/0702_concat.pem";
	break;
	}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);

soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="Common Test Steps" id="0daac593-073e-456c-b0fc-c85811fa2ab9" disabled="true">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:properties/>
    <con:reportParameters/>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract RightsToken-Create Information" searchProperties="true" id="2f2d48c5-d130-4986-b9e6-b083f0a225c0">
      <con:settings/>
      <con:testStep type="groovy" name="Extract RightsToken Request XML" id="c0846f1d-c845-4a48-a9d0-c5be6cffc817">
        <con:settings/>
        <con:config>
          <script>import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

def RT_RequestBody = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest").getTestStepByName("RightsTokenCreate Request POST").testRequest.response.rawRequestData;

def rawData = new String(RT_RequestBody);
log.info rawData.toString(); 
testCase.setPropertyValue("RightsReqXml",rawData.tokenize('\n').last());

log.info testCase.getPropertyValue("RightsReqXml");
callingTCase.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract RightsToken Info from the Response" id="3b09395d-2dcb-415a-87c3-479b4dc98e8e">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName)

def RightsResHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest").getTestStepByName('RightsTokenCreate Request POST').httpRequest.response.getResponseHeaders(); 
def RightsResXml = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest").getTestStepByName('RightsTokenCreate Request POST').httpRequest.response.getContentAsString();
def RightsResTime = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest").getTestStepByName('RightsTokenCreate Request POST').httpRequest.response.getTimeTaken();
def RightsResHttpStatus = RightsResHeader.getAt("#status#");
def RightsResLocation = RightsResHeader.getAt("Location");
log.info RightsResHttpStatus[0];
log.info RightsResLocation;

log.info "Response Time : $RightsResTime:ms";

testCase.setPropertyValue("RightsResXml",RightsResXml);
testCase.setPropertyValue("RightsResTime",RightsResTime.toString());

if(RightsResHttpStatus[0] == "HTTP/1.1 201 Created")
{
def RTKLoc = RightsResLocation[0].tokenize('/')
log.info RTKLoc[RTKLoc.indexOf("RightsToken").next()];
/*testCase.setPropertyValue("rightstokenid",RTKLoc[RTKLoc.indexOf("RightsToken").next()] );
log.info RTKLoc[RTKLoc.indexOf("Account").next()];
testCase.setPropertyValue("Accountid",RTKLoc[RTKLoc.indexOf("Account").next()]);*/

def decodedRTKLoc = URLDecoder.decode(RTKLoc[RTKLoc.indexOf("RightsToken").next()],"UTF-8");
log.info "decodedRTKLoc=="+decodedRTKLoc;

testCase.setPropertyValue("rightstokenid",decodedRTKLoc);

log.info RTKLoc[RTKLoc.indexOf("Account").next()];
def decodedAccountIDLoc = URLDecoder.decode(RTKLoc[RTKLoc.indexOf("Account").next()],"UTF-8");
log.info "decodedAccountIDLoc=="+decodedAccountIDLoc;
testCase.setPropertyValue("Accountid",decodedAccountIDLoc);

//com.eviware.soapui.support.UISupport.showInfoMessage("RightsToken has been Created"); 
}
else{
log.info " RightsToken Create failed - [ " + RightsResHttpStatus[0] + " ]"
}
// Returns Rights token , Account id
testCase.setPropertyValue("DBrightstokenid",testCase.getPropertyValue("rightstokenid").tokenize(':').last());
callingTCase.setPropertyValue("rightstokenid",testCase.getPropertyValue("rightstokenid"));
callingTCase.setPropertyValue("DBrightstokenid",testCase.getPropertyValue("DBrightstokenid"));
callingTCase.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
callingTCase.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));
callingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));
//callingTCase.setPropertyValue("Accountid",testCase.getPropertyValue("Accountid"));</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>RightsToken-Generation</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>DBrightstokenid</con:name>
          <con:value>157E6F9FC7854D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>RightsReqXml</con:name>
          <con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">          <ns4:SoldAs>                     <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                       <ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:sd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>3</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID>                    <ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</ns4:PurchaseAccount>                        <ns4:PurchaseUser>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</ns4:PurchaseUser>                              <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>RightsResTime</con:name>
          <con:value>6679</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rights Create Data Validation" searchProperties="true" id="aeeb41fa-cc94-42c8-9531-db31d4c64f28">
      <con:settings/>
      <con:testStep type="groovy" name="Validate DB for RightsToken" id="955ff616-0cd0-4737-8ae4-1d8623087d92">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

mydbRights = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

testCase.setPropertyValue("RightsReqXml",CallingTCase.getPropertyValue("RightsReqXml"));

//getRequestContentAsXml

testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("DBrightstokenid",CallingTCase.getPropertyValue("DBrightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));


// Fetch RightsToken info from RIGHTS_TOKEN table
RT_Data = mydbRights.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
//RT_Data2 = mydbRights.rightstokenSoldAsGetRow(testCase.getPropertyValue("DBrightstokenid"));
//RT_Data3 = mydbRights.rightstokenPMPPGetRow(testCase.getPropertyValue("DBrightstokenid"));
//RT_Data4 = mydbRights.rightstokenFFLocGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data5 = mydbRights.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));
//log.info RT_Data2.toString(); 
log.info RT_Data.toString();

testCase.setPropertyValue("DbResultRTXml",RT_Data.toString());
testCase.setPropertyValue("DbResultRT_StatusHistoryXml",RT_Data5.toString());

//log.info testCase.getPropertyValue("DbResultRTXml");
//log.info testCase.getPropertyValue("RightsReqXml");

// Assert RightsToken Information Expected &amp; Actual 

def Val_DbResultRTXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRTXml"));
def Val_RightsReqXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsReqXml"));
def Val_DbResultRTSHXml =  new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT_StatusHistoryXml"));

def rcStatusHistory = Val_DbResultRTSHXml.ResultSet.Row.size();
testCase.setPropertyValue("RTC_rcStatusHistory",rcStatusHistory.toString());

// Assert RightsTokenID

assert Val_DbResultRTXml.ResultSet.Row.RIGHTS_TOKEN_OID == testCase.getPropertyValue("DBrightstokenid");

//Assert ALID information
assert  Val_DbResultRTXml.ResultSet.Row.ALID == Val_RightsReqXml.@ALID;

// Assert CID information 
assert  Val_DbResultRTXml.ResultSet.Row.CONTENT_ID == Val_RightsReqXml.@ContentID;

//Assert NodeID information
//Val_RightsReqXml.PurchaseInfo.NodeID 
assert  Val_DbResultRTXml.ResultSet.Row.NODE_OID.toInteger() == Val_RightsReqXml.PurchaseInfo.NodeID.toString().tokenize(':').last().toInteger();

log.info rcStatusHistory;
// return rc for Status History 

CallingTCase.setPropertyValue("RTC_rcStatusHistory",testCase.getPropertyValue("RTC_rcStatusHistory"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>RightsTokenCreate_With_Valid_AccountId</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>Staging Rights UPDATE</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>urn:dece:rightstokenid:org:dece:A278162235309856E0401F0A22225947F8</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value>urn:dece:accountid:org:dece:A1C0ED690DFF822FE0401F0A2222593D5E</con:value>
        </con:property>
        <con:property>
          <con:name>DBrightstokenid</con:name>
          <con:value>A278162235309856E0401F0A22225947F8</con:value>
        </con:property>
        <con:property>
          <con:name>DbResultRTXml</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_TOKEN_OID>A278162235309856E0401F0A22225947F8</RIGHTS_TOKEN_OID>
      <ACCOUNT_OID>A1C0C00EDD42CF8AE0401F0A0599345D</ACCOUNT_OID>
      <USER_OID>A1C0C00EDD47CF8AE0401F0A0599345D</USER_OID>
      <RIGHTS_LOCKER_OID>A1C0C00EDD45CF8AE0401F0A0599345D</RIGHTS_LOCKER_OID>
      <NODE_OID>222259</NODE_OID>
      <PURCHASE_NODE_ACCOUNT_OID>A1C0ED690DFF822FE0401F0A2222593D5E</PURCHASE_NODE_ACCOUNT_OID>
      <RETAILER_TRANSACTION>RetailerTransaction_1_node222259_RetailerNode</RETAILER_TRANSACTION>
      <PURCHASE_NODE_USER_OID>A1C0ED690E01822FE0401F0A2222593D5E</PURCHASE_NODE_USER_OID>
      <PURCHASE_TIME>2011-06-24 15:12:03.0</PURCHASE_TIME>
      <ALID>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</ALID>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <RENTAL_ABSOLUTE_EXPIRATION>null</RENTAL_ABSOLUTE_EXPIRATION>
      <RENTAL_DOWNLOAD_TO_PLAY_MAX>null</RENTAL_DOWNLOAD_TO_PLAY_MAX>
      <RENTAL_PLAY_DURATION_MAX>null</RENTAL_PLAY_DURATION_MAX>
      <LICENSE_ACQ_BASE_LOC>ns3.google.com</LICENSE_ACQ_BASE_LOC>
      <CREATED_DATE>2011-05-04 18:25:23.94</CREATED_DATE>
      <CREATED_BY>222259</CREATED_BY>
      <UPDATED_DATE>null</UPDATED_DATE>
      <UPDATED_BY>null</UPDATED_BY>
      <STATUS_ID>active</STATUS_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsReqXml</con:name>
          <con:value>&lt;/ns4:RightsTokenData></con:value>
        </con:property>
        <con:property>
          <con:name>DbResultRT_StatusHistoryXml</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_STATUS_HISTORY_OID>A2781622353D9856E0401F0A22225947F8</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>A278162235309856E0401F0A22225947F8</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>RightsToken has been created.</DESCRIPTION>
      <CREATED_DATE>2011-05-04 18:25:23.949</CREATED_DATE>
      <CREATED_BY_NODE_OID>222259</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>A1C0C00EDD47CF8AE0401F0A0599345D</CREATED_BY_USER_OID>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RTC_rcStatusHistory</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract RightsToken-Get Information OLD" searchProperties="true" id="278b0e4b-80c5-49a3-8235-f3bcf4098a05">
      <con:settings/>
      <con:testStep type="groovy" name="Extract RightsTokenGet Response" id="e7ac6236-4267-4c1d-8f62-8247af178516">
        <con:settings/>
        <con:config>
          <script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName)

// Http Header
def RightsResHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName('RightsTokenGet byTokenID').httpRequest.response.getResponseHeaders(); 
def RightsResXml = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName('RightsTokenGet byTokenID').httpRequest.response.getContentAsString();
def RightsResTime = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName('RightsTokenGet byTokenID').httpRequest.response.getTimeTaken();
def RightsResHttpStatus = RightsResHeader.getAt("#status#");

testCase.setPropertyValue("RightsResXml",RightsResXml);
testCase.setPropertyValue("RightsResTime",RightsResTime.toString());


// Rights Response Object type

def Val_RightsResXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsResXml"));
def Resp_RightTokenObj = Val_RightsResXml.RightsToken.children().collect{ it[0].name()};
testCase.setPropertyValue("RTObjType", Resp_RightTokenObj[0]);

// Evaluate RightsToken Success &amp; Failure

if(RightsResHttpStatus == "HTTP/1.1 200 OK")
{
log.info "Response Code : ${RightsResHttpStatus.toString()}";
log.info "Response Time : $RightsResTime:ms";
log.info "RightsObject Returned :"+ testCase.getPropertyValue("RTObjType");
}
else{
log.info " RightsToken Create failed - [ $RightsResHttpStatus ]"
log.info " Error Code Validation +++++ "
}
// Returns Rights Response Information
callingTCase.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
callingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));
callingTCase.setPropertyValue("RTObjType",testCase.getPropertyValue("RTObjType"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value><![CDATA[<RightsToken RightsTokenID="urn:dece:rightstokenid:org:dece:DE54A779803B3AB5E0401F0A2222594E23" xmlns="http://www.decellc.org/schema/2011/08/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RightsTokenFull ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt">
      <SoldAs>
         <DisplayName Language="en">Avatar BestBuy Special Packaging</DisplayName>
         <ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ContentID>
      </SoldAs>
      <RightsProfiles>
         <PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:pd">
            <DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:bluray:packaged urn:dece:type:discretemediaformat:dvd:cssrecordable urn:dece:type:discretemediaformat:dvd:packaged urn:dece:type:discretemediaformat:securedigital">1</DiscreteMediaRightsRemaining>
            <CanDownload>true</CanDownload>
            <CanStream>true</CanStream>
         </PurchaseProfile>
      </RightsProfiles>
      <ResourceStatus>
         <Current CreatedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") CreationDate="2013-06-04T13:02:33.974Z" ModifiedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") ModificationDate="2013-06-04T13:02:58.696Z">
            <Value>urn:dece:type:status:active</Value>
         </Current>
         <History>
            <Prior ModifiedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") ModificationDate="2013-06-04T13:02:58.512Z">
               <Value>urn:dece:type:status:active</Value>
               <Description>Rights Token is Updated</Description>
            </Prior>
            <Prior ModifiedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") ModificationDate="2013-06-04T13:02:33.979Z">
               <Value>urn:dece:type:status:active</Value>
               <Description>RightsToken has been created.</Description>
            </Prior>
         </History>
      </ResourceStatus>
      <LicenseAcqBaseLoc>ns3.google.com</LicenseAcqBaseLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/aaa</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/bbb</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ddd</Location>
         <Preference>1</Preference>
      </FulfillmentManifestLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ccc</Location>
         <Preference>3</Preference>
      </FulfillmentManifestLoc>
      <PurchaseInfo>
         <NodeID>urn:dece:org:org:dece:222259</NodeID>
         <RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</RetailerTransaction>
         <PurchaseAccount>urn:dece:accountid:org:dece:DE54AD6830BE2671E0401F0A2222596160</PurchaseAccount>
         <PurchaseUser>urn:dece:userid:org:dece:DE54AD6830CB2671E0401F0A2222596160</PurchaseUser>
         <PurchaseTime>2011-06-24T15:12:03.000Z</PurchaseTime>
      </PurchaseInfo>
      <RightsLockerID>urn:dece:rightslockerid:org:dece:DE54AD6830C62671E0401F0A2222596160</RightsLockerID>
   </RightsTokenFull>
</RightsToken>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResTime</con:name>
          <con:value>4286</con:value>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10057_RightsTokenUpdate after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>RTObjType</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate SAML Assertion" searchProperties="true" id="cc99b646-eec2-46c4-b732-9b7e841548fe">
      <con:settings/>
      <con:testStep type="groovy" name="Get Assertion From FormAuth" id="6b07266f-ff99-4fbd-b80f-734f722be3af">
        <con:settings/>
        <con:config><script>import dbUtils.dbUtils;
import dbUtils.dbUser;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import groovy.time.*
import com.eviware.soapui.model.testsuite.TestRunner.Status


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callTSname = testCase.getPropertyValue("TSuiteName");
def callTCname = testCase.getPropertyValue("TCaseName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname);

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("username",callTC.getPropertyValue("username"));

String nodeID = testCase.getPropertyValue("nodeid").toString();
String userID = testCase.getPropertyValue("username").toString();
String useroid = "";
String acctoid = "";

assert nodeID.length() > 0;
assert userID.length() > 0;

try {
                def a = new dbUtils.dbUser(log,testProject.getPropertyValue("targetSystem"));
                useroid = a.userGetUserOID(userID);
                log.info "useroid" + useroid;
                acctoid = a.userGetAccountOIDbyUsername(userID);
                log.info "acctoid" + acctoid;
} 
catch (Throwable e) {
                log.info "ERROR during dbUtils.dbUser - $e";
}
/*
*  Null calling test cases current Properties
*/
callTC.setPropertyValue("assert",null);
callTC.setPropertyValue("assertId",null);
callTC.setPropertyValue("assertionUUID",null);
callTC.setPropertyValue("assertionAccountIdFULL",null);
callTC.setPropertyValue("assertionAccountId",null);
callTC.setPropertyValue("assertionUserIdFULL",null);
callTC.setPropertyValue("assertionUserId",null);
callTC.setPropertyValue("accountoid",null);
callTC.setPropertyValue("useroid",null);
/*
*  LP1 security contexts
*/

if (testProject.getPropertyValue("targetSystem").toString() == "LP1") {
                switch (nodeID) {
                                case "222259":  
                             if (userID == "schfau1")
                                                {
												 callTC.setPropertyValue("assert","nVdZk6LKEn43wv9gOI+GzeJudHdEsdmoqCCuLzewKAFFQAoE/fWnwNbRnp45c+5Dh02Sy5eZXyVZr9g4uGwXYIzCyPG9kiy8lf/X7JgsgvVNFbXZerXehqjaqbVQlW3DFqp3WizdbpVLMsYxkj0cGV70VmZphq0ydJWu6QzbbXS6DPPCtph1uTRHISauicoLXS6lB9fD3TzsWzkOva5vYAd3PeOAcDeC3SlQhl2i2TVumMrvr1eUecDw3Y6ioEtR8MVEELkufIH+gXqlnnReTdydOpZnRHGIPmOa+K38aZskyUtSe/FDi2JpmqboDkV0TOxYP8rvxcLNGpmyt/U/Bbzh+Z4DDde5GBksBUW2b5aAa/mhE9mH3zhnKIbOnFdRCquQqXs/ytRDiBzgX7p6whlio4ptg7l709AWhciDqDTT5Lfyj7/r4qexHhoe3vrhAX8V/DdUyDsh1w+QWcW35O4A/97lNzV7f0WwK3vQjbFzQqOMLYEBES5NQrR10qGDCQdNXMpZUErxjWgI/pe+vFKPODPc1HfFERwL4ej/6dpTx65u5oYbo3cwOXbisCJta5vLcn3eM5exx7rz4+yYvOUgHpU/cd07fhP8wtk7w252KnXER2ZggMp2MLIqPsdpwVETeF7CS12pNYMF0x7KmmFtm6N0uJHCSQsuWoazxBtwlIUU88qlsQukSEsPxUIARxXDujBire/702Y60yb6QDoCa7ZJAnktGtOGxramtWmybiZtTpoIl1qLcVdD0T2ItjDQ5TG7MmuVD6hRxcKyvvYFSCWNuan5aGxLK/XtIbGnPLLkBuicp5r9v2zQHcGIjPsDn82OLTmuEXpXZFmILzwPzlMLJDIHLPK3AyPO2h/tvdPrJDQHVFUCAs+5O3GogH0PMDORsxV+PldS/gL6nDWaE0O9WADumlM0MRGSlTBX1Q8xsXWzNz9vem68vogjBeDcmrcVURPngqaLigL8qyxVhE0v3SlTJZHVlVAsEA+CmAYXs9eJUC91ICs3lGmDXU0b8Xo5J3LpPDyMThtddBVe6fHTY28qb2qCKvaBtlpAVoqJ7WV4CPxiYTXjHqz6AdoBJCU0iQouir5PFH3GjgTNyGX6s0yRe31FxQmv5nn1igUx6c9nl5/14DmFNw9iKupgcq0H1HlpRK+XfWwsGp6igUSwcuuBmJjjGxJFpZNigb/WaygmmqjNRpKiyYkIcpkgJi7esCN707NPsKamfR3sHrvDq+JC8sh7TzvBc+NYLBg9CWwOcwbWNBs6DcdY+om1bieCuuoP/LVM/IyAKnKcCggkGmTZkSZwYMjNG+PA6bAOGm4l/4DssFhQGH+wP11Suu3UxtZktGgI231r0nMmNcO0KdmF7K62B7KMzAFjq4aprShN8JxLczyYLZETri7RqKEyTafdKBa0RTxbCr7bMj+Wq9mgkq6gqo8n09licknT0XHXvrjRx5j7CKd9RbDGI4QmGFYo2pA4vS00+NXHjtBqq9GIeAOWwgHQ21mW6BAmcx+7Kxs/NEUkLAYKn/T4Bd+bgl6vIsqcoKpbyWYmsDePZ8xIkUXTJZU6r5aaWyyseU4g/aKNxTpYsRK91oGZe1PromSps0alv0RrdeTq8wgkwXzrMQzdC9SPrZJYUMl4YMrJlCPniSsWYhnMjHHQp9PBvEkzR9V0+9MOmNXSKbtPx7ZFJpm13pPOrB5O0UoH7lx/4JpMmLYgw0kXNQW0r2cvVeRZTXPhIQ02B5gKOulcbu3rnKhJKj1LBQEMrjKsAzbFq4u4U3gxtyd1SxWDsOO0Wdp45Y2csS7GhL3xA2t2G5b+V65lTCsWnrl25IEKvnJNvHJNBNtjRW4LDG40+QAvEovriUe1NR/2OwGtLof7YoGrSJQVOW597LUTfVBZMOekZe/UxaIjCzZf8bYru7aJONq4QBX1962eo+0Fr1l3z8pQURszh3LP9A4dEzwsFkYy44m16CJRnTCucIe1c7hcanV2dphM45M8MwaYOdub46KT7CYfTYoKe+fGpbU+qdLSh6vr9+Xr0LwLr2OVehy4TyP5tp1N480Owej2mH2iZaEkkc+mEf1508skjlnd5qrdIFsXcYS8qPyeWWVbXjcmu6Bjdskn9foM6h2JJV8UtsnU2Ua9LdJ1mpFoQDc6HZptSrd18IriC0Te97ZOFitbeK9f8T8DhIcuRp6JwurJj6GNcPkPHrN6lWRPIwuK72Gk+2ShrtMcI/ANwPF1gRZq7VarRtNis8MxdYGVJLFcGvnR2BuHYBuh8HmZbjwt0xqCTuCgbOPOtg1M1g0ckZIcjVMcuczLyXjxUEx28jBbi7tsvd2gsHMIXJQBpg6+GbvoJbCDvEAUvv6yVQPiXEq3Op18Efptfl/f3UpBdEwnU8BZMhwi7UTfXAvoWya/ZFz79vpwcw9i08l2HVLXKHTgFcnzq590yXhy50qW0g3zXfWr4Mkt9TWjeyTz5MA74++3JrJwk13s/daQo/FyfIlPpzhvQSvbNUPinmIomqWmCMZkXTzr/h551N0F9Vfr+h31l8h3+TO+OLK9aURO84EQppQ//sV9bYpwdl+TCeHTv70MPoUkdYtQGn0n411yrcsQ//HmB7sw0yPiCflJ/ND82a5vfD3EIXlm48vxrOwp28vPv2EF9Ilbh4wwP3x0/p2D74I/C+9FvmOJCJs2cYR+/6aUzaa3sgGhH3uRLJRzweO8zHFG5wB1fyr94ibfiD8vOyn+7WVnqQynZHIdjPJd1/l35aqT0wUiYoWdHMtbOSXXdxLcsx7m8yfA70c0LX0zosG9gE+ZvP8i/lXyUNOv5+H9Hw==");
                                                                callTC.setPropertyValue("assertId","_69d2ec4b-e824-48ce-937e-28c7e4972087");
                                                                callTC.setPropertyValue("assertionUUID","_69d2ec4b-e824-48ce-937e-28c7e4972087");
                                                                testProject.setPropertyValue("assertionUUID","_69d2ec4b-e824-48ce-937e-28c7e4972087");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A");
                                                                callTC.setPropertyValue("assertionAccountId","A49F28BF260F2548E0401F0A0599026A");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:A49F28BF26142548E0401F0A0599026F");
                                                                callTC.setPropertyValue("assertionUserId","A49F28BF26142548E0401F0A0599026F");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                                callTC.setPropertyValue("useroid",useroid);
                                                                log.info "Done setting the properties"
                                                                                                  
                                                } else if (userID == "schfau2") {
                                                             callTC.setPropertyValue("assert","nVdbc6pKE333V1jux5ThJkatJFXDNRhRQby+fIXDCCiCMiDorz8DRqPZ2fvkfA8pM810z+ruRbPmGdvbgO0AjFGc+FFY1aSX2v8cuGqxHO3U2eUTX2+0mk592WrRdci3mSZkG87KadeqGsYp0kKc2GHyUmNphq0zdJ3mLLrd4bgO13xsN7lFrTpBMSahyZZHulbNt0GIO+WxL7U0DjuRjX3cCe0twp0EdkZA73XIzo59wVR7fT6jLA+MX70k2XUoCj46CKIggI8w2lLP1N2eZwd3Rr4b2kkao48zHfxS+/DNsuwx4x6j2KVYmqYpuk2RPQ723V+118rFGTlauIrOa9EOo9CHduCf7AKUjhIvcqogcKPYT7ztH0IzFEMXoesoh3XINMJfNerzgBLdDyPdgYyxXceezVyCmWiFYhRCVB2b2kvt1886ePa1YjvEqyje4i/r/wYJhQcURDvk1PElswu6n0f8plyvzwh2tBAGKfYPqF/QZGdDhKvDGK38vOdjQj4HV8v2V3N8YRiC/6Ulz9QtTgKb+qYyku8inPw//brt1TnKxA5S9Lo88dQhS/EmYIdNedp0muvelG8kUIcvJYTbzWdQ11Z/rL8S9cqrD6c4oS0xyBpLNnnjDjuGYSViOgVzFUxCOckUUxQazHS68NrHFvfg7OeMNev1hLTZZwUrAb2eKQ9Up8UMs6SyGPbeYqDoymITqANVYmEfrVN5M6b6/AkxzHCPYjeC+/esuWCi1rbfig7KxPRnM2q0bgubnZY4JrvIWloiVHKOinfqSptEHG5tBJdk8fKZ020ORV7v6FgmWfw/4+m2ZCf2dSEWk2JFXs8EveqaJqUnUQTHkQsyTQAu+VuDvuBu9t7GV9sZLQDDUIAkCsFa7ulgowJmLAueLk4mei6eQFdw+xPiaFVAsBB0U86kbC5NDONNzjzLUSfHpRqki5Pc1wEunUVPl015IpmWrOsgOttyXVqq+Vof6ZlmzKUKCSDJ+e7kqO0EqbkPWY3XRzw7H/HpYjYhduXY2/YPS0sOdFFXxdFeHWlLTjLkLjDnU8gqKfE99ba7qDIfCzdO3R1aA6RkNDkTnHRrk+nWmO1Lpl3arHubrqld3cCZaJRZqRU5607Gp89aiIIuOls5ly0wPNcCWqLSpxezLranfKibIJPc0vldzpzBBYhu0FlFPNeqJ2embI77im5qmQxKmyRnAV6yfW+pegfIGXnXAuvbxoiGPFVC8jw0D/DI7yu2qoDldsJAzvSgz/v2LMrcRSuTjHn3PVpoJEwfGLIgGIAAokGRGqm/AHrChB/s/Dbro95KibbIiys6E71vDqecbvncwB32p7y02jwNVX/I2Y5HaQFk19wGaBpy3hnPsB1zTplS6J+ag/fxDPnx/JT0eYNp+i2+Yk7T8UyKgifnbTYfvz/kc2hYg+FoPB2e8ry/X7dOQfI2EN7iUVeX3EEfoSGGDxRtK4LVknhx/rYmfFqZNOIrwNUFANS168o+IbDwtj6T8M3UZUJeoIuZKk5FdQRU9UHWBMkwVorHDKE6ScdMX9dkJyBlOs5nZlBZiIJEOkXb08Vuzir0wgJOGcxoyIprjPmH7gwtjH5gTRKQ7SarkGFodWe8rfTMhXrBAEfLRgJ5i4RKqoGxPdh16fx90qSZveEE3VEbjLl8xG7ygecujht3sSFNmd+8OnMLBBPrhmMaodi0YliyqYPW+X3LdW3MmQHc5rvlFuaSRXpWOkeWIJuKQY9zSQLvZxu2AJvj+Ule66Jc+ldArtuEFoflzMPzsO8PLDklpE1v6LJesvS/cqygWOWeY3sRGOArx+Qzx2Sw2j9oLYnBfFPc4WnmCqq8N54mvW57Rxuz3qYiPCiUm/hBYxC2Muv9YcocsydvbUynbU3yxIdwNfe4ZSLQ9gkaqLt5Un1zI4XNRnDUe7rBj30qONJrtM9wr9LXmFDmkpNCteP0Qdgu/O3pxDXY8XY4Sg/a2H7HzNFb7qftbD18a1JUrB7509PiYCizCM7P35GvQ/JqPI9R6nbA3k3gi/Yapcs1gsllWXyHNamqkI+jnfxdxxUW36mvyq2dXSEGcYLCpPZaeBUarpMSpec7HfLlPK8BaNMtUWaAQMssJz/JdINmFBrQT+12k2W5i9g7o/gCUYzClV+cVcjZ88f67wDhtoNR6KC4fohS6CFc+0vEol5VLTSJColCjKyIyGVFYdsSaIpMW2xwLM9xLYZYeFliOaapNBu1aj9KBuEgBqsExXdSmWHvpLKJoL/zUaGnC1GBiarACSnJ3j6kScA8HuzHEKVEcceF6O2wjRZPYX+7C1ABmNpGThqgx523KwtE4fMvW7chLq1FAUu188f8vj67lILscfxiAy6SERBpJ/pG9LOXTH7LmPv2cnAJD1LHL0QNqWsS+/CM5P7RJ10Knly5UqR0wXzd+tVwF5b6mtH1JOfgwyvjr3ciIqmJ6Hq9NGRvP+4f08MhLVvwVAjKmISnGIpmqRGCKVGFRyvaoJC6hqB+JMivqL+cfLXf40sTLxwl5G3eEsJUy+UPbmMjhIvbmEYIn//0qnd3JKlbgvLkO5sYkEtbgfiv9zrYgcU+Yh6SnyyKnc92fRPr5hySZzG+/NAtVoX8Pv6BFTAiYX0ywqL4Nvh3Ab47/N54LfIVS0LYtEwT9Ocn1WI2vdRsCKM0TDSpVhpu52WJMznuUOdz029hSgH8caPJ8R9vNDO9NyKTa2vXrnv9f99c90u6QES8sF9ieanl5HJODg/dm/n8AfBuRDfaCtsSFLZJKyzfaF1HNN9u02wTXAt4l8nrb+bfLTc1/fo+vP4D");
                                                                callTC.setPropertyValue("assertId","_dcf8230d-2b75-486d-b880-c5916c24dfd9");
                                                                callTC.setPropertyValue("assertionUUID","_dcf8230d-2b75-486d-b880-c5916c24dfd9");
                                                                testProject.setPropertyValue("assertionUUID","_dcf8230d-2b75-486d-b880-c5916c24dfd9");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A");
                                                                callTC.setPropertyValue("assertionAccountId","A49F28BF260F2548E0401F0A0599026A");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223");
                                                                callTC.setPropertyValue("assertionUserId","AA908CE1AB0E23E7E0401F0A2222596223");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                                callTC.setPropertyValue("useroid",useroid);
                                                                callTC.setPropertyValue("RightsLockerID","A49F28BF26132548E0401F0A0599026F");
                                                                
                                                } else if (userID == "SCHOrg1Full1") {
                                                                callTC.setPropertyValue("assert","nVdZc6pME773V1ieS8uwiVslqRoWERWVxfXmK4QRUARlQNBf/w4YjebknDfvd5Ey0/TydPdD0/OKzL1PdwBCMIq9MCjLwlvlf0261YY03NTWG5Ku1ZuUWWvX2XaNbFg2TZtknW0ylbKMUALlAMVmEL9VaJKiaxRZIxmDbHcYqlNvvrDt+qpSnsEIYddY5YWslLO9H6BOEfatkkRBJzSRhzqBuYeoE1sdHSjDDtbsmDdMlffXK8oiYPTuxvGhQxDWiw0t6PvWixXuiVfiSefVRh3dcwIzTiL4EdNGb5UP2zRNX1LmJYwcgiZJkiDbBNaxkef8qryXbsbQloNNeD3zZhAGnmX63sXMQSkwdkO7DHwnjLzY3f/BNUVQZO66BjOrZlH14FeF+AxQoPuhpyeQETJryDWpmzMNbmAEAwuWp5r8Vvn1sw5ebY3IDNAmjPboy/m/QYLBCfrhAdo1dMvshu7nHr8p1/srtDpyYPkJ8k5wlNPkYFoQlScR3HjZ0EOYfDYqF+0vZ+jGMGj9l5a8Eo84MWzim8oIngNR/P/067FXVy8z00/gO6Cs5rKKBCLULVWamopyWmqj3gpW628FhEflK6h7qz/OX4l659WHkbkEwnKxaAS7/kZXI8HU/eXIJSXlNBglWkCeM8uIZXugXro8BRmADo3BkRiKNlMdegsegTjsz4ajFTsVpqVVq7nuIWIv1inu4tBk1WYdvkFopDRnmkHaEl1U14RV3RVINgmB3qiHZ2bba7igd2YMDbBocj5OUkceyGaJ2zbRhbYJPXRXm7NHHWj57TOnxxzyvAbwXCSZ/79gybZgxub9wOeTYoNfzxi+K7IsJBeeB2fdAanMAQf/bcGIc3ZHd+dJ7ZTkgKp2gcBz/lYcKmAnAWoqcq7Cz2ZKxl9An3NGM2xolIC/4hRNTIV0KcxUtSemrmFLs/Na8pPVRRwpABXGvKuImjgTNENUFBBeZZkirKVsq+hKKqtLoYQdCGJ2uNhSO4ZS5lm0zCo6Sy91NlktZljePQ/3o9PaEH2FVyReP0q6vGYEVewDbTm36G6CbS/D/SEsLafcg1H/ALcAdlMSxwQXxdilijGlR4JmFjLjWabIUl9RUcqrRVZSSUz7s+nlsxY8p/D2XsxEA0yutbAMvjsiV4s+MudsoGggFZzCeCCm9vgGRFHJtMRfazUUU03UpqOuosmpCAqZIKY+WtMjdy25J4tRs74Bto+N4VVx3g3w80A7WWf2WDKlLljvZ5TFaK7lsZ65CFNn1UoFddkfhCsZuxkBVeQ4FWBAJMhTw/XnwJCbseOD16Y9ONx0wz10o5JChYPd6ZKRLY8ZO5PRnBU2u+ZE8iaMabuE7Fv0ltkBWYb2gHJV09aWhCYE3qUxHkwX0IuWl3jEqlTDa7ElbZ5MF0LoN+3eYjkdVLOlpRrjiT6dTy5ZNjpuWxc/7o25XqT3FcEZjyCcIKtKkGaXM1oCyy97W8ynjUZCtgQchQNA2jqO6GECc73tlYQ9TRExeYHCpxI/5yUdSFJVlDlBVTddl5pY0iyZUiNFFm0fl+m8XGh+acVzAu4Uac5XhyXdJVcGsAtnal3sOuqUrfYXcKWOfGMWg/Qw2wQURUoHtbdRUsdScgbYcqpz+C3iSokMpub40CezwaxBUkfV9vt6G0yZTKd32dh1Vueds9rhpiwfXp2lAfyZ8cAxGVNsXlINUVNA6/q+ZYo8ZTTf2meH9d7KBAP3rDAODU7Uuio5zQQBDK4yZAA6Q8uLuFV4sbAvgUwxMS1O64WLlsHIGxtigkmbPNBlu6bJf+VYTrHSM8eOPFDBV46JV46JYHOsyi2BQmyDP6B56nCSeFSbs2G/fSDVxXBX4qpdwok9vz4OWqkxqM6pc9p0t+p83pYFl68Gm6XLrGOONC+WCvu7puRpOyFo1P2zMlRUduoR/pncwmOKhqWRTAUiE1+6RDtKqtx+5e0vF6ZOT/cTPTnJU3OAqLO7Ps7b6XbSaxBEJJ3ZS3N1UruL0FpevyNfh+RdeB2jxOOAfZrAt91LT9ZbaMW3Y/4dloVyF38czfjve1wu8ezaplDtHPJlEMUwiCvvuVW+w3USvOl5dgd/Oa/nNmjzPN+lGMDxQrveFck6SXVJQLLtNt1tMLdl74riC0Q+DDZeHitfZ68f678DtPYdBAMbRrVTmFguRJW/eMzrVZYDDW8hYYCgEeJ1mWwxjXZbqNP1FsewdUFkKRZ0m6CO02gyQKiUR2E8DsYR2MQwelqVKfppVdag5R08mO/T+VKB8FaBYlySo3lKYp96OZkvAUzwxh3lS28HB2QJ5O0PPswBE/vQTnz4cnAPRYEIdP2la6aFCinZbLeLbeeP+X19disF1rG9XAHlyXAQtxN+s/Qzt0x+y5j59nJwcw8S28uXGlzXOPKsK5LnR590yXly50qe0g3zXfWr4Mkt8TWjeyT75Fl3xt/vRHilxkvX+60hR/Pl+JKcTknRgma+UEbYPUERJE3o0ErwVng2wh0MiLsL4kcL+R31l8h3+TO+JHYDPcZv8x4Tplwcf3Ab0yHKb2MyJnz206veU0hctxhm8Xcy3seXthzxX+91VsfK9bB4gn/SMLI/2/WNr4c4OM98fHmBk5/y9fv8B1ZYIXbr4REWRo/Ov3PwXfBn4b3IdywxZtM6ieGfn5Tz2fRWMS0rTIJYzmcAFjzOywJnfD7AzqfSb26KBfjjRpOhP95oFspQx5Nrb1buut6/K9e8gi4WxFbIK7C8VTJ8OcfBA+dhPn8AfBzRFImZ37iX6Qnv+2/i3yUPlfvK+vd/AA==");
                                                                callTC.setPropertyValue("assertId","_7289e2ef-bf02-471a-9459-06cd22a04573");
                                                                callTC.setPropertyValue("assertionUUID","_7289e2ef-bf02-471a-9459-06cd22a04573");
                                                                testProject.setPropertyValue("assertionUUID","_7289e2ef-bf02-471a-9459-06cd22a04573");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:107006");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63");
                                                                callTC.setPropertyValue("assertionUserId","9A9CCCF13ABCD94FE0401F0A05992F63");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                                callTC.setPropertyValue("useroid",useroid);
                                                                 
                                                                                                
                                                } else if (userID == "jbaisakh") {
                                                                callTC.setPropertyValue("assert","nVfbkqLKEn33KwznscPmoqgY0x1R3GxUVC5eX05gUQKKoBQI+vW7wNHRnp7Zs89Dh11JZdbKzEWy6ju29wHbBRijOPGjsKpKb7X/0bDBODbXqTNrnqk3+bVT72wYVG+wHI/W6+aGa3dqVRXjFKkhTuwweauxNNOo02ydoS261eUaXY5+5dvcqladoRiT0GTLK12r5vsgxN3y2LdaGofdyMY+7ob2HuFuArsm0IZdsrNr3zDV3r9fUZYHxu9ekhy6FAVfHQRREMBXGO2p79TTnu8O7pq+G9pJGqMfZzr4rfbDN8uy16zxGsUuxdI0TdE8RfY42He/1d4rN2fkqOEmuq5FO4xCH9qBf7ELUBpKvMipgsCNYj/x9r8JzVAMXYSuoxzWIdMMv9WonweU6P4y0hPIGNt17NnMLZiBNihGIUTVqaG+1b79XQevvlZsh3gTxXv8af3fIKHwhILogJw6vmV2Q/f3Eb8o1/t3BLtqCIMU+yc0KmhysCHC1UmMNn4+9DEhn4OrZfurOb4xDMH/0pLv1CNOApv6ojKS7yKc/D/9euzVNcrMDlL03h5BzjhvRijOzdZGNZwD5KZnmEmS+lZCeNx8BXVv9Y/1Z6LeefXDaRgtAmydk4Z0HIlUaoQv5kGBYD/QFdA5U+ZuNx4f893c3kiavpzIXnvrUfI45ZVcbtFaY+WgOSfTJptlbmXp7oT9eWTxlzXugGF4TFfCEsww1gVpyetODl6m8+ZwOmkAyUD94UGOPuSXgebuzV7WbLWlzWWktHznyJlRZTcxFKrD+ye2fey3W+dNO3v7mdNjDkVeA3Qukyz+X3A0L9mJfV+IxaTYkNczQe+aqkrpRRTB2XRBpgrAJX9bMBLc3dHb+T0+owWgk+wlUQi28lADux5gprLgaeJspuXiBfQFdzQjjlYFBCtBM+RMypbSTNc/5MyznN7svO4F6eoijzSAS2fR02RDnkmGJWsaiK62XJPWvXyrmVqm6kupQgJIcn64OD0+Qb3ch6zKaSbHLk0uXS1mxK6ch/vRaW3JgSZqPdE89kx13ZB0uQ+M5RyySkp8L8P9Iaosp8KDU/+AtgApGU3OBBfN2mWaNWVHkmGXNuvZpqm9vqbjTNTLrHoVOevPppeftRAFTXT2ci5bYHKtBbREZUSvFn1sz7lQM0AmuaXzQM6c8Q2IptNZRbzWaihnhmxMR4pmqJkMSpskZwFesyNv3fNOsKHnfQtsHxsj6vJcCcnz0DjBM3es2D0FrPczBjYMD/qcby+izF11Mklf9gfRSiVhRkCXBUEHBBANitRI/QUwFGbc+ODzrI+GGyXaIy+uaEw02J0uOd3xG2N3Mppz0mbXnvT8ScN2PEoNILtt7ICqImfAeLrtGEvKkEL/0hoPpgvkx8tLMuJ0puV3uIoxT6cLKQrazsdiOR285EuoW+OJOZ1PLnk+Om47lyD5GAsfsdnXJHc8QmiC4QtF24pgdSROXH5sCZ82Bo24CnA1AYDe1nVlnxBY+NheSfhhaDIhL9DErCfOxZ4Jer0XWRUkXd8oHjOBvVk6ZUaaKjsBKdN5uTCCykoUJNIp2p6vDktWoVcWcMpgelNWXH3KvfQXaKWPAmuWgOww24QMQ/cO+sdGy1yoFQxw1MwUyFskVFIVTO3xoU/ng1mLZo66E/RNHkwbucnu8rHnrs47d7UjTVk+vDpLCwQz64FjKqHYvKJbsqGBzvV9yzV12jACuM8P6z3MJYv0rHSOLEE2FJ2e5pIEBlcbtgCb4+VF3mqiXPpXQK7ZhBan9cLDy3Dkjy05JaRNH+iyXbP0v3KsoFjlmWNHEejgM8fkK8dksDm+qB2JwVxLPOB55go9+ai3Z8M+f6D1xXBXEV4Uyk38oDkOO5k1eJkz56ztbfX5nFclT3wJN0uvsU4E2r5AHfV37Z5v7KSw1QzO2lDTualPBWd6i44ZHlZGKhPKjeSiUHycvgj7lb+/XBpNdrqfmOlJndoDzJy99XHOZ9vJR4ui4t6Zu7RXJ11ZRHB5/Y58HpJ343WMUo8D9mkC37SXma63CCa3ZfEdVqWqQj6OdvJnHVdYfKe+Kbd2D4UYxAkKk9p74VVouG5KlJ7vdMmX87oGjEjLUounZZrpsKwi002aUWhAt3m+IXHyTexdUXyCKEbhxi/OKuTs9WP9Z4Bw38UodFBcP0Up9BCu/SFiUa+qGhpEhUQhRlZE5DLLoUabsxsOajKQZTfIbvJthCDL2et1h286bJOHqMk2iGgeRck4HMdgk6D4WTTzT6LZQNA/+KhQ1oW8wERf4IQU52if0iRgXk/2a4hSor3jQv522WaHo7C/PwSogE7tIycN0OvBO5SlovD1l63bEJfWopSl7vltpp+f3YpC9jh+sQEXyQiINBZ9If+bt0x+ybj55TXhFh6kjl/IG1LhJPbhFcnzo5/EKRhzZ02R0g3zfetnw1NY6nNG95Ockw/v3L/fjoi4JvLr/daQo/16fE1Pp7RsQbuQljEJTzEU3aJMBFOiD89WtEMhdQ9B/ZU0v6P+dPLd/owvTbzQTMh7vSeEqZbLv7iXmQgX9zKVUD//20vf05GkbgnKk69sYkCubwXiP97wYBcW+4h5Qn6yKHZ+tuuLWA/nkDyLQeaHbrEqhPj5N6yAEQnrk2EWxY/Bvwrw1eHPxnuR71gSwqZ1mqDfP6kWU+qtZkMYpWGiSrXS8Dg5S5zJ+YC6Pzf9EqaUwj/uNvnvbrIMtdCGJplhe7t23+v/++a6X9IFIuKF/RLLWy0n13RyeOg+TOofAL8c1pKi/GlYP2fy/ov5V8tDTT+/D+//AA==");
                                                                callTC.setPropertyValue("assertId","_0c31da58-1b91-49bd-8f1e-3259ebb4f578");
                                                                callTC.setPropertyValue("assertionUUID","_0c31da58-1b91-49bd-8f1e-3259ebb4f578");
                                                                testProject.setPropertyValue("assertionUUID","_0c31da58-1b91-49bd-8f1e-3259ebb4f578");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:A1C0ED690DFF822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("assertionAccountId","A1C0ED690DFF822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:A1C0ED690E01822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("assertionUserId","A1C0ED690E01822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                                callTC.setPropertyValue("useroid",useroid);
                                                } else {
                                                                log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
                                                                assert 1 == 2;
                                                }
                                                break;
                                                
                                case "0701":  // Nodes with different roles other then Retailer/Retailer CS
                                case "0702":

									/* if (userID == "schfau1")
                                                
                                                {
                                                                callTC.setPropertyValue("assert","nVdbc6JME773V1jupWU4SRQrSdVwMqioIB5vvkIYDoqADAj6698Bo2uy2X33/S5SZpo+PN390PS8IPMQ0D2AEExSPwrrivjaaNNMh+3YTMtx6G6rTZFOi2MdtgW3nQ5LQ9IyO0yjriCUQSVEqRmmrw2apKgW2WnRHYPq9BiyR3JPDM1tGvUFTBD2jFWeyEa9OAQh6lVRXxtZEvYiE/moF5oHiHqp1ZsBddTDmj3zBqnx9nIFWQVM3rw0jXsEYT3Z0IJBYD1Z0YF4IT7pvNioN/Pd0EyzBH7EtNFr48M2z/OnnHmKEpegSZIkSI7AOjby3R+Nt9rNGNpK6ETXs2CGUehbZuBfzBKUClMvsusgcKPET73Db1xTBEWWrluwsFoW1Q5/NIifASp0f+npE8gEmS3kmdTNmQ4dmMDQgvW5rrw2fvxVA6+mRmKGyImSA/py/m+IYHiCQRRDu4Vuid3A/b3Hb6r19gKtnhJaQYb8ExyXLIlNC6L6NIGOX4x8hLlno3rV/XqBbgSD1n/pyAvxiBPDJr6pjOi7EKX/T7seW3X1sjCDDL6hAjpLOgMnaayMTTCSvI0nN4UuOnVfKwiPyldQ905/nL/y9E6rDyOvfQ74QZBpz3C91s0OsCdkO7Y37L6YD8ZDLkJ6O9WPgqhPySEpRlqyJL1xUw7CnKWF1Ux0uQIhMEny512N7Nhpk1ZIRwrl08aZk3ExnSw33SUj0OZRMKj9u48ieXGcssFsz8B9x8omnZPFTJOzu22adLEegNhi8netqA0OHYd1Z3tKDfhTk15mkfr6M6fHHMq8hvBcJVn+v2JJTjRT834QykHh4LczhW+qoojZRRDAeeaCXOGBi/92YMy7+6O39/tcTvJA02QgCnywk0Yq2PcBNZd4TxUWC7UQLmDAu+MFNjRqINjwqi7lYr4WF5r2LuWeYfcX520/yDYXaawCVBkLnirp0kLUDUlVQXSVFaq47Rc7dabmirYWa9iBKBXxxe5zKewXvkUrrDpj6fWMzTarBZbL59FhfNoaUqAKal+YHfszZcuImjQA+npp0XKGbS+jQxzV1nP+wWgQwx2Ack7imOCiGvtcNeb0WNTNSmZ8lqlKf6BqKBe0Kqt+TcoHi/nlZy0EXhXsg1RIBphea2EZgjwmN6sBMpdsqOogF93KeCjl9uQGRNXIvCZcazWScl3S52NZ1ZVcApVMlPIAbemxt+17mBVaMTDA7rExgiYt5RA/D/WTdWaPNbMvg+1hQVmM7lk+65urKHc33VzU1oNhtFGwmzHQJJ7XAAZEgjI1XH8ejPgFO4l9jvbhyJGjA/SSmkpFw/3pUpBdn5m40/GSFZ19Z9r3p4xpe4QSWPSO2QNFgfaQ8jTT1teELob+5XkynK+gn6wv6ZjVqGe/y9b0ZTZfiVHQsd9X6/mwWawtzZhMZ/Pl9FIU4+OuewnS9wn/nswGquhOxhBOkdUkSFPmja7ICuv3HeaTo5OQrQFX5QHo71xX8jGB+ffdlYTvuiph8gJVyPvCUujPQL/flBRe1DRH9qip1V9kc2qsKpId4DKd1ys9qG0EXsSdIs3lJl7TMrkxgF0509qS7GpztjlYwY02DoxFCvJ44YQURfZj7d1Rc9dSSwbYSj7j8VvE1zIFzM1JPCCL4eKZpI6aHQxmHJgzxYzeFxPP3Zz37maPm7J+eHXWBggWxgPHFEyxZU0zJF0F3ev7VqjKnNED61DE24NViAbuWWUcGbykyxo5L0QRDK8yZAC6QOuLtFMFqbKvgUI1MS1O25WH1uHYnxhShkmbPdBlt6XJf+VYSbHaZ44dBaCBrxyTrhyTgHNsKl2RQuyzEKNl7vJ96ah1FqMBF5PaarSv8U2ZcFM/aE/Cbm4Mm0vqnHe8nbZccoroCc3QWXvMNuVJ82JpcLDv9H19L4bP7eCsjlSNnftEcCZ38JijUW2sUKHEpBeZ4JKsyR82/uFyYdr0/DCdZSdlbg4Rdfa2xyWX76bvzwSR9M/spbM5afIqstbX78jXIXkXXsco8ThgP03g2+o1y7Y7aKW3Y/kdVsS6jD+OZvrnNa6U+HbLqVR7cbkLohSGaeOttCpXuF6GFz3f7uEv5/UM2pxMd3mZfqbaNNvuSmSbpGQSkCzHkfSzfNv1rii+QBSi0PHLWOUye/1Y/xmgdehtoZnApPEHT2Wd6kqo4+0jChE0otfG/5i22e1CumvbDk3Z3bbJMCa1tTmackzG5hiGokzS5iir3aiPo3QSThLgpDB52JW7X3dlHVp+7MNyof5YK1CKa3I0T1kaUE8n8ymEGd64k3Lp7dHtLksg/xAHsEROHCI7C+BT7MVVhQh0/aVbpoUqqQ0dMwvSFoqrpee36X59dqsM1rH9UgGVGfEQdxV+Xf1prsfe0vklbfrbK8LNPchsv9xtcJnTxLeuSD4/+smaki53ypAdrnvDfFf9a1PuV1PiD4iIr8W4R7JP/kPc2wUG7+R4bavuLQh39Gg+HZ+y0ymretgpV9IEuycogiRm0MrwWnk2oj0MibsH4m8W+jvmL3Hv8s/ostQLZymeBgdMt3p1/PfL3CdrXIAUFul3MiHA17cy+B9veFbPKvWweIp/8iixf9b9G18PcTDkcpL5oVueyk38/Lm9H69Jz4qwVx8Psyh59P2d/XexPwvv5bpDSTErtlkKf/+kXk6p14ZpWVEWporYqASPk7PCnJ5j2Pup9IubahX+uNsUv7vIUsRKHc0sDx7Mxl3X/3flll813oLYCvkVltdGgW/pOHjoPkzqD4DfD2tS/mZYg3sBP2Xy9ov4V8lDTb8y++0f");
                                                                callTC.setPropertyValue("assertId","423757d3-ff28-410f-95f5-eb7752e0ca73");
                                                                callTC.setPropertyValue("assertionUUID","423757d3-ff28-410f-95f5-eb7752e0ca73");
                                                                testProject.setPropertyValue("assertionUUID","423757d3-ff28-410f-95f5-eb7752e0ca73");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A");
                                                                callTC.setPropertyValue("assertionAccountId","A49F28BF260F2548E0401F0A0599026A");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:A49F28BF26142548E0401F0A0599026F");
                                                                callTC.setPropertyValue("assertionUserId","A49F28BF26142548E0401F0A0599026F");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                                callTC.setPropertyValue("useroid",useroid);
                                                                                         
                                                } elseif 
                                                 */   
                                                if (userID == "SCHOrg1Full1") {
                                                                callTC.setPropertyValue("assert","nVdbc6JME773V1juZcpwUFSsJFXDQYKKCuLx5iscRkARkAFBf/07YHRNNrvvvt9FykzTh2e6n+npecHWwWe7AGMUJ14YVFXptYZQu7VhG0y9zTZhvUlbVn3T2fB1xmrBRqvVbtm8VauqGKdIDXBiBclrjaUZpk536kzTZBtdlus26ec2z69r1TmKMfFMVJ7pWjU/+AHullFfa2kcdEMLe7gbWAeEuwnsToE27BLNrnWDVHt7uYIsA8ZvbpJEXYqCzzaCyPfhMwwP1Av1SefFxt2p5wRWksboI6aNX2sftlmWPWeN5zB2KJamaYrmKaJjY8/5UXur3IyRrQbb8LoWrSAMPGj53sUqQGkocUO7CnwnjL3EPfzGNUMxdOG6jnJYh0wz+FGjfgYo0f2lp08gY2zVsWsxN2cG2qIYBRBVZ4b6WvvxVwW8mpqxFeBtGB/wl/V/Q4SCE/LDCNl1fNvYDdzfe/wmW28vCHbVAPop9k5oVLAksiDC1UmMtl4+9DDhno2rZfWrOb4RDMH/UpEX6hEngU19kxnJcxBO/p9yPZbq6mVu+Sl6G1hD9dhnAtnjRXMxa/tM/tT3LX3qZa8lhEflK6h7pT/WX3l6p9WHkdBhsGoIR2uprI+KiNMhtxusp+vVbiD7oHkehqf2eQQ0SZn3Fuc0XjhoBVl98OT0uAHCjaHQbp2Hx6C/o6eVNNJMOG+FSznZnfRTq59MouZ2N9uuLL7nPkmx77njVjI7SDB61/n3fcb30GKdZIwbaX3O8HcLG9rvJqe0hEqzD2Yc4Bbhxm7gDT2fNp3Xn3t63EOxrwE6l5ss/l9yNC9ZiXVfiEWj2JLTmaA3TVWl9CKK4Dx1QKYKwCF/OzASnP3R3XsKn9EC0PUekETB38lDDewVwMxkwdXE+VzLxQvoC85oTgzNCvDXgmbImZStpLmuv8uZa9rK/LxR/HR9kUcawKWx6GqyIc8lw5Q1DYRXWa5JGyXfaVMtU/WVVCEOJDmPLrbCJ0jJPciqnDbl2NWUS9fLOZH3zsPD6LQxZV8TNUWcHpWpumlIutwHxmoB2V5KbC/DQxRWVjPhwagfoR1AvYwmMcFFM/eZZs7YkWRYpcz8LNNUpa/pOBP1cldKRc7689nlZy5EQRPtg5zLJphccwFNsTei18s+thZcoBkgk5zSeCBn9vgGRNPprCJeczWUM0M2ZqOeZqiZDEqZJGc+3rAjd6O4J9jQ874Jdo+FEXV50QvI98A4wTN3rFhKD2wOcwY2DBd6nGctw8xZdzJJX/UH4VolbkZAlwVBBwQQDYqtkfwLYCjMuXHk8ayHhtteeEBuXNGYcLA/XXK64zXGzmS04KTtvj1RvEnDsl1K9SG7a+yBqiJ7wLi6ZRsrypAC79IaD2ZL5MWrSzLidKbldbiKsUhnSyn02/b7cjUbPOUrqJvjyXS2mFzyfHTcdS5+8j4W3uNpX5Oc8QihCYZPFG31BLMjceLqfUf4tDVoxFWAowkAKDvHkT1CYOF9dyXhu6HJhLxAEzNFXIjKFCjKk6wKkq5vey4zgco8nTEjTZVtn6TpvFoafmUtChKpFG0t1tGK7dFrE9ilM70p9xx9xj31l2itj3xznoAsmm8DhqGVSH/fapkDtYIBtppNBXKKhEqqgpk1jvp0Ppi3aOao235/yoNZI5+y+3zsOuvz3lnvSVFWD0dnZQJ/bj5wTCUUW1R0UzY00Lmet1xTZw3Dh4c82hxgLpmkZqVxaAqy0dPpWS5JYHCVYROwOV5d5J0myqV9BeSaRWhx2ixdvApG3tiUU0La9IEuuw1L/yvHCopVPnPsKAIdfOWYfOWYDLbHJ7UjMZhriRFeZI6gyEe9PR/2+YjWl8N9RXjqUU7i+c1x0MnMwdOCOWdtd6cvFrwqueJTsF25jU0i0NYF6qi/byuesZeCVtM/a0NN52Ye5Z/pHTpmeFgZqeR+aCSXHsXH6ZNwWHuHy6XRZGeHyTQ9qTNrgJmzuzku+Gw3eW9RVKycuUt7fdJ7yxCurvfI1yZ5F17bKPXYYD914NvoNU03OwST27K4h1Wp2iOXo5X8eYwrJJ5d35aq3aiYBXGCgqT2VlgVI1w3JYOeZ3fJzXld8xItk+7c7DFMpy2JHZlu0kyPBjTH821OatxmvSuKLxDFMNh6RaximL1e1n8GCA/dDbJiFNf+4KnIU1UNDDJ9hAFGZvha+x+9Zdqs1eEa1oa3ab7D2XynCSHDblp2G9Jo2+Zput3hG0ytOgqTcTCOwTZB8cOszH2dlQ0EvchDxUD9MVbghOTkaJ3SxGeeT9ZzgFIyccfF0Ntlmx2Owt4h8lGBnDqEduqj58iNygxR+PrL1i2IS6mNtlbqJ3UclUPPb7f79dstM0TH9goFXOxIQKSq6JvRv3Hbzi/bZr99Itzcg9T2itmGpDmJPXhF8vnTT9YUdLlThm7T7A3zXfWvTZlfTak/IKK+JuMeyT55D3FvDxgyk5OxrXy3YFLRo/V8fE5Pp7SsYbsYSWPinmIompoimJKx8myGexRQdw/U3wz0d8xf4t7ln9GliRtME9INDoRu1XL574+5T9YkAQnKk+9kok+eb0XwP77wYBcWekQ8IT9ZGNs/8/6Nr4c4BHLRybzAKVbFJH7+XN6PY9KFIfHqkWYWxo++v7P/LvZn4T1ddygJYcUmTdDvv1SLLvVasyAM0yBRpVopeOycJebkHKHuT6Vf3JSj8MfbJv/dQ5ahltpwCl10sGp3Xe/fleteWXiIiBX2SiyvtZy80knwwHno1B8AH5s1QxcMvqfpE963X8S/Sh4y95W/b/8A");
                                                                callTC.setPropertyValue("assertId","ee76b231-724c-40aa-b8b9-1a6c36676d9a");
                                                                callTC.setPropertyValue("assertionUUID","ee76b231-724c-40aa-b8b9-1a6c36676d9a");
                                                                testProject.setPropertyValue("assertionUUID","ee76b231-724c-40aa-b8b9-1a6c36676d9a");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:107001");
                                                                callTC.setPropertyValue("assertionAccountId","107001");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:9D0EDCB4F1187DC8E0401F0A059975D3");
                                                                callTC.setPropertyValue("assertionUserId","9D0EDCB4F1187DC8E0401F0A059975D3");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                                callTC.setPropertyValue("useroid",useroid);
                                                /*                                                
                                                } else if (userID == "jbaisakh") {
                                                                callTC.setPropertyValue("assert","nVdZk6LKEn73VxieR8NmURSN6Y5gk0ZFBXHBlxtYFIKySYGgv/4W2Dp2T8+cufehw64kly8zP5KsH8gKfHrAIQST1IvCuiK+NigaWG22B1vtXt9qdfos27Js0G0xds8BFsnSgGUadQWhDCohSq0wfW3QJEW1yF6LZg2KGdDdAUO9tFlq26ivYIKwZ6zyQjbqReCHaFBFfW1kSTiILOShQWgFEA1SMFhw6mSANQfWHVLj7ccNZBUweXPTNB4QBHixIYC+D15AFBA/iE86P2w0WHj70EqzBH7EtNFr48M2z/OXvP0SJXuCJkmSIPsE1rGRt/+n8Va7G0NbCZ3odhasMAo9YPne1SpBqTB1I7vO+fso8VI3+I1riqDI0nULFqAFqE74T4P4GaBC95eePoFMkNVCrkXdnenQgQkMAawvdeW18c9fNfBmaiRWiJwoCdCX8/+GCIZn6EcxtFvontgd3N97/KZabz8gGCgh8DPkneG0ZElsAYjq8wQ6XjHxEOaejepV9+sFuhMMgv+lIz+IZ5wYNvFNZURvD1H6/7TruVU3LyvLz+DbORbooxTLbWAGk64ggHTdCTxyI67AawXhWfkG6tHpj/NXnj5o9WEk+uPDQSG6XiH76WQ5bxZthDaBSlmEBdyxrpz42WQxZraj0Xk6XvXZ+dTV103VzjbuQibm0WURmwbchtNzp6aaO9PUt6AT845tzM2+kXrO0gosRluilL+0e23WPPY1cjRb8bPiPLNHw2wn7pHj680L3UkTWeqM0uk2TGFt5vrHxWzOBc2xHC5WLDofX3/m9JxDmdcYXqoky/83DNkXrdR6HIRyUDj47Uzhm6ooYnYVBO6y2HO5wnN7/Hfgpvz+eHKPntzPSZ7TtCEnCrx/kCYqd5Q5ainxriqsVmohXLkRv5+usKFR4/wtr+pSLuamuNK0dyl3DVteXXayn22v0lTlUGUsuKqkSytRNyRV5aKbrFDFnVwc1IWaK5op1rADUSriqy33UygXHqAVRl0wtLlgsu1mheXDyySYnneG5KuCKguLk7xQdm1Rk0acbq4BPcyw7XUSxFHNXPJPRqMYHjg4zEkck7uqxjFXjSU9FXWrkhmfZaoij1QN5YJWZSXXpHy0Wl5/1kLgVcEOpEIyuPmtFsAQhlNyuxkha82Eqs7l4r4yHku5PbsDUTUyrwm3Wk2kXJf05XSo6koucZVMlHIf7eipu5PdM2hrxcjgDs+NETRpPQzx81A/gwtzqlnykNsFKwq0dRd4jGdtony/ZXNRM0fjaKtgN1NOk3he4zAgkitTw/XnuQm/Ymax16c9OHGGUQDdpKZS0fh4vhYk67Vn+/l0zYjOsTeXvXnbsl1C8QF9aB85RYH2mHI1y9ZNQhdD79qdjZcb6CXmNZ0yGtX1WKamr7PlRoz8nv2+MZfjZmECzZjNF8v1/FoU09OBvfrp+4x/TxYjVdzPphDOEWgSpDXkDVZkBPP9gPnk6CRkatxe5TlOPuz3kocJzL8fbiR811UJk5dThVwW1oK84GS5KSm8qGnO0KXmQF5lS2qqKpLt4zJdzI3u17YCL+JOkdZ6G5v0kNwanF050zrScK8tmeZoA7fa1DdWKZfHKyekKFKOtXdHzfdALRlgK/mCx28RX8sUbmnN4hFZjFddkjpptj9a9Lllu1jQx2Lm7reX4357xE0xn14d0+D8lfHEMQVTbF3TDElXOfb2vhWqsmzrPgiKeBeAQjRwzyrjyOAlfaiRy0IUufFNhgyOLpB5lQ6qIFX2Na5QLUyL827jIjOcejNDyjBpsye6HHY0+a8cKylW+8yxk8Bp3FeOSTeOSZxzaiqsSCGmK8Rone95WTppvdVk1I9JbTM51vjmkNinnt+ZhWxujJtr6pL33IO2XvcV0RWaoWO67V3Kk9YVaHB07MmefhTDbse/qBNVY5Ye4V/IAzzlaFKbKlQotdPrkOgnWZMPtl5wvbY79DKYL7KzsrTGiLq4u9O6nx/m712CSOQLc+1tz9pwEwHz9h35OiQfwtsYJZ4H7KcJfF+9FtnuAEF6P5bfYUWsD/HH0Ur/vMaVEs9uOZXqIC53QZTCMG28lVblCjfI8KLn2QP85bydOUogJbHbJyWSYml6KJEdkhqSHNnr99siI913vRuKLxCFKHS8Mla5zN4+1n8GCILBDloJTBp/8FTWqa6EOt4+ohBBI3pt/KfDdh2SZAFt4d2q3aUZltzRvR0AkO1YDrC7FKC7Xcdpw0Z9GqWzcJZwTgqTp125/3VX1iHwYg+WC/XHWoFSXJOTdc5Sn3o5Wy8hzPDGnZRL74DusAyBvCD2YYmcCCI78+FL7MZVhQh0+6VbFkCV1IaOlflpC8XV0vPbdL8+u1cG69heqYDKjHiIuwq/Wf0793R+SZv+9opwd89ltlfuNrjMaeKBG5LPj36ypqTLgzKYGuwd80P1r037v5oSf0BEfC3GI5J99p7i3i8weCfHa1t1b0G4oyfr5fSSnc9Z1cNeuZIm2D1BESSxgCDDa+XFiI4wJB4eiL9Z6B+Yv8R9yD+jy1I3XKR4GgSYbvXq+O+XuU/WuAApLNLvZIKPr29l8D/e8MAAlHpYPMc/eZTYP+v+ja+nOBhyOcm8cF+eyk388rm9H6/JAETYq4eHWZQ8+/7O/rvYn4WPcj2gpJgVuyyFv39SL6fUa8MCIMrCVBEbleB5claY00sMBz+VfnFTrcIfd5vidxdZitiokwVwYWA1Hrrevyu3vKrxAA8qrF9heW0U+JaOg4f7p0n9AfDbYS0Oh38a1p8zeftF/KvkqaZfmf32Xw==");
                                                                callTC.setPropertyValue("assertId","12ca387e-379a-4988-adc6-5d7fca082c85");
                                                                callTC.setPropertyValue("assertionUUID","12ca387e-379a-4988-adc6-5d7fca082c85");
                                                                testProject.setPropertyValue("assertionUUID","12ca387e-379a-4988-adc6-5d7fca082c85");
                                                                callTC.setPropertyValue("assertionAccountIdFULL","urn:dece:accountid:org:dece:A1C0ED690DFF822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("assertionAccountId","A1C0ED690DFF822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("assertionUserIdFULL","urn:dece:userid:org:dece:A1C0ED690E01822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("assertionUserId","A1C0ED690E01822FE0401F0A2222593D5E");
                                                                callTC.setPropertyValue("accountoid",acctoid);
                                                */                callTC.setPropertyValue("useroid",useroid);
                                                } else {
                                                                log.info "ERROR - userID [$userID] supplied is not configured for nodeID[$nodeID]!";
                                                                assert 1 == 2;
                                                }
                                                
                                                break;
                              default:
                                                log.info "ERROR - NodeID supplied is not configured!";
                                                assert 1 == 2;
                                              break;
                }

}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Validate SamlGetAssertionExpDate" id="3933f722-9f65-47e7-978a-98c30503f6f9">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import groovy.time.*
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

testCase.setPropertyValue("nodeid",callingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("assertionUUID",callingTCase.getPropertyValue("assertionUUID"));

               
def myDbSaml = new dbSAMLAssertion(log,testProject.getPropertyValue("targetSystem"));;

nodeid = testCase.getPropertyValue("nodeid");
Uuid = testCase.getPropertyValue("assertionUUID");
rcSAMLuuid = myDbSaml.samlGetAssertionRowCount(Uuid,nodeid);
testCase.setPropertyValue("rcUUID",rcSAMLuuid.toString());

		if (rcSAMLuuid.toInteger() ==1){ 
			log.info "UUid : [$Uuid] Found, row count: $rcSAMLuuid";
			// check expiration date for the assertion	
			ValsamlExpDate = GetsamlExpDate(Uuid,nodeid);			
			ValSysDate = getSysDate();
			
				 if (CompareDates(ValsamlExpDate,ValSysDate).toString()=='true'){
			 		log.info  "SAML Assertion is Good !" 
			 		log.info "SAML Assertion Expiration Date till-[$ValsamlExpDate]";
			 		testCase.setPropertyValue("SAMLExpDate",ValsamlExpDate);
				 }
				 else{
				 	log.info "SAML Assertion is Expired."
				 	assert setSamlExpDate(Uuid.toString(),nodeid.toString(),4) == 1;	
				 	ValsamlRenwDate = GetsamlExpDate(Uuid,nodeid);
				 	SysDate = getSysDate();
				 	log.info "SAML Assertion Renewed till-[$ValsamlRenwDate]";
				 	assert CompareDates(ValsamlRenwDate,SysDate)== true;
				 	testCase.setPropertyValue("SAMLExpDate",ValsamlRenwDate);			 			 	
				 }
		
		}
		else{	
			log.info "UUid : [$Uuid] not Found, row count: $rcSAMLuuid";
			testCase.setPropertyValue("rcUUID",rcSAMLuuid.toString());	
			
		}


// Get SAML Expiration Date Mehtod
def GetsamlExpDate(String Uuid, String Nodeid){
def myDbSaml = new dbSAMLAssertion(log,testProject.getPropertyValue("targetSystem"));;
ExpDate = myDbSaml.samlGetAssertionExpDate(Uuid ,nodeid);
samlExpDateXML = new XmlSlurper().parseText(ExpDate.toString());
samlExpDate = samlExpDateXML.toString();
return samlExpDate;
}


def getSysDate(){
	sysDate = new Date().format("yyyy-MM-dd hh:mm:ss.S");
	return sysDate;
}
	
def CompareDates( String SamlDate, String SysDate){
	
		def testSuiteamlDate = new Date().parse("yyyy-MM-dd hh:mm:ss.S",SamlDate.toString());
		def testSuiteysDate = new Date().parse("yyyy-MM-dd hh:mm:ss.S",SysDate.toString());

		log.info "SamlDateTime in Millisec:" + tSamlDate.getTime() + "- SysDateTime in Millisec:" + tSysDate.getTime();
		if (tSamlDate.getTime() >= tSysDate.getTime()){
		return true;
		}
	
}	

def setSamlExpDate( String Uuid, String Nodeid, int Years){
		def myDbSaml = new dbSAMLAssertion(log,testProject.getPropertyValue("targetSystem"));;
		def rcsetSamlExpDate = myDbSaml.samlRenewAssertionYear(Uuid.toString(),Nodeid.toString(),Years.toInteger() );
		return rcsetSamlExpDate;
}

// Return SAML Assertion Validations 

callingTCase.setPropertyValue("SAMLExpDate",testCase.getPropertyValue("SAMLExpDate"));
callingTCase.setPropertyValue("rcUUID",testCase.getPropertyValue("rcUUID"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_dcf8230d-2b75-486d-b880-c5916c24dfd9</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">222259</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLExpDate</con:name>
          <con:value>2013-10-03 12:59:11.0</con:value>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10020_RightsTokenUpdate - Policy - RTL - NoPolicyEnforcement - US - MMPA - Can - create - RightsToken - that - IS - ADULT - = - 'n' - with - policy - and - all - rating - as - per - Matrix</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_Policy_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>rcUUID</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>schfau2</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get SAML Assertion - STS" searchProperties="true" id="fadd842c-2c56-473e-be29-c00ea08e9ff0">
      <con:settings/>
      <con:testStep type="groovy" name="Get SAML Assertion from STS" id="8411aab2-4352-4e69-9a6c-ea23e6954d2b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

		testCase.setPropertyValue("nodetype",callingTCase.getPropertyValue("nodetype"));
		testCase.setPropertyValue("nodeid",callingTCase.getPropertyValue("nodeid"));
		testCase.setPropertyValue("username",callingTCase.getPropertyValue("username"));
		testCase.setPropertyValue("password",callingTCase.getPropertyValue("password"));
		testCase.setPropertyValue("accountoid",null);
		testCase.setPropertyValue("useroid",null);
		testCase.setPropertyValue("assertid",null);
		testCase.setPropertyValue("SAMLassertion",null);
		testCase.setPropertyValue("tokentype",callingTCase.getPropertyValue("tokentype"));
		testCase.setPropertyValue("loopuntil",callingTCase.getPropertyValue("loopuntil"));
		testCase.setPropertyValue("expectErrTypeSTS",callingTCase.getPropertyValue("expectErrTypeSTS"));
		testCase.setPropertyValue("expectErrTypeSTSGet",callingTCase.getPropertyValue("expectErrTypeSTSGet"));


def GetSTS = testProject.getTestSuiteByName("Test Configuration/Setup").getTestCaseByName("Authorization Information Extraction via STS")

GetSTS.setPropertyValue("tName",testCase.getName());
GetSTS.setPropertyValue("sName",testSuite.getName());

def runnerTC = GetSTS.run( null , false )

assert runnerTC.status == Status.FINISHED;


// Return Property Values to the Calling testcase

callingTCase.setPropertyValue("nodeid", testCase.getPropertyValue("nodeid"));
callingTCase.setPropertyValue("nodetype",testCase.getPropertyValue("nodetype"));
callingTCase.setPropertyValue("username",testCase.getPropertyValue("username"));
callingTCase.setPropertyValue("password",testCase.getPropertyValue("password"));
callingTCase.setPropertyValue("accountoid",testCase.getPropertyValue("accountoid"));
callingTCase.setPropertyValue("useroid",testCase.getPropertyValue("useroid"));
callingTCase.setPropertyValue("assertCommon",testCase.getPropertyValue("assertCommon"));
callingTCase.setPropertyValue("SAMLassertion",testCase.getPropertyValue("assert"));
callingTCase.setPropertyValue("assertionUUID",testCase.getPropertyValue("assertionUUID"));
callingTCase.setPropertyValue("assertionUserIdFULL",testCase.getPropertyValue("assertionUserIdFULL"));
callingTCase.setPropertyValue("assertionUserId",testCase.getPropertyValue("assertionUserId"));
callingTCase.setPropertyValue("assertionAccountIdFULL",testCase.getPropertyValue("assertionAccountIdFULL"));
callingTCase.setPropertyValue("assertionAccountId",testCase.getPropertyValue("assertionAccountId"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>nodetype</con:name>
          <con:value>retailer</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>schfau2</con:value>
        </con:property>
        <con:property>
          <con:name>password</con:name>
          <con:value>Password1</con:value>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLassertion</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbd6o8E773V7jcly7LQWnFtdu1wlFUVBCPdxgioAhKQNBf/wWs1nZ3H97vostmyMw8mXmSPPmJ7X3AdgDGKE78KKxq0mttzbAsz29aDQetm41Ws7lutNvrdYPjmhxsvdhNHrZqVQ3jFGkhTuwwea2xNMM0aLbBshbDdTi+w/JPHNde1aozFGMSmUx5omvVfB+EuFNmfa2lcdiJbOzjTmjvEe4ksDMB+qBDZnbsG6Ta288ryDJh/OYlyaFDUfDJQRAFAXyC0Z76SX2a89PBnYnvhnaSxug9p4Nfa+++WZY9Zc2nKHYplqZpiuYpMsfBvvuj9la5OSNHCzfRdSzaYRT60A78i12A0lHiRU4VBG4U+4m3/01ohmLoInQD5bABmVb4o0Z9JCjR/WOkTyBjbDewZzO3YCbaoBiFEFWnpvZa+/FPDby6WrEd4k0U7/GX8X9DhMITCqIDchr4trAbuH+P+E213n4i2NFCGKTYP6FhwZKDDRGujmO08fOBjwn3HFwtu1/N8Y1gCP6XjvykHnES2NQ3lZF8F+Hk/2nXY6uuUWZ2kKI34xwKo3k8lqPxaZOl7VXESWEwDYdr+FpCeJx8BXXv9Pv4K0/vtHp3mpszK3c2m65Ob0aeVG/lG7IZ0/V8aUmU4xq2Z8LJiT4dB8tgPtLseAXOx73YPkR1tOSgPkl9WZ6nblcfyxVlFrKB11otz71nc6NsPSaEMgXC1taQgrFnhcOIPWzW464b+Wfa7ncVf7FayJKqZnKP3eOROYvPp5Y605FUwWOHkazntM6MxDOmT4YDXj/W9LiGYl19dC4XWfy/4GheshP7PhCLg2JDdmeC3nRNk9KLKILzxAWZJgCX/G3BUHB3R2/nq3xGC8AwFCCJQrCVBzrYqYCZyoKni7OZnosX0BPc4Yw4WhUQrATdlDMpW0ozw+jKmWc56uy8VoN0dZGHOsCls+jpsinPJNOSdR1EV1uuS2s13+oTPdOMpVQhASQ5P1wclU+QmvuQ1Th9wrHLCZeuFjNiV86D/fC0tuRAF3VVnBzVibZuSobcA+ZyDlklJb6Xwf4QVZZT4cGpd0BbgJSMJjnBRbd2mW5N2aFk2qXN+mzTNbWnGzgTjXJVakXOerPp5aMWoqCLzl7OZQuMr7WAlqgM6dWih+05F+omyCS3dO7LmTO6AdENOquI11oN5MyUzelQ0U0tk0Fpk+QswGt26K1V7wSbRt6zwPaxMaIhz5WQfA/NEzxzx4qtKmC9nzGwaXrQ53x7EWXuqp1JxrLXj1YaCTMEhiwIBiCAaFAsjdRfAANhxo0OPs/6aLBRoj3y4orORP3d6ZLTbb85csfDOSdtdi9j1R83bcejtACy2+YOaBpy+oxn2I65pEwp9C/Po/50gfx4eUmGnME8+22uYs7T6UKKghenu1hO+/V8CQ1rNJ5M5+NLng+P2/YlSLojoRtPerrkjoYIjTGsU7StCFZb4sRld0v4tDFpxFWAqwsAqFvXlX1CYKG7vZKwa+oyIS/QxUwV56I6AapalzVBMoyN4jFjqM7SKTPUNdkJSJnOy4UZVFaiIJFO0fZ8dViyCr2ygFMGM1qy4hpTrt5boJUxDKxZArLDbBMyDK0ejO5Gz1yoFwxwtGwikF0kVFINTO3RoUfn/dkzzRwNJ+hNeDBt5hN2l488d3XeuasdacryYessLRDMrAeOaYRi84phyaYO2tf9luvatGkGcJ8f1nuYSxbpWekcWYJsKgY9zSUJ9K82bAE2x8uLvNVFufSvgFy3CS1O64WHl+HQH1lySkibPtBlu2bpv3KsoFjlM8eOIjDAV47JV47JYHOsa22JwdyzeMDzzBVU+Wi8zAY9/kAbi8GuItQVyk38oDUK25nVr8+Zc/bibY35nNckT6yHm6XXXCcCbV+ggXq7F9U3d1L43ArO+kA3uKlPBWd6i44ZHlSGGhPKzeSiUHyc1oX9yt9fLs0WO92PJ+lJm9p9zJy99XHOZ9tx95miYvXMXV5WJ0NZRHB5vUe+HpJ34/UYpR4P2E8n8E16TdL1FsHkNizuYU2qKuRytJM/y7jC4juNTTm1cyi0IE5QmNTeCq9CwnVSIvR8p0NuzuuYB7woigrTBIIo8S1Fpls0o9CA5nieVZ6bN613RfEFohiFG7/IVYjZ62X9Z4Bw31kjO0Zx7Q+RijpVtdAk6iMKMbIiombBMyNzbf6Z4bmm0morHNNmWU6Sn2WOYRihVh1GySgcxWCToPhBIDe/CmQTQf/go0JFv2sJnJBCHO1TmgTM08l+ClFKZHZcKN0O22pzZQEoJ90fIPlATrf4EOHk6eAdSjHz22V8/XZbMZnj+MUEXIAWEOkW+kbSMzfEv6yM/Vb638KD1PELzULKl8Q+vCL5/OmDDQUN7lSgX2j2hvk+9V9def5XV+oPiKivxbhnck7+Q97bw4RobSLHyvcIJk072k/Hp/R0Sss2vRRSMybhKZriqQmCKZGLZyvaoZC6R6D+RajfMX/Je7d/RpcmXjhJyC7fE0ZVy+HfH2mfvEkBEpQn39nEgDzLiuR/fLnBDizmEfOY/GRR7HzU/ZtYD3kI5OKE8kO3GBUK+/y5ve87oQMjEtUnh1QUP8b+zv+73J+N93LdoSSEFes0Qb//Ui1On9eaDWGUhokm1UrD44lYYk7OB9T5mPRLmFLivr9ZcvzbN8tCH0ygh/Z27T7X//vkhl82HiLihf0Sy2stJ69vkjx0H07gd4CPhzBDtt7D3vuE9+0X86+Wh8p95e/b/wA=</con:value>
        </con:property>
        <con:property>
          <con:name>tokentype</con:name>
          <con:value>urn:dece:type:tokentype:usernamepassword</con:value>
        </con:property>
        <con:property>
          <con:name>loopuntil</con:name>
          <con:value>25</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTS</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTSGet</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>userrowoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>nodeaccountid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>nodeuserid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>targetURL</con:name>
          <con:value>:</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>alid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value>
        </con:property>
        <con:property>
          <con:name>cid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value>
        </con:property>
        <con:property>
          <con:name>deceorgid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>accountrowoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbc6rMEn33V1juR8twUbzVTqqGa1BRQby+4TAKioAMCPrrz4DRaHb25TupSiXTdPes6V40a35i6+CxXYAximI38Muq+Fpp2fV6GzbWtfqm06k1mp16bd20NjXW5hpNq7Vmm3a7UlYxTpDq49jy49cKSzNMjW7V2KbJtLsM2200XtoNblUpz1CESWbi8kJXytnB83G32PW1kkR+N7Cwi7u+dUC4G8PuBGiDLvHsWjdIlbefV5DFhtGbE8dhl6Lgi40g8jz4AoMD9ZN68vlp4+7E3fpWnEToY08bv1Y+YtM0fUnrL0G0pViapim6QxEfG7vbH5W30i0Y2aq/Ca5rwfID34WW516sHJSGYiewy8DbBpEbO4ffpGYohs5T11AGa5Bp+D8q1OcGBbp/zPQEMsJWDTsWc0tmoA2KkA9ReWqor5Uf/9TAa6gZWT7eBNEBf1n/N0TIPyEvCJFdw7eD3cD9e8ZvqvX2E8Gu6kMvwe4JDXOWhBZEuDyO0MbNBi4m3LNxueh+OcM3giH4Xzryk3rESWBT31RGdLcIx/9Pux5bdc0ys7wEvTlrOxgtFLcpdaodHnun/XkSr96ncgxfCwiPzldQ905/rL/y9E6rj6BdUxpdUm8Dh2tlFoh6uMq05WZ/YKqbjm/358ez47ZVb3BwIzBenx3meLbAZYiWdW2nOFGM+t55rYCDtDzGpT1wYLJMq52WNqbWyrktOAhHy8A99ar+cdboycLUj+1s0vHHGFHjvdSytUbYU0aJbnID15AWB1Pgd3orXpQ4HYQctDcti+1cTKhJAX79PNPjGfJz9dG5OGT+/4KjO6IVW/eFkA+KDXk7Y/SmqaqYXAQBnCdbkKo82JLfHRjy2/3R2btKJ6V5oOsyEAXe20kDDewVwEwl3tGE2UzLhAvo8dvhjASaJeCteM2QUjFdijNdf5dSx7SVGamIl6wu0lADuAgWHE0ypJlomJKmgeBqyzRxrWQ7baKlqr4USySBKGXhxVY6MVIyF7Iqp004djnhktViRuzyeXAYntam5GmCpgiTozJR13VRl3rAWM4hKyck9jI4hEFpOeUfgnoh2gEkpzTZE1w0c59q5pQdioZV2Mxnm6YqPU3HqaAXp1JKUtqbTS+ftRB4TbAPUiaZYHytBTQFeUivFj1szTlfM0AqbovgvpTaoxsQTafTknCt1UBKDcmYDmXNUFMJFDZRSj28ZofOWnFOsK5nPRPsHhsj6NJc9slz3zjBM3csWYoM1ocZA+uGA13OtRZBul21U1Ff9vrBSiVphkCXeF4HBBAN8qOR+vNgwM+4Ueh2WBcNNnJwQE5U0pigvz9dMrrt1kfb8XDOiZt9a6y447plO5TqQXZX3wNVRXafcXTLNpaUIfrupTnqTxfIjZaXeMjpTNNtcyVjnkwXYuC17PfFctqvZkuom6PxZDofX7JseNy1L178PuLfo0lPE7ejIUJjDKsUbcm82RY5Yfm+I3zaGDTiSmCr8QAou+1WcgmB+ffdlYTvhiYR8gJNSBVhLigToChVSeVFXd/IDjOGyiyZMkNNlWyPlOm8XBheaSXwIukUbc1X4ZKV6ZUJ7CKZ3pDkrT7lqr0FWulDz5zFIA1nG59haCXU3zdauoVazgBbTSc8eYv4UqKCqTUKe3TWnzVp5qjbXm/SAdN6NmH32cjZrs777WpPmrJ8eHWWJvBm5gPHVEKxeUk3JUMD7ev7lmnqtG548JCF6wPMRJP0rAgOTF4yZJ2eZqII+lcbNgGb4eVF2mmCVMSXQKZZhBan9cLBS3/ojkwpIaRNHuiyW7P0XzmWU6z0zLGjAHTwlWPSlWMS2ByraltkMNcUQjxPt7wiHfXWbNDrhLS+GOxLfFWmtrHrNUZ+OzX71TlzTlvOTp/PO6roCFV/s3Tq65inrQvUUW/fUlxjL/rNhnfWBprOTV3KO9M7dEzxoDRUGV+qxxeZ6kRJlT+s3MPlUm+w08N4kpzUqdXHzNlZH+eddDd+b1JUpJy5S2t10uVFAJfX78jXIXk3Xsco9ThgnybwTXpNkvUOwfi2zL/DqliWycfRiv8s43KLa9c2hWs3zLUgjpEfV97yqFzCdRMi9Fy7S76c1zVodGS2zctsk2mwXKMt0Q2akWlAc50OzTblm9a7ovgCUQj8jZvvlYvZ68f6zwDhobtGVoSiyh8y5XUqq75B1EfgY2QGr5U2y8pCU2q1pQYtC3WBb9c7EiOwLZajWaEhVMrDIB75owhsYhQ9COTWV4FsIOiGLspV9IeWwDEpxNE6JbHHvJysFx8lRGZHudLtso02VxSAspNDCMkDMt2iMMDxS+iEhZj57TG+PrudmPjYbu6Ac9A8It1C30j6+g3xLydjv5X+t/Qgsd1cs5DyxZELr0ieH32yIafBnQos+eE6N9R356+Gp8TU1zPd97JPLrxT+n7lIZKZqKriWoFJ7Y/Wy/ElOZ2SotqtXDFGJD3FUDQ1QTAhqu9sBnvkU/cM1L/o7TvmL/ve7c/oktjxJzF5WQ+EGOVi+fe71lM0KUCMsvg7m+CR21W++R8vYLALcz9iHpM/aRDZn3X/JtfDPgRyPmhcf5uvcqF8fm7wB6G7MCBZXTJrgugx93fx3+39bLyX6w4lJqxYJzH6/ZNyPkReKxaEQeLHqlgpDI+DrcAcn0PU/XT6JU2hVD+uHhn+7dVjoQ0m0EEHq3L3df/uXHOLxkNEorBbYHmtZOQSTTb3tw+D9APg97OUlr+ZpeBewKeTvP1i/tXyUNOvzH77Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10020_RightsTokenUpdate - Policy - RTL - NoPolicyEnforcement - US - MMPA - Can - create - RightsToken - that - IS - ADULT - = - 'n' - with - policy - and - all - rating - as - per - Matrix</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_Policy_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertCommon</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rights GET  Data Validation" searchProperties="true" id="a0f7787f-377d-4288-907f-d4e0248cad5c">
      <con:settings/>
      <con:testStep type="groovy" name="Extract DB results for RightsToken GET" id="996b951a-7e4c-440d-bb1e-68cfaa41e087">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

mydbRights = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));

//getRequestContentAsXml

testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("DBrightstokenid",CallingTCase.getPropertyValue("DBrightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));


// Fetch RightsToken info from RIGHTS_TOKEN table
RT_Data = mydbRights.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data2 = mydbRights.rightstokenSoldAsGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data3 = mydbRights.rightstokenPMPPGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data4 = mydbRights.rightstokenFFLocGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data5 = mydbRights.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));

testCase.setPropertyValue("DbResultRTXml",RT_Data.toString());
testCase.setPropertyValue("DbResultRT-SoldAsXml",RT_Data2.toString());
testCase.setPropertyValue("DbResultRT-PMPPXml",RT_Data3.toString());
testCase.setPropertyValue("DbResultRT-FFLocXml",RT_Data4.toString());</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Data Validation DB - RightsTokenGet Response" id="2d08b030-48b1-4b60-8b95-4ca97ae6200a">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*
import groovy.time.*
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

// Assert RightsToken Information Expected &amp; Actual 
def expectRTG_PPContentProfile  = new ArrayList();
def expectRTG_PPDMR  = new ArrayList();
def expectRTG_PPCanDownload  = new ArrayList();
def expectRTG_PPCanStream  = new ArrayList();
def expectRTG_PPDMProfile  = new ArrayList();
def expectRTG_LicAcqBaseLoc = new ArrayList();
def expectRTG_FFWebLoc_Location = new ArrayList();
def expectRTG_FFWebLoc_Pref = new ArrayList();
def expectRTG_FFManifestLoc_Location = new ArrayList();
def expectRTG_FFManifestLoc_Pref = new ArrayList();
def actRTG_PPContentProfile  = new ArrayList();
def actRTG_PPDMR  = new ArrayList();
def actRTG_PPCanDownload  = new ArrayList();
def actRTG_PPCanStream  = new ArrayList();
def actRTG_PPDMProfile  = new ArrayList();
def actRTG_LicAcqBaseLoc = new ArrayList();
def actRTG_FFWebLoc_Location = new ArrayList();
def actRTG_FFWebLoc_Pref = new ArrayList();
def actRTG_FFManifestLoc_Location = new ArrayList();
def actRTG_FFManifestLoc_Pref = new ArrayList();


def Val_DbResultRTXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRTXml"));
def Val_DbResultRTSoldAsXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-SoldAsXml"));
def Val_DbResultRTPMPPXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-PMPPXml"));
def Val_DbResultFFLocXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-FFLocXml"));

def PMPPSize =  Val_DbResultRTPMPPXml.ResultSet.Row.size();
def LicAcqSize = Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC.size();
//def FFWebLocSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.size();
//def FFManifestSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.size();

def rcFFWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.@rowNumber.collect{ it.text() }
def rcFFManifest = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.@rowNumber.collect{ it.text() }
def rcFFWeblocSize = rcFFWebloc.size();
def rcFFManifestSize = rcFFManifest.size();

RTObjType = testCase.getPropertyValue("RTObjType");


switch (RTObjType) {
	
	case "RightsTokenFull":

		// Rights Token 
		expectRTG_Accountid = testCase.getPropertyValue("Accountid");
		expectRTG_Lockerid = "urn:dece:rightslockerid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.RIGHTS_LOCKER_OID;
		expectRTG_RightsTokenID = testCase.getPropertyValue("rightstokenid");
		expectRTG_ALID = Val_DbResultRTXml.ResultSet.Row.ALID;
		expectRTG_ContentID = Val_DbResultRTXml.ResultSet.Row.CONTENT_ID;

		// Rights SoldAs 
		
		expectRTG_SoldAs_Lang = Val_DbResultRTSoldAsXml.ResultSet.Row.LANGUAGE_ID;
		expectRTG_SoldAs_PRODUCT_ID = Val_DbResultRTSoldAsXml.ResultSet.Row.PRODUCT_ID;
		expectRTG_SoldAs_DisplayName = Val_DbResultRTSoldAsXml.ResultSet.Row.DISPLAY_NAME;
		expectRTG_SoldAs_ContentID = Val_DbResultRTSoldAsXml.ResultSet.Row.CONTENT_ID;
		expectRTG_SoldAs_BUNDLE_ID = Val_DbResultRTSoldAsXml.ResultSet.Row.BUNDLE_ID;

		
		
		// Rights Purchase Media Purchase Profiles
		
		for ( i in 0..PMPPSize-1 ){
	
		expectRTG_PPContentProfile += ("urn:dece:type:mediaprofile:" + Val_DbResultRTPMPPXml.ResultSet.Row.PURCHASED_CONTENT_PROFILE[i]).toString();
		expectRTG_PPDMR += (Val_DbResultRTPMPPXml.ResultSet.Row.DISCRETE_MEDIA_RIGHTS_REMAIN[i]).toString();
		//expectRTG_PPDMProfile = 
		expectRTG_PPCanDownload += (Val_DbResultRTPMPPXml.ResultSet.Row.DOWNLOAD[i]).toString();
		expectRTG_PPCanStream += (Val_DbResultRTPMPPXml.ResultSet.Row.STREAM[i]).toString();
		
		}

		// Rights Status 
		expectRTG_RS_CreatedBy = "urn:dece:org:org:dece:"+ Val_DbResultRTXml.ResultSet.Row.CREATED_BY;
		expectRTG_PS_CreationDate = Val_DbResultRTXml.ResultSet.Row.CREATED_DATE;
		expectRTG_RS_Value = "urn:dece:type:status:"+ Val_DbResultRTXml.ResultSet.Row.STATUS_ID;

		// Rights Licence Acq Base Location
		
		for ( i in 0..LicAcqSize-1 ){
		
		expectRTG_LicAcqBaseLoc += Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC[i];
		}

		// Rights Fullfillment WebLocation

		for ( int i in 0..rcFFWeblocSize-1 ){
		
		int j = rcFFWebloc[i].toInteger();
		expectRTG_FFWebLoc_Location += Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1];
		expectRTG_FFWebLoc_Pref += Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1];
		}

		// Rights Fullfillment Manifest Location


		for ( int i in 0..rcFFManifestSize-1 ){

		int j = rcFFManifest[i].toInteger();
		expectRTG_FFManifestLoc_Location += Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1];	
		expectRTG_FFManifestLoc_Pref += Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1];
	
		}

		// Rights Purchase Infomation
				
		expectRTG_PI_NodeID = "urn:dece:org:org:dece:"+Val_DbResultRTXml.ResultSet.Row.NODE_OID;
		expectRTG_PI_RetailerTrax = Val_DbResultRTXml.ResultSet.Row.RETAILER_TRANSACTION;
		expectRTG_PI_PurcaseAccount = "urn:dece:accountid:org:dece:"+Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID;
		expectRTG_PI_PurchaseUser = "urn:dece:userid:org:dece:"+Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_USER_OID;
		expectRTG_PI_PurchaseTime = Val_DbResultRTXml.ResultSet.Row.PURCHASE_TIME;

	break;

	case "RightsTokenInfo":
			
		// Rights Token 
		expectRTG_Accountid = testCase.getPropertyValue("Accountid");
		expectRTG_RightsTokenID = testCase.getPropertyValue("rightstokenid");
		expectRTG_ALID = Val_DbResultRTXml.ResultSet.Row.ALID;
		expectRTG_ContentID = Val_DbResultRTXml.ResultSet.Row.CONTENT_ID;

		// Rights SoldAs 
		
		expectRTG_SoldAs_Lang = Val_DbResultRTSoldAsXml.ResultSet.Row.LANGUAGE_ID;
		expectRTG_SoldAs_PRODUCT_ID = Val_DbResultRTSoldAsXml.ResultSet.Row.PRODUCT_ID;
		expectRTG_SoldAs_DisplayName = Val_DbResultRTSoldAsXml.ResultSet.Row.DISPLAY_NAME;
		expectRTG_SoldAs_ContentID = Val_DbResultRTSoldAsXml.ResultSet.Row.CONTENT_ID;
		expectRTG_SoldAs_BUNDLE_ID = Val_DbResultRTSoldAsXml.ResultSet.Row.BUNDLE_ID;

		// Rights Purchase Media Purchase Profiles
		
		for ( i in 0..PMPPSize-1 ){
	
		expectRTG_PPContentProfile += "urn:dece:type:mediaprofile:" + Val_DbResultRTPMPPXml.ResultSet.Row.PURCHASED_CONTENT_PROFILE[i];
		expectRTG_PPDMR += Val_DbResultRTPMPPXml.ResultSet.Row.DISCRETE_MEDIA_RIGHTS_REMAIN[i];
		//expectRTG_PPDMProfile = 
		expectRTG_PPCanDownload += Val_DbResultRTPMPPXml.ResultSet.Row.DOWNLOAD[i].toString();
		expectRTG_PPCanStream += Val_DbResultRTPMPPXml.ResultSet.Row.STREAM[i].toString();
		
		}

		// Rights Status 
		expectRTG_RS_CreatedBy = "urn:dece:org:org:dece:"+ Val_DbResultRTXml.ResultSet.Row.CREATED_BY;
		expectRTG_PS_CreationDate = Val_DbResultRTXml.ResultSet.Row.CREATED_DATE;
		expectRTG_RS_Value = "urn:dece:type:status:"+ Val_DbResultRTXml.ResultSet.Row.STATUS_ID;

		// Rights Licence Acq Base Location
		
		for ( i in 0..LicAcqSize-1 ){
		
		expectRTG_LicAcqBaseLoc += Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC;
		}

		// Rights Fullfillment WebLocation

		for ( int i in 0..rcFFWeblocSize-1 ){
		
		int j = rcFFWebloc[i].toInteger();
		expectRTG_FFWebLoc_Location += Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1];
		expectRTG_FFWebLoc_Pref += Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1];
		}

		// Rights Fullfillment Manifest Location


		for ( int i in 0..rcFFManifestSize-1 ){

		int j = rcFFManifest[i].toInteger();
		expectRTG_FFManifestLoc_Location += Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1];	
		expectRTG_FFManifestLoc_Pref += Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1];
	
		}

	break;

	case "RightsTokenBasic":
			
		// Rights Token 
		expectRTG_Accountid = testCase.getPropertyValue("Accountid");
		expectRTG_RightsTokenID = testCase.getPropertyValue("rightstokenid");
		expectRTG_ALID = Val_DbResultRTXml.ResultSet.Row.ALID;
		expectRTG_ContentID = Val_DbResultRTXml.ResultSet.Row.CONTENT_ID;

		// Rights SoldAs 
		
		expectRTG_SoldAs_Lang = Val_DbResultRTSoldAsXml.ResultSet.Row.LANGUAGE_ID;
		expectRTG_SoldAs_PRODUCT_ID = Val_DbResultRTSoldAsXml.ResultSet.Row.PRODUCT_ID;
		expectRTG_SoldAs_DisplayName = Val_DbResultRTSoldAsXml.ResultSet.Row.DISPLAY_NAME;
		expectRTG_SoldAs_ContentID = Val_DbResultRTSoldAsXml.ResultSet.Row.CONTENT_ID;
		expectRTG_SoldAs_BUNDLE_ID = Val_DbResultRTSoldAsXml.ResultSet.Row.BUNDLE_ID;

		// Rights Purchase Media Purchase Profiles
		
		for ( i in 0..PMPPSize-1 ){
	
		expectRTG_PPContentProfile += "urn:dece:type:mediaprofile:" + Val_DbResultRTPMPPXml.ResultSet.Row.PURCHASED_CONTENT_PROFILE[i];
		expectRTG_PPDMR += Val_DbResultRTPMPPXml.ResultSet.Row.DISCRETE_MEDIA_RIGHTS_REMAIN[i];
		//expectRTG_PPDMProfile = 
		expectRTG_PPCanDownload += Val_DbResultRTPMPPXml.ResultSet.Row.DOWNLOAD[i].toString();
		expectRTG_PPCanStream += Val_DbResultRTPMPPXml.ResultSet.Row.STREAM[i].toString();
		
		}

		// Rights Status 
		expectRTG_RS_CreatedBy = "urn:dece:org:org:dece:"+ Val_DbResultRTXml.ResultSet.Row.CREATED_BY;
		expectRTG_PS_CreationDate = Val_DbResultRTXml.ResultSet.Row.CREATED_DATE;
		expectRTG_RS_Value = "urn:dece:type:status:"+ Val_DbResultRTXml.ResultSet.Row.STATUS_ID;

	break; 

}

def Val_RightsResXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsResXml"));

		actRTG_AccountID = Val_RightsResXml.@AccountID.toString();
		actRTG_RightsLockerID = Val_RightsResXml.@RightsLockerID.toString();
		actRTG_RightsTokenID =  Val_RightsResXml.RightsToken."$RTObjType".@RightsTokenID.toString();
		actRTG_ALID = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.@ALID.toString();
		actRTG_ContentID = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.@ContentID.toString();
		actRTG_SoldAsLang = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.SoldAs.DisplayName.@Language.toString();
		actRTG_DisplayName = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.SoldAs.DisplayName;
		actRTG_SoldAsContentID = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.SoldAs.ContentID;
		actRTG_SoldAsBUNDLE_ID = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.SoldAs.BundleID;

// Rights Purchase Media Purchase Profiles
		actPMPPSize = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.RightsProfiles.PurchaseProfile.size();

		for ( i in 0..actPMPPSize-1 ){
	
			actRTG_PPContentProfile +=(Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.RightsProfiles.PurchaseProfile.@ContentProfile[i]).toString();
			actRTG_PPDMR +=(Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining[i]).toString();
			actRTG_PPDMProfile +=(Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining.@DiscreteMediaProfile[i]).toString();
			if ((Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.RightsProfiles.PurchaseProfile.CanDownload[i]).toString() == 'true'){
			actRTG_PPCanDownload += 'Y';
			}
			else{
			actRTG_PPCanDownload += 'N';
			}
			
			if ((Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.RightsProfiles.PurchaseProfile.CanStream[i]).toString()== 'true'){
			actRTG_PPCanStream += 'Y';
			}
			else{
			actRTG_PPCanStream += 'N';
			}
		}


// Actual Rights Status 

		actRTG_RS_CreatedBy = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.ResourceStatus.Current.@CreatedBy).toString();
		CreationDate = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.ResourceStatus.Current.@CreationDate).toString();
		actRTG_PS_CreationDate = (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[1];
		actRTG_RS_Value = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.ResourceStatus.Current.Value).toString();

//  Actual Rights Licence Acq Base Location

 		actLicAcqSize = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.LicenseAcqBaseLoc.size();
 	
 		for ( i in 0..actLicAcqSize-1 ){
		
			actRTG_LicAcqBaseLoc += Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.LicenseAcqBaseLoc[i];
		}

// Actual Rights Fullfillment WebLoc

	actFFWeblocSize = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.FulfillmentWebLoc.size();
	

		for ( int i in 0..actFFWeblocSize-1 ){
	
		actRTG_FFWebLoc_Location += (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.FulfillmentWebLoc.Location[i]).toString();
		actRTG_FFWebLoc_Pref += (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.FulfillmentWebLoc.Preference[i]).toString();
		}


// Actual Rights Fullfillment ManifestLoc

	actFFManifestSize = Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.FulfillmentManifestLoc.size();
	

		for ( int i in 0..actFFManifestSize-1 ){
	
		actRTG_FFManifestLoc_Location += (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.FulfillmentManifestLoc.Location[i]).toString();
		actRTG_FFManifestLoc_Pref += (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.FulfillmentManifestLoc.Preference[i]).toString();
		}

// Actual Rights Purchase Info
		actRTG_PI_NodeID = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.PurchaseInfo.NodeID).toString();
		actRTG_PI_RetailerTrax = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.PurchaseInfo.RetailerTransaction).toString();
		actRTG_PI_PurcaseAccount = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.PurchaseInfo.PurchaseAccount).toString();
		actRTG_PI_PurchaseUser = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.PurchaseInfo.PurchaseUser).toString();
		PurchaseTime = (Val_RightsResXml.RightsToken."$RTObjType".RightsTokenData.PurchaseInfo.PurchaseTime).toString();
		actRTG_PI_PurchaseTime	= (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[1];	

// Assert RightsToken Information DB and RightsTokenGet Response.

// Assert RightsToken Account ID 

		log.info "Rights TokenGet Accountid Expected : [$expectRTG_Accountid] - Actual Recieved: [$actRTG_AccountID]";
 		assert expectRTG_Accountid == actRTG_AccountID;

// Assert RightsToken LockerId

		log.info "Rights TokenGet Lockerid Expected : [$expectRTG_Lockerid] - Actual Recieved: [$actRTG_RightsLockerID]";
		 assert expectRTG_Lockerid == actRTG_RightsLockerID;

// Assert RightsToken id 

		log.info "Rights TokenGet Tokenid Expected : [$expectRTG_RightsTokenID] - Actual Recieved: [$actRTG_RightsTokenID]";
		//assert expectRTG_RightsTokenID == actRTG_RightsTokenID;

// Assert RightsToken ALID 

		log.info "Rights TokenGet Alid Expected : [$expectRTG_ALID] - Actual Recieved: [$actRTG_ALID]";
 		assert expectRTG_ALID == actRTG_ALID;

// Assert RightsToken ContentID 

		log.info "Rights TokenGet ContentID Expected : [$expectRTG_ALID] - Actual Recieved: [$actRTG_ContentID]"; 
 		assert expectRTG_ContentID == actRTG_ContentID;

// Assert RightsToken SoldAS Language

		log.info "Rights TokenGet SoldAs Language Expected : [$expectRTG_SoldAs_Lang] - Actual Recieved: [$actRTG_SoldAsLang]";
		assert expectRTG_SoldAs_Lang == actRTG_SoldAsLang;

// Assert RightsToken SoldAS DisplayName

		log.info "Rights TokenGet SoldAs DisplayName Expected : [$expectRTG_SoldAs_DisplayName] - Actual Recieved:[$actRTG_DisplayName]";
 		assert expectRTG_SoldAs_DisplayName == actRTG_DisplayName;

		if (expectRTG_SoldAs_ContentID){
		// Assert RightsToken SoldAs ContentID		
		log.info "Rights TokenGet SoldAs ContentID Expected : [$expectRTG_SoldAs_ContentID] - Actual Recieved:[$actRTG_SoldAsContentID]";
 		assert expectRTG_SoldAs_ContentID == actRTG_SoldAsContentID;
		}
		else{
		// Assert RightsToken SoldAs BUNDLE_ID	
		log.info "Rights TokenGet SoldAs BUNDLE_ID Expected : [$expectRTG_SoldAs_BUNDLE_ID] - Actual Recieved:[$actRTG_SoldAsBUNDLE_ID]";
		assert expectRTG_SoldAs_BUNDLE_ID == actRTG_SoldAsBUNDLE_ID;
		}
// Assert RightsToken Purchase Profile

		//RightsToken Purchase Profile- ContentProfile.
		log.info "Rights TokenGet Purchase ContentProfile Expected : $expectRTG_PPContentProfile - Actual Recieved:$actRTG_PPContentProfile";
		assert expectRTG_PPContentProfile == actRTG_PPContentProfile;

		//RightsToken Purchase Profile- DiscreteMediaRightsRemaining.
		log.info "Rights TokenGet Purchase DiscreteMediaRightsRemaining Expected : $expectRTG_PPDMR - Actual Recieved:$actRTG_PPDMR";
		assert expectRTG_PPDMR == actRTG_PPDMR;
		
		//RightsToken Purchase Profile- CanDownload
		log.info "Rights TokenGet Purchase CanDownload Expected : $expectRTG_PPCanDownload - Actual Recieved:$actRTG_PPCanDownload";
		assert expectRTG_PPCanDownload == actRTG_PPCanDownload;
		
		//RightsToken Purchase Profile- CanStream
		log.info "Rights TokenGet Purchase CanStream Expected : $expectRTG_PPCanStream - Actual Recieved:$actRTG_PPCanStream";
		assert expectRTG_PPCanStream == actRTG_PPCanStream;

// Assert Rights ResourceStatus 

		log.info "Rights TokenGet ResourceStatus CreatedBy Expected : [$expectRTG_RS_CreatedBy] - Actual Recieved: [$actRTG_RS_CreatedBy]";
		assert expectRTG_RS_CreatedBy == actRTG_RS_CreatedBy;
		
		log.info "Rights TokenGet ResourceStatus CreationDate Expected : [$expectRTG_PS_CreationDate] - Actual Recieved: [$actRTG_PS_CreationDate]";
		//assert expectRTG_PS_CreationDate == actRTG_PS_CreationDate;

		log.info "Rights TokenGet ResourceStatus Value Expected : [$expectRTG_RS_Value] - Actual Recieved: [$actRTG_RS_Value]";
		assert expectRTG_RS_Value == actRTG_RS_Value;

		
//  Assert Rights Licence Acq Base Location

		log.info "Rights TokenGet LicenceAcqBase Location Expected : [$expectRTG_LicAcqBaseLoc] - Actual Recieved: [$actRTG_LicAcqBaseLoc]";
		assert expectRTG_LicAcqBaseLoc == actRTG_LicAcqBaseLoc;

//  Assert Rights Fulfillment WebLoc

		//Assert FF Web location 
		log.info "Rights TokenGet FF Web location Expected : [$expectRTG_FFWebLoc_Location] - Actual Recieved: [$actRTG_FFWebLoc_Location]";
		assert expectRTG_FFWebLoc_Location == actRTG_FFWebLoc_Location;

	    // Assert Web FF preference

	    log.info "Rights TokenGet Web FF preference Expected : [$expectRTG_FFWebLoc_Pref] - Actual Recieved: [$actRTG_FFWebLoc_Pref]";
		assert expectRTG_FFWebLoc_Pref == actRTG_FFWebLoc_Pref;

//  Assert Rights Fulfillment Manifest Location

		//Assert FF Manifest location 
		log.info "Rights TokenGet FF Manifest location Expected : [$expectRTG_FFManifestLoc_Location] - Actual Recieved: [$actRTG_FFManifestLoc_Location]";
		assert expectRTG_FFManifestLoc_Location == actRTG_FFManifestLoc_Location;

	    // Assert FF Manifest  preference

	    log.info "Rights TokenGet FF Manifest  preference Expected : [$actRTG_FFManifestLoc_Pref] - Actual Recieved: [$actRTG_FFManifestLoc_Pref]";
		assert expectRTG_FFManifestLoc_Pref == actRTG_FFManifestLoc_Pref;


//  Assert Rights PurchaseInfo Location

		log.info "Rights TokenGet PurchaseInfo  NodeID Expected : [$expectRTG_PI_NodeID] - Actual Recieved: [$actRTG_PI_NodeID]";
		assert expectRTG_PI_NodeID == actRTG_PI_NodeID;

		log.info "Rights TokenGet PurchaseInfo  RetailerTrax Expected : [$expectRTG_PI_RetailerTrax] - Actual Recieved: [$actRTG_PI_RetailerTrax]";
		assert expectRTG_PI_RetailerTrax == actRTG_PI_RetailerTrax;

		log.info "Rights TokenGet PurchaseInfo  PurcaseAccount Expected : [$expectRTG_PI_PurcaseAccount] - Actual Recieved: [$actRTG_PI_PurcaseAccount]";
		assert expectRTG_PI_PurcaseAccount == actRTG_PI_PurcaseAccount;
		
		log.info "Rights TokenGet PurchaseInfo  PurchaseUser Expected : [$expectRTG_PI_PurchaseUser] - Actual Recieved: [$actRTG_PI_PurchaseUser]";
		assert expectRTG_PI_PurchaseUser == actRTG_PI_PurchaseUser;

		log.info "Rights TokenGet PurchaseInfo  PurchaseTime Expected : [$expectRTG_PI_PurchaseTime] - Actual Recieved: [$actRTG_PI_PurchaseTime]";
		def expecPurchaseTime = new Date().parse("yyyy-mm-dd hh:mm:ss.SSS",expectRTG_PI_PurchaseTime.toString());
		def actPurchaseTime = new Date().parse("yyyy-mm-dd hh:mm:ss.SSS",actRTG_PI_PurchaseTime.toString());

		//log.info expecPurchaseTime.getTime() + ":" + actPurchaseTime.getTime();
		assert expecPurchaseTime.getTime() == actPurchaseTime.getTime();</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>5.	RightsTokenUpdate – add PP , for which DMR resource doesn’t Exist :  e.g [ RTC = { SD,PD} => DMR = {SD}  => RTU  {add HD} ]</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>urn:dece:rightstokenid:org:dece:CC52A32E42A4050FE0401F0A2222596318</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value>urn:dece:accountid:org:dece:CC52A32E4258050FE0401F0A2222596318</con:value>
        </con:property>
        <con:property>
          <con:name>DBrightstokenid</con:name>
          <con:value>CC52A32E42A4050FE0401F0A2222596318</con:value>
        </con:property>
        <con:property>
          <con:name>DbResultRTXml</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <ACCOUNT_OID>CC52A32E425D050FE0401F0A2222596318</ACCOUNT_OID>
      <USER_OID>CC52A32E426B050FE0401F0A2222596318</USER_OID>
      <RIGHTS_LOCKER_OID>CC52A32E4264050FE0401F0A2222596318</RIGHTS_LOCKER_OID>
      <NODE_OID>222259</NODE_OID>
      <PURCHASE_NODE_ACCOUNT_OID>CC52A32E4258050FE0401F0A2222596318</PURCHASE_NODE_ACCOUNT_OID>
      <RETAILER_TRANSACTION>RetailerTransaction_1_node222259_RetailerNode</RETAILER_TRANSACTION>
      <TRANSACTION_TYPE>null</TRANSACTION_TYPE>
      <PURCHASE_NODE_USER_OID>CC52A32E4266050FE0401F0A2222596318</PURCHASE_NODE_USER_OID>
      <PURCHASE_TIME>2011-06-24 15:12:03.0</PURCHASE_TIME>
      <ALID>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</ALID>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <RENTAL_ABSOLUTE_EXPIRATION>null</RENTAL_ABSOLUTE_EXPIRATION>
      <RENTAL_DOWNLOAD_TO_PLAY_MAX>null</RENTAL_DOWNLOAD_TO_PLAY_MAX>
      <RENTAL_PLAY_DURATION_MAX>null</RENTAL_PLAY_DURATION_MAX>
      <LICENSE_ACQ_BASE_LOC>ns3.google.com</LICENSE_ACQ_BASE_LOC>
      <CREATED_DATE>2012-10-18 09:03:35.85</CREATED_DATE>
      <CREATED_BY>222259</CREATED_BY>
      <UPDATED_DATE>null</UPDATED_DATE>
      <UPDATED_BY>null</UPDATED_BY>
      <STATUS_ID>active</STATUS_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsReqXml</con:name>
          <con:value><![CDATA[<ns4:RightsTokenData ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="http://www.decellc.org/schema/2010/10/dece" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><ns4:SoldAs><ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName><ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID></ns4:SoldAs><ns4:RightsProfiles><ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd"><ns4:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining><ns4:CanDownload>true</ns4:CanDownload><ns4:CanStream>true</ns4:CanStream></ns4:PurchaseProfile><ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd"><ns4:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining><ns4:CanDownload>true</ns4:CanDownload><ns4:CanStream>true</ns4:CanStream></ns4:PurchaseProfile><ns4:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd"><ns4:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</ns4:DiscreteMediaRightsRemaining><ns4:CanDownload>true</ns4:CanDownload><ns4:CanStream>true</ns4:CanStream></ns4:PurchaseProfile></ns4:RightsProfiles><ns4:ResourceStatus><ns4:Current CreatedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") CreationDate="2011-02-17T15:12:03"><ns4:Value>urn:dece:type:status:active</ns4:Value><ns4:Description>new rights token</ns4:Description></ns4:Current></ns4:ResourceStatus><ns4:LicenseAcqBaseLoc>https://dl.bestbuy.com/p/bb93827398sdjdhdsns3.google.com</ns4:LicenseAcqBaseLoc><ns4:FulfillmentWebLoc><ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location><ns4:Preference>1</ns4:Preference></ns4:FulfillmentWebLoc><ns4:FulfillmentWebLoc><ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location><ns4:Preference>1</ns4:Preference></ns4:FulfillmentWebLoc><ns4:FulfillmentManifestLoc><ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location><ns4:Preference>3</ns4:Preference></ns4:FulfillmentManifestLoc><ns4:FulfillmentManifestLoc><ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location><ns4:Preference>1</ns4:Preference></ns4:FulfillmentManifestLoc><ns4:PurchaseInfo><ns4:NodeID>urn:dece:org:org:dece:222259</ns4:NodeID><ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction><ns4:PurchaseAccount>urn:dece:accountid:org:dece:107002urn:dece:accountid:org:dece:107006</ns4:PurchaseAccount><ns4:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</ns4:PurchaseUser><ns4:PurchaseTime>2011-06-24T15:12:03</ns4:PurchaseTime></ns4:PurchaseInfo><ns4:ViewControl><ns4:AllowedUser>urn:dece:userid:org:dece:12222599</ns4:AllowedUser></ns4:ViewControl></ns4:RightsTokenData>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<RightsToken RightsTokenID="urn:dece:rightstokenid:org:dece:CC52A32E42A4050FE0401F0A2222596318" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RightsTokenFull ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt">
      <SoldAs>
         <DisplayName Language="en">Avatar BestBuy Special Packaging</DisplayName>
         <ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ContentID>
      </SoldAs>
      <RightsProfiles>
         <PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd">
            <DiscreteMediaRightsRemaining FulfillmentMethod="urn:dece:type:discretemediaformat:bluray:packaged urn:dece:type:discretemediaformat:dvd:cssrecordable urn:dece:type:discretemediaformat:dvd:packaged urn:dece:type:discretemediaformat:securedigital">1</DiscreteMediaRightsRemaining>
            <CanDownload>true</CanDownload>
            <CanStream>true</CanStream>
         </PurchaseProfile>
         <PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd">
            <CanDownload>true</CanDownload>
            <CanStream>true</CanStream>
         </PurchaseProfile>
         <PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:pd">
            <CanDownload>true</CanDownload>
            <CanStream>true</CanStream>
         </PurchaseProfile>
      </RightsProfiles>
      <ResourceStatus>
         <Current CreatedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") CreationDate="2012-10-18T09:03:35.085Z">
            <Value>urn:dece:type:status:active</Value>
         </Current>
         <History>
            <Prior ModifiedBy="urn:dece:org:org:dece:"+testProject.getPropertyValue("NodeID") ModificationDate="2012-10-18T09:03:35.090Z">
               <Value>urn:dece:type:status:active</Value>
               <Description>RightsToken has been created.</Description>
            </Prior>
         </History>
      </ResourceStatus>
      <LicenseAcqBaseLoc>ns3.google.com</LicenseAcqBaseLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/bbb</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/aaa</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ccc</Location>
         <Preference>1</Preference>
      </FulfillmentManifestLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ddd</Location>
         <Preference>3</Preference>
      </FulfillmentManifestLoc>
      <PurchaseInfo>
         <NodeID>urn:dece:org:org:dece:222259</NodeID>
         <RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</RetailerTransaction>
         <PurchaseAccount>urn:dece:accountid:org:dece:CC52A32E4258050FE0401F0A2222596318</PurchaseAccount>
         <PurchaseUser>urn:dece:userid:org:dece:CC52A32E4266050FE0401F0A2222596318</PurchaseUser>
         <PurchaseTime>2011-06-24T15:12:03.000Z</PurchaseTime>
      </PurchaseInfo>
      <RightsLockerID>urn:dece:rightslockerid:org:dece:CC52A32E4264050FE0401F0A2222596318</RightsLockerID>
   </RightsTokenFull>
</RightsToken>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RTObjType</con:name>
          <con:value>RightsTokenFull</con:value>
        </con:property>
        <con:property>
          <con:name>DbResultRT-SoldAsXml</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_SOLD_AS_OID>CC52A32E42AC050FE0401F0A2222596318</RIGHTS_SOLD_AS_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <DISPLAY_NAME>Avatar BestBuy Special Packaging</DISPLAY_NAME>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <PRODUCT_ID>null</PRODUCT_ID>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
      <LANGUAGE_ID>en</LANGUAGE_ID>
      <BUNDLE_ID>null</BUNDLE_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>DbResultRT-PMPPXml</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <PURCHASE_PROFILE_OID>CC52A32E42A9050FE0401F0A2222596318</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>pd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
      <UPDATED_DATE>null</UPDATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <PURCHASE_PROFILE_OID>CC52A32E42AA050FE0401F0A2222596318</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>sd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
      <UPDATED_DATE>null</UPDATED_DATE>
    </Row>
    <Row rowNumber='3'>
      <PURCHASE_PROFILE_OID>CC52A32E42AB050FE0401F0A2222596318</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>1</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>hd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
      <UPDATED_DATE>null</UPDATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>DbResultRT-FFLocXml</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <FULFILLMENT_LOC_OID>CC52A32E42A6050FE0401F0A2222596318</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <TYPE>Web</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/aaa</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <FULFILLMENT_LOC_OID>CC52A32E42A7050FE0401F0A2222596318</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <TYPE>Web</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/bbb</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
    </Row>
    <Row rowNumber='3'>
      <FULFILLMENT_LOC_OID>CC52A32E42A8050FE0401F0A2222596318</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ccc</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
    </Row>
    <Row rowNumber='4'>
      <FULFILLMENT_LOC_OID>CC52A32E42A5050FE0401F0A2222596318</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>CC52A32E42A4050FE0401F0A2222596318</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ddd</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2012-10-18 09:03:34.695</CREATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenUpdate Request" searchProperties="true" id="1365c51a-1e2c-41ff-8deb-987a64397c57">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Properties" id="7a4d78ce-347d-4297-bb34-9e892996565b">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
//headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);
testCase.setPropertyValue("assert",CallingTCase.getPropertyValue("assert"));
//SetUp test properties
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion"));
// setUp Node Properties

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//SetUp test properties

testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("rightstokenid"));
//testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
testCase.setPropertyValue("RightsLockerID","");
testCase.setPropertyValue("RightsLockerID",CallingTCase.getPropertyValue("RightsLockerID"));
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("encodedRightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}
testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName",CallingTCase.getPropertyValue("SoldAsDisplayName") );
testCase.setPropertyValue("SoldAsLanguage",CallingTCase.getPropertyValue("SoldAsLanguage"));
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID",CallingTCase.getPropertyValue("SoldAsBundleID"));
testCase.setPropertyValue("PPContentProfile1",CallingTCase.getPropertyValue("PPContentProfile1"));
testCase.setPropertyValue("PPDiscreteMediaRemaining1",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining1"));
testCase.setPropertyValue("PPDiscreteMediaProfile1",CallingTCase.getPropertyValue("PPDiscreteMediaProfile1"));
testCase.setPropertyValue("PPCanDownLoad1",CallingTCase.getPropertyValue("PPCanDownLoad1"));
testCase.setPropertyValue("PPCanStream1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPContentProfile2",CallingTCase.getPropertyValue("PPContentProfile2"));
testCase.setPropertyValue("PPDiscreteMediaRemaining2",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining2"));
testCase.setPropertyValue("PPDiscreteMediaProfile2",CallingTCase.getPropertyValue("PPDiscreteMediaProfile2"));
testCase.setPropertyValue("PPCanDownLoad2",CallingTCase.getPropertyValue("PPCanDownLoad2"));
testCase.setPropertyValue("PPCanStream2",CallingTCase.getPropertyValue("PPCanStream2"));
testCase.setPropertyValue("PPContentProfile3",CallingTCase.getPropertyValue("PPContentProfile3"));
testCase.setPropertyValue("PPDiscreteMediaRemaining3",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining3"));
testCase.setPropertyValue("PPDiscreteMediaProfile3",CallingTCase.getPropertyValue("PPDiscreteMediaProfile3"));
testCase.setPropertyValue("PPCanDownLoad3",CallingTCase.getPropertyValue("PPCanDownLoad3"));
testCase.setPropertyValue("PPCanStream3",CallingTCase.getPropertyValue("PPCanStream3"));
testCase.setPropertyValue("RSCreatedby",CallingTCase.getPropertyValue("RSCreatedby"));
testCase.setPropertyValue("RSCreationDate",CallingTCase.getPropertyValue("RSCreationDate"));
testCase.setPropertyValue("RSValue",CallingTCase.getPropertyValue("RRSValue"));
testCase.setPropertyValue("RSDescription",CallingTCase.getPropertyValue("RSDescription"));
testCase.setPropertyValue("LICAcqBaseLoc",CallingTCase.getPropertyValue("LICAcqBaseLoc"));
testCase.setPropertyValue("FFWebLocLocation1",CallingTCase.getPropertyValue("FFWebLocLocation1"));
testCase.setPropertyValue("FFWebLocPreference1",CallingTCase.getPropertyValue("FFWebLocPreference1"));
testCase.setPropertyValue("FFWebLocLocation2",CallingTCase.getPropertyValue("FFWebLocLocation2"));
testCase.setPropertyValue("FFWebLocPreference2",CallingTCase.getPropertyValue("FFWebLocPreference2"));
testCase.setPropertyValue("FFManifestLocLocation1",CallingTCase.getPropertyValue("FFManifestLocLocation1"));
testCase.setPropertyValue("FFManifestLocPreference1",CallingTCase.getPropertyValue("FFManifestLocPreference1"));
testCase.setPropertyValue("FFManifestLocLocation2",CallingTCase.getPropertyValue("FFManifestLocLocation2"));
testCase.setPropertyValue("FFManifestLocPreference2",CallingTCase.getPropertyValue("FFManifestLocPreference2"));
testCase.setPropertyValue("PINodeID",CallingTCase.getPropertyValue("PINodeID"));
testCase.setPropertyValue("PIRetailerTransx",CallingTCase.getPropertyValue("PIRetailerTransx"));
testCase.setPropertyValue("PIPurchaseAccount",CallingTCase.getPropertyValue("PIPurchaseAccount"));
testCase.setPropertyValue("PIPurchaseUser",CallingTCase.getPropertyValue("PIPurchaseUser"));
testCase.setPropertyValue("PIPurchaseTime",CallingTCase.getPropertyValue("PIPurchaseTime"));
testCase.setPropertyValue("PITransactionType",CallingTCase.getPropertyValue("PITransactionType"));
testCase.setPropertyValue("VCAllowedUser",CallingTCase.getPropertyValue("VCAllowedUser"));
testCase.setPropertyValue("StreamWebLocLocation1","https://dl.bestbuy.com/p/streaminglink");
testCase.setPropertyValue("StreamWebLocPreference1","3");

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTUReq","OK");
CallingTCase.setPropertyValue("FeedRTUReq",testCase.getPropertyValue("FeedRTUReq"));</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdate -Request_Trimmed" disabled="true" id="5d307805-7788-45c4-a079-d70e61901de8">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdate -Request_Trimmed" mediaType="application/xml" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6pME773V1iey1TC5l5JqoY1qKgguN0hjICyyYCgv/4bMBqznOX9qpJKpunlme5nenqekRn4dB8gBJPUi8K6zL80TLPbgXQXPjYZxnxsQmv7uLE25GOboS2aZLadDtw06jJCGZRDlJph+tKgSYp6JGn8o1PtPkX2m+2nLtVcN+pzmCDsGas8kY16Efgh6ldRXxpZEvYjE3moH5oBRP3U6s+AMupjzb55hdR4fb6ArAImr26axn2CsJ5saEHft56sKCCeiU86zzbqzzwnNNMsge8xbfTSeLfN8/wpZ56ixCFokiQJskdgHRt5zq/Ga+1qDG053EaXNWeGUehZpu+dzRKUAlM3suvAd6LES93gN64pgiJL14+wsB4tqhn+ahAfASp0/+jpE8gEmY/INamrMw1uYQJDC9YNTX5p/PqnAl5M9cQM0TZKAvRl/d8QwfAI/SiG9iO6buwK7t89/pCt12do9eXQ8jPkHeG4ZElsWhDVpwncesXIQ5h7NqpX1a8X6EowaP2XijwT9zgxbOKHzPCeA1H6/5TrvlQXL3PTz+CrF6+MCRGBnTi02vPjgOuNgGlsTlMFvVQQ7pUvoG6Vfl9/5emNVu9GiqeOjPOYXyttTknHO0cIUEpBdc7NpZCYb1PkmMR+EhtIl4ZmdKBgu3VcigO4UGzbN4jjeOazGvUmZgOmZtoWS0VzkmiNhqfOA9QpeqkNZydGQbvZ+iTynYA3ET3MTrt4O2pmknOU8rRoBlSQ00QzlRGvG9LWhRuvWaNPG2orS+o5byfk8ihF9urlY0/3eyj3NYSnapPl/8sW2ePN1LwtuLJRbPHpTOGrIst8duY4cJo5IJdZ4ODfHRizzv7g7j2pl5MsUFUR8Bzr74SRAvYSoAyBdRVuPlcK7gwGrDOeY0O9Bvw1q2hCzucrfq6qb0Lu6rY0P20kP1ufhbECUGXMuYqgCXNe0wVFAdFFVij8Rip2ykzJZXXF17ADXijisy31UigVnkXLLWXWolezVrZezrFcPI2C8XGjC77CKRI3O0gzecPwqjAA2mph0WKGbc+jII5qK4O9MxrEcAegmJM4Jjgr+j5XdIMe85pZyfTPMkWWBoqKck6tdiXVhHwwN84fueBYhbMDoRB0ML3kwtI5cUyulwNkLlqhooGcdyrjoZDbkysQRSXzGnfJ1UjINUEzxqKiybkAKhkv5D7a0GN3I7lHi1GLgQ5294XhVGEhhvh7qB2tU+tQMyURbII5ZTGaa3ktz1xGubPu5ry6GgyjtYzdjIEqsKwKMCASlFvD+WfBiJ23JrHXoz042opRAN2kplDRcH88F2TXYybOdLxo8dt9Zyp5U8a0XUL2LXrH7IEsQ3tIuappaytC40Pv3J4MjSX0ktU5HbdUqu11WzVtkRlLPvI79ttyZQwfipWl6pPpzFhMz0UxPuy6Zz99m7BvyWyg8M5kDOEUWQ8EaYqs3uVb3Opth/m01UjYqgFHYQGQdo4jeJjA7NvuQsI3TREweYHC5RK34KQZkKQHQWZ5Vd2KLjW1pHlmUGNFFmwfp+m0Wmp+bc2xPK4UaS7W8YoWybUO7MqZ2hRERzVaD4MlXKtjX5+nII/n25CiSClW37ZK7lhKyQBbzmcsPkVsLZOBYU7iAVkM522SOqi2P5j1gMEUM3pfTFxnfdo76z0uyuru6Kx04M/1O47JmGKLmqoLmgK6l/NWKLLBaL4VFPEmsApexzWrjCOdFTRRJY2C58HwIkM6oAu0Ogs7hRMq+xooFBPT4rhZumgVjr2JLmSYtNkdXXYbmvwrx0qK1T5z7MABFXzlmHDhmAC2hwe5y1Oo1eZitMgdVhIOamc+GvRiUl2O9jX2QSSc1PObk7Cb68OHBXXKO+5OXSx6Mu9yD+F25TKblCXNs6XCwb4jedqeD9tN/6SMFLVleIR/InfwkKNRbSxTocCkZ5HoJdkDG6y94HxmmrQRTGfZUTbMIaJO7uaw6OW76VubIBLp1Dp31kdVXEbW6nKPfG2SN+GljRL3DfZTB76OXrNss4NWel2W97DM10V8OZrpn8e4UuLZj9tKtR+XsyBKYZg2XkurcoTrZ3jQ8+w+vjkv6x7ocRwnUgxgOb7XFAWySVIiCchWr0eLbeY6611QfIHIReHWK2OVw+zlsv4zQCvob6CZwKTxB09lnupyqOHpIwoR1KOXBmDaXdDpAZoUqG6bJwHN45VANVs8x/R4ulEfR+kknCRgm8LkbkBmvg7IGrS82IPlFP0+S6AUJ+JgHrPUp56O5lMIMzxmJ+Wk26eb3VaVAMLOgtjCH3B3S+IIpU+xG1fDzG+38fXbdcdYx/ZKBVSCZiGuFvxhpGeuiL/tjP5x9L+6B5ntlTMLTl+aeNYFyedPH2woaXCjAtkh6Svmm+q/mvZ6302JPyAivibjFsk+endxrw8TPGvjcax6jyBctIP5dHjKjsesKlOnHDUT7J4giR4xg1aGx8WTHu1hSNw8EP8yqN8wf4l7k39Gl6VuOEvxKQ8wo+rV8u+PtE/WOAEpLNKfZJyPn2Vl8D++3Ky+Veph8RT/yaPE/sj7D77u4mDIZYfyQqdclRP26XN5309C34qwVw83qSi59/2T/U+xPwtv6bpBSTErNlkKf/+lXnYf/FS2rCgLU5lvVIL7jlhhTk8x7H8ofXNTjbjvb5YC/fbNslRGM8uFgdm46Xp/V370qsJbEFshr8Ly0ijw6xsHD527DvwO8L4JU/jo3Z29T3hfv4m/S+4y95W/r/8D" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:RightsTokenFull RightsTokenID="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5" 
xsi:schemaLocation="http://www.decellc.org/schema dece.xsd " 
xmlns:dece="http://www.decellc.org/schema/2010/10/dece" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</dece:RightsLockerID>
 <dece:RightsTokenData 
 ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt"> 
            <dece:RightsProfiles>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
               </dece:PurchaseProfile>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
                </dece:PurchaseProfile>   
                  <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream> 
                </dece:PurchaseProfile> 
              </dece:RightsProfiles>
          <dece:ResourceStatus>  
             <dece:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:org:org:dece:07909"> 
                     <dece:Value>urn:dece:type:status:active</dece:Value>
                    <dece:Description>new rights token</dece:Description>
                </dece:Current>
            </dece:ResourceStatus> 
   <dece:LicenseAcqBaseLoc>ns3.google.com</dece:LicenseAcqBaseLoc>
              <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/aaa</dece:Location>
                <dece:Preference>1</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/bbb</dece:Location>
                <dece:Preference>2</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ccc</dece:Location>
                <dece:Preference>3</dece:Preference>
            </dece:FulfillmentManifestLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ddd</dece:Location>
                <dece:Preference>4</dece:Preference>
            </dece:FulfillmentManifestLoc>
        <dece:PurchaseInfo>
            <dece:NodeID>urn:dece:org:org:dece:222259</dece:NodeID>
            <dece:RetailerTransaction>Transaction_node0701-to-222259</dece:RetailerTransaction>
            <dece:PurchaseAccount>urn:dece:accountid:org:dece:107006</dece:PurchaseAccount>
            <dece:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</dece:PurchaseUser>
            <dece:PurchaseTime>2010-02-01T12:27:41</dece:PurchaseTime>
        </dece:PurchaseInfo> 
    </dece:RightsTokenData>
</dece:RightsTokenFull>]]></con:request>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="AccountID" value="urn:dece:accountid:org:dece:107006"/>
              <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call RightsTokenGet for ETag Value" id="2a6c59c3-d052-465e-af99-05ceae037fa9"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;

//Extractthe Response and Set the ETag Value at the Project Level Properties
RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Get Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

runnerRTC = RTCRequest.run( null , false )

def etagValue=testProject.getPropertyValue("ETag");
log.info "etagValue=="+etagValue;
//Set the Etag value as Header to the RightsTokenDelete API Request

def headers = new StringToStringMap()
headers.put("IF-Match",etagValue);
headers.put("Authorization","SAML2 assertion="+ testCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep>
      <con:testStep type="groovy" name="pem set" id="7bf08a68-58f0-43a7-ac54-1673bb52cb65">
        <con:settings/>
        <con:config><script>
import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightTokenUpdateRequest PUT");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdateRequest PUT" id="c83af079-059b-4613-b2aa-f955434fe4a8">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdateRequest PUT" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept="application/xml">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Authorization" value="SAML2 assertion=nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw=="/>
  <con:entry key="IF-Match" value="&quot;157E891FD7B724FBE05307991F0A4740:6B653DD2--gzip&quot;"/>
</xml-fragment>]]></con:setting>
              <con:setting id="RecordRequestRepresentations">false</con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4=  "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>  ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			  <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>  ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:request>
            <con:assertion type="GroovyScriptAssertion" disabled="true" id="71490b8e-ae51-4517-b64a-83ce622d7a3e">
              <con:configuration>
                <scriptText>// check for the HTTP Response code 
assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 200 OK"</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#encodedAccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#encodedRightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property>
        
        
        
        
        <con:property><con:name>encodedRightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property>
        
        
        <con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PITransactionType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property>
        
        
      <con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:157E6F9FC6FD4D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1512</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value><![CDATA[<RightsToken RightsTokenID="urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450" xmlns="http://www.decellc.org/schema/2015/03/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.2/md" xmlns:ns3="http://www.w3.org/2001/04/xmlenc#" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#">
   <RightsTokenInfo ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">
      <SoldAs>
         <DisplayName Language="en">Avatar BestBuy Special Packaging</DisplayName>
         <ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ContentID>
      </SoldAs>
      <RightsProfiles>
         <PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd">
            <CanDownload>true</CanDownload>
            <CanStream>true</CanStream>
         </PurchaseProfile>
      </RightsProfiles>
      <ResourceStatus>
         <Current CreationDate="2015-05-07T13:06:52.292Z" CreatedBy="urn:dece:org:org:dece:RET">
            <Value>urn:dece:type:status:active</Value>
            <Description>RightsToken has been created.</Description>
         </Current>
      </ResourceStatus>
      <LicenseAcqBaseLoc>ns3.google.com</LicenseAcqBaseLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/aaa</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/bbb</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ddd</Location>
         <Preference>3</Preference>
      </FulfillmentManifestLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ccc</Location>
         <Preference>1</Preference>
      </FulfillmentManifestLoc>
      <StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/streaminglink</Location>
         <Preference>3</Preference>
      </StreamWebLoc>
      <StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd">
         <Location>https://dl.bestbuy.com/p/streaminglink</Location>
         <Preference>3</Preference>
      </StreamWebLoc>
   </RightsTokenInfo>
</RightsToken>]]></con:value></con:property><con:property><con:name>RightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>RightsTokenInfo</con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://dl.bestbuy.com/p/streaminglink</con:value></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">3</con:value></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>HighDynamicRange</con:name><con:value>true</con:value></con:property><con:property><con:name>HighFrameRate</con:name><con:value>true</con:value></con:property><con:property><con:name>WideColorGamut</con:name><con:value>true</con:value></con:property><con:property><con:name>NextGenAudio</con:name><con:value>true</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>2a6c59c3-d052-465e-af99-05ceae037fa9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenGet Response Validation" searchProperties="true" id="e5aebb6e-1049-4c98-9cfe-bce9ef23f0ec">
      <con:settings/>
      <con:testStep type="groovy" name="ValidateRightsTokenGet RESPONSE" id="51b539f5-7042-4db6-b58a-92937db37117">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("errorStatusCode",null);
testCase.setPropertyValue("errorReason",null);
testCase.setPropertyValue("errorID",null);
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTGet",CallingTCase.getPropertyValue("expectErrTypeRTGet"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Provision_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName("RightsTokenGet byTokenID").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName("RightsTokenGet byTokenID").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTGet");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

//log.info Resp_HTTPstatus;
//log.info Resp_HTTPconnection;
//log.info Resp_HTTPcontenttype;
//log.info Resp_HTTPcontentlength;

// Error Validation Flags &amp; Values

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "Keep-Alive";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = "$DeceUrl";
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$Res_RTObjType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$Res_RTObjType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "API call not authorized";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	case "PURCHASE_USER_NOT_BELONGS_TO_PURCAHSE_ACCOUNT":
	expectHTTPstatus = "HTTP/1.1 400 BadRequest";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserDoesNotBelongToPurchaseAccount";
	Resp_errorReason = "The purchasing member does not belong to the purchase account.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseUserDoesNotBelongToPurchaseAccount";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:ContentIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotValid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotFound";
	
	break;
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		expectHTTPcontenttype = "application/xml"
	break;

	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;

	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenIDNotValid";
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	break;

	case "FULLFILLMENT_METHOD_INVALID":
	Resp_ErrorID = "urn:dece:errorid:org:dece:DiscreteMediaFulfillmentMethodNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaFulfillmentMethodNotValid";
	break;
 }

testCase.setPropertyValue("errorID",Resp_ErrorID);

if(ValerrorID.toString() == '1') {
	
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $Resp_HTTPstatus - Received: " + Resp_HTTPstatus;
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + expectHTTPstatus;
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection;
assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length

//log.info "Content-Length:"+ Resp_HTTPcontentlength;
//assert Resp_HTTPcontentlength.toInteger() > 0; 

//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype;
assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
      log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;

// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RET</con:value>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">TC_DECE_10057_RightsTokenUpdate after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value>
        </con:property>
        <con:property>
          <con:name>ErrorDataVal</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value>
        </con:property>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectErrTypeRTGet</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>RTObjType</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Error</con:value>
        </con:property>
        <con:property>
          <con:name>errorStatusCode</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>errorReason</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>errorID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract RightsToken-Update Information" searchProperties="true" id="2739da50-fd96-4bc7-86fa-c5b20e38ce34">
      <con:settings/>
      <con:testStep type="groovy" name="Extract RightsTokenUpdate Request XML" id="9547afb1-a066-47ff-8cfc-3d4ef6abd92a">
        <con:settings/>
        <con:config>
          <script>import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

def RT_RequestBody = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").testRequest.response.rawRequestData;

def rawData = new String(RT_RequestBody);
 
testCase.setPropertyValue("RightsReqXml",rawData.tokenize('\n').last());

log.info "RightsReqXml:" + testCase.getPropertyValue("RightsReqXml");
callingTCase.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract RightsToken Info from the Response" id="ee711961-6854-4137-9a67-f882620aefc8">
        <con:settings/>
        <con:config>
          <script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName)

def RightsResHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getResponseHeaders(); 
def RightsResXml = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getContentAsString();
def RightsResTime = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getTimeTaken();
def RightsResHttpStatus = RightsResHeader.getAt("#status#");

log.info RightsResHttpStatus[0];
log.info "Response Time : $RightsResTime:ms";
testCase.setPropertyValue("RightsResXml",RightsResXml);
testCase.setPropertyValue("RightsResTime",RightsResTime.toString());

// Evaluate RightsToken Success &amp; Failure

if(RightsResHttpStatus[0] == "HTTP/1.1 200 OK")
{
log.info "Response Code : ${RightsResHttpStatus[0].toString()}";
log.info "Response Time : $RightsResTime:ms";
}
else{
log.info " RightsToken Update failed - [ $RightsResHttpStatus ]"
log.info " Error Code Validation +++++ "
}
// Returns Rights Response Information
log.info "ResponseXML:" + testCase.getPropertyValue("RightsResXml");
callingTCase.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
callingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>urn:dece:rightstokenid:org:dece:9C196308C6811497E0401F0A2222593EAE</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value>urn:dece:accountid:org:dece:107006</con:value>
        </con:property>
        <con:property>
          <con:name>DBrightstokenid</con:name>
          <con:value>9C196308C6811497E0401F0A2222593EAE</con:value>
        </con:property>
        <con:property>
          <con:name>RightsReqXml</con:name>
          <con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:157E6F9FC6FD4D2FE05305991F0A9450</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>RightsResTime</con:name>
          <con:value>2013</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenUpdate Response Validation" searchProperties="true" id="93b225a7-8f51-4126-9137-9457bcfd40ab">
      <con:settings/>
      <con:testStep type="groovy" name="ValidateRightsTokenUpdate RESPONSE" id="c3f5e223-a311-401b-b761-9f5ddd51716a">
        <con:settings/>
        <con:config><script>import groovy.*;
import groovy.xml.*;
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testCase.setPropertyValue("errorStatusCode","nothing");
//testCase.setPropertyValue("errorReason","nothing");
//testCase.setPropertyValue("errorID","nothing");

def QAResp_ErrorID;
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTUpdate",CallingTCase.getPropertyValue("expectErrTypeRTUpdate"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));
def contentProfile= CallingTCase.getPropertyValue("ContentProfile");

if (contentProfile!=null)
{
	int lastColon = contentProfile.lastIndexOf(':');
	int lastSlash = contentProfile.lastIndexOf('/');
	contentProfile     = contentProfile.substring(lastColon + 1);
}
log.info "contentProfile ="+contentProfile;

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Query_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTUpdate");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

log.info Res_RTObjType;
log.info Resp_HTTPstatus[0];
log.info Resp_HTTPconnection[0];
log.info Resp_HTTPcontenttype[0];
log.info Resp_HTTPcontentlength[0];
log.info errorRespType;

// Error Validation Flags &amp; Values


boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = "$DeceUrl";
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$Res_RTObjType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$Res_RTObjType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	QAResp_ErrorID = "ForbiddenAccountNotActive"
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "The API call is not authorized.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	case "PURCHASE_USER_NOT_BELONGS_TO_PURCAHSE_ACCOUNT":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserDoesNotBelongToPurchaseAccount";
	Resp_errorReason = "The purchasing member does not belong to the purchase account.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseUserDoesNotBelongToPurchaseAccount";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	QAResp_ErrorID = "NotFoundContentIDNotFound"
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestContentIDNotValid"
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotValid";
	break;

	
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;


	case "UnAuthorized":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
			
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	QAResp_ErrorID = "ForbiddenAssetLogicalIDNotActive"
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	QAResp_ErrorID = "ForbiddenUserIdUnmatched"
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink  = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	QAResp_ErrorID = "ForbiddenUserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	QAResp_ErrorID = "ForbiddenAccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	QAResp_ErrorID = "BadRequestAssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;

	case "CONTENT_ID_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotValid";
	QAResp_ErrorID = "BadRequestContentIDNotValid"
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotValid";
	
	break;          
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	QAResp_ErrorID = "ForbiddenAssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	QAResp_ErrorID = "NotFoundAssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	QAResp_ErrorID = ""
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	QAResp_ErrorID = "NotFoundBundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotFound";
	
	break;

	case "MEDIAPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestMediaProfileNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid";
	break;
	
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	QAResp_ErrorID = "BadRequestDisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		log.info '------------------------------------DM_REM'
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		//expectHTTPcontenttype = "application/xml"
	break;

	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestMediaProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	QAResp_ErrorID = "BadRequestFulfillmentLocNotValid";
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	log.info '----------FFMISSING'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	QAResp_ErrorID = "BadRequestStandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	QAResp_ErrorID = "BadRequestPurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	QAResp_ErrorID = "BadRequestPurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	QAResp_ErrorID = "BadRequestPurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	QAResp_ErrorID = "BadRequestLicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;

	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	QAResp_ErrorID = "BadRequestBundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	QAResp_ErrorID = "NotFoundRightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	QAResp_ErrorID = "BadRequestRightsTokenIDNotValid"
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsTokenIDNotValid";
	
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	QAResp_ErrorID = "ForbiddenUserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "RIGHTSLOCKERID_DONOT_MATCH_WITH_ACCOUNTID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	QAResp_ErrorID = "BadRequestRightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	
	break;

	case "TRANSACTION_TYPE_ID_NOT_VALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:TransactionTypeIDNotValid";
	QAResp_ErrorID = "BadRequestTransactionTypeIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#TransactionTypeIDNotValid";
	
	break;

	case "AdultContentNotAllowed":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
	QAResp_ErrorID = "ForbiddenAdultContentNotAllowed";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
	break;

	case "RatingPolicyExists":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
	QAResp_ErrorID = "ForbiddenRatingPolicyExists";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:RatingPolicyExists";
	break;

	case "UnratedContentBlocked":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
	QAResp_ErrorID = "ForbiddenUnratedContentBlocked";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:UnratedContentBlocked";
	break;
	
	case "PURCHASE_TIME_INVALID":
	log.info '--------------PITIME'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;;
	break;

	case "LICACQBASE_LOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;;
	break;

	case "SOLDAS_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	QAResp_ErrorID = "BadRequestRightsSoldAsUpdationNotAllowed"
	ValerrorID = 1;				
	Resp_errorLink  = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "RT_PP_DOWNLOAD/STREAM_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	QAResp_ErrorID = "BadRequestStandardDefinitionMissing"
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_INFO_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "SCHEMA_VALIDATION_ERROR":
	log.info 'schme-----------error'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "RESOURCE_STATUS_ELEMENT_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:ResourceStatusElementNotAllowed";
	QAResp_ErrorID = "ForbiddenResourceStatusElementNotAllowed";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ResourceStatusElementNotAllowed";
	break;
	
	case "DISCRETEMEDIA_RIGHTS_REMAINING_ELEMENT_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:DiscreteMediaRightsRemainingNotAllowed";
	QAResp_ErrorID = "BadRequestDiscreteMediaRightsRemainingNotAllowed";
	testCase.setPropertyValue("PPContentProfile",CallingTCase.getPropertyValue("PPContentProfile3"));
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaRightsRemainingNotAllowed";
	break;

	case "PURCHASE_PROFILE_HAS_DMR_ALREADY_CREATED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:PurchaseProfileHasDMRAlreadyCreated";
	QAResp_ErrorID = "BadRequestPurchaseProfileHasDMRAlreadyCreated";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseProfileHasDMRAlreadyCreated";
	break;
	case "INVALID_TRANSACTION_TYPE":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:TransactionTypeIDNotValid";
	Resp_errorReason = "The transaction type is not valid.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#TransactionTypeIDNotValid";
	break;
	
	
 }


testCase.setPropertyValue("errorID",Resp_ErrorID.toString());
testCase.setPropertyValue("QAerrorID",QAResp_ErrorID.toString());
log.info "From ValidateRights ---" + Resp_ErrorID;

if(ValerrorID.toString() == '1') {
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + Resp_HTTPstatus[0];
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection[0];
//assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length
if (errorRespType.toString()== "SUCCESS"){
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
//assert Resp_HTTPcontentlength[0].toInteger() == 0; 
}
else 
{
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
//assert Resp_HTTPcontentlength[0].toInteger() > 0;
}

//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype[0];
log.info "expected " + expectHTTPcontenttype
//assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
    if(Resp_ErrorID.toString() == 'urn:dece:errorid:org:dece:DiscreteMediaRightsRemainingNotAllowed'){
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason" +" - "+ testCase.getPropertyValue("PPContentProfile")+ "]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason +" - " + testCase.getPropertyValue("PPContentProfile");
	}
	 if(Resp_ErrorID.toString() == 'urn:dece:errorid:org:dece:PurchaseProfileHasDMRAlreadyCreated'){
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason" +" - "+ contentProfile + "]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason +" - " + contentProfile;
	}
	else{
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;
	}
// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	//assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="ValidateRightsTokenUpdate RESPONSE------" disabled="true" id="29201015-9a67-414a-964e-e66b34ddf846">
        <con:settings/>
        <con:config>
          <script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("errorStatusCode",null);
testCase.setPropertyValue("errorReason",null);
testCase.setPropertyValue("errorID",null);
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTUpdate",CallingTCase.getPropertyValue("expectErrTypeRTUpdate"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Provision_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTUpdate");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

//log.info Resp_HTTPstatus;
//log.info Resp_HTTPconnection;
//log.info Resp_HTTPcontenttype;
//log.info Resp_HTTPcontentlength;

// Error Validation Flags &amp; Values

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = testProject.getPropertyValue("Query_HostName");
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$errorRespType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$errorRespType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "API call not authorized";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:ContentIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotValid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotFound";
	
	break;
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		expectHTTPcontenttype = "application/xml"
	break;
	
	case "DMR_LIMIT_EXCEEDED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:DiscreteMediaLimitExceeded";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaLimitExceeded";
	break;
	
	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	//log.info "jitu";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "PURCHASE_TIME_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "SCHEMA_VALIDATION_ERROR":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;
	case "LICACQBASE_LOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "RT_PP_DOWNLOAD/STREAM_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenIDNotValid";
	
	break;
	
	case "RT_UPDATE_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenStatusChangeNotAllowed";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenStatusChangeNotAllowed";
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	break;

	case "PURCHASE_INFO_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "FULLFILLMENT_METHOD_INVALID":
	Resp_ErrorID = "urn:dece:errorid:org:dece:DiscreteMediaFulfillmentMethodNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaFulfillmentMethodNotValid";
	break;


	case "ALID_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:LogicalIDUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LogicalIDUpdationNotAllowed";
	break;

	case "CONTENTID_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:ContentIDUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDUpdationNotAllowed";
	break;

	case "SOLDAS_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "SOLDAS_DISPLAY_LANG_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "AdultContentNotAllowed":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
	break;

	case "RatingPolicyExists":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:RatingPolicyExists";
	break;

	case "UnratedContentBlocked":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:UnratedContentBlocked";
	break;

 }

testCase.setPropertyValue("errorID",Resp_ErrorID.toString());
testCase.setPropertyValue("QAerrorID",QAResp_ErrorID.toString());
log.info "From ValidateRights ---" + Resp_ErrorID;

if(ValerrorID.toString() == '1') {
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + Resp_HTTPstatus[0];
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection[0];
assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length
if (errorRespType.toString()== "SUCCESS"){
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() == 0; 
}
else 
{
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() > 0;
}

//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype[0];
assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
      log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;

// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        
        
        
        
        
        
        <con:property><con:name>Accountid</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property>
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>errorID</con:name><con:value/></con:property><con:property><con:name>errorReason</con:name><con:value>The media profile is not valid.</con:value></con:property><con:property><con:name>errorStatusCode</con:name><con:value>HTTP/1.1 400 Bad Request</con:value></con:property>
        
        
        <con:property><con:name>expectErrTypeRTGet</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PPContentProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>QAerrorID</con:name><con:value>null</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
      <con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rights UPDATE  Data Validation" searchProperties="true" id="e84c8de9-fc3b-4ce2-8ffb-a81b1953ea78">
      <con:settings/>
      <con:testStep type="groovy" name="Extract DB results for RightsToken UPDATE" id="576d664c-3c2f-4d9e-90ee-331d1bcb4a73">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

mydbRights = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
testCase.setPropertyValue("RightsReqXml",CallingTCase.getPropertyValue("RightsReqXml"));

//getRequestContentAsXml

testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("DBrightstokenid",CallingTCase.getPropertyValue("DBrightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));
testCase.setPropertyValue("RTC_rcStatusHistory",CallingTCase.getPropertyValue("RTC_rcStatusHistory"));


// Fetch RightsToken info from RIGHTS_TOKEN table

RT_Data = mydbRights.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data2 = mydbRights.rightstokenSoldAsGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data3 = mydbRights.rightstokenPMPPGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data4 = mydbRights.rightstokenFFLocGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data5 = mydbRights.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));

testCase.setPropertyValue("DbResultRTXml",RT_Data.toString());
testCase.setPropertyValue("DbResultRT-SoldAsXml",RT_Data2.toString());
testCase.setPropertyValue("DbResultRT-PMPPXml",RT_Data3.toString());
testCase.setPropertyValue("DbResultRT-FFLocXml",RT_Data4.toString());
testCase.setPropertyValue("DbResultRT-StatusHistoryXml",RT_Data5.toString());</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Data Validation DB - RightsTokenUPDATE Request" id="a7feb2ea-ebba-43d1-bce2-3cc7e74879a1">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*
import groovy.time.*
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

// Assert RightsToken Information Expected &amp; Actual 

def actRTC_PPContentProfile  = new ArrayList();
def actRTC_PPDMR  = new ArrayList();
def actRTC_PPCanDownload  = new ArrayList();
def actRTC_PPCanStream  = new ArrayList();
def actRTC_PPDMProfile  = new ArrayList();
def actRTC_LicAcqBaseLoc = new ArrayList();
def actRTC_FFWebLoc_Location = new ArrayList();
def actRTC_FFWebLoc_Pref = new ArrayList();
def actRTC_StreamWeb_Location = new ArrayList();
def actRTC_StreamWeb_Pref = new ArrayList();
def actRTC_FFManifestLoc_Location = new ArrayList();
def actRTC_FFManifestLoc_Pref = new ArrayList();
def expectRTC_PPContentProfile  = new ArrayList();
def expectRTC_PPDMR  = new ArrayList();
def expectRTC_PPCanDownload  = new ArrayList();
def expectRTC_PPCanStream  = new ArrayList();
def expectRTC_PPDMProfile  = new ArrayList();
def expectRTC_LicAcqBaseLoc = new ArrayList();
def expectRTC_StreamWeb_Location = new ArrayList();
def expectRTC_StreamWeb_Pref = new ArrayList();
def expectRTC_FFWebLoc_Location = new ArrayList();
def expectRTC_FFWebLoc_Pref = new ArrayList();
def expectRTC_FFManifestLoc_Location = new ArrayList();
def expectRTC_FFManifestLoc_Pref = new ArrayList();

// RightsToken Update Request Information 

def Val_RightsReqXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsReqXml"));

		expectRTC_AccountID = testCase.getPropertyValue("Accountid");
		expectRTC_ALID = Val_RightsReqXml.@ALID.toString();
		expectRTC_ContentID = Val_RightsReqXml.@ContentID.toString();
		expectRTC_SoldAsLang = Val_RightsReqXml.SoldAs.DisplayName.@Language.toString();
		expectRTC_DisplayName = Val_RightsReqXml.SoldAs.DisplayName;
		expectRTC_SoldAsContentID = Val_RightsReqXml.SoldAs.ContentID;
		expectRTC_SoldAsBUNDLE_ID = Val_RightsReqXml.SoldAs.BundleID;

		log.info expectRTC_ALID;
		log.info expectRTC_ContentID;
		
		log.info "expectRTC_SoldAsContentID"+expectRTC_SoldAsContentID;
		if (expectRTC_SoldAsContentID=="")
			expectRTC_SoldAsContentID=null;
		


// Rights Purchase Media Purchase Profiles
		expPMPPSize = Val_RightsReqXml.RightsProfiles.PurchaseProfile.size();
		log.info "expPMPPSize-"+expPMPPSize;
		if (expPMPPSize!=0)
		{
		for ( i in 0..expPMPPSize-1 ){
	
			expectRTC_PPContentProfile +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.@MediaProfile[i]).toString();
			//expectRTC_PPDMR +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining[i]).toString();
			expectRTC_PPDMProfile +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining.@FulfillmentMethod[i]).toString();
			if ((Val_RightsReqXml.RightsProfiles.PurchaseProfile.CanDownload[i]).toString() == 'true'){
			expectRTC_PPCanDownload += 'Y';
			}
			else{
			expectRTC_PPCanDownload += 'N';
			}
			
			if ((Val_RightsReqXml.RightsProfiles.PurchaseProfile.CanStream[i]).toString()== 'true'){
			expectRTC_PPCanStream += 'Y';
			}
			else{
			expectRTC_PPCanStream += 'N';
			}
		}

		}
// Expected Rights Status 

	/*	expectRTC_RS_CreatedBy = (Val_RightsReqXml.ResourceStatus.Current.@CreatedBy).toString();
		CreationDate = (Val_RightsReqXml.ResourceStatus.Current.@CreationDate).toString();
		RS_CreationDate = (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[1];
		log.info RS_CreationDate;
		expectRTC_RS_CreationDate = new Date().par se("yyyy-MM-dd hh:mm:ss.SSS",RS_CreationDate.toString());
		log.info expectRTC_RS_CreationDate;
		expectRTC_RS_Value = (Val_RightsReqXml.ResourceStatus.Current.Value).toString();
*/


//  Expected Rights Licence Acq Base Location

 		expLicAcqSize = Val_RightsReqXml.LicenseAcqBaseLoc.size();
 	
 		for ( i in 0..expLicAcqSize-1 ){
		
			expectRTC_LicAcqBaseLoc += Val_RightsReqXml.LicenseAcqBaseLoc[i];
		}

// Expected Rights Fullfillment WebLoc

	expFFWeblocSize = Val_RightsReqXml.FulfillmentWebLoc.size();

		if(expFFWeblocSize!=0){	
		for ( int i in 0..expFFWeblocSize-1 ){
	
		//expectRTC_FFWebLoc_Location += (Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString();
		//expectRTC_FFWebLoc_Pref += (Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString();

		//if(i>0&amp;&amp;((Val_RightsReqXml.FulfillmentWebLoc.Location[0]).toString()==(Val_RightsReqXml.FulfillmentWebLoc.Location[1]).toString()))
	//	{
	//	continue;
		//expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
	//	} else {
			//expectRTC_FFWebLoc_Location.put((Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString(),(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
			expectRTC_FFWebLoc_Location.add((Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString())//,(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
			expectRTC_FFWebLoc_Pref += (Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString();
	//		}
			
		}
		}

		expStreamWeblocSize = Val_RightsReqXml.StreamWebLoc.size();

		if(expStreamWeblocSize!=0){	
			for ( int i in 0..expStreamWeblocSize-1 ){

				expectRTC_StreamWeb_Location.add((Val_RightsReqXml.StreamWebLoc.Location[i]).toString())//,(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
				expectRTC_StreamWeb_Pref += (Val_RightsReqXml.StreamWebLoc.Preference[i]).toString();
			}
			
		}


// Expected Rights Fullfillment ManifestLoc

	expFFManifestSize = Val_RightsReqXml.FulfillmentManifestLoc.size();
	
		
		for ( int i in 0..expFFManifestSize-1 ){

		//if(i>0&amp;&amp;((Val_RightsReqXml.FulfillmentManifestLoc.Location[0]).toString()==(Val_RightsReqXml.FulfillmentManifestLoc.Location[1]).toString()))
		//{
		//continue;
		//expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
		//} else {
			//expectRTC_FFManifestLoc_Location.put((Val_RightsReqXml.FulfillmentManifestLoc.Location[i]).toString(),Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();	
			expectRTC_FFManifestLoc_Location.add((Val_RightsReqXml.FulfillmentManifestLoc.Location[i]).toString())//,Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();	
			expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
			//}
		}

		//if(expectRTC_FFManifestLoc_Location[0]==expectRTC_FFManifestLoc_Location[1]){
		//	expectRTC_FFManifestLoc_Location.remove(expectRTC_FFManifestLoc_Location[1]);
		//	expectRTC_FFManifestLoc_Pref.remove(expectRTC_FFManifestLoc_Pref[1]);
			
		//	}

// Expected Rights Purchase Info
		expectRTC_PI_NodeID = (Val_RightsReqXml.PurchaseInfo.NodeID).toString();
		expectRTC_PI_RetailerTrax = (Val_RightsReqXml.PurchaseInfo.RetailerTransaction).toString();
		expectRTC_PI_PurcaseAccount = (Val_RightsReqXml.PurchaseInfo.PurchaseAccount).toString();
		expectRTC_PI_PurchaseUser = (Val_RightsReqXml.PurchaseInfo.PurchaseUser).toString();
		PurchaseTime = (Val_RightsReqXml.PurchaseInfo.PurchaseTime).toString();
		expectRTC_PI_PurchaseTime	= (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[1];	
		expectRTC_PI_TransactionType = (Val_RightsReqXml.PurchaseInfo.TransactionType).toString();

// Expected Rights Status History 

		log.info " Expected Rights Status History Row Count for new RTC  ;" + testCase.getPropertyValue("RTC_rcStatusHistory");
		log.info "expectRTC_PI_RetailerTrax--"+expectRTC_PI_RetailerTrax;
		if (expectRTC_PI_RetailerTrax=="")
			expectRTC_PI_RetailerTrax=null;
		log.info "expectRTC_PI_RetailerTrax--"+expectRTC_PI_RetailerTrax;


// DB Rights Token Information 

def Val_DbResultRTXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRTXml"));
log.info 'Val_DbResultRTXml----->'+Val_DbResultRTXml;
def Val_DbResultRTSoldAsXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-SoldAsXml"));
def Val_DbResultRTPMPPXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-PMPPXml"));
def Val_DbResultFFLocXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-FFLocXml"));
def Val_DbResultRTSHXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-StatusHistoryXml"));

def PMPPSize =  Val_DbResultRTPMPPXml.ResultSet.Row.size();
def LicAcqSize = Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC.size();
//def FFWebLocSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.size();
//def FFManifestSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.size();

def rcFFWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.@rowNumber.collect{ it.text() }
def rcFFManifest = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.@rowNumber.collect{ it.text() }
def rcStreamWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'StreamWeb'}.@rowNumber.collect{ it.text() }
def rcFFWeblocSize = rcFFWebloc.size();
def rcFFManifestSize = rcFFManifest.size();
def rcStreamWeblocSize = rcStreamWebloc.size();



		// Rights Token 
		actRTC_Accountid =  "urn:dece:accountid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID;
		actRTC_Lockerid = "urn:dece:rightslockerid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.RIGHTS_LOCKER_OID;
		actRTC_RightsTokenID = testCase.getPropertyValue("rightstokenid");
		actRTC_ALID = Val_DbResultRTXml.ResultSet.Row.ALID;
		actRTC_ContentID = Val_DbResultRTXml.ResultSet.Row.CONTENT_ID;

		// Rights SoldAs 
		
		actRTC_SoldAs_Lang = (Val_DbResultRTSoldAsXml.ResultSet.Row.LANGUAGE_ID).toString();
		actRTC_SoldAs_PRODUCT_ID = (Val_DbResultRTSoldAsXml.ResultSet.Row.PRODUCT_ID).toString();
		actRTC_SoldAs_DisplayName = (Val_DbResultRTSoldAsXml.ResultSet.Row.DISPLAY_NAME).toString();
		actRTC_SoldAs_ContentID = (Val_DbResultRTSoldAsXml.ResultSet.Row.CONTENT_ID).toString();
		actRTC_SoldAs_BUNDLE_ID = (Val_DbResultRTSoldAsXml.ResultSet.Row.BUNDLE_ID).toString();

		
		
		// Rights Purchase Media Purchase Profiles
		log.info "PMPPSize=="+PMPPSize;

		if (PMPPSize !=0)
		{
		for ( i in 0..PMPPSize-1 ){
	
		actRTC_PPContentProfile += ("urn:dece:type:mediaprofile:" + Val_DbResultRTPMPPXml.ResultSet.Row.PURCHASED_CONTENT_PROFILE[i]).toString();
		//actRTC_PPDMR += (Val_DbResultRTPMPPXml.ResultSet.Row.DISCRETE_MEDIA_RIGHTS_REMAIN[i]).toString();
		actRTC_PPCanDownload += (Val_DbResultRTPMPPXml.ResultSet.Row.DOWNLOAD[i]).toString();
		actRTC_PPCanStream += (Val_DbResultRTPMPPXml.ResultSet.Row.STREAM[i]).toString();
		
		}
		}
		// Rights Status 
		log.info '----->'+Val_DbResultRTXml
		actRTC_RS_CreatedBy = "urn:dece:org:org:dece:"+ Val_DbResultRTXml.ResultSet.Row.CREATED_BY;
		CreationDate = Val_DbResultRTXml.ResultSet.Row.CREATED_DATE;
		actRTC_RS_CreationDate =  new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",CreationDate.toString())
		actRTC_RS_Value = "urn:dece:type:status:"+ Val_DbResultRTXml.ResultSet.Row.STATUS_ID;

		// Rights Licence Acq Base Location
		
		for ( i in 0..LicAcqSize-1 ){
		
		actRTC_LicAcqBaseLoc += (Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC[i]).toString();
		}
		
		if(actRTC_LicAcqBaseLoc[0]=="null"){
		 actRTC_LicAcqBaseLoc[0]="";
			}

		// Rights Fullfillment WebLocation

		if(rcFFWeblocSize!=0){
		for ( int i in 0..rcFFWeblocSize-1 ){
		
		int j = rcFFWebloc[i].toInteger();
		//actRTC_FFWebLoc_Location.put((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString(),(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
		actRTC_FFWebLoc_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
		actRTC_FFWebLoc_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
		}
		}

		if(rcStreamWeblocSize!=0){
			for ( int i in 0..rcStreamWeblocSize-1 ){
				int j = rcStreamWebloc[i].toInteger();
				actRTC_StreamWeb_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
				actRTC_StreamWeb_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
			}
			
			}

		// Rights Fullfillment Manifest Location

		if(rcFFManifestSize!=0){
		for ( int i in 0..rcFFManifestSize-1 ){

		int j = rcFFManifest[i].toInteger();
		//actRTC_FFManifestLoc_Location.put((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString(),(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());	
		actRTC_FFManifestLoc_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());	
		actRTC_FFManifestLoc_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
		}
		}

		// Rights Purchase Infomation
				
		actRTC_PI_NodeID = "urn:dece:org:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.NODE_OID).toString();
		actRTC_PI_RetailerTrax = (Val_DbResultRTXml.ResultSet.Row.RETAILER_TRANSACTION).toString();
		actRTC_PI_PurcaseAccount = "urn:dece:accountid:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID).toString();
		actRTC_PI_PurchaseUser = "urn:dece:userid:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_USER_OID).toString();
		actRTC_PI_PurchaseTime = Val_DbResultRTXml.ResultSet.Row.PURCHASE_TIME;
		log.info '------------>'+(Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString()
		def actRTC_PI_TransactionType;
		if(!(Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString().equalsIgnoreCase('null'))
		{	
			//actRTC_PI_TransactionType = "urn:dece:type:transaction:"+ (Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString();
			actRTC_PI_TransactionType = (Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString();
		} 
		else {
				actRTC_PI_TransactionType = "";
			}
		

		// Rights Status History


// Assert RightsToken Information DB and RightsTokenGet Response.

// Assert RightsToken Account ID 

		log.info "Rights TokenUpdate Accountid Expected : [$expectRTC_AccountID] - Actual Recieved: [$actRTC_Accountid]";
 		assert expectRTC_AccountID == actRTC_Accountid ;

// Assert RightsToken LockerId

		log.info "Rights TokenUpdate  Assigned Lockerid Recieved: [$actRTC_Lockerid]";
		 //assert expectRTC_RightsLockerID == actRTC_Lockerid;

// Assert RightsToken id 

		log.info " New Rights TokenUpdate Tokenid Recieved: [$actRTC_RightsTokenID]";
		

// Assert RightsToken ALID 

		log.info "Rights TokenUpdate Alid Expected : [$expectRTC_ALID] - Actual Recieved: [$actRTC_ALID]";
 		assert expectRTC_ALID.toString() == actRTC_ALID.toString();

// Assert RightsToken ContentID 

		log.info "Rights TokenUpdate ContentID Expected : [$expectRTC_ContentID] - Actual Recieved: [$actRTC_ContentID]"; 
 		assert expectRTC_ContentID.toString() == actRTC_ContentID.toString();

// Assert RightsToken SoldAS Language

		log.info "Rights TokenUpdate SoldAs Language Expected : [$expectRTC_SoldAsLang] - Actual Recieved: [$actRTC_SoldAs_Lang]";
		assert expectRTC_SoldAsLang == actRTC_SoldAs_Lang;

// Assert RightsToken SoldAS DisplayName

		log.info "Rights TokenUpdate SoldAs DisplayName Expected : [$expectRTC_DisplayName] - Actual Recieved:[$actRTC_SoldAs_DisplayName]";
 		assert expectRTC_DisplayName == actRTC_SoldAs_DisplayName;

		if (expectRTC_SoldAsContentID){
		// Assert RightsToken SoldAs ContentID		
		log.info "Rights TokenUpdate SoldAs ContentID Expected : [$expectRTC_SoldAsContentID] - Actual Recieved:[$actRTC_SoldAs_ContentID]";
 		assert expectRTC_SoldAsContentID == actRTC_SoldAs_ContentID;
		}
		else{
		// Assert RightsToken SoldAs BUNDLE_ID	
		log.info "Rights TokenUpdate SoldAs BUNDLE_ID Expected : [$expectRTC_SoldAsBUNDLE_ID] - Actual Recieved:[$actRTC_SoldAs_BUNDLE_ID]";
		assert expectRTC_SoldAsBUNDLE_ID == actRTC_SoldAs_BUNDLE_ID;
		}
// Assert RightsToken Purchase Profile

		//RightsToken Purchase Profile- ContentProfile.
		log.info "Rights TokenUpdate Purchase ContentProfile Expected : $expectRTC_PPContentProfile - Actual Recieved:$actRTC_PPContentProfile";
		//assert expectRTC_PPContentProfile.sort() == actRTC_PPContentProfile.sort();
	
		//RightsToken Purchase Profile- DiscreteMediaRightsRemaining.
		//log.info "Rights TokenUpdate Purchase DiscreteMediaRightsRemaining Expected : $expectRTC_PPDMR - Actual Recieved:$actRTC_PPDMR";
		//assert expectRTC_PPDMR == actRTC_PPDMR;
	
		//RightsToken Purchase Profile- CanDownload
		log.info "Rights TokenUpdate Purchase CanDownload Expected : $expectRTC_PPCanDownload - Actual Recieved:$actRTC_PPCanDownload";
		//assert expectRTC_PPCanDownload == actRTC_PPCanDownload;
		
		//RightsToken Purchase Profile- CanStream
		log.info "Rights TokenUpdate Purchase CanStream Expected : $expectRTC_PPCanStream - Actual Recieved:$actRTC_PPCanStream";
		//assert expectRTC_PPCanStream == actRTC_PPCanStream;
	
// Assert Rights ResourceStatus 
	/*
		log.info "Rights TokenUpdate ResourceStatus CreatedBy Expected : [$expectRTC_RS_CreatedBy] - Actual Recieved: [$actRTC_RS_CreatedBy]";
		assert expectRTC_RS_CreatedBy == actRTC_RS_CreatedBy;
		
		log.info "Rights TokenUpdate ResourceStatus CreationDate Expected : [$expectRTC_RS_CreationDate] - Actual Recieved: [$actRTC_RS_CreationDate]";
		//assert expectRTC_RS_CreationDate == actRTC_RS_CreationDate; //  No Validation on  RS Creation Date 

		log.info "Rights TokenUpdate ResourceStatus Value Expected : [$expectRTC_RS_Value] - Actual Recieved: [$actRTC_RS_Value]";
		assert expectRTC_RS_Value ==  actRTC_RS_Value;
	*/
		
//  Assert Rights Licence Acq Base Location

		log.info "Rights TokenUpdate LicenceAcqBase Location Expected : [$expectRTC_LicAcqBaseLoc] - Actual Recieved: [$actRTC_LicAcqBaseLoc]";
		assert expectRTC_LicAcqBaseLoc == actRTC_LicAcqBaseLoc;

//  Assert Rights Fulfillment WebLoc

		//Assert FF Web location 
		log.info "Rights TokenUpdate FF Web location Expected : [$expectRTC_FFWebLoc_Location] - Actual Recieved: [$actRTC_FFWebLoc_Location]";
		assert expectRTC_FFWebLoc_Location == actRTC_FFWebLoc_Location;

	    // Assert Web FF preference

	    log.info "Rights TokenUpdate Web FF preference Expected : [$expectRTC_FFWebLoc_Pref] - Actual Recieved: [$actRTC_FFWebLoc_Pref]";
		assert expectRTC_FFWebLoc_Pref == actRTC_FFWebLoc_Pref;

		log.info "Rights TokenUpdate Stream Web location Expected : [$expectRTC_StreamWeb_Location] - Actual Recieved: [$actRTC_StreamWeb_Location]";
		assert expectRTC_StreamWeb_Location == actRTC_StreamWeb_Location;


		log.info "Rights TokenUpdate Stream Web preference Expected : [$expectRTC_StreamWeb_Pref] - Actual Recieved: [$actRTC_StreamWeb_Pref]";
		assert expectRTC_StreamWeb_Pref == actRTC_StreamWeb_Pref;

//  Assert Rights Fulfillment Manifest Location

		//Assert FF Manifest location 
		log.info "Rights TokenUpdate FF Manifest location Expected : [$expectRTC_FFManifestLoc_Location] - Actual Recieved: [$actRTC_FFManifestLoc_Location]";
		if(rcFFManifestSize==0){
			assert actRTC_FFManifestLoc_Location.size() == 0;
			
			} else {
		assert expectRTC_FFManifestLoc_Location == actRTC_FFManifestLoc_Location;
			}

	    // Assert FF Manifest  preference

	    log.info "Rights TokenUpdate FF Manifest  preference Expected : [$expectRTC_FFManifestLoc_Pref] - Actual Recieved: [$actRTC_FFManifestLoc_Pref]";
	    if(rcFFManifestSize==0){
			assert actRTC_FFManifestLoc_Pref.size() == 0;
			
			} else {
		assert expectRTC_FFManifestLoc_Pref == actRTC_FFManifestLoc_Pref ;
			}


//  Assert Rights PurchaseInfo Location

		log.info "Rights TokenUpdate PurchaseInfo  NodeID Expected : [$expectRTC_PI_NodeID] - Actual Recieved: [$actRTC_PI_NodeID]";
		//assert expectRTC_PI_NodeID == actRTC_PI_NodeID;

		log.info "Rights TokenUpdate PurchaseInfo  RetailerTrax Expected : [$expectRTC_PI_RetailerTrax] - Actual Recieved: [$actRTC_PI_RetailerTrax]";
		assert expectRTC_PI_RetailerTrax.toString() == actRTC_PI_RetailerTrax.toString();

		log.info "Rights TokenUpdate PurchaseInfo  PurcaseAccount Expected : [$expectRTC_PI_PurcaseAccount] - Actual Recieved: [$actRTC_PI_PurcaseAccount]";
		assert expectRTC_PI_PurcaseAccount == actRTC_PI_PurcaseAccount;
		
		log.info "Rights TokenUpdate PurchaseInfo  PurchaseUser Expected : [$expectRTC_PI_PurchaseUser] - Actual Recieved: [$actRTC_PI_PurchaseUser]";
		assert expectRTC_PI_PurchaseUser == actRTC_PI_PurchaseUser;

		log.info "Rights TokenUpdate PurchaseInfo  PurchaseTime Expected : [$expectRTC_PI_PurchaseTime] - Actual Recieved: [$actRTC_PI_PurchaseTime]";
		def actPurchaseTime = new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",actRTC_PI_PurchaseTime.toString());
		def expectPurchaseTime = new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",expectRTC_PI_PurchaseTime.toString());

		log.info "Expected Purchase time :" + expectPurchaseTime.getTime() + " ms || Actual PurchaseTime :" + actPurchaseTime.getTime() + " ms";
		assert expectPurchaseTime.getTime() == actPurchaseTime.getTime();

		log.info "Rights TokenUpdate PurchaseInfo  TransactionType Expected : [$expectRTC_PI_TransactionType] - Actual Recieved: [$actRTC_PI_TransactionType]";
		assert expectRTC_PI_TransactionType == actRTC_PI_TransactionType;</script></con:config>
      </con:testStep>
      <con:properties>
        
        
        
        <con:property><con:name>Accountid</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property>
        
        
        
        <con:property><con:name>DbResultRT-FFLocXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <FULFILLMENT_LOC_OID>[21, 126, 111, -97, -57, -107, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[21, 126, 111, -97, -57, -123, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ccc</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2015-05-07 13:06:55.899</CREATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <FULFILLMENT_LOC_OID>[21, 126, 111, -97, -57, -108, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[21, 126, 111, -97, -57, -123, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ddd</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2015-05-07 13:06:55.899</CREATED_DATE>
    </Row>
    <Row rowNumber='3'>
      <FULFILLMENT_LOC_OID>[21, 126, 111, -97, -57, -110, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[21, 126, 111, -97, -57, -123, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</RIGHTS_TOKEN_OID>
      <TYPE>StreamWeb</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/streaminglink</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2015-05-07 13:06:55.899</CREATED_DATE>
    </Row>
    <Row rowNumber='4'>
      <FULFILLMENT_LOC_OID>[21, 126, 111, -97, -57, -109, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[21, 126, 111, -97, -57, -123, 77, 47, -32, 83, 5, -103, 31, 10, -108, 80]</RIGHTS_TOKEN_OID>
      <TYPE>StreamWeb</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/streaminglink</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2015-05-07 13:06:55.899</CREATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-PMPPXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <PURCHASE_PROFILE_OID>157E6F9FC78C4D2FE05305991F0A9450</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>157E6F9FC7854D2FE05305991F0A9450</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>sd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2015-05-07 13:06:47.542</CREATED_DATE>
      <UPDATED_DATE>2015-05-07 13:06:55.915</UPDATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <PURCHASE_PROFILE_OID>157E6F9FC7904D2FE05305991F0A9450</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>157E6F9FC7854D2FE05305991F0A9450</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>hd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2015-05-07 13:06:55.899</CREATED_DATE>
      <UPDATED_DATE>null</UPDATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-SoldAsXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_SOLD_AS_OID>157E6F9FC7914D2FE05305991F0A9450</RIGHTS_SOLD_AS_OID>
      <RIGHTS_TOKEN_OID>157E6F9FC7854D2FE05305991F0A9450</RIGHTS_TOKEN_OID>
      <DISPLAY_NAME>Avatar BestBuy Special Packaging</DISPLAY_NAME>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <PRODUCT_ID>null</PRODUCT_ID>
      <CREATED_DATE>2015-05-07 13:06:55.899</CREATED_DATE>
      <LANGUAGE_ID>en</LANGUAGE_ID>
      <BUNDLE_ID>null</BUNDLE_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-StatusHistoryXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_STATUS_HISTORY_OID>157E6F9FC78E4D2FE05305991F0A9450</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>157E6F9FC7854D2FE05305991F0A9450</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>RightsToken has been created.</DESCRIPTION>
      <CREATED_DATE>2015-05-07 13:06:52.308</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>157E6F9FC7024D2FE05305991F0A9450</CREATED_BY_USER_OID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property>
        
        
        
        <con:property><con:name>DbResultRTXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_TOKEN_OID>157E6F9FC7854D2FE05305991F0A9450</RIGHTS_TOKEN_OID>
      <ACCOUNT_OID>157E6F9FC6F64D2FE05305991F0A9450</ACCOUNT_OID>
      <USER_OID>157E6F9FC7024D2FE05305991F0A9450</USER_OID>
      <RIGHTS_LOCKER_OID>157E6F9FC6FD4D2FE05305991F0A9450</RIGHTS_LOCKER_OID>
      <NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</NODE_OID>
      <PURCHASE_NODE_ACCOUNT_OID>157E6F9FC6F54D2FE05305991F0A9450</PURCHASE_NODE_ACCOUNT_OID>
      <RETAILER_TRANSACTION>  RetailerTransaction_1_node222259_RetailerNode</RETAILER_TRANSACTION>
      <TRANSACTION_TYPE>null</TRANSACTION_TYPE>
      <PURCHASE_NODE_USER_OID>157E6F9FC7014D2FE05305991F0A9450</PURCHASE_NODE_USER_OID>
      <PURCHASE_TIME>2011-06-24 15:12:03.0</PURCHASE_TIME>
      <ALID>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</ALID>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <RENTAL_ABSOLUTE_EXPIRATION>null</RENTAL_ABSOLUTE_EXPIRATION>
      <RENTAL_DOWNLOAD_TO_PLAY_MAX>null</RENTAL_DOWNLOAD_TO_PLAY_MAX>
      <RENTAL_PLAY_DURATION_MAX>null</RENTAL_PLAY_DURATION_MAX>
      <LICENSE_ACQ_BASE_LOC>ns3.google.com</LICENSE_ACQ_BASE_LOC>
      <CREATED_DATE>2015-05-07 13:06:52.292</CREATED_DATE>
      <CREATED_BY>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY>
      <UPDATED_DATE>2015-05-07 13:06:56.099</UPDATED_DATE>
      <UPDATED_BY>C0CEF8E08CE1C7D6E0401F0A0599120B</UPDATED_BY>
      <STATUS_ID>active</STATUS_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property>
        
        
        
        
      <con:property><con:name>DBrightstokenid</con:name><con:value>157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:157E6F9FC6FD4D2FE05305991F0A9450</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>RightsTokenFull</con:value></con:property><con:property><con:name>RTU_rcStatusHistory</con:name><con:value>5</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreateRequest" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="b926a876-4fc0-4a3b-9cb9-df0f7bfd5690">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Properties" id="a867bfae-883c-4824-8f9c-14abd29abf48">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightsTokenCreate Request POST").testRequest.setRequestHeaders(headers);

// setUp Node Properties

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));


//SetUp test properties
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion"));


testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
else
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName",CallingTCase.getPropertyValue("SoldAsDisplayName") );
testCase.setPropertyValue("SoldAsLanguage",CallingTCase.getPropertyValue("SoldAsLanguage"));
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID",CallingTCase.getPropertyValue("SoldAsBundleID"));
testCase.setPropertyValue("PPContentProfile1",CallingTCase.getPropertyValue("PPContentProfile1"));
testCase.setPropertyValue("PPDiscreteMediaRemaining1",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining1"));
testCase.setPropertyValue("PPDiscreteMediaProfile1",CallingTCase.getPropertyValue("PPDiscreteMediaProfile1"));
testCase.setPropertyValue("PPCanDownLoad1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPCanStream1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPContentProfile2",CallingTCase.getPropertyValue("PPContentProfile2"));
testCase.setPropertyValue("PPDiscreteMediaRemaining2",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining2"));
testCase.setPropertyValue("PPDiscreteMediaProfile2",CallingTCase.getPropertyValue("PPDiscreteMediaProfile2"));
testCase.setPropertyValue("PPCanDownLoad2",CallingTCase.getPropertyValue("PPCanDownLoad2"));
testCase.setPropertyValue("PPCanStream2",CallingTCase.getPropertyValue("PPCanStream2"));
testCase.setPropertyValue("PPContentProfile3",CallingTCase.getPropertyValue("PPContentProfile3"));
testCase.setPropertyValue("PPDiscreteMediaRemaining3",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining3"));
testCase.setPropertyValue("PPDiscreteMediaProfile3",CallingTCase.getPropertyValue("PPDiscreteMediaProfile3"));
testCase.setPropertyValue("PPCanDownLoad3",CallingTCase.getPropertyValue("PPCanDownLoad3"));
testCase.setPropertyValue("PPCanStream3",CallingTCase.getPropertyValue("PPCanStream3"));
testCase.setPropertyValue("RSCreatedby",CallingTCase.getPropertyValue("RSCreatedby"));
testCase.setPropertyValue("RSCreationDate",CallingTCase.getPropertyValue("RSCreationDate"));
testCase.setPropertyValue("RSValue",CallingTCase.getPropertyValue("RSValue"));
testCase.setPropertyValue("RSDescription",CallingTCase.getPropertyValue("RSDescription"));
testCase.setPropertyValue("LICAcqBaseLoc",CallingTCase.getPropertyValue("LICAcqBaseLoc"));
testCase.setPropertyValue("FFWebLocLocation1",CallingTCase.getPropertyValue("FFWebLocLocation1"));
testCase.setPropertyValue("FFWebLocPreference1",CallingTCase.getPropertyValue("FFWebLocPreference1"));
testCase.setPropertyValue("FFWebLocLocation2",CallingTCase.getPropertyValue("FFWebLocLocation2"));
testCase.setPropertyValue("FFWebLocPreference2",CallingTCase.getPropertyValue("FFWebLocPreference2"));
testCase.setPropertyValue("FFManifestLocLocation1",CallingTCase.getPropertyValue("FFManifestLocLocation1"));
testCase.setPropertyValue("FFManifestLocPreference1",CallingTCase.getPropertyValue("FFManifestLocPreference1"));
testCase.setPropertyValue("FFManifestLocLocation2",CallingTCase.getPropertyValue("FFManifestLocLocation2"));
testCase.setPropertyValue("FFManifestLocPreference2",CallingTCase.getPropertyValue("FFManifestLocPreference2"));
testCase.setPropertyValue("PINodeID",CallingTCase.getPropertyValue("PINodeID"));
testCase.setPropertyValue("PIRetailerTransx",CallingTCase.getPropertyValue("PIRetailerTransx"));
testCase.setPropertyValue("PIPurchaseAccount",CallingTCase.getPropertyValue("PIPurchaseAccount"));
testCase.setPropertyValue("PIPurchaseUser",CallingTCase.getPropertyValue("PIPurchaseUser"));
testCase.setPropertyValue("PIPurchaseTime",CallingTCase.getPropertyValue("PIPurchaseTime"));
testCase.setPropertyValue("PITransactionType",'urn:dece:type:transaction:category1');
testCase.setPropertyValue("VCAllowedUser",CallingTCase.getPropertyValue("VCAllowedUser"));
testCase.setPropertyValue("RTC_rcStatusHistory",CallingTCase.getPropertyValue("RTC_rcStatusHistory"));
testCase.setPropertyValue("StreamWebLocLocation1",CallingTCase.getPropertyValue("StreamWebLocLocation1"));
testCase.setPropertyValue("StreamWebLocPreference1",CallingTCase.getPropertyValue("StreamWebLocPreference1"));
testCase.setPropertyValue("RightsLockerID",CallingTCase.getPropertyValue("RightsLockerID"));

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTCReq","OK");
testCase.setPropertyValue("ParamRTCreateReqUHD",CallingTCase.getPropertyValue("ParamRTCreateReqUHD"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="adcfe17b-8f3a-4fb0-a83a-f84d6baaa576">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenCreate Request POST");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightsTokenCreate Request POST" id="013963f5-b55f-460f-8eb9-6c8306186276">
        <con:settings/>
        <con:config service="RightsTokenCreate" methodName="RightsTokenCreate Request" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightsTokenCreate Request POST" mediaType="application/xml" postQueryString="false" accept="application/xml" sslKeystore="RET_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">          <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                       <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="${#TestCase#PPContentProfile2}">                                          <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                          <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                    <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                        <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                              <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:request>
            <con:assertion type="GroovyScriptAssertion" id="27ff5954-7e00-4b7d-a60c-76c6b9667aac">
              <con:configuration>
                <scriptText>// check for the HTTP Response code 
log.info  messageExchange.responseHeaders["#status#"]</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:username/>
            <con:authType>Global HTTP Settings</con:authType></con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="AccountID" value="${#TestCase#encodedAccountID}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:tearDownScript><![CDATA[def RightsTCLogs;
def testSteps = new ArrayList();
def testSteplog;
def date = new Date(); 
def RightsTClogFile = new File ("c:\\RightsLog\\RightsTClogFile.txt");

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

count  = 0;

for( r in testRunner.results )
{
   count++ ;
     if (r.toString().indexOf ("Request") != -1)
   {    
   	   def rawRequest = new String( r.rawRequestData );   		     	

   	    testSteplog = "\n\n" + "[" + count.toString() +  "] ###################" + "\n\n" +       
       	"TimeStamp :" + r.getTimeStamp() + "[$date]" +"------TestStep < " + r.testStep.name + " > finished with status < " + r.status + " > Time Taken ::< " + r.timeTaken + " > ms " + "\n\n" +   "---------"+ " CallingTestCase Name :  " + CallingTCase.getName() + "\n\n" + "------------"+ r.testStep.name + "Request Message --------" + "\n\n" + rawRequest.tokenize('\n').last() +"\n\n" + "-------------" + r.testStep.name +" Response Message Header--------" +"\n\n"+ r.getResponseHeaders()+ "\n\n" + " Response Message Body--------" +"\n\n"+ r.testStep.getProperty("response").getValue()+ "\n\n" +"-----"+ r.testStep.name + " Assertions-------" +"\n\n" +   r.messages +
        	" ###################" + "\n\n" ;
   }
    else
   {	
   	 testSteplog = "\n\n" + "[" + count.toString() +  "] ###################### " + "\n\n" +
       "TimeStamp :" + r.getTimeStamp() + "[$date]" + "------TestStep < " + r.testStep.name + " > finished with status < " + r.status + " > Time Taken ::< " + r.timeTaken + " > ms " +"\n\n" +   "---------"+ " CallingTest Case Name :   " + CallingTCase.getName() +
   	  " ###################" + "\n\n";	
   }
   
   testSteps.add(testSteplog); 
   
RightsTCLogs = testSteplog.toString();
log.info RightsTCLogs;
//RightsTClogFile << RightsTCLogs;
}]]></con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>AccountID</con:name>
          <con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value>
        </con:property>
        
        <con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        <con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property>
        
        
        
        <con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property>
          <con:name>FFWebLocLocation1</con:name>
          <con:value>https://dl.bestbuy.com/p/aaa</con:value>
        </con:property>
        
        <con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property>
          <con:name>FFWebLocPreference1</con:name>
          <con:value>1</con:value>
        </con:property>
        
        <con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property>
          <con:name>LICAcqBaseLoc</con:name>
          <con:value>ns3.google.com</con:value>
        </con:property>
        
        
        
        
        <con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>ParamRTCreateReq</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">          <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                       <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="${#TestCase#PPContentProfile1}">                                          <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                          <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                            </ns4:PurchaseProfile>                            <ns4:PurchaseProfile   MediaProfile="${#TestCase#PPContentProfile2}">                                          <ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload>                                          <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                                                                                                                                                                  </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>         <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"   xsi:type="ns4:ResourceLocation-type">                               <ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location>                             <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentWebLoc   MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference>          </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location>                  <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type">                                 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location>                  <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:PurchaseInfo>                        <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                    <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                        <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                              <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property>
        <con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property>
        
        
        
        <con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property>
        
        
        
        <con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property>
        
        
        <con:property><con:name>Request</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"  xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile3}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	</ns4:StreamWebLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>RSValue</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value>nVdbd6o8E773V7jcly7LQWnFtdu1wlFUVBCPdxgioAhKQNBf/wWs1nZ3H97vostmyMw8mXmSPPmJ7X3AdgDGKE78KKxq0mttzbAsz29aDQetm41Ws7lutNvrdYPjmhxsvdhNHrZqVQ3jFGkhTuwwea2xNMM0aLbBshbDdTi+w/JPHNde1aozFGMSmUx5omvVfB+EuFNmfa2lcdiJbOzjTmjvEe4ksDMB+qBDZnbsG6Ta288ryDJh/OYlyaFDUfDJQRAFAXyC0Z76SX2a89PBnYnvhnaSxug9p4Nfa+++WZY9Zc2nKHYplqZpiuYpMsfBvvuj9la5OSNHCzfRdSzaYRT60A78i12A0lHiRU4VBG4U+4m3/01ohmLoInQD5bABmVb4o0Z9JCjR/WOkTyBjbDewZzO3YCbaoBiFEFWnpvZa+/FPDby6WrEd4k0U7/GX8X9DhMITCqIDchr4trAbuH+P+E213n4i2NFCGKTYP6FhwZKDDRGujmO08fOBjwn3HFwtu1/N8Y1gCP6XjvykHnES2NQ3lZF8F+Hk/2nXY6uuUWZ2kKI34xwKo3k8lqPxaZOl7VXESWEwDYdr+FpCeJx8BXXv9Pv4K0/vtHp3mpszK3c2m65Ob0aeVG/lG7IZ0/V8aUmU4xq2Z8LJiT4dB8tgPtLseAXOx73YPkR1tOSgPkl9WZ6nblcfyxVlFrKB11otz71nc6NsPSaEMgXC1taQgrFnhcOIPWzW464b+Wfa7ncVf7FayJKqZnKP3eOROYvPp5Y605FUwWOHkazntM6MxDOmT4YDXj/W9LiGYl19dC4XWfy/4GheshP7PhCLg2JDdmeC3nRNk9KLKILzxAWZJgCX/G3BUHB3R2/nq3xGC8AwFCCJQrCVBzrYqYCZyoKni7OZnosX0BPc4Yw4WhUQrATdlDMpW0ozw+jKmWc56uy8VoN0dZGHOsCls+jpsinPJNOSdR1EV1uuS2s13+oTPdOMpVQhASQ5P1wclU+QmvuQ1Th9wrHLCZeuFjNiV86D/fC0tuRAF3VVnBzVibZuSobcA+ZyDlklJb6Xwf4QVZZT4cGpd0BbgJSMJjnBRbd2mW5N2aFk2qXN+mzTNbWnGzgTjXJVakXOerPp5aMWoqCLzl7OZQuMr7WAlqgM6dWih+05F+omyCS3dO7LmTO6AdENOquI11oN5MyUzelQ0U0tk0Fpk+QswGt26K1V7wSbRt6zwPaxMaIhz5WQfA/NEzxzx4qtKmC9nzGwaXrQ53x7EWXuqp1JxrLXj1YaCTMEhiwIBiCAaFAsjdRfAANhxo0OPs/6aLBRoj3y4orORP3d6ZLTbb85csfDOSdtdi9j1R83bcejtACy2+YOaBpy+oxn2I65pEwp9C/Po/50gfx4eUmGnME8+22uYs7T6UKKghenu1hO+/V8CQ1rNJ5M5+NLng+P2/YlSLojoRtPerrkjoYIjTGsU7StCFZb4sRld0v4tDFpxFWAqwsAqFvXlX1CYKG7vZKwa+oyIS/QxUwV56I6AapalzVBMoyN4jFjqM7SKTPUNdkJSJnOy4UZVFaiIJFO0fZ8dViyCr2ygFMGM1qy4hpTrt5boJUxDKxZArLDbBMyDK0ejO5Gz1yoFwxwtGwikF0kVFINTO3RoUfn/dkzzRwNJ+hNeDBt5hN2l488d3XeuasdacryYessLRDMrAeOaYRi84phyaYO2tf9luvatGkGcJ8f1nuYSxbpWekcWYJsKgY9zSUJ9K82bAE2x8uLvNVFufSvgFy3CS1O64WHl+HQH1lySkibPtBlu2bpv3KsoFjlM8eOIjDAV47JV47JYHOsa22JwdyzeMDzzBVU+Wi8zAY9/kAbi8GuItQVyk38oDUK25nVr8+Zc/bibY35nNckT6yHm6XXXCcCbV+ggXq7F9U3d1L43ArO+kA3uKlPBWd6i44ZHlSGGhPKzeSiUHyc1oX9yt9fLs0WO92PJ+lJm9p9zJy99XHOZ9tx95miYvXMXV5WJ0NZRHB5vUe+HpJ34/UYpR4P2E8n8E16TdL1FsHkNizuYU2qKuRytJM/y7jC4juNTTm1cyi0IE5QmNTeCq9CwnVSIvR8p0NuzuuYB7woigrTBIIo8S1Fpls0o9CA5nieVZ6bN613RfEFohiFG7/IVYjZ62X9Z4Bw31kjO0Zx7Q+RijpVtdAk6iMKMbIiombBMyNzbf6Z4bmm0morHNNmWU6Sn2WOYRihVh1GySgcxWCToPhBIDe/CmQTQf/go0JFv2sJnJBCHO1TmgTM08l+ClFKZHZcKN0O22pzZQEoJ90fIPlATrf4EOHk6eAdSjHz22V8/XZbMZnj+MUEXIAWEOkW+kbSMzfEv6yM/Vb638KD1PELzULKl8Q+vCL5/OmDDQUN7lSgX2j2hvk+9V9def5XV+oPiKivxbhnck7+Q97bw4RobSLHyvcIJk072k/Hp/R0Sss2vRRSMybhKZriqQmCKZGLZyvaoZC6R6D+RajfMX/Je7d/RpcmXjhJyC7fE0ZVy+HfH2mfvEkBEpQn39nEgDzLiuR/fLnBDizmEfOY/GRR7HzU/ZtYD3kI5OKE8kO3GBUK+/y5ve87oQMjEtUnh1QUP8b+zv+73J+N93LdoSSEFes0Qb//Ui1On9eaDWGUhokm1UrD44lYYk7OB9T5mPRLmFLivr9ZcvzbN8tCH0ygh/Z27T7X//vkhl82HiLihf0Sy2stJ69vkjx0H07gd4CPhzBDtt7D3vuE9+0X86+Wh8p95e/b/wA=</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property>
        
        <con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
      <con:property><con:name>TCaseName</con:name><con:value>RightsToken-Generation</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>Test Configuration/Setup</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://dl.bestbuy.com/p/streaminglink</con:value></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">3</con:value></con:property><con:property><con:name>PITransactionType</con:name><con:value>urn:dece:type:transaction:category1</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">157E6F9FC6FD4D2FE05305991F0A9450</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>ParamRTCreateReqUHD</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsError Validation" searchProperties="true" id="bc417afb-399f-4360-9833-5efad80928d3">
      <con:settings/>
      <con:testStep type="groovy" name="Validate Rights Errors" id="982ddad1-2bf8-428e-a35d-571757dbecff">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbErrors;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RightsErrors = new dbErrors(log,testProject.getPropertyValue("targetSystem"));;


def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
def errId = CallingTCase.getPropertyValue("QAerrorID");
log.info errId;

//ErrorID = errId.tokenize(':').last();

def xmlData = "";

try {
			 xmlData = RightsErrors.errGetIdInfo(errId.toString());
                log.info xmlData;
                
                assert xmlData.trim().length() > 1;

                def myXML = new XmlSlurper().parseText(xmlData);
                

                log.info myXML.ResultSet.Row.size();
                testCase.setPropertyValue("errorStatusCode", myXML.ResultSet.Row[0].STATUS_CODE.toString());
                testCase.setPropertyValue("errorReason", myXML.ResultSet.Row[0].REASON.toString());
                testCase.setPropertyValue("errorID", myXML.ResultSet.Row[0].ERROR_ID.toString());

                /*
                *  The DB does not contain the complete HTTP status
                *  string, only the code.  Thus, we must adjust.
                */
                switch (testCase.getPropertyValue("errorStatusCode")) {
                                case "400":
                                                testCase.setPropertyValue("errorStatusCode","HTTP/1.1 400 Bad Request");
                                                break;
                                case "403":
                                                testCase.setPropertyValue("errorStatusCode","HTTP/1.1 403 Forbidden");
                                                break;
                                case "404":
                                                testCase.setPropertyValue("errorStatusCode","HTTP/1.1 404 Not Found");
                                                break;
                                case "409":
                                                testCase.setPropertyValue("errorStatusCode","HTTP/1.1 409 Conflict");
                                                break;
                }
}
catch (Throwable e) {
                log.info "STEP FAILURE! --- " + e;
                
}


CallingTCase.setPropertyValue("errorStatusCode",testCase.getPropertyValue("errorStatusCode"));
CallingTCase.setPropertyValue("errorReason",testCase.getPropertyValue("errorReason"));
CallingTCase.setPropertyValue("errorID",testCase.getPropertyValue("errorID"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>RightsTokenUpdate Response Validation</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>Common Test Steps</con:value>
        </con:property>
        <con:property>
          <con:name>errorStatusCode</con:name>
          <con:value>HTTP/1.1 400 Bad Request</con:value>
        </con:property>
        <con:property>
          <con:name>errorReason</con:name>
          <con:value>The media profile is not valid.</con:value>
        </con:property>
        <con:property>
          <con:name>errorID</con:name>
          <con:value>MediaProfileNotValid</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get-Set Account Status" searchProperties="true" id="8964efea-4236-4590-afb3-2afcef064cc4">
      <con:settings/>
      <con:testStep type="groovy" name="Get Account Status for RTU" id="e2f25106-10b8-4f35-9b50-a18f5c60a3ee">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

//AccountID = callingTCase.getPropertyValue("accountoid");

myDb = new dbUtils(log,testProject.getPropertyValue("targetSystem"));;

SqlStr = callingTCase.getPropertyValue("SqlStr");

log.info SqlStr;

AccountStatusXML = myDb.SelectFromDB(SqlStr, "LP1");

log.info AccountStatusXML.toString();

testCase.setPropertyValue("AccountStatusXML",AccountStatusXML.toString());
callingTCase.setPropertyValue("AccountStatusXML",testCase.getPropertyValue("AccountStatusXML"));

AccXML = new XmlSlurper().parseText(AccountStatusXML.toString());

AccountStatus = AccXML.ResultSet.Row.STATUS

testCase.setPropertyValue("AccountStatus",AccountStatus.toString());
callingTCase.setPropertyValue("AccountStatus",testCase.getPropertyValue("AccountStatus"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Account Status for RTU" id="b1b2e3f1-4773-4397-948d-fe6299a23d6d">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbAccount;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

log.info callingTCase.getPropertyValue("accountoid");

AccountID = callingTCase.getPropertyValue("accountoid");


//testCase.setPropertyValue("AccountID",AccountID);

AccountStatus = callingTCase.getPropertyValue("AccountStatus");

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));;

UserStatus = myAccount.accountSetStatus(AccountID.toString(),AccountStatus.toString());

log.info AccountStatus.toString();

testCase.setPropertyValue("AccountStatus",AccountStatus.toString());
callingTCase.setPropertyValue("AccountStatus",testCase.getPropertyValue("AccountStatus"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10003_RightsTokenUpdate_FUNC_RTL_with_Inactive_Accountid in URL</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>AccountStatus</con:name>
          <con:value>active</con:value>
        </con:property>
        <con:property>
          <con:name>AccountID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>AccountStatusXML</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <STATUS>archived</STATUS>
    </Row>
    <Row rowNumber='2'>
      <STATUS>blocked</STATUS>
    </Row>
    <Row rowNumber='3'>
      <STATUS>blocked:tou</STATUS>
    </Row>
    <Row rowNumber='4'>
      <STATUS>deidentified</STATUS>
    </Row>
    <Row rowNumber='5'>
      <STATUS>deleted</STATUS>
    </Row>
    <Row rowNumber='6'>
      <STATUS>forcedeleted</STATUS>
    </Row>
    <Row rowNumber='7'>
      <STATUS>mergedeleted</STATUS>
    </Row>
    <Row rowNumber='8'>
      <STATUS>other</STATUS>
    </Row>
    <Row rowNumber='9'>
      <STATUS>pending</STATUS>
    </Row>
    <Row rowNumber='10'>
      <STATUS>suspended</STATUS>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get-Set Node Statuses" searchProperties="true" id="e91eecdf-d624-463f-9051-f7def37c51c3">
      <con:settings/>
      <con:testStep type="groovy" name="Get Node Statuses for RTU" id="23399819-064b-422d-9dbf-260ae8b0d567">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbNode;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

myDb = new dbUtils(log,testProject.getPropertyValue("targetSystem"));;
NodeStatusXML = myDb.SelectFromDB("select Status from NODE_STATUS where Status != 'active'","LP1");

log.info NodeStatusXML.toString();

testCase.setPropertyValue("NodeStatusXML",NodeStatusXML.toString());
callingTCase.setPropertyValue("NodeStatusXML",testCase.getPropertyValue("NodeStatusXML"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set Node Statuses for RTU" id="8dbe6ab2-65da-4cc7-968b-f9709db2943e">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbNode;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

log.info CallingTCase.getName();
//log.info CallingTCase.getPropertyValue("nodeid");

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("NodeStatus",CallingTCase.getPropertyValue("NodeStatus"));

nodeid = testCase.getPropertyValue("nodeid");
NodeStatus = testCase.getPropertyValue("NodeStatus");

myNode.nodeSetStatus(nodeid ,NodeStatus);

Upd_NodeStatus = myNode.nodeGetStatus(nodeid);

testCase.setPropertyValue("NodeStatus",Upd_NodeStatus);

CallingTCase.setPropertyValue("NodeStatus",testCase.getPropertyValue("NodeStatus"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>NodeStatusXML</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <STATUS>deleted</STATUS>
    </Row>
    <Row rowNumber='2'>
      <STATUS>pending</STATUS>
    </Row>
    <Row rowNumber='3'>
      <STATUS>suspended</STATUS>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10005_RightsTokenUpdate_FUNC_RTL_with_Inactive_NodeId</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET</con:value>
        </con:property>
        <con:property>
          <con:name>NodeStatus</con:name>
          <con:value>active</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get-Set User Status" searchProperties="true" id="ed7968a1-1f5f-4362-a00f-3dda4ac4b2c2">
      <con:settings/>
      <con:testStep type="groovy" name="Get User Status for RTU" id="da878456-906e-48ca-9fb6-81049f2b3429">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

USerID = callingTCase.getPropertyValue("useroid");
myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

UserStatus = myUser.userGetStatus(USerID);

log.info UserStatus.toString();

myDb = new dbUtils(log,testProject.getPropertyValue("targetSystem"));;

SqlStr = callingTCase.getPropertyValue("SqlStr");

UserStatusXML = myDb.SelectFromDB(SqlStr,"LP1");

log.info UserStatusXML.toString();

testCase.setPropertyValue("UserStatusXML",UserStatusXML.toString());
callingTCase.setPropertyValue("UserStatusXML",testCase.getPropertyValue("UserStatusXML"));

testCase.setPropertyValue("UserStatus",UserStatus.toString());
callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set User Status for RTU" id="48f1b17e-f15f-407e-8d5b-ee081329c38a">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbUser;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();



USerID = callingTCase.getPropertyValue("useroid");
testCase.setPropertyValue("UserOid",USerID.toString());

UserSetStatus = callingTCase.getPropertyValue("UserStatus");

myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));;

UserStatus = myUser.userSetStatus(USerID.toString(),UserSetStatus.toString());

log.info UserStatus.toString();

testCase.setPropertyValue("UserStatus",UserStatus.toString());
callingTCase.setPropertyValue("UserStatus",testCase.getPropertyValue("UserStatus"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10046_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId_Pending_User</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>UserStatus</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>UserOid</con:name>
          <con:value>06A54EC698B92999E05307991F0A3722</con:value>
        </con:property>
        <con:property>
          <con:name>UserStatusXML</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <STATUS>archived</STATUS>
    </Row>
    <Row rowNumber='2'>
      <STATUS>blocked</STATUS>
    </Row>
    <Row rowNumber='3'>
      <STATUS>blocked:clg</STATUS>
    </Row>
    <Row rowNumber='4'>
      <STATUS>blocked:tou</STATUS>
    </Row>
    <Row rowNumber='5'>
      <STATUS>deidentified</STATUS>
    </Row>
    <Row rowNumber='6'>
      <STATUS>deleted</STATUS>
    </Row>
    <Row rowNumber='7'>
      <STATUS>forcedeleted</STATUS>
    </Row>
    <Row rowNumber='8'>
      <STATUS>mergedeleted</STATUS>
    </Row>
    <Row rowNumber='9'>
      <STATUS>other</STATUS>
    </Row>
    <Row rowNumber='10'>
      <STATUS>suspended</STATUS>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get-Set RightsToken Status" searchProperties="true" id="6d02e84f-2005-4755-893d-b72e4010f82b">
      <con:settings/>
      <con:testStep type="groovy" name="Get RightsToken Status for RTU" id="edc73a9d-2992-42d0-a6a0-a2c0e86a3b12">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbRightsToken;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

RightsTokenId = callingTCase.getPropertyValue("rightstokenid");
dbRighttoken = RightsTokenId.tokenize(':').last();
testCase.setPropertyValue("dbRighttoken", dbRighttoken);

myRT = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

RTStatus = myRT.rightstokenGetStatus(dbRighttoken);

log.info "Current RightsTokenStatus : " + RTStatus.toString();

myDb = new dbUtils(log,testProject.getPropertyValue("targetSystem"));;

SqlStr = callingTCase.getPropertyValue("SqlStr");

RTStatusXML = myDb.SelectFromDB(SqlStr,"LP1");

log.info RTStatusXML.toString();

testCase.setPropertyValue("RTStatusXML",RTStatusXML.toString());
callingTCase.setPropertyValue("RTStatusXML",testCase.getPropertyValue("RTStatusXML"));

testCase.setPropertyValue("RTStatus",RTStatus.toString());
callingTCase.setPropertyValue("RTStatus",testCase.getPropertyValue("RTStatus"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set RightsToken Status for RTU" id="36322e4b-d0b4-4f1e-bb3f-e7e814a5ff01">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbRightsToken;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();


RightsTokenId = callingTCase.getPropertyValue("rightstokenid");
dbRighttoken = RightsTokenId.tokenize(':').last();
testCase.setPropertyValue("dbRighttoken", dbRighttoken);

myRT = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

RTStatus = callingTCase.getPropertyValue("RTStatus");

RTStatus = myRT.rightsTokenSetStatus(dbRighttoken.toString(),RTStatus.toString());

log.info RTStatus.toString();

testCase.setPropertyValue("RTStatus",RTStatus.toString());
callingTCase.setPropertyValue("RTStatus",testCase.getPropertyValue("RTStatus"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_with_Inactive_RightsTokenID_expect_Pending - (Not defined Behaviour)</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>RTStatus</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>RTStatusXML</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>dbRighttoken</con:name>
          <con:value>06A5677BC9AF6639E05307991F0AB380</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Modify RightsToken XML request" searchProperties="true" id="b7cedbd9-5b15-4cff-95c7-7fd92aab476e">
      <con:settings/>
      <con:testStep type="groovy" name="Add SoldAs BundleID RightsTokenUpdate request" id="341c73fb-dd1d-4ad2-b62a-214ee2f4b745">
        <con:settings/>
        <con:config>
          <script>import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange
import groovy.xml.StreamingMarkupBuilder

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

def IRightsXMLReq = testProject.getPropertyValue("ParamRTUReq");
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT");
//log.info IRightsXMLReq;

URightsXMLReq = new XmlSlurper().parseText(IRightsXMLReq);

def Bundleadd = URightsXMLReq.SoldAs.find{it.name() == 'SoldAs'}
		Bundleadd.replaceNode { node -> 
			 'ns4:SoldAs'{
				'ns4:DisplayName'('${#TestCase#SoldAsDisplayName}',Language:'${#TestCase#SoldAsLanguage}')						
				'ns4:BundleID'('${#TestCase#SoldAsBundleID}')
			}
		}


// check the whole document using XmlUnit
def outputBuilder = new StreamingMarkupBuilder()
String RightsXMLReqBD = outputBuilder.bind{ mkp.yield URightsXMLReq }

//log.info RightsXMLReqBD.toString();

TsRightsXMLReq.setPropertyValue("Request", RightsXMLReqBD.toString());</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Comment XML elements" id="7f720552-b3e2-4e68-ae60-a8e7621aab3a">
        <con:settings/>
        <con:config>
          <script>import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange
import groovy.xml.StreamingMarkupBuilder

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

def IRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest").getTestStepByName("RightsTokenCreate Request POST").testRequest.requestContent;
def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest").getTestStepByName("RightsTokenCreate Request POST");
log.info IRightsXMLReq;

URightsXMLReq = new XmlSlurper().parseText(IRightsXMLReq);


def AddComments = URightsXMLReq.depthFirst().findAll{it.name() == 'PurchaseProfile'}
//log.info AddComments.toString();


// check the whole document 
def outputBuilder = new StreamingMarkupBuilder()
String RightsXMLReqBD = outputBuilder.bind{ 
	mkp.comment AddComments
	mkp.yield URightsXMLReq 
	}

log.info RightsXMLReqBD.toString();</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10043_RightsTokenUpdate_FUNC_RTL_Verify_No_SOLDAS_RetailerBundleID_Update</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get-Set Node Role" searchProperties="true" id="3314c29b-cc6e-4f3c-aeeb-2f0445c26593">
      <con:settings/>
      <con:testStep type="groovy" name="Set Node Role for RTD" id="91996ce3-5c5d-4235-bbc9-3d5bd9db8297">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbNode;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

testCase.setPropertyValue("nodeid", callingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("NodeRole", callingTCase.getPropertyValue("NodeRole"));

myDbNode = new dbUtils.dbNode(log,testProject.getPropertyValue("targetSystem"));;

nodeid = testCase.getPropertyValue("nodeid");
NodeRole = testCase.getPropertyValue("NodeRole");

rcNode = myDbNode.nodeSetRole(nodeid,NodeRole);

log.info  testCase.getPropertyValue("NodeRole") + " has been NodeRole Updated" ;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Get Node Role for RTD" id="45ac9b49-39d3-4eff-a9d6-5b57cba77e37">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbNode;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

myDbNode = new dbUtils.dbNode(log,testProject.getPropertyValue("targetSystem"));;

testCase.setPropertyValue("nodeid", callingTCase.getPropertyValue("nodeid"));

nodeid = testCase.getPropertyValue("nodeid");

NodeRole = myDbNode.nodeGetRole(nodeid);

log.info "NODE Role : " + NodeRole.toString();

testCase.setPropertyValue("NodeRole",NodeRole.toString());
callingTCase.setPropertyValue("NodeRole",testCase.getPropertyValue("NodeRole"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_30013 - RightsTokenUpdate - PERM - SecurityRoleInvalid - Invocation with Device</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdate_Invocation_ByPermission_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>NodeStatus</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>NodeRole</con:name>
          <con:value>urn:dece:role:device</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
  <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DiscreteMediaRightCreatePost" searchProperties="true" id="667690d7-cfa9-43d9-9ce4-c4c8582baaef"><con:settings/><con:testStep type="groovy" name="Call Validations only for Valid Test Cases" id="3b25e2f6-dd64-4086-bf45-1c005bd08d25"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def testStep1 = testCase.getTestStepByName("Call Verify Content Location and Get DiscreteMediaTokenOid");
def errorResponse = testCase.getPropertyValue("ErrorResponse");


def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//testCase.setPropertyValue("nodeid","0701");
//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
//headers.put("Authorization","SAML2 assertion=zVdJk6rKEt77KwzPssNmUJzidN8oxkZFBcFph0UJKINSIOivv4W2HrvP/N5bvEVHW0lm1peZX2Vlff2nCIPqESXYj6OXGvNM16oogrHjR+5LzTLleqf2z2vlK7bDgO0BjFGSEs2qKr7UIAfXTY7p1jkHsfUmbHTrdmdj1xtduKHbzfWa7cJaVcU4Q2qEUztKX2oszTB1ulVnOibd6nHNHsM8c1xzVavObhjYEgNBFeHeZdeXWpZEvdjGPu5FdohwL4W9KdCGPaLZs2+Qaq/vIC8bJtTrVwf3pr4b2WmWoHeHDn6peWm671FUnufPeeM5TlyKpWmaorsU0XGw736pkYDfjZGjRpv4uhbsKI58aAf+2S531FDqxU4VBG6c+KkX/sQ1QzF06bqOCliHTDP6UqO+bXBB94eePoBMsF3Hns3cnBlogxJSOlS1DPWl9uWPqnM1NRM7wps4CfGn9d8hQtERBfEeOXV8C+wG7s89/iBbr18R7KkRDDLsH9GopMDehghXJwna+MXQx4RYDq5eyl8t8I09CP5NRb5SjzgJbOoHmRF9F+H0PynXY6muXmZ2kKFX8NQdthZDn2nuOKvNtU5spzD2K66ZxC8XCI/KV1D3Sr+vP/P0Tqt3I8tm1/suNd7S6TDeHncQGFjx/aHmSG/FErvmvCWnvpDussMM5EtLSmm4VrZcs6/EIE83whGrihu3Y8qElcPIYgehiZyx48AJL7QmKLbEaBW2AZaVnDl0DmEWdeSA0QYyT4+H4XSQ8+5yjhJx5e/bUmOqupQ4TFDBVvJRzHHDRTiAXe/cga21aL18i+kxhjKuATpdgix/Lzi6K9qpfV8IZRfYkNOZoldNVcXsLAjgNHVBrvLAJX9bMOLd3cHb+Uo3p3mg6zIQBT7YSkMN7BTAWBLvacJsphXCGfR5dzQjhmYFBCteM6RczJfiTNffpNwzHWV2WitBtjpLIw3gi7HgaZIhzUTDlDQNxFdZoYlrpdhqUy1X9aVYIQ5EqdifHaWbIqXwIaty2pRjl1MuWy1mRC6fhuHouDalQBM0RZgelKm6boi61AfGcg5ZOSO252G4jytLi38w6u/RFiA5p8me4KyZu1wzLXYkGvZFZn6UaarS13ScC/olKqUi5f2Zdf6WC4HXBCeUCskEk2suoCnII3q16GN7zkWaAXLRvRgPpNwZ34BoOp1XhGuuhlJuSIY1kjVDzSVwkYlSHuA1O/LWineEDb3om2D7WBhBl+ZyRL5HxhGeuEPFVmSwDmcMbBge9DnfXsS5u+rkor7sD+KVStyMgC7xvA4IIBqUoZH882DIz7jx3u+yPhpu5DhEXlLRmHiwO54LuuM3xu5kNOfEza49UfxJw3Y8Sg0gu23sgKoiZ8B4uu0YS8oQI//cGg+sBfKT5TkdcTrT8jtcxZhn1kKMg7bztlhag6diCXVzPJla88m5KEaHbeccpG9j/i2Z9jXRHY8QmmD4RNG2zJsdkROWb1vCp41BI64CXI0HQNm6ruQTAvNv2ysJ3wxNIuQFmpArwlxQpkBRniSVF3V9I3vMBCqzzGJGmio5AUnTabkwgspK4EVSKdqer/ZLVqZXJnAuzvSmJLu6xT31F2iljwJzloJ8P9tEDEMre/1to+Uu1EoGOGo+5ckp4iuZCix7vO/TxWDWopmD7gT9aRdYjWLK7oqx565OO3e1I0VZPhydpQmCmfnAMZVQbF7RTcnQQOd63gpNtRpGAMNivw5hIZqkZhfj2OQlQ9ZpqxBFMLjKsAnYAi/P0lYTpIt9BRSaTWhxXC88vIxG/tiUMkLa7IEu2zVL/5ZjJcUqHzl2EIAOPnNMunJMApvDk9oRGcy1hD2e5y6vSAe9PRv2u3taXwx3Ff5JptzUD5rjqJObg6c5c8rb3lafz7uq6AlP0WbpNdYpT9tnqKP+rq34xk6MWs3gpA01nbN8KjjRW3TI8bAyUplIaqRnmeom2RMfrvzwfG40WSucTLOjatkDzJy89WHezbeTtxZFJcqJO7dXR11exHB5vUc+N8m78NpGqccG+6ED3+aqabbeIpjeluU9rIpVmVyOdvrzGY15Zi4S36lvLqq9LMJ7BAkM5NReSzMHQdTLyBjnOz1ydV7XgOt2+W63xcgSy4CGKNFNmpFpQLdLoQS+Uo8wPmEU4mjjl5uVo+r1tv71FAnD3hrZCUpqv/BUJqqqRgYZP+IIIzN+qWHSVbLIP2QkPo9cyrXqKE7H0TgBmxQll3GX/fG4a5AU7H1UzsQPwwMq7HAfoGcYh5QNYZxFKSY/8GU++Smwz99uMRAdxy8VcAmLR6QA6PMI3mj3GjdMf4j95h5kjl+OISQhaeLDK5KPn14fYivL+hzFDnoua3iDfNf8U8vO95bUL/BQn1Nx38g5+g/b3p4RqkjGq1fAC6J09/vx22cLMm6X4hIvJoCvYFFGHjzJ89o/U/cXCv6HvJrsNXTQd57ffdzlH7FlqRdNU3JoQ8KX6mX5+wfVB2sSfoqK9EcyISAAy81/+cqCPVjqEfGE/MvjxPmW9R/4+tHHj8J7PHdMKSnaOkvRz79Uy8P+Uns/GL5TuwhuHeiBMI/pFyVBosDVRBVr3zm9DJjvL4YC//TFsNCGU+ih0K7ddf3fK9f9S50gaQxEv5ee9gR/QR62ZPPIfWh/95geOmCzK7MdXmZbtMxyzc69A5LOSLOtewf8GMnrd+LvJf9F7pPb2+Nvsm9I8v9d5oEs8gLDNsg12mj+T1L5+Uy//gs=");

testRunner.testCase.getTestStepByName("DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost").testRequest.setRequestHeaders(headers);


//SetUp test properties

testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("assertionAccountIdFULL"));
//testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("assertionAccountIdFULL"),"UTF-8"));
testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
//testCase.setPropertyValue("PolicyLockerViewAllConsent",CallingTCase.getPropertyValue("PolicyLockerViewAllConsent"));

if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("encodedRightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}

testCase.setPropertyValue("ContentProfile",CallingTCase.getPropertyValue("ContentProfile"));

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTCReq","OK");
CallingTCase.setPropertyValue("FeedRTCReq",testCase.getPropertyValue("FeedRTCReq"));



if(errorResponse != "Created")
{
	testStep1.setDisabled(true);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set PEM File" id="0ff63794-a29c-4976-8e57-061d6a2f93bf"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config></con:testStep><con:testStep type="restrequest" name="DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost" id="91321db1-d3d1-4b1b-934c-b9a6f7bffba5"><con:settings/><con:config service="DMRCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{NodeAccountId}/RightsToken/{RightsTokenId}/DiscreteMediaRight" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept=""><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVbbcuI4EP0VyvOYMpZvXFyBKhJC1kwYkkAymXnZEnJjlNgSWDKQ+fqVDDhALsvuk0vt1unTFx3pXOA0cYKOEJBJylllnSZMBIW1ZeQZCzgWVAQMpyACSYJRZ3ATOFUU4N0WoxJ2W8bftag2cRyomR7GvulFftOc2LZrQhShBrFt5Ea+chUih5AJiZlsGQ6yPdNGpovGthcgFPhuteai30blETKhsJVLFRlbUmvRMmZSzgPLWq1W1ZVb5VlsOQjZ1tPgZkRmkGKjfb7JqAiUtbf+pBoBgSQhVcJT69w68DmPRDCiMcMyz2AbK/osFrJQ01I+kaDxN6PcC1HIprxYXmLGGSU4oX+wrs8A5IxHlU4S84zKWfppEjbSwCasiUlsj30zrENqJwIdMMwENsUM21use5hCBoxA5eE+bBnfTutasXWcYSamPEvF4fK/8QG2hITPITLFLq0ttdMBP6hU+xxIEDKS5IIu4Yce1jkmILbdBHI6VOU2gyld31ChBnQtNDtrn97RclONLo1ByP/ToL3mbEAecZJDW3oPJE/iZn+wXIe38Wgx6ta79C5+RWGrILDvXBjK1m6WR0NZDtFmx+sLDCbZrZiGQzz4ha7WNy9+z67/zhfUf5jPmkNv7HKeSuxeiU5kiTE6u3h88J35X33X6vyk4YWcDhZ96/tv+DOMqf888e7YWSoi4V3HtV/c8/q45j3FyQgNF/ZjfNfr1Wf2WXKdPnQsunJ//LzzVtMHqyvoi5/nFLJr3L/vvwxv06fJWTQZeyhc0D66xtt0j/gf2nZnfpRPnoHI3VKPQdit9FSXsPxazLSFRua0cA3mWnyEBCaNtt6ltSPIldzRKFA93KxRreN7V5e1ZuOi4TSbzSvku6jebNo91HHrjrMTmQ2LI4qXnE2pjqUldzM2XxMkaSCARZCZS54rpRPGF4hdLHElZPfqEHAmYMyVPNtxw1vUnomYyMkfu57wBhcv9edI1o3KDy6HbJh1phKyQ1GuH4jyPRA6p6CVWw+2UJMtpCrGAi9zmdjVJa4yyJW2Z1pmA8dr+Jag6TwBTdVKeZQnUJ3P5kVpLLH5OiYmorDeX42L4/ZpYsf/djVQPhHVDkLncgGqj/DB7eLtEvk0YQftJ7yD7+QR1SdLFVRmlGyYHP56mxM9IOWQqIx2lEvPY8MBqnWcUBkoWlJSTnp5XysZVwe/vWvHAlcX1Xy5zIsG1LXAZQpeqY7tW8ixRkByJU2vY/4CzCpRrJPugZL4UfDSfkgxlzM2klhCqiamUixPuPhHIPTFH6pZX5/6qjgIqUonYS0/sl0m6tGiGX/5riEB0X7KfKs+K55Fbx37AGsvjspT3fuSsliv9B3w+slcEK5gqVIvnu2DfwTwUfBDY1nkkotUAzXJJXz+p6JlqWVgQnjOZNg1CsO+VBY85escgjendzCFGpfPM/rv7zOTFiNAQD3qBC3w9S0b6CPA4j253QZ9r7iNXs/1PKdx5ewrrl27vCyLcsCu/c783rJXp+MZb/8D" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<DiscreteMediaToken State="${#TestCase#State}" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.07/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <RequestingUserID>${#Project#assertionUserIdFULL}</RequestingUserID>
   <RightsTokenID>${#TestCase#RightsTokenId}</RightsTokenID>
   <DiscreteMediaFulfillmentMethod>${#TestCase#DiscreteMediaFulfillmentMethod}</DiscreteMediaFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:dvd:packaged</AuthorizedFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:bluray:packaged</AuthorizedFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:securedigital</AuthorizedFulfillmentMethod>
   <AuthorizedFulfillmentMethod>urn:dece:type:discretemediaformat:dvd:cssrecordable</AuthorizedFulfillmentMethod>
   <MediaProfile>${#TestCase#ContentProfile}</MediaProfile>
    <LeaseExpiration>${#TestCase#LeaseExpiration}</LeaseExpiration>
</DiscreteMediaToken>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeAccountId" value="${#TestCase#encodedAccountID}"/>
  <con:entry key="RightsTokenId" value="${#TestCase#encodedRightsTokenID}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Validate Error Codes for DiscreteMediaRightCreate" id="626d368b-2c91-4b1f-b701-2afc710d8569"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def valErrTC = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName('Validate Error Codes');

def resXML = null;
try
{
	resXML = testRunner.testCase.getTestStepByName('DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost').httpRequest.response.getResponseContent();
}
catch (Throwable e)
{
	log.info e;		
}

def status = "";
try
{
	status = testRunner.testCase.getTestStepByName('DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost').httpRequest.response.responseHeaders["#status#"]; 
}
catch(Throwable e)
{
	log.info e;
}

def connection = "";
try
{
	connection = testRunner.testCase.getTestStepByName('DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost').httpRequest.response.responseHeaders["Connection"];
}
catch(Throwable e)
{
	log.info e;
}

def contentType = "";
try
{
	contentType = testRunner.testCase.getTestStepByName('DiscreteMediaRightCreatePost - DiscreteMediaRightCreatePost').httpRequest.response.responseHeaders["Content-Type"];
}
catch(Throwable e)
{
	log.info e;
}
valErrTC.setPropertyValue("ResponseXML", resXML);
valErrTC.setPropertyValue("RightsTokenId", testCase.getPropertyValue("RightsTokenId"));
valErrTC.setPropertyValue("ErrorResponse", testCase.getPropertyValue("ErrorResponse"));
valErrTC.setPropertyValue("ContentProfile", testCase.getPropertyValue("ContentProfile"));
valErrTC.setPropertyValue("DiscreteMediaProfile", testCase.getPropertyValue("DiscreteMediaProfile"));
valErrTC.setPropertyValue("ResponseStatus", status[0]);
valErrTC.setPropertyValue("ConnectionStatus", connection[0]);
valErrTC.setPropertyValue("ContentType", contentType[0]);
valErrTC.setPropertyValue("HTTPMethod", "POST");

def runnerValErrTC = valErrTC.run(null, false);
assert "$runnerValErrTC.status" != "FAILED";
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Verify Content Location and Get DiscreteMediaTokenOid" id="361b92fb-708e-4ef8-b409-5b5f0ff71b73" disabled="true"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testSuite.getTestCaseByName("Verify Content Location and Get DiscreteMediaTokenOid");
commonTC.setPropertyValue("TCaseName", testCase.name);
commonTC.setPropertyValue("TSuiteName", testSuite.name);

def runnerCommonTC = commonTC.run( null, false);

assert "$runnerCommonTC.status" != "FAILED";

def callingTC = testRunner.testCase.testSuite.project.getTestSuiteByName(testCase.getPropertyValue("TSuiteName")).getTestCaseByName(testCase.getPropertyValue("TCaseName")); 

callingTC.setPropertyValue("DiscreteMediaTokenOid", testCase.getPropertyValue("DiscreteMediaTokenOid"));
callingTC.setPropertyValue("DiscreteMediaTokenId", testCase.getPropertyValue("DiscreteMediaTokenId"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Call Enable Test Steps" disabled="true" id="20fde278-9d40-49ef-931d-eae98557db5b"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def commonTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName('Enable Test Steps');
commonTC.setPropertyValue("TSuiteName", testCase.name);
commonTC.setPropertyValue("TCaseName", testSuite.name);

def runnerCommonTC = commonTC.run(null, false);
assert "$runnerCommonTC.status" != "FAILED";</script></con:config></con:testStep><con:properties><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10057_RightsTokenUpdate after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value></con:property><con:property><con:name>State</con:name><con:value>urn:dece:type:state:discretemediaright:available</con:value></con:property><con:property><con:name>RightsTokenOid</con:name><con:value>C52CB7BFFF0FAB40E0401F0A0599362A</con:value></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>NodeRole</con:name><con:value>urn:dece:role:retailer</con:value></con:property><con:property><con:name>NodeOid</con:name><con:value>222259</con:value></con:property><con:property><con:name>NodeId</con:name><con:value>RET</con:value></con:property><con:property><con:name>LeaseExpiration</con:name><con:value>2011-06-04T02:30:57</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>DiscreteMediaTokenOid</con:name><con:value>C5427E3ED39A8EF1E0401F0A0599251C</con:value></con:property><con:property><con:name>DiscreteMediaTokenId</con:name><con:value>urn:dece:discretemediatokenid:org:dece:C5427E3ED39A8EF1E0401F0A0599251C</con:value></con:property><con:property><con:name>DiscreteMediaFulfillmentMethod</con:name><con:value>urn:dece:type:discretemediaformat:bluray:packaged</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>PolicyLockerViewAllConsent</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>encodedRightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Git\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get-Set ASSET Statuses" searchProperties="true" id="4f243160-d103-419a-837a-f54d5813bb15">
      <con:settings/>
      <con:testStep type="groovy" name="Get ASSET Statuses for RTC" id="59438c9c-6f25-4d8f-bbdb-78cc633dc2a0">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbNode;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);
log.info callingTCase.getName();

myDb = new dbUtils(log,testProject.getPropertyValue("targetSystem"));;
AssetStatusXML = myDb.SelectFromDB("select Status from ASSET_STATUS_REF where Status != 'active'","LP1");

log.info AssetStatusXML.toString();

testCase.setPropertyValue("AssetStatusXML",AssetStatusXML.toString());
callingTCase.setPropertyValue("AssetStatusXML",testCase.getPropertyValue("AssetStatusXML"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Set ASSET Statuses for RTC" id="84f49f86-ea76-4b4c-bea5-5b45c2958579">
        <con:settings/>
        <con:config>
          <script>import dbUtils.dbUtils;
import dbUtils.dbNode;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

log.info CallingTCase.getName();
//log.info CallingTCase.getPropertyValue("nodeid");

myDb = new dbUtils(log,testProject.getPropertyValue("targetSystem"));;

testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("AssetStatus",CallingTCase.getPropertyValue("AssetStatus"));

ALID = testCase.getPropertyValue("ALID");
AssetStatus = testCase.getPropertyValue("AssetStatus");

AssetStatusXML = myDb.UpdateDB("Update  ASSET_MAP_LP set STATUS ='$AssetStatus'where ALID ='$ALID'","LP1");

Upd_AssetStatusXML = myDb.SelectFromDB("select Status from ASSET_MAP_LP where ALID = '$ALID'","LP1");

log.info Upd_AssetStatusXML.toString();
def Val_AssetStatusXML = new XmlSlurper().parseText(Upd_AssetStatusXML);

Upd_AssetStatus =  Val_AssetStatusXML.ResultSet.Row.STATUS

testCase.setPropertyValue("AssetStatus",Upd_AssetStatus.toString());

CallingTCase.setPropertyValue("AssetStatus",testCase.getPropertyValue("AssetStatus"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>NodeStatusXML</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <STATUS>deleted</STATUS>
    </Row>
    <Row rowNumber='2'>
      <STATUS>pending</STATUS>
    </Row>
    <Row rowNumber='3'>
      <STATUS>suspended</STATUS>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_20006_RightsTokenUpdate_FUNC_RTL_CS_With_Inactive_ALID</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R2_RightsTokenUpdate_RTL_CS_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>AssetStatusXML</con:name>
          <con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <STATUS>deleted</STATUS>
    </Row>
    <Row rowNumber='2'>
      <STATUS>other</STATUS>
    </Row>
    <Row rowNumber='3'>
      <STATUS>suspended</STATUS>
    </Row>
  </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>ALID</con:name>
          <con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value>
        </con:property>
        <con:property>
          <con:name>AssetStatus</con:name>
          <con:value>active</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validate Error Codes" searchProperties="true" id="c576cb97-7b4a-47fc-876b-0a1c138af575"><con:settings/><con:testStep type="groovy" name="Groovy Script" id="a3cf316c-cd12-4e25-844c-a084f4f2921c"><con:settings/><con:config><script>import dbUtils.dbErrors;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def host = testProject.getPropertyValue("Provision_HostName");
def port = testProject.getPropertyValue("targetPort");
def errorResponse = testCase.getPropertyValue("ErrorResponse");
def responseStatusAct = testCase.getPropertyValue("ResponseStatus");
def connectionStatusAct = testCase.getPropertyValue("ConnectionStatus");
def contentTypeAct = testCase.getPropertyValue("ContentType");
def HTTPMethod = testCase.getPropertyValue("HTTPMethod");

def hostError = "qa.q.uvvu.com";

String errorIDExp = null;
String errorReasonExp = null;
String errorLinkExp = null;
String orgRequestExp = null;
String responseStatusExp = null;
String connectionStatusExp = null;
String contentTypeExp = null;
String errorBodyExp = null;

def resXML = testCase.getPropertyValue("ResponseXML");
def myXML = null;

myDBErrors = new dbErrors(log, testProject.getPropertyValue("targetSystem"));

if(errorResponse != "MethodNotAllowed" &amp;&amp; resXML != null)
{
	try
	{
		myXML = new XmlSlurper().parseText(resXML);
	}
	catch(Throwable e)
	{
		log.info e;					
	}
}

switch (errorResponse) 
{	
       case "Created":        
        responseStatusExp = "HTTP/1.1 201 Created";  
        connectionStatusExp = "Keep-Alive"; 
        contentTypeExp = "text/plain;charset=UTF-8";                
        break; 

       default:
       assert false;
	  break;       
	                          
}

boolean iFailed = false;

try
{
	log.info 'responseStatusExp==='+responseStatusExp
	log.info 'responseStatusAct==='+responseStatusAct
	assert responseStatusExp == responseStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info responseStatusExp;
	log.info responseStatusAct;
	iFailed = true;
}

try
{
	log.info 'connectionStatusExp =='+connectionStatusExp
	log.info 'connectionStatusAct =='+connectionStatusAct
	assert connectionStatusExp == connectionStatusAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info connectionStatusExp;
	log.info connectionStatusAct;
	iFailed = true;
}

try
{
	log.info 'contentTypeExp =='+contentTypeExp
	log.info 'contentTypeAct =='+contentTypeAct
	assert contentTypeExp == contentTypeAct;
}
catch(Throwable e)
{
	log.info e;		
	log.info contentTypeExp;
	log.info contentTypeAct;
	iFailed = true;
}



assert iFailed == false;

log.info 'Woohoo!';
</script></con:config></con:testStep><con:properties><con:property><con:name>ResponseXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsTokenId</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>ErrorResponse</con:name><con:value>Created</con:value></con:property><con:property><con:name>ContentProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>DiscreteMediaProfile</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ResponseStatus</con:name><con:value>HTTP/1.1 400 Bad Request</con:value></con:property><con:property><con:name>ConnectionStatus</con:name><con:value>close</con:value></con:property><con:property><con:name>ContentType</con:name><con:value>application/xml;charset=UTF-8</con:value></con:property><con:property><con:name>HTTPMethod</con:name><con:value>POST</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenGet Request" searchProperties="true" id="4f9b7bd0-a1c7-405d-bc43-d63d77c3b478">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Get Properties" id="2931b958-8e84-4150-bb1a-2390ac01baab">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//testCase.setPropertyValue("nodeid","0701");
//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
//headers.put("Authorization","SAML2 assertion=zVdJk6rKEt77KwzPssNmUJzidN8oxkZFBcFph0UJKINSIOivv4W2HrvP/N5bvEVHW0lm1peZX2Vlff2nCIPqESXYj6OXGvNM16oogrHjR+5LzTLleqf2z2vlK7bDgO0BjFGSEs2qKr7UIAfXTY7p1jkHsfUmbHTrdmdj1xtduKHbzfWa7cJaVcU4Q2qEUztKX2oszTB1ulVnOibd6nHNHsM8c1xzVavObhjYEgNBFeHeZdeXWpZEvdjGPu5FdohwL4W9KdCGPaLZs2+Qaq/vIC8bJtTrVwf3pr4b2WmWoHeHDn6peWm671FUnufPeeM5TlyKpWmaorsU0XGw736pkYDfjZGjRpv4uhbsKI58aAf+2S531FDqxU4VBG6c+KkX/sQ1QzF06bqOCliHTDP6UqO+bXBB94eePoBMsF3Hns3cnBlogxJSOlS1DPWl9uWPqnM1NRM7wps4CfGn9d8hQtERBfEeOXV8C+wG7s89/iBbr18R7KkRDDLsH9GopMDehghXJwna+MXQx4RYDq5eyl8t8I09CP5NRb5SjzgJbOoHmRF9F+H0PynXY6muXmZ2kKFX8NQdthZDn2nuOKvNtU5spzD2K66ZxC8XCI/KV1D3Sr+vP/P0Tqt3I8tm1/suNd7S6TDeHncQGFjx/aHmSG/FErvmvCWnvpDussMM5EtLSmm4VrZcs6/EIE83whGrihu3Y8qElcPIYgehiZyx48AJL7QmKLbEaBW2AZaVnDl0DmEWdeSA0QYyT4+H4XSQ8+5yjhJx5e/bUmOqupQ4TFDBVvJRzHHDRTiAXe/cga21aL18i+kxhjKuATpdgix/Lzi6K9qpfV8IZRfYkNOZoldNVcXsLAjgNHVBrvLAJX9bMOLd3cHb+Uo3p3mg6zIQBT7YSkMN7BTAWBLvacJsphXCGfR5dzQjhmYFBCteM6RczJfiTNffpNwzHWV2WitBtjpLIw3gi7HgaZIhzUTDlDQNxFdZoYlrpdhqUy1X9aVYIQ5EqdifHaWbIqXwIaty2pRjl1MuWy1mRC6fhuHouDalQBM0RZgelKm6boi61AfGcg5ZOSO252G4jytLi38w6u/RFiA5p8me4KyZu1wzLXYkGvZFZn6UaarS13ScC/olKqUi5f2Zdf6WC4HXBCeUCskEk2suoCnII3q16GN7zkWaAXLRvRgPpNwZ34BoOp1XhGuuhlJuSIY1kjVDzSVwkYlSHuA1O/LWineEDb3om2D7WBhBl+ZyRL5HxhGeuEPFVmSwDmcMbBge9DnfXsS5u+rkor7sD+KVStyMgC7xvA4IIBqUoZH882DIz7jx3u+yPhpu5DhEXlLRmHiwO54LuuM3xu5kNOfEza49UfxJw3Y8Sg0gu23sgKoiZ8B4uu0YS8oQI//cGg+sBfKT5TkdcTrT8jtcxZhn1kKMg7bztlhag6diCXVzPJla88m5KEaHbeccpG9j/i2Z9jXRHY8QmmD4RNG2zJsdkROWb1vCp41BI64CXI0HQNm6ruQTAvNv2ysJ3wxNIuQFmpArwlxQpkBRniSVF3V9I3vMBCqzzGJGmio5AUnTabkwgspK4EVSKdqer/ZLVqZXJnAuzvSmJLu6xT31F2iljwJzloJ8P9tEDEMre/1to+Uu1EoGOGo+5ckp4iuZCix7vO/TxWDWopmD7gT9aRdYjWLK7oqx565OO3e1I0VZPhydpQmCmfnAMZVQbF7RTcnQQOd63gpNtRpGAMNivw5hIZqkZhfj2OQlQ9ZpqxBFMLjKsAnYAi/P0lYTpIt9BRSaTWhxXC88vIxG/tiUMkLa7IEu2zVL/5ZjJcUqHzl2EIAOPnNMunJMApvDk9oRGcy1hD2e5y6vSAe9PRv2u3taXwx3Ff5JptzUD5rjqJObg6c5c8rb3lafz7uq6AlP0WbpNdYpT9tnqKP+rq34xk6MWs3gpA01nbN8KjjRW3TI8bAyUplIaqRnmeom2RMfrvzwfG40WSucTLOjatkDzJy89WHezbeTtxZFJcqJO7dXR11exHB5vUc+N8m78NpGqccG+6ED3+aqabbeIpjeluU9rIpVmVyOdvrzGY15Zi4S36lvLqq9LMJ7BAkM5NReSzMHQdTLyBjnOz1ydV7XgOt2+W63xcgSy4CGKNFNmpFpQLdLoQS+Uo8wPmEU4mjjl5uVo+r1tv71FAnD3hrZCUpqv/BUJqqqRgYZP+IIIzN+qWHSVbLIP2QkPo9cyrXqKE7H0TgBmxQll3GX/fG4a5AU7H1UzsQPwwMq7HAfoGcYh5QNYZxFKSY/8GU++Smwz99uMRAdxy8VcAmLR6QA6PMI3mj3GjdMf4j95h5kjl+OISQhaeLDK5KPn14fYivL+hzFDnoua3iDfNf8U8vO95bUL/BQn1Nx38g5+g/b3p4RqkjGq1fAC6J09/vx22cLMm6X4hIvJoCvYFFGHjzJ89o/U/cXCv6HvJrsNXTQd57ffdzlH7FlqRdNU3JoQ8KX6mX5+wfVB2sSfoqK9EcyISAAy81/+cqCPVjqEfGE/MvjxPmW9R/4+tHHj8J7PHdMKSnaOkvRz79Uy8P+Uns/GL5TuwhuHeiBMI/pFyVBosDVRBVr3zm9DJjvL4YC//TFsNCGU+ih0K7ddf3fK9f9S50gaQxEv5ee9gR/QR62ZPPIfWh/95geOmCzK7MdXmZbtMxyzc69A5LOSLOtewf8GMnrd+LvJf9F7pPb2+Nvsm9I8v9d5oEs8gLDNsg12mj+T1L5+Uy//gs=");

testRunner.testCase.getTestStepByName("RightsTokenGet byTokenID").testRequest.setRequestHeaders(headers);


//SetUp test properties
if (callTSuitename=="Common Test Steps")
{
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("encodedAccountID"));
testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("encodedRightsTokenID"));
}
else
{
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("rightstokenid"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("AccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("RightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}
}

//testCase.setPropertyValue("PolicyLockerViewAllConsent",CallingTCase.getPropertyValue("PolicyLockerViewAllConsent"));
//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTCReq","OK");
CallingTCase.setPropertyValue("FeedRTCReq",testCase.getPropertyValue("FeedRTCReq"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="8766b42d-25a9-44e6-a930-83f00fcac7e6">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightsTokenGet byTokenID");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightsTokenGet byTokenID" id="5495b3b6-32eb-4f1b-999d-16605c44b427">
        <con:settings/>
        <con:config service="RightsTokenGet" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightsTokenGet byTokenID" mediaType="application/xml" sslKeystore="RET_concat.pem" accept="" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Query_HostName}</con:endpoint>
            <con:request/>
            
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#AccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#RightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightsTokenGet.d" disabled="true" id="a3f810c4-7bed-49b9-8468-f6614974e5f0">
        <con:settings/>
        <con:config service="RightsTokenGet" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightsTokenGet.d" mediaType="application/xml" sslKeystore="0798_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdbd6LKEn73V7jcj1kJDXhfk6zVXCSoqCBeX86CpgUUQWkQ9NefBqNjMpnZc85Dol3W5auqj6L6B7H2AdeFhOA48aOwqkqvNauN7U5nU3+2WvRfHTn0m8Vvnh27bndQx+6AFqhVVUJSrIYkscLktcYBln0G7WeWMznQrXe6oPPS5hvrWnWOY0I9U5UXapXvg5B0y6ivtTQOu5FFfNINrT0m3QR1p1Abdqlm17pBqr39uIIsA8ZvXpIcugyDXhyMcBCgFxTtmR/MJ50fDulOfTe0kjTGHzEd8lr7sM2y7CXjX6LYZTgAAAM6DNVxiO/+U3ur3Iyxo4ab6HoWrTAKfWQF/sUqQGk48SKnCgM3iv3E2//GNcuwoHD9jHP0jNh6+E+N+RmgRPeXnj6BjIn1TDyLvTkz8AbHOES4OjPU19o/f9XAq6kZWyHZRPGefDn/b4hweMJBdMDOM7kldgP39x6/qdbbD4y6aoiClPgnPCpYcrAQJtVJjDd+PvQJ5Z5DqmX3qzm5EQyj/6UjP5hHnBQ2801lJN/FJPl/2vXYqquXuRWk+G0+lXnD1MU4Qjo4eW19rfCsl537LngtITwqX0HdO/1x/srTO60+jJy+xIt2OAdrbpjBgXWaxJ41Rk/ntWYtVqN56/ykjVOFjzxWH0dq22LqYMgN08WJG0s4HUSzdmhrzWRzPlgVsX8MhfOJxYFk8HJoGO9y1OgnhrHltkEH12O0ZNvLpYHwYChMlHoGNu/Y7i22uNUXeH+pEjRpGVMw8kir0hyHiglW6VqUg8yPmvWn7PVnTo85FHkN8LlMsvi+bICOZCXW/SAWg2JDn84Ev2mqKqUXUYTnqQszVYAu/dvCkeDujt7OVzoZEKCu96AkCsFWHmpwp0B2JgueJs7nWi5eYF9wR3NqaFZgsBY0Q86kbCXNdf1dzjzTUeZnWwnS9UUeaZCUxqKnyYY8lwxT1jQYXWW5JtlKvtWmWqbqK6lCHUhyfrg4SifBSu4jTm1o0wa3mjbS9XJO5b3zcD862aYcaKKmiNOjMlVtXtLlPjRWC8T1Ump7Ge4PUWU1Ex6M+ge8hbiXARoTXjRzl2nmjBtJhlXKzM8yTVX6mk4yUS+zUipy1p/PLj9rIQqa6OzlXDbh5FoLZIq9EVgv+8RaNELNgJnklsYDOXPGNyCaDrKKeK3VUM4M2ZiNepqhZjIsZZKcBcTmRp6teCfE63nfhNvHxoi6vOiF9PfQOKFz41ixlB6093MW8YaH/IZvLaPMXbczSV/1B9FapW5GUJcFQYcUEIBFarT+AhwK88b44Hc4Hw83vWiPvbiisdFgd7rkoO3zY3cyWjSkza41UfwJbzkeowaI2/I7qKrYGbCebjnGijGk0L80x4PZEvvx6pKMGjrb9NuNirFIZ0spClrO+3I1GzzlK6Sb48l0tphc8nx03LYvQfI+Ft7jaV+T3PEI4wlBTwyweoLZlhri6n1L+bQxAG5UoKsJECpb15V9SmDhfXsl4buhyZS8UBMzRVyIyhQqypOsCpKub3oeO0HKPJ2xI02VnYCW6bxaGkFlLQoS7RSwFuvDiuuBtQmd0plel3uuPms89Zd4rY8Cc57A7DDfhCwLlIP+vtEyF2kFAxw1mwr0KRIqqQpn1vjQB/lg3gTsUXeC/rQDZ3w+5Xb52HPX55273tGmrB4enZUJg7n5wDGVUmxR0U3Z0GD7+rzlmjrjjQDt84O9R7lk0p6VxpEpyEZPB7NckuDgKiMm5HKyushbTZRL+wrMNYvS4mQvPbIKR/7YlFNK2vSBLlubA//KsYJilc8cO4pQh185Jl85JsPN8UltSyxpNMUDWWSuoMhHvTUf9jsHoC+Hu4rw1GPcxA/q47CdmYOnBXvOWt5WXyw6quSJT+Fm5fF2IgDrgnTc37UU39hJYbMenLWhpjdmPhOcwRYfMzKsjFQ2lPnk0mM6cfok7Nf+/nLh69xsP5mmJ3VmDQh79uzjopNtJ+9NhomVc+PSWp/03jJCq+t75OuQvAuvY5R5HLCfJvBt9Zqm9haj5HYs3sOqVO3Rl6OV/HmNKyS+87wpVbuHYhckCQ6T2lthVaxw3ZQuer7TpW/O6xnWOz2uLfS4JlvnGvW2DOqA7QEIGp0O4Jq92653RfEFohiFG7+IVSyz15f1nwGifdfGVozj2h88FXWqqqFBt48oJNiMXmv/sW0A7A3PI9uyWdxptC3QBnWeb7VtvmnbLN+kuOus3eZr1VGUjMNxDDcJjh92Zf7rrmxg5B98XCzUH2sFSWhNjtYpTQL25WS9hDilG3dcLL1drt5uMMTfHwJcIGf2kZMG+OXgHcoKMeT6yT1biJRSB2+sNEieyaFcen6b7tffbpWhOo5fKJAiIwHTruJfVv92t3FL55e0uW+vCDf3MHX8YrehZU5iH12RfP7pJ2sKutwpA1qd9g3zXfWvTTu/mjJ/QMR8LcY9knPyH+LeLjB0J6drW3lvIbSjR+vl+JKeTmnZw1axksbUPcMygJlilNK18mxGOxwydw/M3yz0d8xf4t7ln9GliRdOEzoN9pRu1fL475e5T9a0AAnOk+9kYkCvb0XwP97wUBcVelQ8oR9ZFDs/6/6Nr4c4FHIxyfzQLU7FJn7+3N6Px6SLIurVp8Msih99f2f/XezPwnu57lASygo7TfDvf6kWU4peqRGK0jBRpVopeJycJebkfMDdn0q/uClX4Y+7Tf67iyzLLLXhFHl4b9Xuuv6/Kz/7ZeMRplbEL7G81nJ6S6fBQ/dhUn8A/H5Yg943wxreC/gpk7dfxL9KHmr6ldlv/wU=" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>https://qa.d.uvvu.com:7001</con:endpoint>
            <con:request/>
            <con:assertion type="Schema Compliance" id="c5208353-bc0b-470a-82b0-07423a7e5e36">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#AccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#RightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Copy of RightsTokenGet.d" disabled="true" id="554bf26e-7e0e-4a85-80e5-d46d8242cea9">
        <con:settings/>
        <con:config service="RightsTokenGet" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Copy of RightsTokenGet.d" mediaType="application/xml" sslKeystore="0798_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>https://qa.d.uvvu.com:7001</con:endpoint>
            <con:request/>
            <con:assertion type="Schema Compliance" id="a90fef60-121c-4a45-90a9-745101e80745">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:username>schfau1</con:username>
              <con:password>Password1</con:password>
              <con:domain>DECE</con:domain>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="urn:dece:accountid:org:dece:B63430FA5E97FC0EE0401F0A0599303B"/>
  <con:entry key="RightsTokenID" value="${#TestCase#RightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      
      <con:testStep type="restrequest" name="RightsTokenGet byTokenID-CaseTesting" disabled="true" id="bd63824f-4308-4aed-a569-ea2c114dde1b">
        <con:settings/>
        <con:config service="RightsTokenGet" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightsTokenGet byTokenID-CaseTesting" mediaType="application/xml" sslKeystore="0798_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdbd6LKEn73V7jcj1kJDXhfk6zVXCSoqCBeX86CpgUUQWkQ9NefBqNjMpnZc85Dol3W5auqj6L6B7H2AdeFhOA48aOwqkqvNauN7U5nU3+2WvRfHTn0m8Vvnh27bndQx+6AFqhVVUJSrIYkscLktcYBln0G7WeWMznQrXe6oPPS5hvrWnWOY0I9U5UXapXvg5B0y6ivtTQOu5FFfNINrT0m3QR1p1Abdqlm17pBqr39uIIsA8ZvXpIcugyDXhyMcBCgFxTtmR/MJ50fDulOfTe0kjTGHzEd8lr7sM2y7CXjX6LYZTgAAAM6DNVxiO/+U3ur3Iyxo4ab6HoWrTAKfWQF/sUqQGk48SKnCgM3iv3E2//GNcuwoHD9jHP0jNh6+E+N+RmgRPeXnj6BjIn1TDyLvTkz8AbHOES4OjPU19o/f9XAq6kZWyHZRPGefDn/b4hweMJBdMDOM7kldgP39x6/qdbbD4y6aoiClPgnPCpYcrAQJtVJjDd+PvQJ5Z5DqmX3qzm5EQyj/6UjP5hHnBQ2801lJN/FJPl/2vXYqquXuRWk+G0+lXnD1MU4Qjo4eW19rfCsl537LngtITwqX0HdO/1x/srTO60+jJy+xIt2OAdrbpjBgXWaxJ41Rk/ntWYtVqN56/ykjVOFjzxWH0dq22LqYMgN08WJG0s4HUSzdmhrzWRzPlgVsX8MhfOJxYFk8HJoGO9y1OgnhrHltkEH12O0ZNvLpYHwYChMlHoGNu/Y7i22uNUXeH+pEjRpGVMw8kir0hyHiglW6VqUg8yPmvWn7PVnTo85FHkN8LlMsvi+bICOZCXW/SAWg2JDn84Ev2mqKqUXUYTnqQszVYAu/dvCkeDujt7OVzoZEKCu96AkCsFWHmpwp0B2JgueJs7nWi5eYF9wR3NqaFZgsBY0Q86kbCXNdf1dzjzTUeZnWwnS9UUeaZCUxqKnyYY8lwxT1jQYXWW5JtlKvtWmWqbqK6lCHUhyfrg4SifBSu4jTm1o0wa3mjbS9XJO5b3zcD862aYcaKKmiNOjMlVtXtLlPjRWC8T1Ump7Ge4PUWU1Ex6M+ge8hbiXARoTXjRzl2nmjBtJhlXKzM8yTVX6mk4yUS+zUipy1p/PLj9rIQqa6OzlXDbh5FoLZIq9EVgv+8RaNELNgJnklsYDOXPGNyCaDrKKeK3VUM4M2ZiNepqhZjIsZZKcBcTmRp6teCfE63nfhNvHxoi6vOiF9PfQOKFz41ixlB6093MW8YaH/IZvLaPMXbczSV/1B9FapW5GUJcFQYcUEIBFarT+AhwK88b44Hc4Hw83vWiPvbiisdFgd7rkoO3zY3cyWjSkza41UfwJbzkeowaI2/I7qKrYGbCebjnGijGk0L80x4PZEvvx6pKMGjrb9NuNirFIZ0spClrO+3I1GzzlK6Sb48l0tphc8nx03LYvQfI+Ft7jaV+T3PEI4wlBTwyweoLZlhri6n1L+bQxAG5UoKsJECpb15V9SmDhfXsl4buhyZS8UBMzRVyIyhQqypOsCpKub3oeO0HKPJ2xI02VnYCW6bxaGkFlLQoS7RSwFuvDiuuBtQmd0plel3uuPms89Zd4rY8Cc57A7DDfhCwLlIP+vtEyF2kFAxw1mwr0KRIqqQpn1vjQB/lg3gTsUXeC/rQDZ3w+5Xb52HPX55273tGmrB4enZUJg7n5wDGVUmxR0U3Z0GD7+rzlmjrjjQDt84O9R7lk0p6VxpEpyEZPB7NckuDgKiMm5HKyushbTZRL+wrMNYvS4mQvPbIKR/7YlFNK2vSBLlubA//KsYJilc8cO4pQh185Jl85JsPN8UltSyxpNMUDWWSuoMhHvTUf9jsHoC+Hu4rw1GPcxA/q47CdmYOnBXvOWt5WXyw6quSJT+Fm5fF2IgDrgnTc37UU39hJYbMenLWhpjdmPhOcwRYfMzKsjFQ2lPnk0mM6cfok7Nf+/nLh69xsP5mmJ3VmDQh79uzjopNtJ+9NhomVc+PSWp/03jJCq+t75OuQvAuvY5R5HLCfJvBt9Zqm9haj5HYs3sOqVO3Rl6OV/HmNKyS+87wpVbuHYhckCQ6T2lthVaxw3ZQuer7TpW/O6xnWOz2uLfS4JlvnGvW2DOqA7QEIGp0O4Jq92653RfEFohiFG7+IVSyz15f1nwGifdfGVozj2h88FXWqqqFBt48oJNiMXmv/sW0A7A3PI9uyWdxptC3QBnWeb7VtvmnbLN+kuOus3eZr1VGUjMNxDDcJjh92Zf7rrmxg5B98XCzUH2sFSWhNjtYpTQL25WS9hDilG3dcLL1drt5uMMTfHwJcIGf2kZMG+OXgHcoKMeT6yT1biJRSB2+sNEieyaFcen6b7tffbpWhOo5fKJAiIwHTruJfVv92t3FL55e0uW+vCDf3MHX8YrehZU5iH12RfP7pJ2sKutwpA1qd9g3zXfWvTTu/mjJ/QMR8LcY9knPyH+LeLjB0J6drW3lvIbSjR+vl+JKeTmnZw1axksbUPcMygJlilNK18mxGOxwydw/M3yz0d8xf4t7ln9GliRdOEzoN9pRu1fL475e5T9a0AAnOk+9kYkCvb0XwP97wUBcVelQ8oR9ZFDs/6/6Nr4c4FHIxyfzQLU7FJn7+3N6Px6SLIurVp8Msih99f2f/XezPwnu57lASygo7TfDvf6kWU4peqRGK0jBRpVopeJycJebkfMDdn0q/uClX4Y+7Tf67iyzLLLXhFHl4b9Xuuv6/Kz/7ZeMRplbEL7G81nJ6S6fBQ/dhUn8A/H5Yg943wxreC/gpk7dfxL9KHmr6ldlv/wU=" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request/>
            <con:assertion type="Schema Compliance" id="2125d221-e5c1-489c-a3fe-48e8b86f7956">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="urn:dece:accountid:org:dece:a49f28bf260f2548e0401f0a0599026a"/>
  <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:DEce:b6331cc03cfd1a3be0401f0a2222595915"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="BasicAuth-RightsTokenGet.d" disabled="true" id="9618595e-236b-4597-bfd1-641f380feea4">
        <con:settings/>
        <con:config service="RightsTokenGet" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="BasicAuth-RightsTokenGet.d" mediaType="application/xml" sslKeystore="0798_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>https://qa.d.uvvu.com:7001</con:endpoint>
            <con:request/>
            <con:assertion type="Schema Compliance" id="aa25319f-f138-442c-9440-2e32d3da9973">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:username>schfau1</con:username>
              <con:password>Password1</con:password>
              <con:domain>DECE</con:domain>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="urn:dece:accountid:org:dece:B63430FA5E97FC0EE0401F0A0599303B"/>
  <con:entry key="RightsTokenID" value="${#TestCase#RightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>RightsTokenUpdate Request</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>Common Test Steps</con:value>
        </con:property>
        <con:property>
          <con:name>AccountID</con:name>
          <con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>RightsTokenID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>FeedRTCReq</con:name>
          <con:value>OK</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET</con:value>
        </con:property>
        <con:property>
          <con:name>PolicyLockerViewAllConsent</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      <con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenUpdate Request_Without_SAML" searchProperties="true" id="c66f3c52-d5cc-4ec3-9168-33624babd47a">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Properties" id="1283678f-77a1-4f28-92d7-39f77ac81c26">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

//SetUp SAML assertion in Request header

/*def headers = new StringToStringMap()
headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);*/

//SetUp test properties
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion"));
// setUp Node Properties

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//SetUp test properties
testCase.setPropertyValue("assert",CallingTCase.getPropertyValue("assert"));
testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("rightstokenid"));
//testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
testCase.setPropertyValue("RightsLockerID","");
testCase.setPropertyValue("RightsLockerID",CallingTCase.getPropertyValue("RightsLockerID"));
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("encodedRightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}

testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName",CallingTCase.getPropertyValue("SoldAsDisplayName") );
testCase.setPropertyValue("SoldAsLanguage",CallingTCase.getPropertyValue("SoldAsLanguage"));
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID",CallingTCase.getPropertyValue("SoldAsBundleID"));
testCase.setPropertyValue("PPContentProfile1",CallingTCase.getPropertyValue("PPContentProfile1"));
testCase.setPropertyValue("PPDiscreteMediaRemaining1",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining1"));
testCase.setPropertyValue("PPDiscreteMediaProfile1",CallingTCase.getPropertyValue("PPDiscreteMediaProfile1"));
testCase.setPropertyValue("PPCanDownLoad1",CallingTCase.getPropertyValue("PPCanDownLoad1"));
testCase.setPropertyValue("PPCanStream1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPContentProfile2",CallingTCase.getPropertyValue("PPContentProfile2"));
testCase.setPropertyValue("PPDiscreteMediaRemaining2",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining2"));
testCase.setPropertyValue("PPDiscreteMediaProfile2",CallingTCase.getPropertyValue("PPDiscreteMediaProfile2"));
testCase.setPropertyValue("PPCanDownLoad2",CallingTCase.getPropertyValue("PPCanDownLoad2"));
testCase.setPropertyValue("PPCanStream2",CallingTCase.getPropertyValue("PPCanStream2"));
testCase.setPropertyValue("PPContentProfile3",CallingTCase.getPropertyValue("PPContentProfile3"));
testCase.setPropertyValue("PPDiscreteMediaRemaining3",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining3"));
testCase.setPropertyValue("PPDiscreteMediaProfile3",CallingTCase.getPropertyValue("PPDiscreteMediaProfile3"));
testCase.setPropertyValue("PPCanDownLoad3",CallingTCase.getPropertyValue("PPCanDownLoad3"));
testCase.setPropertyValue("PPCanStream3",CallingTCase.getPropertyValue("PPCanStream3"));
testCase.setPropertyValue("RSCreatedby",CallingTCase.getPropertyValue("RSCreatedby"));
testCase.setPropertyValue("RSCreationDate",CallingTCase.getPropertyValue("RSCreationDate"));
testCase.setPropertyValue("RSValue",CallingTCase.getPropertyValue("RRSValue"));
testCase.setPropertyValue("RSDescription",CallingTCase.getPropertyValue("RSDescription"));
testCase.setPropertyValue("LICAcqBaseLoc",CallingTCase.getPropertyValue("LICAcqBaseLoc"));
testCase.setPropertyValue("FFWebLocLocation1",CallingTCase.getPropertyValue("FFWebLocLocation1"));
testCase.setPropertyValue("FFWebLocPreference1",CallingTCase.getPropertyValue("FFWebLocPreference1"));
testCase.setPropertyValue("FFWebLocLocation2",CallingTCase.getPropertyValue("FFWebLocLocation2"));
testCase.setPropertyValue("FFWebLocPreference2",CallingTCase.getPropertyValue("FFWebLocPreference2"));
testCase.setPropertyValue("FFManifestLocLocation1",CallingTCase.getPropertyValue("FFManifestLocLocation1"));
testCase.setPropertyValue("FFManifestLocPreference1",CallingTCase.getPropertyValue("FFManifestLocPreference1"));
testCase.setPropertyValue("FFManifestLocLocation2",CallingTCase.getPropertyValue("FFManifestLocLocation2"));
testCase.setPropertyValue("FFManifestLocPreference2",CallingTCase.getPropertyValue("FFManifestLocPreference2"));
testCase.setPropertyValue("PINodeID",CallingTCase.getPropertyValue("PINodeID"));
testCase.setPropertyValue("PIRetailerTransx",CallingTCase.getPropertyValue("PIRetailerTransx"));
testCase.setPropertyValue("PIPurchaseAccount",CallingTCase.getPropertyValue("PIPurchaseAccount"));
testCase.setPropertyValue("PIPurchaseUser",CallingTCase.getPropertyValue("PIPurchaseUser"));
testCase.setPropertyValue("PIPurchaseTime",CallingTCase.getPropertyValue("PIPurchaseTime"));
testCase.setPropertyValue("PITransactionType",CallingTCase.getPropertyValue("PITransactionType"));
testCase.setPropertyValue("VCAllowedUser",CallingTCase.getPropertyValue("VCAllowedUser"));
testCase.setPropertyValue("StreamWebLocLocation1",CallingTCase.getPropertyValue("StreamWebLocLocation1"));
testCase.setPropertyValue("StreamWebLocPreference1",CallingTCase.getPropertyValue("StreamWebLocPreference1"));

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTUReq","OK");
CallingTCase.setPropertyValue("FeedRTUReq",testCase.getPropertyValue("FeedRTUReq"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call RightsTokenGet for ETag Value" id="7492d55b-3cdf-4267-a2a4-417e7b9a2868"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;

//Extractthe Response and Set the ETag Value at the Project Level Properties
RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Get Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

runnerRTC = RTCRequest.run( null , false )

def etagValue=testProject.getPropertyValue("ETag");
log.info "etagValue=="+etagValue;
//Set the Etag value as Header to the RightsTokenDelete API Request

def headers = new StringToStringMap()
headers.put("IF-Match",etagValue);
//headers.put("Authorization","SAML2 assertion="+ testCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdate -Request_Trimmed" disabled="true" id="a420b813-42ad-4797-949f-9131227df74c">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdate -Request_Trimmed" mediaType="application/xml" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6pME773V1iey1TC5l5JqoY1qKgguN0hjICyyYCgv/4bMBqznOX9qpJKpunlme5nenqekRn4dB8gBJPUi8K6zL80TLPbgXQXPjYZxnxsQmv7uLE25GOboS2aZLadDtw06jJCGZRDlJph+tKgSYp6JGn8o1PtPkX2m+2nLtVcN+pzmCDsGas8kY16Efgh6ldRXxpZEvYjE3moH5oBRP3U6s+AMupjzb55hdR4fb6ArAImr26axn2CsJ5saEHft56sKCCeiU86zzbqzzwnNNMsge8xbfTSeLfN8/wpZ56ixCFokiQJskdgHRt5zq/Ga+1qDG053EaXNWeGUehZpu+dzRKUAlM3suvAd6LES93gN64pgiJL14+wsB4tqhn+ahAfASp0/+jpE8gEmY/INamrMw1uYQJDC9YNTX5p/PqnAl5M9cQM0TZKAvRl/d8QwfAI/SiG9iO6buwK7t89/pCt12do9eXQ8jPkHeG4ZElsWhDVpwncesXIQ5h7NqpX1a8X6EowaP2XijwT9zgxbOKHzPCeA1H6/5TrvlQXL3PTz+CrF6+MCRGBnTi02vPjgOuNgGlsTlMFvVQQ7pUvoG6Vfl9/5emNVu9GiqeOjPOYXyttTknHO0cIUEpBdc7NpZCYb1PkmMR+EhtIl4ZmdKBgu3VcigO4UGzbN4jjeOazGvUmZgOmZtoWS0VzkmiNhqfOA9QpeqkNZydGQbvZ+iTynYA3ET3MTrt4O2pmknOU8rRoBlSQ00QzlRGvG9LWhRuvWaNPG2orS+o5byfk8ihF9urlY0/3eyj3NYSnapPl/8sW2ePN1LwtuLJRbPHpTOGrIst8duY4cJo5IJdZ4ODfHRizzv7g7j2pl5MsUFUR8Bzr74SRAvYSoAyBdRVuPlcK7gwGrDOeY0O9Bvw1q2hCzucrfq6qb0Lu6rY0P20kP1ufhbECUGXMuYqgCXNe0wVFAdFFVij8Rip2ykzJZXXF17ADXijisy31UigVnkXLLWXWolezVrZezrFcPI2C8XGjC77CKRI3O0gzecPwqjAA2mph0WKGbc+jII5qK4O9MxrEcAegmJM4Jjgr+j5XdIMe85pZyfTPMkWWBoqKck6tdiXVhHwwN84fueBYhbMDoRB0ML3kwtI5cUyulwNkLlqhooGcdyrjoZDbkysQRSXzGnfJ1UjINUEzxqKiybkAKhkv5D7a0GN3I7lHi1GLgQ5294XhVGEhhvh7qB2tU+tQMyURbII5ZTGaa3ktz1xGubPu5ry6GgyjtYzdjIEqsKwKMCASlFvD+WfBiJ23JrHXoz042opRAN2kplDRcH88F2TXYybOdLxo8dt9Zyp5U8a0XUL2LXrH7IEsQ3tIuappaytC40Pv3J4MjSX0ktU5HbdUqu11WzVtkRlLPvI79ttyZQwfipWl6pPpzFhMz0UxPuy6Zz99m7BvyWyg8M5kDOEUWQ8EaYqs3uVb3Opth/m01UjYqgFHYQGQdo4jeJjA7NvuQsI3TREweYHC5RK34KQZkKQHQWZ5Vd2KLjW1pHlmUGNFFmwfp+m0Wmp+bc2xPK4UaS7W8YoWybUO7MqZ2hRERzVaD4MlXKtjX5+nII/n25CiSClW37ZK7lhKyQBbzmcsPkVsLZOBYU7iAVkM522SOqi2P5j1gMEUM3pfTFxnfdo76z0uyuru6Kx04M/1O47JmGKLmqoLmgK6l/NWKLLBaL4VFPEmsApexzWrjCOdFTRRJY2C58HwIkM6oAu0Ogs7hRMq+xooFBPT4rhZumgVjr2JLmSYtNkdXXYbmvwrx0qK1T5z7MABFXzlmHDhmAC2hwe5y1Oo1eZitMgdVhIOamc+GvRiUl2O9jX2QSSc1PObk7Cb68OHBXXKO+5OXSx6Mu9yD+F25TKblCXNs6XCwb4jedqeD9tN/6SMFLVleIR/InfwkKNRbSxTocCkZ5HoJdkDG6y94HxmmrQRTGfZUTbMIaJO7uaw6OW76VubIBLp1Dp31kdVXEbW6nKPfG2SN+GljRL3DfZTB76OXrNss4NWel2W97DM10V8OZrpn8e4UuLZj9tKtR+XsyBKYZg2XkurcoTrZ3jQ8+w+vjkv6x7ocRwnUgxgOb7XFAWySVIiCchWr0eLbeY6611QfIHIReHWK2OVw+zlsv4zQCvob6CZwKTxB09lnupyqOHpIwoR1KOXBmDaXdDpAZoUqG6bJwHN45VANVs8x/R4ulEfR+kknCRgm8LkbkBmvg7IGrS82IPlFP0+S6AUJ+JgHrPUp56O5lMIMzxmJ+Wk26eb3VaVAMLOgtjCH3B3S+IIpU+xG1fDzG+38fXbdcdYx/ZKBVSCZiGuFvxhpGeuiL/tjP5x9L+6B5ntlTMLTl+aeNYFyedPH2woaXCjAtkh6Svmm+q/mvZ6302JPyAivibjFsk+endxrw8TPGvjcax6jyBctIP5dHjKjsesKlOnHDUT7J4giR4xg1aGx8WTHu1hSNw8EP8yqN8wf4l7k39Gl6VuOEvxKQ8wo+rV8u+PtE/WOAEpLNKfZJyPn2Vl8D++3Ky+Veph8RT/yaPE/sj7D77u4mDIZYfyQqdclRP26XN5309C34qwVw83qSi59/2T/U+xPwtv6bpBSTErNlkKf/+lXnYf/FS2rCgLU5lvVIL7jlhhTk8x7H8ofXNTjbjvb5YC/fbNslRGM8uFgdm46Xp/V370qsJbEFshr8Ly0ijw6xsHD527DvwO8L4JU/jo3Z29T3hfv4m/S+4y95W/r/8D" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:RightsTokenFull RightsTokenID="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5" 
xsi:schemaLocation="http://www.decellc.org/schema dece.xsd " 
xmlns:dece="http://www.decellc.org/schema/2010/10/dece" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</dece:RightsLockerID>
 <dece:RightsTokenData 
 ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt"> 
            <dece:RightsProfiles>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
               </dece:PurchaseProfile>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
                </dece:PurchaseProfile>   
                  <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream> 
                </dece:PurchaseProfile> 
              </dece:RightsProfiles>
          <dece:ResourceStatus>  
             <dece:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:org:org:dece:07909"> 
                     <dece:Value>urn:dece:type:status:active</dece:Value>
                    <dece:Description>new rights token</dece:Description>
                </dece:Current>
            </dece:ResourceStatus> 
   <dece:LicenseAcqBaseLoc>ns3.google.com</dece:LicenseAcqBaseLoc>
              <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/aaa</dece:Location>
                <dece:Preference>1</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/bbb</dece:Location>
                <dece:Preference>2</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ccc</dece:Location>
                <dece:Preference>3</dece:Preference>
            </dece:FulfillmentManifestLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ddd</dece:Location>
                <dece:Preference>4</dece:Preference>
            </dece:FulfillmentManifestLoc>
        <dece:PurchaseInfo>
            <dece:NodeID>urn:dece:org:org:dece:222259</dece:NodeID>
            <dece:RetailerTransaction>Transaction_node0701-to-222259</dece:RetailerTransaction>
            <dece:PurchaseAccount>urn:dece:accountid:org:dece:107006</dece:PurchaseAccount>
            <dece:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</dece:PurchaseUser>
            <dece:PurchaseTime>2010-02-01T12:27:41</dece:PurchaseTime>
        </dece:PurchaseInfo> 
    </dece:RightsTokenData>
</dece:RightsTokenFull>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="AccountID" value="urn:dece:accountid:org:dece:107006"/>
              <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="48558ecc-6f8b-4a30-b26b-b6abec0b4600">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightTokenUpdateRequest PUT");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdateRequest PUT" id="bdf35cbd-ef2d-4f72-84ac-90eb457242ac">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdateRequest PUT" mediaType="application/xml" postQueryString="false" sslKeystore="RET_CS_1_concat.pem" accept="application/xml">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="IF-Match" value="*" xmlns="http://eviware.com/soapui/config"/></con:setting>
              <con:setting id="RecordRequestRepresentations">false</con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}">  			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="${#TestCase#PPDiscreteMediaProfile1}"> ${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:request>
            <con:assertion type="GroovyScriptAssertion" disabled="true" id="71490b8e-ae51-4517-b64a-83ce622d7a3e">
              <con:configuration>
                <scriptText>// check for the HTTP Response code 
assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 200 OK"</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#encodedAccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#encodedRightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties>
        <con:property>
          <con:name>AccountID</con:name>
          <con:value>urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</con:value>
        </con:property>
        
        
        <con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property>
        
        
        <con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property>
        <con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property><con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property>
        
        <con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property>
        
        
        <con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property>
          <con:name>LICAcqBaseLoc</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ns3.google.com</con:value>
        </con:property>
        
        
        <con:property><con:name>nodeid</con:name><con:value>RET_CS_1</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET_CS_1</con:value></con:property>
        
        
        
        <con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</con:value></con:property>
        <con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:02A2FE1576BF23AFE05307991F0AE63A</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property>
        
        
        <con:property><con:name>PITransactionType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property>
        <con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property>
        
        
        
        <con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property>
        <con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:02A34106BC2A1024E05305991F0A773A</con:value></con:property><con:property><con:name>RightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET_CS_1</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property>
        
        
        <con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        <con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
      <con:property><con:name>StreamWebLocPreference1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30089_RightsTokenUpdate_FUNC_RTL_CS_after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R3_User_With_All_Statuses_And_Without_SAML_RTL_CS</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>encodedRightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2015/03/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ns3="http://www.w3.org/2001/04/xmlenc#" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#">
   <Error ErrorID="urn:dece:errorid:org:dece:UserNotActive">
      <Reason Language="en">The member is not active.</Reason>
      <OriginalRequest>https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A/RightsToken/urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#UserNotActive</ErrorLink>
   </Error>
</ErrorList>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>125</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>Error</con:value></con:property><con:property><con:name>assert</con:name><con:value>pVZpc9o8EP4rjPuxYyzbXPYEZsyVOoU0haQ5vnSEvAYltmwsGWh//SuZI0COlyYzzDBa7/Hs6tHunnEcR5brcQ6ZoAkrreKIcbeQNrU8Y26COeUuwzFwVxB37A0HrlVGLt6aaCW/29R+N5xJLZjYoOOwEeqVmo10p25jHZywWkeNysRsVKUq5zn4jAvMRFOzkFnRkSN/12bFRZZrV8umVX/QSr8g49K3VCkjbQNqxZvaTIjUNYzlclle2uUkmxoWQqZxNxyMyQxirLXO1hkVgbLWRp+UAyAQRaRMktg4Mw50zgLujumUYZFnsIkVvBULGcgxpE7A6fSLtrOFwGdhUhw7mCWMEhzRv1jVZwhilgQlL5omGRWz+M0kTKQc67AiOjEr7ItmHEI70dEBwoxjnc+wufE1ghAyYARKNyO/qX057dYK0+sMMx4mWcwPj/+GB9gCoiSFQOfbtDbQTnf4SqVaZ0Bcn5Eo53QBl4qsKSbAN7cJ5HRXpasMQroaUC4JuuIKnbEP7+i4rkaXToGLj1zQ3uWsnfzCUQ6tpI3+XvqZGFiT3upmOn80fgygmjrxN69ZANhXLgS7q10fj0i5I9HaYhhmnYfJ4t425/dOTkn3tvt93O/0p7VeZ1IDjH/eBxfGAPFeN4O/tezOXzJjHtzccjHxn7h9Pr/xr7Le9Nt5f/r4s203lg+LtjfKh3Q2HJkPguXs4jH3R94yDIP5zRWKnm7rF8lXVPvarl32fATntxXeFVXrAhlDHj+cozx2Bk+/rLt50p7ZmU3qVcdxLqqbdI/wH8q2b36cTx6BiO1R0cDvlvrylrB4v5kpCQ30sFB1U9V8uAAmtJayUr3DzWW7o4Er73B9RpZn9XtmtV5r9y3b6/dQ1UZ1xzH7yOvVbG/bZNYojiB2EhZSFUu13DVt3gdIYpcDCyDTF0kuOx3X3vHYxQKXfDaSjyBhHK4T2Z4fpyEJc9ZYxjQV6TywwMLpJOJa6TIRP9iPzAsFZIctuX7QkkdAaEpB9W1Fay55zYUsxRwvchGZ5QUuM8hlZ89Uk3WtSqNqcBqnESigRpwEeQTldJYWhTH4+t/SMeGFdNS7Lh7bm2kdf9tWQOoEVClwlUsb5C3CK7PF2ibyZsIW2k94697LA6relSynyChZIzn89MwSRY8dRbxOpzfujLewd9r/YP1R4+7AG199xvZ3Z/zb/KiDj4f+XODBJ7IefDZryd9Pmr+0NN6hoHHM/l2gYEH3wm73NDnx5Yxobd/uHJfn5XyxyIvXWlezMJPu5YAyqwayjDGQXE6xP9fJEzBj58U4aWXYAT8KvpMfQszFjI0FFhDL9lIqjifsiGPgakf0ZVtcnbqAHoSUpROwEq/JOpHcbxXid1dg4hKlJ8VX8m+ZZMHzjb3iay+OzFOuiIKyqTqpdeHPG7wgiXRL5aBLsn3nrzl4LfihcFfkHRYhCTXJBbz9paQmWFPDhCQ5E35XKwT7U7XAKf6k4D4rvXBTDO7dJk//f5XXaUEBAnL/57TwrxYyVz0BNt2bzJugR8PZrpio1u5YlomsSjGcq+vhXK8/D+dDdK0X4peSvTodc7z1Hw==</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/RET_CS_1_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>7492d55b-3cdf-4267-a2a4-417e7b9a2868</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract RightsToken-Update Information For Without SAML Request" searchProperties="true" id="4b7a1237-6fd9-4813-9618-9fa870b08971">
      <con:settings/>
      <con:testStep type="groovy" name="Extract RightsTokenUpdate Request XML" id="100fa4c9-683a-4e63-9454-908148902314">
        <con:settings/>
        <con:config><script>import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

def RT_RequestBody = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request_Without_SAML").getTestStepByName("RightTokenUpdateRequest PUT").testRequest.response.rawRequestData;

def rawData = new String(RT_RequestBody);
 
testCase.setPropertyValue("RightsReqXml",rawData.tokenize('\n').last());

log.info "RightsReqXml:" + testCase.getPropertyValue("RightsReqXml");
callingTCase.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract RightsToken Info from the Response" id="69e19c6e-d746-4e37-ae36-2e1d3ec45116">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName)

def RightsResHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request_Without_SAML").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getResponseHeaders(); 
def RightsResXml = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request_Without_SAML").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getContentAsString();
def RightsResTime = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request_Without_SAML").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getTimeTaken();
def RightsResHttpStatus = RightsResHeader.getAt("#status#");

log.info RightsResHttpStatus[0];
log.info "Response Time : $RightsResTime:ms";
testCase.setPropertyValue("RightsResXml",RightsResXml);
testCase.setPropertyValue("RightsResTime",RightsResTime.toString());

// Evaluate RightsToken Success &amp; Failure

if(RightsResHttpStatus[0] == "HTTP/1.1 200 OK")
{
log.info "Response Code : ${RightsResHttpStatus[0].toString()}";
log.info "Response Time : $RightsResTime:ms";
}
else{
log.info " RightsToken Update failed - [ $RightsResHttpStatus ]"
log.info " Error Code Validation +++++ "
}
// Returns Rights Response Information
log.info "ResponseXML:" + testCase.getPropertyValue("RightsResXml");
callingTCase.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
callingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_30089_RightsTokenUpdate_FUNC_RTL_CS_after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R3_User_With_All_Statuses_And_Without_SAML_RTL_CS</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>urn:dece:rightstokenid:org:dece:9C196308C6811497E0401F0A2222593EAE</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value>urn:dece:accountid:org:dece:107006</con:value>
        </con:property>
        <con:property>
          <con:name>DBrightstokenid</con:name>
          <con:value>9C196308C6811497E0401F0A2222593EAE</con:value>
        </con:property>
        <con:property>
          <con:name>RightsReqXml</con:name>
          <con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="en">Avatar BestBuy Special Packaging 		</ns4:DisplayName> 		<ns4:ContentID> urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd">  			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="urn:dece:type:discretemediaformat:securedigital"> 1 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>true </ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location> 		<ns4:Preference>1 </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		<ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET_CS_1</ns4:NodeID> 		<ns4:RetailerTransaction> RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>urn:dece:userid:org:dece:02A2FE1576BF23AFE05307991F0AE63A</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:02A34106BC2A1024E05305991F0A773A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2015/03/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ns3="http://www.w3.org/2001/04/xmlenc#" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#">
   <Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <Reason Language="en">cvc-complex-type.3.2.2: Attribute 'xsi:schemaLocation' is not allowed to appear in element 'ns4:RightsTokenFull'.</Reason>
      <OriginalRequest>https://qa.p.uvvu.com/rest/2015/02/Account/urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A/RightsToken/urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</ErrorLink>
   </Error>
</ErrorList>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResTime</con:name>
          <con:value>88</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenUpdate Response Validation For Without SAML" searchProperties="true" id="a57a4add-e616-4bc1-bbd9-3d75848f842e">
      <con:settings/>
      <con:testStep type="groovy" name="ValidateRightsTokenUpdate RESPONSE" id="7ca288d9-ae63-4838-adda-56b9bc2633b0">
        <con:settings/>
        <con:config><script>import groovy.*;
import groovy.xml.*;
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testCase.setPropertyValue("errorStatusCode","nothing");
//testCase.setPropertyValue("errorReason","nothing");
//testCase.setPropertyValue("errorID","nothing");

def QAResp_ErrorID;
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTUpdate",CallingTCase.getPropertyValue("expectErrTypeRTUpdate"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));
def contentProfile= CallingTCase.getPropertyValue("ContentProfile");
if (contentProfile!=null)
{
	int lastColon = contentProfile.lastIndexOf(':');
	int lastSlash = contentProfile.lastIndexOf('/');
	contentProfile     = contentProfile.substring(lastColon + 1);
}
log.info "contentProfile ="+contentProfile;

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Query_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request_Without_SAML").getTestStepByName("RightTokenUpdateRequest PUT").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request_Without_SAML").getTestStepByName("RightTokenUpdateRequest PUT").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTUpdate");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

log.info Res_RTObjType;
log.info Resp_HTTPstatus[0];
log.info Resp_HTTPconnection[0];
log.info Resp_HTTPcontenttype[0];
log.info Resp_HTTPcontentlength[0];
log.info errorRespType;

// Error Validation Flags &amp; Values


boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = "$DeceUrl";
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$Res_RTObjType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$Res_RTObjType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	QAResp_ErrorID = "ForbiddenAccountNotActive"
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "The API call is not authorized.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	case "PURCHASE_USER_NOT_BELONGS_TO_PURCAHSE_ACCOUNT":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserDoesNotBelongToPurchaseAccount";
	Resp_errorReason = "The purchasing member does not belong to the purchase account.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseUserDoesNotBelongToPurchaseAccount";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	QAResp_ErrorID = "NotFoundContentIDNotFound"
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestContentIDNotValid"
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotValid";
	break;

	
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;


	case "UnAuthorized":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
			
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	QAResp_ErrorID = "ForbiddenAssetLogicalIDNotActive"
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	QAResp_ErrorID = "ForbiddenUserIdUnmatched"
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink  = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	QAResp_ErrorID = "ForbiddenUserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	QAResp_ErrorID = "ForbiddenAccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	QAResp_ErrorID = "BadRequestAssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;

	case "CONTENT_ID_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotValid";
	QAResp_ErrorID = "BadRequestContentIDNotValid"
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotValid";
	
	break;          
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	QAResp_ErrorID = "ForbiddenAssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	QAResp_ErrorID = "NotFoundAssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	QAResp_ErrorID = ""
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	QAResp_ErrorID = "NotFoundBundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotFound";
	
	break;

	case "MEDIAPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestMediaProfileNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid";
	break;
	
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	QAResp_ErrorID = "BadRequestDisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		log.info '------------------------------------DM_REM'
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		//expectHTTPcontenttype = "application/xml"
	break;

	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestMediaProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	QAResp_ErrorID = "BadRequestFulfillmentLocNotValid";
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	log.info '----------FFMISSING'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	QAResp_ErrorID = "BadRequestStandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	QAResp_ErrorID = "BadRequestPurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	QAResp_ErrorID = "BadRequestPurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	QAResp_ErrorID = "BadRequestPurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	QAResp_ErrorID = "BadRequestLicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;

	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	QAResp_ErrorID = "BadRequestBundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	QAResp_ErrorID = "NotFoundRightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	QAResp_ErrorID = "BadRequestRightsTokenIDNotValid"
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsTokenIDNotValid";
	
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	QAResp_ErrorID = "ForbiddenUserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "RIGHTSLOCKERID_DONOT_MATCH_WITH_ACCOUNTID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	QAResp_ErrorID = "BadRequestRightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	
	break;

	case "TRANSACTION_TYPE_ID_NOT_VALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:TransactionTypeIDNotValid";
	QAResp_ErrorID = "BadRequestTransactionTypeIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#TransactionTypeIDNotValid";
	
	break;

	case "AdultContentNotAllowed":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
	QAResp_ErrorID = "ForbiddenAdultContentNotAllowed";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
	break;

	case "RatingPolicyExists":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
	QAResp_ErrorID = "ForbiddenRatingPolicyExists";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:RatingPolicyExists";
	break;

	case "UnratedContentBlocked":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
	QAResp_ErrorID = "ForbiddenUnratedContentBlocked";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:UnratedContentBlocked";
	break;
	
	case "PURCHASE_TIME_INVALID":
	log.info '--------------PITIME'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;;
	break;

	case "LICACQBASE_LOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;;
	break;

	case "SOLDAS_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	QAResp_ErrorID = "BadRequestRightsSoldAsUpdationNotAllowed"
	ValerrorID = 1;				
	Resp_errorLink  = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "RT_PP_DOWNLOAD/STREAM_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	QAResp_ErrorID = "BadRequestStandardDefinitionMissing"
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_INFO_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "SCHEMA_VALIDATION_ERROR":
	log.info 'schme-----------error'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "RESOURCE_STATUS_ELEMENT_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:ResourceStatusElementNotAllowed";
	QAResp_ErrorID = "ForbiddenResourceStatusElementNotAllowed";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ResourceStatusElementNotAllowed";
	break;
	
	case "DISCRETEMEDIA_RIGHTS_REMAINING_ELEMENT_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:DiscreteMediaRightsRemainingNotAllowed";
	QAResp_ErrorID = "BadRequestDiscreteMediaRightsRemainingNotAllowed";
	testCase.setPropertyValue("PPContentProfile",CallingTCase.getPropertyValue("PPContentProfile3"));
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaRightsRemainingNotAllowed";
	break;

	case "PURCHASE_PROFILE_HAS_DMR_ALREADY_CREATED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:PurchaseProfileHasDMRAlreadyCreated";
	QAResp_ErrorID = "BadRequestPurchaseProfileHasDMRAlreadyCreated";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseProfileHasDMRAlreadyCreated";
	break;
	case "INVALID_TRANSACTION_TYPE":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:TransactionTypeIDNotValid";
	Resp_errorReason = "The transaction type is not valid.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#TransactionTypeIDNotValid";
	break;
	
	
 }


testCase.setPropertyValue("errorID",Resp_ErrorID.toString());
testCase.setPropertyValue("QAerrorID",QAResp_ErrorID.toString());
log.info "From ValidateRights ---" + Resp_ErrorID;

if(ValerrorID.toString() == '1') {
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + Resp_HTTPstatus[0];
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection[0];
//assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length
/*if (errorRespType.toString()== "SUCCESS"){
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() == 0; 
}
else 
{
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() > 0;
}
*/
//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype[0];
log.info "expected " + expectHTTPcontenttype
assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
    if(Resp_ErrorID.toString() == 'urn:dece:errorid:org:dece:DiscreteMediaRightsRemainingNotAllowed'){
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason" +" - "+ testCase.getPropertyValue("PPContentProfile")+ "]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason +" - " + testCase.getPropertyValue("PPContentProfile");
	}
	 if(Resp_ErrorID.toString() == 'urn:dece:errorid:org:dece:PurchaseProfileHasDMRAlreadyCreated'){
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason" +" - "+ contentProfile + "]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason +" - " + contentProfile;
	}
	else{
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;
	}
// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="ValidateRightsTokenUpdate RESPONSE------" disabled="true" id="e351c6a9-3a6d-49a3-9618-bed1a60f9b5e">
        <con:settings/>
        <con:config>
          <script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("errorStatusCode",null);
testCase.setPropertyValue("errorReason",null);
testCase.setPropertyValue("errorID",null);
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTUpdate",CallingTCase.getPropertyValue("expectErrTypeRTUpdate"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Provision_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTUpdate");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

//log.info Resp_HTTPstatus;
//log.info Resp_HTTPconnection;
//log.info Resp_HTTPcontenttype;
//log.info Resp_HTTPcontentlength;

// Error Validation Flags &amp; Values

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = testProject.getPropertyValue("Query_HostName");
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$errorRespType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$errorRespType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "API call not authorized";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:ContentIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotValid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotFound";
	
	break;
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		expectHTTPcontenttype = "application/xml"
	break;
	
	case "DMR_LIMIT_EXCEEDED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:DiscreteMediaLimitExceeded";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaLimitExceeded";
	break;
	
	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	//log.info "jitu";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "PURCHASE_TIME_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "SCHEMA_VALIDATION_ERROR":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;
	case "LICACQBASE_LOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "RT_PP_DOWNLOAD/STREAM_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenIDNotValid";
	
	break;
	
	case "RT_UPDATE_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenStatusChangeNotAllowed";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenStatusChangeNotAllowed";
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	break;

	case "PURCHASE_INFO_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "FULLFILLMENT_METHOD_INVALID":
	Resp_ErrorID = "urn:dece:errorid:org:dece:DiscreteMediaFulfillmentMethodNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaFulfillmentMethodNotValid";
	break;


	case "ALID_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:LogicalIDUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LogicalIDUpdationNotAllowed";
	break;

	case "CONTENTID_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:ContentIDUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDUpdationNotAllowed";
	break;

	case "SOLDAS_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "SOLDAS_DISPLAY_LANG_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "AdultContentNotAllowed":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
	break;

	case "RatingPolicyExists":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:RatingPolicyExists";
	break;

	case "UnratedContentBlocked":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:UnratedContentBlocked";
	break;

 }

testCase.setPropertyValue("errorID",Resp_ErrorID.toString());
testCase.setPropertyValue("QAerrorID",QAResp_ErrorID.toString());
log.info "From ValidateRights ---" + Resp_ErrorID;

if(ValerrorID.toString() == '1') {
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + Resp_HTTPstatus[0];
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection[0];
assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length
if (errorRespType.toString()== "SUCCESS"){
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() == 0; 
}
else 
{
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() > 0;
}

//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype[0];
assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
      log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;

// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        
        
        
        <con:property><con:name>TSuiteName</con:name><con:value>R3_User_With_All_Statuses_And_Without_SAML_RTL_CS</con:value></con:property>
        
        
        <con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30089_RightsTokenUpdate_FUNC_RTL_CS_after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value></con:property>
        
        <con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RTObjType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Error</con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</con:value></con:property>
        
        <con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2015/03/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ns3="http://www.w3.org/2001/04/xmlenc#" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#">
   <Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <Reason Language="en">cvc-complex-type.3.2.2: Attribute 'xsi:schemaLocation' is not allowed to appear in element 'ns4:RightsTokenFull'.</Reason>
      <OriginalRequest>https://qa.p.uvvu.com/rest/2015/02/Account/urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A/RightsToken/urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</ErrorLink>
   </Error>
</ErrorList>]]></con:value></con:property>
        <con:property><con:name>QAerrorID</con:name><con:value>null</con:value></con:property><con:property><con:name>PPContentProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET_CS_1</con:value></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeRTGet</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>errorStatusCode</con:name><con:value>HTTP/1.1 400 Bad Request</con:value></con:property>
        
        
        
        
      <con:property><con:name>errorReason</con:name><con:value>The purchase profile already has a discrete media right.</con:value></con:property><con:property><con:name>errorID</con:name><con:value/></con:property><con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>Accountid</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rights UPDATE  Data Validation For Without SAML Request" searchProperties="true" id="5612ccbe-b492-43bd-93cb-6575b789e06a">
      <con:settings/>
      <con:testStep type="groovy" name="Extract DB results for RightsToken UPDATE" id="900a7a66-3cf4-4ddc-8d77-0884ce46562b">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

mydbRights = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
testCase.setPropertyValue("RightsReqXml",CallingTCase.getPropertyValue("RightsReqXml"));

//getRequestContentAsXml

testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("DBrightstokenid",CallingTCase.getPropertyValue("DBrightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));
testCase.setPropertyValue("RTC_rcStatusHistory",CallingTCase.getPropertyValue("RTC_rcStatusHistory"));


// Fetch RightsToken info from RIGHTS_TOKEN table

RT_Data = mydbRights.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data2 = mydbRights.rightstokenSoldAsGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data3 = mydbRights.rightstokenPMPPGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data4 = mydbRights.rightstokenFFLocGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data5 = mydbRights.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));

testCase.setPropertyValue("DbResultRTXml",RT_Data.toString());
testCase.setPropertyValue("DbResultRT-SoldAsXml",RT_Data2.toString());
testCase.setPropertyValue("DbResultRT-PMPPXml",RT_Data3.toString());
testCase.setPropertyValue("DbResultRT-FFLocXml",RT_Data4.toString());
testCase.setPropertyValue("DbResultRT-StatusHistoryXml",RT_Data5.toString());</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Data Validation DB - RightsTokenUPDATE Request" id="59c8916e-1402-4755-b539-c50e076d5129">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*
import groovy.time.*
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

// Assert RightsToken Information Expected &amp; Actual 

def actRTC_PPContentProfile  = new ArrayList();
def actRTC_PPDMR  = new ArrayList();
def actRTC_PPCanDownload  = new ArrayList();
def actRTC_PPCanStream  = new ArrayList();
def actRTC_PPDMProfile  = new ArrayList();
def actRTC_LicAcqBaseLoc = new ArrayList();
def actRTC_FFWebLoc_Location = new ArrayList();
def actRTC_FFWebLoc_Pref = new ArrayList();
def actRTC_StreamWeb_Location = new ArrayList();
def actRTC_StreamWeb_Pref = new ArrayList();
def actRTC_FFManifestLoc_Location = new ArrayList();
def actRTC_FFManifestLoc_Pref = new ArrayList();
def expectRTC_PPContentProfile  = new ArrayList();
def expectRTC_PPDMR  = new ArrayList();
def expectRTC_PPCanDownload  = new ArrayList();
def expectRTC_PPCanStream  = new ArrayList();
def expectRTC_PPDMProfile  = new ArrayList();
def expectRTC_LicAcqBaseLoc = new ArrayList();
def expectRTC_StreamWeb_Location = new ArrayList();
def expectRTC_StreamWeb_Pref = new ArrayList();
def expectRTC_FFWebLoc_Location = new ArrayList();
def expectRTC_FFWebLoc_Pref = new ArrayList();
def expectRTC_FFManifestLoc_Location = new ArrayList();
def expectRTC_FFManifestLoc_Pref = new ArrayList();

// RightsToken Update Request Information 

def Val_RightsReqXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsReqXml"));

		expectRTC_AccountID = testCase.getPropertyValue("Accountid");
		expectRTC_ALID = Val_RightsReqXml.@ALID.toString();
		expectRTC_ContentID = Val_RightsReqXml.@ContentID.toString();
		expectRTC_SoldAsLang = Val_RightsReqXml.SoldAs.DisplayName.@Language.toString();
		expectRTC_DisplayName = Val_RightsReqXml.SoldAs.DisplayName;
		expectRTC_SoldAsContentID = Val_RightsReqXml.SoldAs.ContentID;
		expectRTC_SoldAsBUNDLE_ID = Val_RightsReqXml.SoldAs.BundleID;

		log.info expectRTC_ALID;
		log.info expectRTC_ContentID;
		
		log.info "expectRTC_SoldAsContentID"+expectRTC_SoldAsContentID;
		if (expectRTC_SoldAsContentID=="")
			expectRTC_SoldAsContentID=null;
		


// Rights Purchase Media Purchase Profiles
		expPMPPSize = Val_RightsReqXml.RightsProfiles.PurchaseProfile.size();
		log.info "expPMPPSize-"+expPMPPSize;
		if (expPMPPSize!=0)
		{
		for ( i in 0..expPMPPSize-1 ){
	
			expectRTC_PPContentProfile +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.@MediaProfile[i]).toString();
			//expectRTC_PPDMR +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining[i]).toString();
			expectRTC_PPDMProfile +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining.@FulfillmentMethod[i]).toString();
			if ((Val_RightsReqXml.RightsProfiles.PurchaseProfile.CanDownload[i]).toString() == 'true'){
			expectRTC_PPCanDownload += 'Y';
			}
			else{
			expectRTC_PPCanDownload += 'N';
			}
			
			if ((Val_RightsReqXml.RightsProfiles.PurchaseProfile.CanStream[i]).toString()== 'true'){
			expectRTC_PPCanStream += 'Y';
			}
			else{
			expectRTC_PPCanStream += 'N';
			}
		}

		}
// Expected Rights Status 

	/*	expectRTC_RS_CreatedBy = (Val_RightsReqXml.ResourceStatus.Current.@CreatedBy).toString();
		CreationDate = (Val_RightsReqXml.ResourceStatus.Current.@CreationDate).toString();
		RS_CreationDate = (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[1];
		log.info RS_CreationDate;
		expectRTC_RS_CreationDate = new Date().par se("yyyy-MM-dd hh:mm:ss.SSS",RS_CreationDate.toString());
		log.info expectRTC_RS_CreationDate;
		expectRTC_RS_Value = (Val_RightsReqXml.ResourceStatus.Current.Value).toString();
*/


//  Expected Rights Licence Acq Base Location

 		expLicAcqSize = Val_RightsReqXml.LicenseAcqBaseLoc.size();
 	
 		for ( i in 0..expLicAcqSize-1 ){
		
			expectRTC_LicAcqBaseLoc += Val_RightsReqXml.LicenseAcqBaseLoc[i];
		}

// Expected Rights Fullfillment WebLoc

	expFFWeblocSize = Val_RightsReqXml.FulfillmentWebLoc.size();

		if(expFFWeblocSize!=0){	
		for ( int i in 0..expFFWeblocSize-1 ){
	
		//expectRTC_FFWebLoc_Location += (Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString();
		//expectRTC_FFWebLoc_Pref += (Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString();

		//if(i>0&amp;&amp;((Val_RightsReqXml.FulfillmentWebLoc.Location[0]).toString()==(Val_RightsReqXml.FulfillmentWebLoc.Location[1]).toString()))
	//	{
	//	continue;
		//expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
	//	} else {
			//expectRTC_FFWebLoc_Location.put((Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString(),(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
			expectRTC_FFWebLoc_Location.add((Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString())//,(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
			expectRTC_FFWebLoc_Pref += (Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString();
	//		}
			
		}
		}

		expStreamWeblocSize = Val_RightsReqXml.StreamWebLoc.size();

		if(expStreamWeblocSize!=0){	
			for ( int i in 0..expStreamWeblocSize-1 ){

				expectRTC_StreamWeb_Location.add((Val_RightsReqXml.StreamWebLoc.Location[i]).toString())//,(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
				expectRTC_StreamWeb_Pref += (Val_RightsReqXml.StreamWebLoc.Preference[i]).toString();
			}
			
		}


// Expected Rights Fullfillment ManifestLoc

	expFFManifestSize = Val_RightsReqXml.FulfillmentManifestLoc.size();
	
		
		for ( int i in 0..expFFManifestSize-1 ){

		//if(i>0&amp;&amp;((Val_RightsReqXml.FulfillmentManifestLoc.Location[0]).toString()==(Val_RightsReqXml.FulfillmentManifestLoc.Location[1]).toString()))
		//{
		//continue;
		//expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
		//} else {
			//expectRTC_FFManifestLoc_Location.put((Val_RightsReqXml.FulfillmentManifestLoc.Location[i]).toString(),Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();	
			expectRTC_FFManifestLoc_Location.add((Val_RightsReqXml.FulfillmentManifestLoc.Location[i]).toString())//,Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();	
			expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
			//}
		}

		//if(expectRTC_FFManifestLoc_Location[0]==expectRTC_FFManifestLoc_Location[1]){
		//	expectRTC_FFManifestLoc_Location.remove(expectRTC_FFManifestLoc_Location[1]);
		//	expectRTC_FFManifestLoc_Pref.remove(expectRTC_FFManifestLoc_Pref[1]);
			
		//	}

// Expected Rights Purchase Info
		expectRTC_PI_NodeID = (Val_RightsReqXml.PurchaseInfo.NodeID).toString();
		expectRTC_PI_RetailerTrax = (Val_RightsReqXml.PurchaseInfo.RetailerTransaction).toString();
		expectRTC_PI_PurcaseAccount = (Val_RightsReqXml.PurchaseInfo.PurchaseAccount).toString();
		expectRTC_PI_PurchaseUser = (Val_RightsReqXml.PurchaseInfo.PurchaseUser).toString();
		PurchaseTime = (Val_RightsReqXml.PurchaseInfo.PurchaseTime).toString();
		expectRTC_PI_PurchaseTime	= (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[1];	
		expectRTC_PI_TransactionType = (Val_RightsReqXml.PurchaseInfo.TransactionType).toString();

// Expected Rights Status History 

		log.info " Expected Rights Status History Row Count for new RTC  ;" + testCase.getPropertyValue("RTC_rcStatusHistory");
		log.info "expectRTC_PI_RetailerTrax--"+expectRTC_PI_RetailerTrax;
		if (expectRTC_PI_RetailerTrax=="")
			expectRTC_PI_RetailerTrax=null;
		log.info "expectRTC_PI_RetailerTrax--"+expectRTC_PI_RetailerTrax;


// DB Rights Token Information 

def Val_DbResultRTXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRTXml"));
log.info 'Val_DbResultRTXml----->'+Val_DbResultRTXml;
def Val_DbResultRTSoldAsXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-SoldAsXml"));
def Val_DbResultRTPMPPXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-PMPPXml"));
def Val_DbResultFFLocXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-FFLocXml"));
def Val_DbResultRTSHXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-StatusHistoryXml"));

def PMPPSize =  Val_DbResultRTPMPPXml.ResultSet.Row.size();
def LicAcqSize = Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC.size();
//def FFWebLocSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.size();
//def FFManifestSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.size();

def rcFFWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.@rowNumber.collect{ it.text() }
def rcFFManifest = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.@rowNumber.collect{ it.text() }
def rcStreamWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'StreamWeb'}.@rowNumber.collect{ it.text() }
def rcFFWeblocSize = rcFFWebloc.size();
def rcFFManifestSize = rcFFManifest.size();
def rcStreamWeblocSize = rcStreamWebloc.size();



		// Rights Token 
		actRTC_Accountid =  "urn:dece:accountid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID;
		actRTC_Lockerid = "urn:dece:rightslockerid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.RIGHTS_LOCKER_OID;
		actRTC_RightsTokenID = testCase.getPropertyValue("rightstokenid");
		actRTC_ALID = Val_DbResultRTXml.ResultSet.Row.ALID;
		actRTC_ContentID = Val_DbResultRTXml.ResultSet.Row.CONTENT_ID;

		// Rights SoldAs 
		
		actRTC_SoldAs_Lang = (Val_DbResultRTSoldAsXml.ResultSet.Row.LANGUAGE_ID).toString();
		actRTC_SoldAs_PRODUCT_ID = (Val_DbResultRTSoldAsXml.ResultSet.Row.PRODUCT_ID).toString();
		actRTC_SoldAs_DisplayName = (Val_DbResultRTSoldAsXml.ResultSet.Row.DISPLAY_NAME).toString();
		actRTC_SoldAs_ContentID = (Val_DbResultRTSoldAsXml.ResultSet.Row.CONTENT_ID).toString();
		actRTC_SoldAs_BUNDLE_ID = (Val_DbResultRTSoldAsXml.ResultSet.Row.BUNDLE_ID).toString();

		
		
		// Rights Purchase Media Purchase Profiles
		log.info "PMPPSize=="+PMPPSize;

		if (PMPPSize !=0)
		{
		for ( i in 0..PMPPSize-1 ){
	
		actRTC_PPContentProfile += ("urn:dece:type:mediaprofile:" + Val_DbResultRTPMPPXml.ResultSet.Row.PURCHASED_CONTENT_PROFILE[i]).toString();
		//actRTC_PPDMR += (Val_DbResultRTPMPPXml.ResultSet.Row.DISCRETE_MEDIA_RIGHTS_REMAIN[i]).toString();
		actRTC_PPCanDownload += (Val_DbResultRTPMPPXml.ResultSet.Row.DOWNLOAD[i]).toString();
		actRTC_PPCanStream += (Val_DbResultRTPMPPXml.ResultSet.Row.STREAM[i]).toString();
		
		}
		}
		// Rights Status 
		log.info '----->'+Val_DbResultRTXml
		actRTC_RS_CreatedBy = "urn:dece:org:org:dece:"+ Val_DbResultRTXml.ResultSet.Row.CREATED_BY;
		CreationDate = Val_DbResultRTXml.ResultSet.Row.CREATED_DATE;
		actRTC_RS_CreationDate =  new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",CreationDate.toString())
		actRTC_RS_Value = "urn:dece:type:status:"+ Val_DbResultRTXml.ResultSet.Row.STATUS_ID;

		// Rights Licence Acq Base Location
		
		for ( i in 0..LicAcqSize-1 ){
		
		actRTC_LicAcqBaseLoc += (Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC[i]).toString();
		}
		
		if(actRTC_LicAcqBaseLoc[0]=="null"){
		 actRTC_LicAcqBaseLoc[0]="";
			}

		// Rights Fullfillment WebLocation

		if(rcFFWeblocSize!=0){
		for ( int i in 0..rcFFWeblocSize-1 ){
		
		int j = rcFFWebloc[i].toInteger();
		//actRTC_FFWebLoc_Location.put((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString(),(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
		actRTC_FFWebLoc_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
		actRTC_FFWebLoc_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
		}
		}

		if(rcStreamWeblocSize!=0){
			for ( int i in 0..rcStreamWeblocSize-1 ){
				int j = rcStreamWebloc[i].toInteger();
				actRTC_StreamWeb_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
				actRTC_StreamWeb_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
			}
			
			}

		// Rights Fullfillment Manifest Location

		if(rcFFManifestSize!=0){
		for ( int i in 0..rcFFManifestSize-1 ){

		int j = rcFFManifest[i].toInteger();
		//actRTC_FFManifestLoc_Location.put((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString(),(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());	
		actRTC_FFManifestLoc_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());	
		actRTC_FFManifestLoc_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
		}
		}

		// Rights Purchase Infomation
				
		actRTC_PI_NodeID = "urn:dece:org:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.NODE_OID).toString();
		actRTC_PI_RetailerTrax = (Val_DbResultRTXml.ResultSet.Row.RETAILER_TRANSACTION).toString();
		actRTC_PI_PurcaseAccount = "urn:dece:accountid:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID).toString();
		actRTC_PI_PurchaseUser = "urn:dece:userid:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_USER_OID).toString();
		actRTC_PI_PurchaseTime = Val_DbResultRTXml.ResultSet.Row.PURCHASE_TIME;
		log.info '------------>'+(Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString()
		def actRTC_PI_TransactionType;
		if(!(Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString().equalsIgnoreCase('null'))
		{	actRTC_PI_TransactionType =  (Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString();
			} else {
				actRTC_PI_TransactionType = "";
				}
		

		// Rights Status History


// Assert RightsToken Information DB and RightsTokenGet Response.

// Assert RightsToken Account ID 

		log.info "Rights TokenUpdate Accountid Expected : [$expectRTC_AccountID] - Actual Recieved: [$actRTC_Accountid]";
 		assert expectRTC_AccountID == actRTC_Accountid ;

// Assert RightsToken LockerId

		log.info "Rights TokenUpdate  Assigned Lockerid Recieved: [$actRTC_Lockerid]";
		 //assert expectRTC_RightsLockerID == actRTC_Lockerid;

// Assert RightsToken id 

		log.info " New Rights TokenUpdate Tokenid Recieved: [$actRTC_RightsTokenID]";
		

// Assert RightsToken ALID 

		log.info "Rights TokenUpdate Alid Expected : [$expectRTC_ALID] - Actual Recieved: [$actRTC_ALID]";
 		assert expectRTC_ALID.toString() == actRTC_ALID.toString();

// Assert RightsToken ContentID 

		log.info "Rights TokenUpdate ContentID Expected : [$expectRTC_ContentID] - Actual Recieved: [$actRTC_ContentID]"; 
 		assert expectRTC_ContentID.toString() == actRTC_ContentID.toString();

// Assert RightsToken SoldAS Language

		log.info "Rights TokenUpdate SoldAs Language Expected : [$expectRTC_SoldAsLang] - Actual Recieved: [$actRTC_SoldAs_Lang]";
		assert expectRTC_SoldAsLang == actRTC_SoldAs_Lang;

// Assert RightsToken SoldAS DisplayName

		log.info "Rights TokenUpdate SoldAs DisplayName Expected : [$expectRTC_DisplayName] - Actual Recieved:[$actRTC_SoldAs_DisplayName]";
 		assert expectRTC_DisplayName == actRTC_SoldAs_DisplayName;

		if (expectRTC_SoldAsContentID){
		// Assert RightsToken SoldAs ContentID		
		log.info "Rights TokenUpdate SoldAs ContentID Expected : [$expectRTC_SoldAsContentID] - Actual Recieved:[$actRTC_SoldAs_ContentID]";
 		assert expectRTC_SoldAsContentID == actRTC_SoldAs_ContentID;
		}
		else{
		// Assert RightsToken SoldAs BUNDLE_ID	
		log.info "Rights TokenUpdate SoldAs BUNDLE_ID Expected : [$expectRTC_SoldAsBUNDLE_ID] - Actual Recieved:[$actRTC_SoldAs_BUNDLE_ID]";
		assert expectRTC_SoldAsBUNDLE_ID == actRTC_SoldAs_BUNDLE_ID;
		}
// Assert RightsToken Purchase Profile

		//RightsToken Purchase Profile- ContentProfile.
		log.info "Rights TokenUpdate Purchase ContentProfile Expected : $expectRTC_PPContentProfile - Actual Recieved:$actRTC_PPContentProfile";
		assert expectRTC_PPContentProfile.sort() == actRTC_PPContentProfile.sort();
	
		//RightsToken Purchase Profile- DiscreteMediaRightsRemaining.
		//log.info "Rights TokenUpdate Purchase DiscreteMediaRightsRemaining Expected : $expectRTC_PPDMR - Actual Recieved:$actRTC_PPDMR";
		//assert expectRTC_PPDMR == actRTC_PPDMR;
	
		//RightsToken Purchase Profile- CanDownload
		log.info "Rights TokenUpdate Purchase CanDownload Expected : $expectRTC_PPCanDownload - Actual Recieved:$actRTC_PPCanDownload";
		assert expectRTC_PPCanDownload == actRTC_PPCanDownload;
		
		//RightsToken Purchase Profile- CanStream
		log.info "Rights TokenUpdate Purchase CanStream Expected : $expectRTC_PPCanStream - Actual Recieved:$actRTC_PPCanStream";
		assert expectRTC_PPCanStream == actRTC_PPCanStream;
	
// Assert Rights ResourceStatus 
	/*
		log.info "Rights TokenUpdate ResourceStatus CreatedBy Expected : [$expectRTC_RS_CreatedBy] - Actual Recieved: [$actRTC_RS_CreatedBy]";
		assert expectRTC_RS_CreatedBy == actRTC_RS_CreatedBy;
		
		log.info "Rights TokenUpdate ResourceStatus CreationDate Expected : [$expectRTC_RS_CreationDate] - Actual Recieved: [$actRTC_RS_CreationDate]";
		//assert expectRTC_RS_CreationDate == actRTC_RS_CreationDate; //  No Validation on  RS Creation Date 

		log.info "Rights TokenUpdate ResourceStatus Value Expected : [$expectRTC_RS_Value] - Actual Recieved: [$actRTC_RS_Value]";
		assert expectRTC_RS_Value ==  actRTC_RS_Value;
	*/
		
//  Assert Rights Licence Acq Base Location

		log.info "Rights TokenUpdate LicenceAcqBase Location Expected : [$expectRTC_LicAcqBaseLoc] - Actual Recieved: [$actRTC_LicAcqBaseLoc]";
		assert expectRTC_LicAcqBaseLoc == actRTC_LicAcqBaseLoc;

//  Assert Rights Fulfillment WebLoc

		//Assert FF Web location 
		log.info "Rights TokenUpdate FF Web location Expected : [$expectRTC_FFWebLoc_Location] - Actual Recieved: [$actRTC_FFWebLoc_Location]";
		assert expectRTC_FFWebLoc_Location == actRTC_FFWebLoc_Location;

	    // Assert Web FF preference

	    log.info "Rights TokenUpdate Web FF preference Expected : [$expectRTC_FFWebLoc_Pref] - Actual Recieved: [$actRTC_FFWebLoc_Pref]";
		assert expectRTC_FFWebLoc_Pref == actRTC_FFWebLoc_Pref;

		log.info "Rights TokenUpdate Stream Web location Expected : [$expectRTC_StreamWeb_Location] - Actual Recieved: [$actRTC_StreamWeb_Location]";
		assert expectRTC_StreamWeb_Location == actRTC_StreamWeb_Location;


		log.info "Rights TokenUpdate Stream Web preference Expected : [$expectRTC_StreamWeb_Pref] - Actual Recieved: [$actRTC_StreamWeb_Pref]";
		assert expectRTC_StreamWeb_Pref == actRTC_StreamWeb_Pref;

//  Assert Rights Fulfillment Manifest Location

		//Assert FF Manifest location 
		log.info "Rights TokenUpdate FF Manifest location Expected : [$expectRTC_FFManifestLoc_Location] - Actual Recieved: [$actRTC_FFManifestLoc_Location]";
		if(rcFFManifestSize==0){
			assert actRTC_FFManifestLoc_Location.size() == 0;
			
			} else {
		assert expectRTC_FFManifestLoc_Location == actRTC_FFManifestLoc_Location;
			}

	    // Assert FF Manifest  preference

	    log.info "Rights TokenUpdate FF Manifest  preference Expected : [$expectRTC_FFManifestLoc_Pref] - Actual Recieved: [$actRTC_FFManifestLoc_Pref]";
	    if(rcFFManifestSize==0){
			assert actRTC_FFManifestLoc_Pref.size() == 0;
			
			} else {
		assert expectRTC_FFManifestLoc_Pref == actRTC_FFManifestLoc_Pref ;
			}


//  Assert Rights PurchaseInfo Location

		log.info "Rights TokenUpdate PurchaseInfo  NodeID Expected : [$expectRTC_PI_NodeID] - Actual Recieved: [$actRTC_PI_NodeID]";
		//assert expectRTC_PI_NodeID == actRTC_PI_NodeID;

		log.info "Rights TokenUpdate PurchaseInfo  RetailerTrax Expected : [$expectRTC_PI_RetailerTrax] - Actual Recieved: [$actRTC_PI_RetailerTrax]";
		assert expectRTC_PI_RetailerTrax.toString() == actRTC_PI_RetailerTrax.toString();

		log.info "Rights TokenUpdate PurchaseInfo  PurcaseAccount Expected : [$expectRTC_PI_PurcaseAccount] - Actual Recieved: [$actRTC_PI_PurcaseAccount]";
		assert expectRTC_PI_PurcaseAccount == actRTC_PI_PurcaseAccount;
		
		log.info "Rights TokenUpdate PurchaseInfo  PurchaseUser Expected : [$expectRTC_PI_PurchaseUser] - Actual Recieved: [$actRTC_PI_PurchaseUser]";
		assert expectRTC_PI_PurchaseUser == actRTC_PI_PurchaseUser;

		log.info "Rights TokenUpdate PurchaseInfo  PurchaseTime Expected : [$expectRTC_PI_PurchaseTime] - Actual Recieved: [$actRTC_PI_PurchaseTime]";
		def actPurchaseTime = new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",actRTC_PI_PurchaseTime.toString());
		def expectPurchaseTime = new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",expectRTC_PI_PurchaseTime.toString());

		log.info "Expected Purchase time :" + expectPurchaseTime.getTime() + " ms || Actual PurchaseTime :" + actPurchaseTime.getTime() + " ms";
		assert expectPurchaseTime.getTime() == actPurchaseTime.getTime();

		log.info "Rights TokenUpdate PurchaseInfo  TransactionType Expected : [$expectRTC_PI_TransactionType] - Actual Recieved: [$actRTC_PI_TransactionType]";
		assert expectRTC_PI_TransactionType == actRTC_PI_TransactionType;</script></con:config>
      </con:testStep>
      <con:properties>
        
        
        
        <con:property><con:name>Accountid</con:name><con:value>urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</con:value></con:property>
        
        
        
        <con:property><con:name>DbResultRT-FFLocXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <FULFILLMENT_LOC_OID>[2, -94, -2, -41, 103, -115, 25, 38, -32, 83, 5, -103, 31, 10, 76, -38]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[1, -81, -35, 124, 53, -125, 85, -95, -32, 83, 5, -103, 31, 10, -15, -44]</RIGHTS_TOKEN_OID>
      <TYPE>Web</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/aaa</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2014-09-09 14:02:31.146</CREATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <FULFILLMENT_LOC_OID>[2, -94, -2, -41, 103, -116, 25, 38, -32, 83, 5, -103, 31, 10, 76, -38]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[1, -81, -35, 124, 53, -125, 85, -95, -32, 83, 5, -103, 31, 10, -15, -44]</RIGHTS_TOKEN_OID>
      <TYPE>Web</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/bbb</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2014-09-09 14:02:31.146</CREATED_DATE>
    </Row>
    <Row rowNumber='3'>
      <FULFILLMENT_LOC_OID>[2, -94, -2, -41, 103, -117, 25, 38, -32, 83, 5, -103, 31, 10, 76, -38]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[1, -81, -35, 124, 53, -125, 85, -95, -32, 83, 5, -103, 31, 10, -15, -44]</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ccc</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2014-09-09 14:02:31.146</CREATED_DATE>
    </Row>
    <Row rowNumber='4'>
      <FULFILLMENT_LOC_OID>[2, -94, -2, -41, 103, -114, 25, 38, -32, 83, 5, -103, 31, 10, 76, -38]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[1, -81, -35, 124, 53, -125, 85, -95, -32, 83, 5, -103, 31, 10, -15, -44]</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ddd</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2014-09-09 14:02:31.146</CREATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-PMPPXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <PURCHASE_PROFILE_OID>01AFDD7C358955A1E05305991F0AF1D4</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>sd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2014-08-28 11:56:58.254</CREATED_DATE>
      <UPDATED_DATE>2014-09-09 14:02:31.205</UPDATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <PURCHASE_PROFILE_OID>01AFDD7C358A55A1E05305991F0AF1D4</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>1</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>hd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2014-08-28 11:56:58.254</CREATED_DATE>
      <UPDATED_DATE>2014-09-09 14:02:31.205</UPDATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-SoldAsXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_SOLD_AS_OID>02A2FED7678A1926E05305991F0A4CDA</RIGHTS_SOLD_AS_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <DISPLAY_NAME>Avatar BestBuy Special Packaging 		</DISPLAY_NAME>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <PRODUCT_ID>null</PRODUCT_ID>
      <CREATED_DATE>2014-09-09 14:02:31.146</CREATED_DATE>
      <LANGUAGE_ID>en</LANGUAGE_ID>
      <BUNDLE_ID>null</BUNDLE_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-StatusHistoryXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C4B87718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:27.619</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='2'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C4C77718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:11.934</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='3'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C4CD7718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:15.211</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='4'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C4E67718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:55.223</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='5'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C4FF7718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:51:30.508</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='6'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C51C7718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:09.256</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='7'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E0C62D7718E05305991F0A2088</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:07.91</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='8'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080B281028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:05.395</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='9'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080B2F1028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:15.507</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='10'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080B631028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:07.21</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='11'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080B811028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:38.973</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='12'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080B921028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:00.119</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='13'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080BC01028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:30.824</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='14'>
      <RIGHTS_STATUS_HISTORY_OID>02A341080BFF1028E05305991F0AD8C6</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:40.675</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='15'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CBF8851A6DEEE05305991F0AE6D4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:03.534</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='16'>
      <RIGHTS_STATUS_HISTORY_OID>02A341089E5A102CE05305991F0A4B3C</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:04.224</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='17'>
      <RIGHTS_STATUS_HISTORY_OID>02A341089E64102CE05305991F0A4B3C</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:22.448</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='18'>
      <RIGHTS_STATUS_HISTORY_OID>02A341089E87102CE05305991F0A4B3C</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:53.351</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='19'>
      <RIGHTS_STATUS_HISTORY_OID>02A341089F0C102CE05305991F0A4B3C</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:36.7</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='20'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02893946FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:01.9</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='21'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F71E1923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:05.215</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='22'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F72C1923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:33.55</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='23'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02894746FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:51:39.307</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='24'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02894F46FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:51:47.308</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='25'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F73F1923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:37.699</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='26'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02895846FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:43.984</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='27'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02895E46FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:47.112</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='28'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F8831923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:03.73</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='29'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E028AD246FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:09.56</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='30'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F8B81923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:10.146</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='31'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F9C11923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:59.484</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='32'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70FA611923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:46.637</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='33'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02891846FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:25.767</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='34'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F6F71923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:30.562</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='35'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F6FD1923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:33.244</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='36'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02892046FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:36.274</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='37'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F7041923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:37.792</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='38'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F70A1923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:46.818</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='39'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E02893346FDE05305991F0A803D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:51.874</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='40'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70F7171923E05305991F0A4339</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:58.504</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='41'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE16114D1348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:20.435</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='42'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1611631348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:19.55</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='43'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE16116C1348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:36.661</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='44'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1611751348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:46.249</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='45'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1611841348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:51:07.343</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='46'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1611B51348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:17.255</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='47'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1611D11348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:57.507</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='48'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1611D91348E05305991F0A7E5D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:53:00.732</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='49'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FED7648D1926E05305991F0A4CDA</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:53.0</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='50'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FED765CD1926E05305991F0A4CDA</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:01.237</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='51'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FED767891926E05305991F0A4CDA</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:02:31.205</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='52'>
      <RIGHTS_STATUS_HISTORY_OID>02A34110C85B2F3BE05307991F0A6796</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:06.486</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='53'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F2FA205C05FAE05307991F0A1E1B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:14.192</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='54'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F2FA208E05FAE05307991F0A1E1B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:34.344</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='55'>
      <RIGHTS_STATUS_HISTORY_OID>02A34116B6162F70E05307991F0A8EB3</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:42.552</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='56'>
      <RIGHTS_STATUS_HISTORY_OID>02A34110C88F2F3BE05307991F0A6796</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:56.91</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='57'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7DDEB62352E05307991F0A91E0</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:03.979</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='58'>
      <RIGHTS_STATUS_HISTORY_OID>02A34116B6232F70E05307991F0A8EB3</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:20.555</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='59'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7DDECC2352E05307991F0A91E0</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:35.651</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='60'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F2FA21CB05FAE05307991F0A1E1B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:20.436</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='61'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7DDF0E2352E05307991F0A91E0</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:27.595</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='62'>
      <RIGHTS_STATUS_HISTORY_OID>02A3410FF83F2F4AE05307991F0A4F2B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:43.83</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='63'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F199FAC07E1DE05307991F0A5510</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:07.73</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='64'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F199FAC67E1DE05307991F0A5510</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:12.925</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='65'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F199FAEB7E1DE05307991F0A5510</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:12.914</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='66'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F2F9DB2E05F8E05307991F0A59DB</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:37.806</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='67'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F2F9DB8405F8E05307991F0A59DB</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:45.676</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='68'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E1E7D87E1BE05307991F0A0EC5</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:53:04.217</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='69'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E1E8977E1BE05307991F0A0EC5</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:49.934</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='70'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E1E8D37E1BE05307991F0A0EC5</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:41.897</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='71'>
      <RIGHTS_STATUS_HISTORY_OID>01AFF7A73F4C32ECE05307991F0A18D8</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated</DESCRIPTION>
      <CREATED_DATE>2014-08-28 11:56:59.44</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>01AFDD7AD22C556DE05305991F0A9054</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='72'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F2FAEA0005FCE05307991F0A56FE</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:45.159</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='73'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E04092E5F3FE05307991F0A1BDC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:08.159</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='74'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E040A905F3FE05307991F0A1BDC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:41.884</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='75'>
      <RIGHTS_STATUS_HISTORY_OID>02A32E040AAD5F3FE05307991F0A1BDC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:51.82</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='76'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F30696B87E1FE05307991F0AFF6D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:51.592</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='77'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FE1575AA23AFE05307991F0AE63A</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:01:32.728</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='78'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CBFA7D8F6DF8E05305991F0AEEC7</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:06.561</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='79'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CB8824576962E05305991F0A726B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:29.106</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='80'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CB88245E6962E05305991F0A726B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:34.695</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='81'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CBFA7DA16DF8E05305991F0AEEC7</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:55.417</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='82'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7064821921E05305991F0AD4BC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:48.133</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='83'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7064881921E05305991F0AD4BC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:30.188</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='84'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF70649B1921E05305991F0AD4BC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:51:57.613</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='85'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7066441921E05305991F0AD4BC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:19.24</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='86'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7066551921E05305991F0AD4BC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:58:00.495</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='87'>
      <RIGHTS_STATUS_HISTORY_OID>02A2FF7067531921E05305991F0AD4BC</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:49.409</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='88'>
      <RIGHTS_STATUS_HISTORY_OID>02A32DF4367D4705E05305991F0A768B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:22.75</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='89'>
      <RIGHTS_STATUS_HISTORY_OID>02A32DF4369D4705E05305991F0A768B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:58.877</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='90'>
      <RIGHTS_STATUS_HISTORY_OID>02A32DF436AB4705E05305991F0A768B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:33.294</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='91'>
      <RIGHTS_STATUS_HISTORY_OID>02A32DF4382E4705E05305991F0A768B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:11.791</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='92'>
      <RIGHTS_STATUS_HISTORY_OID>02A32DF439764705E05305991F0A768B</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:31.892</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='93'>
      <RIGHTS_STATUS_HISTORY_OID>02A3410FF399102EE05305991F0A7082</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:56:10.46</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='94'>
      <RIGHTS_STATUS_HISTORY_OID>02A3410FF3C2102EE05305991F0A7082</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:46.543</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='95'>
      <RIGHTS_STATUS_HISTORY_OID>02A3410FF467102EE05305991F0A7082</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:59:16.338</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='96'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CB5CDF0E695CE05305991F0AF3B3</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:48:31.813</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='97'>
      <RIGHTS_STATUS_HISTORY_OID>02A2CB5CDF15695CE05305991F0AF3B3</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:14.867</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='98'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E20ADE7716E05305991F0A59B4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:49:07.282</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='99'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E20AEC7716E05305991F0A59B4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:50:27.2</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='100'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E20B087716E05305991F0A59B4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:51:14.831</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='101'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E20B367716E05305991F0A59B4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:52:41.43</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='102'>
      <RIGHTS_STATUS_HISTORY_OID>02A34106BA491024E05305991F0A773A</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:54:03.344</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='103'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E20BBB7716E05305991F0A59B4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:55:17.134</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='104'>
      <RIGHTS_STATUS_HISTORY_OID>02A2F3E20BFD7716E05305991F0A59B4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 13:57:30.3</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='105'>
      <RIGHTS_STATUS_HISTORY_OID>02A34106BB361024E05305991F0A773A</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>Rights Token is Updated - without DST</DESCRIPTION>
      <CREATED_DATE>2014-09-09 14:00:17.279</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>null</CREATED_BY_USER_OID>
    </Row>
    <Row rowNumber='106'>
      <RIGHTS_STATUS_HISTORY_OID>01AFDD7C358C55A1E05305991F0AF1D4</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>RightsToken has been created.</DESCRIPTION>
      <CREATED_DATE>2014-08-28 11:56:58.289</CREATED_DATE>
      <CREATED_BY_NODE_OID>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>01AFDD7AD22C556DE05305991F0A9054</CREATED_BY_USER_OID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property>
        
        
        
        <con:property><con:name>DbResultRTXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_TOKEN_OID>01AFDD7C358355A1E05305991F0AF1D4</RIGHTS_TOKEN_OID>
      <ACCOUNT_OID>01AFF9C4A4646442E05305991F0AF46D</ACCOUNT_OID>
      <USER_OID>01AFDD7AD22C556DE05305991F0A9054</USER_OID>
      <RIGHTS_LOCKER_OID>01AFF9C4A46B6442E05305991F0AF46D</RIGHTS_LOCKER_OID>
      <NODE_OID>CCE44AF42FD7063BE0401F0A07991776</NODE_OID>
      <PURCHASE_NODE_ACCOUNT_OID>02A35C1E4ED56BE0E05305991F0A2FA8</PURCHASE_NODE_ACCOUNT_OID>
      <RETAILER_TRANSACTION>RetailerTransaction_1_node222259_RetailerNode</RETAILER_TRANSACTION>
      <TRANSACTION_TYPE>urn:dece:type:transaction:category1</TRANSACTION_TYPE>
      <PURCHASE_NODE_USER_OID>02A2FE15764923AFE05307991F0AE63A</PURCHASE_NODE_USER_OID>
      <PURCHASE_TIME>2011-06-24 15:12:03.0</PURCHASE_TIME>
      <ALID>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</ALID>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <RENTAL_ABSOLUTE_EXPIRATION>null</RENTAL_ABSOLUTE_EXPIRATION>
      <RENTAL_DOWNLOAD_TO_PLAY_MAX>null</RENTAL_DOWNLOAD_TO_PLAY_MAX>
      <RENTAL_PLAY_DURATION_MAX>null</RENTAL_PLAY_DURATION_MAX>
      <LICENSE_ACQ_BASE_LOC>ns3.google.com 	</LICENSE_ACQ_BASE_LOC>
      <CREATED_DATE>2014-08-28 11:56:58.278</CREATED_DATE>
      <CREATED_BY>CCE44AF42FD7063BE0401F0A07991776</CREATED_BY>
      <UPDATED_DATE>2014-09-09 14:02:31.273</UPDATED_DATE>
      <UPDATED_BY>CCE44AF42FD7063BE0401F0A07991776</UPDATED_BY>
      <STATUS_ID>active</STATUS_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property>
        
        
        
        
      <con:property><con:name>DBrightstokenid</con:name><con:value>01AFDD7C358355A1E05305991F0AF1D4</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="en">Avatar BestBuy Special Packaging 		</ns4:DisplayName> 		<ns4:ContentID> urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd">  			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="urn:dece:type:discretemediaformat:securedigital"> 1 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>true </ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location> 		<ns4:Preference>1 </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		<ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET_CS_1</ns4:NodeID> 		<ns4:RetailerTransaction> RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:02A34106BC221024E05305991F0A773A</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>urn:dece:userid:org:dece:02A2FE1576BF23AFE05307991F0AE63A</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:02A34106BC2A1024E05305991F0A773A</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:01AFDD7C358355A1E05305991F0AF1D4</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>RightsTokenFull</con:value></con:property><con:property><con:name>RTU_rcStatusHistory</con:name><con:value>5</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30089_RightsTokenUpdate_FUNC_RTL_CS_after adjusting PP with DMRUpdate : e.g [ RTC = { SD,PD} => DMR = {SD} => RTU {remove SD} [ should throw error) => DMRUpdate ={SD to PD} => RTU {remove SD} ]</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R3_User_With_All_Statuses_And_Without_SAML_RTL_CS</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract RightsToken-Get Information" searchProperties="true" id="fdf84c55-c6aa-47c8-bd79-abdb457a2b01">
      <con:settings/>
      <con:testStep type="groovy" name="Extract RightsTokenGet Response" id="6f5b6711-07f1-47f0-8e34-63e13193480b">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName)

// Http Header
def RightsResHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName('RightsTokenGet byTokenID').httpRequest.response.getResponseHeaders(); 
def RightsResXml = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName('RightsTokenGet byTokenID').httpRequest.response.getContentAsString();
def RightsResTime = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request").getTestStepByName('RightsTokenGet byTokenID').httpRequest.response.getTimeTaken();
def RightsResHttpStatus = RightsResHeader.getAt("#status#");

testCase.setPropertyValue("RightsResXml",RightsResXml);
testCase.setPropertyValue("RightsResTime",RightsResTime.toString());


// Rights Response Object type

def Val_RightsResXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsResXml"));
def Resp_RightTokenObj = Val_RightsResXml.children().collect{ it[0].name()};
testCase.setPropertyValue("RTObjType", Resp_RightTokenObj[0]);
log.info Resp_RightTokenObj[0];

// Evaluate RightsToken Success &amp; Failure

if(RightsResHttpStatus[0] == "HTTP/1.1 200 OK")
{
log.info "Response Code : ${RightsResHttpStatus.toString()}";
log.info "Response Time : $RightsResTime:ms";
log.info "RightsObject Returned :"+ testCase.getPropertyValue("RTObjType");
}
else{
log.info " RightsToken Get failed - [ $RightsResHttpStatus ]"
log.info " Error Code Validation +++++ "
}
// Returns Rights Response Information
callingTCase.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
callingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));
callingTCase.setPropertyValue("RTObjType",testCase.getPropertyValue("RTObjType"));
def expectedHeader=callingTCase.getPropertyValue("expectErrTypeRTGet");

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath 
def logFile = new File(projectPath +"\\" +testSuite.project.name +".xls")

if ((RightsResHeader.ETag.toString()=="null")||(RightsResHeader.ETag.toString()==''))
{
testProject.setPropertyValue("ETag","*");
}
else
{
log.info "ETag Value=="+RightsResHeader.ETag.value[0].toString();
testProject.setPropertyValue("ETag",RightsResHeader.ETag.value[0].toString() );
}

//logFile.append("${callingTCaseName}"+"\t" +RightsResHeader.ETag.toString() +"\t"+ "$expectedHeader" +"\t"+"${RightsResHttpStatus.toString()}"  +"\n");

</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value><![CDATA[<RightsToken RightsTokenID="urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450" xmlns="http://www.decellc.org/schema/2015/03/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.2/md" xmlns:ns3="http://www.w3.org/2001/04/xmlenc#" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#">
   <RightsTokenInfo ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">
      <SoldAs>
         <DisplayName Language="en">Avatar BestBuy Special Packaging</DisplayName>
         <ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ContentID>
      </SoldAs>
      <RightsProfiles>
         <PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd">
            <CanDownload>true</CanDownload>
            <CanStream>true</CanStream>
         </PurchaseProfile>
      </RightsProfiles>
      <ResourceStatus>
         <Current CreationDate="2015-05-07T13:06:52.292Z" CreatedBy="urn:dece:org:org:dece:RET">
            <Value>urn:dece:type:status:active</Value>
            <Description>RightsToken has been created.</Description>
         </Current>
      </ResourceStatus>
      <LicenseAcqBaseLoc>ns3.google.com</LicenseAcqBaseLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/aaa</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/bbb</Location>
         <Preference>1</Preference>
      </FulfillmentWebLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ddd</Location>
         <Preference>3</Preference>
      </FulfillmentManifestLoc>
      <FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/ccc</Location>
         <Preference>1</Preference>
      </FulfillmentManifestLoc>
      <StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <Location>https://dl.bestbuy.com/p/streaminglink</Location>
         <Preference>3</Preference>
      </StreamWebLoc>
      <StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd">
         <Location>https://dl.bestbuy.com/p/streaminglink</Location>
         <Preference>3</Preference>
      </StreamWebLoc>
   </RightsTokenInfo>
</RightsToken>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResTime</con:name>
          <con:value>1512</con:value>
        </con:property>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>RightsTokenUpdate Request</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>Common Test Steps</con:value>
        </con:property>
        <con:property>
          <con:name>RTObjType</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RightsTokenInfo</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set Pem" searchProperties="true" id="9aeab004-236f-4e6f-8da5-91c7abc1a52b"><con:settings/><con:testStep type="groovy" name="Set Pem" id="4d1c04d5-a587-4013-8650-f2f333c0abff"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import soapUIUtils.soapUIUtils;
import org.apache.commons.lang.SystemUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 

import com.eviware.soapui.settings.SSLSettings
import com.eviware.soapui.SoapUI
def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath

def eNV = context.expand( '${#Project#ENV}' )

def propertiesPath = null;

if (System.properties['os.name'].toLowerCase().contains('windows')) 
	{
    		log.info "it's Windows OS!!";
    		File temp = new File( projectPath + "\\..\\..\\..\\Properties\\");
    		propertiesPath = temp.getCanonicalPath();
	} 
else 
	{
    		log.info "it's Linux OS!!";
    		File temp = new File(projectPath + "/../../../Properties/");
    		propertiesPath = temp.getCanonicalPath();
	}
	
log.info("Properties File Location : '" + propertiesPath+ "'");




def propMap=[:]
BufferedReader reader = new BufferedReader(new FileReader(propertiesPath + "/" + eNV +"project.properties"));

String line;
while ((line = reader.readLine()) != null)
      {
	       if (line.trim().length()==0) continue;
	       if (line.charAt(0)=='#') continue;
	
	       int delimPosition = line.indexOf("=");
	       String key = line.substring(0, delimPosition-0).trim();
	       String value = line.substring(delimPosition+1).trim();
	       propMap.put(key, value);
      }


if (System.properties['os.name'].toLowerCase().contains('windows')) 
      {
            log.info "it's Windows OS!!!";
            File temp = new File( projectPath + "\\..\\..\\..\\Certs\\" + eNV + "\\");
    		  certPath = temp.getCanonicalPath();      
      } 
else 
      {
            log.info "it's Linux OS!!!";
            File temp = new File(projectPath + "/../../../Certs/" + eNV + "/");
    		  certPath = temp.getCanonicalPath();
      }  
      
 log.info("Cert path: " + certPath );  
                  
def nodeId = context.expand( '${#TestCase#nodeid}' )

log.info "nodeId: "+nodeId;

 if (nodeId == "dece:cs")
       {
             nodeId = "dececs";
       }
 else if (nodeId == "coord:cs")
       {
             nodeId = "coordcs";
       }
 else
       {
             nodeId = nodeId;
       }


//log.info "~~~~~~~~~~~~" +nodeId
boolean imFine = true;
def pwd = null;
def certMatchesNodeID = context.expand( '${#Project#CertMatchesNodeID}' )
log.info("CertMatchesNodeID : '" + certMatchesNodeID + "'");
if (certMatchesNodeID == "YES")
{
		File f1 = new File(certPath+"/"+nodeId + "_concat.pem");
		File f2 = new File(certPath+"/"+nodeId + ".jks");
		File f3 = new File(certPath+"/truststore-"+nodeId + ".jks");
		File f4 = new File(certPath+"/"+nodeId + ".pem");

		log.info("F1 : '" + f1.getPath()+ "'");
		log.info("F2 : '" + f2.getPath()+ "'");
		log.info("F3 : '" + f3.getPath()+ "'");
		log.info("F4 : '" + f4.getPath()+ "'");
	
	// sets the certificate from the specific folder when the certname and NodeId are same
	  if(f1.exists()) 
             {
                   keyStorePath = certPath+"/"+nodeId + "_concat.pem";
                   pwd = "123"
                   log.info("F1 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");      
             }
	  else if(f2.exists())
             {
                  	keyStorePath = certPath+"/"+nodeId + ".jks";
                   	pwd = "abcd1234" 
                   	log.info("F2 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");          
             }
	  else if(f3.exists())
             {
                  	keyStorePath = certPath+"/truststore-"+nodeId + ".jks";
                   	pwd = "12elma";
				log.info("F3 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");
             }
	  else if(f4.exists()) 
             {
                   	keyStorePath = certPath+"/"+nodeId + ".pem";
                   	pwd = "123";
                   	log.info("F4 file exists!!!");
                   log.info("keyStorePath : '" + keyStorePath + "'");       
             }
	  else
             {
                  	log.info "No cert file is Found!!!";
                  	imFine = false;
             }
}
else
{
	//to get the certificate name from another property based on the nodeid property.
		
	
       def value = propMap.find{ it.value == nodeId }?.key
       def certName = testProject.getPropertyValue(value+"_cert");       
       log.info "cert name .... " + certName;

		File f1 = new File(certPath+"/"+certName + "_concat.pem");
		File f2 = new File(certPath+"/"+certName + ".jks");
		File f3 = new File(certPath+"/truststore-"+certName + ".jks");
		File f4 = new File(certPath+"/"+certName + ".pem");

		log.info("F1 : '" + f1.getPath()+ "'");
		log.info("F2 : '" + f2.getPath()+ "'");
		log.info("F3 : '" + f3.getPath()+ "'");
		log.info("F4 : '" + f4.getPath()+ "'");      
		     
       if(f1.exists()) 
             {
             		
				keyStorePath = certPath+"/"+certName + "_concat.pem";
				pwd = "123";
				log.info("F1 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");     
             }
       else if(f2.exists())
             {
				keyStorePath = certPath+"/"+certName + ".jks";
				pwd = "abcd1234";
				log.info("F2 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");           
             }
       else if(f3.exists())
             {
                  	keyStorePath = certPath+"/truststore-"+certName + ".jks";
                   	pwd = "abcd1234";
                   	log.info("F3 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");
                   	         
             }
       else if(f4.exists()) 
             {
				keyStorePath = certPath+"/"+certName + ".pem";
				pwd = "123";  
				log.info("F4 file exists!!!");
                   	log.info("keyStorePath : '" + keyStorePath + "'");     
             }
       else
			{
			log.info "No cert file is Found!!!";
			imFine = false;
			}                             
}


if(imFine)
{
      def callTSname = testCase.getPropertyValue("sName");
      def callTCname = testCase.getPropertyValue("tName");
      
      def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
      
      callTC.setPropertyValue("keyStorePath","$keyStorePath");
      testCase.setPropertyValue("keyStorePath","$keyStorePath");
      
      SoapUI.settings.setString( SSLSettings.KEYSTORE, keyStorePath );
      SoapUI.settings.setString( SSLSettings.KEYSTORE_PASSWORD, pwd);
      log.info 'pwd='+pwd
}

assert imFine == true;


</script></con:config></con:testStep><con:properties><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>tName</con:name><con:value>RightsTokenUpdate Request</con:value></con:property><con:property><con:name>sName</con:name><con:value>Common Test Steps</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of RightsTokenUpdate Request" searchProperties="true" id="90f39e13-2196-4687-b426-4a9c0d6f14d6">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Properties" id="3e121a60-79d1-4d51-ab8d-5e8129d17c14">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
//headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);
testCase.setPropertyValue("assert",CallingTCase.getPropertyValue("assert"));
//SetUp test properties
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion"));
// setUp Node Properties

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//SetUp test properties

testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("rightstokenid"));
//testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
testCase.setPropertyValue("RightsLockerID","");
testCase.setPropertyValue("RightsLockerID",CallingTCase.getPropertyValue("RightsLockerID"));
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("encodedRightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}
testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName",CallingTCase.getPropertyValue("SoldAsDisplayName") );
testCase.setPropertyValue("SoldAsLanguage",CallingTCase.getPropertyValue("SoldAsLanguage"));
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID",CallingTCase.getPropertyValue("SoldAsBundleID"));
testCase.setPropertyValue("PPContentProfile1",CallingTCase.getPropertyValue("PPContentProfile1"));
testCase.setPropertyValue("PPDiscreteMediaRemaining1",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining1"));
testCase.setPropertyValue("PPDiscreteMediaProfile1",CallingTCase.getPropertyValue("PPDiscreteMediaProfile1"));
testCase.setPropertyValue("PPCanDownLoad1",CallingTCase.getPropertyValue("PPCanDownLoad1"));
testCase.setPropertyValue("PPCanStream1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPContentProfile2",CallingTCase.getPropertyValue("PPContentProfile2"));
testCase.setPropertyValue("PPDiscreteMediaRemaining2",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining2"));
testCase.setPropertyValue("PPDiscreteMediaProfile2",CallingTCase.getPropertyValue("PPDiscreteMediaProfile2"));
testCase.setPropertyValue("PPCanDownLoad2",CallingTCase.getPropertyValue("PPCanDownLoad2"));
testCase.setPropertyValue("PPCanStream2",CallingTCase.getPropertyValue("PPCanStream2"));
testCase.setPropertyValue("PPContentProfile3",CallingTCase.getPropertyValue("PPContentProfile3"));
testCase.setPropertyValue("PPDiscreteMediaRemaining3",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining3"));
testCase.setPropertyValue("PPDiscreteMediaProfile3",CallingTCase.getPropertyValue("PPDiscreteMediaProfile3"));
testCase.setPropertyValue("PPCanDownLoad3",CallingTCase.getPropertyValue("PPCanDownLoad3"));
testCase.setPropertyValue("PPCanStream3",CallingTCase.getPropertyValue("PPCanStream3"));
testCase.setPropertyValue("RSCreatedby",CallingTCase.getPropertyValue("RSCreatedby"));
testCase.setPropertyValue("RSCreationDate",CallingTCase.getPropertyValue("RSCreationDate"));
testCase.setPropertyValue("RSValue",CallingTCase.getPropertyValue("RRSValue"));
testCase.setPropertyValue("RSDescription",CallingTCase.getPropertyValue("RSDescription"));
testCase.setPropertyValue("LICAcqBaseLoc",CallingTCase.getPropertyValue("LICAcqBaseLoc"));
testCase.setPropertyValue("FFWebLocLocation1",CallingTCase.getPropertyValue("FFWebLocLocation1"));
testCase.setPropertyValue("FFWebLocPreference1",CallingTCase.getPropertyValue("FFWebLocPreference1"));
testCase.setPropertyValue("FFWebLocLocation2",CallingTCase.getPropertyValue("FFWebLocLocation2"));
testCase.setPropertyValue("FFWebLocPreference2",CallingTCase.getPropertyValue("FFWebLocPreference2"));
testCase.setPropertyValue("FFManifestLocLocation1",CallingTCase.getPropertyValue("FFManifestLocLocation1"));
testCase.setPropertyValue("FFManifestLocPreference1",CallingTCase.getPropertyValue("FFManifestLocPreference1"));
testCase.setPropertyValue("FFManifestLocLocation2",CallingTCase.getPropertyValue("FFManifestLocLocation2"));
testCase.setPropertyValue("FFManifestLocPreference2",CallingTCase.getPropertyValue("FFManifestLocPreference2"));
testCase.setPropertyValue("PINodeID",CallingTCase.getPropertyValue("PINodeID"));
testCase.setPropertyValue("PIRetailerTransx",CallingTCase.getPropertyValue("PIRetailerTransx"));
testCase.setPropertyValue("PIPurchaseAccount",CallingTCase.getPropertyValue("PIPurchaseAccount"));
testCase.setPropertyValue("PIPurchaseUser",CallingTCase.getPropertyValue("PIPurchaseUser"));
testCase.setPropertyValue("PIPurchaseTime",CallingTCase.getPropertyValue("PIPurchaseTime"));
testCase.setPropertyValue("PITransactionType",CallingTCase.getPropertyValue("PITransactionType"));
testCase.setPropertyValue("VCAllowedUser",CallingTCase.getPropertyValue("VCAllowedUser"));
testCase.setPropertyValue("StreamWebLocLocation1",CallingTCase.getPropertyValue("StreamWebLocLocation1"));
testCase.setPropertyValue("StreamWebLocPreference1",CallingTCase.getPropertyValue("StreamWebLocPreference1"));

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTUReq","OK");
CallingTCase.setPropertyValue("FeedRTUReq",testCase.getPropertyValue("FeedRTUReq"));</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdate -Request_Trimmed" disabled="true" id="d0a84f01-10e7-45e4-9ed3-5397beb2c34a">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdate -Request_Trimmed" mediaType="application/xml" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6pME773V1iey1TC5l5JqoY1qKgguN0hjICyyYCgv/4bMBqznOX9qpJKpunlme5nenqekRn4dB8gBJPUi8K6zL80TLPbgXQXPjYZxnxsQmv7uLE25GOboS2aZLadDtw06jJCGZRDlJph+tKgSYp6JGn8o1PtPkX2m+2nLtVcN+pzmCDsGas8kY16Efgh6ldRXxpZEvYjE3moH5oBRP3U6s+AMupjzb55hdR4fb6ArAImr26axn2CsJ5saEHft56sKCCeiU86zzbqzzwnNNMsge8xbfTSeLfN8/wpZ56ixCFokiQJskdgHRt5zq/Ga+1qDG053EaXNWeGUehZpu+dzRKUAlM3suvAd6LES93gN64pgiJL14+wsB4tqhn+ahAfASp0/+jpE8gEmY/INamrMw1uYQJDC9YNTX5p/PqnAl5M9cQM0TZKAvRl/d8QwfAI/SiG9iO6buwK7t89/pCt12do9eXQ8jPkHeG4ZElsWhDVpwncesXIQ5h7NqpX1a8X6EowaP2XijwT9zgxbOKHzPCeA1H6/5TrvlQXL3PTz+CrF6+MCRGBnTi02vPjgOuNgGlsTlMFvVQQ7pUvoG6Vfl9/5emNVu9GiqeOjPOYXyttTknHO0cIUEpBdc7NpZCYb1PkmMR+EhtIl4ZmdKBgu3VcigO4UGzbN4jjeOazGvUmZgOmZtoWS0VzkmiNhqfOA9QpeqkNZydGQbvZ+iTynYA3ET3MTrt4O2pmknOU8rRoBlSQ00QzlRGvG9LWhRuvWaNPG2orS+o5byfk8ihF9urlY0/3eyj3NYSnapPl/8sW2ePN1LwtuLJRbPHpTOGrIst8duY4cJo5IJdZ4ODfHRizzv7g7j2pl5MsUFUR8Bzr74SRAvYSoAyBdRVuPlcK7gwGrDOeY0O9Bvw1q2hCzucrfq6qb0Lu6rY0P20kP1ufhbECUGXMuYqgCXNe0wVFAdFFVij8Rip2ykzJZXXF17ADXijisy31UigVnkXLLWXWolezVrZezrFcPI2C8XGjC77CKRI3O0gzecPwqjAA2mph0WKGbc+jII5qK4O9MxrEcAegmJM4Jjgr+j5XdIMe85pZyfTPMkWWBoqKck6tdiXVhHwwN84fueBYhbMDoRB0ML3kwtI5cUyulwNkLlqhooGcdyrjoZDbkysQRSXzGnfJ1UjINUEzxqKiybkAKhkv5D7a0GN3I7lHi1GLgQ5294XhVGEhhvh7qB2tU+tQMyURbII5ZTGaa3ktz1xGubPu5ry6GgyjtYzdjIEqsKwKMCASlFvD+WfBiJ23JrHXoz042opRAN2kplDRcH88F2TXYybOdLxo8dt9Zyp5U8a0XUL2LXrH7IEsQ3tIuappaytC40Pv3J4MjSX0ktU5HbdUqu11WzVtkRlLPvI79ttyZQwfipWl6pPpzFhMz0UxPuy6Zz99m7BvyWyg8M5kDOEUWQ8EaYqs3uVb3Opth/m01UjYqgFHYQGQdo4jeJjA7NvuQsI3TREweYHC5RK34KQZkKQHQWZ5Vd2KLjW1pHlmUGNFFmwfp+m0Wmp+bc2xPK4UaS7W8YoWybUO7MqZ2hRERzVaD4MlXKtjX5+nII/n25CiSClW37ZK7lhKyQBbzmcsPkVsLZOBYU7iAVkM522SOqi2P5j1gMEUM3pfTFxnfdo76z0uyuru6Kx04M/1O47JmGKLmqoLmgK6l/NWKLLBaL4VFPEmsApexzWrjCOdFTRRJY2C58HwIkM6oAu0Ogs7hRMq+xooFBPT4rhZumgVjr2JLmSYtNkdXXYbmvwrx0qK1T5z7MABFXzlmHDhmAC2hwe5y1Oo1eZitMgdVhIOamc+GvRiUl2O9jX2QSSc1PObk7Cb68OHBXXKO+5OXSx6Mu9yD+F25TKblCXNs6XCwb4jedqeD9tN/6SMFLVleIR/InfwkKNRbSxTocCkZ5HoJdkDG6y94HxmmrQRTGfZUTbMIaJO7uaw6OW76VubIBLp1Dp31kdVXEbW6nKPfG2SN+GljRL3DfZTB76OXrNss4NWel2W97DM10V8OZrpn8e4UuLZj9tKtR+XsyBKYZg2XkurcoTrZ3jQ8+w+vjkv6x7ocRwnUgxgOb7XFAWySVIiCchWr0eLbeY6611QfIHIReHWK2OVw+zlsv4zQCvob6CZwKTxB09lnupyqOHpIwoR1KOXBmDaXdDpAZoUqG6bJwHN45VANVs8x/R4ulEfR+kknCRgm8LkbkBmvg7IGrS82IPlFP0+S6AUJ+JgHrPUp56O5lMIMzxmJ+Wk26eb3VaVAMLOgtjCH3B3S+IIpU+xG1fDzG+38fXbdcdYx/ZKBVSCZiGuFvxhpGeuiL/tjP5x9L+6B5ntlTMLTl+aeNYFyedPH2woaXCjAtkh6Svmm+q/mvZ6302JPyAivibjFsk+endxrw8TPGvjcax6jyBctIP5dHjKjsesKlOnHDUT7J4giR4xg1aGx8WTHu1hSNw8EP8yqN8wf4l7k39Gl6VuOEvxKQ8wo+rV8u+PtE/WOAEpLNKfZJyPn2Vl8D++3Ky+Veph8RT/yaPE/sj7D77u4mDIZYfyQqdclRP26XN5309C34qwVw83qSi59/2T/U+xPwtv6bpBSTErNlkKf/+lXnYf/FS2rCgLU5lvVIL7jlhhTk8x7H8ofXNTjbjvb5YC/fbNslRGM8uFgdm46Xp/V370qsJbEFshr8Ly0ijw6xsHD527DvwO8L4JU/jo3Z29T3hfv4m/S+4y95W/r/8D" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:RightsTokenFull RightsTokenID="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5" 
xsi:schemaLocation="http://www.decellc.org/schema dece.xsd " 
xmlns:dece="http://www.decellc.org/schema/2010/10/dece" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</dece:RightsLockerID>
 <dece:RightsTokenData 
 ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt"> 
            <dece:RightsProfiles>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
               </dece:PurchaseProfile>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
                </dece:PurchaseProfile>   
                  <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream> 
                </dece:PurchaseProfile> 
              </dece:RightsProfiles>
          <dece:ResourceStatus>  
             <dece:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:org:org:dece:07909"> 
                     <dece:Value>urn:dece:type:status:active</dece:Value>
                    <dece:Description>new rights token</dece:Description>
                </dece:Current>
            </dece:ResourceStatus> 
   <dece:LicenseAcqBaseLoc>ns3.google.com</dece:LicenseAcqBaseLoc>
              <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/aaa</dece:Location>
                <dece:Preference>1</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/bbb</dece:Location>
                <dece:Preference>2</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ccc</dece:Location>
                <dece:Preference>3</dece:Preference>
            </dece:FulfillmentManifestLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ddd</dece:Location>
                <dece:Preference>4</dece:Preference>
            </dece:FulfillmentManifestLoc>
        <dece:PurchaseInfo>
            <dece:NodeID>urn:dece:org:org:dece:222259</dece:NodeID>
            <dece:RetailerTransaction>Transaction_node0701-to-222259</dece:RetailerTransaction>
            <dece:PurchaseAccount>urn:dece:accountid:org:dece:107006</dece:PurchaseAccount>
            <dece:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</dece:PurchaseUser>
            <dece:PurchaseTime>2010-02-01T12:27:41</dece:PurchaseTime>
        </dece:PurchaseInfo> 
    </dece:RightsTokenData>
</dece:RightsTokenFull>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="AccountID" value="urn:dece:accountid:org:dece:107006"/>
              <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call RightsTokenGet for ETag Value" id="4c5a75fe-3a29-422c-abdb-49cb0272b142"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;

//Extractthe Response and Set the ETag Value at the Project Level Properties
RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Get Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

runnerRTC = RTCRequest.run( null , false )

def etagValue=testProject.getPropertyValue("ETag");
log.info "etagValue=="+etagValue;
//Set the Etag value as Header to the RightsTokenDelete API Request

def headers = new StringToStringMap()
headers.put("IF-Match",etagValue);
headers.put("Authorization","SAML2 assertion="+ testCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep>
      <con:testStep type="groovy" name="pem set" id="ac83d652-cab4-4165-b491-0019331caadf">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightTokenUpdateRequest PUT");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdateRequest PUT" id="bbb12a15-f9cc-448d-9610-c77cd9c5df19">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdateRequest PUT" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept="application/xml">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="RecordRequestRepresentations">false</con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4=  "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>  ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			  <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>  ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:request>
            <con:assertion type="GroovyScriptAssertion" disabled="true" id="71490b8e-ae51-4517-b64a-83ce622d7a3e">
              <con:configuration>
                <scriptText>// check for the HTTP Response code 
assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 200 OK"</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#encodedAccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#encodedRightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:org:200002</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvOYMpZvXFyBKhJC1kwYkkAymXnZEnJjlNgSWDKQ+fqVDDhALsvuk0vt1unTFx3pXOA0cYKOEJBJylllnSZMBIW1ZeQZCzgWVAQMpyACSYJRZ3ATOFUU4N0WoxJ2W8bftag2cRyomR7GvulFftOc2LZrQhShBrFt5Ea+chUih5AJiZlsGQ6yPdNGpovGthcgFPhuteai30blETKhsJVLFRlbUmvRMmZSzgPLWq1W1ZVb5VlsOQjZ1tPgZkRmkGKjfb7JqAiUtbf+pBoBgSQhVcJT69w68DmPRDCiMcMyz2AbK/osFrJQ01I+kaDxN6PcC1HIprxYXmLGGSU4oX+wrs8A5IxHlU4S84zKWfppEjbSwCasiUlsj30zrENqJwIdMMwENsUM21use5hCBoxA5eE+bBnfTutasXWcYSamPEvF4fK/8QG2hITPITLFLq0ttdMBP6hU+xxIEDKS5IIu4Yce1jkmILbdBHI6VOU2gyld31ChBnQtNDtrn97RclONLo1ByP/ToL3mbEAecZJDW3oPJE/iZn+wXIe38Wgx6ta79C5+RWGrILDvXBjK1m6WR0NZDtFmx+sLDCbZrZiGQzz4ha7WNy9+z67/zhfUf5jPmkNv7HKeSuxeiU5kiTE6u3h88J35X33X6vyk4YWcDhZ96/tv+DOMqf888e7YWSoi4V3HtV/c8/q45j3FyQgNF/ZjfNfr1Wf2WXKdPnQsunJ//LzzVtMHqyvoi5/nFLJr3L/vvwxv06fJWTQZeyhc0D66xtt0j/gf2nZnfpRPnoHI3VKPQdit9FSXsPxazLSFRua0cA3mWnyEBCaNtt6ltSPIldzRKFA93KxRreN7V5e1ZuOi4TSbzSvku6jebNo91HHrjrMTmQ2LI4qXnE2pjqUldzM2XxMkaSCARZCZS54rpRPGF4hdLHElZPfqEHAmYMyVPNtxw1vUnomYyMkfu57wBhcv9edI1o3KDy6HbJh1phKyQ1GuH4jyPRA6p6CVWw+2UJMtpCrGAi9zmdjVJa4yyJW2Z1pmA8dr+Jag6TwBTdVKeZQnUJ3P5kVpLLH5OiYmorDeX42L4/ZpYsf/djVQPhHVDkLncgGqj/DB7eLtEvk0YQftJ7yD7+QR1SdLFVRmlGyYHP56mxM9IOWQqIx2lEvPY8MBqnWcUBkoWlJSTnp5XysZVwe/vWvHAlcX1Xy5zIsG1LXAZQpeqY7tW8ixRkByJU2vY/4CzCpRrJPugZL4UfDSfkgxlzM2klhCqiamUixPuPhHIPTFH6pZX5/6qjgIqUonYS0/sl0m6tGiGX/5riEB0X7KfKs+K55Fbx37AGsvjspT3fuSsliv9B3w+slcEK5gqVIvnu2DfwTwUfBDY1nkkotUAzXJJXz+p6JlqWVgQnjOZNg1CsO+VBY85escgjendzCFGpfPM/rv7zOTFiNAQD3qBC3w9S0b6CPA4j253QZ9r7iNXs/1PKdx5ewrrl27vCyLcsCu/c783rJXp+MZb/8D</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property>
        
        
        
        
        <con:property><con:name>encodedRightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property>
        
        
        <con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>keyStorePath</con:name><con:value>C:\Git\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:06A54EC698B82999E05307991F0A3722</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PITransactionType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property>
        
        
      <con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:06A54E8FF34C28E2E05307991F0A16CC</con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1470</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2013/10/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Error ErrorID="urn:dece:errorid:org:dece:RightsTokenNotFound">
      <Reason Language="en">The rights token was not found.</Reason>
      <OriginalRequest>http://chdecqavap3.nc.neustar.com:8009/rest/1/11/Account/urn:dece:accountid:org:dece:03697189F5181CE7E05305991E0A9B53/RightsToken/urn:dece:rightstokenid:org:dece:036961384B7D3A1CE05307991F0AB5C4</OriginalRequest>
      <ErrorLink>http://error.decellc.org/en/ErrorList.html#RightsTokenNotFound</ErrorLink>
   </Error>
</ErrorList>]]></con:value></con:property><con:property><con:name>RightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>Error</con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>Copy of TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>2a6c59c3-d052-465e-af99-05ceae037fa9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Solekai_RightsTokenUpdate Request" searchProperties="true" id="33b25664-0881-4c0c-babf-08e2ce024fd4">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Properties" id="27917859-3fa9-45ea-8a6c-d85b56f562a3">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
//headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);
testCase.setPropertyValue("assert",CallingTCase.getPropertyValue("assert"));
//SetUp test properties
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion"));
// setUp Node Properties

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//SetUp test properties

testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("rightstokenid"));
//testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
testCase.setPropertyValue("RightsLockerID","");
testCase.setPropertyValue("RightsLockerID",CallingTCase.getPropertyValue("RightsLockerID"));
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("encodedRightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}
testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName",CallingTCase.getPropertyValue("SoldAsDisplayName") );
testCase.setPropertyValue("SoldAsLanguage",CallingTCase.getPropertyValue("SoldAsLanguage"));
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID",CallingTCase.getPropertyValue("SoldAsBundleID"));
testCase.setPropertyValue("PPContentProfile1",CallingTCase.getPropertyValue("PPContentProfile1"));
testCase.setPropertyValue("PPDiscreteMediaRemaining1",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining1"));
testCase.setPropertyValue("PPDiscreteMediaProfile1",CallingTCase.getPropertyValue("PPDiscreteMediaProfile1"));
testCase.setPropertyValue("PPCanDownLoad1",CallingTCase.getPropertyValue("PPCanDownLoad1"));
testCase.setPropertyValue("PPCanStream1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPContentProfile2",CallingTCase.getPropertyValue("PPContentProfile2"));
testCase.setPropertyValue("PPDiscreteMediaRemaining2",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining2"));
testCase.setPropertyValue("PPDiscreteMediaProfile2",CallingTCase.getPropertyValue("PPDiscreteMediaProfile2"));
testCase.setPropertyValue("PPCanDownLoad2",CallingTCase.getPropertyValue("PPCanDownLoad2"));
testCase.setPropertyValue("PPCanStream2",CallingTCase.getPropertyValue("PPCanStream2"));
testCase.setPropertyValue("PPContentProfile3",CallingTCase.getPropertyValue("PPContentProfile3"));
testCase.setPropertyValue("PPDiscreteMediaRemaining3",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining3"));
testCase.setPropertyValue("PPDiscreteMediaProfile3",CallingTCase.getPropertyValue("PPDiscreteMediaProfile3"));
testCase.setPropertyValue("PPCanDownLoad3",CallingTCase.getPropertyValue("PPCanDownLoad3"));
testCase.setPropertyValue("PPCanStream3",CallingTCase.getPropertyValue("PPCanStream3"));
testCase.setPropertyValue("RSCreatedby",CallingTCase.getPropertyValue("RSCreatedby"));
testCase.setPropertyValue("RSCreationDate",CallingTCase.getPropertyValue("RSCreationDate"));
testCase.setPropertyValue("RSValue",CallingTCase.getPropertyValue("RRSValue"));
testCase.setPropertyValue("RSDescription",CallingTCase.getPropertyValue("RSDescription"));
testCase.setPropertyValue("LICAcqBaseLoc",CallingTCase.getPropertyValue("LICAcqBaseLoc"));
testCase.setPropertyValue("FFWebLocLocation1",CallingTCase.getPropertyValue("FFWebLocLocation1"));
testCase.setPropertyValue("FFWebLocPreference1",CallingTCase.getPropertyValue("FFWebLocPreference1"));
testCase.setPropertyValue("FFWebLocLocation2",CallingTCase.getPropertyValue("FFWebLocLocation2"));
testCase.setPropertyValue("FFWebLocPreference2",CallingTCase.getPropertyValue("FFWebLocPreference2"));
testCase.setPropertyValue("FFManifestLocLocation1",CallingTCase.getPropertyValue("FFManifestLocLocation1"));
testCase.setPropertyValue("FFManifestLocPreference1",CallingTCase.getPropertyValue("FFManifestLocPreference1"));
testCase.setPropertyValue("FFManifestLocLocation2",CallingTCase.getPropertyValue("FFManifestLocLocation2"));
testCase.setPropertyValue("FFManifestLocPreference2",CallingTCase.getPropertyValue("FFManifestLocPreference2"));
testCase.setPropertyValue("PINodeID",CallingTCase.getPropertyValue("PINodeID"));
testCase.setPropertyValue("PIRetailerTransx",CallingTCase.getPropertyValue("PIRetailerTransx"));
testCase.setPropertyValue("PIPurchaseAccount",CallingTCase.getPropertyValue("PIPurchaseAccount"));
testCase.setPropertyValue("PIPurchaseUser",CallingTCase.getPropertyValue("PIPurchaseUser"));
testCase.setPropertyValue("PIPurchaseTime",CallingTCase.getPropertyValue("PIPurchaseTime"));
testCase.setPropertyValue("PITransactionType",CallingTCase.getPropertyValue("PITransactionType"));
testCase.setPropertyValue("VCAllowedUser",CallingTCase.getPropertyValue("VCAllowedUser"));
testCase.setPropertyValue("StreamWebLocLocation1",CallingTCase.getPropertyValue("StreamWebLocLocation1"));
testCase.setPropertyValue("StreamWebLocPreference1",CallingTCase.getPropertyValue("StreamWebLocPreference1"));

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTUReq","OK");
CallingTCase.setPropertyValue("FeedRTUReq",testCase.getPropertyValue("FeedRTUReq"));</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdate -Request_Trimmed" disabled="true" id="52cb8b43-31f9-499e-9230-dfdfc177910b">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdate -Request_Trimmed" mediaType="application/xml" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6pME773V1iey1TC5l5JqoY1qKgguN0hjICyyYCgv/4bMBqznOX9qpJKpunlme5nenqekRn4dB8gBJPUi8K6zL80TLPbgXQXPjYZxnxsQmv7uLE25GOboS2aZLadDtw06jJCGZRDlJph+tKgSYp6JGn8o1PtPkX2m+2nLtVcN+pzmCDsGas8kY16Efgh6ldRXxpZEvYjE3moH5oBRP3U6s+AMupjzb55hdR4fb6ArAImr26axn2CsJ5saEHft56sKCCeiU86zzbqzzwnNNMsge8xbfTSeLfN8/wpZ56ixCFokiQJskdgHRt5zq/Ga+1qDG053EaXNWeGUehZpu+dzRKUAlM3suvAd6LES93gN64pgiJL14+wsB4tqhn+ahAfASp0/+jpE8gEmY/INamrMw1uYQJDC9YNTX5p/PqnAl5M9cQM0TZKAvRl/d8QwfAI/SiG9iO6buwK7t89/pCt12do9eXQ8jPkHeG4ZElsWhDVpwncesXIQ5h7NqpX1a8X6EowaP2XijwT9zgxbOKHzPCeA1H6/5TrvlQXL3PTz+CrF6+MCRGBnTi02vPjgOuNgGlsTlMFvVQQ7pUvoG6Vfl9/5emNVu9GiqeOjPOYXyttTknHO0cIUEpBdc7NpZCYb1PkmMR+EhtIl4ZmdKBgu3VcigO4UGzbN4jjeOazGvUmZgOmZtoWS0VzkmiNhqfOA9QpeqkNZydGQbvZ+iTynYA3ET3MTrt4O2pmknOU8rRoBlSQ00QzlRGvG9LWhRuvWaNPG2orS+o5byfk8ihF9urlY0/3eyj3NYSnapPl/8sW2ePN1LwtuLJRbPHpTOGrIst8duY4cJo5IJdZ4ODfHRizzv7g7j2pl5MsUFUR8Bzr74SRAvYSoAyBdRVuPlcK7gwGrDOeY0O9Bvw1q2hCzucrfq6qb0Lu6rY0P20kP1ufhbECUGXMuYqgCXNe0wVFAdFFVij8Rip2ykzJZXXF17ADXijisy31UigVnkXLLWXWolezVrZezrFcPI2C8XGjC77CKRI3O0gzecPwqjAA2mph0WKGbc+jII5qK4O9MxrEcAegmJM4Jjgr+j5XdIMe85pZyfTPMkWWBoqKck6tdiXVhHwwN84fueBYhbMDoRB0ML3kwtI5cUyulwNkLlqhooGcdyrjoZDbkysQRSXzGnfJ1UjINUEzxqKiybkAKhkv5D7a0GN3I7lHi1GLgQ5294XhVGEhhvh7qB2tU+tQMyURbII5ZTGaa3ktz1xGubPu5ry6GgyjtYzdjIEqsKwKMCASlFvD+WfBiJ23JrHXoz042opRAN2kplDRcH88F2TXYybOdLxo8dt9Zyp5U8a0XUL2LXrH7IEsQ3tIuappaytC40Pv3J4MjSX0ktU5HbdUqu11WzVtkRlLPvI79ttyZQwfipWl6pPpzFhMz0UxPuy6Zz99m7BvyWyg8M5kDOEUWQ8EaYqs3uVb3Opth/m01UjYqgFHYQGQdo4jeJjA7NvuQsI3TREweYHC5RK34KQZkKQHQWZ5Vd2KLjW1pHlmUGNFFmwfp+m0Wmp+bc2xPK4UaS7W8YoWybUO7MqZ2hRERzVaD4MlXKtjX5+nII/n25CiSClW37ZK7lhKyQBbzmcsPkVsLZOBYU7iAVkM522SOqi2P5j1gMEUM3pfTFxnfdo76z0uyuru6Kx04M/1O47JmGKLmqoLmgK6l/NWKLLBaL4VFPEmsApexzWrjCOdFTRRJY2C58HwIkM6oAu0Ogs7hRMq+xooFBPT4rhZumgVjr2JLmSYtNkdXXYbmvwrx0qK1T5z7MABFXzlmHDhmAC2hwe5y1Oo1eZitMgdVhIOamc+GvRiUl2O9jX2QSSc1PObk7Cb68OHBXXKO+5OXSx6Mu9yD+F25TKblCXNs6XCwb4jedqeD9tN/6SMFLVleIR/InfwkKNRbSxTocCkZ5HoJdkDG6y94HxmmrQRTGfZUTbMIaJO7uaw6OW76VubIBLp1Dp31kdVXEbW6nKPfG2SN+GljRL3DfZTB76OXrNss4NWel2W97DM10V8OZrpn8e4UuLZj9tKtR+XsyBKYZg2XkurcoTrZ3jQ8+w+vjkv6x7ocRwnUgxgOb7XFAWySVIiCchWr0eLbeY6611QfIHIReHWK2OVw+zlsv4zQCvob6CZwKTxB09lnupyqOHpIwoR1KOXBmDaXdDpAZoUqG6bJwHN45VANVs8x/R4ulEfR+kknCRgm8LkbkBmvg7IGrS82IPlFP0+S6AUJ+JgHrPUp56O5lMIMzxmJ+Wk26eb3VaVAMLOgtjCH3B3S+IIpU+xG1fDzG+38fXbdcdYx/ZKBVSCZiGuFvxhpGeuiL/tjP5x9L+6B5ntlTMLTl+aeNYFyedPH2woaXCjAtkh6Svmm+q/mvZ6302JPyAivibjFsk+endxrw8TPGvjcax6jyBctIP5dHjKjsesKlOnHDUT7J4giR4xg1aGx8WTHu1hSNw8EP8yqN8wf4l7k39Gl6VuOEvxKQ8wo+rV8u+PtE/WOAEpLNKfZJyPn2Vl8D++3Ky+Veph8RT/yaPE/sj7D77u4mDIZYfyQqdclRP26XN5309C34qwVw83qSi59/2T/U+xPwtv6bpBSTErNlkKf/+lXnYf/FS2rCgLU5lvVIL7jlhhTk8x7H8ofXNTjbjvb5YC/fbNslRGM8uFgdm46Xp/V370qsJbEFshr8Ly0ijw6xsHD527DvwO8L4JU/jo3Z29T3hfv4m/S+4y95W/r/8D" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:RightsTokenFull RightsTokenID="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5" 
xsi:schemaLocation="http://www.decellc.org/schema dece.xsd " 
xmlns:dece="http://www.decellc.org/schema/2010/10/dece" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</dece:RightsLockerID>
 <dece:RightsTokenData 
 ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt"> 
            <dece:RightsProfiles>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
               </dece:PurchaseProfile>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
                </dece:PurchaseProfile>   
                  <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream> 
                </dece:PurchaseProfile> 
              </dece:RightsProfiles>
          <dece:ResourceStatus>  
             <dece:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:org:org:dece:07909"> 
                     <dece:Value>urn:dece:type:status:active</dece:Value>
                    <dece:Description>new rights token</dece:Description>
                </dece:Current>
            </dece:ResourceStatus> 
   <dece:LicenseAcqBaseLoc>ns3.google.com</dece:LicenseAcqBaseLoc>
              <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/aaa</dece:Location>
                <dece:Preference>1</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/bbb</dece:Location>
                <dece:Preference>2</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ccc</dece:Location>
                <dece:Preference>3</dece:Preference>
            </dece:FulfillmentManifestLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ddd</dece:Location>
                <dece:Preference>4</dece:Preference>
            </dece:FulfillmentManifestLoc>
        <dece:PurchaseInfo>
            <dece:NodeID>urn:dece:org:org:dece:222259</dece:NodeID>
            <dece:RetailerTransaction>Transaction_node0701-to-222259</dece:RetailerTransaction>
            <dece:PurchaseAccount>urn:dece:accountid:org:dece:107006</dece:PurchaseAccount>
            <dece:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</dece:PurchaseUser>
            <dece:PurchaseTime>2010-02-01T12:27:41</dece:PurchaseTime>
        </dece:PurchaseInfo> 
    </dece:RightsTokenData>
</dece:RightsTokenFull>]]></con:request>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="AccountID" value="urn:dece:accountid:org:dece:107006"/>
              <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call RightsTokenGet for ETag Value" id="9657528b-5977-4ea5-b926-5df4a2e5e040"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;

//Extractthe Response and Set the ETag Value at the Project Level Properties
RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Get Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

runnerRTC = RTCRequest.run( null , false )

def etagValue=testProject.getPropertyValue("ETag");
log.info "etagValue=="+etagValue;
//Set the Etag value as Header to the RightsTokenDelete API Request

def headers = new StringToStringMap()
headers.put("IF-Match",etagValue);
headers.put("Authorization","SAML2 assertion="+ testCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep>
      <con:testStep type="groovy" name="pem set" id="19b6c92f-ecf2-498d-bfa5-448c5fd4c1d3">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightTokenUpdateRequest PUT");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdateRequest PUT" id="6ff0a155-6ecf-4b17-9b7a-45c79a12fe29">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdateRequest PUT" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept="application/xml">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="RecordRequestRepresentations">false</con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema 
file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" 
xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		
<ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                          
<ns4:BundleID>urn:dece:bid:ORG:mystudio:Version786</ns4:BundleID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		
<ns4:PurchaseProfile 
MediaProfile="${#TestCase#PPContentProfile1}"> 			
<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			
<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile 
MediaProfile="${#TestCase#PPContentProfile2}"> 			
<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			
<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile 
MediaProfile="${#TestCase#PPContentProfile3}"> 			
<ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload> 			
<ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	
<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc 
MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		
<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		
<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc 
MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		
<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		
<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc 
MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		
<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		
<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	
<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		
<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		
<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		
<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		
<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		
<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		
<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		
<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	
<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>

]]></con:request>
            <con:assertion type="GroovyScriptAssertion" disabled="true" id="71490b8e-ae51-4517-b64a-83ce622d7a3e">
              <con:configuration>
                <scriptText>// check for the HTTP Response code 
assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 200 OK"</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#encodedAccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#encodedRightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties>
        
        
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:org:200002</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVbbcuI4EP0VyvOYMpZvXFyBKhJC1kwYkkAymXnZEnJjlNgSWDKQ+fqVDDhALsvuk0vt1unTFx3pXOA0cYKOEJBJylllnSZMBIW1ZeQZCzgWVAQMpyACSYJRZ3ATOFUU4N0WoxJ2W8bftag2cRyomR7GvulFftOc2LZrQhShBrFt5Ea+chUih5AJiZlsGQ6yPdNGpovGthcgFPhuteai30blETKhsJVLFRlbUmvRMmZSzgPLWq1W1ZVb5VlsOQjZ1tPgZkRmkGKjfb7JqAiUtbf+pBoBgSQhVcJT69w68DmPRDCiMcMyz2AbK/osFrJQ01I+kaDxN6PcC1HIprxYXmLGGSU4oX+wrs8A5IxHlU4S84zKWfppEjbSwCasiUlsj30zrENqJwIdMMwENsUM21use5hCBoxA5eE+bBnfTutasXWcYSamPEvF4fK/8QG2hITPITLFLq0ttdMBP6hU+xxIEDKS5IIu4Yce1jkmILbdBHI6VOU2gyld31ChBnQtNDtrn97RclONLo1ByP/ToL3mbEAecZJDW3oPJE/iZn+wXIe38Wgx6ta79C5+RWGrILDvXBjK1m6WR0NZDtFmx+sLDCbZrZiGQzz4ha7WNy9+z67/zhfUf5jPmkNv7HKeSuxeiU5kiTE6u3h88J35X33X6vyk4YWcDhZ96/tv+DOMqf888e7YWSoi4V3HtV/c8/q45j3FyQgNF/ZjfNfr1Wf2WXKdPnQsunJ//LzzVtMHqyvoi5/nFLJr3L/vvwxv06fJWTQZeyhc0D66xtt0j/gf2nZnfpRPnoHI3VKPQdit9FSXsPxazLSFRua0cA3mWnyEBCaNtt6ltSPIldzRKFA93KxRreN7V5e1ZuOi4TSbzSvku6jebNo91HHrjrMTmQ2LI4qXnE2pjqUldzM2XxMkaSCARZCZS54rpRPGF4hdLHElZPfqEHAmYMyVPNtxw1vUnomYyMkfu57wBhcv9edI1o3KDy6HbJh1phKyQ1GuH4jyPRA6p6CVWw+2UJMtpCrGAi9zmdjVJa4yyJW2Z1pmA8dr+Jag6TwBTdVKeZQnUJ3P5kVpLLH5OiYmorDeX42L4/ZpYsf/djVQPhHVDkLncgGqj/DB7eLtEvk0YQftJ7yD7+QR1SdLFVRmlGyYHP56mxM9IOWQqIx2lEvPY8MBqnWcUBkoWlJSTnp5XysZVwe/vWvHAlcX1Xy5zIsG1LXAZQpeqY7tW8ixRkByJU2vY/4CzCpRrJPugZL4UfDSfkgxlzM2klhCqiamUixPuPhHIPTFH6pZX5/6qjgIqUonYS0/sl0m6tGiGX/5riEB0X7KfKs+K55Fbx37AGsvjspT3fuSsliv9B3w+slcEK5gqVIvnu2DfwTwUfBDY1nkkotUAzXJJXz+p6JlqWVgQnjOZNg1CsO+VBY85escgjendzCFGpfPM/rv7zOTFiNAQD3qBC3w9S0b6CPA4j253QZ9r7iNXs/1PKdx5ewrrl27vCyLcsCu/c783rJXp+MZb/8D</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property>
        
        
        
        
        <con:property><con:name>encodedRightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property>
        
        
        <con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>keyStorePath</con:name><con:value>C:\Git\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:06A54EC698B82999E05307991F0A3722</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PITransactionType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property>
        
        
      <con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:06A54E8FF34C28E2E05307991F0A16CC</con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1408</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2013/10/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Error ErrorID="urn:dece:errorid:org:dece:AccountDoesNotHaveRightsTokenInURL">
      <Reason Language="en">The rights token was not found in the account.</Reason>
      <OriginalRequest>http://stdecqavap8.va.neustar.com:8009/rest/1/11/Account/urn:dece:accountid:org:dece:036960AF048B3A61E05307991F0AA4A0/RightsToken/urn:dece:rightstokenid:org:dece:036961384B7D3A1CE05307991F0AB5C4</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7003/rest/1/11/error/en/ErrorList.html#AccountDoesNotHaveRightsTokenInURL</ErrorLink>
   </Error>
</ErrorList>]]></con:value></con:property><con:property><con:name>RightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:06A5677BC9AF6639E05307991F0AB380</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>Error</con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value/></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>Solekai_Issue_RGT020_TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>2a6c59c3-d052-465e-af99-05ceae037fa9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenUpdateWithoutAccountId Request" searchProperties="true" id="457114dd-a689-4efb-b19e-4914630acc4a">
      <con:settings/>
      <con:testStep type="groovy" name="Get the Required Rights Properties" id="3fd365ff-7863-4d00-a0bd-b97e8bc12f39">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

//log.info callTSuitename.getName();
//log.info callTCasename.getName();

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

//SetUp SAML assertion in Request header

def headers = new StringToStringMap()
//headers.put("Authorization","SAML2 assertion="+ CallingTCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);
testCase.setPropertyValue("assert",CallingTCase.getPropertyValue("assert"));
//SetUp test properties
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion"));
// setUp Node Properties

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
//SetUp test properties

testCase.setPropertyValue("RightsTokenID",CallingTCase.getPropertyValue("rightstokenid"));
//testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
testCase.setPropertyValue("RightsLockerID","");
testCase.setPropertyValue("RightsLockerID",CallingTCase.getPropertyValue("RightsLockerID"));
testCase.setPropertyValue("AccountID",CallingTCase.getPropertyValue("AccountID"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAccountID",URLEncoder.encode(CallingTCase.getPropertyValue("AccountID"),"UTF-8"));
	testCase.setPropertyValue("encodedRightsTokenID",URLEncoder.encode(CallingTCase.getPropertyValue("RightsTokenID"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAccountID",CallingTCase.getPropertyValue("AccountID"));
	testCase.setPropertyValue("encodedRightsTokenID",CallingTCase.getPropertyValue("RightsTokenID"));
}
testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName",CallingTCase.getPropertyValue("SoldAsDisplayName") );
testCase.setPropertyValue("SoldAsLanguage",CallingTCase.getPropertyValue("SoldAsLanguage"));
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID",CallingTCase.getPropertyValue("SoldAsBundleID"));
testCase.setPropertyValue("PPContentProfile1",CallingTCase.getPropertyValue("PPContentProfile1"));
testCase.setPropertyValue("PPDiscreteMediaRemaining1",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining1"));
testCase.setPropertyValue("PPDiscreteMediaProfile1",CallingTCase.getPropertyValue("PPDiscreteMediaProfile1"));
testCase.setPropertyValue("PPCanDownLoad1",CallingTCase.getPropertyValue("PPCanDownLoad1"));
testCase.setPropertyValue("PPCanStream1",CallingTCase.getPropertyValue("PPCanStream1"));
testCase.setPropertyValue("PPContentProfile2",CallingTCase.getPropertyValue("PPContentProfile2"));
testCase.setPropertyValue("PPDiscreteMediaRemaining2",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining2"));
testCase.setPropertyValue("PPDiscreteMediaProfile2",CallingTCase.getPropertyValue("PPDiscreteMediaProfile2"));
testCase.setPropertyValue("PPCanDownLoad2",CallingTCase.getPropertyValue("PPCanDownLoad2"));
testCase.setPropertyValue("PPCanStream2",CallingTCase.getPropertyValue("PPCanStream2"));
testCase.setPropertyValue("PPContentProfile3",CallingTCase.getPropertyValue("PPContentProfile3"));
testCase.setPropertyValue("PPDiscreteMediaRemaining3",CallingTCase.getPropertyValue("PPDiscreteMediaRemaining3"));
testCase.setPropertyValue("PPDiscreteMediaProfile3",CallingTCase.getPropertyValue("PPDiscreteMediaProfile3"));
testCase.setPropertyValue("PPCanDownLoad3",CallingTCase.getPropertyValue("PPCanDownLoad3"));
testCase.setPropertyValue("PPCanStream3",CallingTCase.getPropertyValue("PPCanStream3"));
testCase.setPropertyValue("RSCreatedby",CallingTCase.getPropertyValue("RSCreatedby"));
testCase.setPropertyValue("RSCreationDate",CallingTCase.getPropertyValue("RSCreationDate"));
testCase.setPropertyValue("RSValue",CallingTCase.getPropertyValue("RRSValue"));
testCase.setPropertyValue("RSDescription",CallingTCase.getPropertyValue("RSDescription"));
testCase.setPropertyValue("LICAcqBaseLoc",CallingTCase.getPropertyValue("LICAcqBaseLoc"));
testCase.setPropertyValue("FFWebLocLocation1",CallingTCase.getPropertyValue("FFWebLocLocation1"));
testCase.setPropertyValue("FFWebLocPreference1",CallingTCase.getPropertyValue("FFWebLocPreference1"));
testCase.setPropertyValue("FFWebLocLocation2",CallingTCase.getPropertyValue("FFWebLocLocation2"));
testCase.setPropertyValue("FFWebLocPreference2",CallingTCase.getPropertyValue("FFWebLocPreference2"));
testCase.setPropertyValue("FFManifestLocLocation1",CallingTCase.getPropertyValue("FFManifestLocLocation1"));
testCase.setPropertyValue("FFManifestLocPreference1",CallingTCase.getPropertyValue("FFManifestLocPreference1"));
testCase.setPropertyValue("FFManifestLocLocation2",CallingTCase.getPropertyValue("FFManifestLocLocation2"));
testCase.setPropertyValue("FFManifestLocPreference2",CallingTCase.getPropertyValue("FFManifestLocPreference2"));
testCase.setPropertyValue("PINodeID",CallingTCase.getPropertyValue("PINodeID"));
testCase.setPropertyValue("PIRetailerTransx",CallingTCase.getPropertyValue("PIRetailerTransx"));
testCase.setPropertyValue("PIPurchaseAccount",CallingTCase.getPropertyValue("PIPurchaseAccount"));
testCase.setPropertyValue("PIPurchaseUser",CallingTCase.getPropertyValue("PIPurchaseUser"));
testCase.setPropertyValue("PIPurchaseTime",CallingTCase.getPropertyValue("PIPurchaseTime"));
testCase.setPropertyValue("PITransactionType",CallingTCase.getPropertyValue("PITransactionType"));
testCase.setPropertyValue("VCAllowedUser",CallingTCase.getPropertyValue("VCAllowedUser"));
testCase.setPropertyValue("StreamWebLocLocation1","https://dl.bestbuy.com/p/streaminglink");
testCase.setPropertyValue("StreamWebLocPreference1","3");

//Testing RightTokenCreate Request Properties Loaded correctly.

testCase.setPropertyValue("FeedRTUReq","OK");
CallingTCase.setPropertyValue("FeedRTUReq",testCase.getPropertyValue("FeedRTUReq"));</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdate -Request_Trimmed" disabled="true" id="8b390860-0bba-447b-94b9-cadb725b02b5">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdate -Request_Trimmed" mediaType="application/xml" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=nVdZc6pME773V1iey1TC5l5JqoY1qKgguN0hjICyyYCgv/4bMBqznOX9qpJKpunlme5nenqekRn4dB8gBJPUi8K6zL80TLPbgXQXPjYZxnxsQmv7uLE25GOboS2aZLadDtw06jJCGZRDlJph+tKgSYp6JGn8o1PtPkX2m+2nLtVcN+pzmCDsGas8kY16Efgh6ldRXxpZEvYjE3moH5oBRP3U6s+AMupjzb55hdR4fb6ArAImr26axn2CsJ5saEHft56sKCCeiU86zzbqzzwnNNMsge8xbfTSeLfN8/wpZ56ixCFokiQJskdgHRt5zq/Ga+1qDG053EaXNWeGUehZpu+dzRKUAlM3suvAd6LES93gN64pgiJL14+wsB4tqhn+ahAfASp0/+jpE8gEmY/INamrMw1uYQJDC9YNTX5p/PqnAl5M9cQM0TZKAvRl/d8QwfAI/SiG9iO6buwK7t89/pCt12do9eXQ8jPkHeG4ZElsWhDVpwncesXIQ5h7NqpX1a8X6EowaP2XijwT9zgxbOKHzPCeA1H6/5TrvlQXL3PTz+CrF6+MCRGBnTi02vPjgOuNgGlsTlMFvVQQ7pUvoG6Vfl9/5emNVu9GiqeOjPOYXyttTknHO0cIUEpBdc7NpZCYb1PkmMR+EhtIl4ZmdKBgu3VcigO4UGzbN4jjeOazGvUmZgOmZtoWS0VzkmiNhqfOA9QpeqkNZydGQbvZ+iTynYA3ET3MTrt4O2pmknOU8rRoBlSQ00QzlRGvG9LWhRuvWaNPG2orS+o5byfk8ihF9urlY0/3eyj3NYSnapPl/8sW2ePN1LwtuLJRbPHpTOGrIst8duY4cJo5IJdZ4ODfHRizzv7g7j2pl5MsUFUR8Bzr74SRAvYSoAyBdRVuPlcK7gwGrDOeY0O9Bvw1q2hCzucrfq6qb0Lu6rY0P20kP1ufhbECUGXMuYqgCXNe0wVFAdFFVij8Rip2ykzJZXXF17ADXijisy31UigVnkXLLWXWolezVrZezrFcPI2C8XGjC77CKRI3O0gzecPwqjAA2mph0WKGbc+jII5qK4O9MxrEcAegmJM4Jjgr+j5XdIMe85pZyfTPMkWWBoqKck6tdiXVhHwwN84fueBYhbMDoRB0ML3kwtI5cUyulwNkLlqhooGcdyrjoZDbkysQRSXzGnfJ1UjINUEzxqKiybkAKhkv5D7a0GN3I7lHi1GLgQ5294XhVGEhhvh7qB2tU+tQMyURbII5ZTGaa3ktz1xGubPu5ry6GgyjtYzdjIEqsKwKMCASlFvD+WfBiJ23JrHXoz042opRAN2kplDRcH88F2TXYybOdLxo8dt9Zyp5U8a0XUL2LXrH7IEsQ3tIuappaytC40Pv3J4MjSX0ktU5HbdUqu11WzVtkRlLPvI79ttyZQwfipWl6pPpzFhMz0UxPuy6Zz99m7BvyWyg8M5kDOEUWQ8EaYqs3uVb3Opth/m01UjYqgFHYQGQdo4jeJjA7NvuQsI3TREweYHC5RK34KQZkKQHQWZ5Vd2KLjW1pHlmUGNFFmwfp+m0Wmp+bc2xPK4UaS7W8YoWybUO7MqZ2hRERzVaD4MlXKtjX5+nII/n25CiSClW37ZK7lhKyQBbzmcsPkVsLZOBYU7iAVkM522SOqi2P5j1gMEUM3pfTFxnfdo76z0uyuru6Kx04M/1O47JmGKLmqoLmgK6l/NWKLLBaL4VFPEmsApexzWrjCOdFTRRJY2C58HwIkM6oAu0Ogs7hRMq+xooFBPT4rhZumgVjr2JLmSYtNkdXXYbmvwrx0qK1T5z7MABFXzlmHDhmAC2hwe5y1Oo1eZitMgdVhIOamc+GvRiUl2O9jX2QSSc1PObk7Cb68OHBXXKO+5OXSx6Mu9yD+F25TKblCXNs6XCwb4jedqeD9tN/6SMFLVleIR/InfwkKNRbSxTocCkZ5HoJdkDG6y94HxmmrQRTGfZUTbMIaJO7uaw6OW76VubIBLp1Dp31kdVXEbW6nKPfG2SN+GljRL3DfZTB76OXrNss4NWel2W97DM10V8OZrpn8e4UuLZj9tKtR+XsyBKYZg2XkurcoTrZ3jQ8+w+vjkv6x7ocRwnUgxgOb7XFAWySVIiCchWr0eLbeY6611QfIHIReHWK2OVw+zlsv4zQCvob6CZwKTxB09lnupyqOHpIwoR1KOXBmDaXdDpAZoUqG6bJwHN45VANVs8x/R4ulEfR+kknCRgm8LkbkBmvg7IGrS82IPlFP0+S6AUJ+JgHrPUp56O5lMIMzxmJ+Wk26eb3VaVAMLOgtjCH3B3S+IIpU+xG1fDzG+38fXbdcdYx/ZKBVSCZiGuFvxhpGeuiL/tjP5x9L+6B5ntlTMLTl+aeNYFyedPH2woaXCjAtkh6Svmm+q/mvZ6302JPyAivibjFsk+endxrw8TPGvjcax6jyBctIP5dHjKjsesKlOnHDUT7J4giR4xg1aGx8WTHu1hSNw8EP8yqN8wf4l7k39Gl6VuOEvxKQ8wo+rV8u+PtE/WOAEpLNKfZJyPn2Vl8D++3Ky+Veph8RT/yaPE/sj7D77u4mDIZYfyQqdclRP26XN5309C34qwVw83qSi59/2T/U+xPwtv6bpBSTErNlkKf/+lXnYf/FS2rCgLU5lvVIL7jlhhTk8x7H8ofXNTjbjvb5YC/fbNslRGM8uFgdm46Xp/V370qsJbEFshr8Ly0ijw6xsHD527DvwO8L4JU/jo3Z29T3hfv4m/S+4y95W/r/8D" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:RightsTokenFull RightsTokenID="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5" 
xsi:schemaLocation="http://www.decellc.org/schema dece.xsd " 
xmlns:dece="http://www.decellc.org/schema/2010/10/dece" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dece:RightsLockerID>urn:dece:rightslockerid:org:dece:7001</dece:RightsLockerID>
 <dece:RightsTokenData 
 ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt"> 
            <dece:RightsProfiles>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:hd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
               </dece:PurchaseProfile>
             <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:sd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream>
                </dece:PurchaseProfile>   
                  <dece:PurchaseProfile ContentProfile="urn:dece:type:mediaprofile:pd">
                    <dece:DiscreteMediaRightsRemaining DiscreteMediaProfile="urn:dece:type:discretemediaformat:securesd:cprm">1</dece:DiscreteMediaRightsRemaining>
                    <dece:CanDownload>true</dece:CanDownload>
                    <dece:CanStream>true</dece:CanStream> 
                </dece:PurchaseProfile> 
              </dece:RightsProfiles>
          <dece:ResourceStatus>  
             <dece:Current CreationDate="2011-02-17T15:12:03" CreatedBy="urn:dece:org:org:dece:07909"> 
                     <dece:Value>urn:dece:type:status:active</dece:Value>
                    <dece:Description>new rights token</dece:Description>
                </dece:Current>
            </dece:ResourceStatus> 
   <dece:LicenseAcqBaseLoc>ns3.google.com</dece:LicenseAcqBaseLoc>
              <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/aaa</dece:Location>
                <dece:Preference>1</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentWebLoc>
                <dece:Location>https://dl.bestbuy.com/p/bbb</dece:Location>
                <dece:Preference>2</dece:Preference>
            </dece:FulfillmentWebLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ccc</dece:Location>
                <dece:Preference>3</dece:Preference>
            </dece:FulfillmentManifestLoc>
            <dece:FulfillmentManifestLoc>
                <dece:Location>https://dl.bestbuy.com/p/ddd</dece:Location>
                <dece:Preference>4</dece:Preference>
            </dece:FulfillmentManifestLoc>
        <dece:PurchaseInfo>
            <dece:NodeID>urn:dece:org:org:dece:222259</dece:NodeID>
            <dece:RetailerTransaction>Transaction_node0701-to-222259</dece:RetailerTransaction>
            <dece:PurchaseAccount>urn:dece:accountid:org:dece:107006</dece:PurchaseAccount>
            <dece:PurchaseUser>urn:dece:userid:org:dece:9A9CCCF13ABCD94FE0401F0A05992F63</dece:PurchaseUser>
            <dece:PurchaseTime>2010-02-01T12:27:41</dece:PurchaseTime>
        </dece:PurchaseInfo> 
    </dece:RightsTokenData>
</dece:RightsTokenFull>]]></con:request>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="AccountID" value="urn:dece:accountid:org:dece:107006"/>
              <con:entry key="RightsTokenID" value="urn:dece:rightstokenid:org:dece:9AEA51509D0FBEE4E0401F0A05992AD5"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call RightsTokenGet for ETag Value" id="9a9e3dfa-21b5-4d2c-8b94-8e13c0ac08e4"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Request")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;

//Extractthe Response and Set the ETag Value at the Project Level Properties
RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Get Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

runnerRTC = RTCRequest.run( null , false )

def etagValue=testProject.getPropertyValue("ETag");
log.info "etagValue=="+etagValue;
//Set the Etag value as Header to the RightsTokenDelete API Request

def headers = new StringToStringMap()
//headers.put("IF-Match",etagValue);
headers.put("IF-Match","*");
//headers.put("Authorization","SAML2 assertion="+ testCase.getPropertyValue("assert"));
testRunner.testCase.getTestStepByName("RightTokenUpdateRequest PUT").testRequest.setRequestHeaders(headers);

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep>
      <con:testStep type="groovy" name="pem set" id="647241cf-f53d-47f0-97c2-be1514d17c7c">
        <con:settings/>
        <con:config><script>
import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("RightTokenUpdateRequest PUT");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="RightTokenUpdateRequest PUT1" disabled="true" id="532b5d2d-5e5a-4152-b22e-c89f22b07968">
        <con:settings/>
        <con:config service="RightsTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken/{RightsTokenID}" methodName="RightTokenUpdate" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="RightTokenUpdateRequest PUT1" mediaType="application/xml" postQueryString="false" sslKeystore="Ret_concat.pem" accept="application/xml">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Authorization" value="SAML2 assertion=nVbZcuo4EP0VynlMeZHBLK5AFWHJECDkBpJJ5WVKkdqgXCODJbPk669kwMFkGWaeXGq3uk93Hx3pSuB56PpNISCWLOKFzTzkwk+tdSOJuR9hwYTP8RyEL4k/bg4Hvms5Pj5sMQq9dt34p1atIq8Er2bVLRfNEg0cs0bcwHQDVCxTWi0HVVCuQiTQ40JiLuuG66CSiZCJKhPk+ajsFx2rWC6/GIUniIWKrVwsx9iD2oi6MZNy4dv2er221kUriqe26zjIfh4OxmQGc2w0rnYVpYnixt6fWBQIhCGxSDS3r+yczxUV/phNOZZJDPtc9Ltcju3UbOVDBZteGNleoD0eROmyhXnEGcEhe8e6P0OQs4gWmuE0ipmczb8tAjk6sAkbYhJU4heGnYd2ZqAcwlhgU8ww2sd6gABi4AQKjw+9unFx3tTSrZMYcxFE8Vzkl/8ND/AVhNECqCkOZe2hnR/wi041roD4PU7CRLAV3GmyLjABsZ8mkPNDFe5jCNhmwIQi6EZodPYxvJPlrhttNgUh/8+AjoazC/KEwwQai9n6dhSGstUq0rtOdwub575XexqMXkk9BXDsnBqy0e6WJ6TMSLTb0Ww5mxWxH7ttVLsZVYLiUnq015FeKXm+H5RHl/fDrXfbCbeiImd3YUX2u/1Z5WU8smOgdxUbowhux53YFaX5xHunL4hPg9fgr6fNdoUqLwmbJhw3rx3591SSwbS8FHYtls37yfVw6YW/fl1S1OyP1fG7HpDVcBKQ0c3msvXSt9/fgvf1y8OW3jxJul30+WM9K+cIf952OPPj5PUNiDwsNQ167UJXTQnLn8VMWxg1g9TVX2jxERK4NBp6l9YOP1Fyx6ivZrhbO1XkVFCrVuy4bQ91Kh3HKzqVWg11nWa1i9yDyOxQnEBsRTxgOpeW3B1tfgZI5r4ATiE2V1GilE4YP0RsY4kLPf6gDkHEBUwiJc/oLQJ3CaJSdbevaFmWb7/dYhIn661RuIvkiI/iZiAhzotyNSfKD0DYgoFWbk1soZgtpGrGEq8SGSJrhS0OidL2WMus75aqni3YfBGChmrPI5qEYC1mi7Q1tth9XRMTkVofOpP0uH1b2Om/Qw+UD2XaQeharkHNEb64XdxDId8W7KLjgg/hmwll+mSphsqYkR2S/K8PnmiCZCRRFR0gZ56nhlxU+7SgLBFdMZIxPbuvlYyrg984jGOJraWVrFZJOoCKFrhYhVeqgzzbce0xkERJ03YS/QZuZ1Hss+6BDPhJ8syeh5jIGR9LLGGuGFNIl2dc/GMQ+uLvKa5vzn1V5FKq1knYyK9srVA9WjTiH981xCfaT5nv1WcdxfRjYl/EOsqj6lT3vmR8qlf6Dth+wwsSqbBMqVcUHwf/KsBXyfPGrMkZFqkI9ZpI+P5PQctS3cCERAmXvbaRGo6lMsUptwvwP5w+hUnVOHuesX9/n5kspQBRT0Hln8bXt6yvjwCfHsntPump4pZbZc9xrlsuapdTxfV2itvsutWsKTl0jU/mz5ajPp1yvPEH"/>
  <con:entry key="IF-Match" value="&quot;08106C56945C21D0E05305991F0AD916:7E568B65&quot;"/>
</xml-fragment>]]></con:setting>
              <con:setting id="RecordRequestRepresentations">false</con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4=  "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>  ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			  <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>  ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:request>
            <con:assertion type="GroovyScriptAssertion" disabled="true" id="71490b8e-ae51-4517-b64a-83ce622d7a3e">
              <con:configuration>
                <scriptText>// check for the HTTP Response code 
assert messageExchange.responseHeaders["#status#"] == "HTTP/1.1 200 OK"</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="AccountID" value="${#TestCase#encodedAccountID}"/>
  <con:entry key="RightsTokenID" value="${#TestCase#encodedRightsTokenID}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="RightTokenUpdateRequest PUT" id="5896f2ff-6e03-44d5-a3c9-7d230fdca8ea"><con:settings/><con:config service="RightsTokenUpdate" methodName="RightTokenUpdate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/RightsToken/{RightsTokenID}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="RightTokenUpdateRequest PUT" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="IF-Match" value="*" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4=  "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>  ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			  <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>  ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="RightsTokenID" value="${#TestCase#encodedRightsTokenID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties>
        
        
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVZbU+o6FP4rTPejU5reoO0IMwh4rKK4LbodX87ENJRom0CTAvrrT1KgUrwcznnqZHXlW9+65EtOOcxSK+hxjnNBGG2ss5TyoLR2tCKnAYOc8IDCDPNAoCDqXY8CqwkCuNuiNcJBR/vbNS3TND1HN13/WXdM39c9z3d1q4UwbtmW7zm+dOW8wCHlAlLR0SxgSn9TN70JaAe2Hzh20/LAk9Z4wDmX2NKlCbQtqTXvaDMh5oFhrFar5spusjwxLABM4/F6FKEZzqDWPd1kVAbKu1t/1IwxwmmKmohlxqlR8zmNeRCRhEJR5HgbK/4uFjCAb0ifmJPkl1btxXFIp6xc9iFllCCYkneo6nONxYzFjV6asJyIWfZtEiZQwDpeIx2ZDv2lGXVqRwLVGOYc6nwGzS3WHZ7iHFOEG/d3YUf7dVzXyq2THFI+ZXnG68v/xgfTJU7ZHMc636W1pXY84BeV6p5iFIQUpQUnS3yjhnUOEebbbmJ0PFTjNsdTsh4RLgd0zRU7Y5/ewXJTjQFJMBf/p0F7zdmAPMC0wN0kfnjMny7R+CoUlhiGV61bwvL7l/7K6ZQE9p1LQ9XazfJgKKsh2uy4ERfnEzNajz3nwaR30+f82bfXZzd/TRee+5pkTo/322Dmw5b5NgGJGb7n92B+Hl9e3DwtPPhCz64gDaNR7yQaFNAZ5KvBqn8fXf454W/L14tX8vh7OIwurp5eQMQvCvJ2Yi5/j8e+fXLFxjH2Jlni3F5n0Box4I3X0W0Lj57a7fEf9nKToGtz1J6et57f+/zE61Tp7PGv23ZnPiqeXzASu6Uag3DQOJddguJnMVMWEuvT0jWYK/HhAlOhddUupR1BIeWOxIHs4WYNPHNoWz23Zbk917WdIXBt4Pq+eQ56JvD9nchsWBxQ7DM6JSqWktzN2PxMEGUBxzTGub5khVQ6rv2AOIACNkJ6Jw8BoxxPmJLn1YrFALVfV4VrOQC2IceLl2SlNW6YGNNx3psKnNck2QQ1Sb7DiMwJVrqtxprLueZClmIBl4VIzeYSNikupLLnSmQDy/Fcg5NsnmJF1MhYXKS4OZ/Ny8IYfPO1dIh4ab0bTsrD9m1ah/92FZA+MVEOXOVyhmUX8Rd3i71L5PuE7f2Ed/C9IibqXMlyipygDZP6r48pUeNRjYjMaEe58jw01FCNw4SqQPGSoGrOq9tairg89t1dOxawuWgWy2VRNqCt5C2X8FJzTNcAlhFhVEhhepuwV0yNCsU46haoiB8Er+x1ioWY0UhAgTM5MY1yecS1H2Gurv1QTvr62DdFLaQsncBr8ZWtn8oni2L846sGBUj5SfOt/KxYHn907AusvTgyT3nrC0ITtVI3wNs3c4GYhCVSu1i+D/4VwFfB68aqyBUXIQfquRD4+z8NJUodDSLECirCgVYa9oWy5Cne5jj4cPoEU2px9Tgj//4600k5AgjLJx0nJb66YwN1BGiyJ7bboJ/11nOG7sAG57ZX6m17o7dnoNeuilJj1/1k/mzZq9PhjHf/AQ==</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>encodedAccountID</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property>
        
        
        
        
        <con:property><con:name>encodedRightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:081E358F3A23188CE05307991F0A857D</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FeedRTUReq</con:name><con:value>OK</con:value></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property>
        
        
        <con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>keyStorePath</con:name><con:value>C:\Git\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:081E32A5625A5534E05305991F0A1099</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PITransactionType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property>
        
        
        
        
        <con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property>
        
        
        
        
        
        <con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property>
        
        
      <con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:081E3284E5DB0F38E05307991F0AB0A7</con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1554</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value><![CDATA[<dece:RightsToken RightsTokenID="urn:dece:rightstokenid:org:dece:081E358F3A23188CE05307991F0A857D" xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
   <dece:RightsTokenInfo ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">
      <dece:SoldAs>
         <dece:DisplayName Language="en">Avatar BestBuy Special Packaging</dece:DisplayName>
         <dece:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</dece:ContentID>
      </dece:SoldAs>
      <dece:RightsProfiles>
         <dece:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd">
            <dece:CanDownload>true</dece:CanDownload>
            <dece:CanStream>true</dece:CanStream>
         </dece:PurchaseProfile>
      </dece:RightsProfiles>
      <dece:ResourceStatus>
         <dece:Current CreationDate="2014-11-18T07:40:29.203Z" CreatedBy="urn:dece:org:org:dece:RET">
            <dece:Value>urn:dece:type:status:active</dece:Value>
            <dece:Description>RightsToken has been created.</dece:Description>
         </dece:Current>
      </dece:ResourceStatus>
      <dece:LicenseAcqBaseLoc>ns3.google.com</dece:LicenseAcqBaseLoc>
      <dece:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <dece:Location>https://dl.bestbuy.com/p/aaa</dece:Location>
         <dece:Preference>1</dece:Preference>
      </dece:FulfillmentWebLoc>
      <dece:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <dece:Location>https://dl.bestbuy.com/p/bbb</dece:Location>
         <dece:Preference>1</dece:Preference>
      </dece:FulfillmentWebLoc>
      <dece:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <dece:Location>https://dl.bestbuy.com/p/ddd</dece:Location>
         <dece:Preference>3</dece:Preference>
      </dece:FulfillmentManifestLoc>
      <dece:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <dece:Location>https://dl.bestbuy.com/p/ccc</dece:Location>
         <dece:Preference>1</dece:Preference>
      </dece:FulfillmentManifestLoc>
      <dece:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd">
         <dece:Location>https://dl.bestbuy.com/p/streaminglink</dece:Location>
         <dece:Preference>3</dece:Preference>
      </dece:StreamWebLoc>
      <dece:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd">
         <dece:Location>https://dl.bestbuy.com/p/streaminglink</dece:Location>
         <dece:Preference>3</dece:Preference>
      </dece:StreamWebLoc>
   </dece:RightsTokenInfo>
</dece:RightsToken>]]></con:value></con:property><con:property><con:name>RightsTokenID</con:name><con:value>urn:dece:rightstokenid:org:dece:081E358F3A23188CE05307991F0A857D</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>RightsTokenInfo</con:value></con:property><con:property><con:name>SAMLassertion</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://dl.bestbuy.com/p/streaminglink</con:value></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">3</con:value></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdateWithoutAccountId_RTL_TestCases</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>HighDynamicRange</con:name><con:value>true</con:value></con:property><con:property><con:name>HighFrameRate</con:name><con:value>true</con:value></con:property><con:property><con:name>WideColorGamut</con:name><con:value>true</con:value></con:property><con:property><con:name>NextGenAudio</con:name><con:value>true</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>2a6c59c3-d052-465e-af99-05ceae037fa9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Extract RightsToken-UpdateWithoutAccountId Information" searchProperties="true" id="287278fd-7da9-4735-89c3-35cd2bd9ee86">
      <con:settings/>
      <con:testStep type="groovy" name="Extract RightsTokenUpdate Request XML" id="a4c698c9-d200-47ab-a95f-c70ff9022d50">
        <con:settings/>
        <con:config><script>import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName);

def RT_RequestBody = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT").testRequest.response.rawRequestData;

def rawData = new String(RT_RequestBody);
 
testCase.setPropertyValue("RightsReqXml",rawData.tokenize('\n').last());

log.info "RightsReqXml:" + testCase.getPropertyValue("RightsReqXml");
callingTCase.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract RightsToken Info from the Response" id="55d3092c-c5a5-4136-be72-b185a18d6795">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callingTSuiteName = testCase.getPropertyValue("TSuiteName");
def callingTCaseName = testCase.getPropertyValue("TCaseName");

def callingTCase = testProject.getTestSuiteByName(callingTSuiteName).getTestCaseByName(callingTCaseName)

def RightsResHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getResponseHeaders(); 
def RightsResXml = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getContentAsString();
def RightsResTime = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName('RightTokenUpdateRequest PUT').httpRequest.response.getTimeTaken();
def RightsResHttpStatus = RightsResHeader.getAt("#status#");

log.info RightsResHttpStatus[0];
log.info "Response Time : $RightsResTime:ms";
testCase.setPropertyValue("RightsResXml",RightsResXml);
testCase.setPropertyValue("RightsResTime",RightsResTime.toString());

// Evaluate RightsToken Success &amp; Failure

if(RightsResHttpStatus[0] == "HTTP/1.1 200 OK")
{
log.info "Response Code : ${RightsResHttpStatus[0].toString()}";
log.info "Response Time : $RightsResTime:ms";
}
else{
log.info " RightsToken Update failed - [ $RightsResHttpStatus ]"
log.info " Error Code Validation +++++ "
}
// Returns Rights Response Information
log.info "ResponseXML:" + testCase.getPropertyValue("RightsResXml");
callingTCase.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
callingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TCaseName</con:name>
          <con:value>TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value>
        </con:property>
        <con:property>
          <con:name>TSuiteName</con:name>
          <con:value>R1_RightsTokenUpdateWithoutAccountId_RTL_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>urn:dece:rightstokenid:org:dece:9C196308C6811497E0401F0A2222593EAE</con:value>
        </con:property>
        <con:property>
          <con:name>Accountid</con:name>
          <con:value>urn:dece:accountid:org:dece:107006</con:value>
        </con:property>
        <con:property>
          <con:name>DBrightstokenid</con:name>
          <con:value>9C196308C6811497E0401F0A2222593EAE</con:value>
        </con:property>
        <con:property>
          <con:name>RightsReqXml</con:name>
          <con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081E32A5625A5534E05305991F0A1099</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:081E3284E5DB0F38E05307991F0AB0A7</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value>
        </con:property>
        <con:property>
          <con:name>RightsResXml</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>RightsResTime</con:name>
          <con:value>1752</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenUpdateWithoutAccountId Response Validation" searchProperties="true" id="a9c6b576-d254-45a5-a489-bd86678ae1cf">
      <con:settings/>
      <con:testStep type="groovy" name="ValidateRightsTokenUpdate RESPONSE" id="8eed28ea-61ee-432f-bb49-ae53301e3f23">
        <con:settings/>
        <con:config><script>import groovy.*;
import groovy.xml.*;
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testCase.setPropertyValue("errorStatusCode","nothing");
//testCase.setPropertyValue("errorReason","nothing");
//testCase.setPropertyValue("errorID","nothing");

def QAResp_ErrorID;
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTUpdate",CallingTCase.getPropertyValue("expectErrTypeRTUpdate"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));
def contentProfile= CallingTCase.getPropertyValue("ContentProfile");

if (contentProfile!=null)
{
	int lastColon = contentProfile.lastIndexOf(':');
	int lastSlash = contentProfile.lastIndexOf('/');
	contentProfile     = contentProfile.substring(lastColon + 1);
}
log.info "contentProfile ="+contentProfile;

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Query_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdateWithoutAccountId Request").getTestStepByName("RightTokenUpdateRequest PUT").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTUpdate");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

log.info Res_RTObjType;
log.info Resp_HTTPstatus[0];
log.info Resp_HTTPconnection[0];
log.info Resp_HTTPcontenttype[0];
log.info Resp_HTTPcontentlength[0];
log.info errorRespType;

// Error Validation Flags &amp; Values


boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = "$DeceUrl";
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$Res_RTObjType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$Res_RTObjType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	QAResp_ErrorID = "ForbiddenAccountNotActive"
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "The API call is not authorized.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	case "PURCHASE_USER_NOT_BELONGS_TO_PURCAHSE_ACCOUNT":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserDoesNotBelongToPurchaseAccount";
	Resp_errorReason = "The purchasing member does not belong to the purchase account.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseUserDoesNotBelongToPurchaseAccount";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	QAResp_ErrorID = "NotFoundContentIDNotFound"
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestContentIDNotValid"
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotValid";
	break;

	
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;


	case "UnAuthorized":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
			
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	QAResp_ErrorID = "ForbiddenAssetLogicalIDNotActive"
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	QAResp_ErrorID = "ForbiddenUserIdUnmatched"
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink  = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	QAResp_ErrorID = "ForbiddenUserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	QAResp_ErrorID = "ForbiddenAccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	QAResp_ErrorID = "BadRequestAssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;

	case "CONTENT_ID_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotValid";
	QAResp_ErrorID = "BadRequestContentIDNotValid"
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ContentIDNotValid";
	
	break;          
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	QAResp_ErrorID = "ForbiddenAssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	QAResp_ErrorID = "NotFoundAssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	QAResp_ErrorID = ""
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	QAResp_ErrorID = "NotFoundBundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotFound";
	
	break;

	case "MEDIAPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestMediaProfileNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid";
	break;
	
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	QAResp_ErrorID = "BadRequestDisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		log.info '------------------------------------DM_REM'
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		//expectHTTPcontenttype = "application/xml"
	break;

	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:MediaProfileNotValid";
	QAResp_ErrorID = "BadRequestMediaProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#MediaProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	QAResp_ErrorID = "BadRequestFulfillmentLocNotValid";
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	log.info '----------FFMISSING'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	QAResp_ErrorID = "BadRequestStandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	QAResp_ErrorID = "BadRequestPurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	QAResp_ErrorID = "BadRequestPurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	QAResp_ErrorID = "BadRequestPurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	QAResp_ErrorID = "BadRequestLicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;

	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	QAResp_ErrorID = "BadRequestBundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	QAResp_ErrorID = "NotFoundRightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	QAResp_ErrorID = "BadRequestRightsTokenIDNotValid"
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsTokenIDNotValid";
	
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	QAResp_ErrorID = "ForbiddenUserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "RIGHTSLOCKERID_DONOT_MATCH_WITH_ACCOUNTID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	QAResp_ErrorID = "BadRequestRightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsLockerIDInRequestDoNotMatchAccountRightsLockerID";
	
	break;

	case "TRANSACTION_TYPE_ID_NOT_VALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:TransactionTypeIDNotValid";
	QAResp_ErrorID = "BadRequestTransactionTypeIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#TransactionTypeIDNotValid";
	
	break;

	case "AdultContentNotAllowed":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
	QAResp_ErrorID = "ForbiddenAdultContentNotAllowed";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
	break;

	case "RatingPolicyExists":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
	QAResp_ErrorID = "ForbiddenRatingPolicyExists";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:RatingPolicyExists";
	break;

	case "UnratedContentBlocked":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
	QAResp_ErrorID = "ForbiddenUnratedContentBlocked";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:UnratedContentBlocked";
	break;
	
	case "PURCHASE_TIME_INVALID":
	log.info '--------------PITIME'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;;
	break;

	case "LICACQBASE_LOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;;
	break;

	case "SOLDAS_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	QAResp_ErrorID = "BadRequestRightsSoldAsUpdationNotAllowed"
	ValerrorID = 1;				
	Resp_errorLink  = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "RT_PP_DOWNLOAD/STREAM_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	QAResp_ErrorID = "BadRequestStandardDefinitionMissing"
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_INFO_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "SCHEMA_VALIDATION_ERROR":
	log.info 'schme-----------error'
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "RESOURCE_STATUS_ELEMENT_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:ResourceStatusElementNotAllowed";
	QAResp_ErrorID = "ForbiddenResourceStatusElementNotAllowed";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#ResourceStatusElementNotAllowed";
	break;
	
	case "DISCRETEMEDIA_RIGHTS_REMAINING_ELEMENT_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:DiscreteMediaRightsRemainingNotAllowed";
	QAResp_ErrorID = "BadRequestDiscreteMediaRightsRemainingNotAllowed";
	testCase.setPropertyValue("PPContentProfile",CallingTCase.getPropertyValue("PPContentProfile3"));
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#DiscreteMediaRightsRemainingNotAllowed";
	break;

	case "PURCHASE_PROFILE_HAS_DMR_ALREADY_CREATED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:PurchaseProfileHasDMRAlreadyCreated";
	QAResp_ErrorID = "BadRequestPurchaseProfileHasDMRAlreadyCreated";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#PurchaseProfileHasDMRAlreadyCreated";
	break;
	case "INVALID_TRANSACTION_TYPE":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:TransactionTypeIDNotValid";
	Resp_errorReason = "The transaction type is not valid.";
	Resp_errorLink   = "$Resp_errorHost/rest/$major/$minor/error/en/ErrorList.html#TransactionTypeIDNotValid";
	break;
	
	
 }


testCase.setPropertyValue("errorID",Resp_ErrorID.toString());
testCase.setPropertyValue("QAerrorID",QAResp_ErrorID.toString());
log.info "From ValidateRights ---" + Resp_ErrorID;

if(ValerrorID.toString() == '1') {
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + Resp_HTTPstatus[0];
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection[0];
//assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length
if (errorRespType.toString()== "SUCCESS"){
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
//assert Resp_HTTPcontentlength[0].toInteger() == 0; 
}
else 
{
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
//assert Resp_HTTPcontentlength[0].toInteger() > 0;
}

//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype[0];
log.info "expected " + expectHTTPcontenttype
assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
    if(Resp_ErrorID.toString() == 'urn:dece:errorid:org:dece:DiscreteMediaRightsRemainingNotAllowed'){
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason" +" - "+ testCase.getPropertyValue("PPContentProfile")+ "]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason +" - " + testCase.getPropertyValue("PPContentProfile");
	}
	 if(Resp_ErrorID.toString() == 'urn:dece:errorid:org:dece:PurchaseProfileHasDMRAlreadyCreated'){
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason" +" - "+ contentProfile + "]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason +" - " + contentProfile;
	}
	else{
	log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;
	}
// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	//assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="ValidateRightsTokenUpdate RESPONSE------" disabled="true" id="7202ed2e-30af-4bcb-8c88-170910fae069">
        <con:settings/>
        <con:config>
          <script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import dbUtils.dbNode;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("errorStatusCode",null);
testCase.setPropertyValue("errorReason",null);
testCase.setPropertyValue("errorID",null);
def ValerrorID;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));

testCase.setPropertyValue("ErrorDataVal",CallingTCase.getPropertyValue("ErrorDataVal"));
testCase.setPropertyValue("RightsResXml",CallingTCase.getPropertyValue("RightsResXml"));
testCase.setPropertyValue("expectErrTypeRTUpdate",CallingTCase.getPropertyValue("expectErrTypeRTUpdate"));
testCase.setPropertyValue("RTObjType",CallingTCase.getPropertyValue("RTObjType"));

myNode = new dbNode(log,testProject.getPropertyValue("targetSystem"));;
Nodeid = testCase.getPropertyValue("nodeid");
myNodeRole = myNode.nodeGetRole(Nodeid);
log.info myNodeRole;

def DeceUrl   = testProject.getPropertyValue("Provision_HostName");
def DecePort  = testProject.getPropertyValue("targetPort");
def ResponseXML = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").getPropertyValue("ResponseAsXml");
def RT_ResponseHeader = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenUpdate Request").getTestStepByName("RightTokenUpdateRequest PUT").httpRequest.response.getResponseHeaders();
def errorRespType = testCase.getPropertyValue("expectErrTypeRTUpdate");

def Resp_HTTPstatus = RT_ResponseHeader.getAt("#status#");
def Resp_HTTPconnection = RT_ResponseHeader.getAt("Connection");
def Resp_HTTPcontenttype = RT_ResponseHeader.getAt("Content-Type");
def Resp_HTTPcontentlength = RT_ResponseHeader.getAt("Content-Length");
def Res_RTObjType = testCase.getPropertyValue("RTObjType");

//log.info Resp_HTTPstatus;
//log.info Resp_HTTPconnection;
//log.info Resp_HTTPcontenttype;
//log.info Resp_HTTPcontentlength;

// Error Validation Flags &amp; Values

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean processXMLFlag  = true;
boolean Responsebodynull = false;

String Resp_ErrorID = "";
String Resp_errorReason = "";
String Resp_errorLink  = "";
String Resp_errorHost  = "";

//  Expected Http Response
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";


if (DeceUrl.length() == 0) {
	Resp_errorHost = "http://error.decellc.org";
} else {
	Resp_errorHost = testProject.getPropertyValue("Query_HostName");
}
this.log.info "errorRespType[$errorRespType]";


switch (errorRespType) {
	
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 200 OK";
		if ( myNodeRole == 'urn:dece:role:retailer'||'urn:dece:role:retailer:customersupport'&amp;&amp; Res_RTObjType == 'RightsTokenFull'){
               
               	log.info "Valid RightsToken Object-type Returned  for Node[$Nodeid] - NodeRole[$myNodeRole] : [$errorRespType]";
		}
              else {

              	 log.info " InValid RightsToken Object-type Returned for  Node[$Nodeid] - NodeRole[$myNodeRole]- $myNodeRole : [$errorRespType]";
              }		
		processXMLFlag = false;
	break;
	
	case "ACCOUNT_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "Account is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountNotActive";
	break;
	case "API_NOT_AUTH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	Resp_errorReason = "API call not authorized";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Security:RoleInvalid";
	break;
	
	case "CONTENT_NOT_FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentIDNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "ContentID is not found";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotFound";
	break;
	
	case "CONTENT_NOT_VALID":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:ContentIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDNotValid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "LOGICAL_ASSET_NOT_ACTIVE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID  = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	break;

	case "Node_status_inactive":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserIdUnmatched";
	
	break;
	
	case "USER_NOT_ACTIVE":
	Resp_ErrorID = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User is not active";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	
	break;
		
	case "ACCOUNTID NOT MATCH":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AccountIdUnmatched";
	//Resp_errorReason = "Request Account ID not match";
	ValerrorID  = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AccountIdUnmatched";
	
	break;
			
	case "ALID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotValid";
	ValerrorID  = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "AssetLogicalID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotValid";
	
	break;
	
	case "ALID NOT ACTIVE":
	//expectHTTPstatus = "HTTP/1.1 403 Forbidden";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:AssetLogicalIDNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "The AssetLogicalID (ALID) is not active.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotActive";
	
	break;
	
	case "ALID NOT FOUND":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:AssetLogicalIDNotFound";
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	ValerrorID = 1;
	//Resp_errorReason = "The supplied AssetLogicalID (ALID) was not found.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#AssetLogicalIDNotFound";
	
	break;

	case "BUNDLEID NOT VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "The identified bundle is invalid.";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotValid";
	
	break;
	case "BUNDLEID NOT FOUND":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:BundleIDNotFound";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 404 Not Found";
	//Resp_errorReason = "BundleID is not found";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotFound";
	
	break;
	
	case "INVALID_DISPLAY_LANGUAGE":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:DisplayNameLanguageNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "DisplayNameLanguage is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DisplayNameLanguageNotValid";
	
	break;

	case "INVALID_DM_REMAIN":
		expectHTTPstatus = "HTTP/1.1 400 Bad Request";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
		expectHTTPcontenttype = "application/xml"
	break;
	
	case "DMR_LIMIT_EXCEEDED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:DiscreteMediaLimitExceeded";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaLimitExceeded";
	break;
	
	case "CONTENTPROFILE_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:ContentProfileNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "ContentProfile is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentProfileNotValid";
	break;

	case "FULLFILLMENTLOC_NOT_VALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:FulfillmentLocNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "FulfillmentLoc is not valid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#FulfillmentLocNotValid";
	break;
	
	case "FULLFILLMENTLOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "STANDARD_DEF_MISSING":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:StandardDefinitionMissing";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "StandardDefinition is missing";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#StandardDefinitionMissing";
	break;

	case "PURCHASE_ACCOUNTID_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseAccountNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseAccount is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseAccountNotValid";
	break;
	case "PURCHASE_USERID_INVALID":
	//log.info "jitu";
	Resp_ErrorID     = "urn:dece:errorid:org:dece:PurchaseUserNotValid";
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseUser is not valid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseUserNotValid";
	break;
	case "PURCHASE_NODEID_INVALID":
	Resp_ErrorID    = "urn:dece:errorid:org:dece:PurchaseNodeIDNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "PurchaseNodeID is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#PurchaseNodeIDNotValid";
	break;
	
	case "PURCHASE_TIME_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "SCHEMA_VALIDATION_ERROR":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	case "LICACQBASE_LOC_INVALID":
	Resp_ErrorID     = "urn:dece:errorid:org:dece:LicenseAcqBaseLocNotValid";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LicenseAcqBaseLocNotValid";
	break;
	case "LICACQBASE_LOC_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "RT_PP_DOWNLOAD/STREAM_INVALID":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;
	
	case "BUNDLEID NOT ACTIVE":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:BundleIDNotActive";
	ValerrorID = 1;
	//expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	//Resp_errorReason = "LicenseAcqBaseLoc is not valid";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#BundleIDNotActive";

	case "RIGHTSTOKEN_NOT_FOUND":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenNotFound";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenNotFound";
	break;

	case "RIGHTSTOKEN_INVALID":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenIDNotValid";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenIDNotValid";
	
	break;
	
	case "RT_UPDATE_NOT_ALLOWED":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:RightsTokenStatusChangeNotAllowed";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsTokenStatusChangeNotAllowed";
	break;

	case "USER_NOT_ACTIVE":
	Resp_ErrorID  = "urn:dece:errorid:org:dece:UserNotActive";
	ValerrorID = 1;
	//Resp_errorReason = "User ID does not match security token";
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#UserNotActive";
	break;

	case "PURCHASE_INFO_MISSING":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	expectHTTPcontenttype = "application/xml"
	processXMLFlag  = false;
	errorIDFlag     = false;
	errorReasonFlag = false;
	errorLinkFlag   = false;
	break;

	case "FULLFILLMENT_METHOD_INVALID":
	Resp_ErrorID = "urn:dece:errorid:org:dece:DiscreteMediaFulfillmentMethodNotValid";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#DiscreteMediaFulfillmentMethodNotValid";
	break;


	case "ALID_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:LogicalIDUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#LogicalIDUpdationNotAllowed";
	break;

	case "CONTENTID_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:ContentIDUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#ContentIDUpdationNotAllowed";
	break;

	case "SOLDAS_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "SOLDAS_DISPLAY_LANG_UPDATE_NOTALLOWED":
	Resp_ErrorID = "urn:dece:errorid:org:dece:RightsSoldAsUpdationNotAllowed";
	ValerrorID = 1;
	Resp_errorLink  = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#RightsSoldAsUpdationNotAllowed";
	break;

	case "AdultContentNotAllowed":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:AdultContentNotAllowed";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:AdultContentNotAllowed";
	break;

	case "RatingPolicyExists":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:RatingPolicyExists";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:RatingPolicyExists";
	break;

	case "UnratedContentBlocked":
	Resp_ErrorID   = "urn:dece:errorid:org:dece:Policy:UnratedContentBlocked";
	ValerrorID = 1;
	Resp_errorLink   = "$Resp_errorHost/rest/1/0/error/en/ErrorList.html#Policy:UnratedContentBlocked";
	break;

 }

testCase.setPropertyValue("errorID",Resp_ErrorID.toString());
testCase.setPropertyValue("QAerrorID",QAResp_ErrorID.toString());
log.info "From ValidateRights ---" + Resp_ErrorID;

if(ValerrorID.toString() == '1') {
def RTErrors = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsError Validation");

RTErrors.setPropertyValue("TCaseName",testCase.getName());
RTErrors.setPropertyValue("TSuiteName",testSuite.getName());

WsdlTestCaseRunner TSrunnerRTC = new WsdlTestCaseRunner( RTErrors, null );

TSrunnerRTC.runTestStepByName("Validate Rights Errors");

assert TSrunnerRTC.status == Status.INITIALIZED;

Resp_errorReason = testCase.getPropertyValue("errorReason");
expectHTTPstatus = testCase.getPropertyValue("errorStatusCode");

log.info Resp_errorReason.toString();
}

// HTTP header status

this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + Resp_HTTPstatus[0];
assert Resp_HTTPstatus[0] == expectHTTPstatus;

// Connection
this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + Resp_HTTPconnection[0];
assert Resp_HTTPconnection[0] == expectHTTPconnection;

//Content-Length
if (errorRespType.toString()== "SUCCESS"){
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() == 0; 
}
else 
{
log.info "Content-Length:"+ Resp_HTTPcontentlength[0];
assert Resp_HTTPcontentlength[0].toInteger() > 0;
}

//Content-Type

log.info "Content-Type:" + Resp_HTTPcontenttype[0];
assert Resp_HTTPcontenttype[0] == expectHTTPcontenttype;

//XML body should be null test
if (Responsebodynull) {
assert ResponseXML == null;
}

//this.log.info "ResponseXML Length [" + ResponseXML.length() + "] processXMLFlag[$processXMLFlag]";

if (ResponseXML != null &amp;&amp; processXMLFlag == true) {
	
	def Resp_XML = new XmlSlurper().parseText(ResponseXML);

// Verify response sizes...
	
     ErrorDataVal = testCase.getPropertyValue("ErrorDataVal");

	assert Resp_XML.Error.size() == ErrorDataVal.toInteger();
	assert Resp_XML.Error.Reason.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.OriginalRequest.size() ==  ErrorDataVal.toInteger();
	assert Resp_XML.Error.ErrorLink.size() ==  ErrorDataVal.toInteger();
		
// ErrorCode
	log.info "Received ErrorID [" + Resp_XML.Error[0].@ErrorID.toString() + "] Exp[$Resp_ErrorID]";
	assert Resp_XML.Error[0].@ErrorID.toString() == Resp_ErrorID;
	
// ErrorReason
      log.info "ErrorReason Received [" + Resp_XML.Error[0].Reason.toString() + "] Exp[$Resp_errorReason]";
	assert Resp_XML.Error[0].Reason.toString() == Resp_errorReason;

// ErrorLink
	log.info "ErrorLink [" + Resp_XML.Error[0].ErrorLink.toString() + "] errorLink[$Resp_errorLink]";
	assert Resp_XML.Error[0].ErrorLink.toString() == Resp_errorLink;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        
        
        
        
        
        
        <con:property><con:name>Accountid</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property>
        
        <con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>errorID</con:name><con:value/></con:property><con:property><con:name>errorReason</con:name><con:value>The media profile is not valid.</con:value></con:property><con:property><con:name>errorStatusCode</con:name><con:value>HTTP/1.1 400 Bad Request</con:value></con:property>
        
        
        <con:property><con:name>expectErrTypeRTGet</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypeRTUpdate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PPContentProfile</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>QAerrorID</con:name><con:value>null</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
      <con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:081E358F3A23188CE05307991F0A857D</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdateWithoutAccountId_RTL_TestCases</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rights UPDATEWithoutAccId  Data Validation" searchProperties="true" id="40a20a46-1137-4ee1-af34-29595558dfd8">
      <con:settings/>
      <con:testStep type="groovy" name="Extract DB results for RightsToken UPDATE" id="24ee7aa8-f2d4-491b-82ff-6d70f9f0ef33">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

mydbRights = new dbRightsToken(log,testProject.getPropertyValue("targetSystem"));;

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);
testCase.setPropertyValue("RightsReqXml",CallingTCase.getPropertyValue("RightsReqXml"));

//getRequestContentAsXml

testCase.setPropertyValue("rightstokenid",CallingTCase.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("DBrightstokenid",CallingTCase.getPropertyValue("DBrightstokenid"));
testCase.setPropertyValue("Accountid",CallingTCase.getPropertyValue("Accountid"));
testCase.setPropertyValue("RTC_rcStatusHistory",CallingTCase.getPropertyValue("RTC_rcStatusHistory"));


// Fetch RightsToken info from RIGHTS_TOKEN table

RT_Data = mydbRights.rightstokenGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data2 = mydbRights.rightstokenSoldAsGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data3 = mydbRights.rightstokenPMPPGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data4 = mydbRights.rightstokenFFLocGetRow(testCase.getPropertyValue("DBrightstokenid"));
RT_Data5 = mydbRights.rightstokenStatusHistoryGetRow(testCase.getPropertyValue("DBrightstokenid"));

testCase.setPropertyValue("DbResultRTXml",RT_Data.toString());
testCase.setPropertyValue("DbResultRT-SoldAsXml",RT_Data2.toString());
testCase.setPropertyValue("DbResultRT-PMPPXml",RT_Data3.toString());
testCase.setPropertyValue("DbResultRT-FFLocXml",RT_Data4.toString());
testCase.setPropertyValue("DbResultRT-StatusHistoryXml",RT_Data5.toString());</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Data Validation DB - RightsTokenUPDATE Request" id="1f159646-ada2-4652-8d5d-97be9e2414d4">
        <con:settings/>
        <con:config><script>import dbUtils.dbRightsToken;
import dbUtils.dbUtils;
import dbUtils.dbSAMLAssertion;
import groovy.*
import groovy.xml.*
import groovy.util.*
import groovy.time.*
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.impl.wsdl.teststeps.WsdlResponseMessageExchange

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

// Assert RightsToken Information Expected &amp; Actual 

def actRTC_PPContentProfile  = new ArrayList();
def actRTC_PPDMR  = new ArrayList();
def actRTC_PPCanDownload  = new ArrayList();
def actRTC_PPCanStream  = new ArrayList();
def actRTC_PPDMProfile  = new ArrayList();
def actRTC_LicAcqBaseLoc = new ArrayList();
def actRTC_FFWebLoc_Location = new ArrayList();
def actRTC_FFWebLoc_Pref = new ArrayList();
def actRTC_StreamWeb_Location = new ArrayList();
def actRTC_StreamWeb_Pref = new ArrayList();
def actRTC_FFManifestLoc_Location = new ArrayList();
def actRTC_FFManifestLoc_Pref = new ArrayList();
def expectRTC_PPContentProfile  = new ArrayList();
def expectRTC_PPDMR  = new ArrayList();
def expectRTC_PPCanDownload  = new ArrayList();
def expectRTC_PPCanStream  = new ArrayList();
def expectRTC_PPDMProfile  = new ArrayList();
def expectRTC_LicAcqBaseLoc = new ArrayList();
def expectRTC_StreamWeb_Location = new ArrayList();
def expectRTC_StreamWeb_Pref = new ArrayList();
def expectRTC_FFWebLoc_Location = new ArrayList();
def expectRTC_FFWebLoc_Pref = new ArrayList();
def expectRTC_FFManifestLoc_Location = new ArrayList();
def expectRTC_FFManifestLoc_Pref = new ArrayList();

// RightsToken Update Request Information 

def Val_RightsReqXml =  new XmlSlurper().parseText(testCase.getPropertyValue("RightsReqXml"));

		expectRTC_AccountID = testCase.getPropertyValue("Accountid");
		expectRTC_ALID = Val_RightsReqXml.@ALID.toString();
		expectRTC_ContentID = Val_RightsReqXml.@ContentID.toString();
		expectRTC_SoldAsLang = Val_RightsReqXml.SoldAs.DisplayName.@Language.toString();
		expectRTC_DisplayName = Val_RightsReqXml.SoldAs.DisplayName;
		expectRTC_SoldAsContentID = Val_RightsReqXml.SoldAs.ContentID;
		expectRTC_SoldAsBUNDLE_ID = Val_RightsReqXml.SoldAs.BundleID;

		log.info expectRTC_ALID;
		log.info expectRTC_ContentID;
		
		log.info "expectRTC_SoldAsContentID"+expectRTC_SoldAsContentID;
		if (expectRTC_SoldAsContentID=="")
			expectRTC_SoldAsContentID=null;
		


// Rights Purchase Media Purchase Profiles
		expPMPPSize = Val_RightsReqXml.RightsProfiles.PurchaseProfile.size();
		log.info "expPMPPSize-"+expPMPPSize;
		if (expPMPPSize!=0)
		{
		for ( i in 0..expPMPPSize-1 ){
	
			expectRTC_PPContentProfile +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.@MediaProfile[i]).toString();
			//expectRTC_PPDMR +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining[i]).toString();
			expectRTC_PPDMProfile +=(Val_RightsReqXml.RightsProfiles.PurchaseProfile.DiscreteMediaRightsRemaining.@FulfillmentMethod[i]).toString();
			if ((Val_RightsReqXml.RightsProfiles.PurchaseProfile.CanDownload[i]).toString() == 'true'){
			expectRTC_PPCanDownload += 'Y';
			}
			else{
			expectRTC_PPCanDownload += 'N';
			}
			
			if ((Val_RightsReqXml.RightsProfiles.PurchaseProfile.CanStream[i]).toString()== 'true'){
			expectRTC_PPCanStream += 'Y';
			}
			else{
			expectRTC_PPCanStream += 'N';
			}
		}

		}
// Expected Rights Status 

	/*	expectRTC_RS_CreatedBy = (Val_RightsReqXml.ResourceStatus.Current.@CreatedBy).toString();
		CreationDate = (Val_RightsReqXml.ResourceStatus.Current.@CreationDate).toString();
		RS_CreationDate = (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((CreationDate.tokenize('Z'))[0]).tokenize('T'))[1];
		log.info RS_CreationDate;
		expectRTC_RS_CreationDate = new Date().par se("yyyy-MM-dd hh:mm:ss.SSS",RS_CreationDate.toString());
		log.info expectRTC_RS_CreationDate;
		expectRTC_RS_Value = (Val_RightsReqXml.ResourceStatus.Current.Value).toString();
*/


//  Expected Rights Licence Acq Base Location

 		expLicAcqSize = Val_RightsReqXml.LicenseAcqBaseLoc.size();
 	
 		for ( i in 0..expLicAcqSize-1 ){
		
			expectRTC_LicAcqBaseLoc += Val_RightsReqXml.LicenseAcqBaseLoc[i];
		}

// Expected Rights Fullfillment WebLoc

	expFFWeblocSize = Val_RightsReqXml.FulfillmentWebLoc.size();

		if(expFFWeblocSize!=0){	
		for ( int i in 0..expFFWeblocSize-1 ){
	
		//expectRTC_FFWebLoc_Location += (Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString();
		//expectRTC_FFWebLoc_Pref += (Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString();

		//if(i>0&amp;&amp;((Val_RightsReqXml.FulfillmentWebLoc.Location[0]).toString()==(Val_RightsReqXml.FulfillmentWebLoc.Location[1]).toString()))
	//	{
	//	continue;
		//expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
	//	} else {
			//expectRTC_FFWebLoc_Location.put((Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString(),(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
			expectRTC_FFWebLoc_Location.add((Val_RightsReqXml.FulfillmentWebLoc.Location[i]).toString())//,(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
			expectRTC_FFWebLoc_Pref += (Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString();
	//		}
			
		}
		}

		expStreamWeblocSize = Val_RightsReqXml.StreamWebLoc.size();

		if(expStreamWeblocSize!=0){	
			for ( int i in 0..expStreamWeblocSize-1 ){

				expectRTC_StreamWeb_Location.add((Val_RightsReqXml.StreamWebLoc.Location[i]).toString())//,(Val_RightsReqXml.FulfillmentWebLoc.Preference[i]).toString());	
				expectRTC_StreamWeb_Pref += (Val_RightsReqXml.StreamWebLoc.Preference[i]).toString();
			}
			
		}


// Expected Rights Fullfillment ManifestLoc

	expFFManifestSize = Val_RightsReqXml.FulfillmentManifestLoc.size();
	
		
		for ( int i in 0..expFFManifestSize-1 ){

		//if(i>0&amp;&amp;((Val_RightsReqXml.FulfillmentManifestLoc.Location[0]).toString()==(Val_RightsReqXml.FulfillmentManifestLoc.Location[1]).toString()))
		//{
		//continue;
		//expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
		//} else {
			//expectRTC_FFManifestLoc_Location.put((Val_RightsReqXml.FulfillmentManifestLoc.Location[i]).toString(),Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();	
			expectRTC_FFManifestLoc_Location.add((Val_RightsReqXml.FulfillmentManifestLoc.Location[i]).toString())//,Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();	
			expectRTC_FFManifestLoc_Pref += (Val_RightsReqXml.FulfillmentManifestLoc.Preference[i]).toString();
			//}
		}

		//if(expectRTC_FFManifestLoc_Location[0]==expectRTC_FFManifestLoc_Location[1]){
		//	expectRTC_FFManifestLoc_Location.remove(expectRTC_FFManifestLoc_Location[1]);
		//	expectRTC_FFManifestLoc_Pref.remove(expectRTC_FFManifestLoc_Pref[1]);
			
		//	}

// Expected Rights Purchase Info
		expectRTC_PI_NodeID = (Val_RightsReqXml.PurchaseInfo.NodeID).toString();
		expectRTC_PI_RetailerTrax = (Val_RightsReqXml.PurchaseInfo.RetailerTransaction).toString();
		expectRTC_PI_PurcaseAccount = (Val_RightsReqXml.PurchaseInfo.PurchaseAccount).toString();
		expectRTC_PI_PurchaseUser = (Val_RightsReqXml.PurchaseInfo.PurchaseUser).toString();
		PurchaseTime = (Val_RightsReqXml.PurchaseInfo.PurchaseTime).toString();
		expectRTC_PI_PurchaseTime	= (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[0] + " " + (((PurchaseTime.tokenize('Z'))[0]).tokenize('T'))[1];	
		expectRTC_PI_TransactionType = (Val_RightsReqXml.PurchaseInfo.TransactionType).toString();

// Expected Rights Status History 

		log.info " Expected Rights Status History Row Count for new RTC  ;" + testCase.getPropertyValue("RTC_rcStatusHistory");
		log.info "expectRTC_PI_RetailerTrax--"+expectRTC_PI_RetailerTrax;
		if (expectRTC_PI_RetailerTrax=="")
			expectRTC_PI_RetailerTrax=null;
		log.info "expectRTC_PI_RetailerTrax--"+expectRTC_PI_RetailerTrax;


// DB Rights Token Information 

def Val_DbResultRTXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRTXml"));
log.info 'Val_DbResultRTXml----->'+Val_DbResultRTXml;
def Val_DbResultRTSoldAsXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-SoldAsXml"));
def Val_DbResultRTPMPPXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-PMPPXml"));
def Val_DbResultFFLocXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-FFLocXml"));
def Val_DbResultRTSHXml = new XmlSlurper().parseText(testCase.getPropertyValue("DbResultRT-StatusHistoryXml"));

def PMPPSize =  Val_DbResultRTPMPPXml.ResultSet.Row.size();
def LicAcqSize = Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC.size();
//def FFWebLocSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.size();
//def FFManifestSize = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.size();

def rcFFWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Web'}.@rowNumber.collect{ it.text() }
def rcFFManifest = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'Manifest'}.@rowNumber.collect{ it.text() }
def rcStreamWebloc = Val_DbResultFFLocXml.ResultSet.Row.findAll{ it.TYPE == 'StreamWeb'}.@rowNumber.collect{ it.text() }
def rcFFWeblocSize = rcFFWebloc.size();
def rcFFManifestSize = rcFFManifest.size();
def rcStreamWeblocSize = rcStreamWebloc.size();



		// Rights Token 
		actRTC_Accountid =  "urn:dece:accountid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID;
		actRTC_Lockerid = "urn:dece:rightslockerid:org:dece:" + Val_DbResultRTXml.ResultSet.Row.RIGHTS_LOCKER_OID;
		actRTC_RightsTokenID = testCase.getPropertyValue("rightstokenid");
		actRTC_ALID = Val_DbResultRTXml.ResultSet.Row.ALID;
		actRTC_ContentID = Val_DbResultRTXml.ResultSet.Row.CONTENT_ID;

		// Rights SoldAs 
		
		actRTC_SoldAs_Lang = (Val_DbResultRTSoldAsXml.ResultSet.Row.LANGUAGE_ID).toString();
		actRTC_SoldAs_PRODUCT_ID = (Val_DbResultRTSoldAsXml.ResultSet.Row.PRODUCT_ID).toString();
		actRTC_SoldAs_DisplayName = (Val_DbResultRTSoldAsXml.ResultSet.Row.DISPLAY_NAME).toString();
		actRTC_SoldAs_ContentID = (Val_DbResultRTSoldAsXml.ResultSet.Row.CONTENT_ID).toString();
		actRTC_SoldAs_BUNDLE_ID = (Val_DbResultRTSoldAsXml.ResultSet.Row.BUNDLE_ID).toString();

		
		
		// Rights Purchase Media Purchase Profiles
		log.info "PMPPSize=="+PMPPSize;

		if (PMPPSize !=0)
		{
		for ( i in 0..PMPPSize-1 ){
	
		actRTC_PPContentProfile += ("urn:dece:type:mediaprofile:" + Val_DbResultRTPMPPXml.ResultSet.Row.PURCHASED_CONTENT_PROFILE[i]).toString();
		//actRTC_PPDMR += (Val_DbResultRTPMPPXml.ResultSet.Row.DISCRETE_MEDIA_RIGHTS_REMAIN[i]).toString();
		actRTC_PPCanDownload += (Val_DbResultRTPMPPXml.ResultSet.Row.DOWNLOAD[i]).toString();
		actRTC_PPCanStream += (Val_DbResultRTPMPPXml.ResultSet.Row.STREAM[i]).toString();
		
		}
		}
		// Rights Status 
		log.info '----->'+Val_DbResultRTXml
		actRTC_RS_CreatedBy = "urn:dece:org:org:dece:"+ Val_DbResultRTXml.ResultSet.Row.CREATED_BY;
		CreationDate = Val_DbResultRTXml.ResultSet.Row.CREATED_DATE;
		actRTC_RS_CreationDate =  new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",CreationDate.toString())
		actRTC_RS_Value = "urn:dece:type:status:"+ Val_DbResultRTXml.ResultSet.Row.STATUS_ID;

		// Rights Licence Acq Base Location
		
		for ( i in 0..LicAcqSize-1 ){
		
		actRTC_LicAcqBaseLoc += (Val_DbResultRTXml.ResultSet.Row.LICENSE_ACQ_BASE_LOC[i]).toString();
		}
		
		if(actRTC_LicAcqBaseLoc[0]=="null"){
		 actRTC_LicAcqBaseLoc[0]="";
			}

		// Rights Fullfillment WebLocation

		if(rcFFWeblocSize!=0){
		for ( int i in 0..rcFFWeblocSize-1 ){
		
		int j = rcFFWebloc[i].toInteger();
		//actRTC_FFWebLoc_Location.put((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString(),(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
		actRTC_FFWebLoc_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
		actRTC_FFWebLoc_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
		}
		}

		if(rcStreamWeblocSize!=0){
			for ( int i in 0..rcStreamWeblocSize-1 ){
				int j = rcStreamWebloc[i].toInteger();
				actRTC_StreamWeb_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());
				actRTC_StreamWeb_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
			}
			
			}

		// Rights Fullfillment Manifest Location

		if(rcFFManifestSize!=0){
		for ( int i in 0..rcFFManifestSize-1 ){

		int j = rcFFManifest[i].toInteger();
		//actRTC_FFManifestLoc_Location.put((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString(),(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());	
		actRTC_FFManifestLoc_Location.add((Val_DbResultFFLocXml.ResultSet.Row.LOCATION[j-1]).toString())//,(Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString());	
		actRTC_FFManifestLoc_Pref += (Val_DbResultFFLocXml.ResultSet.Row.PREFERENCE_ORDER[j-1]).toString();
		}
		}

		// Rights Purchase Infomation
				
		actRTC_PI_NodeID = "urn:dece:org:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.NODE_OID).toString();
		actRTC_PI_RetailerTrax = (Val_DbResultRTXml.ResultSet.Row.RETAILER_TRANSACTION).toString();
		actRTC_PI_PurcaseAccount = "urn:dece:accountid:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_ACCOUNT_OID).toString();
		actRTC_PI_PurchaseUser = "urn:dece:userid:org:dece:"+ (Val_DbResultRTXml.ResultSet.Row.PURCHASE_NODE_USER_OID).toString();
		actRTC_PI_PurchaseTime = Val_DbResultRTXml.ResultSet.Row.PURCHASE_TIME;
		log.info '------------>'+(Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString()
		def actRTC_PI_TransactionType;
		if(!(Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString().equalsIgnoreCase('null'))
		{	
			//actRTC_PI_TransactionType = "urn:dece:type:transaction:"+ (Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString();
			actRTC_PI_TransactionType = (Val_DbResultRTXml.ResultSet.Row.TRANSACTION_TYPE).toString();
		} 
		else {
				actRTC_PI_TransactionType = "";
			}
		

		// Rights Status History


// Assert RightsToken Information DB and RightsTokenGet Response.

// Assert RightsToken Account ID 

		log.info "Rights TokenUpdate Accountid Expected : [$expectRTC_AccountID] - Actual Recieved: [$actRTC_Accountid]";
 		assert expectRTC_AccountID == actRTC_Accountid ;

// Assert RightsToken LockerId

		log.info "Rights TokenUpdate  Assigned Lockerid Recieved: [$actRTC_Lockerid]";
		 //assert expectRTC_RightsLockerID == actRTC_Lockerid;

// Assert RightsToken id 

		log.info " New Rights TokenUpdate Tokenid Recieved: [$actRTC_RightsTokenID]";
		

// Assert RightsToken ALID 

		log.info "Rights TokenUpdate Alid Expected : [$expectRTC_ALID] - Actual Recieved: [$actRTC_ALID]";
 		assert expectRTC_ALID.toString() == actRTC_ALID.toString();

// Assert RightsToken ContentID 

		log.info "Rights TokenUpdate ContentID Expected : [$expectRTC_ContentID] - Actual Recieved: [$actRTC_ContentID]"; 
 		assert expectRTC_ContentID.toString() == actRTC_ContentID.toString();

// Assert RightsToken SoldAS Language

		log.info "Rights TokenUpdate SoldAs Language Expected : [$expectRTC_SoldAsLang] - Actual Recieved: [$actRTC_SoldAs_Lang]";
		assert expectRTC_SoldAsLang == actRTC_SoldAs_Lang;

// Assert RightsToken SoldAS DisplayName

		log.info "Rights TokenUpdate SoldAs DisplayName Expected : [$expectRTC_DisplayName] - Actual Recieved:[$actRTC_SoldAs_DisplayName]";
 		assert expectRTC_DisplayName == actRTC_SoldAs_DisplayName;

		if (expectRTC_SoldAsContentID){
		// Assert RightsToken SoldAs ContentID		
		log.info "Rights TokenUpdate SoldAs ContentID Expected : [$expectRTC_SoldAsContentID] - Actual Recieved:[$actRTC_SoldAs_ContentID]";
 		assert expectRTC_SoldAsContentID == actRTC_SoldAs_ContentID;
		}
		else{
		// Assert RightsToken SoldAs BUNDLE_ID	
		log.info "Rights TokenUpdate SoldAs BUNDLE_ID Expected : [$expectRTC_SoldAsBUNDLE_ID] - Actual Recieved:[$actRTC_SoldAs_BUNDLE_ID]";
		assert expectRTC_SoldAsBUNDLE_ID == actRTC_SoldAs_BUNDLE_ID;
		}
// Assert RightsToken Purchase Profile

		//RightsToken Purchase Profile- ContentProfile.
		log.info "Rights TokenUpdate Purchase ContentProfile Expected : $expectRTC_PPContentProfile - Actual Recieved:$actRTC_PPContentProfile";
		//assert expectRTC_PPContentProfile.sort() == actRTC_PPContentProfile.sort();
	
		//RightsToken Purchase Profile- DiscreteMediaRightsRemaining.
		//log.info "Rights TokenUpdate Purchase DiscreteMediaRightsRemaining Expected : $expectRTC_PPDMR - Actual Recieved:$actRTC_PPDMR";
		//assert expectRTC_PPDMR == actRTC_PPDMR;
	
		//RightsToken Purchase Profile- CanDownload
		log.info "Rights TokenUpdate Purchase CanDownload Expected : $expectRTC_PPCanDownload - Actual Recieved:$actRTC_PPCanDownload";
		//assert expectRTC_PPCanDownload == actRTC_PPCanDownload;
		
		//RightsToken Purchase Profile- CanStream
		log.info "Rights TokenUpdate Purchase CanStream Expected : $expectRTC_PPCanStream - Actual Recieved:$actRTC_PPCanStream";
		//assert expectRTC_PPCanStream == actRTC_PPCanStream;
	
// Assert Rights ResourceStatus 
	/*
		log.info "Rights TokenUpdate ResourceStatus CreatedBy Expected : [$expectRTC_RS_CreatedBy] - Actual Recieved: [$actRTC_RS_CreatedBy]";
		assert expectRTC_RS_CreatedBy == actRTC_RS_CreatedBy;
		
		log.info "Rights TokenUpdate ResourceStatus CreationDate Expected : [$expectRTC_RS_CreationDate] - Actual Recieved: [$actRTC_RS_CreationDate]";
		//assert expectRTC_RS_CreationDate == actRTC_RS_CreationDate; //  No Validation on  RS Creation Date 

		log.info "Rights TokenUpdate ResourceStatus Value Expected : [$expectRTC_RS_Value] - Actual Recieved: [$actRTC_RS_Value]";
		assert expectRTC_RS_Value ==  actRTC_RS_Value;
	*/
		
//  Assert Rights Licence Acq Base Location

		log.info "Rights TokenUpdate LicenceAcqBase Location Expected : [$expectRTC_LicAcqBaseLoc] - Actual Recieved: [$actRTC_LicAcqBaseLoc]";
		assert expectRTC_LicAcqBaseLoc == actRTC_LicAcqBaseLoc;

//  Assert Rights Fulfillment WebLoc

		//Assert FF Web location 
		log.info "Rights TokenUpdate FF Web location Expected : [$expectRTC_FFWebLoc_Location] - Actual Recieved: [$actRTC_FFWebLoc_Location]";
		assert expectRTC_FFWebLoc_Location == actRTC_FFWebLoc_Location;

	    // Assert Web FF preference

	    log.info "Rights TokenUpdate Web FF preference Expected : [$expectRTC_FFWebLoc_Pref] - Actual Recieved: [$actRTC_FFWebLoc_Pref]";
		assert expectRTC_FFWebLoc_Pref == actRTC_FFWebLoc_Pref;

		log.info "Rights TokenUpdate Stream Web location Expected : [$expectRTC_StreamWeb_Location] - Actual Recieved: [$actRTC_StreamWeb_Location]";
		assert expectRTC_StreamWeb_Location == actRTC_StreamWeb_Location;


		log.info "Rights TokenUpdate Stream Web preference Expected : [$expectRTC_StreamWeb_Pref] - Actual Recieved: [$actRTC_StreamWeb_Pref]";
		assert expectRTC_StreamWeb_Pref == actRTC_StreamWeb_Pref;

//  Assert Rights Fulfillment Manifest Location

		//Assert FF Manifest location 
		log.info "Rights TokenUpdate FF Manifest location Expected : [$expectRTC_FFManifestLoc_Location] - Actual Recieved: [$actRTC_FFManifestLoc_Location]";
		if(rcFFManifestSize==0){
			assert actRTC_FFManifestLoc_Location.size() == 0;
			
			} else {
		assert expectRTC_FFManifestLoc_Location == actRTC_FFManifestLoc_Location;
			}

	    // Assert FF Manifest  preference

	    log.info "Rights TokenUpdate FF Manifest  preference Expected : [$expectRTC_FFManifestLoc_Pref] - Actual Recieved: [$actRTC_FFManifestLoc_Pref]";
	    if(rcFFManifestSize==0){
			assert actRTC_FFManifestLoc_Pref.size() == 0;
			
			} else {
		assert expectRTC_FFManifestLoc_Pref == actRTC_FFManifestLoc_Pref ;
			}


//  Assert Rights PurchaseInfo Location

		log.info "Rights TokenUpdate PurchaseInfo  NodeID Expected : [$expectRTC_PI_NodeID] - Actual Recieved: [$actRTC_PI_NodeID]";
		//assert expectRTC_PI_NodeID == actRTC_PI_NodeID;

		log.info "Rights TokenUpdate PurchaseInfo  RetailerTrax Expected : [$expectRTC_PI_RetailerTrax] - Actual Recieved: [$actRTC_PI_RetailerTrax]";
		//assert expectRTC_PI_RetailerTrax.toString() == actRTC_PI_RetailerTrax.toString();

		log.info "Rights TokenUpdate PurchaseInfo  PurcaseAccount Expected : [$expectRTC_PI_PurcaseAccount] - Actual Recieved: [$actRTC_PI_PurcaseAccount]";
		assert expectRTC_PI_PurcaseAccount == actRTC_PI_PurcaseAccount;
		
		log.info "Rights TokenUpdate PurchaseInfo  PurchaseUser Expected : [$expectRTC_PI_PurchaseUser] - Actual Recieved: [$actRTC_PI_PurchaseUser]";
		assert expectRTC_PI_PurchaseUser == actRTC_PI_PurchaseUser;

		log.info "Rights TokenUpdate PurchaseInfo  PurchaseTime Expected : [$expectRTC_PI_PurchaseTime] - Actual Recieved: [$actRTC_PI_PurchaseTime]";
		def actPurchaseTime = new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",actRTC_PI_PurchaseTime.toString());
		def expectPurchaseTime = new Date().parse("yyyy-MM-dd hh:mm:ss.SSS",expectRTC_PI_PurchaseTime.toString());

		log.info "Expected Purchase time :" + expectPurchaseTime.getTime() + " ms || Actual PurchaseTime :" + actPurchaseTime.getTime() + " ms";
		assert expectPurchaseTime.getTime() == actPurchaseTime.getTime();

		log.info "Rights TokenUpdate PurchaseInfo  TransactionType Expected : [$expectRTC_PI_TransactionType] - Actual Recieved: [$actRTC_PI_TransactionType]";
		//assert expectRTC_PI_TransactionType == actRTC_PI_TransactionType;</script></con:config>
      </con:testStep>
      <con:properties>
        
        
        
        <con:property><con:name>Accountid</con:name><con:value>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</con:value></con:property>
        
        
        
        <con:property><con:name>DbResultRT-FFLocXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <FULFILLMENT_LOC_OID>[8, 30, 53, -42, 102, -28, 15, 90, -32, 83, 7, -103, 31, 10, -2, 16]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[8, 30, 53, -113, 58, 35, 24, -116, -32, 83, 7, -103, 31, 10, -123, 125]</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ccc</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2014-11-18 07:40:33.849</CREATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <FULFILLMENT_LOC_OID>[8, 30, 53, -42, 102, -29, 15, 90, -32, 83, 7, -103, 31, 10, -2, 16]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[8, 30, 53, -113, 58, 35, 24, -116, -32, 83, 7, -103, 31, 10, -123, 125]</RIGHTS_TOKEN_OID>
      <TYPE>Manifest</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/ddd</LOCATION>
      <PREFERENCE_ORDER>1</PREFERENCE_ORDER>
      <CREATED_DATE>2014-11-18 07:40:33.849</CREATED_DATE>
    </Row>
    <Row rowNumber='3'>
      <FULFILLMENT_LOC_OID>[8, 30, 53, -42, 102, -30, 15, 90, -32, 83, 7, -103, 31, 10, -2, 16]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[8, 30, 53, -113, 58, 35, 24, -116, -32, 83, 7, -103, 31, 10, -123, 125]</RIGHTS_TOKEN_OID>
      <TYPE>StreamWeb</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/streaminglink</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2014-11-18 07:40:33.849</CREATED_DATE>
    </Row>
    <Row rowNumber='4'>
      <FULFILLMENT_LOC_OID>[8, 30, 53, -42, 102, -27, 15, 90, -32, 83, 7, -103, 31, 10, -2, 16]</FULFILLMENT_LOC_OID>
      <RIGHTS_TOKEN_OID>[8, 30, 53, -113, 58, 35, 24, -116, -32, 83, 7, -103, 31, 10, -123, 125]</RIGHTS_TOKEN_OID>
      <TYPE>StreamWeb</TYPE>
      <LOCATION>https://dl.bestbuy.com/p/streaminglink</LOCATION>
      <PREFERENCE_ORDER>3</PREFERENCE_ORDER>
      <CREATED_DATE>2014-11-18 07:40:33.849</CREATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-PMPPXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <PURCHASE_PROFILE_OID>081E358F3A2A188CE05307991F0A857D</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>081E358F3A23188CE05307991F0A857D</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>sd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2014-11-18 07:40:29.037</CREATED_DATE>
      <UPDATED_DATE>2014-11-18 07:40:33.868</UPDATED_DATE>
    </Row>
    <Row rowNumber='2'>
      <PURCHASE_PROFILE_OID>081E35D666E00F5AE05307991F0AFE10</PURCHASE_PROFILE_OID>
      <RIGHTS_TOKEN_OID>081E358F3A23188CE05307991F0A857D</RIGHTS_TOKEN_OID>
      <DOWNLOAD>Y</DOWNLOAD>
      <STREAM>Y</STREAM>
      <DISCRETE_MEDIA_RIGHTS_REMAIN>null</DISCRETE_MEDIA_RIGHTS_REMAIN>
      <PURCHASED_CONTENT_PROFILE>hd</PURCHASED_CONTENT_PROFILE>
      <CREATED_DATE>2014-11-18 07:40:33.849</CREATED_DATE>
      <UPDATED_DATE>null</UPDATED_DATE>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-SoldAsXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_SOLD_AS_OID>081E35D666E10F5AE05307991F0AFE10</RIGHTS_SOLD_AS_OID>
      <RIGHTS_TOKEN_OID>081E358F3A23188CE05307991F0A857D</RIGHTS_TOKEN_OID>
      <DISPLAY_NAME>Avatar BestBuy Special Packaging</DISPLAY_NAME>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <PRODUCT_ID>null</PRODUCT_ID>
      <CREATED_DATE>2014-11-18 07:40:33.849</CREATED_DATE>
      <LANGUAGE_ID>en</LANGUAGE_ID>
      <BUNDLE_ID>null</BUNDLE_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property><con:property><con:name>DbResultRT-StatusHistoryXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_STATUS_HISTORY_OID>081E358F3A2C188CE05307991F0A857D</RIGHTS_STATUS_HISTORY_OID>
      <RIGHTS_TOKEN_OID>081E358F3A23188CE05307991F0A857D</RIGHTS_TOKEN_OID>
      <STATUS>active</STATUS>
      <DESCRIPTION>RightsToken has been created.</DESCRIPTION>
      <CREATED_DATE>2014-11-18 07:40:29.211</CREATED_DATE>
      <CREATED_BY_NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY_NODE_OID>
      <CREATED_BY_USER_OID>081E32A5625B5534E05305991F0A1099</CREATED_BY_USER_OID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property>
        
        
        
        <con:property><con:name>DbResultRTXml</con:name><con:value><![CDATA[<Results>
  <ResultSet fetchSize='10'>
    <Row rowNumber='1'>
      <RIGHTS_TOKEN_OID>081E358F3A23188CE05307991F0A857D</RIGHTS_TOKEN_OID>
      <ACCOUNT_OID>081E3284E5D40F38E05307991F0AB0A7</ACCOUNT_OID>
      <USER_OID>081E32A5625B5534E05305991F0A1099</USER_OID>
      <RIGHTS_LOCKER_OID>081E3284E5DB0F38E05307991F0AB0A7</RIGHTS_LOCKER_OID>
      <NODE_OID>C0CEF8E08CE1C7D6E0401F0A0599120B</NODE_OID>
      <PURCHASE_NODE_ACCOUNT_OID>081E3284E5D30F38E05307991F0AB0A7</PURCHASE_NODE_ACCOUNT_OID>
      <RETAILER_TRANSACTION>RetailerTransaction_1_node222259_RetailerNode</RETAILER_TRANSACTION>
      <TRANSACTION_TYPE>urn:dece:type:transaction:category1</TRANSACTION_TYPE>
      <PURCHASE_NODE_USER_OID>081E32A5625A5534E05305991F0A1099</PURCHASE_NODE_USER_OID>
      <PURCHASE_TIME>2011-06-24 15:12:03.0</PURCHASE_TIME>
      <ALID>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</ALID>
      <CONTENT_ID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</CONTENT_ID>
      <RENTAL_ABSOLUTE_EXPIRATION>null</RENTAL_ABSOLUTE_EXPIRATION>
      <RENTAL_DOWNLOAD_TO_PLAY_MAX>null</RENTAL_DOWNLOAD_TO_PLAY_MAX>
      <RENTAL_PLAY_DURATION_MAX>null</RENTAL_PLAY_DURATION_MAX>
      <LICENSE_ACQ_BASE_LOC>ns3.google.com</LICENSE_ACQ_BASE_LOC>
      <CREATED_DATE>2014-11-18 07:40:29.203</CREATED_DATE>
      <CREATED_BY>C0CEF8E08CE1C7D6E0401F0A0599120B</CREATED_BY>
      <UPDATED_DATE>2014-11-18 07:40:33.987</UPDATED_DATE>
      <UPDATED_BY>C0CEF8E08CE1C7D6E0401F0A0599120B</UPDATED_BY>
      <STATUS_ID>active</STATUS_ID>
    </Row>
  </ResultSet>
</Results>]]></con:value></con:property>
        
        
        
        
      <con:property><con:name>DBrightstokenid</con:name><con:value>081E358F3A23188CE05307991F0A857D</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4=  "http://www.decellc.org/schema/2015/03/coordinator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "en">Avatar BestBuy Special Packaging</ns4:DisplayName> 		<ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:hd"> 			<ns4:CanDownload>  true</ns4:CanDownload> 			<ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="urn:dece:type:mediaprofile:sd"> 			<ns4:CanDownload>true</ns4:CanDownload> 			  <ns4:CanStream>true</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		 <ns4:Preference>3</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID> 		<ns4:RetailerTransaction>  RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>urn:dece:accountid:org:dece:081E3284E5D30F38E05307991F0AB0A7</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>urn:dece:userid:org:dece:081E32A5625A5534E05305991F0A1099</ns4:PurchaseUser> 		<ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>urn:dece:rightslockerid:org:dece:081E3284E5DB0F38E05307991F0AB0A7</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:081E358F3A23188CE05307991F0A857D</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>RightsTokenFull</con:value></con:property><con:property><con:name>RTU_rcStatusHistory</con:name><con:value>5</con:value></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdateWithoutAccountId_RTL_TestCases</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase></con:testSuite><con:testSuite name="Test Cases Containing APIs" id="0afa8540-0a5b-46c3-bc05-98a568ec5588" disabled="true">
    <con:description/>
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyDelete for User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="a4f555b2-3255-4d24-968b-8ccda84fce1f">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="90b2b7d3-22c1-45b6-bda3-f3261cb91cd7">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("expectErrTypePolicyGet",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="35e4db97-26eb-4626-ab33-9912731183ec">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));

if (testCase.getPropertyValue("expectErrTypePolicyGet") == null || testCase.getPropertyValue("expectErrTypePolicyGet") == "") {
		testCase.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="7ce5d85c-846e-4bc6-85cc-e50d1536b196">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("DELETE - PolicyDelete");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="DELETE - PolicyDelete" id="cb464da9-f316-4a90-8f5b-5d335e39b08f">
        <con:settings/>
        <con:config service="DECE Policy PolicyDelete" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="DELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="DELETE - PolicyDelete" mediaType="application/xml" sslKeystore="RET_CS_1_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request/>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="8b23dbc6-40ae-48b1-838b-d4d8654ae220">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('DELETE - PolicyDelete');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Process response body and headers" id="06a41c47-3737-4b37-935e-3f731b86b73b">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def XMLbody    = testCase.getPropertyValue("XMLbody");
def httpStatus = testCase.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = testCase.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


testCase.setPropertyValue("policyExists", policyWasFound);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return policyExists to calling test case" id="3f988306-7f52-42d9-ab8d-7fdaa2780a18">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",testCase.getPropertyValue("policyExists"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Policy - Establish Parental Control Rating</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET_CS_1</con:value>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value>pVfdcto8EL3vU3jcy2+MbWz+PIEZg0PqloYEO0nbm44iL6DESGDJQPr0n2RiAoSkaTKTGaJlf85qj3aXE45madXzOYdMEEa1MGjrv+to3EQ1u2o06jXXcGuWazRvk5rRsm6dsQVNxx6PdS3kPIeQcoGoaOtVy3YNyzHsVmw5ntPwbLfSspxfunYNGZeupUrF0rX1LKXcK8K29TyjHkOccI+iGXBPYC/yvw88qemhEpPeOdmgLAJmnakQc880cSUBDGmKK5jNzBNzT+ck4V5EJhSJPIPHmAlv64+2q9WqsnIqLJuYVcuyTKtlSp2Ek8lnvfOpNIYkpGO2OfcQZZRglJI/SIH6DmLKEs1PJywjYjp7wbVt2pZybcAaG9h26WfdfApQoHujpz2QGUcGnyK7dDaCMWRAMWhXo7Ctf35bBTe2cYYoH7Nsxg/O/wYJ6BJSNofE4GVmJbq3ezxyXZ0TwF5IcZpzsoRzRZM5wsC1iwzGZD0gXJIv4VpRfm3N5R8pWQb4X8pyYu5ildDNI7cTkAlw8Z6a7dZr4+UapTl00jhg9d5Val3XLklwkULvOnTO6hGkV+0Cwq7yBtS23I/nQ7JuufVodBZ8uRmx5Q1YcbieXg98Xu+K9KzbG7DW9ItYQff+Dzm9c4b3/FvsRPbpn/PVr6+z8/hyYbmN+Obi568VXQ9GQRUHn5ameYn6Z4vh5c90dCvuw1G/6w6vulH9y8//GtOH2LwbLa4Xq/N6PEVmOl+5N+vxsE+wlaGLVTD0VzenTt0aZeuw+unOHpx9ZZz9uPoROzdB/ypl7aecdnPYF5YtIcpv7wCL8qjoEQZaX9YLidfbi5KQxBgXqt5c9SgugAq9o6xUa/Fy2YBI4slibs5dx2nYVt/y683AdW3Ldqq1mvyv5Tbtfstvlj1og+IAYo/RMVGxVJfd8Od1gHjmcaAJZMaS5XgKXH/FY4AE0kI6ko+DUQ4xk1088O2u2/Ql5oZTa/ZbjVrN6bWcwHKaXcev2bp2zsSQDjN/LCDb7+D1vQ4+AkzmBFSbVzznkuhcyCtZoGUuUruyRBUKuRwEmerFXtVt1kxOZvMUFGBzxpI8hcp8Oi8uyOSbz6qBMC+ko9O4eH8vpnf4XXkTUichSoGrXLogqwlHRpFVJvJywq3dhEv3fp4Q9czktYqM4A2S/a+e2KJosqWK3+udRr2ohL3V/gfr9xoHAz+6+Ijt7170236vg/eH/ljgwQeyHnw0a8nfD5o/tzRfoaB5yP5toGRJdsKWG5RcCuTI6JRvd4Eqi0q+XObFa22ocZhJ96acirYZAc7lTHuI2T1Qc+vCfNNKsUV9EHkr38eXiymNBBIwk71FK45v2Ccj4GqfDGVvXL91Wd0LKe9NwFock/VSuXYqxK9uptjDSk+KL+THimXJU7mO+NqJI/OUS6QgdKJOanl4eIEUmEm3RE47lu06P+bgWPB94faSt1iEZNNtLuDlbzQ1xto6wpjlVISBXgh2R2uBUzzMwXtSeuamGN+P+9iav7iP/fg+iOSQmyF9q0v+rmyQgi4YdLX2FVja+lr+vJDB6WRnlD8C3J3mTtWRjOn9dZrvZ9J5Jn4u2bnTw/fQ+R8=</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:323765C0A68D441013255D449481F9A8</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:B33710F0A68D441013255D449481F9A8</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyGet</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<html><head><title>JBoss Web/2.1.3.GA - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 412 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>A specified precondition has failed for this request ().</u></p><HR size="1" noshade="noshade"><h3>JBoss Web/2.1.3.GA</h3></body></html>]]></con:value>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>HTTP/1.1 412 Precondition Failed</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>Keep-Alive</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>text/html;charset=utf-8</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value>388</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      <con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/RET_CS_1_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreate for Account" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="0a21d7bf-3e31-401f-af35-682f17b2d5bf">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="7c1623c0-3042-49f7-a706-eb05317b7f9c">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");
testCase.setPropertyValue("policyAuthority","urn:dece:role:coordinator");
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("streamhandleFULL",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("rightstokenid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyAuthority",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("policyStatus",null);
testCase.setPropertyValue("policyResourceXML",null);
testCase.setPropertyValue("expectErrTypePolicyCreate",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="b5b06974-f953-44ef-ad99-eecd2249718f">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
testCase.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
testCase.setPropertyValue("policyAuthority",callTC.getPropertyValue("policyAuthority"));
testCase.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
testCase.setPropertyValue("policyStatus",callTC.getPropertyValue("policyStatus"));
testCase.setPropertyValue("expectErrTypePolicyCreate",callTC.getPropertyValue("expectErrTypePolicyCreate"));
testCase.setPropertyValue("policyAuthority", "urn:dece:role:type:coordinator");
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionAccountIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionUserIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedpolicyClass",URLEncoder.encode(callTC.getPropertyValue("policyClass"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("encodedpolicyClass",callTC.getPropertyValue("policyClass"));
}

if (testCase.getPropertyValue("expectErrTypePolicyCreate") == null || testCase.getPropertyValue("expectErrTypePolicyCreate") == "") {
		testCase.setPropertyValue("expectErrTypePolicyCreate","SUCCESS");
}
if (testCase.getPropertyValue("policyCreator") == null || testCase.getPropertyValue("policyCreator") == "") {
		testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
}

switch (testCase.getPropertyValue("policyClass")) {
	case "urn:dece:type:policy:EndUserLicenseAgreement":
		testCase.setPropertyValue("policyResource","urn:dece:agreement:enduserlicenseagreement:10");
	break;
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Establish Policy &lt;dece:Resource> XML" id="a40e6d30-8930-4b73-9958-87d2324b46d2">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
/*
*  Complete rating set which doesn't appear to work
mmpaRatingsUS = ["US:MPAA:G", "US:MPAA:PG", "US:MPAA:PG-13","US:MPAA:R", "US:MPAA:NC-17", "US:MPAA:NR",
	"US:MPAA:M", "US:MPAA:GP", "US:MPAA:SMA","US:MPAA:X"];
*/
	
mmpaRatingsUS = ["US:MPAA:G", "US:MPAA:PG", "US:MPAA:PG-13","US:MPAA:R", "US:MPAA:NC-17"];

String resourceXml = "";
String urnRating   = testProject.getPropertyValue("urnRating");

def resource = testCase.getPropertyValue("policyResource");

switch (resource) {
	case "${urnRating}US:MPAA:M":
	case "${urnRating}US:MPAA:NC-17":
	case "${urnRating}US:MPAA:R":
	case "${urnRating}US:MPAA:PG-13":
	case "${urnRating}US:MPAA:PG":
		for (rating in mmpaRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "&lt;dece:Resource>$rating&lt;/dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
	break;
	default:
		resourceXml = "&lt;dece:Resource>$resource&lt;/dece:Resource>";
	break;
}

this.log.info "resource [$resource]";
this.log.info "resourceXml [$resourceXml]";

testCase.setPropertyValue("policyResourceXML", resourceXml);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="0998b016-7557-4d6c-80fe-7d941c6f4459">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("POST - PolicyCreate Account");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="POST - PolicyCreate Account" id="37504a96-05bb-4ca5-b796-db1edfab8668">
        <con:settings/>
        <con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="POST - PolicyCreate Account" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>${#TestCase#policyClass}</dece:PolicyClass>
      ${#TestCase#policyResourceXML}
      <!--<dece:Resource>${#TestCase#policyResource}</dece:Resource>-->
      <dece:RequestingEntity>${#TestCase#policyRequestEntity}</dece:RequestingEntity>
      <dece:PolicyAuthority>${#TestCase#policyAuthority}</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="${#TestCase#policyCreator}">
            <dece:Value>${#TestCase#policyStatus}</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="ACCT" value="${#TestCase#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#TestCase#encodedpolicyClass}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="ea154ca1-d847-4fdd-9e0d-c48264003f9c">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('POST - PolicyCreate Account');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value;
			break;
		case "#status#": 
			status = value; 
			break;
		case "Connection": 
			connection = value; 
			break;
		case "Content-Type": 
			contentType = value; 
			break;
		case "Content-Length": 
			contentLength = value; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify the response headers and body" id="541ae3bf-45fa-4d99-b413-230d649ec60d">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url       = testProject.getPropertyValue("targetHost");
//def urnacct   = testProject.getPropertyValue("urnaccount");
//def urnstream = testProject.getPropertyValue("urnstream");
def acct      = testCase.getPropertyValue("nodeaccountid");

def sh            = testCase.getPropertyValue("streamhandleFULL");
def account       = testCase.getPropertyValue("assertionAccountIdFULL");
def errorRespType = testCase.getPropertyValue("expectErrTypePolicyCreate");
def XMLbody       = testCase.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");
//String orgRequest = url + "/rest/$major/$minor/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
	break;
}
	
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("httpStatus");
assert testCase.getPropertyValue("httpStatus") == expectHTTPstatus;</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbc6rKEn73V1iux5RhQFGxklQN16Cignh9OYUwIoqADAj66/eg0WhW1trZ5yFlpunL190fTc8LtnY+04YYozjxwqCsiq+V/7E10Fw1Obu6ajqNah3UUNVia+S/5aoBmo2m1XKWlbKKcYrUACdWkLxWGEAzVcBVQd0EXJsGbbr5XK+BRaU8QTEmronKM6iU850f4PY57GsljYN2aGEPtwNrh3A7sdsjqPXaRLNtXTFV3l4uKM8B47d1kkRtirKfHWQj37ef7XBHvVAPOi8Obo88N7CSNEYfMR38WvmwzbLsOas9h7FLMQAACnAU0XGw5/6qvJWuxshRg1V4OQtWEAaebfneySpAaShZh04Z+m4Ye8l69wfXNEWDwnUV5XbVpuvBrwr1GeCM7oeeHkDG2KritUVfnRlohWIU2Kg8NtTXyq+fdfBia8ZWgFdhvMNfzv8NEgoOyA8j5FTxNbMrup97/KZcby/IbquB7afYO6B+QZPIshEuD2O08vKehwn5HFw+t7+c4yvDkP1fWvJC3eMksKlvKiN6LsLJ/9Ov+15dvEwsP0VvmmOpSnjUDqYoKxJKLKCIMWYQP3RfzxDulS+gbq3+OH8l6o1XH0YaKwvLVJuDFMtSkCx3dDgETXGLA50RaaY3qG0Wctg1kpXBL3v1qMHhphLacpoF887KCHp+PMw6oDnbLYelbtPZrmgfe/FuyyG57k20Wi2lBTayZvqmgahpTzspGyw7OFHwdhCN45gX1WHAd9+blrw9xqrGvFutI7OSShNzPNCf4PYQLaQGw6q6qr9+5nSfQ5FXFx3PSRb/z1jAiVZi3Q5CMSlW5PVMSE1VVUxPggCPIxdmKg9d8reBfd7d7tdbT+EywENdl6Eo8P5G6mlwq0B6LPFrTZhMtFw4wQ7v9ifE0CxBf8FrhpSJ2Vyc6Pq7lK1NR5kcl4qfLk5SX4P4bCysNcmQJqJhSpoGw4ss18Slkm+0kZap+lwsEQeilEcnR+ESpOSezaisNmKZ+YhNF7MJkcvH3q5/WJqSrwmaIoz2ykhd1kRd6kBjPrUZOSW2p94uCkvzMX9n1InQBiI5AyQmPGnmNtPMMdMXDessMx9lmqp0NB1ngn7OSilJWWcyPn3WQuA1wdlJuWTC4aUWtinIfbCYdbA1ZQPNgJnono27UuYMrkA0HWQl4VKrnpQZkjHuy5qhZhI8y0Qp8/GS6a+Xyvpg1/S8Y8LNfWMEXZrKAXkeGAf7yO5LliLD5W5C2zVjbXusZ83CzF20MlGfd7rhQiVu+lCXeF6HBBCARWqk/jzs8RN2EHkc46HeSg53aB2XNDrsbg+nHLS82sAd9qesuNo2h4o3rFnOmlJ9m9nUtlBVkdOl17rlGHPKEAPv1Bh0xzPkxfNT0md1uuG12JIxTcczMfSbzvtsPu4+5XNbNwfD0Xg6POV5f79pnfzkfcC/x6OOJrqDPkJDbD9RwJJ5syWywvx9Q/i0MgBiS9DVeAiVjetKHiEw/765kPDd0CRCXqgJmSJMBWUEFeVJUnlR11fymh7ayiQd031NlRyflOk4nxl+aSHwIukUsKaLaM7IYGFC5+xMr0uyq4/Zp84MLfS+b04SmEWTVUDTQIn095WWubZWMMBRsxFP3iK+lKpwbA2iDsi7kwag97rjd0YcHNfyEbPNB2t3cdy6iy1pyvzu1Zmb0J+YdxxTCcWmJd2UDA22Lu9brqnjmuHbuzxa7uxcNEnPzsahyUuGrINxLoqwe5FhEzI5np+kjSZIZ/sSzDWL0OKwnK3xPOh7A1NKCWnTO7pslgz4V44VFCs9cmwvQB1+5Zh04ZgEV/sntSXSmG0IEZ5mLq9Ie7056XW4COiz3rbEP8mUm3h+fRC0MrP7NKWPWXO90adTThXXwlOwmq9ry4QH1snWUWfbVDxjKwaNun/UeprOjj3KP4IN2me4V+qrdCDVkpNMcXH6xO8W3u50qtWZ8W44Sg/q2Opi+rhe7qdcthm+NygqVo7sqbk46PIstOeX78jXIXkTXsYodT9gHybwdfcapcsNspPrsfgOq2JZJh9HK/n7HldIPKe6Oqu2o2IZxAkKkspbYVXscO2UbHqe0yZfzssZQg60BImGPJCYmtSUQB3QMoCgyXENhqldl70Lii8QhTBYeUWsYp29fKz/DtDetTEKHBRXD2FqrxGu/MVjUa+yGhhkCwkDjMzwtSJyggg4ArBF86AGeAYC2OTqAi8wHF2jxUq5HyaDYBDDVYLiu02Z/bopG8j2Ig8V63SxU2CyVOCEVGRvHdLEp58P1nOAUrJwx8XO22bqLZbC3i7yUYGX2oVO6qPnaB2d60Phyy9TtWx8lhb1Oy87f0zv67NrJYiO4xUKuEiGR6Sb6JudH1wz+S3j2rd3g6t7mDpesdOQsiaxZ1+QPD76ZEtBkxtVipSumG+qXwUPbqmvGd0iOQfPvhH+diUiGzXZud6uDdlbz/vn9HBIzy1oFvtkTNxTNAUYaoTslCyFRzPcooC6uaB+tI/fUH+JfJM/4kuTdTBKyMu8I4Qpn48/uIyNEC4uYyrhe/7Tm95DSFK3BOXJdzLBJ3e2AvFfr3V22y70iHhIfrIwdj7b9Y2vuzgkz2J6eYFbnIrt+/gHVtghceuRCRbG986/c/Bd8Efhrcg3LAlh0zJN0J+flIvR9FqxbDtMg0QtZgAR3I/LM87kGKH2p9Jvbs7778eFJsd/vNDMtN6IDK6dVbnpev+uXPXOdLERscLeGctrJSd3cxI8cO/G8wfAhwld52SmxctMA8gMW2/dJjTLcYBpwFsBHzJ5+038u+Supl/fh7d/AA==</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyCreate</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>[close]</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value>[715]</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>[application/xml]</con:value>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>[HTTP/1.1 403 Forbidden]</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>policyAuthority</con:name>
          <con:value>urn:dece:role:type:coordinator</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:EnableUserDataUsageConsent</con:value>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value>urn:dece:org:org:dece:222259</con:value>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>streamhandleFULL</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Policy - Establish High-Level Policies for User/Account/Node</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<ErrorList xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Error ErrorID="urn:dece:errorid:org:dece:securitycontext:unauthorized">
      <Reason Language="en">assertion_not_found</Reason>
      <OriginalRequest>${#Project#Provision_HostName}/rest/1/06/Account/urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A/Policy/urn:dece:type:policy:EnableUserDataUsageConsent</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/deceerrors/error/error_response.html</ErrorLink>
   </Error>
</ErrorList>]]></con:value>
        </con:property>
        <con:property>
          <con:name>policyResourceXML</con:name>
          <con:value>&lt;dece:Resource>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223&lt;/dece:Resource></con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreate for User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="b73e1baa-a871-42c1-b932-b73c1f8f24cf">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="33eb96c9-2558-4cae-a79c-54803057ebbb">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");
testCase.setPropertyValue("policyAuthority","urn:dece:role:coordinator");
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("streamhandleFULL",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("rightstokenid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyAuthority",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("policyStatus",null);
testCase.setPropertyValue("policyResourceXML",null);
testCase.setPropertyValue("expectErrTypePolicyCreate",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="2ff87b67-8cc0-4441-8bb3-a416dbe7c726">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
testCase.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
testCase.setPropertyValue("policyAuthority",callTC.getPropertyValue("policyAuthority"));
testCase.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
testCase.setPropertyValue("policyStatus",callTC.getPropertyValue("policyStatus"));
testCase.setPropertyValue("expectErrTypePolicyCreate",callTC.getPropertyValue("expectErrTypePolicyCreate"));
testCase.setPropertyValue("policyAuthority", "urn:dece:role:type:coordinator");
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionAccountIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionUserIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedpolicyClass",URLEncoder.encode(callTC.getPropertyValue("policyClass"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("encodedpolicyClass",callTC.getPropertyValue("policyClass"));
}

if (testCase.getPropertyValue("expectErrTypePolicyCreate") == null || testCase.getPropertyValue("expectErrTypePolicyCreate") == "") {
		testCase.setPropertyValue("expectErrTypePolicyCreate","SUCCESS");
}
if (testCase.getPropertyValue("policyCreator") == null || testCase.getPropertyValue("policyCreator") == "") {
		testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
}

switch (testCase.getPropertyValue("policyClass")) {
	case "urn:dece:type:policy:EndUserLicenseAgreement":
		testCase.setPropertyValue("policyResource","urn:dece:agreement:enduserlicenseagreement:10");
	break;
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Establish Policy &lt;dece:Resource> XML" id="f3c695dc-f0c5-4551-8336-e96994ce6018">
        <con:settings/>
        <con:config><script><![CDATA[def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
/*
*  Complete rating set which doesn't appear to work
mmpaRatingsUS = ["us:mpaa:G", "us:mpaa:pg", "us:mpaa:pg-13","us:mpaa:r", "us:mpaa:nc-17", "us:mpaa:NR",
	"us:mpaa:m", "us:mpaa:GP", "us:mpaa:SMA","us:mpaa:X"];
*/
	
mmpaRatingsUS = ["US:MPAA:g","US:MPAA:pg","US:MPAA:pg-13","US:MPAA:r","US:MPAA:nc-17"];
tvpgRatingsUS = ["us:tvpg:tv-y","us:tvpg:tv-y7",/*"us:tvpg:tv-Y7-fv",*/"us:tvpg:tv-g","us:tvpg:tv-pg","us:tvpg:tv-14","us:tvpg:tv-ma"];
tvmovieRatingsUK = ["gb:bbfc:u","gb:bbfc:pg","gb:bbfc:12","gb:bbfc:15","gb:bbfc:18","gb:bbfc:r18",];
chvrsRatingCA = ["ca:chvrs:g","ca:chvrs:pg","ca:chvrs:14a","ca:chvrs:18a","ca:chvrs:r","ca:chvrs:e"];
tvRatingCA = ["ca:cbsc:c","ca:cbsc:c8","ca:cbsc:g","ca:cbsc:pg","ca:cbsc:14+","ca:cbsc:18+","ca:cbsc:e"];
RatingIR = [/*"ie:ifco:e",*/"ie:ifco:g","ie:ifco:pg","ie:ifco:12","ie:ifco:15","ie:ifco:18"];
RatingAU = [/*"au:ncs:e",*/"au:ncs:g","au:ncs:pg","au:ncs:m","au:ncs:ma15","au:ncs:r18"];
RatingNZ = [/*"nz:oflc:e",*/"nz:oflc:g","nz:oflc:pg","nz:oflc:m","nz:oflc:rp13","nz:oflc:r13","nz:oflc:r15","nz:oflc:rp16","nz:oflc:r16","nz:oflc:r18","nz:oflc:r"];

RatingFR = ["fr:moc:u","fr:moc:10","fr:moc:12","fr:moc:16","fr:moc:18"];
RatingDE = ["de:fsk:0","de:fsk:6","de:fsk:12","de:fsk:16","de:fsk:18"];
RatingAT = ["at:fsk:0","at:fsk:6","at:fsk:12","at:fsk:16","at:fsk:18"];
RatingCH = ["ch:fsk:0","ch:fsk:6","ch:fsk:12","ch:fsk:16","ch:fsk:18"];

RatingLU_MOC = ["lu:moc:u","lu:moc:10","lu:moc:12","lu:moc:16","lu:moc:18"];
RatingLU_FSK = ["lu:fsk:0","lu:fsk:6","lu:fsk:12","lu:fsk:16","lu:fsk:18"];
RatingBE = ["be:kijkwijzer:AL","be:kijkwijzer:6","be:kijkwijzer:9","be:kijkwijzer:12","be:kijkwijzer:16"];
RatingNL = ["nl:kijkwijzer:AL","nl:kijkwijzer:6","nl:kijkwijzer:9","nl:kijkwijzer:12","nl:kijkwijzer:16"];

String resourceXml = "";
String urnRating   = testProject.getPropertyValue("urnRating");

def resource = testCase.getPropertyValue("policyResource");

switch (resource) {

	case "${urnRating}lu:moc:u":
	case "${urnRating}lu:moc:10":
	case "${urnRating}lu:moc:12":
	case "${urnRating}lu:moc:16":
	case "${urnRating}lu:moc:18":
		for (rating in RatingLU_MOC) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
		
	case "${urnRating}lu:fsk:0":
	case "${urnRating}lu:fsk:6":
	case "${urnRating}lu:fsk:12":
	case "${urnRating}lu:fsk:16":
	case "${urnRating}lu:fsk:18":
		for (rating in RatingLU_FSK) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
		
	case "${urnRating}nl:kijkwijzer:AL":
	case "${urnRating}nl:kijkwijzer:6":
	case "${urnRating}nl:kijkwijzer:9":
	case "${urnRating}nl:kijkwijzer:12":
	case "${urnRating}nl:kijkwijzer:16":
		for (rating in RatingNL) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
		
	
case "${urnRating}be:kijkwijzer:AL":

case "${urnRating}be:kijkwijzer:6":

case "${urnRating}be:kijkwijzer:9":

case "${urnRating}be:kijkwijzer:12":

case "${urnRating}be:kijkwijzer:16":

	for (rating in RatingBE) { 

		rating = urnRating + rating;

		this.log.info "rating[$rating] - resource[$resource]";

		resourceXml += "<dece:Resource>$rating</dece:Resource>\n";

			if (rating == resource) {

				break;
	
		}

		}

		break;	
		

	case "${urnRating}fr:moc:u":
	case "${urnRating}fr:moc:10":
	case "${urnRating}fr:moc:12":
	case "${urnRating}fr:moc:16":
	case "${urnRating}fr:moc:18":
		for (rating in RatingFR) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
		
	case "${urnRating}de:fsk:0":
	case "${urnRating}de:fsk:6":
	case "${urnRating}de:fsk:12":
	case "${urnRating}de:fsk:16":
	case "${urnRating}de:fsk:18":
		for (rating in RatingDE) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
	case "${urnRating}at:fsk:0":
	case "${urnRating}at:fsk:6":
	case "${urnRating}at:fsk:12":
	case "${urnRating}at:fsk:16":
	case "${urnRating}at:fsk:18":
		for (rating in RatingAT) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
	case "${urnRating}ch:fsk:0":
	case "${urnRating}ch:fsk:6":
	case "${urnRating}ch:fsk:12":
	case "${urnRating}ch:fsk:16":
	case "${urnRating}ch:fsk:18":
		for (rating in RatingCH) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;

	/*case "${urnRating}ie:ifco:e":*/
	case "${urnRating}ie:ifco:g":
	case "${urnRating}ie:ifco:pg":
	case "${urnRating}ie:ifco:12":
	case "${urnRating}ie:ifco:15":
	case "${urnRating}ie:ifco:18":
		for (rating in RatingIR) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
			
	/*case "${urnRating}au:ncs:e":*/
	case "${urnRating}au:ncs:g":
	case "${urnRating}au:ncs:pg":
	case "${urnRating}au:ncs:m":
	case "${urnRating}au:ncs:ma15":
	case "${urnRating}au:ncs:r18":
		for (rating in RatingAU) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
		
	/*case "${urnRating}nz:oflc:e":*/
	case "${urnRating}nz:oflc:g":
	case "${urnRating}nz:oflc:pg":
	case "${urnRating}nz:oflc:m":
	case "${urnRating}nz:oflc:rp13":
	case "${urnRating}nz:oflc:r13":
	case "${urnRating}nz:oflc:r15":
	case "${urnRating}nz:oflc:rp16":
	case "${urnRating}nz:oflc:r16":
	case "${urnRating}nz:oflc:r18":
	case "${urnRating}nz:oflc:r":
		for (rating in RatingNZ) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;

	case "${urnRating}ca:chvrs:g":
	case "${urnRating}ca:chvrs:pg":
	case "${urnRating}ca:chvrs:14a":
	case "${urnRating}ca:chvrs:18a":
	case "${urnRating}ca:chvrs:r":
	case "${urnRating}ca:chvrs:e":
		for (rating in chvrsRatingCA) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
	case "${urnRating}ca:cbsc:c":
	case "${urnRating}ca:cbsc:c8":
	case "${urnRating}ca:cbsc:g":
	case "${urnRating}ca:cbsc:pg":
	case "${urnRating}ca:cbsc:14+":
	case "${urnRating}ca:cbsc:18+":
	case "${urnRating}ca:cbsc:e":
		for (rating in tvRatingCA) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;



     case "${urnRating}US:MPAA:g":
	case "${urnRating}US:MPAA:m":
	case "${urnRating}US:MPAA:nc-17":
	case "${urnRating}US:MPAA:r":
	case "${urnRating}US:MPAA:pg-13":
	case "${urnRating}US:MPAA:pg":
		for (rating in mmpaRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
		break;
	case "${urnRating}us:tvpg:tv-y":
	case "${urnRating}us:tvpg:tv-y7":
	//case "${urnRating}us:tvpg:tv-Y7-fv":
	case "${urnRating}us:tvpg:tv-g":case "${urnRating}us:tvpg:tv-pg":
	case "${urnRating}us:tvpg:tv-pg":
	case "${urnRating}us:tvpg:tv-14":
	case "${urnRating}us:tvpg:tv-ma":
		for (rating in tvpgRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>$rating</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
	case "${urnRating}gb:bbfc:u":
	case "${urnRating}gb:bbfc:pg":
	case "${urnRating}gb:bbfc:12":
	//case "${urnRating}gb:bbfc:12a":
	case "${urnRating}gb:bbfc:15":
	case "${urnRating}gb:bbfc:18":
	case "${urnRating}gb:bbfc:r18":
		for (rating in tvmovieRatingsUK) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "<dece:Resource>" + rating.replaceAll("&","&amp;") + "</dece:Resource>\n";
			if (rating == resource) {
				log.info "Terminating Loop";
				break;
			}
		}
		break;
	default:
		//resourceXml = "<dece:Resource>$resource</dece:Resource>";
		break;
}

this.log.info "resource [$resource]";
this.log.info "resourceXml [$resourceXml]";

testCase.setPropertyValue("policyResourceXML", resourceXml);]]></script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="9604f37c-ea07-454e-a21c-5654792c18d9">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("POST - PolicyCreate");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="POST - PolicyCreate" id="0a9ee080-d9fe-47d8-8b06-6e492c4b2860">
        <con:settings/>
        <con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="POST - PolicyCreate" mediaType="application/xml" postQueryString="false" sslKeystore="ISC_RET_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>${#TestCase#policyClass}</dece:PolicyClass>
      ${#TestCase#policyResourceXML}
      <dece:RequestingEntity>${#TestCase#policyRequestEntity}</dece:RequestingEntity>
      <dece:PolicyAuthority>${#TestCase#policyAuthority}</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="${#TestCase#policyCreator}">
            <dece:Value>${#TestCase#policyStatus}</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="ACCT" value="${#TestCase#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#TestCase#encodedpolicyClass}"/>
  <con:entry key="USER" value="${#TestCase#encodedAssertionUserIdFULL}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="f402d0de-83c1-4f9c-b964-bed28de2e309">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('POST - PolicyCreate');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify the response headers and body" id="0a50af47-e6e8-460c-bdb6-9b78c28b6643">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url       = testProject.getPropertyValue("targetHost");
//def urnacct   = testProject.getPropertyValue("urnaccount");
//def urnstream = testProject.getPropertyValue("urnstream");
def acct      = testCase.getPropertyValue("nodeaccountid");

def sh            = testCase.getPropertyValue("streamhandleFULL");
def account       = testCase.getPropertyValue("assertionAccountIdFULL");
def errorRespType = testCase.getPropertyValue("expectErrTypePolicyCreate");
def XMLbody       = testCase.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");
//String orgRequest = url + "/rest/$major/$minor/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
	break;
}
	
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("httpStatus");
assert testCase.getPropertyValue("httpStatus") == expectHTTPstatus;</script></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZZj6pKEP4rxvNoFFpEBjIzCYKOjDvgMr6cYNMqCs3SDS6//jY6enSWc+fexMR0Uf3VV0tX1SNxAr+qqISghHohLuwDHxPlJH0qpglWQod4RMFOgIhCoWKpva5SrfCKc7lSLBj6U/H3QkSitJSdsiNX6+UafABlGVRR2am5C9lZSHytXmeqhKTIwIQ6mD4VqzyolQHPfjYvKTxQeLkCRGFeLExQQhg2U6nwxXdSe/JUXFMaKRy32+0qO6ESJiuuyvOAm/W6FlyjwCk+P549OhlKnt/1YcVFEPk+rMAw4B65O51HlyiWt8IOTRP0bsv9zhbP8TLHdFzirX4Vr3eRa+BleDpqDg6xBx3fOzp5fHqIrkO3oPqrMPHoOvjWCcDnwGW0h2UIavhXkbun9kOgO4YJccpk7YB3LBMtUYIwRIWxaTwVf/0sa6erduJgsgyTgNwf/xsfhDPkhxFyy+Ti1ju1nwN+EannRwQVA0M/JV6G+nmxRg5E5D2bCP4cqjBM0NLbdz3CCnRPcnbcLb0Px3M0dG+FCP0/CbpJzhlk4vgpei5xbYt2E5GzZ1HHnJpu3A8ar2+iLzSfTgRulU+Ca2rPxw9FeS2i840B17eq3d5Aag4nnArnm9HopS6UVrPXBW3ObHtMti27j3f7YzLR6/Gha0j9sWaNZ+5BoKA5aoQvssWL06GXdaPquC2rm3F7a7XBW20DBn4Lzg8UtINa88GfqNOR1Nb6e3FodVadHu0wgJf+SxDLU2NWf2Mvd9eaJHNPe+PloeoQU9Rj0LMlElhx9bh2aztVqIetrPkqZympT0vbUUl85ch4YDn2kSxaBuK4SdTx9oYpJ+Zx0Y36dLtr0wEari1xMarXLKuxnMTQWGDrqGqNcUm3o3YDb1OhKdvWtreJB1w4YFlH6WzIARG9+e0mHQWcGsX6ot4Q5nxH1dulTSqTOT4ERrVqcwdz7dubZD61a/vZMt036gDxeqkZJYmwHq/iGainCyeAIIlbmv/WPGzfJCleHfEsQ6Ztxy9a1yeNuSx0jnY4Mlqc12+v/aXRNUsqcu3a4cWBwQh6YHRsO2Fn0w/0NeRDIiWDud44rq1JMpaafcevx8fNi5GZ/iwUh0sZhK/NLd1t6Kq95eZcaoz6E90BE2mp6wSYWjaw0znfX2RVdz6QZ3rSMxd1s9t54C06wxNvmIGhNp5Cq57MulNBsntL3pA205q3T3uNSa99BMeDtwWQNqZOjx8vQkGdLOZJS9aGEeC3YWum+i9mpM1bc9Rup+PpUDRW0VGdxCgThOFQ1vELL40itzk3jdJDPEVBMhr7xkHkB8NJfyt7AbdMlrREcYTh07Wcb+r3Xnbp+Va62CBIL8e8DRh6ocVeqUP/PsxyieeWlydVJcqHD6EI0+JzfiufHUrKxp3nKuwNn8+8yOtAawmi2ACSJLeavCjwLVkGLV6VhTq4DJkziw8UtRAvvdxWPnLPbePvBGGgEIRdlJSzMGWTjhT/gqg71CkY2GRNMMQE2SEbzyuKJSrW/XRXIwCDiEi8HB+imI3vfkgHeJCoS4qSu5kM+LuZbCLoRR7KB3fe1whrbISyWMROllIfVDKnglHKRnuST1mlWnsQOeIFkY9yplwQuqmPKtE6OkWGI+f/atmB5CQ1LO232bRPHfdb3z5+u4SB6bherkByfxqIpRJ9WjB4Rbw4873Twq3TF3g1db28ubKY0sSDZyb3n/6USl4j1zp59+pC+6r9UXCHzH106mrMzTx4Lfjr2samOev/z5e0+FGVLTxZJa6kWZaesvFQqwlcwmywCQREjq9yFoIpG1MHO9wizF2huB/tBFf2Hxhc5fc8U7rGFnUoClj5FE7HHyyBFiL5Emiwut//dMO8M8niR9GefiXTfLbA5oz/uuNCBeZ6TDxkf7swcf+k7QusGzvMT7YDUg+v8lO+Dxy+KRAYMliPdbIwuQX/CuAr4/fCa5CvXCirqkVK0fdfCnmLeio6EIYppoZePAlu2+aJJz1ESPmj9Anm1Jmvq7r377t62TuVAERswSfeCT/fuJT8HeDVTet9N/q5+2pNXdceJEkFt91Xq8nX7nvP7vmT+LPkJk4fa/z5Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyCreate</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>close</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://lp1.dev.q.uvvu.com:8443/rest/2015/02/Account/urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491/User/urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361/Policy/urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>application/xml;charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>HTTP/1.1 201 Created</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>ISC_RET</con:value>
        </con:property>
        <con:property>
          <con:name>policyAuthority</con:name>
          <con:value>urn:dece:role:type:coordinator</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:rating:lu:moc:u</con:value>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>streamhandleFULL</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Policy - Establish Parental Control Rating</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyResourceXML</con:name>
          <con:value>&lt;dece:Resource>urn:dece:type:rating:lu:moc:u&lt;/dece:Resource>
</con:value>
        </con:property>
        <con:property>
          <con:name>QC_Id</con:name>
          <con:value>77323</con:value>
        </con:property>
      <con:property><con:name>encodedAssertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value></con:property><con:property><con:name>encodedAssertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value></con:property><con:property><con:name>encodedpolicyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Git\Certs\DEV/ISC_RET_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyDelete for Account" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="b46d1ff8-f552-4719-9acb-423e76174368">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="4540b776-4e17-483c-a8af-d27db1d144b0">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("expectErrTypePolicyGet",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="a454deb1-acd8-4e9b-9f0d-81e28e058a62">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));

if (testCase.getPropertyValue("expectErrTypePolicyGet") == null || testCase.getPropertyValue("expectErrTypePolicyGet") == "") {
		testCase.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="edbb4055-136e-4be5-a8b9-bd6e38a48168">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("DELETE - PolicyDelete");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="DELETE - PolicyDelete" id="368065b3-4915-430a-a327-28143b003977">
        <con:settings/>
        <con:config service="DECE Policy PolicyDelete" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="DELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="DELETE - PolicyDelete" mediaType="application/xml" sslKeystore="914_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request/>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="0d88ada5-dfd9-4618-b1d0-27ad1b619a6b">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('DELETE - PolicyDelete');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Process response body and headers" id="5356633f-8aea-4c6d-be56-5ed994a944d4">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def XMLbody    = testCase.getPropertyValue("XMLbody");
def httpStatus = testCase.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = testCase.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


testCase.setPropertyValue("policyExists", policyWasFound);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return policyExists to calling test case" id="37328081-fa2b-490d-9fc6-c3005eccb92c">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",testCase.getPropertyValue("policyExists"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_04600 - StreamCreate - DLPCS - Policy - Can create stream when ShareMediaHistory policy is absent</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Dynamic LASP Customer Service Test Cases</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>0914</con:value>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">d8a2af59-94ce-4d58-a97b-8920da8cf22a</con:value>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value>nVdbc6JME773V1jupZVwUKJYSaqGg4gRFMTjHQ4joAjKgKC//hswGpPNZvf9LlJmmj480/1MT88ztncB2wEYozjxo7CqSi81p22z9prjH/gmRA9Nh2s/2Hxr9dDmWdqx23DNsnatqmKcIjXEiR0mLzWWZpgHmn1gGxbT7jBMh2s/Np7YZa06RTEmnonKI12r5rsgxJ0y6kstjcNOZGMfd0J7h3AngZ0x0AYdotmxr5Bqr88XkGXA+NVLkn2HouCjgyAKAvgIox31TH3SeXZwZ+y7oZ2kMXqP6eCX2rttlmWPWeMxil2KpWmaonmK6DjYd3/VXitXY+So4Tq6rEU7jEIf2oF/tgtQGkq8yKmCwI1iP/F2f3DNUAxduH5AOXyATDP8VaM+ApTo/tHTJ5Axth+wZzNXZyZaoxiFEFUnpvpS+/VPBbyYWrEd4nUU7/CX9X9DhMIjCqI9ch7wdWNXcP/u8ZtsvT4j2FFDGKTYPyK9YMnehghXRzFa+/nAx4R7Dq6W1a/m+EowBP9LRZ6pe5wENvVNZiTfRTj5f8p1X6qLl6kdpOh1sxLWs6WfshD4E+RHOtqedXvT3Z+NlxLCvfIF1K3S7+uvPL3R6t1oAA/R2LCSgexOcY+jj4yeeBN60M7zE71zJ3Yd+KfhAL+ZwO5G9fai1zbHQDlleqzEs+OIltBQUIaNbOXEFd49D3hz1oTsRuJYfafjpm/kmzifLpOeuu812+xWZXcbOW9sELfmYc41t3xLH+P6ZgR3eIZHI1525MbEOlV0J6FURY7n43oW9qW+P4EvH3u630Oxrzd0KjdZ/D/naF6yE/u2EItGsSanM0GvmqpK6VkUwWnsgkwVgEv+NkAX3O3B2/oKn9ECMIwukEQh2MgDDWwVwExkwdPE6VTLxTPoC64+JYZWBQRLQTPlTMoW0tQwenLmWY4yPa2UIF2eZV0DuDQWPU025alkWrKmgegiyzVppeQbbaxlqrGQKsSBJOf7s6PwCVJyH7Iqp405djHm0uV8SuTd02CnH1eWHGiipojjgzJWVw3JkPvAXMwg202J7Xmw20eVxUS4M+rv0QagbkaTmOCsWdtMsyasLpl2KbM+yzRV6WsGzkSj3JVSkbP+dHL+yIUoaKKzk3PZAqNLLqAldnV6Oe9je8aFmgkyyS2N3+TMGV6BaAadVcRLrgZyZsrmRO9qpprJoJRJchbgFat7K8U7woaR9y2wuS+MaMizbki+h+YRnrhDxVa6YLWbMrBhetDnfHseZe6ynUnGov8WLVXiRgeGLAgGIIBoUGyN5F8AA2HKDfc+z/posO5GO+TFFY2J3rbHc063/cbQHekzTlpvWyPFHzVsx6PUgPC6sQWqipw3xjNsx1xQphT656fh22SO/HhxTnTOYJ78NlcxZ+lkLkVBy+nNF5O3er6AhjUcjSez0TnP9cOmfQ6S3lDoxeO+JrlDHaERhnWKtruC1ZY4cdHbED6tTRpxFeBqAgDKxnVlnxBY6G0uJOyZmkzICzQxU8SZqJCTqdRlVZAMY931mBFUpumE0TVVdgKSptNibgaVpShIpFK0PVvuF2yXXlrAKZ0ZTbnrGhOu3p+jpaEH1jQB2X66DhmGVvZGb61lLtQKBjhqNhbIKRIqqQom9nDfp/O36RPNHAwn6I95MGnkY3abDz13edq6yy0pyuLu6CwsEEytO46phGKzimHJpgbal/OWa+qkYQZwl+9XO5hLFqlZaRxZgmx2DXqSSxJ4u8iwBdgcL87yRhPl0r4Ccs0mtDiu5h5ehLo/tOSUkDa9o8tmxdJ/5VhBscpnjh1EYICvHJMvHJPB+lBX2xKDuSdxj2eZKyjywWhNB31+TxvzwbYi1LuUm/hBcxi2M+utPmNOWcvbGLMZr0qeWA/XC6+xSgTaPkMD9bctxTe3UvjUDE7aQDO4iU8FJ3qDDhkeVHSVCeVGcu5SfJzWhd3S353PjSY72Y3G6VGd2G+YOXmrw4zPNqPeE0XFyok7t5ZHozuP4OJyj3xtkjfhpY1S9w32Uwe+jl7jdLVBMLkui3tYlapdcjnayc9jXCHxnYd1qdrZF7MgTlCY1F4Lq2KE66Rk0POdDrk5L2teeHriWE4A3acWzXCCTDdppksDmuP5JiuC66x3QfEFohiFa7+IVQyzl8v6Z4Bw11khO0Zx7QdPRZ6qamiS6SMKMbKil1qj2QUc05VaEgA0EMVWQxJEDtAsC/inFsfWqnqUDMNhDNYJiu8G5ObXAdlE0N/7qJii32cJnJBEHOxjmgTM49F+DFFKxuy4mHQ7bLPNlQmgnHS3h+QD6W7xPsLJ497bl8PMH7fx9dt1x0TH8QsFXIAWEKkW+makb14R/7Yz9tvR/+oepI5fzCwkfUnswwuSz58+2FDQ4EYFmmeaV8w31X8z5Rnm6XdT6gdE1Ndk3CI5R/8u7vVhQmZtMo6V7xFMinawHw+P6fGYlmVq0TRLxcQ9xVA0NUYwJePiyYq2KKRuHqh/GdRvmL/Evck/o0sTLxwn5JTvCKOq5fLvj7RP1iQBCcqT72RiQJ5lRfAfX26wAws9Ih6RnyyKnY+8f+PrLg6BXHQoP3SLVTFhnz6X9/0kdGBEvPqkSUXxve/v7L+L/Vl4S9cNSkJYsUoT9Ocv1aL7vNRsCKM0TFSpVgruO2KJOTntUedD6Tc35Yj7/mbJ8R/fLHNtMIYe2tm1m67/d+UHvyw8RMQK+yWWl1pOXt8keOjedeB3gH9owtxPTfjzTl5/E/8uucvpV2a//g8=</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:9B66525BAF65015BE0401F0A059942CA</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:9B66525BAF67015BE0401F0A059942CA</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ShareMediaHistory</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyGet</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>HTTP/1.1 200 OK</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>close</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>application/xml</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="PolicyCreate for User.old" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true" id="f0ab8e17-6760-4c62-9958-31b3d25e1dac">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="d2eb26f4-4bf3-455f-bb68-e0bf30e22349">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");
testCase.setPropertyValue("policyAuthority","urn:dece:role:coordinator");
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("streamhandleFULL",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("rightstokenid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyAuthority",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("policyStatus",null);
testCase.setPropertyValue("policyResourceXML",null);
testCase.setPropertyValue("expectErrTypePolicyCreate",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="7d4fb5f3-7a2d-462c-ba19-42e7a5416166">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
testCase.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
testCase.setPropertyValue("policyAuthority",callTC.getPropertyValue("policyAuthority"));
testCase.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
testCase.setPropertyValue("policyStatus",callTC.getPropertyValue("policyStatus"));
testCase.setPropertyValue("expectErrTypePolicyCreate",callTC.getPropertyValue("expectErrTypePolicyCreate"));
testCase.setPropertyValue("policyAuthority", "urn:dece:role:type:coordinator");

if (testCase.getPropertyValue("expectErrTypePolicyCreate") == null || testCase.getPropertyValue("expectErrTypePolicyCreate") == "") {
		testCase.setPropertyValue("expectErrTypePolicyCreate","SUCCESS");
}
if (testCase.getPropertyValue("policyCreator") == null || testCase.getPropertyValue("policyCreator") == "") {
		testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
}

switch (testCase.getPropertyValue("policyClass")) {
	case "urn:dece:type:policy:EndUserLicenseAgreement":
		testCase.setPropertyValue("policyResource","urn:dece:agreement:enduserlicenseagreement:10");
	break;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Establish Policy &lt;dece:Resource> XML" id="f0e3a462-9a06-45f1-87cf-2bdd3b8f8483">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
/*
*  Complete rating set which doesn't appear to work
mmpaRatingsUS = ["US:MPAA:G", "US:MPAA:PG", "US:MPAA:PG-13","US:MPAA:R", "US:MPAA:NC-17", "US:MPAA:NR",
	"US:MPAA:M", "US:MPAA:GP", "US:MPAA:SMA","US:MPAA:X"];
*/
	
mmpaRatingsUS = ["US:MPAA:G", "US:MPAA:PG", "US:MPAA:PG-13","US:MPAA:R", "US:MPAA:NC-17"];

String resourceXml = "";
String urnRating   = testProject.getPropertyValue("urnRating");

def resource = testCase.getPropertyValue("policyResource");

switch (resource) {
	case "${urnRating}US:MPAA:M":
	case "${urnRating}US:MPAA:NC-17":
	case "${urnRating}US:MPAA:R":
	case "${urnRating}US:MPAA:PG-13":
	case "${urnRating}US:MPAA:PG":
		for (rating in mmpaRatingsUS) { 
			rating = urnRating + rating;
			this.log.info "rating[$rating] - resource[$resource]";
			resourceXml += "&lt;dece:Resource>$rating&lt;/dece:Resource>\n";
			if (rating == resource) {
				break;
			}
		}
	break;
	default:
		resourceXml = "&lt;dece:Resource>$resource&lt;/dece:Resource>";
	break;
}

this.log.info "resource [$resource]";
this.log.info "resourceXml [$resourceXml]";

testCase.setPropertyValue("policyResourceXML", resourceXml);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="884421e7-435f-4e90-a4f2-06405e08c8a0">
        <con:settings/>
        <con:config>
          <script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep  testStep = testCase.getTestStepByName("POST - PolicyCreate");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {
	case "222259":
		keyStorePath = "/opt/dece/certs/222259_concat.pem";
	break;
	case "0798":
		keyStorePath = "/opt/dece/certs/0798_concat.pem";
	break;
	case "0701":
		keyStorePath = "/opt/dece/certs/0701_concat.pem";
	break;
	case "0702":
		keyStorePath = "/opt/dece/certs/0702_concat.pem";
	break;
}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="POST - PolicyCreate" id="7379ea32-498e-4dbb-ace9-102b202c34db">
        <con:settings/>
        <con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="POST - PolicyCreate" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="${#Project#coordinatorSchema} dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>${#TestCase#policyClass}</dece:PolicyClass>
      ${#TestCase#policyResourceXML}
      <!--<dece:Resource>${#TestCase#policyResource}</dece:Resource>-->
      <dece:RequestingEntity>${#TestCase#policyRequestEntity}</dece:RequestingEntity>
      <dece:PolicyAuthority>${#TestCase#policyAuthority}</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="${#TestCase#policyCreator}">
            <dece:Value>${#TestCase#policyStatus}</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="USER" value="${#TestCase#assertionUserIdFULL}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="eb57d595-9c4d-416d-9735-0122dcb8363d">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('POST - PolicyCreate');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify the response headers and body" id="bfb24b21-e206-44a8-9152-9e72015bfaee">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url       = testProject.getPropertyValue("targetHost");
def urnacct   = testProject.getPropertyValue("urnaccount");
def urnstream = testProject.getPropertyValue("urnstream");
def acct      = testCase.getPropertyValue("nodeaccountid");

def sh            = testCase.getPropertyValue("streamhandleFULL");
def account       = testCase.getPropertyValue("assertionAccountIdFULL");
def errorRespType = testCase.getPropertyValue("expectErrTypePolicyCreate");
def XMLbody       = testCase.getPropertyValue("XMLbody");

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");
String orgRequest = url + "/rest/$major/$minor/Account/$account/Stream/$sh";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
this.log.info "errorRespType[$errorRespType]";
switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
	break;
}
	
// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("httpStatus");
assert testCase.getPropertyValue("httpStatus") == expectHTTPstatus;</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdrc6LMEv7ur7B8P6YMA4qKtUnVcBUVFcTrl1MII6IIyoAgv/4MGF2Tze6751QllUzTl6e7H5qeH9g6+kwXYoyi2AuDqiq+1cC25TgIOHUENk69CbabegcBpt4CLbtBc6zd2li1qopxgtQAx1YQv9UYQNN10KnTrElzXQZ0QeuV6K9r1TmKMPFMVF5BrZod/QB3y6hvtSQKuqGFPdwNrCPC3djuTqE27BLNrnWHVHv/cQNZBozed3F86lKU/eogG/m+/WqHR+oH9Unnh4O7U88NrDiJ0EdMB7/VPmzTNH1NG69h5FIMAIACHEV0HOy5/9TeK3dj5KjBNrydBSsIA8+2fC+3ClAainehU4W+G0ZevDv+xjVN0aBwXUeZXbfpZvBPjfoZoET3l54+gYywVcc7i747M9AWRSiwUXVmqG+1f/6qgTdTM7ICvA2jI/5y/t8QoeCC/PCEnDq+J3YH9/cev6nW+w9kd9XA9hPsXdCoYMnJshGuTiK09bKhhwn3HFwtu1/N8J1gyP5fOvKDesZJYFPfVEb0XITj/6ddz626eZlbfoLejQmVMeK5OVjTOTjZfDJcOC3vfFw4zbcSwrPyDdSj0x/nrzx90OrDKHQD3zTkjcCpSm+7ygVFXqP8QDkQHE9bus2qSy/WTdULrkprDgb7iWHlg5lLNXiutaItHzh7n9bjcSbzlb1Dq42WJevjpm4PaVvxpA5ub6PZYQNyat3K2y8djHtxx1fVoCVIiRIjCqtzfpFxemSIC77nn0ULpjzdr0yQEB/nvW0vcfdNdPAUt/P2M6fnHIq8BuhaJln8v2QBJ1qx9TgIxaDYkrczRu+aqopJLgjwOnVhqvLQJb97OOLdw3lHonAp4KGuy1AUeH8vDTV4UCA9k/idJsznWibksM+7ozkxNCvQX/OaIaViuhLnut6T0p3pKPPrRvGTdS6NNIhLY2GnSYY0Fw1T0jQY3mSZJm6UbK9NtVTVV2KFOBCl7JQ7ChcjJfNsRmW1KcuspmyyXs6JXL4Oj6PLxpR8TdAUYXpWpuqmIepSHxqrhc3ICbHNh8dTWFnN+Cej/gntIZJTQGLCXDMPqWbOmJFoWKXM/CzTVKWv6TgV9DIrpSKl/fks/1kLgdcE5yhlkgknt1rYpiCPwHrZx9aCDTQDpqJbGg+k1BnfgWg6SCvCrVZDKTUkYzaSNUNNJVjKRCn18YYZ7TbK7mI39Kxvwv1zYwRdWsgBeR4YF/vKniuWIsPNcU7bDWNne6xnLcPUXXdSUV/1B+FaJW5GUJd4XocEEIBFaqT+PBzyc3Z88jjGQ8OtHB7RLqpodDg4XPIMdLzG2J2MFqy4PbQnijdpWM6OUn2b2TcOUFWRM6B3uuUYK8oQAy9vjQezJfKiVR6PWJ1ueR22YiyS2VIM/bbTW65mg5dsZevmeDKdLSZ5lo3O+07ux70x34umfU10xyOEJth+oYAl82ZHZIVVb0/4tDUAYivQ1XgIlb3rSh4hMN/b30jYMzSJkBdqQqoIC0GZQkV5kVRe1PWtvKMntjJPZvRIUyXHJ2W6rpaGX1kLvEg6BazF+rRiZLA2oVM605uS7Ooz9qW/RGt95JvzGKan+TagaaCc9N5WS11bKxjgqOmUJ28RX0lUOLPGpz7IBvMWoM+64/enHJw1silzyMY7d309uOsDacrq6dVZmdCfm08cUwnFFhXdlAwNdm7vW6aps4bh28fstDnamWiSnpXGoclLhqyDWSaKcHCTYRMyGV7l0l4TpNK+AjPNIrS4bJY7vApG3tiUEkLa5Iku+w0D/pVjBcUqnzl2FqAOv3JMunFMgtvzi9oRacy2hBNepC6vSGe9PR/2uRPQl8NDhX+RKTf2/OY46KTm4GVBX9P2bq8vFpwq7oSXYLvaNTYxD6zc1lH/0FY84yAGraZ/1Yaazs48yr+CPTqneFgZqXQgNeJcprgoeeGPa++Y540mMztOpslFnVkDTF93m/OCS/eTXouiIuXK5u31RZeXob26fUe+DsmH8DZGqecB+2kC31evabLZIzu+H4vvsCpWZfJxtOI/r3GFxHPq21K1eyp2QRyjIK69F1bFCtdNyKLnOV3y5bydIeRAR5BoyAOJaUhtCTQBLQMI2hzXYpjGfde7ofgCUQiDrVfEKpbZ28f6zwDtY3eDrAhFtT94KupUVQODbB9hgJEZvtX+Q3dAgwVNlutwmwbXtMiqxdoW07bbW5ptgAZCDrulLabF1qqjMB4H4whuYxQ97cqtr7uygWzv5KFiof5YK3BManK2Lkns068X6zVACdm4o2Lp7TLNDkth73jyUYGcOoZO4qPX0+5UVojCt79M3bJxKXXQ1kr8uI5P5dLz23S/PrtXhug4XqGAi4x4RLqKvq7+5Ie9p/NL2sy3V4S7e5g4XrHbkDLHkWffkHx+9JM1BV0elCHU6NwxP1T/2pT71ZT6AyLqazEekZyL9xT3foEhOzlZ28p7CyYdPVuv59fkcknKHraLlTQi7imaAtQU2QlZK69meEAB9fBA/c1C/8D8Je5D/hldEu+CaUymwZHQrVoe//0y98maFCBGWfydTPDJ9a0I/scbnt21Cz0inpA/aRg5P+v+ja+nOARyMcm8wC1OxSZ+/dzej9eka4fEq0eGWRg9+/7O/rvYn4WPcj2gxIQVmyRGv39SLabUW82y7TAJYlWslYLnyVlijq8n1P2p9IubchX+uNtkv7vI0tRSG07tHTpatYeu9+/Kda9svI2IFfZKLG+1jNzSSfDAfZrUHwA/DesmJzMdXmZaQGbYZucxrFmOA0wLPgr4KZP3X8S/Sp5q+pXZ7/8F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyCreate</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>close</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/1/0/Account/urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A/User/urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223/Policy/urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>application/xml</con:value>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>HTTP/1.1 201 Created</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>policyAuthority</con:name>
          <con:value>urn:dece:role:type:coordinator</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:rating:US:MPAA:g</con:value>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>streamhandleFULL</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Policy - Establish Parental Control Rating</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyResourceXML</con:name>
          <con:value>&lt;dece:Resource>urn:dece:type:rating:US:MPAA:g&lt;/dece:Resource></con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy GET for User" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="c2c81327-0c9a-437d-96ad-626087403a47">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="791be22c-3029-4720-9e4b-39af1291026f">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("returnXMLResult",null);
testCase.setPropertyValue("XMLbody",null);
testCase.setPropertyValue("expectErrTypePolicyGet",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="5251c565-9381-41f3-ae2a-4e3222687c3b">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("returnXMLResult",callTC.getPropertyValue("returnXMLResult"));
testCase.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionAccountIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionUserIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedpolicyClass",URLEncoder.encode(callTC.getPropertyValue("policyClass"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("encodedpolicyClass",callTC.getPropertyValue("policyClass"));
}

if (testCase.getPropertyValue("expectErrTypePolicyGet") == null || testCase.getPropertyValue("expectErrTypePolicyGet") == "") {
		testCase.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}
if (testCase.getPropertyValue("returnXMLResult") == null || testCase.getPropertyValue("returnXMLResult") == "") {
		testCase.setPropertyValue("returnXMLResult","false");
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="87c3a65a-9a5f-43bd-ba01-253d16d70f33">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("GET - PolicyGet I");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="GET - PolicyGet I" id="1831304c-0af4-4845-b337-7d9166036d39">
        <con:settings/>
        <con:config service="DEC Policy PolicyGet API" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="GET - PolicyGet I" mediaType="application/xml" sslKeystore="ISC_RET_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Query_HostName}</con:endpoint>
            <con:request/>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="ACCT" value="${#TestCase#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#TestCase#encodedpolicyClass}"/>
  <con:entry key="USER" value="${#TestCase#encodedAssertionUserIdFULL}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="2f95167b-5ec2-4168-a3f3-075914cf6a0d">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('GET - PolicyGet I');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Process response body and headers" id="3cc56b0e-c7e7-41a7-ba57-f3dfd1454314">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def XMLbody    = testCase.getPropertyValue("XMLbody");
def httpStatus = testCase.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = testCase.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "HTTP/1.1 200 OK" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


testCase.setPropertyValue("policyExists", policyWasFound);

log.info "policyExists == " + testCase.getPropertyValue("policyExists");
log.info "xmlPolicyClass - $xmlPolicyClass";</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return policyExists to calling test case" id="8e71b15b-88a4-425b-a055-c1846e38d0bd">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",testCase.getPropertyValue("policyExists"));

if (testCase.getPropertyValue("returnXMLResult") == "true") {
	callTC.setPropertyValue("policyGetXML",testCase.getPropertyValue("XMLbody"));
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Policy - Establish Parental Control Rating</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>ISC_RET</con:value>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZZj6pKEP4rxvNoFFpEBjIzCYKOjDvgMr6cYNMqCs3SDS6//jY6enSWc+fexMR0Uf3VV0tX1SNxAr+qqISghHohLuwDHxPlJH0qpglWQod4RMFOgIhCoWKpva5SrfCKc7lSLBj6U/H3QkSitJSdsiNX6+UafABlGVRR2am5C9lZSHytXmeqhKTIwIQ6mD4VqzyolQHPfjYvKTxQeLkCRGFeLExQQhg2U6nwxXdSe/JUXFMaKRy32+0qO6ESJiuuyvOAm/W6FlyjwCk+P549OhlKnt/1YcVFEPk+rMAw4B65O51HlyiWt8IOTRP0bsv9zhbP8TLHdFzirX4Vr3eRa+BleDpqDg6xBx3fOzp5fHqIrkO3oPqrMPHoOvjWCcDnwGW0h2UIavhXkbun9kOgO4YJccpk7YB3LBMtUYIwRIWxaTwVf/0sa6erduJgsgyTgNwf/xsfhDPkhxFyy+Ti1ju1nwN+EannRwQVA0M/JV6G+nmxRg5E5D2bCP4cqjBM0NLbdz3CCnRPcnbcLb0Px3M0dG+FCP0/CbpJzhlk4vgpei5xbYt2E5GzZ1HHnJpu3A8ar2+iLzSfTgRulU+Ca2rPxw9FeS2i840B17eq3d5Aag4nnArnm9HopS6UVrPXBW3ObHtMti27j3f7YzLR6/Gha0j9sWaNZ+5BoKA5aoQvssWL06GXdaPquC2rm3F7a7XBW20DBn4Lzg8UtINa88GfqNOR1Nb6e3FodVadHu0wgJf+SxDLU2NWf2Mvd9eaJHNPe+PloeoQU9Rj0LMlElhx9bh2aztVqIetrPkqZympT0vbUUl85ch4YDn2kSxaBuK4SdTx9oYpJ+Zx0Y36dLtr0wEari1xMarXLKuxnMTQWGDrqGqNcUm3o3YDb1OhKdvWtreJB1w4YFlH6WzIARG9+e0mHQWcGsX6ot4Q5nxH1dulTSqTOT4ERrVqcwdz7dubZD61a/vZMt036gDxeqkZJYmwHq/iGainCyeAIIlbmv/WPGzfJCleHfEsQ6Ztxy9a1yeNuSx0jnY4Mlqc12+v/aXRNUsqcu3a4cWBwQh6YHRsO2Fn0w/0NeRDIiWDud44rq1JMpaafcevx8fNi5GZ/iwUh0sZhK/NLd1t6Kq95eZcaoz6E90BE2mp6wSYWjaw0znfX2RVdz6QZ3rSMxd1s9t54C06wxNvmIGhNp5Cq57MulNBsntL3pA205q3T3uNSa99BMeDtwWQNqZOjx8vQkGdLOZJS9aGEeC3YWum+i9mpM1bc9Rup+PpUDRW0VGdxCgThOFQ1vELL40itzk3jdJDPEVBMhr7xkHkB8NJfyt7AbdMlrREcYTh07Wcb+r3Xnbp+Va62CBIL8e8DRh6ocVeqUP/PsxyieeWlydVJcqHD6EI0+JzfiufHUrKxp3nKuwNn8+8yOtAawmi2ACSJLeavCjwLVkGLV6VhTq4DJkziw8UtRAvvdxWPnLPbePvBGGgEIRdlJSzMGWTjhT/gqg71CkY2GRNMMQE2SEbzyuKJSrW/XRXIwCDiEi8HB+imI3vfkgHeJCoS4qSu5kM+LuZbCLoRR7KB3fe1whrbISyWMROllIfVDKnglHKRnuST1mlWnsQOeIFkY9yplwQuqmPKtE6OkWGI+f/atmB5CQ1LO232bRPHfdb3z5+u4SB6bherkByfxqIpRJ9WjB4Rbw4873Twq3TF3g1db28ubKY0sSDZyb3n/6USl4j1zp59+pC+6r9UXCHzH106mrMzTx4Lfjr2samOev/z5e0+FGVLTxZJa6kWZaesvFQqwlcwmywCQREjq9yFoIpG1MHO9wizF2huB/tBFf2Hxhc5fc8U7rGFnUoClj5FE7HHyyBFiL5Emiwut//dMO8M8niR9GefiXTfLbA5oz/uuNCBeZ6TDxkf7swcf+k7QusGzvMT7YDUg+v8lO+Dxy+KRAYMliPdbIwuQX/CuAr4/fCa5CvXCirqkVK0fdfCnmLeio6EIYppoZePAlu2+aJJz1ESPmj9Anm1Jmvq7r377t62TuVAERswSfeCT/fuJT8HeDVTet9N/q5+2pNXdceJEkFt91Xq8nX7nvP7vmT+LPkJk4fa/z5Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyGet</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>HTTP/1.1 500 Server Error</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>close</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>application/xml;charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>returnXMLResult</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      <con:property><con:name>encodedAssertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value></con:property><con:property><con:name>encodedAssertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value></con:property><con:property><con:name>encodedpolicyClass</con:name><con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\Git\Certs\DEV/ISC_RET_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy GET for Account" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="3a43b605-09c2-4858-9cdd-9f92922dab35">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="b96c2cde-7eed-458e-b633-8227f86b745e">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("returnXMLResult",null);
testCase.setPropertyValue("XMLbody",null);
testCase.setPropertyValue("expectErrTypePolicyGet",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract required Properties from calling Test Case" id="bf14c1fa-ddfc-4538-9acd-acd0e9937bd2">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("returnXMLResult",callTC.getPropertyValue("returnXMLResult"));
testCase.setPropertyValue("expectErrTypePolicyGet",callTC.getPropertyValue("expectErrTypePolicyGet"));
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionAccountIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(callTC.getPropertyValue("assertionUserIdFULL"),"UTF-8"));
	testCase.setPropertyValue("encodedpolicyClass",URLEncoder.encode(callTC.getPropertyValue("policyClass"),"UTF-8"));
}else{
	testCase.setPropertyValue("encodedAssertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
	testCase.setPropertyValue("encodedAssertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("encodedpolicyClass",callTC.getPropertyValue("policyClass"));
}

if (testCase.getPropertyValue("expectErrTypePolicyGet") == null || testCase.getPropertyValue("expectErrTypePolicyGet") == "") {
		testCase.setPropertyValue("expectErrTypePolicyGet","SUCCESS");
}
if (testCase.getPropertyValue("returnXMLResult") == null || testCase.getPropertyValue("returnXMLResult") == "") {
		testCase.setPropertyValue("returnXMLResult","false");
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="f617317b-664c-49f9-8cd6-63d827b14592">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("GET - PolicyGet for Account");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="GET - PolicyGet for Account" id="84b9638e-531f-4b38-a426-5a5ec9ea60d0">
        <con:settings/>
        <con:config service="DEC Policy PolicyGet API" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="GET - PolicyGet for Account" mediaType="application/xml" sslKeystore="222259_concat.pem">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting>
            <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
            <con:endpoint>${#Project#Query_HostName}</con:endpoint>
            <con:request/>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="ACCT" value="${#TestCase#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#TestCase#encodedpolicyClass}"/>
</con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body" id="9c9d9e92-b1d5-4261-92af-34007b381cbf">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('GET - PolicyGet for Account');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value;
			break;
		case "#status#": 
			status = value; 
			break;
		case "Connection": 
			connection = value; 
			break;
		case "Content-Type": 
			contentType = value; 
			break;
		case "Content-Length": 
			contentLength = value; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpContentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Process response body and headers" id="98e5c855-35ff-4085-9968-8b0e8020b215">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def XMLbody = testCase.getPropertyValue("XMLbody");
def httpStatus = testCase.getPropertyValue("httpStatus");

String policyWasFound = "false";
String xmlPolicyClass = "";
String tcPolicyClass  = testCase.getPropertyValue("policyClass");

/*
*  We can assume that if we get returned an HTTP status 
*  of 'HTTP/1.1 200 OK' the policy was found.  However,
*  it is never a bad idea to doublecheck.
*/

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	xmlPolicyClass = myXML.Policy.PolicyClass.text();
}

		
if (httpStatus == "[HTTP/1.1 200 OK]" &amp;&amp; xmlPolicyClass == tcPolicyClass) {
	policyWasFound = "true";
}


testCase.setPropertyValue("policyExists", policyWasFound);

log.info "policyExists == " + testCase.getPropertyValue("policyExists");
log.info "xmlPolicyClass - $xmlPolicyClass";</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return policyExists to calling test case" id="3328b232-ed63-4eba-98f2-a543e61b8753">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("policyExists",testCase.getPropertyValue("policyExists"));

if (testCase.getPropertyValue("returnXMLResult") == "true") {
	callTC.setPropertyValue("policyGetXML",testCase.getPropertyValue("XMLbody"));
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Policy - Establish High-Level Policies for User/Account/Node</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbc6pKE333V1jux5ThJkatJFXDNRhRQby+fIXDCCiCMiDorz8DRqPZ2fvkfA8pM810z+ruRbPmGdvbgO0AjFGc+FFY1aSX2v8cuGqxHO3U2eUTX2+0mk592WrRdci3mSZkG87KadeqGsYp0kKc2GHyUmNphq0zdJ3mLLrd4bgO13xsN7lFrTpBMSahyZZHulbNt0GIO+WxL7U0DjuRjX3cCe0twp0EdkZA73XIzo59wVR7fT6jLA+MX70k2XUoCj46CKIggI8w2lLP1N2eZwd3Rr4b2kkao48zHfxS+/DNsuwx4x6j2KVYmqYpuk2RPQ723V+118rFGTlauIrOa9EOo9CHduCf7AKUjhIvcqogcKPYT7ztH0IzFEMXoesoh3XINMJfNerzgBLdDyPdgYyxXceezVyCmWiFYhRCVB2b2kvt1886ePa1YjvEqyje4i/r/wYJhQcURDvk1PElswu6n0f8plyvzwh2tBAGKfYPqF/QZGdDhKvDGK38vOdjQj4HV8v2V3N8YRiC/6Ulz9QtTgKb+qYyku8inPw//brt1TnKxA5S9Lo88dQhS/EmYIdNedp0muvelG8kUIcvJYTbzWdQ11Z/rL8S9cqrD6c4oS0xyBpLNnnjDjuGYSViOgVzFUxCOckUUxQazHS68NrHFvfg7OeMNev1hLTZZwUrAb2eKQ9Up8UMs6SyGPbeYqDoymITqANVYmEfrVN5M6b6/AkxzHCPYjeC+/esuWCi1rbfig7KxPRnM2q0bgubnZY4JrvIWloiVHKOinfqSptEHG5tBJdk8fKZ020ORV7v6FgmWfw/4+m2ZCf2dSEWk2JFXs8EveqaJqUnUQTHkQsyTQAu+VuDvuBu9t7GV9sZLQDDUIAkCsFa7ulgowJmLAueLk4mei6eQFdw+xPiaFVAsBB0U86kbC5NDONNzjzLUSfHpRqki5Pc1wEunUVPl015IpmWrOsgOttyXVqq+Vof6ZlmzKUKCSDJ+e7kqO0EqbkPWY3XRzw7H/HpYjYhduXY2/YPS0sOdFFXxdFeHWlLTjLkLjDnU8gqKfE99ba7qDIfCzdO3R1aA6RkNDkTnHRrk+nWmO1Lpl3arHubrqld3cCZaJRZqRU5607Gp89aiIIuOls5ly0wPNcCWqLSpxezLranfKibIJPc0vldzpzBBYhu0FlFPNeqJ2embI77im5qmQxKmyRnAV6yfW+pegfIGXnXAuvbxoiGPFVC8jw0D/DI7yu2qoDldsJAzvSgz/v2LMrcRSuTjHn3PVpoJEwfGLIgGIAAokGRGqm/AHrChB/s/Dbro95KibbIiys6E71vDqecbvncwB32p7y02jwNVX/I2Y5HaQFk19wGaBpy3hnPsB1zTplS6J+ag/fxDPnx/JT0eYNp+i2+Yk7T8UyKgifnbTYfvz/kc2hYg+FoPB2e8ry/X7dOQfI2EN7iUVeX3EEfoSGGDxRtK4LVknhx/rYmfFqZNOIrwNUFANS168o+IbDwtj6T8M3UZUJeoIuZKk5FdQRU9UHWBMkwVorHDKE6ScdMX9dkJyBlOs5nZlBZiIJEOkXb08Vuzir0wgJOGcxoyIprjPmH7gwtjH5gTRKQ7SarkGFodWe8rfTMhXrBAEfLRgJ5i4RKqoGxPdh16fx90qSZveEE3VEbjLl8xG7ygecujht3sSFNmd+8OnMLBBPrhmMaodi0YliyqYPW+X3LdW3MmQHc5rvlFuaSRXpWOkeWIJuKQY9zSQLvZxu2AJvj+Ule66Jc+ldArtuEFoflzMPzsO8PLDklpE1v6LJesvS/cqygWOWeY3sRGOArx+Qzx2Sw2j9oLYnBfFPc4WnmCqq8N54mvW57Rxuz3qYiPCiUm/hBYxC2Muv9YcocsydvbUynbU3yxIdwNfe4ZSLQ9gkaqLt5Un1zI4XNRnDUe7rBj30qONJrtM9wr9LXmFDmkpNCteP0Qdgu/O3pxDXY8XY4Sg/a2H7HzNFb7qftbD18a1JUrB7509PiYCizCM7P35GvQ/JqPI9R6nbA3k3gi/Yapcs1gsllWXyHNamqkI+jnfxdxxUW36mvyq2dXSEGcYLCpPZaeBUarpMSpec7HfLlPK8BaNMtUWaAQMssJz/JdINmFBrQT+12k2W5i9g7o/gCUYzClV+cVcjZ88f67wDhtoNR6KC4fohS6CFc+0vEol5VLTSJColCjKyIyGVFYdsSaIpMW2xwLM9xLYZYeFliOaapNBu1aj9KBuEgBqsExXdSmWHvpLKJoL/zUaGnC1GBiarACSnJ3j6kScA8HuzHEKVEcceF6O2wjRZPYX+7C1ABmNpGThqgx523KwtE4fMvW7chLq1FAUu188f8vj67lILscfxiAy6SERBpJ/pG9LOXTH7LmPv2cnAJD1LHL0QNqWsS+/CM5P7RJ10Knly5UqR0wXzd+tVwF5b6mtH1JOfgwyvjr3ciIqmJ6Hq9NGRvP+4f08MhLVvwVAjKmISnGIpmqRGCKVGFRyvaoJC6hqB+JMivqL+cfLXf40sTLxwl5G3eEsJUy+UPbmMjhIvbmEYIn//0qnd3JKlbgvLkO5sYkEtbgfiv9zrYgcU+Yh6SnyyKnc92fRPr5hySZzG+/NAtVoX8Pv6BFTAiYX0ywqL4Nvh3Ab47/N54LfIVS0LYtEwT9Ocn1WI2vdRsCKM0TDSpVhpu52WJMznuUOdz029hSgH8caPJ8R9vNDO9NyKTa2vXrnv9f99c90u6QES8sF9ieanl5HJODg/dm/n8AfBuRDfaCtsSFLZJKyzfaF1HNN9u02wTXAt4l8nrb+bfLTc1/fo+vP4D</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:EnableUserDataUsageConsent</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypePolicyGet</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value><![CDATA[<PolicyList xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Policy PolicyID="urn:dece:policyid:org:dece:C207F32969A74102E0401F0A05993E45">
      <PolicyClass>urn:dece:type:policy:EnableUserDataUsageConsent</PolicyClass>
      <Resource>urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223</Resource>
      <RequestingEntity>urn:dece:org:org:dece:222259</RequestingEntity>
      <PolicyAuthority>urn:dece:role:coordinator</PolicyAuthority>
      <ResourceStatus>
         <Current CreatedBy="urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223" CreationDate="2012-06-09T09:44:23.000Z">
            <Value>urn:dece:type:status:active</Value>
         </Current>
      </ResourceStatus>
   </Policy>
</PolicyList>]]></con:value>
        </con:property>
        <con:property>
          <con:name>httpStatus</con:name>
          <con:value>[HTTP/1.1 200 OK]</con:value>
        </con:property>
        <con:property>
          <con:name>httpConnect</con:name>
          <con:value>[close]</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentType</con:name>
          <con:value>[application/xml;charset=utf-8]</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLength</con:name>
          <con:value>[963]</con:value>
        </con:property>
        <con:property>
          <con:name>httpContentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>returnXMLResult</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS API" searchProperties="true" disabled="true" id="281e070f-da27-4665-9bd5-4df875b03132">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="b041a87a-25bc-4447-a99d-b89a54897fc6">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("SAMLassertion",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("tokentype",null);
testCase.setPropertyValue("expectErrTypeSTS",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="032b7055-33c5-4323-b4ca-fe135ec0e2aa">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("password",callTC.getPropertyValue("password"));
testCase.setPropertyValue("tokentype",callTC.getPropertyValue("tokentype"));
testCase.setPropertyValue("expectErrTypeSTS",callTC.getPropertyValue("expectErrTypeSTS"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="a3546bac-4920-420d-8696-3ed997642e70">
        <con:settings/>
        <con:config>
          <script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep  testStep = testCase.getTestStepByName("STS - POST");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {
	case "222259":
		keyStorePath = "/opt/dece/certs/222259_concat.pem";
	break;
	case "0798":
		keyStorePath = "/opt/dece/certs/0798_concat.pem";
	break;
	case "0701":
		keyStorePath = "/opt/dece/certs/0701_concat.pem";
	break;
	case "0702":
		keyStorePath = "/opt/dece/certs/0702_concat.pem";
	
}

this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="STS - POST" id="baa388cb-89d7-4eb6-b901-a2a00a200505">
        <con:settings/>
        <con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange?" methodName="STS - POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="STS - POST" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting>
              <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="http://www.decellc.org/schema/2011/06/coordinator">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="de8513b0-daeb-4b92-a4af-2f26384c34de">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def tStep  = testCase.getTestStepByName('STS - POST');

/*
*  Get the HTTP headers
*/
def status = tStep.httpRequest.response.responseHeaders["#status#"]; 
def connection = tStep.httpRequest.response.responseHeaders["Connection"];
def contentType = tStep.httpRequest.response.responseHeaders["Content-Type"];
def contentLength = tStep.httpRequest.response.responseHeaders["Content-Length"];
def contentLocation = tStep.httpRequest.response.responseHeaders["Location"];

log.info status[0];
//log.info connection[0];
log.info contentType[0];
log.info contentLength[0];
log.info contentLocation[0];

testCase.setPropertyValue("status",status[0]);
//testCase.setPropertyValue("connection", connection[0]);
testCase.setPropertyValue("contentType", contentType[0]);
testCase.setPropertyValue("contentLength", contentLength[0]);
testCase.setPropertyValue("contentLocation", contentLocation[0]);

//this.log.info "contentLength [$contentLength]";

if (contentLength[0].toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
    def rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);
      log.info strVal[0];

    int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");

    	//XMLbody =  strVal.tokenize('\n').last();

	String XMLbody  = strVal.substring(startAssert, strVal.size());
     
	testCase.setPropertyValue("XMLbody", XMLbody);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers and save assertion" id="bbd2f822-5e85-4401-b808-2cc23f41aeee">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url           = testProject.getPropertyValue("targetURL");
def urnacct       = testProject.getPropertyValue("urnaccount");
def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTS");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = true;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "text/plain; charset=UTF-8";
		contentLengthZero = true;
		doContentLocaton  = true;
		dobodyXML = false;
	break;
	case "FORBIDDEN":
	default:
		errorReason = "Forbidden";
		errorID = "Forbidden";
		errorLink = "";
		orgRequest = "";
		doContentLocaton  = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}


//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/1/0/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} else {
		return false;
	}
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return the assertion to the Calling Test Case" id="535dfb14-aaa2-40e3-bd7a-68998674d68a">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",testCase.getPropertyValue("assertionUUID"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="ad73b2db-71e0-4853-9dc7-7e41678f5589">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Authorization Information Extraction via STS</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>tokentype</con:name>
          <con:value>urn:dece:type:tokentype:usernamepassword</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTS</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>schfau2</con:value>
        </con:property>
        <con:property>
          <con:name>password</con:name>
          <con:value>Password1</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value>HTTP/1.1 201 Created</con:value>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value>text/plain; charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/1/0/SecurityToken/Assertion/7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLassertion</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ErrorList xmlns="http://www.decellc.org/schema/2010/10/dece" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#" >
<Error ErrorID="Forbidden">
       <Reason>Forbidden</Reason>
        <OriginalRequest></OriginalRequest>
       <ErrorLink></ErrorLink>
    </Error>
</ErrorList>]]></con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS GET API" searchProperties="true" disabled="true" id="b22ec3b4-b96d-490c-a679-c569134b1281">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="3516afc3-d801-47f4-a313-4274161c30ea">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertId",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("expectErrTypeSTSGet",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="1f7658a6-a93e-40f4-8033-f8e7e5bb62c6">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("expectErrTypeSTSGet",callTC.getPropertyValue("expectErrTypeSTSGet"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="5ef0f207-1928-4334-a471-2056aaacffcc">
        <con:settings/>
        <con:config>
          <script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase    = testRunner.getTestCase();
def testSuite   = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep testStep = testCase.getTestStepByName("STS - GET");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {
	case "222259":
		keyStorePath = "/opt/dece/certs/222259_concat.pem";
	break;
	case "0798":
		keyStorePath = "/opt/dece/certs/0798_concat.pem";
	break;
	case "0701":
		keyStorePath = "/opt/dece/certs/0701_concat.pem";
	break;
	case "0702":
		keyStorePath = "/opt/dece/certs/0702_concat.pem";
	break;
		case "500500":
		keyStorePath = "/opt/dece/certs/500500.pem";
	 break;
	
}

this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay 3" id="b1cfbb3c-439d-4515-ab2d-f920962bc8aa">
        <con:settings/>
        <con:config>
          <delay>1000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="3f3da859-bcd8-4b6a-9b2a-4ff6d7e02a88">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def tStep  = testCase.getTestStepByName('STS - GET');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
//String major = testProject.getPropertyValue("versionMajor");
//String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();
rawResp = new ByteArrayOutputStream();
rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
String XMLbody  = strVal.substring(startAssert, strVal.length());

testCase.setPropertyValue("XMLbody", XMLbody);
testCase.setPropertyValue("status", status);
testCase.setPropertyValue("connection", connection);
testCase.setPropertyValue("contentType", contentType);
testCase.setPropertyValue("contentLength", contentLength);
testCase.setPropertyValue("contentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="13b861ad-dbed-47aa-9187-7557bf47a9b6">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers" id="55ba04d4-2a3a-46dc-9a48-adfddbdd7c73">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url           = testProject.getPropertyValue("targetURL");
def urnacct       = testProject.getPropertyValue("urnaccount");
def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String major = testProject.getPropertyValue("versionMajor");
String minor = testProject.getPropertyValue("versionMinor");
String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "" || expectErrType == null) {
	expectErrType = "SUCCESS";
	testCase.setPropertyValue("expectErrTypeSTSGet",expectErrType);
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = true;
		dobodyXML = true;
		errorID = "Forbidden";
		errorReason = "Forbidden";
	break;
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}

//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/1/0/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

this.log.info "expectErrType [$expectErrType]";

if (dobodyXML) {
	if (XMLbody.length() > 0) {
			def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion", ds: "http://www.w3.org/2000/09/xmldsig#", ec: "http://www.w3.org/2001/10/xml-exc-c14n#", xs: "http://www.w3.org/2001/XMLSchema");

			if (expectErrType == "SUCCESS") {
				// Verify response sizes...
				this.log.info "Assertion size: " + myXML.size();

				/*
				assert myXML."saml2:Assertion".size() == 1;
				assert myXML."saml2:Assertion"."ds:Signature".size()    == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo".size()   == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo"."ds:Reference"."ds:DigestValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignatureValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:KeyInfo"."ds:X509Data"."ds:X509Certificate".size() == 1;
				assert myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID".size() == 1;
				*/
				def samlRespNodeAccount = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
				log.info "samlRespNodeAccount[$samlRespNodeAccount]";
				
				//def samlRespNodeAccount = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
			
			} else {
				// ErrorCode
				this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
				assert myXML.Error.@ErrorID.toString() == errorID;
	
				// ErrorReason
				this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
				assert myXML.Error.Reason.toString() == errorReason;

				// ErrorLink
				this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
				assert myXML.Error.ErrorLink.toString() == errorLink;
			}
		} else {
			return false;
		}
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract NodeUserID and NodeAccountId" id="d619bddf-578b-4b54-aaa7-7b46228b1307">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def XMLbody       = testCase.getPropertyValue("XMLbody");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion");

			// Verify response sizes...
			assert myXML.size() == 1;

			/*
			String accountId = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID";
			*/
			String accountId = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Subject"."saml2:NameID";
			
			this.log.info "accountId [$accountId]";
			this.log.info "userId [$userId]";

			testCase.setPropertyValue("assertionAccountId",accountId.substring(accountId.lastIndexOf(":")+1, accountId.length()));
			testCase.setPropertyValue("assertionUserId",   userId.substring(userId.lastIndexOf(":")+1,userId.length()));
			testCase.setPropertyValue("assertionAccountIdFULL",accountId);
			testCase.setPropertyValue("assertionUserIdFULL",userId);

			this.log.info "assertionAccountId property is " + testCase.getPropertyValue("assertionAccountId");
			this.log.info "assertionUserId property is " + testCase.getPropertyValue("assertionUserId");
	} else {
		return false;
	}
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>" id="16d65320-af21-40c7-bb24-038eac085d47">
        <con:settings/>
        <con:config>
          <script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
//import org.apache.commons.codec.binary.Base64;
import org.opensaml.xml.util.Base64;

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	
int compressedLength = 0;
//String XMLbody = testCase.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = testCase.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");

String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
testCase.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);
    
//ByteArrayOutputStream byteOutputStream    = new ByteArrayOutputStream();
//DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(byteOutputStream);

//deflaterOutputStream.write(xmlBytes, 0, xmlBytes.length);
//deflaterOutputStream.close();

/*
// next, base64 encode it
Base64 base64Encoder = new Base64();

byte[] base64EncodedByteArray = base64Encoder.encode(byteOutputStream.toByteArray());
String base64EncodedMessage = new String(base64EncodedByteArray);
*/
byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);

// finally, URL encode it
//String urlEncodedMessage = URLEncoder.encode(base64EncodedMessage, "UTF-8");
testCase.setPropertyValue("assert", base64encodeStr);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return extracted Properties back to calling Test Case" id="cc007a66-4224-4313-ae88-3424ae13d41d">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertXML",testCase.getPropertyValue("assertXML"));
callTC.setPropertyValue("assert",testCase.getPropertyValue("assert"));
callTC.setPropertyValue("assertId",testCase.getPropertyValue("assertId"));
callTC.setPropertyValue("assertionAccountId",testCase.getPropertyValue("assertionAccountId"));
callTC.setPropertyValue("assertionUserId",testCase.getPropertyValue("assertionUserId"));
callTC.setPropertyValue("assertionAccountIdFULL",testCase.getPropertyValue("assertionAccountIdFULL"));
callTC.setPropertyValue("assertionUserIdFULL",testCase.getPropertyValue("assertionUserIdFULL"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbc6rMEn33V1juR8twUbzVTqqGa1BRQby+4TAKioAMCPrrz4DRaHb25TupSiXTdPes6V40a35i6+CxXYAximI38Muq+Fpp2fV6GzbWtfqm06k1mp16bd20NjXW5hpNq7Vmm3a7UlYxTpDq49jy49cKSzNMjW7V2KbJtLsM2200XtoNblUpz1CESWbi8kJXytnB83G32PW1kkR+N7Cwi7u+dUC4G8PuBGiDLvHsWjdIlbefV5DFhtGbE8dhl6Lgi40g8jz4AoMD9ZN68vlp4+7E3fpWnEToY08bv1Y+YtM0fUnrL0G0pViapim6QxEfG7vbH5W30i0Y2aq/Ca5rwfID34WW516sHJSGYiewy8DbBpEbO4ffpGYohs5T11AGa5Bp+D8q1OcGBbp/zPQEMsJWDTsWc0tmoA2KkA9ReWqor5Uf/9TAa6gZWT7eBNEBf1n/N0TIPyEvCJFdw7eD3cD9e8ZvqvX2E8Gu6kMvwe4JDXOWhBZEuDyO0MbNBi4m3LNxueh+OcM3giH4Xzryk3rESWBT31RGdLcIx/9Pux5bdc0ys7wEvTlrOxgtFLcpdaodHnun/XkSr96ncgxfCwiPzldQ905/rL/y9E6rj6BdUxpdUm8Dh2tlFoh6uMq05WZ/YKqbjm/358ez47ZVb3BwIzBenx3meLbAZYiWdW2nOFGM+t55rYCDtDzGpT1wYLJMq52WNqbWyrktOAhHy8A99ar+cdboycLUj+1s0vHHGFHjvdSytUbYU0aJbnID15AWB1Pgd3orXpQ4HYQctDcti+1cTKhJAX79PNPjGfJz9dG5OGT+/4KjO6IVW/eFkA+KDXk7Y/SmqaqYXAQBnCdbkKo82JLfHRjy2/3R2btKJ6V5oOsyEAXe20kDDewVwEwl3tGE2UzLhAvo8dvhjASaJeCteM2QUjFdijNdf5dSx7SVGamIl6wu0lADuAgWHE0ypJlomJKmgeBqyzRxrWQ7baKlqr4USySBKGXhxVY6MVIyF7Iqp004djnhktViRuzyeXAYntam5GmCpgiTozJR13VRl3rAWM4hKyck9jI4hEFpOeUfgnoh2gEkpzTZE1w0c59q5pQdioZV2Mxnm6YqPU3HqaAXp1JKUtqbTS+ftRB4TbAPUiaZYHytBTQFeUivFj1szTlfM0AqbovgvpTaoxsQTafTknCt1UBKDcmYDmXNUFMJFDZRSj28ZofOWnFOsK5nPRPsHhsj6NJc9slz3zjBM3csWYoM1ocZA+uGA13OtRZBul21U1Ff9vrBSiVphkCXeF4HBBAN8qOR+vNgwM+4Ueh2WBcNNnJwQE5U0pigvz9dMrrt1kfb8XDOiZt9a6y447plO5TqQXZX3wNVRXafcXTLNpaUIfrupTnqTxfIjZaXeMjpTNNtcyVjnkwXYuC17PfFctqvZkuom6PxZDofX7JseNy1L178PuLfo0lPE7ejIUJjDKsUbcm82RY5Yfm+I3zaGDTiSmCr8QAou+1WcgmB+ffdlYTvhiYR8gJNSBVhLigToChVSeVFXd/IDjOGyiyZMkNNlWyPlOm8XBheaSXwIukUbc1X4ZKV6ZUJ7CKZ3pDkrT7lqr0FWulDz5zFIA1nG59haCXU3zdauoVazgBbTSc8eYv4UqKCqTUKe3TWnzVp5qjbXm/SAdN6NmH32cjZrs777WpPmrJ8eHWWJvBm5gPHVEKxeUk3JUMD7ev7lmnqtG548JCF6wPMRJP0rAgOTF4yZJ2eZqII+lcbNgGb4eVF2mmCVMSXQKZZhBan9cLBS3/ojkwpIaRNHuiyW7P0XzmWU6z0zLGjAHTwlWPSlWMS2ByraltkMNcUQjxPt7wiHfXWbNDrhLS+GOxLfFWmtrHrNUZ+OzX71TlzTlvOTp/PO6roCFV/s3Tq65inrQvUUW/fUlxjL/rNhnfWBprOTV3KO9M7dEzxoDRUGV+qxxeZ6kRJlT+s3MPlUm+w08N4kpzUqdXHzNlZH+eddDd+b1JUpJy5S2t10uVFAJfX78jXIXk3Xsco9ThgnybwTXpNkvUOwfi2zL/DqliWycfRiv8s43KLa9c2hWs3zLUgjpEfV97yqFzCdRMi9Fy7S76c1zVodGS2zctsk2mwXKMt0Q2akWlAc50OzTblm9a7ovgCUQj8jZvvlYvZ68f6zwDhobtGVoSiyh8y5XUqq75B1EfgY2QGr5U2y8pCU2q1pQYtC3WBb9c7EiOwLZajWaEhVMrDIB75owhsYhQ9COTWV4FsIOiGLspV9IeWwDEpxNE6JbHHvJysFx8lRGZHudLtso02VxSAspNDCMkDMt2iMMDxS+iEhZj57TG+PrudmPjYbu6Ac9A8It1C30j6+g3xLydjv5X+t/Qgsd1cs5DyxZELr0ieH32yIafBnQos+eE6N9R356+Gp8TU1zPd97JPLrxT+n7lIZKZqKriWoFJ7Y/Wy/ElOZ2SotqtXDFGJD3FUDQ1QTAhqu9sBnvkU/cM1L/o7TvmL/ve7c/oktjxJzF5WQ+EGOVi+fe71lM0KUCMsvg7m+CR21W++R8vYLALcz9iHpM/aRDZn3X/JtfDPgRyPmhcf5uvcqF8fm7wB6G7MCBZXTJrgugx93fx3+39bLyX6w4lJqxYJzH6/ZNyPkReKxaEQeLHqlgpDI+DrcAcn0PU/XT6JU2hVD+uHhn+7dVjoQ0m0EEHq3L3df/uXHOLxkNEorBbYHmtZOQSTTb3tw+D9APg97OUlr+ZpeBewKeTvP1i/tXyUNOvzH77Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>assertPackaged</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertRaw</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">4219</con:value>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">text/xml;charset=ISO-8859-1</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTSGet</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 200 OK</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Authorization Information Extraction via STS</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<saml2:Assertion ID="7d338c4b-3f99-4693-b6af-2d546a7b26d8" IssueInstant="2011-07-26T18:12:44.845Z" Version="2.0" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"><saml2:Issuer>http://c.decellc.com/</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#7d338c4b-3f99-4693-b6af-2d546a7b26d8">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"><ec:InclusiveNamespaces PrefixList="ds saml2 xs" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>hbdoOXGi6E9+9BslvkyStZHUFtc=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
j6EOzwlfcNbGVoDQpZxMYfkm1+f9ndKWqyhi8IlLmirAPbyh1qyaAzNeY3MjGhrteKlybGAmEYqt
kAhcuYw+97MP/bGy8ChesrYoivJ+nqV4JFCUntdxS9nPse/PkE7dM4pJGOuQT5LiREXmTCBjQ7tX
5QAp5cdf7a29zTcMEos=
</ds:SignatureValue>
<ds:KeyInfo><ds:X509Data><ds:X509Certificate>MIIDuzCCAySgAwIBAgIBAjANBgkqhkiG9w0BAQQFADCBljELMAkGA1UEBhMCVVMxCzAJBgNVBAgT
AlZBMREwDwYDVQQHEwhTdGVybGluZzENMAsGA1UEChMEREVDRTEMMAoGA1UECxMDbGxjMSMwIQYD
VQQDExpzdG9teGxic2I5MS52YS5uZXVzdGFyLmNvbTElMCMGCSqGSIb3DQEJARYWc2FudG9zLmpo
YUBuZXVzdGFyLmJpejAeFw0xMDAzMTkwMTU2NDRaFw0xMTAzMTkwMTU2NDRaMIGJMQswCQYDVQQG
EwJVUzELMAkGA1UECBMCdmExETAPBgNVBAcTCFN0ZXJsaW5nMRAwDgYDVQQKEwdOZXVzdGFyMQ0w
CwYDVQQLEwRERUNFMRIwEAYDVQQDEwlsb2NhbGhvc3QxJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5q
aGFAbmV1c3Rhci5iaXowgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALBV5Opi92ieLfFomehr
M1oKkvzx08i3OgPNW5Dfk7PGiP3adh/Ilc2j3kAIIedK1hQadRY/RDniz6OKUXeirYztN5Q16i85
RWuUXDol7dHXYUK+xYcQTOPSUWPzxxNqj8zltHOBHrSJMDgONeePsc+/0aFBT8D5CYHjHEwfR0e5
AgMBAAGjggEiMIIBHjAJBgNVHRMEAjAAMCwGCWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRl
ZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4EFgQU5+JXeZQNlTVtAwpVfn110GpQHfMwgcMGA1UdIwSBuzCB
uIAUaOpJ0xKV601qQdlJS9AU3xS2kxOhgZykgZkwgZYxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJW
QTERMA8GA1UEBxMIU3RlcmxpbmcxDTALBgNVBAoTBERFQ0UxDDAKBgNVBAsTA2xsYzEjMCEGA1UE
AxMac3RvbXhsYnNiOTEudmEubmV1c3Rhci5jb20xJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5qaGFA
bmV1c3Rhci5iaXqCAQAwDQYJKoZIhvcNAQEEBQADgYEAfq+I8D1s56CpsWwgBGEqQ7VLJ9p0QXLk
B+F/gtil4On8wTK+W1yw7hjQWW9IDhC+nfYh3btB0azcQeJk7GiRkDn64lyMLMQ5Ui/ly0jeqwsL
NI1nE3tzF/9ru+BmZimzz342UmPSuvIUaKs1yhbqW9wjPH6//rGy5z7ZvQFXocY=</ds:X509Certificate></ds:X509Data></ds:KeyInfo></ds:Signature><saml2:Subject><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">urn:dece:userid:org:dece:A49F28BF26142548E0401F0A0599026F</saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><saml2:SubjectConfirmationData InResponseTo="822FC6E78E40FC3CB839E1C272502C4C" NotOnOrAfter="2011-07-27T18:12:44.845Z" Recipient="http://stdecqavutl1.va.neustar.com:2485/saml/dumpcustomerpost.php"/></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions NotBefore="2011-07-26T18:12:34.845Z" NotOnOrAfter="2012-07-26T18:12:44.845Z"><saml2:AudienceRestriction><saml2:Audience>urn:dece:org:org:dece:222259</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions><saml2:Advice><saml2:AssertionURIRef>https://qa.q.uvvu.com:7001/rest/1/0/SecurityToken/Assertion/7d338c4b-3f99-4693-b6af-2d546a7b26d8</saml2:AssertionURIRef></saml2:Advice><saml2:AuthnStatement AuthnInstant="2011-07-26T18:12:44.845Z"><saml2:AuthnContext><saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef><saml2:AuthenticatingAuthority>urn:dece:org:neustar:coordinator</saml2:AuthenticatingAuthority></saml2:AuthnContext></saml2:AuthnStatement><saml2:AttributeStatement><saml2:Attribute Name="accountID" NameFormat="urn:dece:type:accountID"><saml2:AttributeValue xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</saml2:AttributeValue></saml2:Attribute></saml2:AttributeStatement></saml2:Assertion>]]></con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of STS API" searchProperties="true" disabled="true" id="b80a3269-4a8d-49fb-9a2b-b2fb317e21c8">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="e52ac95e-6350-4c3e-804a-60b68fb237c5">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("SAMLassertion",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("tokentype",null);
testCase.setPropertyValue("expectErrTypeSTS",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="56ff7333-708f-4eda-a621-0fc265a70879">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid","222259");
testCase.setPropertyValue("username","SCHOrg1Full1");
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("tokentype",callTC.getPropertyValue("tokentype"));
testCase.setPropertyValue("expectErrTypeSTS",callTC.getPropertyValue("expectErrTypeSTS"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="e22aceee-ade7-431c-ba0b-4b16fa40d6c5">
        <con:settings/>
        <con:config>
          <script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testCase.getPropertyValue("nodeid");

RestTestRequestStep  testStep = testCase.getTestStepByName("STS - POST");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {
	case "222259":
		keyStorePath = "/opt/dece/certs/222259_concat.pem";
	break;
	case "0798":
		keyStorePath = "/opt/dece/certs/0798_concat.pem";
	break;
	case "0701":
		keyStorePath = "/opt/dece/certs/0701_concat.pem";
	break;
	case "0702":
		keyStorePath = "/opt/dece/certs/0702_concat.pem";
	
}

this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="STS - POST" id="8edb39d6-4df7-44d4-99a3-64aff8b1a83b">
        <con:settings/>
        <con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange?" methodName="STS - POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="STS - POST" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting>
            </con:settings>
            <con:endpoint>https://qa.p.uvvu.com:7002</con:endpoint>
            <con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="http://www.decellc.org/schema/2010/10/dece">
  <Username>${#TestCase#username}1</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="6bd84862-4b6d-42a7-b7dd-1b0570c0970f">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def tStep  = testCase.getTestStepByName('STS - POST');

/*
*  Get the HTTP headers
*/
def status = tStep.httpRequest.response.responseHeaders["#status#"]; 
def connection = tStep.httpRequest.response.responseHeaders["Connection"];
def contentType = tStep.httpRequest.response.responseHeaders["Content-Type"];
def contentLength = tStep.httpRequest.response.responseHeaders["Content-Length"];
def contentLocation = tStep.httpRequest.response.responseHeaders["Location"];

log.info status[0];
//log.info connection[0];
log.info contentType[0];
log.info contentLength[0];
log.info contentLocation[0];

testCase.setPropertyValue("status",status[0]);
//testCase.setPropertyValue("connection", connection[0]);
testCase.setPropertyValue("contentType", contentType[0]);
testCase.setPropertyValue("contentLength", contentLength[0]);
testCase.setPropertyValue("contentLocation", contentLocation[0]);

//this.log.info "contentLength [$contentLength]";

if (contentLength[0].toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
    def rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);
      log.info strVal[0];

    int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");

    	//XMLbody =  strVal.tokenize('\n').last();

	String XMLbody  = strVal.substring(startAssert, strVal.size());
     
	testCase.setPropertyValue("XMLbody", XMLbody);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers and save assertion" id="c7cddc89-eca9-42a2-abca-7a469d75d51b">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url           = testProject.getPropertyValue("targetURL");
def urnacct       = testProject.getPropertyValue("urnaccount");
def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTS");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = true;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "text/plain; charset=UTF-8";
		contentLengthZero = true;
		doContentLocaton  = true;
		dobodyXML = false;
	break;
	case "FORBIDDEN":
	default:
		errorReason = "Forbidden";
		errorID = "Forbidden";
		errorLink = "";
		orgRequest = "";
		doContentLocaton  = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}


//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/1/0/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} else {
		return false;
	}
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return the assertion to the Calling Test Case" id="723bd0a9-a3c7-4aec-baf4-2c18ea38ffbc">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",testCase.getPropertyValue("assertionUUID"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="f5dae155-29df-4259-a906-5b7167213b2b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Authorization Information Extraction via STS</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Test Configuration/Setup</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6f8a0720-d056-4d0a-a707-d5c1fcddb9da</con:value>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>tokentype</con:name>
          <con:value>urn:dece:type:tokentype:usernamepassword</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTS</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>SCHOrg1Full1</con:value>
        </con:property>
        <con:property>
          <con:name>password</con:name>
          <con:value>Password1</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value>HTTP/1.1 201 Created</con:value>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value>text/plain; charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7002/rest/1/0/SecurityToken/Assertion/6f8a0720-d056-4d0a-a707-d5c1fcddb9da</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLassertion</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ErrorList xmlns="http://www.decellc.org/schema/2010/10/dece" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#" >
<Error ErrorID="Forbidden">
       <Reason>Forbidden</Reason>
        <OriginalRequest></OriginalRequest>
       <ErrorLink></ErrorLink>
    </Error>
</ErrorList>]]></con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>QC_TestPlanDirectory</con:name>
        <con:value/>
      </con:property>
      <con:property>
        <con:name>QC_TestLabDirectory</con:name>
        <con:value/>
      </con:property>
      <con:property>
        <con:name>QC_TestSet</con:name>
        <con:value/>
      </con:property>
    </con:properties>
    <con:reportParameters/>
  </con:testSuite><con:testSuite name="Test Configuration/Setup" id="bdd2e298-40e3-410d-a689-4bdaa7d9c7c9" disabled="true">
    <con:description/>
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Authorization Information Extraction via STS" searchProperties="true" id="e09fee41-994f-40ae-a637-8bc8f7292a27">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Properties" id="be0ee034-9802-4861-b21b-f8ecffd8df27">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodetype",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("username",null);
testCase.setPropertyValue("password",null);
testCase.setPropertyValue("tokentype",null);
testCase.setPropertyValue("expectErrTypeSTS",null);
testCase.setPropertyValue("expectErrTypeSTSGet",null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("nodeaccountid",null);
testCase.setPropertyValue("nodeuserid",null);
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("userrowoid",null);
testCase.setPropertyValue("accountrowoid",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("assert",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properities" id="811a3703-219d-49d1-b289-6a28825c522a">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("username",'schfau2');
testCase.setPropertyValue("password",callTC.getPropertyValue("password"));
testCase.setPropertyValue("tokentype",callTC.getPropertyValue("tokentype"));
testCase.setPropertyValue("expectErrTypeSTS",callTC.getPropertyValue("expectErrTypeSTS"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call STS" id="02bc3281-069d-4e68-968d-6cde9ce7f5d9">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("STS API")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Disable QC Uploading" id="b579c052-71a9-4edb-9de6-a1d9ff39742a">
        <con:settings/>
        <con:config>
          <script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call STS GET" id="498b0285-446c-4d01-b3b3-e3542bf8a9c1">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("STS GET API")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Extract ACCOUNT/ACCOUNT_USER Information" id="862821e2-508c-42f2-ada2-281a33316917">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:dbConnectionName xsi:nil="true"/>
          <con:driver>${#Project#JDBCDriver}</con:driver>
          <con:connectionString>${#Project#JDBCConnStr}</con:connectionString>
          <con:password/>
          <con:query>select a.ACCOUNT_OID, a.USER_OID, b.NODE_USER_ID, c.NODE_ACCOUNT_ID, b.ROW_OID, c.ROW_OID
from 
   ACCOUNT_USER a, NODE_USER b, NODE_ACCOUNT c
where 
   a.USERNAME = :uname
   AND
   a.USER_OID = b.USER_OID
   AND
   a.ACCOUNT_OID = c.ACCOUNT_OID
   AND
   b.NODE_OID = c.NODE_OID 
   AND 
   b.NODE_OID = :nodeid</con:query>
          <con:assertion type="XPath Match">
            <con:configuration>
              <path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</path>
              <content>1</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
          <con:properties>
            <con:property>
              <con:name>uname</con:name>
              <con:value>${#TestCase#username}</con:value>
            </con:property>
            <con:property>
              <con:name>nodeid</con:name>
              <con:value>${#TestCase#nodeid}</con:value>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="TestCase-Level Property Transfer" id="14232f58-e533-4724-867a-e548d8c00052">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" entitize="false" transferToAll="false">
            <con:name>accountoid</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep>
            <con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/ACCOUNT_OID[1]</con:sourcePath>
            <con:targetType>accountoid</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" transferChildNodes="false" useXQuery="false" transferToAll="false" entitize="false" ignoreEmpty="false">
            <con:name>useroid</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep>
            <con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/USER_OID[1]</con:sourcePath>
            <con:targetType>useroid</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" entitize="false" ignoreEmpty="false">
            <con:name>userrowid</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep>
            <con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/ROW_OID[1]</con:sourcePath>
            <con:targetType>userrowoid</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" entitize="false" transferToAll="false" ignoreEmpty="false">
            <con:name>acctrowid</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep>
            <con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/ROW_OID[2]</con:sourcePath>
            <con:targetType>accountrowoid</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Setup base node-level information based on calling Node type" id="4b450d66-962f-4b3d-ad1d-8726c831d898">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def baseNodeType = testCase.getPropertyValue("nodetype");

//
//  Establish project-defined properties at the test case
//  level
//
testCase.setPropertyValue("cid",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("alid",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("deceorgid",testProject.getPropertyValue("deceorgid"));

if (testProject.getPropertyValue("targetPort") == "443") {
	testCase.setPropertyValue("targetURL",testProject.getPropertyValue("targetHost"));
	testProject.setPropertyValue("targetURL",testProject.getPropertyValue("targetHost"));
} else {
	testCase.setPropertyValue("targetURL",testProject.getPropertyValue("targetHost") + ":" + testProject.getPropertyValue("targetPort"));
	testProject.setPropertyValue("targetURL",testProject.getPropertyValue("targetHost") + ":" + testProject.getPropertyValue("targetPort"));
}
//
//  Establish the basic nodeaccountid, nodeuserid, etc.. by 
//  nodetype
testCase.setPropertyValue("assert",testCase.getPropertyValue("assert"));
testCase.setPropertyValue("assertId",testCase.getPropertyValue("assertId"));
testCase.setPropertyValue("nodeaccountid",testCase.getPropertyValue("assertionAccountId"));
testCase.setPropertyValue("nodeuserid",testCase.getPropertyValue("assertionUserId"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Promote variables to calling TestCase" id="e5158708-0e7e-454e-8e57-3e039638730e">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def toTCName = testCase.getPropertyValue("tName");
def toTSName = testCase.getPropertyValue("sName")

//
//  Transfer all the properites created in this test case
//  to the calling testcase.
//
if (toTCName != "" &amp;&amp; toTSName != "") {
	def toTC = testRunner.testCase.testSuite.project.getTestSuiteByName(toTSName).getTestCaseByName(toTCName);

	Map testCasePropertiesMap = testCase.getProperties();
	Set testCasePropertiesKeySet = testCasePropertiesMap.keySet();
	Iterator iter = testCasePropertiesKeySet.iterator();
	while(iter.hasNext()){
		String testCasePropertyKey = (String)iter.next();

		switch (testCasePropertyKey) {
			case "synced":
			case "nodetype":
			case "expectErrTypeSTS":
			case "expectErrTypeSTSGet":
			case "username":
			case "password":
			case "tName":
			case "sName":
			break;
			default:
				toTC.setPropertyValue(testCasePropertyKey,testCase.getPropertyValue(testCasePropertyKey));	
			break;
		}
	}
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>userrowoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>schfau2</con:value>
        </con:property>
        <con:property>
          <con:name>tokentype</con:name>
          <con:value>urn:dece:type:tokentype:usernamepassword</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>Get SAML Assertion - STS</con:value>
        </con:property>
        <con:property>
          <con:name>targetURL</con:name>
          <con:value>:</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Common Test Steps</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLassertion</con:name>
          <con:value>nVdbd6o8E773V7jcly7LQWnFtdu1wlFUVBCPdxgioAhKQNBf/wWs1nZ3H97vostmyMw8mXmSPPmJ7X3AdgDGKE78KKxq0mttzbAsz29aDQetm41Ws7lutNvrdYPjmhxsvdhNHrZqVQ3jFGkhTuwwea2xNMM0aLbBshbDdTi+w/JPHNde1aozFGMSmUx5omvVfB+EuFNmfa2lcdiJbOzjTmjvEe4ksDMB+qBDZnbsG6Ta288ryDJh/OYlyaFDUfDJQRAFAXyC0Z76SX2a89PBnYnvhnaSxug9p4Nfa+++WZY9Zc2nKHYplqZpiuYpMsfBvvuj9la5OSNHCzfRdSzaYRT60A78i12A0lHiRU4VBG4U+4m3/01ohmLoInQD5bABmVb4o0Z9JCjR/WOkTyBjbDewZzO3YCbaoBiFEFWnpvZa+/FPDby6WrEd4k0U7/GX8X9DhMITCqIDchr4trAbuH+P+E213n4i2NFCGKTYP6FhwZKDDRGujmO08fOBjwn3HFwtu1/N8Y1gCP6XjvykHnES2NQ3lZF8F+Hk/2nXY6uuUWZ2kKI34xwKo3k8lqPxaZOl7VXESWEwDYdr+FpCeJx8BXXv9Pv4K0/vtHp3mpszK3c2m65Ob0aeVG/lG7IZ0/V8aUmU4xq2Z8LJiT4dB8tgPtLseAXOx73YPkR1tOSgPkl9WZ6nblcfyxVlFrKB11otz71nc6NsPSaEMgXC1taQgrFnhcOIPWzW464b+Wfa7ncVf7FayJKqZnKP3eOROYvPp5Y605FUwWOHkazntM6MxDOmT4YDXj/W9LiGYl19dC4XWfy/4GheshP7PhCLg2JDdmeC3nRNk9KLKILzxAWZJgCX/G3BUHB3R2/nq3xGC8AwFCCJQrCVBzrYqYCZyoKni7OZnosX0BPc4Yw4WhUQrATdlDMpW0ozw+jKmWc56uy8VoN0dZGHOsCls+jpsinPJNOSdR1EV1uuS2s13+oTPdOMpVQhASQ5P1wclU+QmvuQ1Th9wrHLCZeuFjNiV86D/fC0tuRAF3VVnBzVibZuSobcA+ZyDlklJb6Xwf4QVZZT4cGpd0BbgJSMJjnBRbd2mW5N2aFk2qXN+mzTNbWnGzgTjXJVakXOerPp5aMWoqCLzl7OZQuMr7WAlqgM6dWih+05F+omyCS3dO7LmTO6AdENOquI11oN5MyUzelQ0U0tk0Fpk+QswGt26K1V7wSbRt6zwPaxMaIhz5WQfA/NEzxzx4qtKmC9nzGwaXrQ53x7EWXuqp1JxrLXj1YaCTMEhiwIBiCAaFAsjdRfAANhxo0OPs/6aLBRoj3y4orORP3d6ZLTbb85csfDOSdtdi9j1R83bcejtACy2+YOaBpy+oxn2I65pEwp9C/Po/50gfx4eUmGnME8+22uYs7T6UKKghenu1hO+/V8CQ1rNJ5M5+NLng+P2/YlSLojoRtPerrkjoYIjTGsU7StCFZb4sRld0v4tDFpxFWAqwsAqFvXlX1CYKG7vZKwa+oyIS/QxUwV56I6AapalzVBMoyN4jFjqM7SKTPUNdkJSJnOy4UZVFaiIJFO0fZ8dViyCr2ygFMGM1qy4hpTrt5boJUxDKxZArLDbBMyDK0ejO5Gz1yoFwxwtGwikF0kVFINTO3RoUfn/dkzzRwNJ+hNeDBt5hN2l488d3XeuasdacryYessLRDMrAeOaYRi84phyaYO2tf9luvatGkGcJ8f1nuYSxbpWekcWYJsKgY9zSUJ9K82bAE2x8uLvNVFufSvgFy3CS1O64WHl+HQH1lySkibPtBlu2bpv3KsoFjlM8eOIjDAV47JV47JYHOsa22JwdyzeMDzzBVU+Wi8zAY9/kAbi8GuItQVyk38oDUK25nVr8+Zc/bibY35nNckT6yHm6XXXCcCbV+ggXq7F9U3d1L43ArO+kA3uKlPBWd6i44ZHlSGGhPKzeSiUHyc1oX9yt9fLs0WO92PJ+lJm9p9zJy99XHOZ9tx95miYvXMXV5WJ0NZRHB5vUe+HpJ34/UYpR4P2E8n8E16TdL1FsHkNizuYU2qKuRytJM/y7jC4juNTTm1cyi0IE5QmNTeCq9CwnVSIvR8p0NuzuuYB7woigrTBIIo8S1Fpls0o9CA5nieVZ6bN613RfEFohiFG7/IVYjZ62X9Z4Bw31kjO0Zx7Q+RijpVtdAk6iMKMbIiombBMyNzbf6Z4bmm0morHNNmWU6Sn2WOYRihVh1GySgcxWCToPhBIDe/CmQTQf/go0JFv2sJnJBCHO1TmgTM08l+ClFKZHZcKN0O22pzZQEoJ90fIPlATrf4EOHk6eAdSjHz22V8/XZbMZnj+MUEXIAWEOkW+kbSMzfEv6yM/Vb638KD1PELzULKl8Q+vCL5/OmDDQUN7lSgX2j2hvk+9V9def5XV+oPiKivxbhnck7+Q97bw4RobSLHyvcIJk072k/Hp/R0Sss2vRRSMybhKZriqQmCKZGLZyvaoZC6R6D+RajfMX/Je7d/RpcmXjhJyC7fE0ZVy+HfH2mfvEkBEpQn39nEgDzLiuR/fLnBDizmEfOY/GRR7HzU/ZtYD3kI5OKE8kO3GBUK+/y5ve87oQMjEtUnh1QUP8b+zv+73J+N93LdoSSEFes0Qb//Ui1On9eaDWGUhokm1UrD44lYYk7OB9T5mPRLmFLivr9ZcvzbN8tCH0ygh/Z27T7X//vkhl82HiLihf0Sy2stJ69vkjx0H07gd4CPhzBDtt7D3vuE9+0X86+Wh8p95e/b/wA=</con:value>
        </con:property>
        <con:property>
          <con:name>password</con:name>
          <con:value>Password1</con:value>
        </con:property>
        <con:property>
          <con:name>nodeuserid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>nodetype</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>222259</con:value>
        </con:property>
        <con:property>
          <con:name>nodeaccountid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTSGet</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTS</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>deceorgid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>cid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF26142548E0401F0A0599026F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">A49F28BF260F2548E0401F0A0599026A</con:value>
        </con:property>
        <con:property>
          <con:name>assertId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d338c4b-3f99-4693-b6af-2d546a7b26d8</con:value>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVdbc6rMEn33V1juR8twUbzVTqqGa1BRQby+4TAKioAMCPrrz4DRaHb25TupSiXTdPes6V40a35i6+CxXYAximI38Muq+Fpp2fV6GzbWtfqm06k1mp16bd20NjXW5hpNq7Vmm3a7UlYxTpDq49jy49cKSzNMjW7V2KbJtLsM2200XtoNblUpz1CESWbi8kJXytnB83G32PW1kkR+N7Cwi7u+dUC4G8PuBGiDLvHsWjdIlbefV5DFhtGbE8dhl6Lgi40g8jz4AoMD9ZN68vlp4+7E3fpWnEToY08bv1Y+YtM0fUnrL0G0pViapim6QxEfG7vbH5W30i0Y2aq/Ca5rwfID34WW516sHJSGYiewy8DbBpEbO4ffpGYohs5T11AGa5Bp+D8q1OcGBbp/zPQEMsJWDTsWc0tmoA2KkA9ReWqor5Uf/9TAa6gZWT7eBNEBf1n/N0TIPyEvCJFdw7eD3cD9e8ZvqvX2E8Gu6kMvwe4JDXOWhBZEuDyO0MbNBi4m3LNxueh+OcM3giH4Xzryk3rESWBT31RGdLcIx/9Pux5bdc0ys7wEvTlrOxgtFLcpdaodHnun/XkSr96ncgxfCwiPzldQ905/rL/y9E6rj6BdUxpdUm8Dh2tlFoh6uMq05WZ/YKqbjm/358ez47ZVb3BwIzBenx3meLbAZYiWdW2nOFGM+t55rYCDtDzGpT1wYLJMq52WNqbWyrktOAhHy8A99ar+cdboycLUj+1s0vHHGFHjvdSytUbYU0aJbnID15AWB1Pgd3orXpQ4HYQctDcti+1cTKhJAX79PNPjGfJz9dG5OGT+/4KjO6IVW/eFkA+KDXk7Y/SmqaqYXAQBnCdbkKo82JLfHRjy2/3R2btKJ6V5oOsyEAXe20kDDewVwEwl3tGE2UzLhAvo8dvhjASaJeCteM2QUjFdijNdf5dSx7SVGamIl6wu0lADuAgWHE0ypJlomJKmgeBqyzRxrWQ7baKlqr4USySBKGXhxVY6MVIyF7Iqp004djnhktViRuzyeXAYntam5GmCpgiTozJR13VRl3rAWM4hKyck9jI4hEFpOeUfgnoh2gEkpzTZE1w0c59q5pQdioZV2Mxnm6YqPU3HqaAXp1JKUtqbTS+ftRB4TbAPUiaZYHytBTQFeUivFj1szTlfM0AqbovgvpTaoxsQTafTknCt1UBKDcmYDmXNUFMJFDZRSj28ZofOWnFOsK5nPRPsHhsj6NJc9slz3zjBM3csWYoM1ocZA+uGA13OtRZBul21U1Ff9vrBSiVphkCXeF4HBBAN8qOR+vNgwM+4Ueh2WBcNNnJwQE5U0pigvz9dMrrt1kfb8XDOiZt9a6y447plO5TqQXZX3wNVRXafcXTLNpaUIfrupTnqTxfIjZaXeMjpTNNtcyVjnkwXYuC17PfFctqvZkuom6PxZDofX7JseNy1L178PuLfo0lPE7ejIUJjDKsUbcm82RY5Yfm+I3zaGDTiSmCr8QAou+1WcgmB+ffdlYTvhiYR8gJNSBVhLigToChVSeVFXd/IDjOGyiyZMkNNlWyPlOm8XBheaSXwIukUbc1X4ZKV6ZUJ7CKZ3pDkrT7lqr0FWulDz5zFIA1nG59haCXU3zdauoVazgBbTSc8eYv4UqKCqTUKe3TWnzVp5qjbXm/SAdN6NmH32cjZrs777WpPmrJ8eHWWJvBm5gPHVEKxeUk3JUMD7ev7lmnqtG548JCF6wPMRJP0rAgOTF4yZJ2eZqII+lcbNgGb4eVF2mmCVMSXQKZZhBan9cLBS3/ojkwpIaRNHuiyW7P0XzmWU6z0zLGjAHTwlWPSlWMS2ByraltkMNcUQjxPt7wiHfXWbNDrhLS+GOxLfFWmtrHrNUZ+OzX71TlzTlvOTp/PO6roCFV/s3Tq65inrQvUUW/fUlxjL/rNhnfWBprOTV3KO9M7dEzxoDRUGV+qxxeZ6kRJlT+s3MPlUm+w08N4kpzUqdXHzNlZH+eddDd+b1JUpJy5S2t10uVFAJfX78jXIXk3Xsco9ThgnybwTXpNkvUOwfi2zL/DqliWycfRiv8s43KLa9c2hWs3zLUgjpEfV97yqFzCdRMi9Fy7S76c1zVodGS2zctsk2mwXKMt0Q2akWlAc50OzTblm9a7ovgCUQj8jZvvlYvZ68f6zwDhobtGVoSiyh8y5XUqq75B1EfgY2QGr5U2y8pCU2q1pQYtC3WBb9c7EiOwLZajWaEhVMrDIB75owhsYhQ9COTWV4FsIOiGLspV9IeWwDEpxNE6JbHHvJysFx8lRGZHudLtso02VxSAspNDCMkDMt2iMMDxS+iEhZj57TG+PrudmPjYbu6Ac9A8It1C30j6+g3xLydjv5X+t/Qgsd1cs5DyxZELr0ieH32yIafBnQos+eE6N9R356+Gp8TU1zPd97JPLrxT+n7lIZKZqKriWoFJ7Y/Wy/ElOZ2SotqtXDFGJD3FUDQ1QTAhqu9sBnvkU/cM1L/o7TvmL/ve7c/oktjxJzF5WQ+EGOVi+fe71lM0KUCMsvg7m+CR21W++R8vYLALcz9iHpM/aRDZn3X/JtfDPgRyPmhcf5uvcqF8fm7wB6G7MCBZXTJrgugx93fx3+39bLyX6w4lJqxYJzH6/ZNyPkReKxaEQeLHqlgpDI+DrcAcn0PU/XT6JU2hVD+uHhn+7dVjoQ0m0EEHq3L3df/uXHOLxkNEorBbYHmtZOQSTTb3tw+D9APg97OUlr+ZpeBewKeTvP1i/tXyUNOvzH77Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>alid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value>
        </con:property>
        <con:property>
          <con:name>accountrowoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Verification of STREAM_DATA row" searchProperties="true" id="15e1c6fe-8bdb-473b-90f3-49e2d36c440b">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="1407a52a-afe6-47c3-8272-08d63f1f522e">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("nodetype",null);
testCase.setPropertyValue("streamhandle",null);
testCase.setPropertyValue("dbxmlresponse",null);
testCase.setPropertyValue("rightstokenid",null);
testCase.setPropertyValue("expectDBStatus",null);
testCase.setPropertyValue("expectTransactionid",null);
testCase.setPropertyValue("expectNickname",null);
testCase.setPropertyValue("expectJDBCSQL",null);
testCase.setPropertyValue("expectDBCreatedBy",null);
testCase.setPropertyValue("expectDBDeletedBy",null);
testCase.setPropertyValue("expectDBCreateUser",null);
testCase.setPropertyValue("expectDBDeleteUser",null);
testCase.setPropertyValue("expectDBStatus",null);
testCase.setPropertyValue("expectDBCreatedByNodeType",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="f7de4848-785e-4348-a26e-75f31b157c76">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("accountoid",callTC.getPropertyValue("accountoid"));
testCase.setPropertyValue("useroid",callTC.getPropertyValue("useroid"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("nodetype",callTC.getPropertyValue("nodetype"));
testCase.setPropertyValue("streamhandle",callTC.getPropertyValue("streamhandle"));
testCase.setPropertyValue("rightstokenid",callTC.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("expectStatus",callTC.getPropertyValue("expectStreamStatus"));
testCase.setPropertyValue("expectTransactionid",callTC.getPropertyValue("expectTransactionid"));
testCase.setPropertyValue("expectNickname",callTC.getPropertyValue("expectNickname"));
testCase.setPropertyValue("expectDBCreatedBy",callTC.getPropertyValue("expectDBCreatedBy"));
testCase.setPropertyValue("expectDBDeletedBy",callTC.getPropertyValue("expectDBDeletedBy"));
testCase.setPropertyValue("expectDBStatus",callTC.getPropertyValue("expectDBStatus"));
testCase.setPropertyValue("expectDBCreatedByNodeType",callTC.getPropertyValue("expectDBCreatedByNodeType"));
testCase.setPropertyValue("expectDBCreateUser",callTC.getPropertyValue("expectDBCreateUser"));
testCase.setPropertyValue("expectDBDeleteUser",callTC.getPropertyValue("expectDBDeleteUser"));

if (testCase.getPropertyValue("expectDBStatus") == "" || testCase.getPropertyValue("expectDBStatus") == null) {
		testCase.setPropertyValue("expectDBStatus","deleted");
}
if (testCase.getPropertyValue("expectDBCreatedByNodeType") == "" || testCase.getPropertyValue("expectDBCreatedByNodeType") == null) {
		testCase.setPropertyValue("expectDBCreatedByNodeType",testCase.getPropertyValue("nodetype"));
}
if (testCase.getPropertyValue("expectDBDeleteUser") == "" || testCase.getPropertyValue("expectDBDeleteUser") == null) {
		testCase.setPropertyValue("expectDBDeleteUser",testCase.getPropertyValue("useroid"));
}
if (testCase.getPropertyValue("expectDBCreateUser") == "" || testCase.getPropertyValue("expectDBCreateUser") == null) {
		testCase.setPropertyValue("expectDBCreateUser",testCase.getPropertyValue("useroid"));
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Extract the STREAM_DATA row" id="d9f64c5e-2a0a-4e86-94cd-17a78f78c388">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:dbConnectionName xsi:nil="true"/>
          <con:driver>${#Project#JDBCDriver}</con:driver>
          <con:connectionString>${#Project#JDBCConnStr}</con:connectionString>
          <con:password/>
          <con:query>select * from STREAM_DATA where STREAM_HANDLE_OID = :sh</con:query>
          <con:properties>
            <con:property>
              <con:name>sh</con:name>
              <con:value>${#TestCase#streamhandle}</con:value>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Property Transfer" id="37d6d2f6-0f47-498c-927f-fcd78a49396f">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" useXQuery="false" entitize="false" transferChildNodes="false" ignoreEmpty="false" transferToAll="false">
            <con:name>a</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Extract the STREAM_DATA row</con:sourceStep>
            <con:targetType>dbxmlresponse</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify DB Row Data" id="f56bb0c5-23a5-400e-9478-b5a8eff45cae">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url       = testProject.getPropertyValue("targetHost");
def urnacct   = testProject.getPropertyValue("urnaccount");
def urnstream = testProject.getPropertyValue("urnstream");
def urnnode   = testProject.getPropertyValue("urnNode");
def acct      = testCase.getPropertyValue("nodeaccountid");

String XMLbody = testCase.getPropertyValue("dbxmlresponse");
String expectStreamHandle = testCase.getPropertyValue("streamhandle");
String expectAccountOID   = testCase.getPropertyValue("accountoid");
String expectRightsToken  = testCase.getPropertyValue("rightstokenid");
String expectUserOID      = testCase.getPropertyValue("expectDBCreateUser");
String expectStatus       = testCase.getPropertyValue("expectDBStatus");
String expectDBCreatedBy  = testCase.getPropertyValue("expectDBCreatedBy");
String expectDBClosedBy   = urnnode + testCase.getPropertyValue("expectDBDeletedBy");
String streamCreateNodeType = testCase.getPropertyValue("expectDBCreatedByNodeType");

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	// Verify sizes...
	assert myXML.ResultSet.Row.STREAM_HANDLE_OID	.size() == 1;
	assert myXML.ResultSet.Row.ACCOUNT_OID.size() == 1;
	assert myXML.ResultSet.Row.RIGHTS_TOKEN_OID.size() == 1;
	assert myXML.ResultSet.Row.STATUS.size() == 1;
	assert myXML.ResultSet.Row.CREATED_BY.size() == 1;
	assert myXML.ResultSet.Row.CLOSED_BY_ORG_ID.size() == 1;
	assert myXML.ResultSet.Row.CLOSED_DATE.size() == 1;
	
	String dbStreamHandle = myXML.ResultSet.Row.STREAM_HANDLE_OID.text();
	String dbAccountOid   = myXML.ResultSet.Row.ACCOUNT_OID.text();
	String dbRightsToken  = myXML.ResultSet.Row.RIGHTS_TOKEN_OID.text();
	String dbUserOid      = myXML.ResultSet.Row.USER_OID.text();
	String dbStatus       = myXML.ResultSet.Row.STATUS.text();
	String dbCreatedBy    = myXML.ResultSet.Row.CREATED_BY.text();
	String dbClosedBy     = myXML.ResultSet.Row.CLOSED_BY_ORG_ID.text();
	String dbClosedDate   = myXML.ResultSet.Row.CLOSED_DATE.text();
	
	//STREAM_HANDLE_OID
	this.log.info "dbStreamHandle [$dbStreamHandle] - expectStreamHandle[$expectStreamHandle]";
	assert expectStreamHandle == dbStreamHandle;

	//ACCOUNT_OID
	this.log.info "dbAccountOid [$dbAccountOid] - expectAccountOID[$expectAccountOID]";
	assert expectAccountOID == dbAccountOid;

	//RIGHTS_TOKEN_OID
	this.log.info "dbRightsToken [$dbRightsToken] - expectRightsToken[$expectRightsToken]";
	assert dbRightsToken == expectRightsToken;

	//USER_OID
	this.log.info "dbUserOid [$dbUserOid] - expectUserOID[$expectUserOID]";
	if (streamCreateNodeType == "llp" || streamCreateNodeType == "llpcs") {
		assert dbUserOid == "";
	} else {
		assert dbUserOid == expectUserOID;
	}

	//STATUS
	this.log.info "dbStatus [$dbStatus] - expectStatus[$expectStatus]";
	assert dbStatus == expectStatus;

	//CREATED_BY
	this.log.info "dbCreatedBy [$dbCreatedBy] - expectDBCreatedBy[$expectDBCreatedBy]";
	assert dbCreatedBy == expectDBCreatedBy;

	//CLOSED_BY
	this.log.info "dbClosedBy [$dbClosedBy] - expectDBClosedBy[$expectDBClosedBy]";
	if (expectStatus == "active") {
		assert dbClosedBy == "";
	} else {
		assert dbClosedBy == expectDBClosedBy;
	}

	//CLOSED_DATE
	this.log.info "dbClosedDate [$dbClosedDate]";
	if (expectStatus == "active") {
		assert dbClosedBy == "";
	} else {
		assert dbClosedBy.length() > 0;
	}
} else {
	assert 1 == 2;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value>0900</con:value>
        </con:property>
        <con:property>
          <con:name>dbxmlresponse</con:name>
          <con:value><![CDATA[<Results>
    <ResultSet fetchSize="10">
        <Row rowNumber="1">
            <STREAM_HANDLE_OID>978DCC35FCD87C08E0401F0A05996438</STREAM_HANDLE_OID>
            <RIGHTS_TOKEN_OID>978DCC35FCC77C08E0401F0A05996438</RIGHTS_TOKEN_OID>
            <ACCOUNT_OID>0900</ACCOUNT_OID>
            <USER_OID>0600</USER_OID>
            <TRANSACTION_ID/>
            <STATUS>deleted</STATUS>
            <STREAM_CLIENT_NICKNAME/>
            <EXPIRATION_DATE>2010-12-09 23:08:53</EXPIRATION_DATE>
            <CLOSED_DATE>2010-12-16 23:08:54.21</CLOSED_DATE>
            <CLOSED_BY_ORG_ID>urn:dece:org:org:dece:1</CLOSED_BY_ORG_ID>
            <CREATED_DATE>2010-12-16 23:08:50.482</CREATED_DATE>
            <CREATED_BY>9116</CREATED_BY>
            <UPDATED_DATE/>
            <UPDATED_BY/>
        </Row>
    </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectDBCreatedBy</con:name>
          <con:value>9116</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBCreatedByNodeType</con:name>
          <con:value>dlpcs</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBCreateUser</con:name>
          <con:value>0600</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBDeletedBy</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBDeleteUser</con:name>
          <con:value>0600</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBStatus</con:name>
          <con:value>deleted</con:value>
        </con:property>
        <con:property>
          <con:name>expectJDBCSQL</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectNickname</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectSQLDefault</con:name>
          <con:value><![CDATA[<Results>     <ResultSet fetchSize="10">         <Row rowNumber="1">             <STREAM_HANDLE_OID>975DA31F89B0B21EE0401F0A059979D9</STREAM_HANDLE_OID>             <RIGHTS_TOKEN_OID>975DA31F899FB21EE0401F0A059979D9</RIGHTS_TOKEN_OID>             <ACCOUNT_OID>0900</ACCOUNT_OID>             <USER_OID/>             <TRANSACTION_ID/>             <STATUS>deleted</STATUS>             <STREAM_CLIENT_NICKNAME/>             <EXPIRATION_DATE>2010-12-15 11:29:52.337</EXPIRATION_DATE>             <CLOSED_DATE>2010-12-14 11:29:53.657</CLOSED_DATE>             <CLOSED_BY_ORG_ID>urn:dece:org:org:dece:0910</CLOSED_BY_ORG_ID>             <CREATED_DATE>2010-12-14 11:29:52.335</CREATED_DATE>             <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>             <UPDATED_DATE/>             <UPDATED_BY/>         </Row>     </ResultSet> </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLDefaultLLP</con:name>
          <con:value><![CDATA[<Results>     <ResultSet fetchSize="10">         <Row rowNumber="1">             <STREAM_HANDLE_OID>*</STREAM_HANDLE_OID>             <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>             <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>             <USER_OID/>             <TRANSACTION_ID/>             <STATUS>${#TestCase#expectDBStatus}</STATUS>             <STREAM_CLIENT_NICKNAME/>             <EXPIRATION_DATE>*</EXPIRATION_DATE>             <CLOSED_DATE>*</CLOSED_DATE>             <CLOSED_BY_ORG_ID>${#Project#urnNode}${#TestCase#expectDBDeletedBy}</CLOSED_BY_ORG_ID>             <CREATED_DATE>*</CREATED_DATE>             <CREATED_BY>${#TestCase#expectDBCreatedBy}</CREATED_BY>             <UPDATED_DATE/>             <UPDATED_BY/>         </Row>     </ResultSet> </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithNickname</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID>${#TestCase#useroid}</USER_OID>        <TRANSACTION_ID/>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME>${#TestCase#expectNickname}</STREAM_CLIENT_NICKNAME>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_DATE/>        <UPDATED_BY/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithNicknameLLP</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID/>        <TRANSACTION_ID/>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME>${#TestCase#expectNickname}</STREAM_CLIENT_NICKNAME>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_DATE/>        <UPDATED_BY/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithTransaction</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID>${#TestCase#useroid}</USER_OID>        <TRANSACTION_ID>${#TestCase#expectTransactionid}</TRANSACTION_ID>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME/>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_DATE/>        <UPDATED_BY/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithTransactionLLP</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID/>        <TRANSACTION_ID>${#TestCase#expectTransactionid}</TRANSACTION_ID>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME/>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_DATE/>        <UPDATED_BY/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectStatus</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectTransactionid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>9116</con:value>
        </con:property>
        <con:property>
          <con:name>nodetype</con:name>
          <con:value>dlpcs</con:value>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>978DCC35FCC77C08E0401F0A05996438</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Dynamic LASP Customer Service Test Cases</con:value>
        </con:property>
        <con:property>
          <con:name>streamhandle</con:name>
          <con:value>978DCC35FCD87C08E0401F0A05996438</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_01751 - StreamDelete - FUNC - DLASP-CS - StreamNotFound - StreamDelete against a stream with EXPIRATION_DATE 7 days into the past</con:value>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value>0600</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Verification of STREAM_DATA_HISTORY row" searchProperties="true" id="c24156e6-e820-47ee-977c-0ca765c6d618">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="7e435145-250e-4fcb-b368-940f6f9927b9">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("nodetype",null);
testCase.setPropertyValue("streamhandle",null);
testCase.setPropertyValue("dbxmlresponse",null);
testCase.setPropertyValue("rightstokenid",null);
testCase.setPropertyValue("expectDBStatus",null);
testCase.setPropertyValue("expectTransactionid",null);
testCase.setPropertyValue("expectNickname",null);
testCase.setPropertyValue("expectJDBCSQL",null);
testCase.setPropertyValue("expectDBCreatedBy",null);
testCase.setPropertyValue("expectDBDeletedBy",null);
testCase.setPropertyValue("expectDBStatus",null);
testCase.setPropertyValue("expectDBCreateUser",null);
testCase.setPropertyValue("expectDBDeleteUser",null);
testCase.setPropertyValue("expectDBCreatedByNodeType",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="e0ade729-4057-47ea-a40a-5c78f53ab1b9">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("accountoid",callTC.getPropertyValue("accountoid"));
testCase.setPropertyValue("useroid",callTC.getPropertyValue("useroid"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("nodetype",callTC.getPropertyValue("nodetype"));
testCase.setPropertyValue("streamhandle",callTC.getPropertyValue("streamhandle"));
testCase.setPropertyValue("rightstokenid",callTC.getPropertyValue("rightstokenid"));
testCase.setPropertyValue("expectStatus",callTC.getPropertyValue("expectStreamStatus"));
testCase.setPropertyValue("expectTransactionid",callTC.getPropertyValue("expectTransactionid"));
testCase.setPropertyValue("expectNickname",callTC.getPropertyValue("expectNickname"));
testCase.setPropertyValue("expectDBCreatedBy",callTC.getPropertyValue("expectDBCreatedBy"));
testCase.setPropertyValue("expectDBDeletedBy",callTC.getPropertyValue("expectDBDeletedBy"));
testCase.setPropertyValue("expectDBStatus",callTC.getPropertyValue("expectDBStatus"));
testCase.setPropertyValue("expectDBCreatedByNodeType",callTC.getPropertyValue("expectDBCreatedByNodeType"));
testCase.setPropertyValue("expectDBCreateUser",callTC.getPropertyValue("expectDBCreateUser"));
testCase.setPropertyValue("expectDBDeleteUser",callTC.getPropertyValue("expectDBDeleteUser"));


if (testCase.getPropertyValue("expectDBStatus") == "" || testCase.getPropertyValue("expectDBStatus") == null) {
		testCase.setPropertyValue("expectDBStatus","deleted");
}
if (testCase.getPropertyValue("expectDBCreatedByNodeType") == "" || testCase.getPropertyValue("expectDBCreatedByNodeType") == null) {
		testCase.setPropertyValue("expectDBCreatedByNodeType",testCase.getPropertyValue("nodetype"));
}
if (testCase.getPropertyValue("expectDBDeleteUser") == "" || testCase.getPropertyValue("expectDBDeleteUser") == null) {
		testCase.setPropertyValue("expectDBDeleteUser",testCase.getPropertyValue("useroid"));
}
if (testCase.getPropertyValue("expectDBCreateUser") == "" || testCase.getPropertyValue("expectDBCreateUser") == null) {
		testCase.setPropertyValue("expectDBCreateUser",testCase.getPropertyValue("useroid"));
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Extract the STREAM_DATA_HISTORY row" id="a805c83f-d6cc-41a1-8cb8-7dd0c55ded93">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:dbConnectionName xsi:nil="true"/>
          <con:driver>${#Project#JDBCDriver}</con:driver>
          <con:connectionString>${#Project#JDBCConnStr}</con:connectionString>
          <con:password/>
          <con:query>select * from STREAM_DATA_HISTORY where STREAM_HANDLE_OID = :sh and STATUS = :status</con:query>
          <con:properties>
            <con:property>
              <con:name>sh</con:name>
              <con:value>${#TestCase#streamhandle}</con:value>
            </con:property>
            <con:property>
              <con:name>status</con:name>
              <con:value>${#TestCase#expectDBStatus}</con:value>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Property Transfer" id="ab43776b-25bd-4002-811e-b4cbdf2c95fd">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" useXQuery="false" entitize="false" transferChildNodes="false" ignoreEmpty="false" transferToAll="false">
            <con:name>a</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Extract the STREAM_DATA_HISTORY row</con:sourceStep>
            <con:targetType>dbxmlresponse</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify DB Row Data" id="d9562fb3-304c-4eeb-a005-560ab202ad20">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url       = testProject.getPropertyValue("targetHost");
def urnacct   = testProject.getPropertyValue("urnaccount");
def urnstream = testProject.getPropertyValue("urnstream");
def urnnode   = testProject.getPropertyValue("urnNode");
def acct      = testCase.getPropertyValue("nodeaccountid");

String XMLbody = testCase.getPropertyValue("dbxmlresponse");
String expectStreamHandle = testCase.getPropertyValue("streamhandle");
String expectAccountOID   = testCase.getPropertyValue("accountoid");
String expectRightsToken  = testCase.getPropertyValue("rightstokenid");
String expectUserOID      = testCase.getPropertyValue("expectDBCreateUser");
String expectStatus       = testCase.getPropertyValue("expectDBStatus");
String expectDBCreatedBy  = testCase.getPropertyValue("expectDBCreatedBy");
String expectDBClosedBy   = urnnode + testCase.getPropertyValue("expectDBDeletedBy");
String streamCreateNodeType = testCase.getPropertyValue("expectDBCreatedByNodeType");

if (XMLbody != null) {
	def myXML = new XmlSlurper().parseText(XMLbody);

	// Verify sizes...
	assert myXML.ResultSet.Row.STREAM_HISTORY_OID.size() == 1;
	assert myXML.ResultSet.Row.STREAM_HANDLE_OID	.size() == 1;
	assert myXML.ResultSet.Row.ACCOUNT_OID.size() == 1;
	assert myXML.ResultSet.Row.RIGHTS_TOKEN_OID.size() == 1;
	assert myXML.ResultSet.Row.STATUS.size() == 1;
	assert myXML.ResultSet.Row.CREATED_BY.size() == 1;
	assert myXML.ResultSet.Row.CLOSED_BY_ORG_ID.size() == 1;
	assert myXML.ResultSet.Row.CLOSED_DATE.size() == 1;
	
	String dbStreamHandle = myXML.ResultSet.Row.STREAM_HANDLE_OID.text();
	String dbAccountOid   = myXML.ResultSet.Row.ACCOUNT_OID.text();
	String dbRightsToken  = myXML.ResultSet.Row.RIGHTS_TOKEN_OID.text();
	String dbUserOid      = myXML.ResultSet.Row.USER_OID.text();
	String dbStatus       = myXML.ResultSet.Row.STATUS.text();
	String dbCreatedBy    = myXML.ResultSet.Row.CREATED_BY.text();
	String dbClosedBy     = myXML.ResultSet.Row.CLOSED_BY_ORG_ID.text();
	String dbClosedDate   = myXML.ResultSet.Row.CLOSED_DATE.text();
	
	//STREAM_HANDLE_OID
	this.log.info "dbStreamHandle [$dbStreamHandle] - expectStreamHandle[$expectStreamHandle]";
	assert expectStreamHandle == dbStreamHandle;

	//ACCOUNT_OID
	this.log.info "dbAccountOid [$dbAccountOid] - expectAccountOID[$expectAccountOID]";
	assert expectAccountOID == dbAccountOid;

	//RIGHTS_TOKEN_OID
	this.log.info "dbRightsToken [$dbRightsToken] - expectRightsToken[$expectRightsToken]";
	assert dbRightsToken == expectRightsToken;

	//USER_OID
	this.log.info "dbUserOid [$dbUserOid] - expectUserOID[$expectUserOID]";
	if (streamCreateNodeType == "llp" || streamCreateNodeType == "llpcs") {
		assert dbUserOid == "";
	} else {
		assert dbUserOid == expectUserOID;
	}

	//STATUS
	this.log.info "dbStatus [$dbStatus] - expectStatus[$expectStatus]";
	assert dbStatus == expectStatus;

	//CREATED_BY
	this.log.info "dbCreatedBy [$dbCreatedBy] - expectStatus[$expectStatus]";
	assert dbCreatedBy == expectDBCreatedBy;

	//CLOSED_BY
	this.log.info "dbClosedBy [$dbClosedBy] - expectDBClosedBy[$expectDBClosedBy]";
	if (expectStatus == "active") {
		assert dbClosedBy == "";
	} else {
		assert dbClosedBy == expectDBClosedBy;
	}

	//CLOSED_DATE
	this.log.info "dbClosedDate [$dbClosedDate]";
	if (expectStatus == "active") {
		assert dbClosedBy == "";
	} else {
		assert dbClosedBy.length() > 0;
	}
} else {
	assert 1 == 2;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_01751 - StreamDelete - FUNC - DLASP-CS - StreamNotFound - StreamDelete against a stream with EXPIRATION_DATE 7 days into the past</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>Dynamic LASP Customer Service Test Cases</con:value>
        </con:property>
        <con:property>
          <con:name>accountoid</con:name>
          <con:value>0900</con:value>
        </con:property>
        <con:property>
          <con:name>useroid</con:name>
          <con:value>0600</con:value>
        </con:property>
        <con:property>
          <con:name>streamhandle</con:name>
          <con:value>978DCC35FCD87C08E0401F0A05996438</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>9116</con:value>
        </con:property>
        <con:property>
          <con:name>expectTransactionid</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectNickname</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectJDBCSQL</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>expectSQLwithTransaction</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HISTORY_OID>*</STREAM_HISTORY_OID>        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID>${#TestCase#useroid}</USER_OID>        <TRANSACTION_ID>${#TestCase#expectTransactionid}</TRANSACTION_ID>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME/>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_BY/>        <UPDATED_DATE/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLDefault</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HISTORY_OID>*</STREAM_HISTORY_OID>        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID>${#TestCase#useroid}</USER_OID>        <TRANSACTION_ID/>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME>${#TestCase#expectNickname}</STREAM_CLIENT_NICKNAME>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_BY/>        <UPDATED_DATE/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithNickname</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HISTORY_OID>*</STREAM_HISTORY_OID>        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID>${#TestCase#useroid}</USER_OID>        <TRANSACTION_ID/>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME>${#TestCase#expectNickname}</STREAM_CLIENT_NICKNAME>       <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_BY/>        <UPDATED_DATE/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLDefaultLLP</con:name>
          <con:value><![CDATA[<Results>     <ResultSet fetchSize="10">         <Row rowNumber="1">             <STREAM_HISTORY_OID>*</STREAM_HISTORY_OID>             <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>             <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>             <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>             <USER_OID/>             <TRANSACTION_ID/>             <STATUS>deleted</STATUS>             <STREAM_CLIENT_NICKNAME/>             <EXPIRATION_DATE>*</EXPIRATION_DATE>             <CLOSED_DATE>*</CLOSED_DATE>             <CLOSED_BY_ORG_ID>${#Project#urnNode}${#TestCase#expectDBDeletedBy}</CLOSED_BY_ORG_ID>             <CREATED_DATE>*</CREATED_DATE>             <CREATED_BY>${#TestCase#expectDBCreatedBy}</CREATED_BY>             <UPDATED_BY/>             <UPDATED_DATE/>         </Row>     </ResultSet> </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>nodetype</con:name>
          <con:value>dlpcs</con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithTransactionLLP</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HISTORY_OID>*</STREAM_HISTORY_OID>        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID/>        <TRANSACTION_ID>${#TestCase#expectTransactionid}</TRANSACTION_ID>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME/>        <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_BY/>        <UPDATED_DATE/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectSQLwithNicknameLLP</con:name>
          <con:value><![CDATA[<Results>    <ResultSet fetchSize="10">      <Row rowNumber="1">        <STREAM_HISTORY_OID>*</STREAM_HISTORY_OID>        <STREAM_HANDLE_OID>${#TestCase#streamhandle}</STREAM_HANDLE_OID>        <RIGHTS_TOKEN_OID>${#TestCase#rightstokenid}</RIGHTS_TOKEN_OID>        <ACCOUNT_OID>${#TestCase#accountoid}</ACCOUNT_OID>        <USER_OID/>       <TRANSACTION_ID/>        <STATUS>${#TestCase#expectStatus}</STATUS>        <STREAM_CLIENT_NICKNAME>${#TestCase#expectNickname}</STREAM_CLIENT_NICKNAME>       <EXPIRATION_DATE>*</EXPIRATION_DATE>        <CLOSED_DATE/>        <CLOSED_BY_ORG_ID/>        <CREATED_DATE>*</CREATED_DATE>        <CREATED_BY>${#TestCase#nodeid}</CREATED_BY>        <UPDATED_BY/>        <UPDATED_DATE/>      </Row>    </ResultSet>  </Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectDBCreatedBy</con:name>
          <con:value>9116</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBDeletedBy</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBStatus</con:name>
          <con:value>deleted</con:value>
        </con:property>
        <con:property>
          <con:name>dbxmlresponse</con:name>
          <con:value><![CDATA[<Results>
    <ResultSet fetchSize="10">
        <Row rowNumber="1">
            <STREAM_HISTORY_OID>978DCC35FCDE7C08E0401F0A05996438</STREAM_HISTORY_OID>
            <STREAM_HANDLE_OID>978DCC35FCD87C08E0401F0A05996438</STREAM_HANDLE_OID>
            <RIGHTS_TOKEN_OID>978DCC35FCC77C08E0401F0A05996438</RIGHTS_TOKEN_OID>
            <ACCOUNT_OID>0900</ACCOUNT_OID>
            <USER_OID>0600</USER_OID>
            <TRANSACTION_ID/>
            <STATUS>deleted</STATUS>
            <STREAM_CLIENT_NICKNAME/>
            <EXPIRATION_DATE>2010-12-09 23:08:53</EXPIRATION_DATE>
            <CLOSED_DATE>2010-12-16 23:08:54.21</CLOSED_DATE>
            <CLOSED_BY_ORG_ID>urn:dece:org:org:dece:1</CLOSED_BY_ORG_ID>
            <CREATED_DATE>2010-12-16 23:08:50.482</CREATED_DATE>
            <CREATED_BY>9116</CREATED_BY>
            <UPDATED_BY/>
            <UPDATED_DATE/>
        </Row>
    </ResultSet>
</Results>]]></con:value>
        </con:property>
        <con:property>
          <con:name>expectStatus</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>rightstokenid</con:name>
          <con:value>978DCC35FCC77C08E0401F0A05996438</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBCreatedByNodeType</con:name>
          <con:value>dlpcs</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBCreateUser</con:name>
          <con:value>0600</con:value>
        </con:property>
        <con:property>
          <con:name>expectDBDeleteUser</con:name>
          <con:value>0600</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish High-Level Policies for User/Account/Node" searchProperties="true" id="d1f32fbc-149e-4a6b-97da-135771585011">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="e6655519-02bb-4f66-b0eb-b6364017ecf2">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("policyExists",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="11ecd8e9-5ac1-4cb6-b971-05a99ec5b33d">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for EnableManageUserConsent" id="08a25633-99fb-47fe-8dc5-5da11cbe7c24" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:EnableManageUserConsent");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for EnableManageUserConsent if necessary" disabled="true" id="bb3a8085-be05-41c8-8e0e-ed46e54087bb">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

if (testCase.getPropertyValue("policyExists") == "false") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:EnableManageUserConsent");
	testCase.setPropertyValue("policyRequestEntity",testProject.getPropertyValue("urnNode") + testCase.getPropertyValue("nodeid"));
	testCase.setPropertyValue("policyResource",testCase.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for ManageUserConsent" id="838304a8-9716-4d20-adff-4dec7f84d006" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ManageUserConsent");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for ManageUserConsent if necessary" id="af8c2bf8-fade-4cbf-bf1b-1988fcf9859d" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

if (testCase.getPropertyValue("policyExists") == "false") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ManageUserConsent");
	testCase.setPropertyValue("policyRequestEntity",testProject.getPropertyValue("urnNode") + testCase.getPropertyValue("nodeid"));
	testCase.setPropertyValue("policyResource",testCase.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for EnableUserDataUsageConsentRequired" id="f0044a2f-f1ed-42c7-bbf8-7cb92a8a1822" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for EnableUserDataUsageConsent if necessary" id="fffb55fd-801e-40cb-81e0-269ed5cb5038" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

if (testCase.getPropertyValue("policyExists") == "false") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");
	testCase.setPropertyValue("policyRequestEntity",testProject.getPropertyValue("urnNode") + testCase.getPropertyValue("nodeid"));
	testCase.setPropertyValue("policyResource",testCase.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for EnableUserDataUsageConsent" id="5a831004-b5e3-4524-9709-ce4e0554f90e" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for Account")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for EnableUserDataUsageConsentRequired if necessary" id="3b9042c2-94b5-4857-bbfe-6ef87f55a35f" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

if (testCase.getPropertyValue("policyExists") == "false") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:EnableUserDataUsageConsent");
	testCase.setPropertyValue("policyRequestEntity",testProject.getPropertyValue("urnNode") + testCase.getPropertyValue("nodeid"));
	testCase.setPropertyValue("policyResource",testCase.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for UserDataUsageConsent" id="3e006f05-0ec5-4507-9558-6273678ad71d" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:UserDataUsageConsent");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for UserDataUsageConsent if necessary" id="328b0e3a-d9a1-40e0-a77c-d787ec787a75" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

if (testCase.getPropertyValue("policyExists") == "false") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:UserDataUsageConsent");
	testCase.setPropertyValue("policyRequestEntity",testProject.getPropertyValue("urnNode") + testCase.getPropertyValue("nodeid"));
	testCase.setPropertyValue("policyResource",testCase.getPropertyValue("assertionUserIdFULL"));
	testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
	
	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ISC_RET</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">TC_DECE_50001_RightsTokenUpdate - Policy - RTL - ParentalControl:RatingPolicy - LUXEMBOURG - FILMTV - MOC - U rating - Full User</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">R5_RightsTokenUpdate_Policy_RTL_For_New_Geo_BE_LU_NL</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZZj6pKEP4rxvNoFFpEBjIzCYKOjDvgMr6cYNMqCs3SDS6//jY6enSWc+fexMR0Uf3VV0tX1SNxAr+qqISghHohLuwDHxPlJH0qpglWQod4RMFOgIhCoWKpva5SrfCKc7lSLBj6U/H3QkSitJSdsiNX6+UafABlGVRR2am5C9lZSHytXmeqhKTIwIQ6mD4VqzyolQHPfjYvKTxQeLkCRGFeLExQQhg2U6nwxXdSe/JUXFMaKRy32+0qO6ESJiuuyvOAm/W6FlyjwCk+P549OhlKnt/1YcVFEPk+rMAw4B65O51HlyiWt8IOTRP0bsv9zhbP8TLHdFzirX4Vr3eRa+BleDpqDg6xBx3fOzp5fHqIrkO3oPqrMPHoOvjWCcDnwGW0h2UIavhXkbun9kOgO4YJccpk7YB3LBMtUYIwRIWxaTwVf/0sa6erduJgsgyTgNwf/xsfhDPkhxFyy+Ti1ju1nwN+EannRwQVA0M/JV6G+nmxRg5E5D2bCP4cqjBM0NLbdz3CCnRPcnbcLb0Px3M0dG+FCP0/CbpJzhlk4vgpei5xbYt2E5GzZ1HHnJpu3A8ar2+iLzSfTgRulU+Ca2rPxw9FeS2i840B17eq3d5Aag4nnArnm9HopS6UVrPXBW3ObHtMti27j3f7YzLR6/Gha0j9sWaNZ+5BoKA5aoQvssWL06GXdaPquC2rm3F7a7XBW20DBn4Lzg8UtINa88GfqNOR1Nb6e3FodVadHu0wgJf+SxDLU2NWf2Mvd9eaJHNPe+PloeoQU9Rj0LMlElhx9bh2aztVqIetrPkqZympT0vbUUl85ch4YDn2kSxaBuK4SdTx9oYpJ+Zx0Y36dLtr0wEari1xMarXLKuxnMTQWGDrqGqNcUm3o3YDb1OhKdvWtreJB1w4YFlH6WzIARG9+e0mHQWcGsX6ot4Q5nxH1dulTSqTOT4ERrVqcwdz7dubZD61a/vZMt036gDxeqkZJYmwHq/iGainCyeAIIlbmv/WPGzfJCleHfEsQ6Ztxy9a1yeNuSx0jnY4Mlqc12+v/aXRNUsqcu3a4cWBwQh6YHRsO2Fn0w/0NeRDIiWDud44rq1JMpaafcevx8fNi5GZ/iwUh0sZhK/NLd1t6Kq95eZcaoz6E90BE2mp6wSYWjaw0znfX2RVdz6QZ3rSMxd1s9t54C06wxNvmIGhNp5Cq57MulNBsntL3pA205q3T3uNSa99BMeDtwWQNqZOjx8vQkGdLOZJS9aGEeC3YWum+i9mpM1bc9Rup+PpUDRW0VGdxCgThOFQ1vELL40itzk3jdJDPEVBMhr7xkHkB8NJfyt7AbdMlrREcYTh07Wcb+r3Xnbp+Va62CBIL8e8DRh6ocVeqUP/PsxyieeWlydVJcqHD6EI0+JzfiufHUrKxp3nKuwNn8+8yOtAawmi2ACSJLeavCjwLVkGLV6VhTq4DJkziw8UtRAvvdxWPnLPbePvBGGgEIRdlJSzMGWTjhT/gqg71CkY2GRNMMQE2SEbzyuKJSrW/XRXIwCDiEi8HB+imI3vfkgHeJCoS4qSu5kM+LuZbCLoRR7KB3fe1whrbISyWMROllIfVDKnglHKRnuST1mlWnsQOeIFkY9yplwQuqmPKtE6OkWGI+f/atmB5CQ1LO232bRPHfdb3z5+u4SB6bherkByfxqIpRJ9WjB4Rbw4873Twq3TF3g1db28ubKY0sSDZyb3n/6USl4j1zp59+pC+6r9UXCHzH106mrMzTx4Lfjr2samOev/z5e0+FGVLTxZJa6kWZaesvFQqwlcwmywCQREjq9yFoIpG1MHO9wizF2huB/tBFf2Hxhc5fc8U7rGFnUoClj5FE7HHyyBFiL5Emiwut//dMO8M8niR9GefiXTfLbA5oz/uuNCBeZ6TDxkf7swcf+k7QusGzvMT7YDUg+v8lO+Dxy+KRAYMliPdbIwuQX/CuAr4/fCa5CvXCirqkVK0fdfCnmLeio6EIYppoZePAlu2+aJJz1ESPmj9Anm1Jmvq7r377t62TuVAERswSfeCT/fuJT8HeDVTet9N/q5+2pNXdceJEkFt91Xq8nX7nvP7vmT+LPkJk4fa/z5Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish LockerViewAll" searchProperties="true" id="22553017-d9e8-40ca-8206-584f131bd7f5">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="14137a03-161f-4499-aad5-e068e4cc1cf5">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("policyExists",null);
testCase.setPropertyValue("policyClass", "urn:dece:type:policy:LockerViewAllConsent");
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="0025242a-3ff9-47b5-a866-71b2ef65b79e">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
testCase.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
testCase.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));

if (testCase.getPropertyValue("policyResource") == null || testCase.getPropertyValue("policyResource") == "") {
	testCase.setPropertyValue("policyResource","urn:dece:rightslockerid:org:dece:0900");
}
if (testCase.getPropertyValue("policyCreator") == null || testCase.getPropertyValue("policyCreator") == "") {
	testCase.setPropertyValue("policyCreator",testCase.getPropertyValue("assertionUserIdFULL"));
}
if (testCase.getPropertyValue("policyRequestEntity") == null || testCase.getPropertyValue("policyRequestEntity") == "") {
	testCase.setPropertyValue("policyRequestEntity",testProject.getPropertyValue("urnNode") + testCase.getPropertyValue("nodeid"));
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for LockerViewAll" id="1c94804a-3855-4055-a1dc-084c722ca1bd">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate LockerViewAll if necessary" disabled="true" id="fd530a27-e21f-4cbf-ae20-52023d3a73ce">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def exists = testCase.getPropertyValue("policyExists");

if (exists != "true") {
	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for Account")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value>pVdpb9pMEP4ryP2IjE8uKyC5HAkqJCkmtM2XalkPsIm9ht01R3/9u2vABXK8NJEioRnP8cyxM5MrjuLI9nzOgQmS0MImjij3Mm5DSxn1EsQJ9yiKgXsCe4E/6Ht2yfTQQUUr9NoN7XfouDAFB/QaTBzdxSHWkY3r+gQcc1KvVSdu3ZGinKfQo1wgKhqabVqubtbl38hyPcv0TKdUce1HrTAGxqVtKVIytT2oDW9ocyEWnmGs1+vS2iklbGbYpmkZPwf9AM8hRlrzahdR5og19/K4FAKGKMIlnMTGlXEicxVyLyAzikTKYO8rfMuXaZh1Q8qEnMy+aLkuhD06TTKyhWhCCUYR+YNUfgYg5klY8KNZwoiYx28GYZnKsA4brGPLpV804xTahYZOEDKOdD5H1t7WUJaIAcVQeBj2GtqXy6qWqY4YonyasJifkv+GB+gKomQBoc4PYe2hXW7wlUw1rwB7PYqjlJMV3KpmXSAMfF9NwJebKtwzmJJNn3DZoBuu0BnH8M7IXTbaZAZcfKRAR8XZGRmjKIVmZdLiU+vJLo6L1e68+nPBtsM/xtOkWOeNDMCxcMbIS7sjz5oyb6KdRttZfvv6GK5/zYrEXl+njtFb3ya11pLfX4tf1UENnuvjx+XMD9xx/OyU2ePgLizO7zYPN5Vf22v+7XbZMQfjyeL5BxRvcHdb6XPMZ+7NMCHtwPH9yrLXufd7tafxALmju+hxeXNdHpnkIar46zHr3had1Awm7c6gG3+/jt2y7Q42tYdvUzIRA/6jWL0j35dPwSx9buThHOE/5R3efJBOngCLA6naoNcudGWVkHh/mCkOCfVpJuot1PDhAqjQmkpLzQ4vleOOhJ6s4Y42bd9xLbPbrVTqlml3OmbZMcv1utU1/apZsw9DZofiDGIroVOifKmRu2ub9wHi2ONAQ2D6KknlpOPaOxbbSKBCjw7lI0goh1Eix7NVtUi5umRTtN1O8WyTJmxpSeRMK9wm4o7eMX8qgJ3O5OrJTB4CJgsCanCrvuaysbmQuViiVSoiq7RCJQqpHO1MTVnPdmtlg5N4EYFCasRJmEZQWswXWWYMvvu1dYR5xh12RtlrezOu82+HFEiZkCgBrmL5CrKMcL5czLpXPgTyZsC2eRzwwbyfhkQ9LJlPwQjeITn99LdNVH/kPeK3Wp2gFRxg59L/oP1R5XbfD+4/o/u7Ffy2Pmrg464/57j/iaj7n41a9u8n1V9qGu+0oHHe/bmjcEWO3B4ONbny5ZJoHt7uEpWWpXS1SrPXWlXLkEnzckNZZcO0jQBwKtfYdpQ8AzVyK8ZFN0MO/Mx5zj+FmIo5DQQSEMvxUsjIC47EALg6EntyLm4uvUBPXMrUCdiI13itSB64CvG7NzD2sJKT7Hv5s05Y+Ldir9g68iPjlDeiIHSmKHUvbN/oC5xIs0RuuoQdG3/NwGvOT5l5knMsQjbUJBXw9peCWmENDWGcpFT02lrGOF6rGU6xXYD3V+iFmWxz56c8+f9bXidZC2CQ/wBwktlXF5mnngCdHa3mvdNXtnPNt7ptuZ1bx9vZ/eq08qScoGu+YL/kHOXpvMeb/wE=</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:02A34108A1FD102CE05305991F0A4B3C</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET_CS_1</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:LockerViewAllConsent</con:value>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value>urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value>urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value>urn:dece:userid:org:dece:01AFB3FEEC112776E05305991F0AB754</con:value>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>R1_RightsTokenUpdate_Policy_RTL_CS_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_10021_RightsTokenUpdate_Policy_RTL_CS_NoPolicyEnforcement_US_MMPA_Can_create_RightsToken_that_IS_ADULT_=_'y'_with_policy_and_all_rating_as_per_Matrix</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Establish Parental Control Rating" searchProperties="true" id="e86db039-f978-424f-b136-72bb2ef3e1bb">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="beb942be-c96c-4efd-817f-25e5b717c43a">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("policyExists",null);
testCase.setPropertyValue("policyClass","urn:dece:type:policy:ParentalControl:RatingPolicy");
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("returnXMLResult","true");
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="d2366e02-b8cc-48a2-a69d-1ee58546a323">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
testCase.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));

if (testCase.getPropertyValue("policyCreator") == null || testCase.getPropertyValue("policyCreator") == "") {
	testCase.getPropertyValue("policyCreator") == testCase.getPropertyValue("assertionUserIdFULL");
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for ParentalControl:RatingPolicy" id="0b78d4d5-4f42-44c8-9ccb-eace63aa9940">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyDelete for ParentalControl:RatingPolicy if necessary" id="2f9c9563-ac9a-4d6f-9f6a-4379472e44bb">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
	
if (testCase.getPropertyValue("policyExists") == "true") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for ParentalControl:RatingPolicy" id="ad5276f9-63dc-4f7b-87b0-1f806d6e7471">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testCase.setPropertyValue("policyRequestEntity",testCase.getPropertyValue("assertionUserIdFULL"));
//testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
//testCase.setPropertyValue("policyResource","urn:dece:type:rating:US:MPAA:G");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value>nVZZj6pKEP4rxvNoFFpEBjIzCYKOjDvgMr6cYNMqCs3SDS6//jY6enSWc+fexMR0Uf3VV0tX1SNxAr+qqISghHohLuwDHxPlJH0qpglWQod4RMFOgIhCoWKpva5SrfCKc7lSLBj6U/H3QkSitJSdsiNX6+UafABlGVRR2am5C9lZSHytXmeqhKTIwIQ6mD4VqzyolQHPfjYvKTxQeLkCRGFeLExQQhg2U6nwxXdSe/JUXFMaKRy32+0qO6ESJiuuyvOAm/W6FlyjwCk+P549OhlKnt/1YcVFEPk+rMAw4B65O51HlyiWt8IOTRP0bsv9zhbP8TLHdFzirX4Vr3eRa+BleDpqDg6xBx3fOzp5fHqIrkO3oPqrMPHoOvjWCcDnwGW0h2UIavhXkbun9kOgO4YJccpk7YB3LBMtUYIwRIWxaTwVf/0sa6erduJgsgyTgNwf/xsfhDPkhxFyy+Ti1ju1nwN+EannRwQVA0M/JV6G+nmxRg5E5D2bCP4cqjBM0NLbdz3CCnRPcnbcLb0Px3M0dG+FCP0/CbpJzhlk4vgpei5xbYt2E5GzZ1HHnJpu3A8ar2+iLzSfTgRulU+Ca2rPxw9FeS2i840B17eq3d5Aag4nnArnm9HopS6UVrPXBW3ObHtMti27j3f7YzLR6/Gha0j9sWaNZ+5BoKA5aoQvssWL06GXdaPquC2rm3F7a7XBW20DBn4Lzg8UtINa88GfqNOR1Nb6e3FodVadHu0wgJf+SxDLU2NWf2Mvd9eaJHNPe+PloeoQU9Rj0LMlElhx9bh2aztVqIetrPkqZympT0vbUUl85ch4YDn2kSxaBuK4SdTx9oYpJ+Zx0Y36dLtr0wEari1xMarXLKuxnMTQWGDrqGqNcUm3o3YDb1OhKdvWtreJB1w4YFlH6WzIARG9+e0mHQWcGsX6ot4Q5nxH1dulTSqTOT4ERrVqcwdz7dubZD61a/vZMt036gDxeqkZJYmwHq/iGainCyeAIIlbmv/WPGzfJCleHfEsQ6Ztxy9a1yeNuSx0jnY4Mlqc12+v/aXRNUsqcu3a4cWBwQh6YHRsO2Fn0w/0NeRDIiWDud44rq1JMpaafcevx8fNi5GZ/iwUh0sZhK/NLd1t6Kq95eZcaoz6E90BE2mp6wSYWjaw0znfX2RVdz6QZ3rSMxd1s9t54C06wxNvmIGhNp5Cq57MulNBsntL3pA205q3T3uNSa99BMeDtwWQNqZOjx8vQkGdLOZJS9aGEeC3YWum+i9mpM1bc9Rup+PpUDRW0VGdxCgThOFQ1vELL40itzk3jdJDPEVBMhr7xkHkB8NJfyt7AbdMlrREcYTh07Wcb+r3Xnbp+Va62CBIL8e8DRh6ocVeqUP/PsxyieeWlydVJcqHD6EI0+JzfiufHUrKxp3nKuwNn8+8yOtAawmi2ACSJLeavCjwLVkGLV6VhTq4DJkziw8UtRAvvdxWPnLPbePvBGGgEIRdlJSzMGWTjhT/gqg71CkY2GRNMMQE2SEbzyuKJSrW/XRXIwCDiEi8HB+imI3vfkgHeJCoS4qSu5kM+LuZbCLoRR7KB3fe1whrbISyWMROllIfVDKnglHKRnuST1mlWnsQOeIFkY9yplwQuqmPKtE6OkWGI+f/atmB5CQ1LO232bRPHfdb3z5+u4SB6bherkByfxqIpRJ9WjB4Rbw4873Twq3TF3g1db28ubKY0sSDZyb3n/6USl4j1zp59+pC+6r9UXCHzH106mrMzTx4Lfjr2samOev/z5e0+FGVLTxZJa6kWZaesvFQqwlcwmywCQREjq9yFoIpG1MHO9wizF2huB/tBFf2Hxhc5fc8U7rGFnUoClj5FE7HHyyBFiL5Emiwut//dMO8M8niR9GefiXTfLbA5oz/uuNCBeZ6TDxkf7swcf+k7QusGzvMT7YDUg+v8lO+Dxy+KRAYMliPdbIwuQX/CuAr4/fCa5CvXCirqkVK0fdfCnmLeio6EIYppoZePAlu2+aJJz1ESPmj9Anm1Jmvq7r377t62TuVAERswSfeCT/fuJT8HeDVTet9N/q5+2pNXdceJEkFt91Xq8nX7nvP7vmT+LPkJk4fa/z5Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>ISC_RET</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ParentalControl:RatingPolicy</con:value>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>policyGetXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value>urn:dece:type:rating:lu:moc:u</con:value>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>returnXMLResult</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>R5_RightsTokenUpdate_Policy_RTL_For_New_Geo_BE_LU_NL</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_50001_RightsTokenUpdate - Policy - RTL - ParentalControl:RatingPolicy - LUXEMBOURG - FILMTV - MOC - U rating - Full User</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsToken-GenerationUHD" searchProperties="true" id="518047ad-1f58-4490-9839-4d71d6bd0fc8"><con:settings/><con:testStep type="groovy" name="Feed Rights Token Data" id="31cca16d-bd62-4f8d-9cfe-b2168f2c9f4b"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest");

//RightsToken Request and properties
//TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTCreateReq"));

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def RTCRequest = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');

testCase.setPropertyValue("nodeid",RTCRequest.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",RTCRequest.getPropertyValue("assert"));

testCase.setPropertyValue("ParamRTCreateReq",testCase.getPropertyValue("ParamRTCreateReq"));

testCase.setPropertyValue("AccountID",RTCRequest.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",RTCRequest.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",RTCRequest.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("RTC_rcStatusHistory","0");
testCase.setPropertyValue("expectErrTypeRTCreate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
testCase.setPropertyValue("StreamWebLocLocation1","https://dl.bestbuy.com/p/streaminglink");
testCase.setPropertyValue("StreamWebLocPreference1","3");
testCase.setPropertyValue("RightsLockerID",RTCRequest.getPropertyValue("RightsLockerID"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call Rights Token Create API" id="62d11a8c-fd16-49c3-b79e-5e705e23f97f"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequestUHD")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());
RTCRequest.setPropertyValue("ParamRTCreateReq",,testCase.getPropertyValue("ParamRTCreateReq"));


def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Get Rights Token Data" id="92dd9269-18a2-4939-92ec-767232ed971b"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Create Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

log.info RTCRequest.getPropertyValue("TCaseName");

def runnerRTC = RTCRequest.run( null , false )

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def CallingTestCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

log.info "new generated rights token is "+testCase.getPropertyValue("rightstokenid");

//callingTCase.setPropertyValue("Accountid",testCase.getPropertyValue("Accountid"));




//assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Extract RightsToken Response" id="edcafd81-eca0-491b-93c1-ddba29edfd60">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def RTCRequest = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

RTCRequest.setPropertyValue("rightstokenid",testCase.getPropertyValue("rightstokenid"));
RTCRequest.setPropertyValue("DBrightstokenid",testCase.getPropertyValue("DBrightstokenid"));
RTCRequest.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
RTCRequest.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));
RTCRequest.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));

</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify the RightsTokenGet Response" disabled="true" id="2732764e-ad11-49ab-a740-d9b062eb0b1a">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTGRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Response Validation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTGRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify theRightsTokenGet Response against DB Result" disabled="true" id="35a5b026-efb0-4707-bf14-29acee9e334a">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTGdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights GET  Data Validation");

RTGdataVal.setPropertyValue("TCaseName",testCase.getName());
RTGdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTC = RTGdataVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;

</script></con:config>
      </con:testStep><con:properties><con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:054B60806DAD67A0E0530F991F0A2058</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:EXAMPLE_ALID_Version_189067540.txt</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVZbc6rKEv4rluvRUi6CIJWkCsELBjWKl8SXXeMw4Cg3mQE1v/4MGl2alayTvV+gpunp/vrC1/1AQBiImk4ISimOo9IhDCKinaSP5SyNtBgQTLQIhIhoFGqOPrA1scZr4HKlXLLMx/I/9SaEquBKVakpsockwirgRbXaRAISJBk1mg2eqRKSISsiFET0sSzyglQV+KpQn/JNTVA1QazJkrosl+YoJcw2U6mxW2dQB/JYXlOaaBy33+9r+3otTn1O5HmBex3YDlyjEJSfHs4RnRylTx/6sOYiiIIA1mAccg/cnc6DSzQH+xGgWYo+fLnf+eI5vskxHZdg/1f5ehe5VuTFp6MBojjCEAT4HRT5GSC6jt2SHvhxiuk6/DYIgS8MV9EBVqEgRb/K3D20Hxq6Q5gSUCVrIHzYmiAPpSiCqDSbWI/lXz+r2unqNAUR8eI0JPfHf4cHRTkK4gS5VXIJ6wPazw1+kamnBwQ1K4JBRnCOhkWzJgAi8lFNBH9uqvSSIg8fbExYgx5IgY67hffpeM6GiX1E6H8p0E1xzkbmIMjQU2S2O5thxyB+MhhwFWDbqJMY1nzbGz+eANwqnwTX0p6Pn5ry2kTnG/NZZUV7/TR4lRQj2mTxrsmDVthLzXGYHPabjdyb9UBfsa3DIBh1jzEXoeba2DQCZ5HOpgZemNIgeYtSNx8uvN0baQy5gbdfQXHVnoVGm6TqTNdF931rDhXcttMkdSVj9TJvgaW8V/uOtVxX5lNFXSvjfgKNN7A4ACzYz0tnp3cHjT2PUwmE7d4ccH40mpr7bDxvPefYVrt4OwHBju9F23zQaAkgC63RbrjTJWGBkzzwelFQ71RWeGfoG7Tlp4I3fvV1Sof2eBpkL+FhOHWHu9YkOQK/azXT5H0wOgZQUUWpEmY836N91Uvs6SDxFb7rtYeh0wnqGy/xe7kdQMvtTSojSoG+8GadCZ+FpCmO28bOXx2VEa6zeD2PjOotC4wd03ltB6IOM6Vi27Nu6O/B7LA9NrKoEjwLG1+0E0ma2mg57Nqxuh8rU6XP076jcu/xUE4a4ftYD+O09RpM6kczab+ZI3MPJ303s9refrt+6e2acQ7s+aY+nL+0FUM1/SQWiPsebN7eATdT0vqIHA+OK9WFuoKNKVw47129SduVZVg5Rnpr+Ry/NmJ+4Msj/tCq+IfQ7zaS9WKDFwt9JGJRXUuiv2z6SruroOdlTORxmh+F15nqgKZl9g0iP+8Nv4v70mhpVd7Wr2/b3jReypXOIqqknjXEYzqF+n5j2708jkdDtUVSudJQjXk9M4Q+api7zeaQhfLYfWnhPFwRk3O51igedJz247Wdb/r3XnbhfCdbbRCkl2NBA5ZZ6rC/FNC/D7NCgt2qd1LVkmL4EIoiWn4qbhWzQ8vYuMOuxv7h85mXpVaDV4VmS5Yaii61ebnOd5pNocPrSl1XL0PmjOITRCOOPFz4KkbumTb+DhCGGkGRi9JqHmds0pHyXyyagIKSFU0YCcYRQdOYjedtFudrb7fO1iJWdnizlVzG8Ngtl4YxHUWjVPcoSu9GsiDejeQJgjjBqJjbBa0RxmuEslTsQJ7RQKjloBahjE32tBiymiipMkdwmASoAMqFsZsFqJask1NiOHJ+i1UAyUlqOcY/k/b0RLjfhvb52yULTMfFhQIp4mkhVkn0xX7BX4L5Pmj5NuiLeT1zccGtLKU0xfCM5P7T704pWuTaJh9RXWBftT8L7ixzn4O6OnNzDK/9ft3a2DBn9P90KUuQiGzfyWu7Wpbn2akaqiTVuZT5YANIkDle5BwEMzaljtN4iyLuaor70UpwRf8JwVV+jzOj68ihgKKQtU/pdPzBDuggUuyAFmv7w08XzDuXLH8UHehXMiNg+2uB+K8rLtRgocfEL+y1j1P3d9m+sHXjh8XJVkCKI784FevA8ZsGgTEzixmRxemt8a8MfOX8XnhN8hULZV21yij6/kupYKjHMoAwziJqmeWT4JY1TzjpMUHab6U/zJyI+bqp4/+/qlfxqQUgYvs9wSf7xcKlFf9B5N8w74fTL8iXb5i6yciXvyVfkZev5HuP7ukP8Z+Smzx97vGn/wE=</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:A_File_Name_with_NUMBERS_165670638.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>050DC703C08251D7E05307991F0AB74A</con:value></con:property><con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>ISC_RET</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:ISC_RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:054B60806DAD67A0E0530F991F0A2058</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:054B60819B5467A4E0530F991F0A73A8</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="urn:dece:alid:org:200002" ContentID="urn:dece:cid:org:200002">          <ns4:SoldAs>                     <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                       <ns4:ContentID>urn:dece:cid:org:200002</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:hd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                            <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:sd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                                                                                                                                                                  </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc>         <ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd"   xsi:type="ns4:ResourceLocation-type">                               <ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location>                             <ns4:Preference>1</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentWebLoc   MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location>                            <ns4:Preference>1</ns4:Preference>          </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location>                  <ns4:Preference>3</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type">                                 <ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location>                  <ns4:Preference>1</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:PurchaseInfo>                        <ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID>                    <ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>urn:dece:accountid:org:dece:050D4546CEA807D9E05305991F0ABD26</ns4:PurchaseAccount>                        <ns4:PurchaseUser>urn:dece:userid:org:dece:050D798C638C1C55E05307991F0A919D</ns4:PurchaseUser>                              <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1816</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:050DC703C08251D7E05307991F0AB74A</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:ISC_RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value>0</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>Error</con:value></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:A_File_Name_with_NUMBERS_165670638.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCasesWithUHDMediaProfile</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>ParamRTCreateReq</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"  xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">                 <ns4:RightsProfiles/>                 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>                 <ns4:PurchaseInfo>                                 <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                                 <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                                 <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                                 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                                 <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>                 </ns4:PurchaseInfo> </ns4:RightsTokenData> ]]></con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/streaminglink</con:value></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>054B60806DB567A0E0530F991F0A2058</con:value></con:property><con:property><con:name>ParamRTUReqWithOnlyUHD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> </ns4:PurchaseProfile>                                                                                       <ns4:PurchaseProfile    MediaProfile="${#TestCase#PPContentProfile3}" HighDynamicRange="${#TestCase#HighDynamicRange}"   HighFrameRate="${#TestCase#HighFrameRate}"    WideColorGamut="${#TestCase#WideColorGamut}"  NextGenAudio="${#TestCase#NextGenAudio}">                                           <ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload>                                           <ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream>                             </ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>]]></con:value></con:property><con:property><con:name>RequestXML</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"   xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">         <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                      <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile  MediaProfile="${#TestCase#PPContentProfile2}">                                         <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                         <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                           </ns4:PurchaseProfile>       <ns4:PurchaseProfile    MediaProfile="${#TestCase#PPContentProfile3}" HighDynamicRange="${#TestCase#HighDynamicRange}"   HighFrameRate="${#TestCase#HighFrameRate}"    WideColorGamut="${#TestCase#WideColorGamut}"  NextGenAudio="${#TestCase#NextGenAudio}">                                           <ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload>                                           <ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream>                             </ns4:PurchaseProfile> 	                                                          </ns4:RightsProfiles>      <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>         <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">                               <ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                          <ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location>                 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type">                                <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location>                 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:PurchaseInfo>                       <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                   <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                       <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                       <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                             <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>            <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property></con:properties><con:reportParameters/></con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - General Policy Establishment" searchProperties="true" id="5854daa8-8525-4b15-a88a-a81989ec248d">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="066c4793-025a-48e0-8bd0-5f3c2aab1aac">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("policyExists",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("returnXMLResult","true");
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="a6098bb1-5a7f-449f-a549-092e5154eba5">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("policyCreator",callTC.getPropertyValue("policyCreator"));
testCase.setPropertyValue("policyClass",callTC.getPropertyValue("policyClass"));
testCase.setPropertyValue("policyResource",callTC.getPropertyValue("policyResource"));
testCase.setPropertyValue("policyRequestEntity",callTC.getPropertyValue("policyRequestEntity"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));

if (testCase.getPropertyValue("policyCreator") == null || testCase.getPropertyValue("policyCreator") == "") {
	testCase.getPropertyValue("policyCreator") == testCase.getPropertyValue("assertionUserIdFULL");
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for Policy" id="551a0de1-43c3-4749-9eb6-5be870b19003">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyDelete for Policy if necessary" id="4a59479c-319e-462c-b843-901c98d448cf">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
	
if (testCase.getPropertyValue("policyExists") == "true") {
	testCase.setPropertyValue("policyClass", testCase.getPropertyValue("policyClass"));

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyCreate for Policy" id="f715929b-57b2-4646-9d12-fd60f012504d">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testCase.setPropertyValue("policyRequestEntity",testCase.getPropertyValue("assertionUserIdFULL"));
//testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");
//testCase.setPropertyValue("policyResource","urn:dece:type:rating:US:MPAA:G");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyCreate for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value>pVdpb9pMEP4ryP2IjE8uKyC5HAkqJCkmtM2XalkPsIm9ht01R3/9u2vABXK8NJEioRnP8cyxM5MrjuLI9nzOgQmS0MImjij3Mm5DSxn1EsQJ9yiKgXsCe4E/6Ht2yfTQQUUr9NoN7XfouDAFB/QaTBzdxSHWkY3r+gQcc1KvVSdu3ZGinKfQo1wgKhqabVqubtbl38hyPcv0TKdUce1HrTAGxqVtKVIytT2oDW9ocyEWnmGs1+vS2iklbGbYpmkZPwf9AM8hRlrzahdR5og19/K4FAKGKMIlnMTGlXEicxVyLyAzikTKYO8rfMuXaZh1Q8qEnMy+aLkuhD06TTKyhWhCCUYR+YNUfgYg5klY8KNZwoiYx28GYZnKsA4brGPLpV804xTahYZOEDKOdD5H1t7WUJaIAcVQeBj2GtqXy6qWqY4YonyasJifkv+GB+gKomQBoc4PYe2hXW7wlUw1rwB7PYqjlJMV3KpmXSAMfF9NwJebKtwzmJJNn3DZoBuu0BnH8M7IXTbaZAZcfKRAR8XZGRmjKIVmZdLiU+vJLo6L1e68+nPBtsM/xtOkWOeNDMCxcMbIS7sjz5oyb6KdRttZfvv6GK5/zYrEXl+njtFb3ya11pLfX4tf1UENnuvjx+XMD9xx/OyU2ePgLizO7zYPN5Vf22v+7XbZMQfjyeL5BxRvcHdb6XPMZ+7NMCHtwPH9yrLXufd7tafxALmju+hxeXNdHpnkIar46zHr3had1Awm7c6gG3+/jt2y7Q42tYdvUzIRA/6jWL0j35dPwSx9buThHOE/5R3efJBOngCLA6naoNcudGWVkHh/mCkOCfVpJuot1PDhAqjQmkpLzQ4vleOOhJ6s4Y42bd9xLbPbrVTqlml3OmbZMcv1utU1/apZsw9DZofiDGIroVOifKmRu2ub9wHi2ONAQ2D6KknlpOPaOxbbSKBCjw7lI0goh1Eix7NVtUi5umRTtN1O8WyTJmxpSeRMK9wm4o7eMX8qgJ3O5OrJTB4CJgsCanCrvuaysbmQuViiVSoiq7RCJQqpHO1MTVnPdmtlg5N4EYFCasRJmEZQWswXWWYMvvu1dYR5xh12RtlrezOu82+HFEiZkCgBrmL5CrKMcL5czLpXPgTyZsC2eRzwwbyfhkQ9LJlPwQjeITn99LdNVH/kPeK3Wp2gFRxg59L/oP1R5XbfD+4/o/u7Ffy2Pmrg464/57j/iaj7n41a9u8n1V9qGu+0oHHe/bmjcEWO3B4ONbny5ZJoHt7uEpWWpXS1SrPXWlXLkEnzckNZZcO0jQBwKtfYdpQ8AzVyK8ZFN0MO/Mx5zj+FmIo5DQQSEMvxUsjIC47EALg6EntyLm4uvUBPXMrUCdiI13itSB64CvG7NzD2sJKT7Hv5s05Y+Ldir9g68iPjlDeiIHSmKHUvbN/oC5xIs0RuuoQdG3/NwGvOT5l5knMsQjbUJBXw9peCWmENDWGcpFT02lrGOF6rGU6xXYD3V+iFmWxz56c8+f9bXidZC2CQ/wBwktlXF5mnngCdHa3mvdNXtnPNt7ptuZ1bx9vZ/eq08qScoGu+YL/kHOXpvMeb/wE=</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:02A34108A1FD102CE05305991F0A4B3C</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET_CS_1</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value>urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</con:value>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>policyGetXML</con:name>
          <con:value><![CDATA[<ErrorList xmlns="http://www.decellc.org/schema/2015/03/coordinator" xmlns:ns2="http://www.movielabs.com/schema/md/v2.1/md" xmlns:ns3="http://www.w3.org/2001/04/xmlenc#" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#">
   <Error ErrorID="urn:dece:errorid:org:dece:Policy:PolicyNotFound">
      <Reason Language="en">The policy was not found.</Reason>
      <OriginalRequest>https://qa.q.uvvu.com:7001/rest/2015/02/Account/urn:dece:accountid:org:dece:02A34108A1FD102CE05305991F0A4B3C/User/urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082/Policy/urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#Policy:PolicyNotFound</ErrorLink>
   </Error>
</ErrorList>]]></con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value>urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:02A3410FF669102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>returnXMLResult</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>R1_RightsTokenUpdate_Policy_RTL_CS_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_10021_RightsTokenUpdate_Policy_RTL_CS_NoPolicyEnforcement_US_MMPA_Can_create_RightsToken_that_IS_ADULT_=_'y'_with_policy_and_all_rating_as_per_Matrix</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Policy - Remove all Parental Control Policies" searchProperties="true" id="2dd20a05-cfa5-44fd-a30b-a4f75e0122e1">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="0e2c9c9f-6a51-46d6-a18b-57e0481a5b97">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("policyExists",null);
testCase.setPropertyValue("policyClass",null);
testCase.setPropertyValue("policyRequestEntity",null);
testCase.setPropertyValue("policyResource",null);
testCase.setPropertyValue("policyCreator",null);
testCase.setPropertyValue("returnXMLResult","true");
testCase.setPropertyValue("policyStatus","urn:dece:type:status:active");</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Calling Test Case Properties" id="520ea4db-ecec-42ee-892a-d9b021b6faae">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("assertionUserIdFULL",callTC.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("assertionAccountIdFULL",callTC.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assert",callTC.getPropertyValue("assert"));
testCase.setPropertyValue("useroid",callTC.getPropertyValue("useroid"));
testCase.setPropertyValue("username",callTC.getPropertyValue("username"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for ParentalControl:RatingPolicy" id="8f9b5a6f-090d-473a-9a81-abea2b4e4de2" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyDelete for ParentalControl:RatingPolicy" id="a7a311cb-6e61-4d7c-bce6-b398a79ad8a5" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
	
if (testCase.getPropertyValue("policyExists") == "true") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:RatingPolicy");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for ParentalControl:BlockUnratedContent" id="1cddafc3-2714-4cd8-8fb1-dbe04c6a81a1" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:BlockUnratedContent");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyDelete for ParentalControl:BlockUnratedContent" id="cc91fda8-8bb6-4c52-8e0f-8baa67ab0ef7" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
	
if (testCase.getPropertyValue("policyExists") == "true") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:BlockUnratedContent");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for ParentalControl:AllowAdult" id="a38621b1-85ad-40a3-8c92-0537b4e79ee3" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:AllowAdult");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyDelete for ParentalControl:AllowAdult" id="55720afd-2389-4b95-9655-8f69840478c3" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
	
if (testCase.getPropertyValue("policyExists") == "true") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:AllowAdult");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyGet for ParentalControl:NoPolicyEnforcement" id="266426aa-0eaa-4ac2-9a19-22dda0a4d161" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:NoPolicyEnforcement");

def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("Policy GET for User")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false )

assert runnerTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="PolicyDelete for ParentalControl:NoPolicyEnforcement" id="c8cee7fa-e958-4c30-9379-3a2269f965c0" disabled="true">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
	
if (testCase.getPropertyValue("policyExists") == "true") {
	testCase.setPropertyValue("policyClass", "urn:dece:type:policy:ParentalControl:NoPolicyEnforcement");

	def myTC = testProject.getTestSuiteByName("Test Cases Containing APIs").getTestCaseByName("PolicyDelete for User")

	myTC.setPropertyValue("tName",testCase.getName());
	myTC.setPropertyValue("sName",testSuite.getName());

	def runnerTC = myTC.run( null , false )

	assert runnerTC.status == Status.FINISHED;
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="DeleteUserPolicies" id="3a3c4f31-8fec-47a0-a72b-a7bf4ee3a18a"><con:settings/><con:config><script>import dbUtils.dbPolicy;

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def useroid = context.expand( '${#TestCase#useroid}' )
def username = context.expand( '${#TestCase#username}' )

a = new dbUtils.dbPolicy(log,testProject.getPropertyValue("targetSystem"));
log.info "useroid"+useroid;
log.info "username=="+username;

a.policyDelete(302,username,"deleted")
a.policyDelete(300,username,"deleted")
a.policyDelete(304,username,"deleted")
a.policyDelete(303,username,"deleted")
</script></con:config></con:testStep><con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZZj6pKEP4rxvNoFFpEBjIzCYKOjDvgMr6cYNMqCs3SDS6//jY6enSWc+fexMR0Uf3VV0tX1SNxAr+qqISghHohLuwDHxPlJH0qpglWQod4RMFOgIhCoWKpva5SrfCKc7lSLBj6U/H3QkSitJSdsiNX6+UafABlGVRR2am5C9lZSHytXmeqhKTIwIQ6mD4VqzyolQHPfjYvKTxQeLkCRGFeLExQQhg2U6nwxXdSe/JUXFMaKRy32+0qO6ESJiuuyvOAm/W6FlyjwCk+P549OhlKnt/1YcVFEPk+rMAw4B65O51HlyiWt8IOTRP0bsv9zhbP8TLHdFzirX4Vr3eRa+BleDpqDg6xBx3fOzp5fHqIrkO3oPqrMPHoOvjWCcDnwGW0h2UIavhXkbun9kOgO4YJccpk7YB3LBMtUYIwRIWxaTwVf/0sa6erduJgsgyTgNwf/xsfhDPkhxFyy+Ti1ju1nwN+EannRwQVA0M/JV6G+nmxRg5E5D2bCP4cqjBM0NLbdz3CCnRPcnbcLb0Px3M0dG+FCP0/CbpJzhlk4vgpei5xbYt2E5GzZ1HHnJpu3A8ar2+iLzSfTgRulU+Ca2rPxw9FeS2i840B17eq3d5Aag4nnArnm9HopS6UVrPXBW3ObHtMti27j3f7YzLR6/Gha0j9sWaNZ+5BoKA5aoQvssWL06GXdaPquC2rm3F7a7XBW20DBn4Lzg8UtINa88GfqNOR1Nb6e3FodVadHu0wgJf+SxDLU2NWf2Mvd9eaJHNPe+PloeoQU9Rj0LMlElhx9bh2aztVqIetrPkqZympT0vbUUl85ch4YDn2kSxaBuK4SdTx9oYpJ+Zx0Y36dLtr0wEari1xMarXLKuxnMTQWGDrqGqNcUm3o3YDb1OhKdvWtreJB1w4YFlH6WzIARG9+e0mHQWcGsX6ot4Q5nxH1dulTSqTOT4ERrVqcwdz7dubZD61a/vZMt036gDxeqkZJYmwHq/iGainCyeAIIlbmv/WPGzfJCleHfEsQ6Ztxy9a1yeNuSx0jnY4Mlqc12+v/aXRNUsqcu3a4cWBwQh6YHRsO2Fn0w/0NeRDIiWDud44rq1JMpaafcevx8fNi5GZ/iwUh0sZhK/NLd1t6Kq95eZcaoz6E90BE2mp6wSYWjaw0znfX2RVdz6QZ3rSMxd1s9t54C06wxNvmIGhNp5Cq57MulNBsntL3pA205q3T3uNSa99BMeDtwWQNqZOjx8vQkGdLOZJS9aGEeC3YWum+i9mpM1bc9Rup+PpUDRW0VGdxCgThOFQ1vELL40itzk3jdJDPEVBMhr7xkHkB8NJfyt7AbdMlrREcYTh07Wcb+r3Xnbp+Va62CBIL8e8DRh6ocVeqUP/PsxyieeWlydVJcqHD6EI0+JzfiufHUrKxp3nKuwNn8+8yOtAawmi2ACSJLeavCjwLVkGLV6VhTq4DJkziw8UtRAvvdxWPnLPbePvBGGgEIRdlJSzMGWTjhT/gqg71CkY2GRNMMQE2SEbzyuKJSrW/XRXIwCDiEi8HB+imI3vfkgHeJCoS4qSu5kM+LuZbCLoRR7KB3fe1whrbISyWMROllIfVDKnglHKRnuST1mlWnsQOeIFkY9yplwQuqmPKtE6OkWGI+f/atmB5CQ1LO232bRPHfdb3z5+u4SB6bherkByfxqIpRJ9WjB4Rbw4873Twq3TF3g1db28ubKY0sSDZyb3n/6USl4j1zp59+pC+6r9UXCHzH106mrMzTx4Lfjr2samOev/z5e0+FGVLTxZJa6kWZaesvFQqwlcwmywCQREjq9yFoIpG1MHO9wizF2huB/tBFf2Hxhc5fc8U7rGFnUoClj5FE7HHyyBFiL5Emiwut//dMO8M8niR9GefiXTfLbA5oz/uuNCBeZ6TDxkf7swcf+k7QusGzvMT7YDUg+v8lO+Dxy+KRAYMliPdbIwuQX/CuAr4/fCa5CvXCirqkVK0fdfCnmLeio6EIYppoZePAlu2+aJJz1ESPmj9Anm1Jmvq7r377t62TuVAERswSfeCT/fuJT8HeDVTet9N/q5+2pNXdceJEkFt91Xq8nX7nvP7vmT+LPkJk4fa/z5Hw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value>urn:dece:accountid:org:dece:050D1CCEDDC877A1E0530F991F0AC491</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value>urn:dece:userid:org:dece:050D1CF355B1779FE0530F991F0A9361</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>ISC_RET</con:value>
        </con:property>
        <con:property>
          <con:name>policyClass</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyCreator</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyExists</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyGetXML</con:name>
          <con:value><![CDATA[<ErrorList xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/schema/md/v1.2/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
   <Error ErrorID="urn:dece:errorid:org:dece:Policy:PolicyNotFound">
      <Reason Language="en">The supplied policy was not found.</Reason>
      <OriginalRequest>${#Project#Provision_HostName}/rest/1/06/Account/urn:dece:accountid:org:dece:A49F28BF260F2548E0401F0A0599026A/User/urn:dece:userid:org:dece:AA908CE1AB0E23E7E0401F0A2222596223/Policy/urn:dece:type:policy:ParentalControl:NoPolicyEnforcement</OriginalRequest>
      <ErrorLink>https://qa.q.uvvu.com:7001/rest/1/06/error/en/ErrorList.html#Policy:PolicyNotFound</ErrorLink>
   </Error>
</ErrorList>]]></con:value>
        </con:property>
        <con:property>
          <con:name>policyRequestEntity</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyResource</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>policyStatus</con:name>
          <con:value>urn:dece:type:status:active</con:value>
        </con:property>
        <con:property>
          <con:name>returnXMLResult</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>R5_RightsTokenUpdate_Policy_RTL_For_New_Geo_BE_LU_NL</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_50001_RightsTokenUpdate - Policy - RTL - ParentalControl:RatingPolicy - LUXEMBOURG - FILMTV - MOC - U rating - Full User</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      <con:property><con:name>useroid</con:name><con:value>050D1CF355B2779FE0530F991F0A9361</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20141010_1231361412924496965</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set a Property" searchProperties="true" disabled="true" id="6cc37e69-14ba-4aeb-94e9-7975e85517b6">
      <con:settings/>
      <con:testStep type="groovy" name="Set a Property" id="7a03d0b0-f1e7-45d0-8b57-448487160dec">
        <con:settings/>
        <con:config>
          <script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 
def propertyName;

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);	
	propertyName = testCase.getPropertyValue("PropertyName");	
	propertyValue = testCase.getPropertyValue("PropertyValue");		
	if(targetTestCase.isDisabled() == false)
	{
		try
		{
			/*nodeRole = targetTestCase.getPropertyValue("ErrorResponse");
			propertyName = "ErrorResponse";			
			if(nodeRole == 'ForbiddenRightsTokenAccessNotAllowed')
			{
				nodeRole = 'ForbiddenDiscreteMediaRightOwnerMismatch';
			}
			propertyValue = nodeRole;*/		
			targetTestCase.setPropertyValue(propertyName, propertyValue);
			log.info "Done with Test Case '" + TCList[i].name + "'";
		}
		catch(Throwable e)
		{
			log.info e.text;
		}		
	}	
}

log.info 'Woohoo!'</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TestSuite</con:name>
          <con:value>FUNC_USER_CONSENT_POLICIES</con:value>
        </con:property>
        <con:property>
          <con:name>PropertyName</con:name>
          <con:value>NumberOfPolicyRequestingEntities</con:value>
        </con:property>
        <con:property>
          <con:name>PropertyValue</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Rename Test Cases" searchProperties="true" disabled="true" id="c9cacc5a-114a-400e-8965-44e7ec9413b6">
      <con:settings/>
      <con:testStep type="groovy" name="Rename Test Cases" id="a3a9d9d1-cb76-4558-8138-b5c2c561c68c">
        <con:settings/>
        <con:config>
          <script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

import java.io.*;

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = testCase.getPropertyValue("TestSuite"); 

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

def TCNum = 13;

//BufferedWriter bufferedWriter = null;
//bufferedWriter = new BufferedWriter(new FileWriter("c:\\DiscreteMediaLeaseCreateQuestions.txt"));

def oldTestCaseName;
def newTestCaseName;

for(i = 0; i &lt;= TCCount - 1; i++)
{	
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	//if(targetTestCase.isDisabled() == false)
	//{
		targetTestCase.setFailOnError(true);
		oldTestCaseName = TCList[i].name;
		newTestCaseName = oldTestCaseName.replace(" ", "");
		//newTestCaseName = newTestCaseName.replace("_POST_", "_GET_");
		//newTestCaseName = newTestCaseName.replace("_RTL_", "_RTL_CS_");
		newTestCaseName = newTestCaseName.replace("_PERM_", "_FUNC_");		
		if (TCNum.toString().length() == 1)
			newTestCaseName = "TC_DECE_0000" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		else if (TCNum.toString().length() == 2)
			newTestCaseName = "TC_DECE_000" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		else if (TCNum.toString().length() == 3)
			newTestCaseName = "TC_DECE_00" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		else if (TCNum.toString().length() == 4)
			newTestCaseName = "TC_DECE_0" + TCNum.toString() + "_PolicyCreate" + newTestCaseName.split("PolicyCreate")[1]
		targetTestCase.name = newTestCaseName;	
		TCNum = TCNum + 1;
		log.info "Done renaming Test Case '" + oldTestCaseName + "' to '" + newTestCaseName + "'";
	//}
	//else
	//{
	//	bufferedWriter.write(targetTestCase.name);
	//	bufferedWriter.newLine();
	//}
}

//if (bufferedWriter != null) {
	//bufferedWriter.flush();
     //bufferedWriter.close();
//}

log.info 'Woohoo!'</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TestSuite</con:name>
          <con:value>PERM_ACCOUNT_CONSENT_POLICIES</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change a step's script for all Steps in a Suite" searchProperties="true" disabled="true" id="9220bdfe-76c0-48a0-827c-c0d9fbce697c">
      <con:settings/>
      <con:testStep type="groovy" name="Change a step's script for all Steps in a Suite" id="bd1ee76b-f702-4039-aecb-c4e8379d062b">
        <con:settings/>
        <con:config>
          <script>//Copyright (c) 2010 Bhavin Bharat Joshi - Neustar, Inc.

//TestCase
def testCase  = testRunner.getTestCase();

//Get Arguments
def testSuite = "Dynamic LASP Test Cases"; 
//def oldString = """deleteTC.setPropertyValue("CallingTestSuiteName", testSuite.name);"""
//def newString = oldString + '\n' + """deleteTC.setPropertyValue("RequestorUUID", requestorUUID);"""

def oldString = """- LLASP -""";
def newString = """- DLASP -""";

def TCList = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseList();
def TCCount = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseCount();

for(i = 0; i &lt;= TCCount - 1; i++)
{			
	def targetTestCase = testRunner.testCase.testSuite.project.getTestSuiteByName(testSuite).getTestCaseByName(TCList[i].name);
	testStepList = targetTestCase.getTestStepList();
	testStepCount = targetTestCase.getTestStepCount();
	if(targetTestCase.isDisabled() == false)
	{
		for(j = 0; j &lt;= testStepCount - 1; j++)
		{
			try
			{
				targetTestStep = targetTestCase.getTestStepByName(testStepList[j].name);
				stepScript = testStepList[j].getScript();
				stepScript = stepScript.replace(oldString, newString);
				targetTestStep.setScript(stepScript);		
			}
			catch(Throwable e)
			{
				log.info e;
			}	
		}
	}
}						
log.info 'Woohoo!'</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>TestSuite</con:name>
          <con:value>RTL_CS</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsToken-Generation" searchProperties="true" id="28ff3321-4b99-4059-9cf8-2ec517cb3869"><con:settings/><con:testStep type="groovy" name="Feed Rights Token Data" id="4eb3b444-cc6f-4737-9901-75418dd6cb0b"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest");

//RightsToken Request and properties
//TsRightsXMLReq.setPropertyValue("Request", testProject.getPropertyValue("ParamRTCreateReq"));

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def RTCRequest = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');

testCase.setPropertyValue("nodeid",RTCRequest.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",RTCRequest.getPropertyValue("assert"));

testCase.setPropertyValue("AccountID",RTCRequest.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",RTCRequest.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",RTCRequest.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("RTC_rcStatusHistory","0");
testCase.setPropertyValue("expectErrTypeRTCreate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
testCase.setPropertyValue("StreamWebLocLocation1","https://dl.bestbuy.com/p/streaminglink");
testCase.setPropertyValue("StreamWebLocPreference1","3");
testCase.setPropertyValue("RightsLockerID",RTCRequest.getPropertyValue("RightsLockerID"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call Rights Token Create API" id="80421bef-d408-407e-bbd5-9f3a0715bc24"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Get Rights Token Data" id="980900b5-7257-4ec0-a98a-4fc2c7839b84"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Create Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

log.info RTCRequest.getPropertyValue("TCaseName");

def runnerRTC = RTCRequest.run( null , false )

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def CallingTestCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

log.info "new generated rights token is "+testCase.getPropertyValue("rightstokenid");

//callingTCase.setPropertyValue("Accountid",testCase.getPropertyValue("Accountid"));




//assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Extract RightsToken Response" id="4e345aaa-ec66-4044-a3d4-d96c9f7969a1">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def RTCRequest = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

RTCRequest.setPropertyValue("rightstokenid",testCase.getPropertyValue("rightstokenid"));
RTCRequest.setPropertyValue("DBrightstokenid",testCase.getPropertyValue("DBrightstokenid"));
RTCRequest.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
RTCRequest.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));
RTCRequest.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));

</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify the RightsTokenGet Response" disabled="true" id="dd09cab0-fed2-4139-b0b8-92787a590dfd">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTGRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Response Validation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTGRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify theRightsTokenGet Response against DB Result" disabled="true" id="9488bff9-5c7d-49c7-b189-012101263a4d">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTGdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights GET  Data Validation");

RTGdataVal.setPropertyValue("TCaseName",testCase.getName());
RTGdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTC = RTGdataVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;

</script></con:config>
      </con:testStep><con:properties><con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt">          <ns4:SoldAs>                     <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                       <ns4:ContentID>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:sd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location> 		 		<ns4:Preference>1</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location> 		<ns4:Preference>3</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location> 		<ns4:Preference>1</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>https://dl.bestbuy.com/p/streaminglink</ns4:Location> 		  		<ns4:Preference>3</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID>                    <ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</ns4:PurchaseAccount>                        <ns4:PurchaseUser>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</ns4:PurchaseUser>                              <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>6679</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:157E6F9FC7854D2FE05305991F0A9450</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value>0</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>Error</con:value></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10020_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property><con:property><con:name>ParamRTCreateReq</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"  xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">                 <ns4:RightsProfiles/>                 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>                 <ns4:PurchaseInfo>                                 <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                                 <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                                 <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                                 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                                 <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>                 </ns4:PurchaseInfo> </ns4:RightsTokenData> ]]></con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/streaminglink</con:value></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>157E6F9FC6FD4D2FE05305991F0A9450</con:value></con:property><con:property><con:name>ParamRTUReqWithOnlyUHD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> </ns4:PurchaseProfile>                                                                                       <ns4:PurchaseProfile    MediaProfile="${#TestCase#PPContentProfile3}" HighDynamicRange="${#TestCase#HighDynamicRange}"   HighFrameRate="${#TestCase#HighFrameRate}"    WideColorGamut="${#TestCase#WideColorGamut}"  NextGenAudio="${#TestCase#NextGenAudio}">                                           <ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload>                                           <ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream>                             </ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>]]></con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsToken-GenerationUHD" searchProperties="true" id="1f0a2a84-0189-413b-a5aa-30f18451db83"><con:settings/><con:testStep type="groovy" name="Feed Rights Token Data" id="25b3c698-c8cc-40c0-810d-ebce7a704a21"><con:settings/><con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def TsRightsXMLReq = testRunner.testCase.testSuite.project.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequestUHD");



def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def RTCRequest = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "Request",RTKRequest);
//testRunner.testCase.testSteps["RightsTokenCreate Request POST"].setPropertyValue( "AccountID",'urn:dece:accountid:org:dece:10222259');

//RightsToken Request and properties
TsRightsXMLReq.setPropertyValue("RightsReqXml",RTCRequest.getPropertyValue("RequestXML"));

testCase.setPropertyValue("RightsLockerID",RTCRequest.getPropertyValue("RightsLockerID"));

testCase.setPropertyValue("nodeid",RTCRequest.getPropertyValue("nodeid"));
testCase.setPropertyValue("assert",RTCRequest.getPropertyValue("assert"));

testCase.setPropertyValue("RightsLockerID",RTCRequest.getPropertyValue("RightsLockerID"));
testCase.setPropertyValue("AccountID",RTCRequest.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("ALID",testProject.getPropertyValue("alid"));
testCase.setPropertyValue("ContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",testProject.getPropertyValue("cid"));
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03.000");
testCase.setPropertyValue("RRSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("PINodeID","urn:dece:org:org:dece:"+testCase.getPropertyValue("nodeid"));
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node222259_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",RTCRequest.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",RTCRequest.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03.000");
testCase.setPropertyValue("VCAllowedUser","urn:dece:userid:org:dece:12222599");
testCase.setPropertyValue("RTC_rcStatusHistory","0");
testCase.setPropertyValue("expectErrTypeRTCreate","SUCCESS");
testCase.setPropertyValue("ErrorDataVal","0");
testCase.setPropertyValue("StreamWebLocLocation1","https://dl.bestbuy.com/p/streaminglink");
testCase.setPropertyValue("StreamWebLocPreference1","3");
testCase.setPropertyValue("RightsLockerID",RTCRequest.getPropertyValue("RightsLockerID"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call Rights Token Create API" id="1a35d381-d08b-4379-b138-1a66db6b4312"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequestUHD")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());
RTCRequest.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"))

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Get Rights Token Data" id="3e084c28-6b04-438a-82a4-151aee202fb6"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Create Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

log.info RTCRequest.getPropertyValue("TCaseName");

def runnerRTC = RTCRequest.run( null , false )

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def CallingTestCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

log.info "new generated rights token is "+testCase.getPropertyValue("rightstokenid");

//callingTCase.setPropertyValue("Accountid",testCase.getPropertyValue("Accountid"));




//assert runnerRTC.status == Status.FINISHED;</script></con:config></con:testStep><con:testStep type="groovy" name="Extract RightsToken Response" id="3e982ddd-4c63-49d4-994f-8949ee1d5a0e">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");
def RTCRequest = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename)

RTCRequest.setPropertyValue("rightstokenid",testCase.getPropertyValue("rightstokenid"));
RTCRequest.setPropertyValue("DBrightstokenid",testCase.getPropertyValue("DBrightstokenid"));
RTCRequest.setPropertyValue("RightsResXml",testCase.getPropertyValue("RightsResXml"));
RTCRequest.setPropertyValue("RightsReqXml",testCase.getPropertyValue("RightsReqXml"));
RTCRequest.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));

</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Verify the RightsTokenGet Response" disabled="true" id="10b82df6-9ebb-49f1-a272-f100eafc88a1">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTGRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenGet Response Validation")

RTGRequest.setPropertyValue("TCaseName",testCase.getName());
RTGRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTGRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Verify theRightsTokenGet Response against DB Result" disabled="true" id="65885970-0385-4e02-9223-5c43672bf0ed">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTGdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights GET  Data Validation");

RTGdataVal.setPropertyValue("TCaseName",testCase.getName());
RTGdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTC = RTGdataVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;

</script></con:config>
      </con:testStep><con:properties><con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:05497B46534C410BE0530F991F0A32CF</con:value></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:file:EXAMPLE_ALID_Version_189067540.txt</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVbZcuq6Ev0Viv1IgUc8VZIqJoOZsQkEXk4JWxgFWwZLnvj6a0NgQ3ayb855cqnVWr16cHc/EeB7vNYgBIYUBbiU+h4m2ln6XI5CrAWAIKJh4EOiUVuzGqOhxtdYDVyflEtG+7n8jwBFSQaKWt1uWKcqSqpS3TiyUwXbjQIUB8iqLOWqhETQwIQCTJ/LPMuJVY6tcsKclTWW1wSxJonKulxawJDk2LlKjS1/kErJc3lH6UFjmCRJaolQC0KX4VmWY95GQ8veQR+UX54uHp0NhS8f+nbNgTb0PLtmBz7zxDzoPDlEs5CLAY1C+GHL+c4Wy7Aqk+s4BLm/yre30DHwNjgfWwAHGNnAQydQxGcE6S5wSg3PDUJEd/63TnBsAVyFqV21ORH/KjOP1H4I9MAwJKBKdoD7wDLhFoYQ27D0ahrP5V8/y9r56TwEmGyD0CePx3/HB+IYesEBOlVydeuD2s8Bv4jUyxO0NQPbXkRQDMdFsR6ADclHNqH9c6jSNIRblA4RyQs0JQU75p7ep+MlGm3kQkL/S4LuknMBWQAvgi/hsOnCV2Um9bsC38bBnqxHreMYbSr285nAvfJZcEvt5fipKG9FdHlxoE1pSXt02Ux6q1Yb+MJMf42HGzadD3Zmf7X3G7xoSPVV7La9tjrrx+2pE78vhDFiZpOk3pkuIv6UZieAUFfvUnMxE/f42CDAcvFSHshvM3XE+mDE4/1Ahcfl0ptA4+AduqrdsV8rfOcYxMkKvLMzdtWzZpmpei1nb3XG2YBvRAujvT06YdPXIwRAu5kuN/t5Q226XrduqkdxFA/S+pgyfRoLtvi+Sg7T0Dy6o1nUWNFg/sbCSDoqg/5+vmTfuAFrTN2pbA4UXhLoaTy3YbYP0oFliNxMdLPmsK/LTatCBrtwmGWnzlpEy7rNpzHwlWUfiEM+qK8zP0nYWK4PA+ktnDTnjXg2k/mlGadZhd1YXWG41jvQTFhOEkRBMVMnsd9SZzxdTetje5kaVuADr+LsuEq9NepgPT4tUrGiEBI3HAU1J/jV8dOJvD51XOkQTAxr75qyeur5DX2RyIfGVhEpW+lmFcytpJkYkIlylKYtWB9se8e406p0u6k3We/Wa5PbKePZtkuSvtHhRptIchmrIzXE3tzq9FnrfR6sHbBY7o9r3KucLCxGb2IiC11vImYOSHeJv+oGfNTEcarHbQHVK/33keD2ZhWlx3rdJFillZ67ep83JpmFrcGmj/ZbKm701Oqs2VQy5O5ilyXDsLswAa+3dYq6ITvqbs1dZDPAN3ay1++09Dd+V8mUBW3TYWXnYyx0/AGeTsF6222tGJPJzJPxfCvnu/p9lF17vhVt3qFNr8eiDRjtkp7/pYD+fZgVEuRUt2dV7VAMH0IhpuWX4lUxO7QoH3fI0fJ/+HJm66IqN2W+o6u8yHF6h60LrK6qnM426rokXYfMhcUniq0Ab1Fhqxi5l7bxd4K2rxGIHRhW4yDKJx0p/wWxDSgoGdjMm2CACZwH+XjmeD5ijymbEeogTnDUo7w/+eG7ui2XxgGd4EnY2FIYPgxljn0Yyia00QHBYnIXjY3knS1Hg/YRxBH1uFoMahhG+WwPizGr8aJSZwjyDx4sqDJ+4EQerB12h3NoGHL58lVgk7PUsFr/mJ35ueV+69znu2scch0HFQqk8KcJ81zCLzYM/urM904L905f4RuRg4rumgeVhsi+MHm8+l0rRZHcCuXDqyvtm/ZnwQMy89mpmzEnRvat4m97Wz7O8wHwck2Ld+DzjSeuHWtRHEfnbCiiKDBhbiMfQVydYXnGgnaUz6lsHuwhZm5QzI+Wghv7Twxu8keeEd1hiwIK/bx8SufjD7ZAC5JiCzTywk9/umI+mMzjR2FKv5K1vHyDLRj/dcm1NbvQy8XT/JMEofM7bV9g3dnJ/cyXQIqwW5yKhSD7pkDsIIdFeSsLwnvwrwC+Mv4ovAX5xoXmVbWJKPz+plT0qOcysO0gwtRol8+C+7555kmzA9R+K/0Bc27Nt10d/f9lvYrOJWDDfMMn6IxfrFxa8R9g9673fhj9s/2KUl0QWyLHNu/br8C39FtQHti9/CH+U3IXp881/vI/</con:value></con:property><con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:file:A_File_Name_with_NUMBERS_165670638.txt</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>050D422E70137E1FE05305991F0A3F28</con:value></con:property><con:property><con:name>ErrorDataVal</con:name><con:value>0</con:value></con:property><con:property><con:name>expectErrTypeRTCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>FeedRTCReq</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>ISC_RET</con:value></con:property><con:property><con:name>ParamRTCreateReq</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"  xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">                 <ns4:RightsProfiles/>                 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>                 <ns4:PurchaseInfo>                                 <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                                 <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                                 <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                                 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                                 <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>                 </ns4:PurchaseInfo> </ns4:RightsTokenData> ]]></con:value></con:property><con:property><con:name>ParamRTUReqWithOnlyUHD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> </ns4:PurchaseProfile>                                                                                       <ns4:PurchaseProfile    MediaProfile="${#TestCase#PPContentProfile3}" HighDynamicRange="${#TestCase#HighDynamicRange}"   HighFrameRate="${#TestCase#HighFrameRate}"    WideColorGamut="${#TestCase#WideColorGamut}"  NextGenAudio="${#TestCase#NextGenAudio}">                                           <ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload>                                           <ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream>                             </ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>]]></con:value></con:property><con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:ISC_RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:05497B46534C410BE0530F991F0A32CF</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03.000</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:05497B72EF92411FE0530F991F0A5F66</con:value></con:property><con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_node222259_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>urn:dece:rightslockerid:org:dece:05497B465354410BE0530F991F0A32CF</con:value></con:property><con:property><con:name>RightsReqXml</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="http://www.decellc.org/schema/2015/03/coordinator"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="urn:dece:alid:org:200002" ContentID="urn:dece:cid:org:200002">          <ns4:SoldAs>                     <ns4:DisplayName Language="en">Avatar BestBuy Special Packaging</ns4:DisplayName>                       <ns4:ContentID>urn:dece:cid:org:200002</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:hd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                            <ns4:PurchaseProfile   MediaProfile="urn:dece:type:mediaprofile:sd">                                          <ns4:CanDownload>true</ns4:CanDownload>                                          <ns4:CanStream>true</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                                                                                                                                                                  </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>ns3.google.com</ns4:LicenseAcqBaseLoc>         <ns4:FulfillmentWebLoc MediaProfile="urn:dece:type:mediaprofile:hd"   xsi:type="ns4:ResourceLocation-type">                               <ns4:Location>https://dl.bestbuy.com/p/aaa</ns4:Location>                             <ns4:Preference>1</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentWebLoc   MediaProfile="urn:dece:type:mediaprofile:hd" xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>https://dl.bestbuy.com/p/bbb</ns4:Location>                            <ns4:Preference>1</ns4:Preference>          </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:hd"  xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>https://dl.bestbuy.com/p/ddd</ns4:Location>                  <ns4:Preference>3</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:FulfillmentManifestLoc  MediaProfile="urn:dece:type:mediaprofile:sd" xsi:type="ns4:ResourceLocation-type">                                 <ns4:Location>https://dl.bestbuy.com/p/ccc</ns4:Location>                  <ns4:Preference>1</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:PurchaseInfo>                        <ns4:NodeID>urn:dece:org:org:dece:RET</ns4:NodeID>                    <ns4:RetailerTransaction>RetailerTransaction_1_node222259_RetailerNode</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>urn:dece:accountid:org:dece:050D422E6FDA7E1FE05305991F0A3F28</ns4:PurchaseAccount>                        <ns4:PurchaseUser>urn:dece:userid:org:dece:050D63EBEC396A84E05307991F0A13CE</ns4:PurchaseUser>                              <ns4:PurchaseTime>2011-06-24T15:12:03.000</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>2940</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:050D422E70137E1FE05305991F0A3F28</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:ISC_RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03.000</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value>0</con:value></con:property><con:property><con:name>RTObjType</con:name><con:value>Error</con:value></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:file:A_File_Name_with_NUMBERS_165670638.txt</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/streaminglink</con:value></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10001_RightsTokenUpdate_FUNC_RTL_With_Valid_Accountid and Valid RightsTokenId</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCasesWithUHDMediaProfile</con:value></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:12222599</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties>
      <con:property>
        <con:name>QC_TestPlanDirectory</con:name>
        <con:value/>
      </con:property>
      <con:property>
        <con:name>QC_TestLabDirectory</con:name>
        <con:value/>
      </con:property>
      <con:property>
        <con:name>QC_TestSet</con:name>
        <con:value/>
      </con:property>
    </con:properties>
    <con:reportParameters/>
  </con:testSuite><con:testSuite name="Staging Rights UPDATE" id="8571fe76-ca8d-4dfb-b79d-d058d570bbb8" disabled="true">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:properties/>
    <con:reportParameters/>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RightsTokenCreate_With_Valid_AccountId" searchProperties="true" id="b8b11ff9-18c0-421b-82dd-c71493c51a5a">
      <con:description>Create the RightsTokenCreate API transaction. Verify that the transactionis a fully populated rights token.  Ensure all required field is included in the create request. Send the RightsTokenCreate API transaction. Verify that the token was created successfully and that it contains the ID for the created rights token. Response should pass back a RightsTokenID.</con:description>
      <con:settings/>
      <con:testStep type="groovy" name="Feed RightsTokenCreate Request with Valid Data" id="f13202d6-8e64-40f2-bb6e-95f0ed0ab1db">
        <con:settings/>
        <con:config><script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("nodetype","retailer");
//RightsToken Request and properties:

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

testCase.setPropertyValue("nodeid",CallingTCase.getPropertyValue("nodeid"));
def CallingNodeid = "urn:dece:org:org:dece:" + testCase.getPropertyValue("nodeid");
//SetUp SAML assertion in Request header
testCase.setPropertyValue("assertionAccountIdFULL", CallingTCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("assertionUserIdFULL", CallingTCase.getPropertyValue("assertionUserIdFULL"));

testCase.setPropertyValue("assert",CallingTCase.getPropertyValue("assert")); //Policy Test Suites
//testCase.setPropertyValue("SAMLassertion",CallingTCase.getPropertyValue("SAMLassertion")); //Other Test Suites
testCase.setPropertyValue("AccountID",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("ALID",CallingTCase.getPropertyValue("ALID"));
testCase.setPropertyValue("ContentID",CallingTCase.getPropertyValue("ContentID"));
testCase.setPropertyValue("SoldAsDisplayName","Avatar BestBuy Special Packaging" );
testCase.setPropertyValue("SoldAsLanguage","en");
testCase.setPropertyValue("SoldAsContentID",CallingTCase.getPropertyValue("SoldAsContentID"));
testCase.setPropertyValue("SoldAsBundleID","urn:dece:bid:100001"); //Jitu
testCase.setPropertyValue("PPContentProfile1","urn:dece:type:mediaprofile:hd");
testCase.setPropertyValue("PPDiscreteMediaRemaining1","1");
testCase.setPropertyValue("PPDiscreteMediaProfile1","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad1","true");
testCase.setPropertyValue("PPCanStream1","true");
testCase.setPropertyValue("PPContentProfile2","urn:dece:type:mediaprofile:sd");
testCase.setPropertyValue("PPDiscreteMediaRemaining2","0");
testCase.setPropertyValue("PPDiscreteMediaProfile2","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad2","true");
testCase.setPropertyValue("PPCanStream2","true");
testCase.setPropertyValue("PPContentProfile3","urn:dece:type:mediaprofile:pd");
testCase.setPropertyValue("PPDiscreteMediaRemaining3","0");
testCase.setPropertyValue("PPDiscreteMediaProfile3","urn:dece:type:discretemediaformat:securedigital");
testCase.setPropertyValue("PPCanDownLoad3","true");
testCase.setPropertyValue("PPCanStream3","true");
testCase.setPropertyValue("RSCreatedby",CallingNodeid);
testCase.setPropertyValue("RSCreationDate","2011-02-17T15:12:03");
testCase.setPropertyValue("RSValue","urn:dece:type:status:active");
testCase.setPropertyValue("RSDescription","new rights token");
testCase.setPropertyValue("LICAcqBaseLoc","ns3.google.com");
testCase.setPropertyValue("FFWebLocLocation1","https://dl.bestbuy.com/p/aaa");
testCase.setPropertyValue("FFWebLocPreference1","1");
testCase.setPropertyValue("FFWebLocLocation2","https://dl.bestbuy.com/p/bbb");
testCase.setPropertyValue("FFWebLocPreference2","1");
testCase.setPropertyValue("FFManifestLocLocation1","https://dl.bestbuy.com/p/ccc");
testCase.setPropertyValue("FFManifestLocPreference1","3");
testCase.setPropertyValue("FFManifestLocLocation2","https://dl.bestbuy.com/p/ddd");
testCase.setPropertyValue("FFManifestLocPreference2","1");
testCase.setPropertyValue("StreamWebLocLocation1",CallingTCase.getPropertyValue("StreamWebLocLocation1"));
testCase.setPropertyValue("StreamWebLocPreference1",CallingTCase.getPropertyValue("StreamWebLocPreference1"));
testCase.setPropertyValue("PINodeID",CallingNodeid);
testCase.setPropertyValue("PIRetailerTransx","RetailerTransaction_1_node"+ testCase.getPropertyValue("nodeid")+ "_RetailerNode");
testCase.setPropertyValue("PIPurchaseAccount",testCase.getPropertyValue("assertionAccountIdFULL"));
testCase.setPropertyValue("PIPurchaseUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("PIPurchaseTime","2011-06-24T15:12:03");
testCase.setPropertyValue("VCAllowedUser",testCase.getPropertyValue("assertionUserIdFULL"));
testCase.setPropertyValue("expectErrTypeRTCreate","SUCCESS");</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Call RightsToken Create request" id="e9474c02-3bb4-4e1d-827a-a4355154cd06">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("RightsTokenCreateRequest")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Get Information on RightsToken Created" id="9f5f7e43-4040-4412-acd6-5e12632580b7">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTCRequest = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Extract RightsToken-Create Information")

RTCRequest.setPropertyValue("TCaseName",testCase.getName());
RTCRequest.setPropertyValue("TSuiteName",testSuite.getName());

def runnerRTC = RTCRequest.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify the DB with new RightsTokenData" disabled="true" id="5e1f2d08-0e78-4795-a465-343490a3e87c">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def RTdataVal = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Rights Create Data Validation")

RTdataVal.setPropertyValue("TCaseName",testCase.getName());
RTdataVal.setPropertyValue("TSuiteName",testSuite.getName());


def runnerRTC = RTdataVal.run( null , false )

assert runnerRTC.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return RightsToken Information" id="c0f79ed1-73eb-451f-b68d-f8d5b68175dd">
        <con:settings/>
        <con:config>
          <script>import groovy.*
import groovy.xml.*
import groovy.util.*;
import com.eviware.soapui.model.testsuite.TestRunner.Status
import com.eviware.soapui.support.types.StringToStringMap


def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

// Return RightsToken properties:

def callTSuitename = testCase.getPropertyValue("TSuiteName");
def callTCasename = testCase.getPropertyValue("TCaseName");

def CallingTCase = testProject.getTestSuiteByName(callTSuitename).getTestCaseByName(callTCasename);

CallingTCase.setPropertyValue("rightstokenid", testCase.getPropertyValue("rightstokenid"));
CallingTCase.setPropertyValue("DBrightstokenid", testCase.getPropertyValue("DBrightstokenid"));
CallingTCase.setPropertyValue("RightsResTime",testCase.getPropertyValue("RightsResTime"));
CallingTCase.setPropertyValue("RTC_rcStatusHistory",testCase.getPropertyValue("RTC_rcStatusHistory"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        
        
        
        
        
        <con:property><con:name>AccountID</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        <con:property><con:name>accountrowoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>ALID</con:name><con:value>urn:dece:alid:eidr-s:512F-4CA1-D6E8-D57D-5012-I</con:value></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVbbcuI4EP0VyvOYMpZvXFyBKhJC1kwYkkAymXnZEnJjlNgSWDKQ+fqVDDhALsvuk0vt1unTFx3pXOA0cYKOEJBJylllnSZMBIW1ZeQZCzgWVAQMpyACSYJRZ3ATOFUU4N0WoxJ2W8bftag2cRyomR7GvulFftOc2LZrQhShBrFt5Ea+chUih5AJiZlsGQ6yPdNGpovGthcgFPhuteai30blETKhsJVLFRlbUmvRMmZSzgPLWq1W1ZVb5VlsOQjZ1tPgZkRmkGKjfb7JqAiUtbf+pBoBgSQhVcJT69w68DmPRDCiMcMyz2AbK/osFrJQ01I+kaDxN6PcC1HIprxYXmLGGSU4oX+wrs8A5IxHlU4S84zKWfppEjbSwCasiUlsj30zrENqJwIdMMwENsUM21use5hCBoxA5eE+bBnfTutasXWcYSamPEvF4fK/8QG2hITPITLFLq0ttdMBP6hU+xxIEDKS5IIu4Yce1jkmILbdBHI6VOU2gyld31ChBnQtNDtrn97RclONLo1ByP/ToL3mbEAecZJDW3oPJE/iZn+wXIe38Wgx6ta79C5+RWGrILDvXBjK1m6WR0NZDtFmx+sLDCbZrZiGQzz4ha7WNy9+z67/zhfUf5jPmkNv7HKeSuxeiU5kiTE6u3h88J35X33X6vyk4YWcDhZ96/tv+DOMqf888e7YWSoi4V3HtV/c8/q45j3FyQgNF/ZjfNfr1Wf2WXKdPnQsunJ//LzzVtMHqyvoi5/nFLJr3L/vvwxv06fJWTQZeyhc0D66xtt0j/gf2nZnfpRPnoHI3VKPQdit9FSXsPxazLSFRua0cA3mWnyEBCaNtt6ltSPIldzRKFA93KxRreN7V5e1ZuOi4TSbzSvku6jebNo91HHrjrMTmQ2LI4qXnE2pjqUldzM2XxMkaSCARZCZS54rpRPGF4hdLHElZPfqEHAmYMyVPNtxw1vUnomYyMkfu57wBhcv9edI1o3KDy6HbJh1phKyQ1GuH4jyPRA6p6CVWw+2UJMtpCrGAi9zmdjVJa4yyJW2Z1pmA8dr+Jag6TwBTdVKeZQnUJ3P5kVpLLH5OiYmorDeX42L4/ZpYsf/djVQPhHVDkLncgGqj/DB7eLtEvk0YQftJ7yD7+QR1SdLFVRmlGyYHP56mxM9IOWQqIx2lEvPY8MBqnWcUBkoWlJSTnp5XysZVwe/vWvHAlcX1Xy5zIsG1LXAZQpeqY7tW8ixRkByJU2vY/4CzCpRrJPugZL4UfDSfkgxlzM2klhCqiamUixPuPhHIPTFH6pZX5/6qjgIqUonYS0/sl0m6tGiGX/5riEB0X7KfKs+K55Fbx37AGsvjspT3fuSsliv9B3w+slcEK5gqVIvnu2DfwTwUfBDY1nkkotUAzXJJXz+p6JlqWVgQnjOZNg1CsO+VBY85escgjendzCFGpfPM/rv7zOTFiNAQD3qBC3w9S0b6CPA4j253QZ9r7iNXs/1PKdx5ewrrl27vCyLcsCu/c783rJXp+MZb/8D</con:value></con:property><con:property><con:name>assertCommon</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        <con:property><con:name>assertionAccountId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:06A54EC698B82999E05307991F0A3722</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>cid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        <con:property><con:name>ContentID</con:name><con:value>urn:dece:cid:eidr-s:512F-4CA1-D6E8-D57D-5012-I</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value>06A54F15877929B3E05307991F0A98F3</con:value></con:property><con:property><con:name>deceorgid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrTypeRTCreate</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>expectErrTypeSTS</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        
        
        
        <con:property><con:name>expectErrTypeSTSGet</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FeedRTCReq</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>FFManifestLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/ccc</con:value></con:property><con:property><con:name>FFManifestLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/ddd</con:value></con:property><con:property><con:name>FFManifestLocPreference1</con:name><con:value>3</con:value></con:property><con:property><con:name>FFManifestLocPreference2</con:name><con:value>1</con:value></con:property><con:property><con:name>FFWebLocLocation1</con:name><con:value>https://dl.bestbuy.com/p/aaa</con:value></con:property><con:property><con:name>FFWebLocLocation2</con:name><con:value>https://dl.bestbuy.com/p/bbb</con:value></con:property><con:property><con:name>FFWebLocPreference1</con:name><con:value>1</con:value></con:property>
        
        
        <con:property><con:name>FFWebLocPreference2</con:name><con:value>1</con:value></con:property>
        
        <con:property><con:name>LICAcqBaseLoc</con:name><con:value>ns3.google.com</con:value></con:property><con:property><con:name>loopuntil</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeaccountid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodetype</con:name><con:value>retailer</con:value></con:property><con:property><con:name>nodeuserid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>password</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        
        <con:property><con:name>PINodeID</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>PIPurchaseAccount</con:name><con:value>urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC</con:value></con:property><con:property><con:name>PIPurchaseTime</con:name><con:value>2011-06-24T15:12:03</con:value></con:property><con:property><con:name>PIPurchaseUser</con:name><con:value>urn:dece:userid:org:dece:06A54EC698B82999E05307991F0A3722</con:value></con:property>
        
        
        
        
        
        
        
        
        <con:property><con:name>PIRetailerTransx</con:name><con:value>RetailerTransaction_1_nodeRET_RetailerNode</con:value></con:property><con:property><con:name>PPCanDownLoad1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanDownLoad3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream1</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream2</con:name><con:value>true</con:value></con:property><con:property><con:name>PPCanStream3</con:name><con:value>true</con:value></con:property><con:property><con:name>PPContentProfile1</con:name><con:value>urn:dece:type:mediaprofile:hd</con:value></con:property><con:property><con:name>PPContentProfile2</con:name><con:value>urn:dece:type:mediaprofile:sd</con:value></con:property><con:property><con:name>PPContentProfile3</con:name><con:value>urn:dece:type:mediaprofile:pd</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile1</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property>
        
        
        <con:property><con:name>PPDiscreteMediaProfile2</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaProfile3</con:name><con:value>urn:dece:type:discretemediaformat:securedigital</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining1</con:name><con:value>1</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining2</con:name><con:value>0</con:value></con:property><con:property><con:name>PPDiscreteMediaRemaining3</con:name><con:value>0</con:value></con:property><con:property><con:name>QC_Id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RightsReqXml</con:name><con:value>&lt;ns4:TransactionType>urn:dece:type:transaction:category1&lt;/ns4:TransactionType>&lt;/ns4:PurchaseInfo> &lt;/ns4:RightsTokenData></con:value></con:property><con:property><con:name>RightsResTime</con:name><con:value>1689</con:value></con:property><con:property><con:name>RightsResXml</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<dece:ErrorList xmlns:dece="http://www.decellc.org/schema/2015/03/coordinator" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/schema/md/v2.1/md">
   <dece:Error ErrorID="urn:dece:errorid:org:dece:SaxParserException">
      <dece:Reason Language="en">cvc-datatype-valid.1.2.1: '' is not a valid value for 'integer'.</dece:Reason>
      <dece:OriginalRequest>http://stdecqavap1.va.neustar.com:8009/rest/2015/02/Account/urn:dece:accountid:org:dece:06A54E8FF34428E2E05307991F0A16CC/RightsToken</dece:OriginalRequest>
      <dece:ErrorLink>https://qa.q.uvvu.com:7001/rest/2015/02/error/en/ErrorList.html#SaxParserException</dece:ErrorLink>
   </dece:Error>
</dece:ErrorList>]]></con:value></con:property><con:property><con:name>rightstokenid</con:name><con:value>urn:dece:rightstokenid:org:dece:06A54F15877929B3E05307991F0A98F3</con:value></con:property><con:property><con:name>RRSValue</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>RSCreatedby</con:name><con:value>urn:dece:org:org:dece:RET</con:value></con:property><con:property><con:name>RSCreationDate</con:name><con:value>2011-02-17T15:12:03</con:value></con:property><con:property><con:name>RSDescription</con:name><con:value>new rights token</con:value></con:property><con:property><con:name>RSValue</con:name><con:value>urn:dece:type:status:active</con:value></con:property><con:property><con:name>RTC_rcStatusHistory</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>SAMLassertion</con:name><con:value>nVdZk6JKE333VxjOY4fNorjFdEcUq6ioIK4vX2BRAsqiFAj662+Bo2P39Myd+z102JVUZp3MPCSnvmMr8NkewBjFiReFVVV8q/2v295CxrY7ddSyuXrTbnbqHdjd1httjra2XQ7tGLtWVTFOkRrixAqTtxpLM2yd7tTZpklzPbbRa7Kv3W5rU6suUIxJaLLlla5V88APca889q2WxmEvsrCHe6EVINxLYG8GtFGP7OxZd0y19+83lOWB8bubJMceRcFXG0Hk+/AVRgH1nfqw57uNezPPCa0kjdGPM238Vvvhm2XZa9Z4jWKHYmmapuguRfbY2HO+1d4rd2dkq+Euuq0FK4xCD1q+d7UKUBpK3MiuAt+JYi9xg9+EZiiGLkLXUQ7rkGmG32rUzwNKdH8Z6QPIGFt17FrMPZiBdihGIUTVuaG+1b79XQdvvmZshXgXxQH+tP5vkFB4Rn50RHYd3zO7o/v7iF+U6/07gj01hH6KvTMaFzQ5WhDh6jRGOy8feZiQz8bVsv3VHN8ZhuB/acl36hkngU19URnRcxBO/p9+PffqFmVh+Sl6R4k4hBPUXOuoMbm2hjk4603FtvUIvJUQnjffQD1a/WP9magPXv1wclnGMre+PBht882aXYCd6ajY1UYti14epuepdexPaGZKGzS7PCmK0Nx0Gb7TWar0NT/HQGN1fqgIG3MVvFRiWx8tox3QZ/E6mHX6HLx4B3EgL1UTXuG4HdgXbd22sT0eYdyXpvMXpguzMbVOD63OjvOW5yWcB/7ZCB2hMtZPgJqp0354nXGq0m3Zh7efOT3nUOQ1RJcyyeL/FUd3RSuxHguhmBQ78nom6F1TVTG9CgK4zByQqTxwyN8ejHnncHIPntLNaB7ougxEgff30kgDBwUwc4l3NWGx0HLhCga8M14QR7MC/A2vGVImZmtxoet9KXNNW1lctoqfbq7SWAO4dBZcTTKkhWiYkqaB6GbLNXGr5HttpmWqvhYrJIAo5cerrXQTpOQeZFVOm3Hsesalm9WC2OXLKBift6bka4KmCLOTMlO3DVGXBsBYLyErp8T3OgqOUWU955+cBke0B0jOaHImuGrmIdPMOTsWDau0mR9tmqoMNB1ngl5mpVSkbLCYX3/WQuA1wQ6kXDLB9FYLaArymN6sBthacqFmgEx0SuehlNmTOxBNp7OKcKvVSMoMyZiPZc1QMwmUNlHKfLxlx+5Wcc+woecDE+yfGyPo0lIOyfPQOMMLd6pYigy2wYKBDcOFHudZqyhzNp1M1NeDYbRRSZgx0CWe1wEBRIMiNVJ/Hoz4BTc5el3WQ6OdHAXIjSsaEw0P52tOd7zGxJmOl5y4O7SnijdtWLZLqT5k940DUFVkDxlXt2xjTRli6F1bk+F8hbx4fU3GnM60vA5XMZbpfCVGftvur9bz4Uu+hro5mc7my+k1z8enfefqJ/0J349nA010JmOEphi+ULQl82ZH5IR1f0/4tDNoxFWAo/EAKHvHkTxCYL6/v5Gwb2gSIS/QhEwRloIyA4ryIqm8qOs72WWmUFmkc2asqZLtkzJd1ivDr2wEXiSdoq3l5rhmZXpjArsMpjcl2dHn3MtghTb62DcXCciOi13IMLRy1Ps7LXOgVjDAVrMZT94ivpKqYG5NjgM6Hy5aNHPSbX8w64J5I5+xh3ziOpvLwdkcSFPWT6/O2gT+wnzimEootqzopmRooHN733JNnTcMHwb5cRvAXDRJz0rnyOQlQ9bpeS6KYHizYROwOV5fpb0mSKV/BeSaRWhx3q5cvA7H3sSUUkLa9Iku+y1L/yvHCopVPnLsJAAdfOaYdOOYBHanF7UjMphrCUe8zBxekU56ezEadI+0vhodKvyLTDmJ5zcnYSczhy9L5pK13b2+XHZV0RVewt3abWwTnrauUEeDQ1vxjIMYtpr+RRtpOjf3KP9C79Epw6PKWGVCqZFcZaobpy98sPGC67XRZOfBdJae1bk1xMzF3Z6W3Ww/7bcoKlYu3LW9OevyKoLr23fk85B8GG9jlHoesB8m8F17zdLtHsHkviy+w6pYlcnH0Ur+rOMKi2fXd+XW3rEQgzhBYVJ7L7wKDddLidLz7B75ct7WoNmV2Q4vsy2myXLNjkQ3aUamAc11uzTbku9i74biE0QhCndecVYhZ28f6z8DhEEPo9BGcf0cpdBFuPaHiEW9qmpoEBUShRiZ0VuNkzocQ8uMyBMJLHRYXujy7WaDbwO20RQ67Vp1HCWTcBKDXYLiJ6XMfVbKBoLe0UOFnC40BSaiAiekIifrnCY+83q2XkOUEsEdF5q3xzY7HIW94OijAi8VRHbqo9ejeyzrQ+HbL1u3IC6tdLvbLcXOb9P7/OxeCbLH9ooNuEiGR6Sb6AvN37hn8kvGjS/vBvfwILW9QtOQsiaxB29IPj76yZaCJg+qFCndMT+2fjZ8CEt9zuhxkn324IPwjysRUdREc73fG3KyXk+v6fmcli1oF3oyJuEphqJZaoZgSkThxYwOKKQeIai/0uMP1J9Oftg/4ksTN5wl5GUOCGGq5fIvLmMzhIvLmEr4nv/tTe/DkaRuCcqTr2yCT+5sBeI/XutgDxb7iHlKfrIo/pn4V7GeziF5FtPLC51iVajvy29YASMS1iMTLIqfg38V4KvDPxofRX5gSQibtmmCfv+kWoymt5oFYZSGiSrWSsPzuCxxJpcj6v3c9EuYUv/+uNDk+LcXmpU2mpHBFVi1x17v3zfXvZIuEBEv7JVY3mo5uZuTw0PnaTz/APj1hKblLyY0eBTwQybvv5h/tTzV9PP78P4P</con:value></con:property><con:property><con:name>SoldAsBundleID</con:name><con:value>urn:dece:bid:100001</con:value></con:property><con:property><con:name>SoldAsContentID</con:name><con:value>urn:dece:cid:eidr-s:512F-4CA1-D6E8-D57D-5012-I</con:value></con:property><con:property><con:name>SoldAsDisplayName</con:name><con:value>Avatar BestBuy Special Packaging</con:value></con:property><con:property><con:name>SoldAsLanguage</con:name><con:value>en</con:value></con:property><con:property><con:name>synced</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>targetURL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10005_RightsTokenUpdate_FUNC_RTL_with_Inactive_NodeId</con:value></con:property><con:property><con:name>tokentype</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_RTL_TestCases</con:value></con:property><con:property><con:name>username</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      <con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>userrowoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>VCAllowedUser</con:name><con:value>urn:dece:userid:org:dece:06A54EC698B82999E05307991F0A3722</con:value></con:property><con:property><con:name>StreamWebLocLocation1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>StreamWebLocPreference1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
  </con:testSuite><con:testSuite name="TestSuite Utility Test Cases" disabled="true" id="6353a407-aee6-4219-9618-bfb45da52a01"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS Response Validator" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="b833e8c7-a0ac-4c4a-8b22-ecfe2d40e25f"><con:settings/><con:testStep type="groovy" name="Establish Test Case properties" id="578f150d-c814-4f91-9ee3-befc4f751487"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("expectErrType",null);
testCase.setPropertyValue("XMLbody", null);
testCase.setPropertyValue("status", null);
testCase.setPropertyValue("connection", null);
testCase.setPropertyValue("contentType", null);
testCase.setPropertyValue("contentLength", null);
testCase.setPropertyValue("contentLocation", null);
testCase.setPropertyValue("assertionUUID",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties" id="3776b0a6-df5f-41c6-a946-3fb053498244"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue( "QC_ResultExportLevel", "on" )

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("expectErrType",callTC.getPropertyValue("expectErrType"));
testCase.setPropertyValue("status", null);
testCase.setPropertyValue("connection", null);
testCase.setPropertyValue("contentType", null);
testCase.setPropertyValue("contentLength", null);
testCase.setPropertyValue("contentLocation", null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers" id="c6af089c-3943-4183-af34-1bcaca27ce13"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
def tStep  = callTC.getTestStepByName('POST - STS');

def expXML = tStep.httpRequest.response.getResponseContent();


/*
*  Get the HTTP headers
*/
tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		/*case "Connection": 
			connection = value[0]; 
			break;*/
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody",expXML);
testCase.setPropertyValue("status",status);
//testCase.setPropertyValue("connection",connection);
testCase.setPropertyValue("contentType",contentType);
testCase.setPropertyValue("contentLength",contentLength);
testCase.setPropertyValue("contentLocation",contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers and save assertion" id="b89bc371-9b87-436b-a0b0-b705292577e8"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url           = testProject.getPropertyValue("targetURL");
def url           = testProject.getPropertyValue("Provision_HostName");
def urnacct       = testProject.getPropertyValue("urnaccount");
def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrType");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
//boolean doContentLocaton  = false;
boolean doContentLocaton  = true;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
String orgRequest  = url + "/rest/1/06/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "text/plain; charset=UTF-8";
		contentLengthZero = true;
		doContentLocaton  = true;
		dobodyXML = false;
	break;
	default:
		errorReason = "Forbidden";
		errorID = "Forbidden";
		errorLink = "";
		orgRequest = "";
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}


//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/1/06/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} else {
		return false;
	}
}



</script></con:config></con:testStep><con:testStep type="groovy" name="Return the assertion to the Calling Test Case" id="db12da2d-4cfd-4bbf-8d3b-6e080cd52117"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",testCase.getPropertyValue("assertionUUID"));</script></con:config></con:testStep><con:properties><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>connection</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLength</con:name><con:value>0</con:value></con:property><con:property><con:name>contentLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.q.uvvu.com:7001/rest/1/06/SecurityToken/Assertion/_3baa8ff4-f122-4b18-948d-bde8505caca6</con:value></con:property><con:property><con:name>contentType</con:name><con:value>text/plain; charset=UTF-8</con:value></con:property><con:property><con:name>dlpnodeid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>llpnodeid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>loopuntil</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nickname</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeaccountid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodetype</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeuserid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>sName</con:name><con:value>Retailer_Work_Flow</con:value></con:property><con:property><con:name>status</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>streamhandle</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>TC_DECE_01000 - STS</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS GET Response Validator" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="4648b12b-cda9-4343-b711-b18ef2814e07"><con:settings/><con:testStep type="groovy" name="Establish Test Case properties" id="f545d151-e775-4d04-ae6d-9210e2d71381"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("expectErrType",null);
testCase.setPropertyValue("XMLbody", null);
testCase.setPropertyValue("status", null);
testCase.setPropertyValue("connection", null);
testCase.setPropertyValue("contentType", null);
testCase.setPropertyValue("contentLength", null);
testCase.setPropertyValue("contentLocation", null);
testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertId",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assertionUUID",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properties" id="3d8af08b-92f1-4f08-b86e-8b25e02c1cd0"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue( "QC_ResultExportLevel", "on" )

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("expectErrType",callTC.getPropertyValue("expectErrType"));
testCase.setPropertyValue("status", null);
testCase.setPropertyValue("connection", null);
testCase.setPropertyValue("contentType", null);
testCase.setPropertyValue("contentLength", null);
testCase.setPropertyValue("contentLocation", null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Response Body and Headers" id="07ee7771-4489-4dba-ade8-4d2608405726"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)
def tStep  = callTC.getTestStepByName('GET - STS');


/*
*  Get the HTTP headers
*/
tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
	   /*	case "Location": 
			contentLocation = value[0];
		break;*/
		case "#status#": 
			status = value[0]; 
			break;
		/*case "Connection": 
			connection = value[0]; 
			break;*/
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}
//def contentLocation = tStep.httpRequest.response.responseHeaders["Content-Location"];

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();
rawResp = new ByteArrayOutputStream();
rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
String XMLbody  = strVal.substring(startAssert, strVal.length());

testCase.setPropertyValue("XMLbody", XMLbody);
testCase.setPropertyValue("status", status);
//testCase.setPropertyValue("connection", connection);
testCase.setPropertyValue("contentType", contentType);
testCase.setPropertyValue("contentLength", contentLength);
//testCase.setPropertyValue("contentLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Body and Headers" id="4450c31d-7a28-4af4-adeb-dc0970315c9b"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url           = testProject.getPropertyValue("targetURL");
//def urnacct       = testProject.getPropertyValue("urnaccount");
//def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrType");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String orgRequest  = url + "/dece/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}

//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/dece/SecurityToken/Assertion/[0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.saml2:Assertion.size() == 1;
		assert myXML.ds:Signature.size()    == 1;
		assert myXML.ds:SignedInfo.size()   == 1;
		assert myXML.ds:DigestValue.size()  == 1;
		assert myXML.ds:SignatureValue.size()  == 1;
		assert myXML.ds:X509Certificate.size() == 1;
		assert myXML.saml2:NameID.size()    == 1;
		assert myXML.saml2:AudienceRestriction.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
		assert myXML.saml2:AssertionURIRef.size() == 1;
/*
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
		*/
	} else {
		return false;
	}
}



</script></con:config></con:testStep><con:testStep type="groovy" name="bhavins code" disabled="true" id="5b3155f2-24ac-4fc7-b9da-a6756190c70a"><con:settings/><con:config><script>def XMLbody = testCase.getPropertyValue("XMLbody");

List lines = XMLbody.readLines();
List newList;
//String XMLassertion = "";
StringBuffer XMLassertion = new StringBuffer();
Integer startLine;
Integer endLine;

for(i = 0; i &lt;= lines.size; i++)
{              
     line = lines[i];
          try {
                                if(line.trim()[0..16] == "&lt;saml2:Assertion ")
                                {
                                                startLine = i;
                                                //log.info startLine;
                                }
                                else if(line.trim()[0..17] == "&lt;/saml2:Assertion>")
                                {
                                                endLine = i;
                                                //log.info endLine;
                                }              
          }
          catch(Throwable e){
                                //Do Something
          }              
}
for(j = startLine; j &lt;= endLine; j++){
	XMLassertion.append(lines[j]);
}

this.log.info XMLassertion;

testCase.setPropertyValue("XMLassertion",XMLassertion.toString());</script></con:config></con:testStep><con:testStep type="groovy" name="Extract out &lt;Assertion> XML block" disabled="true" id="1a47842f-719e-42b3-a347-6059169b6935"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def XMLbody = testCase.getPropertyValue("XMLbody").toString();

int startAssert = XMLbody.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbody.indexOf("&lt;/saml2:Assertion>");

testCase.setPropertyValue("XMLassertion",XMLbody.substring(startAssert, endAssert + 18).toString().trim());


this.log.info testCase.getPropertyValue("XMLassertion");</script></con:config></con:testStep><con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>" id="c7a03fdd-31e7-4f76-ba78-862a2e255f8e"><con:settings/><con:config><script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
import java.lang.*;

//import groovy.sql.Sql;
//import org.apache.commons.codec.binary.Base64;

//com.eviware.soapui.support.ClasspathHacker.addFile( new File("opensaml-2.3.1.jar") );

//import org.opensaml.*;
import org.opensaml.xml.util.Base64;

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

int compressedLength = 0;
//String XMLbody = testCase.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = testCase.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");

String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
testCase.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);
    
//ByteArrayOutputStream byteOutputStream    = new ByteArrayOutputStream();
//DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(byteOutputStream);

//deflaterOutputStream.write(xmlBytes, 0, xmlBytes.length);
//deflaterOutputStream.close();

/*
// next, base64 encode it
Base64 base64Encoder = new Base64();

byte[] base64EncodedByteArray = base64Encoder.encode(byteOutputStream.toByteArray());
String base64EncodedMessage = new String(base64EncodedByteArray);
*/

//BaseID base64Encoder1 = new BaseID();

byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);

// finally, URL encode it
//String urlEncodedMessage = URLEncoder.encode(base64EncodedMessage, "UTF-8");
testCase.setPropertyValue("assert", base64encodeStr);

testProject.setPropertyValue("SAML", "SAML2 Assertion="+base64encodeStr);


//DatatypeHelper DTH = new DatatypeHelper();

</script></con:config></con:testStep><con:testStep type="groovy" name="Return the assertion to the Calling Test Case" id="89225c27-cb49-4c50-bb5b-6686bfd4c989"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assert",testCase.getPropertyValue("assert"));
callTC.setPropertyValue("assertXML",testCase.getPropertyValue("assertXML"));
callTC.setPropertyValue("assertId",testCase.getPropertyValue("assertId"));</script></con:config></con:testStep><con:properties><con:property><con:name>assert</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionUUID</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertRaw</con:name><con:value>http://c.decellc.com/Pdb0CZGBUrsvWFkIuYgs3qsXOaI=NILp5IJSyPaupxlJH92/ICZ5XkLovBzBB73wfUAIErYCKQEg5pr69oEAm3JpY5vh6OAzp0c3eEAj pligdNHt+af7dbgRIKbCXYjZ6g/jnGhmtEMIur9d/kRcSdiJzYxxsLIq4xVdOiQEQcAkD1DQ/ArW GbulJlyxMr0N9E9UszU=MIIDuzCCAySgAwIBAgIBAjANBgkqhkiG9w0BAQQFADCBljELMAkGA1UEBhMCVVMxCzAJBgNVBAgT AlZBMREwDwYDVQQHEwhTdGVybGluZzENMAsGA1UEChMEREVDRTEMMAoGA1UECxMDbGxjMSMwIQYD VQQDExpzdG9teGxic2I5MS52YS5uZXVzdGFyLmNvbTElMCMGCSqGSIb3DQEJARYWc2FudG9zLmpo YUBuZXVzdGFyLmJpejAeFw0xMDAzMTkwMTU2NDRaFw0xMTAzMTkwMTU2NDRaMIGJMQswCQYDVQQG EwJVUzELMAkGA1UECBMCdmExETAPBgNVBAcTCFN0ZXJsaW5nMRAwDgYDVQQKEwdOZXVzdGFyMQ0w CwYDVQQLEwRERUNFMRIwEAYDVQQDEwlsb2NhbGhvc3QxJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5q aGFAbmV1c3Rhci5iaXowgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALBV5Opi92ieLfFomehr M1oKkvzx08i3OgPNW5Dfk7PGiP3adh/Ilc2j3kAIIedK1hQadRY/RDniz6OKUXeirYztN5Q16i85 RWuUXDol7dHXYUK+xYcQTOPSUWPzxxNqj8zltHOBHrSJMDgONeePsc+/0aFBT8D5CYHjHEwfR0e5 AgMBAAGjggEiMIIBHjAJBgNVHRMEAjAAMCwGCWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRl ZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4EFgQU5+JXeZQNlTVtAwpVfn110GpQHfMwgcMGA1UdIwSBuzCB uIAUaOpJ0xKV601qQdlJS9AU3xS2kxOhgZykgZkwgZYxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJW QTERMA8GA1UEBxMIU3RlcmxpbmcxDTALBgNVBAoTBERFQ0UxDDAKBgNVBAsTA2xsYzEjMCEGA1UE AxMac3RvbXhsYnNiOTEudmEubmV1c3Rhci5jb20xJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5qaGFA bmV1c3Rhci5iaXqCAQAwDQYJKoZIhvcNAQEEBQADgYEAfq+I8D1s56CpsWwgBGEqQ7VLJ9p0QXLk B+F/gtil4On8wTK+W1yw7hjQWW9IDhC+nfYh3btB0azcQeJk7GiRkDn64lyMLMQ5Ui/ly0jeqwsL NI1nE3tzF/9ru+BmZimzz342UmPSuvIUaKs1yhbqW9wjPH6//rGy5z7ZvQFXocY=94B6AE0F85AFC20DE0401F0A222259081Furn:dece:org:org:dece:80080010https://qa.q.uvvu.com:7002/dece/SecurityToken/Assertion/eed91199-941b-4565-b26d-e9063f83fd50urn:oasis:names:tc:SAML:2.0:ac:classes:Passwordurn:dece:org:neustar:coordinator94B6AE0F85ADC20DE0401F0A222259081F</con:value></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>connection</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLength</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentLocation</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>contentType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>dlpnodeid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>llpnodeid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>loopuntil</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nickname</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeaccountid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodetype</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeuserid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>rightstokenid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>sName</con:name><con:value>TestSuite Utility Test Cases</con:value></con:property><con:property><con:name>status</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>streamhandle</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>synced</con:name><con:value>true</con:value></con:property><con:property><con:name>tName</con:name><con:value>Generic STS GET</con:value></con:property><con:property><con:name>XMLassertion</con:name><con:value><![CDATA[<saml2:Assertion ID="92d22367-197d-4773-9057-74c89ccfda3c" IssueInstant="2010-11-15T19:46:20.197Z" Version="2.0" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">        <saml2:Issuer>http://c.decellc.com/</saml2:Issuer>        <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">           <ds:SignedInfo>              <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>              <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>              <ds:Reference URI="#92d22367-197d-4773-9057-74c89ccfda3c">                 <ds:Transforms>                    <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">                       <ec:InclusiveNamespaces PrefixList="ds saml2 xs" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/>                    </ds:Transform>                 </ds:Transforms>                 <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>                 <ds:DigestValue>NtffQXv952YAnSnOQOJsjwSVhiQ=</ds:DigestValue>              </ds:Reference>           </ds:SignedInfo>           <ds:SignatureValue>L4l13e+/2KysklswaFIS5jY23RXvukUwbkoRxnf7VV6wThY1WiwZ+D5vEDVwQXXN4dDvYfEKHzfX 7HAq7IzxtAq4MuaWPysx0W7MGQ/uyRnRxb6bRQksqLjOwKsDA9H+cRG3hlgYkIfIz1AsjbZz6rOn Spq5Md0E/NIGNK+N3MI=</ds:SignatureValue>           <ds:KeyInfo>              <ds:X509Data>                 <ds:X509Certificate>MIIDuzCCAySgAwIBAgIBAjANBgkqhkiG9w0BAQQFADCBljELMAkGA1UEBhMCVVMxCzAJBgNVBAgT AlZBMREwDwYDVQQHEwhTdGVybGluZzENMAsGA1UEChMEREVDRTEMMAoGA1UECxMDbGxjMSMwIQYD VQQDExpzdG9teGxic2I5MS52YS5uZXVzdGFyLmNvbTElMCMGCSqGSIb3DQEJARYWc2FudG9zLmpo YUBuZXVzdGFyLmJpejAeFw0xMDAzMTkwMTU2NDRaFw0xMTAzMTkwMTU2NDRaMIGJMQswCQYDVQQG EwJVUzELMAkGA1UECBMCdmExETAPBgNVBAcTCFN0ZXJsaW5nMRAwDgYDVQQKEwdOZXVzdGFyMQ0w CwYDVQQLEwRERUNFMRIwEAYDVQQDEwlsb2NhbGhvc3QxJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5q aGFAbmV1c3Rhci5iaXowgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALBV5Opi92ieLfFomehr M1oKkvzx08i3OgPNW5Dfk7PGiP3adh/Ilc2j3kAIIedK1hQadRY/RDniz6OKUXeirYztN5Q16i85 RWuUXDol7dHXYUK+xYcQTOPSUWPzxxNqj8zltHOBHrSJMDgONeePsc+/0aFBT8D5CYHjHEwfR0e5 AgMBAAGjggEiMIIBHjAJBgNVHRMEAjAAMCwGCWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRl ZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4EFgQU5+JXeZQNlTVtAwpVfn110GpQHfMwgcMGA1UdIwSBuzCB uIAUaOpJ0xKV601qQdlJS9AU3xS2kxOhgZykgZkwgZYxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJW QTERMA8GA1UEBxMIU3RlcmxpbmcxDTALBgNVBAoTBERFQ0UxDDAKBgNVBAsTA2xsYzEjMCEGA1UE AxMac3RvbXhsYnNiOTEudmEubmV1c3Rhci5jb20xJTAjBgkqhkiG9w0BCQEWFnNhbnRvcy5qaGFA bmV1c3Rhci5iaXqCAQAwDQYJKoZIhvcNAQEEBQADgYEAfq+I8D1s56CpsWwgBGEqQ7VLJ9p0QXLk B+F/gtil4On8wTK+W1yw7hjQWW9IDhC+nfYh3btB0azcQeJk7GiRkDn64lyMLMQ5Ui/ly0jeqwsL NI1nE3tzF/9ru+BmZimzz342UmPSuvIUaKs1yhbqW9wjPH6//rGy5z7ZvQFXocY=</ds:X509Certificate>              </ds:X509Data>           </ds:KeyInfo>        </ds:Signature>        <saml2:Subject>           <saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">94B6AE0F85AFC20DE0401F0A222259081F</saml2:NameID>           <saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">              <saml2:SubjectConfirmationData InResponseTo="C1BC299971F8420086E881CD885E93FF" NotOnOrAfter="2010-11-16T19:46:20.197Z" Recipient="http://stdecqavutl1.va.neustar.com:2485/saml/dumpcustomerpost.php"/>           </saml2:SubjectConfirmation>        </saml2:Subject>        <saml2:Conditions NotBefore="2010-11-15T19:46:10.197Z" NotOnOrAfter="2011-11-15T19:46:20.197Z">           <saml2:AudienceRestriction>              <saml2:Audience>urn:dece:org:org:dece:80080010</saml2:Audience>           </saml2:AudienceRestriction>        </saml2:Conditions>        <saml2:Advice>           <saml2:AssertionURIRef>https://qa.q.uvvu.com:7002/dece/SecurityToken/Assertion/92d22367-197d-4773-9057-74c89ccfda3c</saml2:AssertionURIRef>        </saml2:Advice>        <saml2:AuthnStatement AuthnInstant="2010-11-15T19:46:20.197Z">           <saml2:AuthnContext>              <saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef>              <saml2:AuthenticatingAuthority>urn:dece:org:neustar:coordinator</saml2:AuthenticatingAuthority>           </saml2:AuthnContext>        </saml2:AuthnStatement>        <saml2:AttributeStatement>           <saml2:Attribute Name="accountID" NameFormat="urn:dece:type:accountID">              <saml2:AttributeValue xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">94B6AE0F85ADC20DE0401F0A222259081F</saml2:AttributeValue>           </saml2:Attribute>        </saml2:AttributeStatement>     </saml2:Assertion>]]></con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Core Identity Information Extraction" searchProperties="true" disabled="true" id="13b58e45-e1f0-48a4-a15c-cc5f8e66277c"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties" id="e41dbca7-c925-4443-82de-e25017039850"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("username",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("useroid",null);
testCase.setPropertyValue("accountoid",null);
testCase.setPropertyValue("nodeaccountid",null);
testCase.setPropertyValue("nodeuserid",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Extract Calling Test Case Properities" id="5d6a3d16-4367-4bee-899c-84b9590a5724"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));


</script></con:config></con:testStep><con:testStep type="jdbc" name="Extract ACCOUNT/ACCOUNT_USER Information" id="983c212e-ef98-436a-901c-31d94f20c298"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${#Project#JDBCDriver}</con:driver><con:connectionString>${#Project#JDBCConnStr}</con:connectionString><con:password/><con:query>select a.ACCOUNT_OID, a.USER_OID, b.NODE_USER_ID, c.NODE_ACCOUNT_ID
from 
   ACCOUNT_USER a, NODE_USER b, NODE_ACCOUNT c
where 
   a.USERNAME = :uname
   AND
   a.USER_OID = b.USER_OID
   AND
   a.ACCOUNT_OID = c.ACCOUNT_OID
   AND
   b.NODE_OID = c.NODE_OID 
   AND 
   b.NODE_OID = :nodeid
   
   


</con:query><con:assertion type="XPath Match"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/@rowNumber</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:properties><con:property><con:name>uname</con:name><con:value>${#TestCase#username}</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>${#TestCase#nodeid}</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="54f7b766-181c-46e6-b375-453d125f55a2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" ignoreEmpty="false" entitize="false" transferToAll="false"><con:name>accountoid</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/ACCOUNT_OID[1]</con:sourcePath><con:targetType>accountoid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" useXQuery="false" transferToAll="false" entitize="false" ignoreEmpty="false"><con:name>useroid</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/USER_OID[1]</con:sourcePath><con:targetType>useroid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferChildNodes="false" entitize="false" transferToAll="false"><con:name>nodeaccountid</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/NODE_ACCOUNT_ID[1]</con:sourcePath><con:targetType>nodeaccountid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" entitize="false" transferToAll="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>nodeuserid</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract ACCOUNT/ACCOUNT_USER Information</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/NODE_USER_ID[1]</con:sourcePath><con:targetType>nodeuserid</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Promote variables to calling TestCase" id="61897658-9435-4d8a-96f0-08d016c74a2d"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def toTCName = testCase.getPropertyValue("tName");
def toTSName = testCase.getPropertyValue("sName")

//
//  Transfer all the properites created in this test case
//  to the calling testcase.
//
if (toTCName != "" &amp;&amp; toTSName != "") {
	def toTC = testRunner.testCase.testSuite.project.getTestSuiteByName(toTSName).getTestCaseByName(toTCName);

	Map testCasePropertiesMap = testCase.getProperties();
	Set testCasePropertiesKeySet = testCasePropertiesMap.keySet();
	Iterator iter = testCasePropertiesKeySet.iterator();
	while(iter.hasNext()){
		String testCasePropertyKey = (String)iter.next();

		switch (testCasePropertyKey) {
			case "synced":
			case "nodeid":
			case "username":
			case "tName":
			case "sName":
			break;
			default:
				toTC.setPropertyValue(testCasePropertyKey,testCase.getPropertyValue(testCasePropertyKey));	
			break;
		}
	}
}</script></con:config></con:testStep><con:properties><con:property><con:name>tName</con:name><con:value>TC_DECE_01000 - STS</con:value></con:property><con:property><con:name>sName</con:name><con:value>E2E_TestCases</con:value></con:property><con:property><con:name>uname</con:name><con:value>shikha_user_create_accp_test_20110610_11508</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>useroid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>accountoid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeaccountid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>nodeuserid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20130911_075340</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS API" searchProperties="true" id="7adc68d2-e9b5-434f-b44e-24da8eab74ca">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="0342b55f-009b-4af1-9145-3509f0b62e61">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("SAMLassertion",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("tokentype",null);
testCase.setPropertyValue("expectErrTypeSTS",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="89cc7817-e56f-4465-bdc3-661163fdc02e">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("password",callTC.getPropertyValue("password"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("expectErrType",callTC.getPropertyValue("expectErrType"));

testCase.setPropertyValue("audienceList",testProject.getPropertyValue('audienceList'));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="1be78116-58cf-4623-9656-709f40eaa74d">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("STS - POST");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="URL_Builder_with_AudienceList" id="f0b963ca-2006-4dfe-8ca6-7d07fabf6d7b"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def urlParam;

log.info "URN Should be Encoded:"+testProject.getPropertyValue("encodeURN").toUpperCase()
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	urlParam = URLEncoder.encode(testCase.getPropertyValue("tokentype"),"UTF-8")+"&amp;audience="+(testCase.getPropertyValue("audienceList").replaceAll(":","%3A"));
//def urlParam = URLEncoder.encode(testCase.getPropertyValue("tokentype"),"UTF-8")+"&amp;audience="+(testCase.getPropertyValue("audienceList");
else
	urlParam = testCase.getPropertyValue("tokentype")+"&amp;audience="+testCase.getPropertyValue("audienceList");

log.info "urlParam=="+urlParam;
testCase.setPropertyValue("tokentype",urlParam);</script></con:config></con:testStep><con:testStep type="restrequest" name="STS - POST" id="ed1d1bec-8069-4926-8fc5-cbe31dd80e24"><con:settings/><con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange?" methodName="STS - POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="STS - POST" mediaType="application/xml" postQueryString="false" id="cfaadafb-1927-4563-8394-72a5a1127f24" accept="" sslKeystore="RET_concat.pem">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
          <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
          <con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request>
          <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:restRequest></con:config></con:testStep>
      <con:testStep type="restrequest" name="STS - POST1" disabled="true" id="1ca58211-2fa5-4ca6-93c8-b7b6c9f8ae12">
        <con:settings/>
        <con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="STS - POST1" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting>
              <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="tokentype" value="${#TestCase#tokentype}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="e256c329-68a0-4e0a-9846-c2f9efc26636">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def tStep  = testCase.getTestStepByName('STS - POST');

/*
*  Get the HTTP headers
*/
def status = tStep.httpRequest.response.responseHeaders["#status#"]; 
def connection = tStep.httpRequest.response.responseHeaders["Connection"];
def contentType = tStep.httpRequest.response.responseHeaders["Content-Type"];
def contentLength = tStep.httpRequest.response.responseHeaders["Content-Length"];
def contentLocation = tStep.httpRequest.response.responseHeaders["Location"];

log.info status[0];
//log.info connection[0];
log.info contentType[0];
log.info contentLength[0];
log.info contentLocation[0];

testCase.setPropertyValue("status",status[0]);
//testCase.setPropertyValue("connection", connection[0]);
testCase.setPropertyValue("contentType", contentType[0]);
testCase.setPropertyValue("contentLength", contentLength[0]);
testCase.setPropertyValue("contentLocation", contentLocation[0]);

//this.log.info "contentLength [$contentLength]";

if (contentLength[0].toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
    def rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);
      log.info strVal[0];

    int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");

    	//XMLbody =  strVal.tokenize('\n').last();

	String XMLbody  = strVal.substring(startAssert+1, strVal.size());
     
	testCase.setPropertyValue("XMLbody", XMLbody);
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers and save assertion" id="9f9fc2a9-dfaf-4eba-9677-26b4f2176eac">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url           = testProject.getPropertyValue("targetURL");
//def urnacct       = testProject.getPropertyValue("urnaccount");
//def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrType");
log.info(expectErrType);
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = true;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "text/plain; charset=UTF-8";
		contentLengthZero = true;
		doContentLocaton  = true;
		dobodyXML = false;
	break;
	case "FORBIDDEN":
	default:
		errorReason = "Forbidden";
		errorID = "Forbidden";
		errorLink = "";
		orgRequest = "";
		doContentLocaton  = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}


//Content-Length
if (contentLengthZero) {
	////assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	//////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[_,0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} else {
		return false;
	}
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return the assertion to the Calling Test Case" id="3051e9ba-d716-4bd7-bfac-9c1def711b99">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",testCase.getPropertyValue("assertionUUID"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="f5235d28-65e9-44c1-b832-622acd03ed1b">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_01000 - STS</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>E2E_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_f56a89de-d53d-4373-b9e5-45710f9fb0dc</con:value>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET</con:value>
        </con:property>
        <con:property>
          <con:name>tokentype</con:name>
          <con:value>urn:dece:type:tokentype:usernamepassword&amp;audience=</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrType</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>RLDGbyList_firstuser20150507_1431004119648</con:value>
        </con:property>
        <con:property>
          <con:name>password</con:name>
          <con:value>Password1</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value>HTTP/1.1 201 Created</con:value>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value>text/plain; charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value>20</con:value>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa1.q.uvvu.com:443/rest/2015/02/SecurityToken/Assertion/_f56a89de-d53d-4373-b9e5-45710f9fb0dc</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLassertion</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value>HTTP/1.1 201 Created
Date: Thu, 07 May 2015 13:06:03 GMT
x-Transaction-Info: t=1431003964 VUtjOgofmIgAAHbzJWAAAAAD urn:dece:org:org:dece:RET 10.31.153.241
Cache-Control: no-cache, no-store
Location: https://qa1.q.uvvu.com:443/rest/2015/02/SecurityToken/Assertion/_f56a89de-d53d-4373-b9e5-45710f9fb0dc
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 20
Connection: close
Content-Type: text/plain; charset=UTF-8

</con:value>
        </con:property>
      <con:property><con:name>expectErrTypeSTS</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>audienceList</con:name><con:value/></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Generic STS GET" searchProperties="true" id="dff0baf7-e8ba-47df-b261-75320c75be64">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="b322a769-44f7-4c2d-9b3e-8b3561af08f1">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertId",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("expectErrTypeSTSGet",null);</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="1a678541-a216-41bb-9774-f9e91ce00e37">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("expectErrTypeSTSGet",callTC.getPropertyValue("expectErrTypeSTSGet"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="6a6c0f76-3b29-49d8-b5eb-be3fab5560c4">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("STS - GET");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay 3" disabled="true" id="f7a80f8b-b7eb-46a0-9f4e-48c48b78c600">
        <con:settings/>
        <con:config>
          <delay>1000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="STS - GET" id="122c7ce9-f8d9-48fd-be4d-633f66ac5256">
        <con:settings/>
        <con:config service="STS" methodName="STS- GET" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{ASSERTION}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="STS - GET" mediaType="application/xml" sslKeystore="RET_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Query_HostName}</con:endpoint>
            <con:request/>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="ASSERTION" value="${#TestCase#assertionUUID}"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="133dfc5e-ea36-44c7-9917-c08ecf868b3f">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def tStep  = testCase.getTestStepByName('STS - GET');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
//String major = testProject.getPropertyValue("versionMajor");
//String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();
rawResp = new ByteArrayOutputStream();
rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
String XMLbody  = strVal.substring(startAssert, strVal.length());

testCase.setPropertyValue("XMLbody", XMLbody);
testCase.setPropertyValue("status", status);
testCase.setPropertyValue("connection", connection);
testCase.setPropertyValue("contentType", contentType);
testCase.setPropertyValue("contentLength", contentLength);
testCase.setPropertyValue("contentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="07c10376-2b8b-4c16-b46a-bf461f16b009">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers" id="259d827e-8983-4477-8ce1-14d26cac5608">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url           = testProject.getPropertyValue("targetURL");
//def urnacct       = testProject.getPropertyValue("urnaccount");
//def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String major = testProject.getPropertyValue("versionMajor");
//String minor = testProject.getPropertyValue("versionMinor");
//String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

if (expectErrType == "" || expectErrType == null) {
	expectErrType = "SUCCESS";
	testCase.setPropertyValue("expectErrTypeSTSGet",expectErrType);
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = true;
		dobodyXML = true;
		errorID = "Forbidden";
		errorReason = "Forbidden";
	break;
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}

//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[_,0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

this.log.info "expectErrType [$expectErrType]";

if (dobodyXML) {
	if (XMLbody.length() > 0) {
			def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion", ds: "http://www.w3.org/2000/09/xmldsig#", ec: "http://www.w3.org/2001/10/xml-exc-c14n#", xs: "http://www.w3.org/2001/XMLSchema");

			if (expectErrType == "SUCCESS") {
				// Verify response sizes...
				this.log.info "Assertion size: " + myXML.size();

				/*
				assert myXML."saml2:Assertion".size() == 1;
				assert myXML."saml2:Assertion"."ds:Signature".size()    == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo".size()   == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo"."ds:Reference"."ds:DigestValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignatureValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:KeyInfo"."ds:X509Data"."ds:X509Certificate".size() == 1;
				assert myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID".size() == 1;
				*/
				def samlRespNodeAccount = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
				log.info "samlRespNodeAccount[$samlRespNodeAccount]";
				
				//def samlRespNodeAccount = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
			
			} else {
				// ErrorCode
				this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
				assert myXML.Error.@ErrorID.toString() == errorID;
	
				// ErrorReason
				this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
				assert myXML.Error.Reason.toString() == errorReason;

				// ErrorLink
				this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
				assert myXML.Error.ErrorLink.toString() == errorLink;
			}
		} else {
			return false;
		}
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract NodeUserID and NodeAccountId" id="e0e499a5-e14c-4a1c-a5fc-0cebb412fafd">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def XMLbody       = testCase.getPropertyValue("XMLbody");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion");

			// Verify response sizes...
			assert myXML.size() == 1;

			/*
			String accountId = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID";
			*/
			String accountId = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Subject"."saml2:NameID";
			
			this.log.info "accountId [$accountId]";
			this.log.info "userId [$userId]";

			testCase.setPropertyValue("assertionAccountId",accountId.substring(accountId.lastIndexOf(":")+1, accountId.length()));
			testCase.setPropertyValue("assertionUserId",   userId.substring(userId.lastIndexOf(":")+1,userId.length()));
			testCase.setPropertyValue("assertionAccountIdFULL",accountId);
			testCase.setPropertyValue("assertionUserIdFULL",userId);

			this.log.info "assertionAccountId property is " + testCase.getPropertyValue("assertionAccountId");
			this.log.info "assertionUserId property is " + testCase.getPropertyValue("assertionUserId");
	} else {
		return false;
	}
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>" id="a51619bc-ab4c-4eed-8d20-938392210b5c">
        <con:settings/>
        <con:config>
          <script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
//import org.apache.commons.codec.binary.Base64;
import org.opensaml.xml.util.Base64;

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	
int compressedLength = 0;
//String XMLbody = testCase.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = testCase.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");

String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
testCase.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);
    
//ByteArrayOutputStream byteOutputStream    = new ByteArrayOutputStream();
//DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(byteOutputStream);

//deflaterOutputStream.write(xmlBytes, 0, xmlBytes.length);
//deflaterOutputStream.close();

/*
// next, base64 encode it
Base64 base64Encoder = new Base64();

byte[] base64EncodedByteArray = base64Encoder.encode(byteOutputStream.toByteArray());
String base64EncodedMessage = new String(base64EncodedByteArray);
*/
byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);

// finally, URL encode it
//String urlEncodedMessage = URLEncoder.encode(base64EncodedMessage, "UTF-8");
testCase.setPropertyValue("assert", base64encodeStr);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return extracted Properties back to calling Test Case" id="4d3ba0bd-9b73-4903-967e-150d9386ee4a">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertXML",testCase.getPropertyValue("assertXML"));
callTC.setPropertyValue("assert",testCase.getPropertyValue("assert"));
callTC.setPropertyValue("assertId",testCase.getPropertyValue("assertId"));
callTC.setPropertyValue("assertionAccountId",testCase.getPropertyValue("assertionAccountId"));
callTC.setPropertyValue("assertionUserId",testCase.getPropertyValue("assertionUserId"));
callTC.setPropertyValue("assertionAccountIdFULL",testCase.getPropertyValue("assertionAccountIdFULL"));
callTC.setPropertyValue("assertionUserIdFULL",testCase.getPropertyValue("assertionUserIdFULL"));</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==</con:value>
        </con:property>
        <con:property>
          <con:name>assertAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_f56a89de-d53d-4373-b9e5-45710f9fb0dc</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">157E6F9FC6F54D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">157E6F9FC7014D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value>_f56a89de-d53d-4373-b9e5-45710f9fb0dc</con:value>
        </con:property>
        <con:property>
          <con:name>assertPackaged</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertRaw</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">text/xml; charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTSGet</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>RET</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>E2E_TestCases</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 200 OK</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_01000 - STS</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" ID="_f56a89de-d53d-4373-b9e5-45710f9fb0dc" IssueInstant="2015-05-07T13:06:03.311Z" Version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"><saml2:Issuer>http://c.decellc.com/</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference URI="#_f56a89de-d53d-4373-b9e5-45710f9fb0dc"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"><ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="xs"/></ds:Transform></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>QBB8RVHWt0BhYmrpe89/zFZCV1o=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>AxNkTLKhP7pW75z7e7z00DsK3nQK1DK5F+LlM36K5gcwBsjVFro5T07Q7w1SKdebIEgLNSl1SWCRchem3DTMmGfn6PWEmqkBHeT0hqk3SaPwhbPRxleTRaKBy6c7ZAA1pOWbEiXkFEE559XW+Kg2G/CQpsQWVqqNxv1WOzpWz/g=</ds:SignatureValue></ds:Signature><saml2:Subject><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:sender-vouches"><saml2:SubjectConfirmationData InResponseTo="_1tq9l2fah1t121scvggyhpvuac" NotOnOrAfter="2015-05-07T16:06:03.311Z" Recipient="https://stdecqavutl1.va.neustar.com:2485/simplesaml/module.php/saml/sp/saml2-acs.php/RET"/></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions NotBefore="2015-05-07T13:05:53.311Z" NotOnOrAfter="2015-05-07T19:06:03.311Z"><saml2:AudienceRestriction><saml2:Audience>urn:dece:org:org:dece:RET</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions><saml2:Advice><saml2:AssertionURIRef>https://qa1.q.uvvu.com:443/rest/2015/02/SecurityToken/Assertion/_f56a89de-d53d-4373-b9e5-45710f9fb0dc</saml2:AssertionURIRef></saml2:Advice><saml2:AuthnStatement AuthnInstant="2015-05-07T13:06:03.311Z" SessionIndex="_f56a89de-d53d-4373-b9e5-45710f9fb0dc"><saml2:AuthnContext><saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef><saml2:AuthenticatingAuthority>urn:dece:org:org:dece:coordinator</saml2:AuthenticatingAuthority></saml2:AuthnContext></saml2:AuthnStatement><saml2:AttributeStatement><saml2:Attribute Name="accountID" NameFormat="urn:dece:type:accountID"><saml2:AttributeValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</saml2:AttributeValue></saml2:Attribute></saml2:AttributeStatement></saml2:Assertion>]]></con:value>
        </con:property>
      <con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="STS API DHost" searchProperties="true" id="5405295e-9efa-4ebc-936c-6d4c6bb6c27a">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="9a238da1-69cd-46c5-bfd2-00b34b04471e">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("SAMLassertion",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("tokentype",null);
testCase.setPropertyValue("expectErrTypeSTS",null);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="ce9af948-56c6-4583-bbb7-2d2ff6e716c9">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("password",callTC.getPropertyValue("password"));
testCase.setPropertyValue("tokentype","urn:dece:type:tokentype:usernamepassword");
testCase.setPropertyValue("expectErrType",callTC.getPropertyValue("expectErrType"));

testCase.setPropertyValue("audienceList",testProject.getPropertyValue('audienceList'));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="pem set" id="918faf23-6a15-4171-aee5-7b87e7dad3be">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("STS - POST");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="URL_Builder_with_AudienceList" id="97b3627b-4280-4af3-91d0-8a7928ca5f89"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

log.info "URN Should be Encoded:"+testProject.getPropertyValue("encodeURN").toUpperCase()
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	urlParam = URLEncoder.encode(testCase.getPropertyValue("tokentype"),"UTF-8")+"&amp;audience="+(testCase.getPropertyValue("audienceList").replaceAll(":","%3A"));
//def urlParam = URLEncoder.encode(testCase.getPropertyValue("tokentype"),"UTF-8")+"&amp;audience="+(testCase.getPropertyValue("audienceList");
else
	urlParam = testCase.getPropertyValue("tokentype")+"&amp;audience="+testCase.getPropertyValue("audienceList");

log.info "urlParam=="+urlParam;
testCase.setPropertyValue("tokentype",urlParam);</script></con:config></con:testStep><con:testStep type="restrequest" name="STS - POST" id="49eb1035-53f1-4fa8-9b6c-33df47e4e95c"><con:settings/><con:config service="STS" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/SecurityTokenExchange?" methodName="STS - POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="STS - POST" mediaType="application/xml" postQueryString="false" id="cfaadafb-1927-4563-8394-72a5a1127f24" accept="" sslKeystore="DEV_concat.pem">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="x-dece-ApplicationAuthorization" value="dclient-basic w0rnh4lz4bfuaxasn7qu:A3D90BF121838C67444D58AC6D6554A6" xmlns="http://eviware.com/soapui/config"/></con:setting>
          <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings>
          <con:endpoint>${#Project#Device_HostName}</con:endpoint>
          <con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request>
          <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:restRequest></con:config></con:testStep>
      <con:testStep type="restrequest" name="STS - POST1" disabled="true" id="5950dbe2-0593-4fcd-abb1-15223437c0c2">
        <con:settings/>
        <con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="STS - POST1" mediaType="application/xml" postQueryString="false" sslKeystore="222259_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting>
              <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting>
            </con:settings>
            <con:endpoint>${#Project#Provision_HostName}</con:endpoint>
            <con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="tokentype" value="${#TestCase#tokentype}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="6fbbf686-6161-4c5f-ac61-98e5a864a177">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def tStep  = testCase.getTestStepByName('STS - POST');

/*
*  Get the HTTP headers
*/
def status = tStep.httpRequest.response.responseHeaders["#status#"]; 
def connection = tStep.httpRequest.response.responseHeaders["Connection"];
def contentType = tStep.httpRequest.response.responseHeaders["Content-Type"];
def contentLength = tStep.httpRequest.response.responseHeaders["Content-Length"];
def contentLocation = tStep.httpRequest.response.responseHeaders["Location"];

log.info status[0];
//log.info connection[0];
log.info contentType[0];
log.info contentLength[0];
log.info contentLocation[0];

testCase.setPropertyValue("status",status[0]);
//testCase.setPropertyValue("connection", connection[0]);
testCase.setPropertyValue("contentType", contentType[0]);
testCase.setPropertyValue("contentLength", contentLength[0]);
testCase.setPropertyValue("contentLocation", contentLocation[0]);

//this.log.info "contentLength [$contentLength]";

if (contentLength[0].toInteger() > 0) {
	rawResp = new ByteArrayOutputStream();
    def rawResp = tStep.httpRequest.response.getRawResponseData();
     strVal  = new String(rawResp);
      log.info strVal[0];

    int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");

    	//XMLbody =  strVal.tokenize('\n').last();

	String XMLbody  = strVal.substring(startAssert+1, strVal.size());
     
	testCase.setPropertyValue("XMLbody", XMLbody);
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers and save assertion" id="9ce87429-ea2f-4edb-85f6-0da6e275e3d6">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url           = testProject.getPropertyValue("targetURL");
//def urnacct       = testProject.getPropertyValue("urnaccount");
//def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrType");
log.info(expectErrType);
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = true;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

if (expectErrType == "") {
	expectErrType = "SUCCESS";
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "SUCCESS":
		expectHTTPstatus = "HTTP/1.1 201 Created";
		expectHTTPcontenttype = "text/plain; charset=UTF-8";
		contentLengthZero = true;
		doContentLocaton  = true;
		dobodyXML = false;
	break;
	case "FORBIDDEN":
	default:
		errorReason = "Forbidden";
		errorID = "Forbidden";
		errorLink = "";
		orgRequest = "";
		doContentLocaton  = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}


//Content-Length
if (contentLengthZero) {
	////assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	//////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[_,0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

if (dobodyXML) {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody);

		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} else {
		return false;
	}
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return the assertion to the Calling Test Case" id="9d715210-7b37-4904-86f2-fda95c78e1a0">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertionUUID",testCase.getPropertyValue("assertionUUID"));</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="ef1b967f-17d4-4b88-b1c0-638f277f3c42">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep><con:properties>
        <con:property>
          <con:name>synced</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_01000 - STS</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>STS_Creation_Device_Nodes</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_6d6006e5-884a-453c-b125-05783805f5dc</con:value>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>DEV</con:value>
        </con:property>
        <con:property>
          <con:name>tokentype</con:name>
          <con:value>urn:dece:type:tokentype:usernamepassword&amp;audience=urn:dece:org:org:dece:DEV_CS_1</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrType</con:name>
          <con:value>SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>username</con:name>
          <con:value>Rights_TokenUpdate_User_20140909_1012501410271970803</con:value>
        </con:property>
        <con:property>
          <con:name>password</con:name>
          <con:value>Password1</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value>HTTP/1.1 201 Created</con:value>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value>text/plain; charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value>20</con:value>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa.d.uvvu.com:7001/rest/2015/02/SecurityToken/Assertion/_6d6006e5-884a-453c-b125-05783805f5dc</con:value>
        </con:property>
        <con:property>
          <con:name>SAMLassertion</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value>HTTP/1.1 201 Created
Date: Tue, 09 Sep 2014 14:13:20 GMT
Server: Apache
x-Transaction-Info: t=1410272000 VA8LAAofmIgAAAYsLU8AAAAY urn:dece:org:org:dece:device 10.31.153.241
Cache-Control: no-cache, no-store
Location: https://qa.d.uvvu.com:7001/rest/2015/02/SecurityToken/Assertion/_6d6006e5-884a-453c-b125-05783805f5dc
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 20
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/plain; charset=UTF-8

</con:value>
        </con:property>
      <con:property><con:name>expectErrTypeSTS</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>audienceList</con:name><con:value>urn:dece:org:org:dece:DEV_CS_1</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/DEV_concat.pem</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Generic STS GET DHost" searchProperties="true" id="1dd6c8ed-50d6-4a39-8602-9f72968d36aa">
      <con:settings/>
      <con:testStep type="groovy" name="Establish Test Case Properties" id="9a21c446-879c-4851-8a3c-23136e67032c">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("assertionUUID",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertId",null);
testCase.setPropertyValue("assertionAccountId",null);
testCase.setPropertyValue("assertionUserId",null);
testCase.setPropertyValue("assertionAccountIdFULL",null);
testCase.setPropertyValue("assertionUserIdFULL",null);
testCase.setPropertyValue("nodeid",null);
testCase.setPropertyValue("expectErrTypeSTSGet",null);</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Required Properties from Calling Test Case" id="c6fb7332-e634-448c-8a15-413bba67b024">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

testCase.setPropertyValue("assertionUUID",callTC.getPropertyValue("assertionUUID"));
testCase.setPropertyValue("nodeid",callTC.getPropertyValue("nodeid"));
testCase.setPropertyValue("expectErrTypeSTSGet",callTC.getPropertyValue("expectErrTypeSTSGet"));

testCase.setPropertyValue("username",callTC.getPropertyValue("username"));
testCase.setPropertyValue("password",callTC.getPropertyValue("password"));</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="SetAuthHeader" id="3e3f5082-3886-441c-9eec-c65a106f35de"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


String combo = testCase.getPropertyValue("username").toString() + ":" + testCase.getPropertyValue("password").toString();
String authHeaderValue = "Basic " + combo.bytes.encodeBase64().toString();
testCase.setPropertyValue("BasicAuthHeader",authHeaderValue);</script></con:config></con:testStep>
      <con:testStep type="groovy" name="pem set" id="faa158ce-c0ad-4094-be7c-799081e9b173">
        <con:settings/>
        <con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject(); 

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("STS - GET");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
</script></con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay 3" disabled="true" id="ad7bf4e0-cb70-4447-aa50-28dbba9eaa32">
        <con:settings/>
        <con:config>
          <delay>1000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="STS - GET" id="de0f8088-57ed-4cdb-a9d3-e3ee64b39c90">
        <con:settings/>
        <con:config service="STS" methodName="STS- GET" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/SecurityToken/Assertion/{ASSERTION}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="STS - GET" mediaType="application/xml" sslKeystore="DEV_concat.pem" accept="">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Authorization" value="${#TestCase#BasicAuthHeader}"/>
  &lt;con:entry key="x-dece-ApplicationAuthorization" value="dclient-basic w0rnh4lz4bfuaxasn7qu:A3D90BF121838C67444D58AC6D6554A6"/>
&lt;/xml-fragment></con:setting>
              <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Device_HostName}</con:endpoint>
            <con:request/>
            <con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <con:entry key="ASSERTION" value="${#TestCase#assertionUUID}"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract Response Body and Headers" id="66ccece5-445a-487b-8a07-8850be02d685">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");
def tStep  = testCase.getTestStepByName('STS - GET');

/*
*  Get the HTTP headers
*/
String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;
//String major = testProject.getPropertyValue("versionMajor");
//String minor = testProject.getPropertyValue("versionMinor");

tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

//def expXML = tStep.httpRequest.response.getResponseContent();
this.log.info tStep.httpRequest.response.getRawResponseData();
//new b = tStep.httpRequest.response.getResponseContent();
rawResp = new ByteArrayOutputStream();
rawResp = tStep.httpRequest.response.getRawResponseData();
strVal  = new String(rawResp);
log.info strVal;

int startAssert = strVal.indexOf("&lt;?xml version=\"1.0\" ");
String XMLbody  = strVal.substring(startAssert, strVal.length());

testCase.setPropertyValue("XMLbody", XMLbody);
testCase.setPropertyValue("status", status);
testCase.setPropertyValue("connection", connection);
testCase.setPropertyValue("contentType", contentType);
testCase.setPropertyValue("contentLength", contentLength);
testCase.setPropertyValue("contentLocation", contentLocation);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Headers and Body" disabled="true" id="78d9ffea-f8c9-4f07-b886-d2dd66b97bb0">
        <con:settings/>
        <con:config>
          <script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS GET Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

assert runner.status == Status.FINISHED;</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Response Body and Headers" id="ce4869c6-9800-4862-ab80-3bcbfef350f8">
        <con:settings/>
        <con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//def url           = testProject.getPropertyValue("targetURL");
//def urnacct       = testProject.getPropertyValue("urnaccount");
//def urnstream     = testProject.getPropertyValue("urnstream");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");
def XMLbody       = testCase.getPropertyValue("XMLbody");
def nodeaccountid = testCase.getPropertyValue("nodeaccountid");

boolean dobodyXML = true;
boolean doContentTypeHeader = true;
boolean doConnectionClose = false;
boolean doContentLocaton  = false;
boolean contentLengthZero = false;

String errorID     = "";
String errorReason = "";
String errorLink   = "";
//String major = testProject.getPropertyValue("versionMajor");
//String minor = testProject.getPropertyValue("versionMinor");
//String orgRequest  = url + "/rest/1/0/Account/" + urnacct + nodeaccountid;
String expectHTTPstatus = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml";

String major = context.expand('${#Project#versionMajor}');
String minor = context.expand('${#Project#versionMinor}');

if (expectErrType == "" || expectErrType == null) {
	expectErrType = "SUCCESS";
	testCase.setPropertyValue("expectErrTypeSTSGet",expectErrType);
}

this.log.info "expectErrType is $expectErrType";
switch (expectErrType) {
	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = true;
		dobodyXML = true;
		errorID = "Forbidden";
		errorReason = "Forbidden";
	break;
	case "SUCCESS":
	default:
		expectHTTPstatus = "HTTP/1.1 200 OK";
		expectHTTPcontenttype = "application/xml";
		contentLengthZero = false;
		doContentLocaton  = false;
		doContentTypeHeader = false;
		dobodyXML = true;
	break;
}

// HTTP header status
this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("status");
assert testCase.getPropertyValue("status") == expectHTTPstatus;

// Connection

if (doConnectionClose) {
	this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("connection");
	assert testCase.getPropertyValue("connection") == expectHTTPconnection;
}

//Content-Length
if (contentLengthZero) {
	//assert testCase.getPropertyValue("contentLength").toInteger() == 0;
} else {
	////assert testCase.getPropertyValue("contentLength").toInteger() > 0;
}
	
//Content-Type
if (doContentTypeHeader) {
	assert testCase.getPropertyValue("contentType") == expectHTTPcontenttype;
}

// Content-Location
if (doContentLocaton) {
	assert testCase.getPropertyValue("contentLocation") != null;
	
	def b = testCase.getPropertyValue("contentLocation").toURL();
	assert b.getPath().matches("/rest/$major/$minor/SecurityToken/Assertion/[_,0-9,a-f,-]*");
	def parms = b.getPath().split("/");
	
	testCase.setPropertyValue("assertionUUID",parms[parms.size() - 1]);
} else {
	assert testCase.getPropertyValue("contentLocation") == null;
}

this.log.info "expectErrType [$expectErrType]";

if (dobodyXML) {
	if (XMLbody.length() > 0) {
			def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion", ds: "http://www.w3.org/2000/09/xmldsig#", ec: "http://www.w3.org/2001/10/xml-exc-c14n#", xs: "http://www.w3.org/2001/XMLSchema");

			if (expectErrType == "SUCCESS") {
				// Verify response sizes...
				this.log.info "Assertion size: " + myXML.size();

				/*
				assert myXML."saml2:Assertion".size() == 1;
				assert myXML."saml2:Assertion"."ds:Signature".size()    == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo".size()   == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignedInfo"."ds:Reference"."ds:DigestValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:SignatureValue".size()  == 1;
				assert myXML."saml2:Assertion"."ds:Signature"."ds:KeyInfo"."ds:X509Data"."ds:X509Certificate".size() == 1;
				assert myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID".size() == 1;
				*/
				def samlRespNodeAccount = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
				log.info "samlRespNodeAccount[$samlRespNodeAccount]";
				
				//def samlRespNodeAccount = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue".text();
			
			} else {
				// ErrorCode
				this.log.info "ErrorCode: Expect[$errorID] Received: " + myXML.Error.@ErrorID.toString();
				assert myXML.Error.@ErrorID.toString() == errorID;
	
				// ErrorReason
				this.log.info "ErrorReason: Expect[$errorReason] Received: " + myXML.Error.Reason.toString();
				assert myXML.Error.Reason.toString() == errorReason;

				// ErrorLink
				this.log.info "ErrorReason: Expect[$errorLink] Received: " + myXML.Error.ErrorLink.toString();
				assert myXML.Error.ErrorLink.toString() == errorLink;
			}
		} else {
			return false;
		}
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Extract NodeUserID and NodeAccountId" id="0fcdebd6-b677-4de2-85f2-497c8d18eece">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def XMLbody       = testCase.getPropertyValue("XMLbody");
def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	if (XMLbody.length() > 0) {
		def myXML = new XmlSlurper().parseText(XMLbody).declareNamespace(saml2: "urn:oasis:names:tc:SAML:2.0:assertion");

			// Verify response sizes...
			assert myXML.size() == 1;

			/*
			String accountId = myXML."saml2:Assertion"."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Assertion"."saml2:Subject"."saml2:NameID";
			*/
			String accountId = myXML."saml2:AttributeStatement"."saml2:Attribute"."saml2:AttributeValue";
			String userId    = myXML."saml2:Subject"."saml2:NameID";
			
			this.log.info "accountId [$accountId]";
			this.log.info "userId [$userId]";

			testCase.setPropertyValue("assertionAccountId",accountId.substring(accountId.lastIndexOf(":")+1, accountId.length()));
			testCase.setPropertyValue("assertionUserId",   userId.substring(userId.lastIndexOf(":")+1,userId.length()));
			testCase.setPropertyValue("assertionAccountIdFULL",accountId);
			testCase.setPropertyValue("assertionUserIdFULL",userId);

			this.log.info "assertionAccountId property is " + testCase.getPropertyValue("assertionAccountId");
			this.log.info "assertionUserId property is " + testCase.getPropertyValue("assertionUserId");
	} else {
		return false;
	}
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Deflate and encode the &lt;Assertion>" id="a2d7fcf8-000b-44d5-8048-bc931fcc5ece">
        <con:settings/>
        <con:config>
          <script>import java.util.zip.Deflater;
import org.w3c.tools.codec.Base64Encoder;
import java.io.ByteArrayOutputStream;
import java.util.zip.DeflaterOutputStream;
//import org.apache.commons.codec.binary.Base64;
import org.opensaml.xml.util.Base64;

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def expectErrType = testCase.getPropertyValue("expectErrTypeSTSGet");

if (expectErrType == "" || expectErrType == "SUCCESS") {
	
int compressedLength = 0;
//String XMLbody = testCase.getPropertyValue("XMLassertion").toString();
String XMLbodyRaw = testCase.getPropertyValue("XMLbody").toString();

int startAssert = XMLbodyRaw.indexOf("&lt;saml2:Assertion ");
int endAssert   = XMLbodyRaw.indexOf("&lt;/saml2:Assertion>");

String XMLbody = XMLbodyRaw.substring(startAssert, endAssert + 18).trim();
String base64encodeStr = "";

this.log.info "XMLbody is [$XMLbody]";

def myXML = new XmlSlurper().parseText(XMLbody);
testCase.setPropertyValue("assertId",myXML.@ID.toString());

// Perform Deflation
//byte[] xmlBytes = XMLbody.trim().getBytes();
byte [] xmlBytes = new byte[XMLbody.trim().length()];

Deflater compresser = new Deflater(Deflater.DEFLATED, true);
compresser.setInput(XMLbody.trim().getBytes());
compresser.finish();
compressedLength = compresser.deflate(xmlBytes);
    
//ByteArrayOutputStream byteOutputStream    = new ByteArrayOutputStream();
//DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(byteOutputStream);

//deflaterOutputStream.write(xmlBytes, 0, xmlBytes.length);
//deflaterOutputStream.close();

/*
// next, base64 encode it
Base64 base64Encoder = new Base64();

byte[] base64EncodedByteArray = base64Encoder.encode(byteOutputStream.toByteArray());
String base64EncodedMessage = new String(base64EncodedByteArray);
*/
byte [] subArray = Arrays.copyOfRange(xmlBytes, 0, compressedLength);
base64encodeStr = Base64.encodeBytes(subArray,Base64.DONT_BREAK_LINES);

// finally, URL encode it
//String urlEncodedMessage = URLEncoder.encode(base64EncodedMessage, "UTF-8");
testCase.setPropertyValue("assert", base64encodeStr);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Return extracted Properties back to calling Test Case" id="6a72125b-e7ee-4493-81a9-9fc8c05a1eb4">
        <con:settings/>
        <con:config>
          <script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def callTSname = testCase.getPropertyValue("sName");
def callTCname = testCase.getPropertyValue("tName");

def callTC = testProject.getTestSuiteByName(callTSname).getTestCaseByName(callTCname)

callTC.setPropertyValue("assertXML",testCase.getPropertyValue("assertXML"));
callTC.setPropertyValue("assert",testCase.getPropertyValue("assert"));
callTC.setPropertyValue("assertId",testCase.getPropertyValue("assertId"));
callTC.setPropertyValue("assertionAccountId",testCase.getPropertyValue("assertionAccountId"));
callTC.setPropertyValue("assertionUserId",testCase.getPropertyValue("assertionUserId"));
callTC.setPropertyValue("assertionAccountIdFULL",testCase.getPropertyValue("assertionAccountIdFULL"));
callTC.setPropertyValue("assertionUserIdFULL",testCase.getPropertyValue("assertionUserIdFULL"));</script>
        </con:config>
      </con:testStep><con:properties>
        <con:property>
          <con:name>assert</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZtU+o6EP4rTP3olKavQEeYKWIFjy8o6vX45U5IQ4m2KSSpIL/+JgV6CqKXe2eccXbZPPsku/tszzhME8sPOMdMkIzWlmlCuV9421rOqJ9BTrhPYYq5L5A/Cm6ufasOfLg9otUGvbb2txd5AHjY1ZtNB+qOayN9bFquDtxG024Cd+JGSIZynuMB5QJS0dYsYDo6aMm/R9PxTdu3QN1uNV612jNmXGLLkDrQNqSWvK1NhZj5hrFYLOoLu56x2LAAMI2Xm+sRmuIUap2z9Y2KRKyziUf1CCOcJKiOstQ4M3ZiziLuj0hMocgZ3uSKvssFDNAyZEzESXyilWdxNKCTrDDPIc0oQTAhK6je5waLaRbVgiTOGBHT9NtLmEAB63iJdGQ69EQzdqkdCbTDkHGo8yk0N1gPeIIZpgjXnh4Gbe3kuKoVRx8ZpHySsZTvmv+ND6YfOMlmONL59lobascDHnipzhlG/oCiJOfkA9+qZp1BhPmmmhgdD1UbMjwhy2vCZYMuuWJnVOntmevX6JEYc/F/ClQpzhrkGSY57py+Qq+f9Jh4Wo3AxUOQwvBK5KQL+oN2QaAaXDjK0q7NvaYsm2h94iaYXfJf/dO/gvCtidk4EM5cWON8NTeXr+nlhddtmu6kEV8aEYqdppdb2ex09A5m93dzwO6Gv80Xbhnxqm/G9nj6DNwVe3f5IF12F7LfZ6foYfJinv9a0VGUQsSHpmHb8a17e381fyGLhdF0l2+O9Rj27jzricVPbkj79580e/G84TBKrnqzfkSwZ7aM3+3yOhX+u77tzI/y8RtGYmuqNhj0aqGsEhQ/i5nykEifFKH+TIkPF5gKraNOKe3wcyl3JPJlDdc2sALbMUEYemHLBNbFBXBt4LZaZgiCBmhaW5FZs9ijeJ7RCVG5lOSu2+Zngij1xxgyzLQfkHpQwNptJu7oHQsmArNdhW1UFVa19bdA+79tc8qYiKgArtJ0sXwvfEDFza2K73OxDqu9scUPog+CynKWS0lqlezuQsu5nKY5rEf1/OMjV2LuN9QUMzkLcrRM1wCWMcIol/P3+Zi9Y2qUKMZRYre9+X7y0r9LMRdTOhJQ4FR2S60wj9huI8zVdhvQCC+PXZ07KWUhBF6KQ77zRG5mxfjH5Y18pOKkeyj/LTIWlRc8hFXJI+8pl5sgNFaWErrPP0OipqOcEJRJWCJHNGNV8EMAh5LvOstHLrkIwcg4F/j7X2pq9toaRCjLqRj0tMJR1YOCp/icYf9P0BeYQnLKbxDy7x8hOilaAGH55cJJga9Wic8lII0rmrJJui8r7nnX6baajhd63aqs2BduWD7KDrvOF/dXT+Wd9nu88w8=</con:value>
        </con:property>
        <con:property>
          <con:name>assertAccountId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_6d6006e5-884a-453c-b125-05783805f5dc</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">02A35CB4B9846F6BE05305991F0A3E5F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserId</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">02A3410FF6F9102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUUID</con:name>
          <con:value>_6d6006e5-884a-453c-b125-05783805f5dc</con:value>
        </con:property>
        <con:property>
          <con:name>assertPackaged</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertRaw</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertUserId</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>assertXML</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>connection</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Keep-Alive</con:value>
        </con:property>
        <con:property>
          <con:name>contentLength</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">1056</con:value>
        </con:property>
        <con:property>
          <con:name>contentLocation</con:name>
          <con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
        </con:property>
        <con:property>
          <con:name>contentType</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">text/xml;charset=UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>expectErrTypeSTSGet</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SUCCESS</con:value>
        </con:property>
        <con:property>
          <con:name>nodeid</con:name>
          <con:value>DEV</con:value>
        </con:property>
        <con:property>
          <con:name>sName</con:name>
          <con:value>STS_Creation_Device_Nodes</con:value>
        </con:property>
        <con:property>
          <con:name>status</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">HTTP/1.1 200 OK</con:value>
        </con:property>
        <con:property>
          <con:name>synced</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value>
        </con:property>
        <con:property>
          <con:name>tName</con:name>
          <con:value>TC_DECE_01000 - STS</con:value>
        </con:property>
        <con:property>
          <con:name>assertionAccountIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:accountid:org:dece:02A35CB4B9846F6BE05305991F0A3E5F</con:value>
        </con:property>
        <con:property>
          <con:name>assertionUserIdFULL</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:userid:org:dece:02A3410FF6F9102EE05305991F0A7082</con:value>
        </con:property>
        <con:property>
          <con:name>XMLbody</con:name>
          <con:value><![CDATA[<?xml version="1.0" encoding="UTF-8"?><saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" ID="_6d6006e5-884a-453c-b125-05783805f5dc" IssueInstant="2014-09-09T14:13:20.397Z" Version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"><saml2:Issuer>http://c.decellc.com/</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference URI="#_6d6006e5-884a-453c-b125-05783805f5dc"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"><ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="xs"/></ds:Transform></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>+Za6HlDrtUzS0ERAmaFJtuiB0HI=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>MApGsKH+WAFj8erbAt4qt2buzq1xZmGE6B815f7gG/dcg486u2op+Sk0pQOq0rOPY1Xs2/gzH1g3bhV05zrk5sImxBwnMep+cRfX1CKznSdmacsP1/33gN5NQJqXiww/85xj42TFDO62UrgU5FnHQynoX66PPdlJDpHdie619/Y=</ds:SignatureValue></ds:Signature><saml2:Subject><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">urn:dece:userid:org:dece:02A3410FF6F9102EE05305991F0A7082</saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer"><saml2:SubjectConfirmationData NotOnOrAfter="2014-09-09T17:13:20.397Z"/></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions NotBefore="2014-09-09T14:13:10.397Z" NotOnOrAfter="2024-09-09T14:13:20.397Z"/><saml2:Advice><saml2:AssertionURIRef>https://qa.d.uvvu.com:7001/rest/2015/02/SecurityToken/Assertion/_6d6006e5-884a-453c-b125-05783805f5dc</saml2:AssertionURIRef></saml2:Advice><saml2:AuthnStatement AuthnInstant="2014-09-09T14:13:20.397Z" SessionIndex="_6d6006e5-884a-453c-b125-05783805f5dc"><saml2:AuthnContext><saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml2:AuthnContextClassRef><saml2:AuthenticatingAuthority>urn:dece:org:org:dece:coordinator</saml2:AuthenticatingAuthority></saml2:AuthnContext></saml2:AuthnStatement><saml2:AttributeStatement><saml2:Attribute Name="accountID" NameFormat="urn:dece:type:accountID"><saml2:AttributeValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">urn:dece:accountid:org:dece:02A35CB4B9846F6BE05305991F0A3E5F</saml2:AttributeValue></saml2:Attribute></saml2:AttributeStatement></saml2:Assertion>]]></con:value>
        </con:property>
      <con:property><con:name>keyStorePath</con:name><con:value>/opt/dece/certs/DEV_concat.pem</con:value></con:property><con:property><con:name>BasicAuthHeader</con:name><con:value>Basic UmlnaHRzX1Rva2VuVXBkYXRlX1VzZXJfMjAxNDA5MDlfMTAxMjUwMTQxMDI3MTk3MDgwMzpQYXNzd29yZDE=</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20140909_1012501410271970803</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property></con:properties>
      <con:reportParameters/>
    <con:breakPoints><con:testStepId>3e3f5082-3886-441c-9eec-c65a106f35de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>QC_TestPlanDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestLabDirectory</con:name><con:value/></con:property><con:property><con:name>QC_TestSet</con:name><con:value/></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="STS_Creation_Coordinator_Nodes" disabled="true" id="dc5eaf08-518e-4069-b5bc-90a5de948197"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_01000 - STS" searchProperties="true" id="63ac0aa8-3d4a-4ab2-b87c-bfaa95a4de8d"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties" id="3c4a18f5-d330-4ea4-8051-2afda8003997"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = context.expand( '${#Project#UserName}' );
//def node_OID = context.expand( '${#Project#PORTALCS_NODE_OID}' )

testCase.setPropertyValue("tokentype",testProject.getPropertyValue("urntokenType_userpassword"));
testCase.setPropertyValue("username",userName);

//testCase.setPropertyValue("username","shikha_user_add_user1");
testCase.setPropertyValue("password","Password1");
//testCase.setPropertyValue("nodeid",node_OID);
testCase.setPropertyValue("expectErrType","SUCCESS");
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assertIdL",null);

</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Identity Information" id="a7d02800-c3fb-414c-899b-72438efd269c" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("Core Identity Information Extraction")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );</script></con:config></con:testStep><con:testStep type="groovy" name="Call_STS_POST" id="41d2dcd5-7ec0-4dfd-8f59-651d2b5547af"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue("QC_ResultExportLevel", "off")

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS API")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

def assert1 = context.expand( '${#TestCase#assert}' );


testProject.setPropertyValue( "SAML", "SAML2 Assertion="+assert1);


</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem" id="b7484ed7-03cb-4ed3-964e-227b0ceff823" disabled="true"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testProject.getPropertyValue("PORTALCS_NODE_OID");

RestTestRequestStep testStep = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_TOU");
RestTestRequestStep testStep2 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_UserLinkConsent");
RestTestRequestStep testStep3 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_ManageAccountConsent");
RestTestRequestStep testStep4 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_ManageUserConsent");
RestTestRequestStep testStep5 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_UserDataUsageConsent");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {

	case "DABD1A709AAD9052E0401F0A2222596E9F":
	keyStorePath = "/opt/dece/certs/iscportalcs1_concat.pem";
	break;
	case "222259":
	keyStorePath = "C:\\DECE\\certs\\" + nodeId + "_concat.pem";
	break;
}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep2, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep3, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep4, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep5, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="POST - STS1" disabled="true" id="b4a91a09-704b-4ce7-9158-d34e7acc8c04"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS1" mediaType="application/xml" postQueryString="false" id="2d23fd7d-42c2-4066-a537-e17979f93163" sslKeystore="500500.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.support.editor.views.xml.form2.FormEditorView@ViewType">Mandatory and Data</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
</Credentials>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="audience" value="urn:dece:org:org:dece:500501;urn:dece:org:org:dece:500502"/>
  <con:entry key="tokentype" value="${#TestCase#tokentype}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="POST - STS" disabled="true" id="e50724cf-197a-419e-8bb7-d208b5dfc5c6"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS" mediaType="application/xml" postQueryString="false" sslKeystore="222233_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.support.editor.views.xml.form2.FormEditorView@ViewType">Mandatory and Data</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="audience" value="urn:dece:org:org:dece:500500;urn:dece:org:org:dece:500502"/>
  <con:entry key="tokentype" value="${#TestCase#tokentype}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Body" disabled="true" id="62e87d3f-65f7-40b0-899b-7c4488ad1857"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

//testProject.setPropertyValue("SAML",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS Get" id="85ef5a43-2a62-40fa-b1fd-2f8847de2bdf"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue("QC_ResultExportLevel", "off")

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("Generic STS GET")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

def assert1 = context.expand( '${#TestCase#assert}' );


testProject.setPropertyValue( "SAML", "SAML2 Assertion="+assert1);


testProject.setPropertyValue("assertXML_2",testCase.getPropertyValue("assertXML"));
testProject.setPropertyValue("assert_2",testCase.getPropertyValue("assert"));
testProject.setPropertyValue("assertId_2",testCase.getPropertyValue("assertId"));
testProject.setPropertyValue("assertionAccountId_2",testCase.getPropertyValue("assertionAccountId"));
testProject.setPropertyValue("assertionUserId_2",testCase.getPropertyValue("assertionUserId"));
testProject.setPropertyValue("assertionAccountIdFULL_2",testCase.getPropertyValue("assertionAccountIdFULL"));
testProject.setPropertyValue("assertionUserIdFULL_2",testCase.getPropertyValue("assertionUserIdFULL"));


</script></con:config></con:testStep><con:testStep type="groovy" name="Encoding_URL_Properties" disabled="true" id="e914c53f-7b20-4194-b468-078aea481628"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def encodedAssertionAccountIdFULL = testProject.getPropertyValue("assertionAccountIdFULL");
testProject.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(encodedAssertionAccountIdFULL,"UTF-8"));

def encodedAssertionUserIdFULL = testProject.getPropertyValue("assertionUserIdFULL");
testProject.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(encodedAssertionUserIdFULL,"UTF-8"));

def encodedTermsofUse = "urn:dece:type:policy:TermsOfUse";
testProject.setPropertyValue("encodedTermsofUse",URLEncoder.encode(encodedTermsofUse,"UTF-8"));
	
def encodedULC = "urn:dece:type:policy:UserLinkConsent";
testProject.setPropertyValue("encodedULC",URLEncoder.encode(encodedULC,"UTF-8"));
	
def encodedMUC = "urn:dece:type:policy:ManageUserConsent";
testProject.setPropertyValue("encodedMUC",URLEncoder.encode(encodedMUC,"UTF-8"));

def encodedMAC = "urn:dece:type:policy:ManageAccountConsent";
testProject.setPropertyValue("encodedMAC",URLEncoder.encode(encodedMAC,"UTF-8"));

def encodedUDUC = "urn:dece:type:policy:UserDataUsageConsent";
testProject.setPropertyValue("encodedUDUC",URLEncoder.encode(encodedUDUC,"UTF-8"));</script></con:config></con:testStep><con:testStep type="restrequest" name="GET - StreamView" disabled="true" id="9e9ac260-191a-41e6-af75-6e94eefb7ba4"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - StreamView" mediaType="application/xml" sslKeystore="80080010.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://${#Project#targetHost}:${#Project#targetPort}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_TOU" disabled="true" id="965035d0-881a-4fcb-a922-ffa362207331"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_TOU" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:TermsOfUse</dece:PolicyClass>
      <dece:Resource>https://qa.uvvu.com:7001/Consent/Text/US/urn:dece:type:policy:TermsOfUse:20121024/html</dece:Resource>
      <dece:RequestingEntity>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERIDSAU}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedTermsofUse}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:TermsOfUse"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_UserLinkConsent" disabled="true" id="af3983f2-bb7d-4a49-a0fb-bcd3feffdd7c"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_UserLinkConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:UserLinkConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedULC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_ManageAccountConsent" disabled="true" id="27dbfefa-4020-4d3c-b8bf-51aad903c5a8"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_ManageAccountConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:ManageAccountConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:accountid:org:dece:${#Project#assertionAccountId}</dece:Resource>
      <!--dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:RequestingEntity>urn:dece:org:org:dece:500501</dece:RequestingEntity>
      <dece:RequestingEntity>urn:dece:org:org:dece:500502</dece:RequestingEntity-->  
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedMAC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:ManageAccountConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_ManageUserConsent" disabled="true" id="bb21f89f-35a5-4b1e-ab9a-edd4ce0d7a02"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_ManageUserConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:ManageUserConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedMUC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_UserDataUsageConsent" disabled="true" id="137efd56-4f86-4218-8969-d07b626b87eb"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_UserDataUsageConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:UserDataUsageConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedUDUC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value>B49E51860A52F2EFE0401F0A05996433</con:value></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZrb+I6EP0rKPuxCk5CAiUqSBTaXfqihba72y9XrjOAaWKntgNpf/21A2SB0l72SkjIk/GZMw8f+0TiJPbCjpQgFOWskicxk2FhbVmZYCHHksqQ4QRkqEg46lxfhV7VCfF6i1Xp91rWP1HTf4bIPbbB8Rq2P2427Oa4Drbr1Br1uusT5/lZu0qZQZ9JhZlqWZ7j+rbT1L971w/dWhjUqm7gPVmVRxBSY2uXqmOtSOWyZU2VSkOEFotFdVGrcjFBnuO46Nf11YhMIcFW+2SZURFItFf+pBoBgTgmVcITdIK2fE4iGY7ohGGVCVjFij6L5SCnibRPJOnkm1XuhajPxrxYdjHjjBIc03ds6nMNasqjSieecEHVNPk0CdcxwDbkxCauz75ZaJvagUBbDIXEtpxid4U1hDEIYAQqD8N+y/p2WNeKrfcCMznmIpHby7/jA2wOMU8hsuU6rRW1wwH3VKp9AiTsMxJnks7hxgxrignIVTeBHA5VuRUwpvkVlXpAc2nYoU16O8tlNXp0AlL9nwZtNGcJ8ojjDNruLc9jcMmPyxc6u3V9/uYkOUQ3zsOkVRDYdC4MZWuXy52hLIdoueMl6aq6M/TF1V066dZk+vbu6qk9zu6n7ObycjTpXOfng7Pp+KH79BPdNH70e7dHg3q3Nw5635u/HpH4fXP2cvEjIuPZvJe8/8bR7DRAoyfnIhs5l0eDFB5pvJg1rmdPRyOk8uHpPQt+ibt44N96A+48Zu/4+/nDhagHxx67+J5z3Pv5Eh9RMYwv8uQo6acX3eyuHstWmc4G/23b+syPsucZELVemjHo9yrnuktYfS1mxkIje1y4hqkRH6mAKattdhntCDMtdzQKdQ+Xa8fr1BpOvdfpnh/XgmP/zAlqTtBsuudOx3VP/bXILFnsUOxyNqYmlpHc5dh8TZAkoQQWgbDnPNNKJ60vEHtY4UqfDfUh4EzCPdfy7L5kCzELaplPGsJ9l6lUrxAlgZbvG64GbCA6YwViW5MbW5o8BEJTCka4zVxLPdhS6Vq84nmmYrc6x1UGmZZ2YVQ29PzjAEmapDEYpijhURZDNZ2mRWWQXP57NiaysFJJUi4UjoksjgT6NMHdb+taaJ+IGgdpkjoF3U/Yc8v464w+ZB7svY3W8J0souaE6cIqQcmSyfanP/NiBqUcljI1d8283PCXALo2HyHQF/zQbmnKiNGcbsRfX+f6YtBS0l53+BVXX6vZfJ4VPW0YyRQaHpliIcdDIyCZFru3e/4CDJUo6KCbpSS+E7y0b1PM1JSNFFaQ6CGsFMsDnhIjkOYp0denJz/0nbIVUpdOQa722bqxfgYZxl++lEhIjJ823+q/BRfRn47twdqIo/PULwlF2cSszK3y9smAEK5hqdZDLjbB9wHsC75tLItcclF6oJ4zBZ9/qRiha1mYEJ4x1e9ZhWFTfAue6i2F8I/TB5hC38sHH/3vF59NixEgoJ+Jkhb45t4OzRFgkw0BXwXd1fCg6/YajcZp/fTM29Rw3znvlEXZYtf+YP5o2ajT7oy3/wU=</con:value></con:property><con:property><con:name>assertId</con:name><con:value>_d94bed18-e027-4f97-9f6e-10376614c0bb</con:value></con:property><con:property><con:name>assertIdL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionAccountId</con:name><con:value>02A35C1D777B6BE2E05305991F0A40FA</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02A35C1D777B6BE2E05305991F0A40FA</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value>02A3706DACF83584E05305991F0A11B4</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:02A3706DACF83584E05305991F0A11B4</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_d94bed18-e027-4f97-9f6e-10376614c0bb</con:value></con:property><con:property><con:name>assertPackaged</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertRaw</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>nodeaccountid</con:name><con:value>B49E51860A4DF2EFE0401F0A05996433</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>iscportalcs1</con:value></con:property><con:property><con:name>nodeuserid</con:name><con:value>B49E54F2DDBFC209E0401F0A059966E1</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>uname</con:name><con:value>shikha_user_create_accp_test_20110610_11508</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20140909_1013461410272026490</con:value></con:property><con:property><con:name>useroid</con:name><con:value>B49E54F2DDC4C209E0401F0A059966E1</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30002 - RightsTokenUpdate - PERM - SecurityRoleInvalid - Invocation with PORTAL:CS</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R3_PatchChanges_PORTAL[:CS]_Nodes</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ddbb4895-c469-4d7a-b677-0ab8bcbd6c02</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30002 - RightsTokenUpdate - PERM - SecurityRoleInvalid - Invocation with PORTAL:CS</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R3_PatchChanges_PORTAL[:CS]_Nodes</con:value></con:property><con:property><con:name>country</con:name><con:value>US</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="STS_Creation_Device_Nodes" disabled="true" id="b95e62b0-efdd-41bb-a34c-9ca365353b54"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_01000 - STS" searchProperties="true" id="bd6df3c8-3eca-4a81-8259-6c91a7237926"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties" id="c5370f95-a327-405b-96b8-880d1134cf82"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = context.expand( '${#Project#UserName}' );
//def node_OID = context.expand( '${#Project#PORTALCS_NODE_OID}' )

testCase.setPropertyValue("tokentype",testProject.getPropertyValue("urntokenType_userpassword"));
testCase.setPropertyValue("username",userName);

//testCase.setPropertyValue("username","shikha_user_add_user1");
testCase.setPropertyValue("password","Password1");
//testCase.setPropertyValue("nodeid",node_OID);
testCase.setPropertyValue("expectErrType","SUCCESS");
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assertIdL",null);

testProject.setPropertyValue("audienceList","urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdDEVCS"));
</script></con:config></con:testStep><con:testStep type="groovy" name="Establish Identity Information" id="cf598a8c-a9da-4356-b836-dcad3eaf22a3" disabled="true"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("Core Identity Information Extraction")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );</script></con:config></con:testStep><con:testStep type="groovy" name="Call_STS_POST" id="0e09e592-b91e-40c2-a325-a286537b80dd"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue("QC_ResultExportLevel", "off")

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS API DHost")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

def assert1 = context.expand( '${#TestCase#assert}' );


testProject.setPropertyValue( "SAML", "SAML2 Assertion="+assert1);


</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem" id="933a4408-4213-4abf-9223-1d9a7424021e" disabled="true"><con:settings/><con:config><script>import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;

def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def today = new Date()

String keyStorePath  = "";
String keyStoreAlias = "";
String nodeId = testProject.getPropertyValue("PORTALCS_NODE_OID");

RestTestRequestStep testStep = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_TOU");
RestTestRequestStep testStep2 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_UserLinkConsent");
RestTestRequestStep testStep3 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_ManageAccountConsent");
RestTestRequestStep testStep4 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_ManageUserConsent");
RestTestRequestStep testStep5 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_UserDataUsageConsent");

//String keyStorePath = testCase.getPropertyValue("KeyStorePath");
//String keyStoreAlias = testCase.getPropertyValue("notValidExpiredNode");

switch (nodeId) {

	case "DABD1A709AAD9052E0401F0A2222596E9F":
	keyStorePath = "/opt/dece/certs/iscportalcs1_concat.pem";
	break;
	case "222259":
	keyStorePath = "C:\\DECE\\certs\\" + nodeId + "_concat.pem";
	break;
}
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep2, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep3, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep4, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep5, keyStorePath);

</script></con:config></con:testStep><con:testStep type="restrequest" name="POST - STS1" disabled="true" id="e5f5fab8-2717-4715-85b3-0e6802a71d61"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS1" mediaType="application/xml" postQueryString="false" id="2d23fd7d-42c2-4066-a537-e17979f93163" sslKeystore="500500.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.support.editor.views.xml.form2.FormEditorView@ViewType">Mandatory and Data</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
</Credentials>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="audience" value="urn:dece:org:org:dece:500501;urn:dece:org:org:dece:500502"/>
  <con:entry key="tokentype" value="${#TestCase#tokentype}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="POST - STS" disabled="true" id="a4112ae9-afaf-465f-9a83-eb30ba2cdbfd"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="POST - STS" mediaType="application/xml" postQueryString="false" sslKeystore="222233_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.support.editor.views.xml.form2.FormEditorView@ViewType">Mandatory and Data</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Credentials xmlns="${#Project#coordinatorSchema}">
  <Username>${#TestCase#username}</Username> 
  <Password>${#TestCase#password}</Password> 
  </Credentials>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="audience" value="urn:dece:org:org:dece:500500;urn:dece:org:org:dece:500502"/>
  <con:entry key="tokentype" value="${#TestCase#tokentype}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Verify Response Body" disabled="true" id="07bbb56a-1655-405e-8337-d81c62da6839"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS Response Validator")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runner = myTC.run( null, false );

//testProject.setPropertyValue("SAML",null);</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS Get" id="23abf8f7-5f2c-4fd0-a9e0-fe4c6da59104"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue("QC_ResultExportLevel", "off")

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("Generic STS GET DHost")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

def assert1 = context.expand( '${#TestCase#assert}' );


testProject.setPropertyValue( "SAML", "SAML2 Assertion="+assert1);


testProject.setPropertyValue("assertXML_2",testCase.getPropertyValue("assertXML"));
testProject.setPropertyValue("assert_2",testCase.getPropertyValue("assert"));
testProject.setPropertyValue("assertId_2",testCase.getPropertyValue("assertId"));
testProject.setPropertyValue("assertionAccountId_2",testCase.getPropertyValue("assertionAccountId"));
testProject.setPropertyValue("assertionUserId_2",testCase.getPropertyValue("assertionUserId"));
testProject.setPropertyValue("assertionAccountIdFULL_2",testCase.getPropertyValue("assertionAccountIdFULL"));
testProject.setPropertyValue("assertionUserIdFULL_2",testCase.getPropertyValue("assertionUserIdFULL"));


</script></con:config></con:testStep><con:testStep type="groovy" name="Encoding_URL_Properties" disabled="true" id="4d6b3190-cce8-4eeb-be60-dbf13a270b4b"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def encodedAssertionAccountIdFULL = testProject.getPropertyValue("assertionAccountIdFULL");
testProject.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(encodedAssertionAccountIdFULL,"UTF-8"));

def encodedAssertionUserIdFULL = testProject.getPropertyValue("assertionUserIdFULL");
testProject.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(encodedAssertionUserIdFULL,"UTF-8"));

def encodedTermsofUse = "urn:dece:type:policy:TermsOfUse";
testProject.setPropertyValue("encodedTermsofUse",URLEncoder.encode(encodedTermsofUse,"UTF-8"));
	
def encodedULC = "urn:dece:type:policy:UserLinkConsent";
testProject.setPropertyValue("encodedULC",URLEncoder.encode(encodedULC,"UTF-8"));
	
def encodedMUC = "urn:dece:type:policy:ManageUserConsent";
testProject.setPropertyValue("encodedMUC",URLEncoder.encode(encodedMUC,"UTF-8"));

def encodedMAC = "urn:dece:type:policy:ManageAccountConsent";
testProject.setPropertyValue("encodedMAC",URLEncoder.encode(encodedMAC,"UTF-8"));

def encodedUDUC = "urn:dece:type:policy:UserDataUsageConsent";
testProject.setPropertyValue("encodedUDUC",URLEncoder.encode(encodedUDUC,"UTF-8"));</script></con:config></con:testStep><con:testStep type="restrequest" name="GET - StreamView" disabled="true" id="0213f7be-3df1-4284-b448-a2df84d2e00b"><con:settings/><con:config service="RightsTokenCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{AccountID}/RightsToken" methodName="RightsTokenCreate Request" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - StreamView" mediaType="application/xml" sslKeystore="80080010.pem"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="SAML2 assertion=${#TestCase#assert}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://${#Project#targetHost}:${#Project#targetPort}</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_TOU" disabled="true" id="b976dcc2-1e87-4cb4-bef9-cd76edc59b78"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_TOU" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:TermsOfUse</dece:PolicyClass>
      <dece:Resource>https://qa.uvvu.com:7001/Consent/Text/US/urn:dece:type:policy:TermsOfUse:20121024/html</dece:Resource>
      <dece:RequestingEntity>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERIDSAU}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedTermsofUse}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:TermsOfUse"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_UserLinkConsent" disabled="true" id="2b50ca92-436e-4a33-9517-7348274181fb"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_UserLinkConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:UserLinkConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedULC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_ManageAccountConsent" disabled="true" id="0703623c-fb5f-40dd-8e3a-08408883a340"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_ManageAccountConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:ManageAccountConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:accountid:org:dece:${#Project#assertionAccountId}</dece:Resource>
      <!--dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:RequestingEntity>urn:dece:org:org:dece:500501</dece:RequestingEntity>
      <dece:RequestingEntity>urn:dece:org:org:dece:500502</dece:RequestingEntity-->  
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedMAC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:ManageAccountConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_ManageUserConsent" disabled="true" id="0c25a1bc-1c3b-48c1-83c9-39ee2ec3437f"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_ManageUserConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:ManageUserConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedMUC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_UserDataUsageConsent" disabled="true" id="98926d35-d82f-4c17-b1ef-ea63fda52e0e"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_UserDataUsageConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="iscportalcs1_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:UserDataUsageConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedUDUC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value>B49E51860A52F2EFE0401F0A05996433</con:value></con:property><con:property><con:name>assert</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">nVZtU+o6EP4rTP3olKavQEeYKWIFjy8o6vX45U5IQ4m2KSSpIL/+JgV6CqKXe2eccXbZPPsku/tszzhME8sPOMdMkIzWlmlCuV9421rOqJ9BTrhPYYq5L5A/Cm6ufasOfLg9otUGvbb2txd5AHjY1ZtNB+qOayN9bFquDtxG024Cd+JGSIZynuMB5QJS0dYsYDo6aMm/R9PxTdu3QN1uNV612jNmXGLLkDrQNqSWvK1NhZj5hrFYLOoLu56x2LAAMI2Xm+sRmuIUap2z9Y2KRKyziUf1CCOcJKiOstQ4M3ZiziLuj0hMocgZ3uSKvssFDNAyZEzESXyilWdxNKCTrDDPIc0oQTAhK6je5waLaRbVgiTOGBHT9NtLmEAB63iJdGQ69EQzdqkdCbTDkHGo8yk0N1gPeIIZpgjXnh4Gbe3kuKoVRx8ZpHySsZTvmv+ND6YfOMlmONL59lobascDHnipzhlG/oCiJOfkA9+qZp1BhPmmmhgdD1UbMjwhy2vCZYMuuWJnVOntmevX6JEYc/F/ClQpzhrkGSY57py+Qq+f9Jh4Wo3AxUOQwvBK5KQL+oN2QaAaXDjK0q7NvaYsm2h94iaYXfJf/dO/gvCtidk4EM5cWON8NTeXr+nlhddtmu6kEV8aEYqdppdb2ex09A5m93dzwO6Gv80Xbhnxqm/G9nj6DNwVe3f5IF12F7LfZ6foYfJinv9a0VGUQsSHpmHb8a17e381fyGLhdF0l2+O9Rj27jzricVPbkj79580e/G84TBKrnqzfkSwZ7aM3+3yOhX+u77tzI/y8RtGYmuqNhj0aqGsEhQ/i5nykEifFKH+TIkPF5gKraNOKe3wcyl3JPJlDdc2sALbMUEYemHLBNbFBXBt4LZaZgiCBmhaW5FZs9ijeJ7RCVG5lOSu2+Zngij1xxgyzLQfkHpQwNptJu7oHQsmArNdhW1UFVa19bdA+79tc8qYiKgArtJ0sXwvfEDFza2K73OxDqu9scUPog+CynKWS0lqlezuQsu5nKY5rEf1/OMjV2LuN9QUMzkLcrRM1wCWMcIol/P3+Zi9Y2qUKMZRYre9+X7y0r9LMRdTOhJQ4FR2S60wj9huI8zVdhvQCC+PXZ07KWUhBF6KQ77zRG5mxfjH5Y18pOKkeyj/LTIWlRc8hFXJI+8pl5sgNFaWErrPP0OipqOcEJRJWCJHNGNV8EMAh5LvOstHLrkIwcg4F/j7X2pq9toaRCjLqRj0tMJR1YOCp/icYf9P0BeYQnLKbxDy7x8hOilaAGH55cJJga9Wic8lII0rmrJJui8r7nnX6baajhd63aqs2BduWD7KDrvOF/dXT+Wd9nu88w8=</con:value></con:property><con:property><con:name>assertId</con:name><con:value>_6d6006e5-884a-453c-b125-05783805f5dc</con:value></con:property><con:property><con:name>assertIdL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionAccountId</con:name><con:value>02A35CB4B9846F6BE05305991F0A3E5F</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:02A35CB4B9846F6BE05305991F0A3E5F</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value>02A3410FF6F9102EE05305991F0A7082</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:02A3410FF6F9102EE05305991F0A7082</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_6d6006e5-884a-453c-b125-05783805f5dc</con:value></con:property><con:property><con:name>assertPackaged</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertRaw</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>nodeaccountid</con:name><con:value>B49E51860A4DF2EFE0401F0A05996433</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>DEV</con:value></con:property><con:property><con:name>nodeuserid</con:name><con:value>B49E54F2DDBFC209E0401F0A059966E1</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>tokentype</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>uname</con:name><con:value>shikha_user_create_accp_test_20110610_11508</con:value></con:property><con:property><con:name>username</con:name><con:value>Rights_TokenUpdate_User_20140909_1012501410271970803</con:value></con:property><con:property><con:name>useroid</con:name><con:value>B49E54F2DDC4C209E0401F0A059966E1</con:value></con:property><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30013 - RightsTokenUpdate - PERM - SecurityRoleInvalid - Invocation with Device</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_Invocation_ByPermission_TestCases</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ddbb4895-c469-4d7a-b677-0ab8bcbd6c02</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_30013 - RightsTokenUpdate - PERM - SecurityRoleInvalid - Invocation with Device</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsTokenUpdate_Invocation_ByPermission_TestCases</con:value></con:property><con:property><con:name>country</con:name><con:value>US</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite name="E2E_TestCases" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_AccptTest_00001_AccountCreate_API_Invocation_from_Retailer" searchProperties="true"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting></con:settings><con:testStep type="groovy" name="AccountNameAndUserNameGeneration"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def today= new Date().format( 'yyyyMMdd_hhmms' );

testProject.setPropertyValue("AccountDisplayName","accname_"+today);


def uname= "RLDGbyList_firstuser"+new Date().format( 'yyyyMMdd') + "_" + System.currentTimeMillis();

testProject.setPropertyValue("UserName",uname);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testProject.getPropertyValue("nodeIdRTL"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("Account_Create");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);



</script></con:config></con:testStep><con:testStep type="restrequest" name="Account_Create"><con:settings/><con:config service="AccountCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Account_Create" mediaType="application/xml" postQueryString="false" sslKeystore="RET_concat.pem" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<Account xmlns="${#Project#coordinatorSchema}"> 
                <DisplayName>${#Project#AccountDisplayName}</DisplayName>
                <Country>${#TestSuite#country}</Country>
                <UserList>
                                <User UserClass="urn:dece:role:user:class:full" xmlns="${#Project#coordinatorSchema}" xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" xmlns:ns4="http://www.w3.org/2001/04/xmlenc#">
                                                <Name>
                                                                <GivenName>${#Project#UserName}</GivenName>
                                                                <SurName>surname</SurName>
                                                </Name>            
                                                <ContactInfo>
                                                                <PrimaryEmail>                                
                                                                                <Value>${#Project#PrimaryEmail}</Value>
                                                                                <ConfirmationEndpoint>www.abc.com</ConfirmationEndpoint>
                                                                </PrimaryEmail>
                                                </ContactInfo>
                                                <Credentials> 
                                                                <Username>${#Project#UserName}</Username>     
                                                                <Password>Password1</Password>
                                                </Credentials>
                                </User>
                </UserList>
</Account>
]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Extract_Details"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('Account_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate_Response"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();


def url       = context.expand( '${#Project#Provision_HostName}' );
//def urnacct   = testProject.getPropertyValue("urnaccount");
//def acct      = testCase.getPropertyValue("nodeaccountid");
//def urnnode   = testProject.getPropertyValue("urnNode");

def nodeacc = context.expand( '${#Project#NODEACCID}' )



//def sh            = testCase.getPropertyValue("streamhandleFULL");
//def nodeid        = testCase.getPropertyValue("nodeid");
//def account       = testCase.getPropertyValue("assertionAccountIdFULL");
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');
//def nodetype      = testCase.getPropertyValue("nodetype");

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
if (context.expand( '${#Project#Query_HostName}' ).length() == 0) {
	errorHost = "http://error.decellc.org";
} else {
	errorHost = context.expand( '${#Project#Query_HostName}' );
}
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		//this.log.info "Hello";
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
	break;

	case "INVALID_COUNTRY":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
	errorReason = "The supplied country code is invalid.";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
	break;

	case "NULL_COUNTRY":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
	errorReason = "The country code cannot be null.";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
	break;
	
	case "API_NOT_AUTH":
	expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
	errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	errorReason = "API call not authorized";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
	expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
	errorID     = "urn:dece:errorid:org:dece:UserNotActive";
	errorReason = "User is not active";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
	errorReason = "Requesting User ID Not Specified";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;	
	
}
// HTTP header status
//this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
//this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
//this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
if (XMLbodynull) {
	////assert context.expand( '${#TestCase#httpContentLength}').toInteger() == 0;
} else {
	////assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}

//Location Header
if (httpLocationHeader) {
	assert context.expand( '${#TestCase#httpLocation}') != null;

	def a = context.expand( '${#TestCase#httpLocation}');
	def b = a.toURL();
	def urlStr = b.getPath();
	log.info "urlStr=="+urlStr;
	
	def decodedAccountID = URLDecoder.decode(urlStr,"UTF-8");
	log.info "decodedAccountID=="+decodedAccountID;

//Changes made for Account User Policy API
//	//assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*");
//	assert decodedAccountID.matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*");
//	
//	/*int lastColon = urlStr.lastIndexOf(':');
//	int lastSlash = urlStr.lastIndexOf('/');
//	accountid     = urlStr.substring(lastColon + 1);*/
//
//	int lastColon = decodedAccountID.lastIndexOf(':');
//	int lastSlash = decodedAccountID.lastIndexOf('/');
//	accountid     = decodedAccountID.substring(lastColon + 1);
//	
//	//streamidFULL = urlStr.substring(lastSlash + 1);
//
//	//this.log.info "streamid[$streamid] - streamidFULL[$streamidFULL]";
//
//	testProject.setPropertyValue("NODEACCID",accountid);
//		def encodedNodeAccID = "urn:dece:accountid:org:dece:"+accountid;
//		log.info "URN Should be Encoded:"+testProject.getPropertyValue("encodeURN").toUpperCase()
//		if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
//			testProject.setPropertyValue("encodedNodeAccID",URLEncoder.encode(encodedNodeAccID,"UTF-8"));
//		else
//			testProject.setPropertyValue("encodedNodeAccID",encodedNodeAccID);
//						
//	//testCase.setPropertyValue("streamhandleFULL",streamidFULL);
//} else {
//	assert context.expand( '${#TestCase#httpLocation}') == "";
//}

//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;


def urlStr1 = b.getPath();

                if (testProject.getPropertyValue("versionMinor") != testProject.getPropertyValue("versionURLEncode"))
                {                              
                                assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");                             
                } else {
                                assert b.getPath().matches("/rest/$major/$minor/Account/urn%3Adece%3Aaccountid%3Aorg%3Adece%3A[0-9,A-F]*/User/urn%3Adece%3Auserid%3Aorg%3Adece%3A[0-9,A-F]*");
                }

                urlStr1 = URLDecoder.decode(urlStr1);
                def arrayString = urlStr.split("Account/");
      arrayString= arrayString[1].split("/User/");
      log.info "Node_User_ID=="+arrayString[1]
      log.info "Node_Account_ID=="+arrayString[0]

       int lastColon = arrayString[1].lastIndexOf(':');
       accountid     = arrayString[0].substring(lastColon+4);
       userid     = arrayString[1].substring(lastColon +1);
       def useridfull = arrayString[1];    
       def accountidfull = arrayString[0];       
                                         
                                testCase.setPropertyValue("NODE_ACCOUNT_ID",accountid);
                                testCase.setPropertyValue("NODE_ACCOUNT_ID_FULL",accountidfull);

                                testCase.setPropertyValue("NODE_USER_ID",userid);
                                testCase.setPropertyValue("NODE_USER_ID_FULL",useridfull);

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

}</script></con:config></con:testStep><con:properties><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value>close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml; charset=UTF-8</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa1.q.uvvu.com/rest/1/11/Account/urn:dece:accountid:org:dece:17B1224324774230E05305991F0A8728/User/urn:dece:userid:org:dece:17B1224324784230E05305991F0A8728</con:value></con:property><con:property><con:name>ResponseType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>Node_OID</con:name><con:value>500500</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property><con:property><con:name>AccountName</con:name><con:value>accname_20150101_033336</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID</con:name><con:value>17B1224324774230E05305991F0A8728</con:value></con:property><con:property><con:name>NODE_ACCOUNT_ID_FULL</con:name><con:value>urn:dece:accountid:org:dece:17B1224324774230E05305991F0A8728</con:value></con:property><con:property><con:name>NODE_USER_ID</con:name><con:value>17B1224324784230E05305991F0A8728</con:value></con:property><con:property><con:name>NODE_USER_ID_FULL</con:name><con:value>urn:dece:userid:org:dece:17B1224324784230E05305991F0A8728</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3f3e8c09-0ec0-4582-9364-7ee82f493271</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f5bc192-1dae-4de1-bd17-61f54f69165d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_AccptTest_00002_FirstUserCreate_API_Invocation_from_Retailer" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="UserNameGeneration"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def uname= "RLDGbyList_firstuser"+new Date().format( 'yyyyMMdd') + "_" + System.currentTimeMillis();

testProject.setPropertyValue("UserName",uname);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testProject.getPropertyValue("nodeIdRTL"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("User_Create");
def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);



</script></con:config></con:testStep><con:testStep type="groovy" name="Extract_Details"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();
def tStep  = testCase.getTestStepByName('User_Create');
def expXML = tStep.httpRequest.response.getResponseContent();

String status = null;
String connection = null;
String contentType = null;
String contentLength = null;
String contentLocation = null;


tStep.httpRequest.response.responseHeaders.each() { header, value ->
	switch (header) {
		case "Location": 
			contentLocation = value[0];
			break;
		case "#status#": 
			status = value[0]; 
			break;
		case "Connection": 
			connection = value[0]; 
			break;
		case "Content-Type": 
			contentType = value[0]; 
			break;
		case "Content-Length": 
			contentLength = value[0]; 
			break;
		case "Transfer-Encoding": 
			httpContentEncoding = value[0]; 
			break;
	}
}

testCase.setPropertyValue("XMLbody", expXML);
testCase.setPropertyValue("httpStatus", status);
testCase.setPropertyValue("httpConnect", connection);
testCase.setPropertyValue("httpContentType", contentType);
testCase.setPropertyValue("httpContentLength", contentLength);
testCase.setPropertyValue("httpLocation", contentLocation);
</script></con:config></con:testStep><con:testStep type="groovy" name="Validate_Response"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def url       = context.expand( '${#Project#Provision_HostName}' );
//def urnacct   = testProject.getPropertyValue("urnaccount");
//def acct      = testCase.getPropertyValue("nodeaccountid");
//def urnnode   = testProject.getPropertyValue("urnNode");

//def sh            = testCase.getPropertyValue("streamhandleFULL");
//def nodeid        = testCase.getPropertyValue("nodeid");
//def account       = testCase.getPropertyValue("assertionAccountIdFULL");
def errorRespType = context.expand( '${#TestCase#ResponseType}' );
def XMLbody       = context.expand( '${#TestCase#XMLbody}');
//def nodetype      = testCase.getPropertyValue("nodetype");

boolean errorIDFlag     = true;
boolean errorReasonFlag = true;
boolean errorLinkFlag   = true;
boolean XMLbodynull     = false;
boolean httpLocationHeader = false;
boolean processXMLFlag  = true;

String errorID = "";
String errorReason = "";
String errorLink  = "";
String errorHost  = "";
String major = context.expand( '${#Project#versionMajor}' );
String minor = context.expand( '${#Project#versionMinor}' );
String orgRequest = url + "/rest/$major/$minor/Account/";
String expectHTTPstatus      = "HTTP/1.1 403 Forbidden";
String expectHTTPconnection  = "close";
String expectHTTPcontenttype = "application/xml;charset=UTF-8";
String expected;
String received;
String description;
/*
*  Added this override with the 7.7 drop.  They change the name
*  of the &lt;ErrorLink> host.
*/
if (context.expand( '${#Project#Query_HostName}' ).length() == 0) {
	errorHost = "http://error.decellc.org";
} else {
	errorHost = context.expand( '${#Project#Query_HostName}' );
}
this.log.info "errorRespType[$errorRespType]";

switch (errorRespType) {
	case "SUCCESS":
		expectHTTPstatus   = "HTTP/1.1 201 Created";
		XMLbodynull        = true;
		httpLocationHeader = true;
		//this.log.info "Hello";
	break;

	case "INVALID_DISPLAY_NAME":
	     expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
		errorID     = "urn:dece:errorid:org:dece:AccountDisplayNameNotValid";
		errorReason = "The display name exceeds 256 characters (or is empty).";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountDisplayNameNotValid";
	break;

	case "INVALID_COUNTRY":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeNotValid";
	errorReason = "The supplied country code is invalid.";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeNotValid";
	break;

	case "NULL_COUNTRY":
	expectHTTPstatus   = "HTTP/1.1 400 Bad Request";
	errorID     = "urn:dece:errorid:org:dece:AccountCountryCodeCannotBeNull";
	errorReason = "The country code cannot be null.";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#AccountCountryCodeCannotBeNull";
	break;
	
	case "API_NOT_AUTH":
	expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
	errorID     = "urn:dece:errorid:org:dece:Security:RoleInvalid";
	errorReason = "API call not authorized";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Security:RoleInvalid";
	break;

	case "FORBIDDEN":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		processXMLFlag  = false;
		errorIDFlag     = false;
		errorReasonFlag = false;
		errorLinkFlag   = false;
	break;
	
	case "USER_NOT_MATCH_TOKEN":
	     expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserIdUnmatched";
		errorReason = "User ID does not match security token";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserIdUnmatched";
		break;
	
	case "USER_NOT_ACTIVE":
	expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
	errorID     = "urn:dece:errorid:org:dece:UserNotActive";
	errorReason = "User is not active";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotActive";
	
	break;
	case "USER_REQUESTING_NOT_PROVIDED":
	expectHTTPstatus = "HTTP/1.1 400 Bad Request";
	errorID     = "urn:dece:errorid:org:dece:UserNotSpecified";
	errorReason = "Requesting User ID Not Specified";
	errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserNotSpecified";
	break;
	
	case "USER_NOT_PERMIT":
		expectHTTPstatus = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:UserPrivilegeAccessRestricted";
		errorReason = "User Privilege Access Restricted";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#UserPrivilegeAccessRestricted";
	break;

		case "CANNOT_CREATE_FAU":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorPrivilegeInsufficientToCreateFullAccessUser";
		errorReason = "The user does not have permission to create a full-access user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorPrivilegeInsufficientToCreateFullAccessUser";
	break;
	
	case "CANNOT_CREATE_USER":
		expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
		errorID     = "urn:dece:errorid:org:dece:RequestorNotAllowedToCreateUsers";
		errorReason = "The user does not have permission to create a user.";
		errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#RequestorNotAllowedToCreateUsers";
	break;
	
	case "FIRST_USER_MUST_BE_ADULT":
			expectHTTPstatus   = "HTTP/1.1 403 Forbidden";
			errorID     = "urn:dece:errorid:org:dece:FirstUserMustBe18OrOlder";
			errorReason = "First User must be 18 years or older";
			errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBe18OrOlder";
	break;


	case "NO_MNG_ACC_CNST":
		     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
			errorReason = "The setting of the \"Manage Account Consent\" policy prevents the requested action from being completed.";
			errorID     = "urn:dece:errorid:org:dece:Policy:ManageAccountConsentRequired";
			errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#Policy:ManageAccountConsentRequired";
	break;
	
	case "FIRST_USER_MUST_BE_FAU":
		     expectHTTPstatus = "HTTP/1.1 403 Forbidden";
			errorReason = "The first user in a household account must be a full-access user.";
			errorID     = "urn:dece:errorid:org:dece:FirstUserMustBeCreatedWithFullAccessPrivilege";
			errorLink   = "$errorHost/rest/$major/$minor/error/en/ErrorList.html#FirstUserMustBeCreatedWithFullAccessPrivilege";
	break;
	
}
// HTTP header status
//this.log.info "HTTP status:  Expect: $expectHTTPstatus - Received: " + testCase.getPropertyValue("httpStatus");

assert context.expand( '${#TestCase#httpStatus}' ) == expectHTTPstatus;

// Connection
//this.log.info "HTTP status:  Expect: $expectHTTPconnection - Received: " + testCase.getPropertyValue("httpConnect");
//assert context.expand( '${#TestCase#httpConnect}') == expectHTTPconnection;

//Content-Length
//this.log.info "HTTP Content-Length:  Value is " + context.expand( '${#TestCase#httpContentLength}').toInteger();
if (XMLbodynull) {
	////assert context.expand( '${#TestCase#httpContentLength}').toInteger() == 0;
} else {
	////assert context.expand( '${#TestCase#httpContentLength}').toInteger() > 0;
}

//Location Header
if (httpLocationHeader) {
	assert context.expand( '${#TestCase#httpLocation}') != null;

	def a = context.expand( '${#TestCase#httpLocation}');
	def b = a.toURL();
	def urlStr = b.getPath();
	log.info "urlStr=="+urlStr;
	
	def decodedUserID = URLDecoder.decode(urlStr,"UTF-8");
	log.info "decodedUserID=="+decodedUserID;	

	//assert b.getPath().matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");
	assert decodedUserID.matches("/rest/$major/$minor/Account/urn:dece:accountid:org:dece:[0-9,A-F]*/User/urn:dece:userid:org:dece:[0-9,A-F]*");
	
	/*int lastColon = urlStr.lastIndexOf(':');
	int lastSlash = urlStr.lastIndexOf('/');
	userid     = urlStr.substring(lastColon + 1);*/

	int lastColon = decodedUserID.lastIndexOf(':');
	int lastSlash = decodedUserID.lastIndexOf('/');
	userid     = decodedUserID.substring(lastColon + 1);

//streamidFULL = urlStr.substring(lastSlash + 1);

	//this.log.info "streamid[$streamid] - streamidFULL[$streamidFULL]";

	testProject.setPropertyValue("NODEUSERID",userid);
	//testCase.setPropertyValue("streamhandleFULL",streamidFULL);
} else {
	assert context.expand( '${#TestCase#httpLocation}') == "";
}

//Content-Type
//assert context.expand( '${#TestCase#httpContentType}') == expectHTTPcontenttype;

//XML body should be null test
if (XMLbodynull) {

	assert XMLbody == "";
}

if (XMLbody != "" &amp;&amp; processXMLFlag == true) {
	def myXML = new XmlSlurper().parseText(XMLbody);
  
	if (errorRespType != "SUCCESS" ) {
		// Verify response sizes...
		assert myXML.Error.size() == 1;
		assert myXML.Error.Reason.size() == 1;
		assert myXML.Error.OriginalRequest.size() == 1;
		assert myXML.Error.ErrorLink.size() == 1;
		
		// ErrorCode
		this.log.info "ErrorCode Received [" + myXML.Error.@ErrorID.toString() + "] Exp[$errorID]";
		assert myXML.Error.@ErrorID.toString() == errorID;
	
		// ErrorReason
		this.log.info "ErrorReason Received [" + myXML.Error.Reason.toString() + "] Exp[$errorReason]";
		assert myXML.Error.Reason.toString() == errorReason;

		// ErrorLink
		assert myXML.Error.ErrorLink.toString() == errorLink;
	} 
	
 } 

</script></con:config></con:testStep><con:properties><con:property><con:name>ResponseType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>XMLbody</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>httpStatus</con:name><con:value>HTTP/1.1 201 Created</con:value></con:property><con:property><con:name>httpConnect</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">close</con:value></con:property><con:property><con:name>httpContentType</con:name><con:value>application/xml; charset=UTF-8</con:value></con:property><con:property><con:name>httpContentLength</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0</con:value></con:property><con:property><con:name>httpLocation</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://qa1.q.uvvu.com/rest/2015/02/Account/urn:dece:accountid:org:dece:16E5FF98294828B5E05305991F0A947D/User/urn:dece:userid:org:dece:16E5FF98295428B5E05305991F0A947D</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">C:\Code_Repo\API\uv-coordinator-api-regression\Certs\QALP1/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>9339b89b-edaa-4754-993d-48c0b757afdb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TC_DECE_01000 - STS" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Establish Test Case Properties"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def userName = context.expand( '${#Project#UserName}' );
def node_OID = context.expand( '${#Project#nodeIdRTL}' )

testCase.setPropertyValue("tokentype",testProject.getPropertyValue("urntokenType_userpassword"));
testCase.setPropertyValue("username",userName);

//testCase.setPropertyValue("username","shikha_user_add_user1");
testCase.setPropertyValue("password","Password1");
testCase.setPropertyValue("nodeid",node_OID);
testCase.setPropertyValue("expectErrType","SUCCESS");
testCase.setPropertyValue("assert",null);
testCase.setPropertyValue("assertXML",null);
testCase.setPropertyValue("assertIdL",null);

testProject.setPropertyValue("thirdPartyAudienceList","urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdRTLCS")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdAccportalCS")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdAccportal")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdDLASP")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdDLASPCS")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdLLASP")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdLLASPCS")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdDSP")+";urn:dece:org:org:dece:"+testProject.getPropertyValue("nodeIdDSPCS")+";")
testProject.setPropertyValue("audienceList",testProject.getPropertyValue("thirdPartyAudienceList"));</script></con:config></con:testStep><con:testStep type="groovy" name="Call_STS_POST"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue("QC_ResultExportLevel", "off")

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("STS API")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

def assert1 = context.expand( '${#TestCase#assert}' );


testProject.setPropertyValue( "SAML", "SAML2 Assertion="+assert1);


</script></con:config></con:testStep><con:testStep type="groovy" name="Set pem"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import soapUIUtils.soapUIUtils;
import com.eviware.soapui.impl.wsdl.teststeps.RestTestRequestStep;
import com.eviware.soapui.support.types.StringToStringMap 


def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

testCase.setPropertyValue("keyStorePath",null);

def myTC = testProject.getTestSuiteByName("Common Test Steps").getTestCaseByName("Set Pem")
myTC.setPropertyValue("nodeId",testCase.getPropertyValue("nodeid"));

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());
def runnerTC = myTC.run( null , false );
assert runnerTC.status == Status.FINISHED;

RestTestRequestStep testStep = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_TOU");
RestTestRequestStep testStep2 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_UserLinkConsent");
RestTestRequestStep testStep3 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_ManageAccountestCaseonsent");
RestTestRequestStep testStep4 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_ManageUserConsent");
RestTestRequestStep testStep5 = testCase.getTestStepByName("PolicyCreateSinglePolicyPost_UserDataUsageConsent");

def keyStorePath = testCase.getPropertyValue("keyStorePath");
this.log.info "testStep [$testStep]";
this.log.info "keyStorePathStep [$keyStorePath]";

soapUtils = new soapUIUtils(log);
soapUtils.setStepSSLSettingsKeyStore(testStep, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep2, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep3, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep4, keyStorePath);
soapUtils.setStepSSLSettingsKeyStore(testStep5, keyStorePath);

</script></con:config></con:testStep><con:testStep type="groovy" name="Call STS Get"><con:settings/><con:config><script>import com.eviware.soapui.model.testsuite.TestRunner.Status
import dbUtils.dbAccount;
import dbUtils.dbUser;

def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

//testProject.setPropertyValue("QC_ResultExportLevel", "off")

def myTC = testProject.getTestSuiteByName("TestSuite Utility Test Cases").getTestCaseByName("Generic STS GET")

myTC.setPropertyValue("tName",testCase.getName());
myTC.setPropertyValue("sName",testSuite.getName());

def runnerTC = myTC.run( null , false );

assert runnerTC.status == Status.FINISHED;

def assert1 = context.expand( '${#TestCase#assert}' );


testProject.setPropertyValue( "SAML", "SAML2 Assertion="+assert1);


testProject.setPropertyValue("assertXML",testCase.getPropertyValue("assertXML"));
testProject.setPropertyValue("assert",testCase.getPropertyValue("assert"));
testProject.setPropertyValue("assertId",testCase.getPropertyValue("assertId"));
testProject.setPropertyValue("assertionAccountId",testCase.getPropertyValue("assertionAccountId"));
testProject.setPropertyValue("assertionUserId",testCase.getPropertyValue("assertionUserId"));
testProject.setPropertyValue("assertionAccountIdFULL",testCase.getPropertyValue("assertionAccountIdFULL"));
testProject.setPropertyValue("assertionUserIdFULL",testCase.getPropertyValue("assertionUserIdFULL"));

myAccount = new dbAccount(log,testProject.getPropertyValue("targetSystem"));
accountID = myAccount.accountGetfromNodeAccountId(testProject.getPropertyValue("assertionAccountId"))
rightsLockerID = myAccount.accountGetRightsLockerId(accountID).toString();
log.info "accountID==="+accountID;
log.info "rightsLockerID==="+rightsLockerID;

myUser = new dbUser(log,testProject.getPropertyValue("targetSystem"));
userID = myUser.userGetfromNodeUserId(testProject.getPropertyValue("assertionUserId"))
log.info "userID==="+userID;

testProject.setPropertyValue("accountOID",accountID);
testProject.setPropertyValue("rightsLockerID",rightsLockerID);
testProject.setPropertyValue("userOID",userID);
</script></con:config></con:testStep><con:testStep type="groovy" name="Encoding_URL_Properties"><con:settings/><con:config><script>def testCase = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def encodedAssertionAccountIdFULL = testProject.getPropertyValue("assertionAccountIdFULL");
log.info "URN Should be Encoded:"+testProject.getPropertyValue("encodeURN").toUpperCase()
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedAssertionAccountIdFULL",URLEncoder.encode(encodedAssertionAccountIdFULL,"UTF-8"));
else	
	testProject.setPropertyValue("encodedAssertionAccountIdFULL",encodedAssertionAccountIdFULL);

def encodedAssertionUserIdFULL = testProject.getPropertyValue("assertionUserIdFULL");
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedAssertionUserIdFULL",URLEncoder.encode(encodedAssertionUserIdFULL,"UTF-8"));
else
	testProject.setPropertyValue("encodedAssertionUserIdFULL",encodedAssertionUserIdFULL);


def encodedTermsofUse = "urn:dece:type:policy:TermsOfUse";
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedTermsofUse",URLEncoder.encode(encodedTermsofUse,"UTF-8"));
else
	testProject.setPropertyValue("encodedTermsofUse",encodedTermsofUse);
	
def encodedULC = "urn:dece:type:policy:UserLinkConsent";
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedULC",URLEncoder.encode(encodedULC,"UTF-8"));
else
	testProject.setPropertyValue("encodedULC",encodedULC);
	
def encodedMUC = "urn:dece:type:policy:ManageUserConsent";
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedMUC",URLEncoder.encode(encodedMUC,"UTF-8"));
else
	testProject.setPropertyValue("encodedMUC",encodedMUC);
	
def encodedMAC = "urn:dece:type:policy:ManageAccountConsent";
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedMAC",URLEncoder.encode(encodedMAC,"UTF-8"));
else
	testProject.setPropertyValue("encodedMAC",encodedMAC);
	
def encodedUDUC = "urn:dece:type:policy:UserDataUsageConsent";
if (testProject.getPropertyValue("encodeURN").toUpperCase() == "YES")
	testProject.setPropertyValue("encodedUDUC",URLEncoder.encode(encodedUDUC,"UTF-8"));
else
	testProject.setPropertyValue("encodedUDUC",encodedUDUC);</script></con:config></con:testStep><con:testStep type="groovy" name="Set TOU Version"><con:settings/><con:config><script>def testCase  = testRunner.getTestCase();
def testSuite = testCase.getTestSuite();
def testProject = testSuite.getProject();

def tOUUrl;
def dBHost = context.expand( '${#Project#targetSystem}' )
def targetPort = context.expand( '${#Project#targetPort}' )
def versionMinor = context.expand( '${#Project#versionMinor}' )

String country = context.expand( '${#TestSuite#country}' );

def a = new dbUtils.dbUtils(log,dBHost);
String sql = """select consent_version from (select
             consent_version            
             from
             CONSENT
             where
             CONSENT_URN = 'urn:dece:type:policy:TermsOfUse'
             and
             COUNTRY = '""" + country + """'
             order by
             consent_version desc)
             where rownum &lt; 2""";

log.info sql;

results = a.SelectFromDB(sql,dBHost);

assert results.length() > 0;
log.info "results" + results;

def myXML = new XmlSlurper().parseText(results);   

log.info "consent_Version==="+myXML.ResultSet.Row.CONSENT_VERSION.text();
                
def consent_Version = myXML.ResultSet.Row.CONSENT_VERSION.text();

if (versionMinor == "06") 
	tOUUrl = context.expand( '${#Project#TOUUrl}')
else
	tOUUrl = context.expand( '${#Project#TOUUrl}')	

testProject.setPropertyValue("TOUVersion",'https://'+ tOUUrl + '/Consent/Text/' + country + '/urn:dece:type:policy:TermsOfUse:' + consent_Version + '/html');
log.info "TOU_Resource==="+testProject.getPropertyValue("TOUVersion");</script></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_TOU"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_TOU" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="RET_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:TermsOfUse</dece:PolicyClass>
      <dece:Resource>${#Project#TOUVersion}</dece:Resource>
      <dece:RequestingEntity>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERIDSAU}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedTermsofUse}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:TermsOfUse"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_UserLinkConsent"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_UserLinkConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="RET_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:UserLinkConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#TestCase#nodeid}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedULC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_ManageAccountConsent" disabled="true"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_ManageAccountConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="222259_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting></con:settings><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" xmlns:dece="${#Project#coordinatorSchema}" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="http://www.movielabs.com/md" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:ManageAccountConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:accountid:org:dece:${#Project#assertionAccountId}</dece:Resource>
      <!--dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:RequestingEntity>urn:dece:org:org:dece:500501</dece:RequestingEntity>
      <dece:RequestingEntity>urn:dece:org:org:dece:500502</dece:RequestingEntity-->  
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
         <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
            <dece:Value>urn:dece:type:status:active</dece:Value>
         </dece:Current>
      </dece:ResourceStatus>
   </dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedMAC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:ManageAccountConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_ManageUserConsent"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_ManageUserConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="RET_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">false</con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:ManageUserConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#TestCase#nodeid}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedMUC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="PolicyCreateSinglePolicyPost_UserDataUsageConsent" disabled="true"><con:settings/><con:config service="DECE Policy PolicyCreate" resourcePath="/rest/${#Project#versionMajor}/${#Project#versionMinor}/Account/{ACCT}/User/{USER}/Policy/{POLICYCLASS}" methodName="POST" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="PolicyCreateSinglePolicyPost_UserDataUsageConsent" mediaType="application/xml" postQueryString="false" id="5f368efb-3bbc-4d75-bfcc-4bac66be2c45" sslKeystore="RET_concat.pem" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#Project#SAML}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#Provision_HostName}</con:endpoint><con:request><![CDATA[<dece:PolicyList xsi:schemaLocation="http://www.decellc.org/schema dece.xsd" 
xmlns:dece="${#Project#coordinatorSchema}" 
xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
xmlns:md="http://www.movielabs.com/md" 
xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<dece:Policy>
      <dece:PolicyClass>urn:dece:type:policy:UserDataUsageConsent</dece:PolicyClass>
      <dece:Resource>urn:dece:userid:org:dece:${#Project#assertionUserId}</dece:Resource>
      <dece:RequestingEntity>urn:dece:org:org:dece:${#Project#Node_OID}</dece:RequestingEntity>
      <dece:PolicyAuthority>urn:dece:org:org:dece:coordinator</dece:PolicyAuthority>
      <dece:ResourceStatus>
      <dece:Current CreatedBy="urn:dece:userid:org:dece:${#Project#assertionUserId}">
      <dece:Value>urn:dece:type:status:active</dece:Value>
      </dece:Current>
      </dece:ResourceStatus>
</dece:Policy>
</dece:PolicyList>]]></con:request><con:assertion type="GroovyScriptAssertion" disabled="true" id="a69cc818-ad79-42a0-926b-5713106b64f9"><con:configuration><scriptText>def hList = messageExchange.getResponseHeaders()
def hitFlag = 0
for (n in hList) {
	if (n.value == "HTTP/1.1 201 Created") {
		hitFlag = 1
	}
}
assert hitFlag
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="NodeUserId" value="urn:dece:userid:org:dece:${#Project#NODEUSERID}"/>
  <con:entry key="ACCT" value="${#Project#encodedAssertionAccountIdFULL}"/>
  <con:entry key="POLICYCLASS" value="${#Project#encodedUDUC}"/>
  <con:entry key="PolicyClass" value="urn:dece:type:policy:UserLinkConsent"/>
  <con:entry key="NodeAccountId" value="urn:dece:accountid:org:dece:${#Project#NODEACCID}"/>
  <con:entry key="USER" value="${#Project#encodedAssertionUserIdFULL}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>accountoid</con:name><con:value>B49E51860A52F2EFE0401F0A05996433</con:value></con:property><con:property><con:name>assert</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertId</con:name><con:value>_719b7a62-ceaf-4fdf-b465-24e497da9183</con:value></con:property><con:property><con:name>assertIdL</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertionAccountId</con:name><con:value>17B1224324774230E05305991F0A8728</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:17B1224324774230E05305991F0A8728</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value>17B1224324784230E05305991F0A8728</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:17B1224324784230E05305991F0A8728</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_719b7a62-ceaf-4fdf-b465-24e497da9183</con:value></con:property><con:property><con:name>assertPackaged</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertRaw</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>expectErrType</con:name><con:value>SUCCESS</con:value></con:property><con:property><con:name>nodeaccountid</con:name><con:value>B49E51860A4DF2EFE0401F0A05996433</con:value></con:property><con:property><con:name>nodeid</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodeuserid</con:name><con:value>B49E54F2DDBFC209E0401F0A059966E1</con:value></con:property><con:property><con:name>password</con:name><con:value>Password1</con:value></con:property><con:property><con:name>tokentype</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>uname</con:name><con:value>shikha_user_create_accp_test_20110610_11508</con:value></con:property><con:property><con:name>username</con:name><con:value>RLDGbyList_firstuser20150604_1433421966819</con:value></con:property><con:property><con:name>useroid</con:name><con:value>B49E54F2DDC4C209E0401F0A059966E1</con:value></con:property><con:property><con:name>keyStorePath</con:name><con:value>C:\UltraVioletGit\uv-coordinator-api-regression\Certs\QALP1PC/RET_concat.pem</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ddbb4895-c469-4d7a-b677-0ab8bcbd6c02</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>TCaseName</con:name><con:value>TC_DECE_10001_RightsLockerDataGet_RTL_FUNC_byDownloadQuery_with_ValidData</con:value></con:property><con:property><con:name>TSuiteName</con:name><con:value>R1_RightsLockerDataGet_byDownLoad_Query_RTL_TestCases</con:value></con:property><con:property><con:name>country</con:name><con:value>US</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:requirements/>
  <con:properties>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  <con:property><con:name>AccountDisplayName</con:name><con:value>accname_20150507_063837</con:value></con:property><con:property><con:name>accountoid</con:name><con:value>157E6F9FC6F64D2FE05305991F0A9450</con:value></con:property><con:property><con:name>alid_bkp</con:name><con:value>urn:dece:alid:file:SARVJEET_CID_DONT_TOUCH_4.txt</con:value></con:property><con:property><con:name>Provision_HostName</con:name><con:value>https://qa1.p.uvvu.com</con:value></con:property><con:property><con:name>targetPort</con:name><con:value>443</con:value></con:property><con:property><con:name>assert</con:name><con:value>nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==</con:value></con:property><con:property><con:name>assertId</con:name><con:value>_f56a89de-d53d-4373-b9e5-45710f9fb0dc</con:value></con:property><con:property><con:name>assertionAccountId</con:name><con:value>157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>assertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>assertionUserId</con:name><con:value>157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>assertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>assertionUUID</con:name><con:value>_dcf8230d-2b75-486d-b880-c5916c24dfd9</con:value></con:property><con:property><con:name>assertXML</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>cid_bkp</con:name><con:value>urn:dece:cid:file:SARVJEET_CID_DONT_TOUCH_4.txt</con:value></con:property><con:property><con:name>DBPassword</con:name><con:value>lp1db_23</con:value></con:property><con:property><con:name>DBrightstokenid</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>DBUsername</con:name><con:value>DEQA1_APP</con:value></con:property><con:property><con:name>JDBCConnStr</con:name><con:value>jdbc:oracle:thin:@stdeqp-clu1-scan.va.neustar.com:2115/stdecqpdb_stdecqa.neustar.com</con:value></con:property><con:property><con:name>JDBCDriver</con:name><con:value>oracle.jdbc.OracleDriver</con:value></con:property><con:property><con:name>NODEACCID</con:name><con:value>157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>NODEUSERID</con:name><con:value>157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>Node_OID</con:name><con:value>222259</con:value></con:property><con:property><con:name>ParamRTCreateReq</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">          <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                       <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="${#TestCase#PPContentProfile2}">                                          <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                          <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                    <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                        <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                              <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCreate_Only_Two_profile</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCreate_Req_Bkp</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"   xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	 <ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}">  			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		 </ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	 <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1} </ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCreate_Req_Mandatory</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"   xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}"  ContentID="${#TestCase#ContentID}">       <ns4:RightsProfiles> 		<ns4:PurchaseProfile  MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile  MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 	</ns4:RightsProfiles>               <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>                 <ns4:PurchaseInfo>                                  <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                                  <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                                  <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                                  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                                  <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>                 </ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCreate_Req_Mandatory_With_Empty_LicAppBaseLoc</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	<ns4:RightsProfiles /> 	<ns4:LicenseAcqBaseLoc></ns4:LicenseAcqBaseLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData> ]]></con:value></con:property><con:property><con:name>ParamRTCreate_with_FFMainfestLocProfile1</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	 xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	 <ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}">  			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		 </ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	 <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	 <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	 <ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc>  	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>  		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		 <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCreate_with_FFWebLocProfile1</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	 xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	 <ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}">  			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		 </ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	 <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	 <ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc>  	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc>  	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>  		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		 <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCReq</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"    xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">          <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                       <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile   MediaProfile="${#TestCase#PPContentProfile2}">                                          <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                          <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                            </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>       <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  <ns4:PurchaseInfo>                        <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                    <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                        <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                        <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                              <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>             <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>   ]]></con:value></con:property><con:property><con:name>ParamRTCReqBKP</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"   xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">         <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                      <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile  MediaProfile="${#TestCase#PPContentProfile2}">                                         <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                         <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                           </ns4:PurchaseProfile>                                                                </ns4:RightsProfiles>      <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>         <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">                               <ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                          <ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location>                 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type">                                <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location>                 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:PurchaseInfo>                       <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                   <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                       <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                       <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                             <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>            <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCReqWithDMRR</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 			<ns4:PurchaseProfile MediaProfile= "${#TestCase#PPContentProfile1}"> 			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="${#TestCase#PPDiscreteMediaProfile1}"> ${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 				<ns4:PurchaseProfile  MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod= "${#TestCase#PPDiscreteMediaProfile1}">${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod= "${#TestCase#PPDiscreteMediaProfile1}">${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 	 </ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx} 		</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount} 		</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTCReqWithRS</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"   xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	 <ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile ContentProfile= "${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1} </ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile ContentProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:ResourceStatus> 		<ns4:Current  CreatedBy="${#TestCase#RSCreatedby}" CreationDate="${#TestCase#RSCreationDate}"> 			<ns4:Value>${#TestCase#RSValue}</ns4:Value> 			 <ns4:Description>${#TestCase#RSDescription}</ns4:Description> 		</ns4:Current> 	</ns4:ResourceStatus> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} </ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location> ${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	 <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2} </ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile ="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTCReq_Mandatory</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 	<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} </ns4:LicenseAcqBaseLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx} 		</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} 		</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTCReq_With_No_HD_Media</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	 xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	 <ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}">  			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		 </ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx} 		</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} 		</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTC_Without_PD_Profile</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		</ns4:RightsProfiles> 		<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 			xsi:type="ns4:ResourceLocation-type"> 			<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 			<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 		</ns4:FulfillmentWebLoc> 		<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 			xsi:type="ns4:ResourceLocation-type"> 			<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 			<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 		</ns4:FulfillmentWebLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 			xsi:type="ns4:ResourceLocation-type"> 			<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 			<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 		</ns4:FulfillmentManifestLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 			xsi:type="ns4:ResourceLocation-type"> 			<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 			<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 		</ns4:FulfillmentManifestLoc> 		<ns4:PurchaseInfo> 			<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 			<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 			<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 			<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 			<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 		</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTC_withStreamWebLoc</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"  xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile3}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	</ns4:StreamWebLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>ParamRTUReq</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4=  "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>  ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			  <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>  ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReqWithDMRR</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}">  			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="${#TestCase#PPDiscreteMediaProfile1}"> ${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile= "${#TestCase#PPContentProfile2}"> 			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="${#TestCase#PPDiscreteMediaProfile1}"> ${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> </ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReqWithDMRR_WithoutHD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 			<ns4:PurchaseProfile MediaProfile= "${#TestCase#PPContentProfile2}"> 			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="${#TestCase#PPDiscreteMediaProfile1}"> ${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReqWithDMRR_WithoutSD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID= "urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance ">  	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}">  			<ns4:DiscreteMediaRightsRemaining 				FulfillmentMethod="${#TestCase#PPDiscreteMediaProfile1}"> ${#TestCase#PPDiscreteMediaRemaining1} 			</ns4:DiscreteMediaRightsRemaining> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1} </ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReqWithRS</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt"  xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 			</ns4:RightsProfiles> 	<ns4:ResourceStatus> 		<ns4:Current CreatedBy="${#TestCase#RSCreatedby}" CreationDate= "${#TestCase#RSCreationDate}"> 			<ns4:Value>${#TestCase#RSValue}</ns4:Value> 			<ns4:Description>${#TestCase#RSDescription}</ns4:Description>  		</ns4:Current> 	</ns4:ResourceStatus> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_WithOnly_PD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile3}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx} 		</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} 		</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 		<ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_WithOut_FF_ManiFest_Loc</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 			</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID} </ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} </ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime} </ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_WithOut_FF_Web_Loc</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 			</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location>  		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_With_One_FF_ManiFest_Loc</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 			</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_With_One_FF_Manifest_Loc_Profile2</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile3}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_With_One_FF_Web_Loc</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_With_One_FF_Web_Loc_Profile2</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime> ${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTU_DifferentPIDetails</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID> ${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount> ${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>urn:dece:userid:org:dece:CBD9A5D91D88EB67E0401F0A2222590E00</ns4:PurchaseUser>  		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID} </ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTU_Full</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 			</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> <ns4:TransactionType> ${#TestCase#PITransactionType}</ns4:TransactionType>	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTU_withDuplicateStreamWebLoc</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location>  		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	</ns4:StreamWebLoc> 		<ns4:StreamWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	</ns4:StreamWebLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID} </ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} </ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime} </ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTU_Without_HD_Profile</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema   file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4=  "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language=  "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	  </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>  ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		  <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			  <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 		<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 		  <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	  </ns4:FulfillmentManifestLoc>	 <ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc>  	<ns4:StreamWebLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type"> 	 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		  		<ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	 	</ns4:StreamWebLoc> <ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>  ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		  <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	 </ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTU_Without_PD_Profile</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 		<ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTU_withStreamWebLoc</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location>  		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:StreamWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#StreamWebLocLocation1}</ns4:Location> 		 <ns4:Preference>${#TestCase#StreamWebLocPreference1}</ns4:Preference> 	</ns4:StreamWebLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID} </ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} </ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime} </ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>PraramRTCReq_Without_One_Purchase_Profile</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" 	xsi:schemaLocation="http://www.decellc.org/schema file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" 	ContentID="${#TestCase#ContentID}" xmlns:ns4="${#Project#coordinatorSchema}" 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	</ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		<ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo> 	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID> </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>ParamRTUReq_PITransType</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile1}"> 			<ns4:CanDownload> ${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream> 		</ns4:PurchaseProfile> 		 <ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}"> 			<ns4:CanDownload>${#TestCase#PPCanDownLoad2}</ns4:CanDownload> 			 <ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		</ns4:PurchaseProfile> 			</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> <ns4:TransactionType> ${#TestCase#PITransactionType}</ns4:TransactionType>	</ns4:PurchaseInfo> <ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>  </ns4:RightsTokenFull>]]></con:value></con:property><con:property><con:name>Request</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#" 	xmlns:ns2="http://www.movielabs.com/md" xmlns:ns3="http://www.w3.org/2000/09/xmldsig#" 	 xmlns:ns4="${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 	xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd" 	ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}"> 	 <ns4:SoldAs> 		<ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName} 		</ns4:DisplayName> 		<ns4:ContentID> ${#TestCase#SoldAsContentID}</ns4:ContentID> 	</ns4:SoldAs> 	<ns4:RightsProfiles> 		<ns4:PurchaseProfile MediaProfile="${#TestCase#PPContentProfile2}">  			<ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload> 			<ns4:CanStream>${#TestCase#PPCanStream2}</ns4:CanStream> 		 </ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	 <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc} 	</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		 xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference1} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type" > 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" 		xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx} 		</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount} 		</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>RightsLockerID</con:name><con:value>157E6F9FC6FD4D2FE05305991F0A9450</con:value></con:property><con:property><con:name>SAML</con:name><con:value>SAML2 Assertion=nVZrb+I4FP0rKP04CkkIgRIVJJ4zCNpSYKHbLyvjXBJPEyfEDlB+/dgBUkKhy66EhHxzfe65Dx/7gaHAL9lNxiDmJKSFbeBTZqfWupLE1A4RI8ymKABmc2xPmo9Du1TUbXTcohT6nbryz9KqoPuaA6pjmY5aNqumuqiBpZatqqEva8uF7mDhylgCfco4oryulHTDUnXxq04N09Yrtm4WTcN4UwoziJnAFi5FXTmQ2rK64nEe2Zq22WyKG7MYxq5W0nVDe30cTrAHAVIaD/uM0kBx4+CPiw5g8H1cxGGgPWg5nweH2RPiUsSTGA6xnGuxdE2vacLHYcS9U7K94PTpMkyXbURDSjDyyQ7J+jwC90Kn0PTdMCbcC64mYegSWIUtVrFRpneKlqd2I1COYcyQyjxkHLDGsIQYKIbCX+N+Xbm7rWvp1mmMKFuGccDyy//GB+ga/DACR2XHtA7Ubge8UKnGA2C7T7GfMLKGJzmsEcLADt0EfDtUYRTDkmyHhIkB3TLJTjuld7bcV6NDXGD8/zTopDl7kBnyE2i8tFr349mvOddb3t9BHMF9Tdv13tozI6ynBE6dU0PW2v3ybCizIdrvaG6f3qfDgTeqRvOqtatCdafrHTYw6cvA6Ays3o+h/2hWBpaLNy32e9aLQ2uqV1+qG2MycGDR77rDp4lvTObtsTx3Zmf6GPxc0spo3g1W761fMNW91bs5QaONtxiNtz5Mx2jQ+qjg6luzaUTP80WXvL73ul3Lqr3Ofwzc0k+t/RKxl/lstXraro358y6a7zS3nqVzwj9vO575SbL4DZgfl3IM+p1CT3QJ8e/FTFqIoy5TVzuS4sM4UK405C6pHXYi5I44tujhfm1Y1W6lV+u1q7pR7pR6Xd0ydatWM3p6s1a29KPI7FmcUWyHdElkLCm5+7H5niAObAbUgVhdh4moOFO+Qewgjgp9OhaHIKQMpqGQZ4Ovan5piTyDGyWD4bXrfnjROkFClJ9C/kyf4+aSQ5wX5UpOlMeASURAKrccbCYmm3FRjBVaJ9w3imtUpJAIbY+lzNql8r2lMRJEPkiqWhA6iQ/FyIvS0mhs/19SEWapddydpsftamLn3441ED4OkQ5M5tIC0Uf4crtYtnVM5HrCtdOEj/DNxCHyZImC8pjgPZP8p885kQOSDYnI6Eg58zw35FC184SyQM6a4GzSs/tayLg4+I1jO1bIKK6KyXqdpB0ol00tFvCaTFHTS9oEcCKk6WMavgPVMhTtpnsgI34WPLPnKSbcoxOOOARiYgrp8oaLfwJMXvx9MevbW18VuZCidBy2/JKt7YtHi2T87bsG21j6CfNI/G3C2Pns2AWskzgiT3Hvc0JduZJ3wMeVucChgCVCvcL4FPwSwKXgeWNW5IwLFwO1SDhc/1KQslRXEMZhQnm/o6SGU6lMefKPCOxPpy8wqRpnzzPy7+8zlaQjgEE86hhJ8eUta8sjQN0TuT0Evai4lZ71neLm2TW+mL9aTup0PuONPw==</con:value></con:property><con:property><con:name>coordinatorSchema</con:name><con:value>http://www.decellc.org/schema/2015/03/coordinator</con:value></con:property><con:property><con:name>targetSystem</con:name><con:value>LP1</con:value></con:property><con:property><con:name>targetURL</con:name><con:value>qa1.p.uvvu.com</con:value></con:property><con:property><con:name>urnNode</con:name><con:value>urn:dece:org:org:dece:</con:value></con:property><con:property><con:name>urnRating</con:name><con:value>urn:dece:type:rating:</con:value></con:property><con:property><con:name>urntokenType_userpassword</con:name><con:value>urn:dece:type:tokentype:usernamepassword</con:value></con:property><con:property><con:name>UserName</con:name><con:value>RLDGbyList_firstuser20150507_1431004119648</con:value></con:property><con:property><con:name>useroid</con:name><con:value>157E6F9FC7024D2FE05305991F0A9450</con:value></con:property><con:property><con:name>versionMajor</con:name><con:value>2015</con:value></con:property><con:property><con:name>versionMinor</con:name><con:value>02</con:value></con:property><con:property><con:name>encodedNodeAccID</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>encodedAssertionAccountIdFULL</con:name><con:value>urn:dece:accountid:org:dece:157E6F9FC6F54D2FE05305991F0A9450</con:value></con:property><con:property><con:name>encodedAssertionUserIdFULL</con:name><con:value>urn:dece:userid:org:dece:157E6F9FC7014D2FE05305991F0A9450</con:value></con:property><con:property><con:name>encodedTermsofUse</con:name><con:value>urn:dece:type:policy:TermsOfUse</con:value></con:property><con:property><con:name>encodedULC</con:name><con:value>urn:dece:type:policy:UserLinkConsent</con:value></con:property><con:property><con:name>encodedMUC</con:name><con:value>urn:dece:type:policy:ManageUserConsent</con:value></con:property><con:property><con:name>encodedMAC</con:name><con:value>urn:dece:type:policy:ManageAccountConsent</con:value></con:property><con:property><con:name>alid</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property><con:property><con:name>cid</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>PORTALCS_NODE_OID</con:name><con:value>DABD1A709AAD9052E0401F0A2222596E9F</con:value></con:property><con:property><con:name>audienceList</con:name><con:value/></con:property><con:property><con:name>encodedUDUC</con:name><con:value>urn:dece:type:policy:UserDataUsageConsent</con:value></con:property><con:property><con:name>NodeID</con:name><con:value>222259</con:value></con:property><con:property><con:name>ETag</con:name><con:value>"157E891FD7B724FBE05307991F0A4740:6B653DD2--gzip"</con:value></con:property><con:property><con:name>thirdPartyAudienceList</con:name><con:value>urn:dece:org:org:dece:ISC_RETCS;urn:dece:org:org:dece:ISC_ACCESSCS;urn:dece:org:org:dece:ACCESS;urn:dece:org:org:dece:ISC_DLASP;urn:dece:org:org:dece:ISC_DLASPCS;urn:dece:org:org:dece:ISC_LLASP;urn:dece:org:org:dece:ISC_LLASPCS;urn:dece:org:org:dece:ISC_DSP;urn:dece:org:org:dece:ISC_DSPCS;urn:dece:org:org:dece:test-node-content-provider;urn:dece:org:org:dece:CON_CS_1;</con:value></con:property><con:property><con:name>nodeIdAccportalCS</con:name><con:value>ACCESCS</con:value></con:property><con:property><con:name>nodeIdACCESS</con:name><con:value>ACCESS</con:value></con:property><con:property><con:name>nodeIdCON</con:name><con:value>CON</con:value></con:property><con:property><con:name>nodeIdCONCS</con:name><con:value>CON_CS_1</con:value></con:property><con:property><con:name>nodeIdCOO</con:name><con:value>COO</con:value></con:property><con:property><con:name>nodeIdCoordCS</con:name><con:value>coord:cs</con:value></con:property><con:property><con:name>nodeIdDECE</con:name><con:value>DECE</con:value></con:property><con:property><con:name>nodeIdDECECS</con:name><con:value>dece:cs</con:value></con:property><con:property><con:name>nodeIdDEV</con:name><con:value>DEV</con:value></con:property><con:property><con:name>nodeIdDEVCS</con:name><con:value>DEV_CS_1</con:value></con:property><con:property><con:name>nodeIdDLASP</con:name><con:value>DLASP</con:value></con:property><con:property><con:name>nodeIdDSPCS</con:name><con:value>DLASP_CS_1</con:value></con:property><con:property><con:name>nodeIdDSP</con:name><con:value>DSP</con:value></con:property><con:property><con:name>nodeIdDSPCS</con:name><con:value>DSP_CS_1</con:value></con:property><con:property><con:name>nodeIdPORTAL</con:name><con:value>iscportal1</con:value></con:property><con:property><con:name>nodeIdPortalCS</con:name><con:value>iscportalcs1</con:value></con:property><con:property><con:name>nodeIdLLASP</con:name><con:value>LLASP</con:value></con:property><con:property><con:name>nodeIdLLASPCS</con:name><con:value>LLASP_CS_1</con:value></con:property><con:property><con:name>nodeIdRTL</con:name><con:value>RET</con:value></con:property><con:property><con:name>nodeIdRTLCS</con:name><con:value>RET_CS_1</con:value></con:property><con:property><con:name>encodeURN</con:name><con:value>NO</con:value></con:property><con:property><con:name>Device_HostName</con:name><con:value>https://qa.d.uvvu.com</con:value></con:property><con:property><con:name>certsPath_Windows</con:name><con:value>../../Certs/QALP1/</con:value></con:property><con:property><con:name>assertXML_2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>assert_2</con:name><con:value>nVZrb+I6EP0rKPuxCk5CAiUqSBTaXfqihba72y9XrjOAaWKntgNpf/21A2SB0l72SkjIk/GZMw8f+0TiJPbCjpQgFOWskicxk2FhbVmZYCHHksqQ4QRkqEg46lxfhV7VCfF6i1Xp91rWP1HTf4bIPbbB8Rq2P2427Oa4Drbr1Br1uusT5/lZu0qZQZ9JhZlqWZ7j+rbT1L971w/dWhjUqm7gPVmVRxBSY2uXqmOtSOWyZU2VSkOEFotFdVGrcjFBnuO46Nf11YhMIcFW+2SZURFItFf+pBoBgTgmVcITdIK2fE4iGY7ohGGVCVjFij6L5SCnibRPJOnkm1XuhajPxrxYdjHjjBIc03ds6nMNasqjSieecEHVNPk0CdcxwDbkxCauz75ZaJvagUBbDIXEtpxid4U1hDEIYAQqD8N+y/p2WNeKrfcCMznmIpHby7/jA2wOMU8hsuU6rRW1wwH3VKp9AiTsMxJnks7hxgxrignIVTeBHA5VuRUwpvkVlXpAc2nYoU16O8tlNXp0AlL9nwZtNGcJ8ojjDNruLc9jcMmPyxc6u3V9/uYkOUQ3zsOkVRDYdC4MZWuXy52hLIdoueMl6aq6M/TF1V066dZk+vbu6qk9zu6n7ObycjTpXOfng7Pp+KH79BPdNH70e7dHg3q3Nw5635u/HpH4fXP2cvEjIuPZvJe8/8bR7DRAoyfnIhs5l0eDFB5pvJg1rmdPRyOk8uHpPQt+ibt44N96A+48Zu/4+/nDhagHxx67+J5z3Pv5Eh9RMYwv8uQo6acX3eyuHstWmc4G/23b+syPsucZELVemjHo9yrnuktYfS1mxkIje1y4hqkRH6mAKattdhntCDMtdzQKdQ+Xa8fr1BpOvdfpnh/XgmP/zAlqTtBsuudOx3VP/bXILFnsUOxyNqYmlpHc5dh8TZAkoQQWgbDnPNNKJ60vEHtY4UqfDfUh4EzCPdfy7L5kCzELaplPGsJ9l6lUrxAlgZbvG64GbCA6YwViW5MbW5o8BEJTCka4zVxLPdhS6Vq84nmmYrc6x1UGmZZ2YVQ29PzjAEmapDEYpijhURZDNZ2mRWWQXP57NiaysFJJUi4UjoksjgT6NMHdb+taaJ+IGgdpkjoF3U/Yc8v464w+ZB7svY3W8J0souaE6cIqQcmSyfanP/NiBqUcljI1d8283PCXALo2HyHQF/zQbmnKiNGcbsRfX+f6YtBS0l53+BVXX6vZfJ4VPW0YyRQaHpliIcdDIyCZFru3e/4CDJUo6KCbpSS+E7y0b1PM1JSNFFaQ6CGsFMsDnhIjkOYp0denJz/0nbIVUpdOQa722bqxfgYZxl++lEhIjJ823+q/BRfRn47twdqIo/PULwlF2cSszK3y9smAEK5hqdZDLjbB9wHsC75tLItcclF6oJ4zBZ9/qRiha1mYEJ4x1e9ZhWFTfAue6i2F8I/TB5hC38sHH/3vF59NixEgoJ+Jkhb45t4OzRFgkw0BXwXd1fCg6/YajcZp/fTM29Rw3znvlEXZYtf+YP5o2ajT7oy3/wU=</con:value></con:property><con:property><con:name>assertId_2</con:name><con:value>_d94bed18-e027-4f97-9f6e-10376614c0bb</con:value></con:property><con:property><con:name>assertionAccountId_2</con:name><con:value>02A35C1D777B6BE2E05305991F0A40FA</con:value></con:property><con:property><con:name>assertionUserId_2</con:name><con:value>02A3706DACF83584E05305991F0A11B4</con:value></con:property><con:property><con:name>assertionAccountIdFULL_2</con:name><con:value>urn:dece:accountid:org:dece:02A35C1D777B6BE2E05305991F0A40FA</con:value></con:property><con:property><con:name>assertionUserIdFULL_2</con:name><con:value>urn:dece:userid:org:dece:02A3706DACF83584E05305991F0A11B4</con:value></con:property><con:property><con:name>certsPath_Linux</con:name><con:value>../../Certs/QALP1/</con:value></con:property><con:property><con:name>TOUVersion</con:name><con:value>https://qa1.c.uvvu.com/Consent/Text/US/urn:dece:type:policy:TermsOfUse:20140811/html</con:value></con:property><con:property><con:name>TOUUrl_06</con:name><con:value>qa.uvvu.com</con:value></con:property><con:property><con:name>TOUUrl_07</con:name><con:value>qa.c.uvvu.com</con:value></con:property><con:property><con:name>Query_HostName</con:name><con:value>https://qa1.q.uvvu.com</con:value></con:property><con:property><con:name>TOUUrl</con:name><con:value>qa1.c.uvvu.com</con:value></con:property><con:property><con:name>nodeIdDLASPCS</con:name><con:value>DLASP_CS_1</con:value></con:property><con:property><con:name>nodeIdAccportal</con:name><con:value>ACCESS</con:value></con:property><con:property><con:name>ScriptLibrary</con:name><con:value>/opt/dece/soapUIProjects/scripts/scripts</con:value></con:property><con:property><con:name>scriptsPath_Windows</con:name><con:value>C:\Scripts</con:value></con:property><con:property><con:name>scriptsPath_Linux</con:name><con:value>/opt/dece/scripts</con:value></con:property><con:property><con:name>targerHostd</con:name><con:value>qa.d.uvvu.com</con:value></con:property><con:property><con:name>targetDeviceDomain</con:name><con:value>qa.d.uvvu.com</con:value></con:property><con:property><con:name>targetHost</con:name><con:value>qa1.p.uvvu.com</con:value></con:property><con:property><con:name>targetHostq</con:name><con:value>qa1.q.uvvu.com</con:value></con:property><con:property><con:name>targetPortq</con:name><con:value>443</con:value></con:property><con:property><con:name>targetUrlSHost</con:name><con:value>qa1.s.uvvu.com</con:value></con:property><con:property><con:name>URLEncode</con:name><con:value>NO</con:value></con:property><con:property><con:name>PrimaryEmail</con:name><con:value>testing@uvvutesting.biz</con:value></con:property><con:property><con:name>AlternateEmail</con:name><con:value>test_+126@uvvutesting.biz</con:value></con:property><con:property><con:name>coordinatorSchema_06</con:name><con:value>http://www.decellc.org/schema/2012/12/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_07</con:name><con:value>http://www.decellc.org/schema/2013/06/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_11</con:name><con:value>http://www.decellc.org/schema/2013/10/coordinator</con:value></con:property><con:property><con:name>coordinatorSchema_21</con:name><con:value>http://www.decellc.org/schema/2013/10/coordinator</con:value></con:property><con:property><con:name>nodeIdAccportal2</con:name><con:value>ACCESS_2</con:value></con:property><con:property><con:name>nodeIdAccportalCS2</con:name><con:value>ACCESSCS_2</con:value></con:property><con:property><con:name>nodeIdCON2</con:name><con:value>CON_2</con:value></con:property><con:property><con:name>nodeIdCONCS2</con:name><con:value>CON_CS_2</con:value></con:property><con:property><con:name>nodeIdCoo2</con:name><con:value>COO_2</con:value></con:property><con:property><con:name>nodeIdDEV2</con:name><con:value>DEV_2</con:value></con:property><con:property><con:name>nodeIdDEVCS2</con:name><con:value>DEV_CS_2</con:value></con:property><con:property><con:name>nodeIdDLASP2</con:name><con:value>DLASP_2</con:value></con:property><con:property><con:name>nodeIdDLASPCS2</con:name><con:value>DLASP_CS_2</con:value></con:property><con:property><con:name>nodeIdDSP2</con:name><con:value>DSP_2</con:value></con:property><con:property><con:name>nodeIdDSPCS2</con:name><con:value>DSP_CS_2</con:value></con:property><con:property><con:name>nodeIdLLASP2</con:name><con:value>LLASP_2</con:value></con:property><con:property><con:name>nodeIdLLASPCS2</con:name><con:value>LLASP_CS_2</con:value></con:property><con:property><con:name>nodeIdRTL2</con:name><con:value>RET_2</con:value></con:property><con:property><con:name>nodeIdRTLCS2</con:name><con:value>RET_CS_2</con:value></con:property><con:property><con:name>APID</con:name><con:value>urn:dece:apid:file:INTERACTIVE_MetadataDigitalCreate.txt:39983831</con:value></con:property><con:property><con:name>CertMatchesNodeID</con:name><con:value>YES</con:value></con:property><con:property><con:name>versionUrlEncode</con:name><con:value>06</con:value></con:property><con:property><con:name>coordinatorSchema_02</con:name><con:value>http://www.decellc.org/schema/2015/03/coordinator</con:value></con:property><con:property><con:name>ENV</con:name><con:value>QALP1</con:value></con:property><con:property><con:name>targetHostd</con:name><con:value>qa.d.uvvu.com</con:value></con:property><con:property><con:name>targetPortd</con:name><con:value>7001</con:value></con:property><con:property><con:name>OrgID</con:name><con:value>ISC_R1</con:value></con:property><con:property><con:name>JKSAliasName</con:name><con:value>qalp1</con:value></con:property><con:property><con:name>JKSPassword</con:name><con:value>testing</con:value></con:property><con:property><con:name>ExecutionPriority</con:name><con:value>P0,P1,P2,P3</con:value></con:property><con:property><con:name>cacheDuration</con:name><con:value>86400</con:value></con:property><con:property><con:name>envIdentifier</con:name><con:value>LP1</con:value></con:property><con:property><con:name>targetHostS</con:name><con:value>qa1.s.uvvu.com</con:value></con:property><con:property><con:name>targetHostP</con:name><con:value>qa1.p.uvvu.com</con:value></con:property><con:property><con:name>targetHostC</con:name><con:value>qa1.c.uvvu.com</con:value></con:property><con:property><con:name>targetHostB</con:name><con:value>qa1.b.uvvu.com</con:value></con:property><con:property><con:name>DBIdentifier</con:name><con:value>LP1</con:value></con:property><con:property><con:name>CertMatchesNodeName</con:name><con:value>YES</con:value></con:property><con:property><con:name>Coordinator_Schema</con:name><con:value>http://www.decellc.org/schema/2015/03/coordinator</con:value></con:property><con:property><con:name>Batch_HostName</con:name><con:value>https://qa1.b.uvvu.com</con:value></con:property><con:property><con:name>enablePriorityScript</con:name><con:value>false</con:value></con:property><con:property><con:name>disablePriority</con:name><con:value>P3,CHILD,CLG</con:value></con:property><con:property><con:name>coords</con:name><con:value>FALKY,COORD-10000,COORD-3034,COORD-2999,COORD-2509,COORD-627,UV-135,UV-340,Coord-2180</con:value></con:property><con:property><con:name>runTeardown</con:name><con:value>false</con:value></con:property><con:property><con:name>clusterNumber</con:name><con:value>1</con:value></con:property><con:property><con:name>ParamRTUReqWithOnlyUHD</con:name><con:value><![CDATA[<ns4:RightsTokenFull ALID="${#TestCase#ALID}" xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/WEB-INF/dece.xsd" ContentID="${#TestCase#ContentID}" xmlns:ns4= "${#Project#coordinatorSchema}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 	<ns4:SoldAs> 		<ns4:DisplayName Language= "${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName> 		<ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID> 	 </ns4:SoldAs> 	<ns4:RightsProfiles>                                                                                      <ns4:PurchaseProfile    MediaProfile="${#TestCase#PPContentProfile3}" HighDynamicRange="${#TestCase#HighDynamicRange}"   HighFrameRate="${#TestCase#HighFrameRate}"    WideColorGamut="${#TestCase#WideColorGamut}"  NextGenAudio="${#TestCase#NextGenAudio}">                                           <ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload>                                           <ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream>                             </ns4:PurchaseProfile> 	</ns4:RightsProfiles> 	<ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc> 	<ns4:FulfillmentWebLoc MediaProfile= "${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location> 		<ns4:Preference> ${#TestCase#FFWebLocPreference1}</ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type= "ns4:ResourceLocation-type"> 		<ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFWebLocPreference2} </ns4:Preference> 	</ns4:FulfillmentWebLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">  		<ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type"> 		 <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location> 		<ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference> 	 </ns4:FulfillmentManifestLoc> 	<ns4:PurchaseInfo> 		<ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID> 		<ns4:RetailerTransaction> ${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction> 		<ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount> 		 <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser> 		<ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime> 	</ns4:PurchaseInfo>  	<ns4:RightsLockerID>${#TestCase#RightsLockerID}</ns4:RightsLockerID>]]></con:value></con:property><con:property><con:name>ParamRTCreateReqUHD</con:name><con:value><![CDATA[<ns4:RightsTokenData xmlns:ns1="http://www.w3.org/2001/04/xmlenc#"  xmlns:ns2="http://www.movielabs.com/md"  xmlns:ns3="http://www.w3.org/2000/09/xmldsig#"   xmlns:ns4="${#Project#coordinatorSchema}"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.decellc.org/schema  file:/C:/5Work/Workspaces/workspace-sts-2.3.3/dece_api/src/main/webapp/schemas/dece.xsd"   ALID="${#TestCase#ALID}" ContentID="${#TestCase#ContentID}">         <ns4:SoldAs>                     <ns4:DisplayName Language="${#TestCase#SoldAsLanguage}">${#TestCase#SoldAsDisplayName}</ns4:DisplayName>                      <ns4:ContentID>${#TestCase#SoldAsContentID}</ns4:ContentID>         </ns4:SoldAs>   <ns4:RightsProfiles>                       <ns4:PurchaseProfile  MediaProfile="${#TestCase#PPContentProfile2}">                                         <ns4:CanDownload>${#TestCase#PPCanDownLoad1}</ns4:CanDownload>                                         <ns4:CanStream>${#TestCase#PPCanStream1}</ns4:CanStream>                           </ns4:PurchaseProfile>       <ns4:PurchaseProfile    MediaProfile="${#TestCase#PPContentProfile3}" HighDynamicRange="${#TestCase#HighDynamicRange}"   HighFrameRate="${#TestCase#HighFrameRate}"    WideColorGamut="${#TestCase#WideColorGamut}"  NextGenAudio="${#TestCase#NextGenAudio}">                                           <ns4:CanDownload>${#TestCase#PPCanDownLoad3}</ns4:CanDownload>                                           <ns4:CanStream>${#TestCase#PPCanStream3}</ns4:CanStream>                             </ns4:PurchaseProfile> 	                                                          </ns4:RightsProfiles>      <ns4:LicenseAcqBaseLoc>${#TestCase#LICAcqBaseLoc}</ns4:LicenseAcqBaseLoc>         <ns4:FulfillmentWebLoc MediaProfile="${#TestCase#PPContentProfile1}"  xsi:type="ns4:ResourceLocation-type">                               <ns4:Location>${#TestCase#FFWebLocLocation1}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference1}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentWebLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                          <ns4:Location>${#TestCase#FFWebLocLocation2}</ns4:Location>                            <ns4:Preference>${#TestCase#FFWebLocPreference2}</ns4:Preference>         </ns4:FulfillmentWebLoc>                 <ns4:FulfillmentManifestLoc  MediaProfile="${#TestCase#PPContentProfile1}" xsi:type="ns4:ResourceLocation-type">                           <ns4:Location>${#TestCase#FFManifestLocLocation1}</ns4:Location>                 <ns4:Preference>${#TestCase#FFManifestLocPreference1}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:FulfillmentManifestLoc MediaProfile="${#TestCase#PPContentProfile2}" xsi:type="ns4:ResourceLocation-type">                                <ns4:Location>${#TestCase#FFManifestLocLocation2}</ns4:Location>                 <ns4:Preference>${#TestCase#FFManifestLocPreference2}</ns4:Preference>                 </ns4:FulfillmentManifestLoc> <ns4:PurchaseInfo>                       <ns4:NodeID>${#TestCase#PINodeID}</ns4:NodeID>                   <ns4:RetailerTransaction>${#TestCase#PIRetailerTransx}</ns4:RetailerTransaction>                       <ns4:PurchaseAccount>${#TestCase#PIPurchaseAccount}</ns4:PurchaseAccount>                       <ns4:PurchaseUser>${#TestCase#PIPurchaseUser}</ns4:PurchaseUser>                             <ns4:PurchaseTime>${#TestCase#PIPurchaseTime}</ns4:PurchaseTime>            <ns4:TransactionType>urn:dece:type:transaction:category1</ns4:TransactionType></ns4:PurchaseInfo> </ns4:RightsTokenData>]]></con:value></con:property><con:property><con:name>Rights_APID</con:name><con:value>urn:dece:apid:file:INTERACTIVE_MetadataDigitalCreate.txt:39983831</con:value></con:property><con:property><con:name>Rights_ALID</con:name><con:value>urn:dece:alid:file:RTUPDATE_R3_EXAMPLE_ALIDVersion_212395.txt</con:value></con:property><con:property><con:name>Rights_CID</con:name><con:value>urn:dece:cid:file:RTUPDATE_R3_EXAMPLE_CIDVersion_212395.txt</con:value></con:property><con:property><con:name>Streams_APID</con:name><con:value>urn:dece:apid:file:AUDIO_MetadataDigitalCreate.txt:242394094</con:value></con:property><con:property><con:name>Streams_ALID</con:name><con:value>urn:dece:alid:file:EXAMPLE_ALID_Version_561393521.txt</con:value></con:property><con:property><con:name>Streams_CID</con:name><con:value>urn:dece:cid:file:A_File_Name_with_NUMBERS_344946277.txt</con:value></con:property><con:property><con:name>DMR_CID</con:name><con:value>urn:dece:cid:org:200002</con:value></con:property><con:property><con:name>DMR_APID</con:name><con:value>urn:dece:apid:org:200002</con:value></con:property><con:property><con:name>DMR_ALID</con:name><con:value>urn:dece:alid:org:200002</con:value></con:property><con:property><con:name>DMR_BID</con:name><con:value>urn:dece:bid:org:200002</con:value></con:property><con:property><con:name>enableFlakyScript</con:name><con:value>false</con:value></con:property><con:property><con:name>FLAKYSELECTOR</con:name><con:value>without_flaky</con:value></con:property></con:properties>
  <con:afterLoadScript>def filePath = context.expand( '${System#File}' )
log.info "filePath=="+filePath;

</con:afterLoadScript><con:wssContainer>
    
    
    
    
  </con:wssContainer>
  <con:databaseConnectionContainer>
    <con:databaseConnection>
      <con:name>Test</con:name>
      <con:driver>sun.jdbc.odbc.JdbcOdbcDriver</con:driver>
      <con:connectionString>jdbc:odbc:de?user=decqa2&amp;password=PASS_VALUE</con:connectionString>
      <con:password>dec2010</con:password>
    </con:databaseConnection>
  </con:databaseConnectionContainer>
  <con:reporting>
    <con:xmlTemplates/>
    <con:parameters/>
  </con:reporting>
  <con:eventHandlers type="TestRunListener.afterStep" name="TestRunListener.afterStep"><con:script>if(testStepResult.getTestStep().config.type.toString() == "restrequest"){
log.info("################################################################################");
log.info("Logging Request and Response for rest teststep : '" + testStepResult.getTestStep().getName());           

//Get request  byte array and convert it to string and log
byte [] tempByteArrRequest = testStepResult.getRawRequestData();
String tempRequest = new String(tempByteArrRequest);
log.info("-----------------------------Request--------------------------------");
log.info(tempRequest);

byte [] tempByteArrResponse = testStepResult.getRawResponseData();
String tempResponse = new String(tempByteArrResponse);


log.info("-----------------------------Response--------------------------------");
log.info(tempResponse);

log.info("################################################################################");

}
else{
                log.info("TestStep type  : " + testStepResult.getTestStep().config.type)
}
</con:script></con:eventHandlers><con:sensitiveInformation/>
</con:soapui-project>